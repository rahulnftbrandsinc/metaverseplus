{"version":3,"sources":["../../source/plugins/ListPlugin.js"],"names":["ListPlugin","lists","context","onRegisterList","name","onReset","values","key","form","fields","state","Object","keys","field","indexOf","resetField"],"mappings":";;;;;;;;;AAAA;;;;IAKqBA,U;;;;OAEpBC,K,GAAQ,E;;AADR;;;;;8BAGYC,O,EAAS;AAAA;;AACpBA,WAAQC,cAAR,GAAyB,UAACC,IAAD,QAAuB;AAAA,QAAdC,OAAc,QAAdA,OAAc;;AAC/C,UAAKJ,KAAL,CAAWG,IAAX,IAAmB,EAAEC,gBAAF,EAAnB;AACA,IAFD;AAGA;;;4BAESC,M,EAAQ;AACjB;AACA;AACA,UAAO,mCAAkBA,MAAlB,CAAP;AACA;;;2BAEQA,M,EAAQC,G,EAAK;AACrB,UAAO,8BAAaD,MAAb,EAAqBC,GAArB,CAAP;AACA;;;+BAEYH,I,EAAMI,I,EAAM;AACxB,OAAI,KAAKP,KAAL,CAAWG,IAAX,CAAJ,EAAsB;AAAA,QACbK,MADa,GACFD,KAAKE,KADH,CACbD,MADa;;AAErB,yBAAoBE,OAAOC,IAAP,CAAYH,MAAZ,CAApB,kHAAyC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,SAA9BI,KAA8B;;AACxC,SAAIA,MAAMC,OAAN,CAAiBV,IAAjB,YAA8B,CAAlC,EAAqC;AACpCI,WAAKO,UAAL,CAAgBF,KAAhB;AACA;AACD;AACD,SAAKZ,KAAL,CAAWG,IAAX,EAAiBC,OAAjB;AACA,WAAO,IAAP;AACA;AACD;;;;;;kBA/BmBL,U","file":"ListPlugin.js","sourcesContent":["import {\r\n\tgetListValue,\r\n\tconvertListValues\r\n} from './ListPlugin.utility'\r\n\r\nexport default class ListPlugin {\r\n\t// Tracks `<List/>`s.\r\n\tlists = {}\r\n\r\n\tinitContext(context) {\r\n\t\tcontext.onRegisterList = (name, { onReset }) => {\r\n\t\t\tthis.lists[name] = { onReset }\r\n\t\t}\r\n\t}\r\n\r\n\tgetValues(values) {\r\n\t\t// In `values`, replace all entries having keys `${list}:${index}:${field}`\r\n\t\t// with a single `${list}` entry being an array of objects with keys `${field}`.\r\n\t\treturn convertListValues(values)\r\n\t}\r\n\r\n\tgetValue(values, key) {\r\n\t\treturn getListValue(values, key)\r\n\t}\r\n\r\n\tonResetField(name, form) {\r\n\t\tif (this.lists[name]) {\r\n\t\t\tconst { fields } = form.state\r\n\t\t\tfor (const field of Object.keys(fields)) {\r\n\t\t\t\tif (field.indexOf(`${name}:`) === 0) {\r\n\t\t\t\t\tform.resetField(field)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.lists[name].onReset()\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n}"]}