"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Pdf = void 0;
/** @jsx jsx */
var react_1 = require("react");
var theming_1 = require("@storybook/theming");
var components_1 = require("@storybook/components");
var entry_webpack_1 = require("react-pdf/dist/entry.webpack");
var Pan_1 = require("./Pan");
var ZoomButtons_1 = require("./ZoomButtons");
var usePage_1 = require("./hooks/usePage");
var useZoom_1 = require("./hooks/useZoom");
var loadingMessage = theming_1.jsx(components_1.Placeholder, null, "Loading PDF...");
exports.Pdf = function (_a) {
    var config = _a.config;
    var page = usePage_1.usePage(config.page);
    var onLoadPdf = react_1.useCallback(function (doc) {
        page.init(doc.numPages);
    }, [page.init]);
    var _b = useZoom_1.useZoom(config.scale || 1, [
        config.scale
    ]), scale = _b.scale, zoomIn = _b.zoomIn, zoomOut = _b.zoomOut, resetZoom = _b.resetZoom;
    return (theming_1.jsx("div", { css: $container },
        theming_1.jsx(components_1.FlexBar, { border: true },
            theming_1.jsx(react_1.Fragment, { key: "left" },
                theming_1.jsx("p", null,
                    theming_1.jsx("b", null, "PDF")),
                theming_1.jsx(components_1.Separator, null),
                theming_1.jsx(ZoomButtons_1.ZoomButtons, { onReset: resetZoom, onZoomIn: zoomIn, onZoomOut: zoomOut }),
                theming_1.jsx(components_1.Separator, null),
                theming_1.jsx(components_1.IconButton, { css: $disabled, onClick: page.prev, disabled: page.isFirst },
                    theming_1.jsx(components_1.Icons, { icon: "arrowleft" })),
                theming_1.jsx("div", { css: $pageIndicator },
                    page.current,
                    " / ",
                    page.total),
                theming_1.jsx(components_1.IconButton, { css: $disabled, onClick: page.next, disabled: page.isLast },
                    theming_1.jsx(components_1.Icons, { icon: "arrowright" })))),
        theming_1.jsx(Pan_1.Pan, { css: $pdf, defaultValue: config.offset },
            theming_1.jsx(entry_webpack_1.Document, { file: config.url, loading: loadingMessage, onLoadSuccess: onLoadPdf },
                theming_1.jsx(entry_webpack_1.Page, { css: $page, loading: loadingMessage, pageNumber: page.current, scale: scale })))));
};
exports.default = exports.Pdf;
var $container = theming_1.css(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n"], ["\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n"])));
var $disabled = function (theme) { return theming_1.css(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  &[disabled] {\n    color: ", ";\n    cursor: not-allowed;\n  }\n"], ["\n  &[disabled] {\n    color: ", ";\n    cursor: not-allowed;\n  }\n"])), theme.color.medium); };
var $pdf = theming_1.css(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  flex-grow: 1;\n"], ["\n  flex-grow: 1;\n"])));
var $page = theming_1.css(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  position: absolute !important;\n  top: 50%;\n  left: 50%;\n  display: inline-block;\n\n  border-radius: 1px;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.15);\n\n  transform: translate(-50%, -50%);\n"], ["\n  position: absolute !important;\n  top: 50%;\n  left: 50%;\n  display: inline-block;\n\n  border-radius: 1px;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.15);\n\n  transform: translate(-50%, -50%);\n"])));
var $pageIndicator = theming_1.css(templateObject_5 || (templateObject_5 = __makeTemplateObject(["\n  display: flex;\n  align-items: center;\n"], ["\n  display: flex;\n  align-items: center;\n"])));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;
