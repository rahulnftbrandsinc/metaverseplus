/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,r,q){c!=Array.prototype&&c!=Object.prototype&&(c[r]=q.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,r,q,k){if(r){q=$jscomp.global;c=c.split(".");for(k=0;k<c.length-1;k++){var a=c[k];a in q||(q[a]={});q=q[a]}c=c[c.length-1];k=q[c];r=r(k);r!=k&&null!=r&&$jscomp.defineProperty(q,c,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,q,k){var a=this.length||0;0>q&&(q=Math.max(0,a+q));if(null==k||k>a)k=a;k=Number(k);0>k&&(k=Math.max(0,a+k));for(q=Number(q||0);q<k;q++)this[q]=c;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(r){return $jscomp.SYMBOL_PREFIX+(r||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var r=0;return $jscomp.iteratorPrototype(function(){return r<c.length?{done:!1,value:c[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,r){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var q=0,k={next:function(){if(q<c.length){var a=q++;return{value:r(a,c[a]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(c){return c?c:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(c){return c?c:function(c){var q=[],k=Object.getOwnPropertyNames(c);c=Object.getOwnPropertySymbols(c);for(var a=0;a<k.length;a++)("jscomp_symbol_"==k[a].substring(0,14)?c:q).push(k[a]);return q.concat(c)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var q="",k=0;k<arguments.length;k++){var a=Number(arguments[k]);if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?q+=String.fromCharCode(a):(a-=65536,q+=String.fromCharCode(a>>>10&1023|55296),q+=String.fromCharCode(a&1023|56320))}return q}},"es6","es3");$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(r,q,k){function a(p,t){if(!q[p]){if(!r[p]){var d="function"==typeof require&&require;if(!t&&d)return d(p,!0);if(l)return l(p,!0);t=Error("Cannot find module '"+p+"'");throw t.code="MODULE_NOT_FOUND",t;}t=
q[p]={exports:{}};r[p][0].call(t.exports,function(d){return a(r[p][1][d]||d)},t,t.exports,c,r,q,k)}return q[p].exports}for(var l="function"==typeof require&&require,p=0;p<k.length;p++)a(k[p]);return a}return c}()({1:[function(c,r,q){function k(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===d?0:4-a%4]}function a(a,d,f){for(var c=[],t=d;t<f;t+=3)d=(a[t]<<16&16711680)+(a[t+1]<<8&65280)+(a[t+2]&255),c.push(l[d>>18&63]+
l[d>>12&63]+l[d>>6&63]+l[d&63]);return c.join("")}q.byteLength=function(a){a=k(a);var d=a[1];return 3*(a[0]+d)/4-d};q.toByteArray=function(a){var d=k(a);var f=d[0];d=d[1];for(var l=new w(3*(f+d)/4-d),c=0,b=0<d?f-4:f,e=0;e<b;e+=4)f=p[a.charCodeAt(e)]<<18|p[a.charCodeAt(e+1)]<<12|p[a.charCodeAt(e+2)]<<6|p[a.charCodeAt(e+3)],l[c++]=f>>16&255,l[c++]=f>>8&255,l[c++]=f&255;2===d&&(f=p[a.charCodeAt(e)]<<2|p[a.charCodeAt(e+1)]>>4,l[c++]=f&255);1===d&&(f=p[a.charCodeAt(e)]<<10|p[a.charCodeAt(e+1)]<<4|p[a.charCodeAt(e+
2)]>>2,l[c++]=f>>8&255,l[c++]=f&255);return l};q.fromByteArray=function(c){for(var d=c.length,f=d%3,k=[],t=0,b=d-f;t<b;t+=16383)k.push(a(c,t,t+16383>b?b:t+16383));1===f?(c=c[d-1],k.push(l[c>>2]+l[c<<4&63]+"==")):2===f&&(c=(c[d-2]<<8)+c[d-1],k.push(l[c>>10]+l[c>>4&63]+l[c<<2&63]+"="));return k.join("")};var l=[],p=[],w="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)l[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;p[45]=62;p[95]=63},{}],2:[function(c,r,q){},{}],3:[function(c,r,q){function k(b){if(!b)return"utf8";for(var d;;)switch(b){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return b;default:if(d)return;b=(""+b).toLowerCase();d=!0}}function a(a){var v=k(a);if("string"!==typeof v&&(e.isEncoding===u||!u(a)))throw Error("Unknown encoding: "+a);this.encoding=v||
a;switch(this.encoding){case "utf16le":this.text=t;this.end=d;a=4;break;case "utf8":this.fillLast=w;a=4;break;case "base64":this.text=f;this.end=A;a=3;break;default:this.write=n;this.end=b;return}this.lastTotal=this.lastNeed=0;this.lastChar=e.allocUnsafe(a)}function l(b){return 127>=b?0:6===b>>5?2:14===b>>4?3:30===b>>3?4:2===b>>6?-1:-2}function p(b,d,a){var e=d.length-1;if(e<a)return 0;var f=l(d[e]);if(0<=f)return 0<f&&(b.lastNeed=f-1),f;if(--e<a||-2===f)return 0;f=l(d[e]);if(0<=f)return 0<f&&(b.lastNeed=
f-2),f;if(--e<a||-2===f)return 0;f=l(d[e]);return 0<=f?(0<f&&(2===f?f=0:b.lastNeed=f-3),f):0}function w(b){var d=this.lastTotal-this.lastNeed;a:if(128!==(b[0]&192)){this.lastNeed=0;var a="\ufffd"}else{if(1<this.lastNeed&&1<b.length){if(128!==(b[1]&192)){this.lastNeed=1;a="\ufffd";break a}if(2<this.lastNeed&&2<b.length&&128!==(b[2]&192)){this.lastNeed=2;a="\ufffd";break a}}a=void 0}if(void 0!==a)return a;if(this.lastNeed<=b.length)return b.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,
0,this.lastTotal);b.copy(this.lastChar,d,0,b.length);this.lastNeed-=b.length}function t(b,d){if(0===(b.length-d)%2){if(d=b.toString("utf16le",d)){var a=d.charCodeAt(d.length-1);if(55296<=a&&56319>=a)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],d.slice(0,-1)}return d}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=b[b.length-1];return b.toString("utf16le",d,b.length-1)}function d(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+this.lastChar.toString("utf16le",
0,this.lastTotal-this.lastNeed):b}function f(b,d){var a=(b.length-d)%3;if(0===a)return b.toString("base64",d);this.lastNeed=3-a;this.lastTotal=3;1===a?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]);return b.toString("base64",d,b.length-a)}function A(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function n(b){return b.toString(this.encoding)}function b(b){return b&&b.length?this.write(b):
""}var e=c("safe-buffer").Buffer,u=e.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};q.StringDecoder=a;a.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var d=this.fillLast(b);if(void 0===d)return"";var a=this.lastNeed;this.lastNeed=0}else a=0;return a<b.length?d?d+this.text(b,a):this.text(b,a):
d||""};a.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};a.prototype.text=function(b,d){var a=p(this,b,d);if(!this.lastNeed)return b.toString("utf8",d);this.lastTotal=a;a=b.length-(a-this.lastNeed);b.copy(this.lastChar,0,a);return b.toString("utf8",d,a)};a.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length}},{"safe-buffer":25}],4:[function(c,r,q){(function(k){var a=c("buffer"),l=a.Buffer,p=a.SlowBuffer,w=a.kMaxLength||2147483647;q.alloc=function(a,d,f){if("function"===typeof l.alloc)return l.alloc(a,d,f);if("number"===typeof f)throw new TypeError("encoding must not be number");if("number"!==typeof a)throw new TypeError("size must be a number");if(a>w)throw new RangeError("size is too large");var c=d;void 0===c&&(f=void 0,c=0);d=new l(a);
if("string"===typeof c){f=new l(c,f);c=f.length;for(var k=-1;++k<a;)d[k]=f[k%c]}else d.fill(c);return d};q.allocUnsafe=function(a){if("function"===typeof l.allocUnsafe)return l.allocUnsafe(a);if("number"!==typeof a)throw new TypeError("size must be a number");if(a>w)throw new RangeError("size is too large");return new l(a)};q.from=function(a,d,f){if("function"===typeof l.from&&(!k.Uint8Array||Uint8Array.from!==l.from))return l.from(a,d,f);if("number"===typeof a)throw new TypeError('"value" argument must not be a number');
if("string"===typeof a)return new l(a,d);if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer){var c=d;if(1===arguments.length)return new l(a);"undefined"===typeof c&&(c=0);var n=f;"undefined"===typeof n&&(n=a.byteLength-c);if(c>=a.byteLength)throw new RangeError("'offset' is out of bounds");if(n>a.byteLength-c)throw new RangeError("'length' is out of bounds");return new l(a.slice(c,c+n))}if(l.isBuffer(a))return c=new l(a.length),a.copy(c,0,0,a.length),c;if(a){if(Array.isArray(a)||"undefined"!==
typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return new l(a);if("Buffer"===a.type&&Array.isArray(a.data))return new l(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");};q.allocUnsafeSlow=function(a){if("function"===typeof l.allocUnsafeSlow)return l.allocUnsafeSlow(a);if("number"!==typeof a)throw new TypeError("size must be a number");if(a>=w)throw new RangeError("size is too large");return new p(a)}}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{buffer:5}],5:[function(c,r,q){function k(g){if(g>z)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);g.__proto__=a.prototype;return g}function a(g,h,b){if("number"===typeof g){if("string"===typeof h)throw new TypeError('The "string" argument must be of type string. Received type number');return w(g)}return l(g,h,b)}function l(g,h,b){if("string"===typeof g){var C=
h;if("string"!==typeof C||""===C)C="utf8";if(!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);h=A(g,C)|0;b=k(h);g=b.write(g,C);g!==h&&(b=b.slice(0,g));return b}if(ArrayBuffer.isView(g))return t(g);if(null==g)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(L(g,ArrayBuffer)||g&&L(g.buffer,ArrayBuffer)){if(0>h||g.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<
h+(b||0))throw new RangeError('"length" is outside of buffer bounds');g=void 0===h&&void 0===b?new Uint8Array(g):void 0===b?new Uint8Array(g,h):new Uint8Array(g,h,b);g.__proto__=a.prototype;return g}if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');C=g.valueOf&&g.valueOf();if(null!=C&&C!==g)return a.from(C,h,b);if(C=d(g))return C;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return a.from(g[Symbol.toPrimitive]("string"),
h,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);}function p(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function w(g){p(g);return k(0>g?0:f(g)|0)}function t(g){for(var h=0>g.length?0:f(g.length)|0,b=k(h),a=0;a<h;a+=1)b[a]=g[a]&255;return b}function d(g){if(a.isBuffer(g)){var h=
f(g.length)|0,b=k(h);if(0===b.length)return b;g.copy(b,0,0,h);return b}if(void 0!==g.length)return(h="number"!==typeof g.length)||(h=g.length,h=h!==h),h?k(0):t(g);if("Buffer"===g.type&&Array.isArray(g.data))return t(g.data)}function f(g){if(g>=z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z.toString(16)+" bytes");return g|0}function A(g,h){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||L(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var b=g.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===b)return 0;for(var e=!1;;)switch(h){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":return G(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return F.toByteArray(B(g)).length;default:if(e)return d?-1:G(g).length;h=(""+h).toLowerCase();e=!0}}function n(g,h,b){var a=!1;if(void 0===h||0>h)h=0;if(h>this.length)return"";if(void 0===b||
b>this.length)b=this.length;if(0>=b)return"";b>>>=0;h>>>=0;if(b<=h)return"";for(g||(g="utf8");;)switch(g){case "hex":g=h;h=b;b=this.length;if(!g||0>g)g=0;if(!h||0>h||h>b)h=b;a="";for(b=g;b<h;++b)g=a,a=this[b],a=16>a?"0"+a.toString(16):a.toString(16),a=g+a;return a;case "utf8":case "utf-8":return v(this,h,b);case "ascii":g="";for(b=Math.min(this.length,b);h<b;++h)g+=String.fromCharCode(this[h]&127);return g;case "latin1":case "binary":g="";for(b=Math.min(this.length,b);h<b;++h)g+=String.fromCharCode(this[h]);
return g;case "base64":return h=0===h&&b===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(h,b)),h;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=this.slice(h,b);b="";for(g=0;g<h.length;g+=2)b+=String.fromCharCode(h[g]+256*h[g+1]);return b;default:if(a)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();a=!0}}function b(g,h,b){var a=g[h];g[h]=g[b];g[b]=a}function e(g,h,b,d,e){if(0===g.length)return-1;"string"===typeof b?(d=b,b=0):2147483647<b?b=2147483647:-2147483648>
b&&(b=-2147483648);b=+b;b!==b&&(b=e?0:g.length-1);0>b&&(b=g.length+b);if(b>=g.length){if(e)return-1;b=g.length-1}else if(0>b)if(e)b=0;else return-1;"string"===typeof h&&(h=a.from(h,d));if(a.isBuffer(h))return 0===h.length?-1:u(g,h,b,d,e);if("number"===typeof h)return h&=255,"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(g,h,b):Uint8Array.prototype.lastIndexOf.call(g,h,b):u(g,[h],b,d,e);throw new TypeError("val must be string, number or Buffer");}function u(g,
h,b,a,d){function e(g,h){return 1===C?g[h]:g.readUInt16BE(h*C)}var C=1,f=g.length,c=h.length;if(void 0!==a&&(a=String(a).toLowerCase(),"ucs2"===a||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(2>g.length||2>h.length)return-1;C=2;f/=2;c/=2;b/=2}if(d)for(a=-1;b<f;b++)if(e(g,b)===e(h,-1===a?0:b-a)){if(-1===a&&(a=b),b-a+1===c)return a*C}else-1!==a&&(b-=b-a),a=-1;else for(b+c>f&&(b=f-c);0<=b;b--){f=!0;for(a=0;a<c;a++)if(e(g,b+a)!==e(h,a)){f=!1;break}if(f)return b}return-1}function v(g,h,b){b=Math.min(g.length,
b);for(var a=[];h<b;){var d=g[h],e=null,f=239<d?4:223<d?3:191<d?2:1;if(h+f<=b)switch(f){case 1:128>d&&(e=d);break;case 2:var C=g[h+1];128===(C&192)&&(d=(d&31)<<6|C&63,127<d&&(e=d));break;case 3:C=g[h+1];var c=g[h+2];128===(C&192)&&128===(c&192)&&(d=(d&15)<<12|(C&63)<<6|c&63,2047<d&&(55296>d||57343<d)&&(e=d));break;case 4:C=g[h+1];c=g[h+2];var l=g[h+3];128===(C&192)&&128===(c&192)&&128===(l&192)&&(d=(d&15)<<18|(C&63)<<12|(c&63)<<6|l&63,65535<d&&1114112>d&&(e=d))}null===e?(e=65533,f=1):65535<e&&(e-=
65536,a.push(e>>>10&1023|55296),e=56320|e&1023);a.push(e);h+=f}g=a.length;if(g<=P)a=String.fromCharCode.apply(String,a);else{b="";for(h=0;h<g;)b+=String.fromCharCode.apply(String,a.slice(h,h+=P));a=b}return a}function y(g,h,b){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+h>b)throw new RangeError("Trying to access beyond buffer length");}function K(g,h,b,d,e,f){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>e||h<f)throw new RangeError('"value" argument is out of bounds');
if(b+d>g.length)throw new RangeError("Index out of range");}function H(g,h,b,a,d,e){if(b+a>g.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range");}function I(g,h,b,a,d){h=+h;b>>>=0;d||H(g,h,b,4,3.4028234663852886E38,-3.4028234663852886E38);E.write(g,h,b,a,23,4);return b+4}function M(g,h,b,a,d){h=+h;b>>>=0;d||H(g,h,b,8,1.7976931348623157E308,-1.7976931348623157E308);E.write(g,h,b,a,52,8);return b+8}function B(g){g=g.split("=")[0];g=g.trim().replace(Q,
"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function G(g,h){h=h||Infinity;for(var b,a=g.length,d=null,e=[],f=0;f<a;++f){b=g.charCodeAt(f);if(55295<b&&57344>b){if(!d){if(56319<b){-1<(h-=3)&&e.push(239,191,189);continue}else if(f+1===a){-1<(h-=3)&&e.push(239,191,189);continue}d=b;continue}if(56320>b){-1<(h-=3)&&e.push(239,191,189);d=b;continue}b=(d-55296<<10|b-56320)+65536}else d&&-1<(h-=3)&&e.push(239,191,189);d=null;if(128>b){if(0>--h)break;e.push(b)}else if(2048>b){if(0>(h-=2))break;
e.push(b>>6|192,b&63|128)}else if(65536>b){if(0>(h-=3))break;e.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(h-=4))break;e.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return e}function J(g){for(var b=[],a=0;a<g.length;++a)b.push(g.charCodeAt(a)&255);return b}function x(g,b,a,d){for(var h=0;h<d&&!(h+a>=b.length||h>=g.length);++h)b[h+a]=g[h];return h}function L(g,b){return g instanceof b||null!=g&&null!=g.constructor&&null!=g.constructor.name&&
g.constructor.name===b.name}var F=c("base64-js"),E=c("ieee754");q.Buffer=a;q.SlowBuffer=function(g){+g!=g&&(g=0);return a.alloc(+g)};q.INSPECT_MAX_BYTES=50;var z=2147483647;q.kMaxLength=z;a.TYPED_ARRAY_SUPPORT=function(){try{var g=new Uint8Array(1);g.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===g.foo()}catch(h){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(g,b,a){return l(g,b,a)};a.prototype.__proto__=Uint8Array.prototype;
a.__proto__=Uint8Array;a.alloc=function(g,b,a){p(g);g=0>=g?k(g):void 0!==b?"string"===typeof a?k(g).fill(b,a):k(g).fill(b):k(g);return g};a.allocUnsafe=function(g){return w(g)};a.allocUnsafeSlow=function(g){return w(g)};a.isBuffer=function(g){return null!=g&&!0===g._isBuffer&&g!==a.prototype};a.compare=function(g,b){L(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength));L(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength));if(!a.isBuffer(g)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(g===b)return 0;for(var h=g.length,d=b.length,e=0,f=Math.min(h,d);e<f;++e)if(g[e]!==b[e]){h=g[e];d=b[e];break}return h<d?-1:d<h?1:0};a.isEncoding=function(g){switch(String(g).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(g,b){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(0===g.length)return a.alloc(0);
var h;if(void 0===b)for(h=b=0;h<g.length;++h)b+=g[h].length;b=a.allocUnsafe(b);var d=0;for(h=0;h<g.length;++h){var e=g[h];L(e,Uint8Array)&&(e=a.from(e));if(!a.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};a.byteLength=A;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var g=this.length;if(0!==g%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<g;h+=2)b(this,h,h+1);return this};a.prototype.swap32=
function(){var g=this.length;if(0!==g%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<g;h+=4)b(this,h,h+3),b(this,h+1,h+2);return this};a.prototype.swap64=function(){var g=this.length;if(0!==g%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<g;h+=8)b(this,h,h+7),b(this,h+1,h+6),b(this,h+2,h+5),b(this,h+3,h+4);return this};a.prototype.toString=function(){var g=this.length;return 0===g?"":0===arguments.length?v(this,0,g):n.apply(this,
arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:0===a.compare(this,g)};a.prototype.inspect=function(){var g=q.INSPECT_MAX_BYTES;var b=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim();this.length>g&&(b+=" ... ");return"<Buffer "+b+">"};a.prototype.compare=function(g,b,d,e,f){L(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength));if(!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof g);void 0===b&&(b=0);void 0===d&&(d=g?g.length:0);void 0===e&&(e=0);void 0===f&&(f=this.length);if(0>b||d>g.length||0>e||f>this.length)throw new RangeError("out of range index");if(e>=f&&b>=d)return 0;if(e>=f)return-1;if(b>=d)return 1;b>>>=0;d>>>=0;e>>>=0;f>>>=0;if(this===g)return 0;var h=f-e,c=d-b,l=Math.min(h,c);e=this.slice(e,f);g=g.slice(b,d);for(b=0;b<l;++b)if(e[b]!==g[b]){h=e[b];c=g[b];break}return h<c?-1:c<h?1:0};a.prototype.includes=function(b,h,a){return-1!==this.indexOf(b,h,a)};a.prototype.indexOf=
function(b,h,a){return e(this,b,h,a,!0)};a.prototype.lastIndexOf=function(b,h,a){return e(this,b,h,a,!1)};a.prototype.write=function(b,h,a,d){if(void 0===h)d="utf8",a=this.length,h=0;else if(void 0===a&&"string"===typeof h)d=h,a=this.length,h=0;else if(isFinite(h))h>>>=0,isFinite(a)?(a>>>=0,void 0===d&&(d="utf8")):(d=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var g=this.length-h;if(void 0===a||a>g)a=g;if(0<b.length&&(0>a||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(g=!1;;)switch(d){case "hex":a:{h=Number(h)||0;d=this.length-h;a?(a=Number(a),a>d&&(a=d)):a=d;d=b.length;a>d/2&&(a=d/2);for(d=0;d<a;++d){g=parseInt(b.substr(2*d,2),16);if(g!==g){b=d;break a}this[h+d]=g}b=d}return b;case "utf8":case "utf-8":return x(G(b,this.length-h),this,h,a);case "ascii":return x(J(b),this,h,a);case "latin1":case "binary":return x(J(b),this,h,a);case "base64":return x(F.toByteArray(B(b)),this,h,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=b;g=this.length-
h;for(var e=[],f=0;f<d.length&&!(0>(g-=2));++f){var c=d.charCodeAt(f);b=c>>8;c%=256;e.push(c);e.push(b)}return x(e,this,h,a);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();g=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;a.prototype.slice=function(b,h){var g=this.length;b=~~b;h=void 0===h?g:~~h;0>b?(b+=g,0>b&&(b=0)):b>g&&(b=g);0>h?(h+=g,0>h&&(h=0)):h>g&&(h=g);h<b&&(h=b);b=this.subarray(b,h);b.__proto__=
a.prototype;return b};a.prototype.readUIntLE=function(b,h,a){b>>>=0;h>>>=0;a||y(b,h,this.length);a=this[b];for(var g=1,d=0;++d<h&&(g*=256);)a+=this[b+d]*g;return a};a.prototype.readUIntBE=function(b,h,a){b>>>=0;h>>>=0;a||y(b,h,this.length);a=this[b+--h];for(var g=1;0<h&&(g*=256);)a+=this[b+--h]*g;return a};a.prototype.readUInt8=function(b,h){b>>>=0;h||y(b,1,this.length);return this[b]};a.prototype.readUInt16LE=function(b,h){b>>>=0;h||y(b,2,this.length);return this[b]|this[b+1]<<8};a.prototype.readUInt16BE=
function(b,h){b>>>=0;h||y(b,2,this.length);return this[b]<<8|this[b+1]};a.prototype.readUInt32LE=function(b,h){b>>>=0;h||y(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};a.prototype.readUInt32BE=function(b,h){b>>>=0;h||y(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};a.prototype.readIntLE=function(b,h,a){b>>>=0;h>>>=0;a||y(b,h,this.length);a=this[b];for(var g=1,d=0;++d<h&&(g*=256);)a+=this[b+d]*g;a>=128*g&&(a-=Math.pow(2,8*h));return a};
a.prototype.readIntBE=function(b,h,a){b>>>=0;h>>>=0;a||y(b,h,this.length);a=h;for(var g=1,d=this[b+--a];0<a&&(g*=256);)d+=this[b+--a]*g;d>=128*g&&(d-=Math.pow(2,8*h));return d};a.prototype.readInt8=function(b,h){b>>>=0;h||y(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};a.prototype.readInt16LE=function(b,h){b>>>=0;h||y(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};a.prototype.readInt16BE=function(b,h){b>>>=0;h||y(b,2,this.length);b=this[b+1]|this[b]<<8;return b&
32768?b|4294901760:b};a.prototype.readInt32LE=function(b,h){b>>>=0;h||y(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};a.prototype.readInt32BE=function(b,h){b>>>=0;h||y(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};a.prototype.readFloatLE=function(b,h){b>>>=0;h||y(b,4,this.length);return E.read(this,b,!0,23,4)};a.prototype.readFloatBE=function(b,h){b>>>=0;h||y(b,4,this.length);return E.read(this,b,!1,23,4)};a.prototype.readDoubleLE=function(b,
h){b>>>=0;h||y(b,8,this.length);return E.read(this,b,!0,52,8)};a.prototype.readDoubleBE=function(b,h){b>>>=0;h||y(b,8,this.length);return E.read(this,b,!1,52,8)};a.prototype.writeUIntLE=function(b,h,a,d){b=+b;h>>>=0;a>>>=0;d||K(this,b,h,a,Math.pow(2,8*a)-1,0);d=1;var g=0;for(this[h]=b&255;++g<a&&(d*=256);)this[h+g]=b/d&255;return h+a};a.prototype.writeUIntBE=function(b,h,a,d){b=+b;h>>>=0;a>>>=0;d||K(this,b,h,a,Math.pow(2,8*a)-1,0);d=a-1;var g=1;for(this[h+d]=b&255;0<=--d&&(g*=256);)this[h+d]=b/g&
255;return h+a};a.prototype.writeUInt8=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,1,255,0);this[h]=b&255;return h+1};a.prototype.writeUInt16LE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,2,65535,0);this[h]=b&255;this[h+1]=b>>>8;return h+2};a.prototype.writeUInt16BE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,2,65535,0);this[h]=b>>>8;this[h+1]=b&255;return h+2};a.prototype.writeUInt32LE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,4,4294967295,0);this[h+3]=b>>>24;this[h+2]=b>>>16;this[h+1]=b>>>8;this[h]=b&
255;return h+4};a.prototype.writeUInt32BE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,4,4294967295,0);this[h]=b>>>24;this[h+1]=b>>>16;this[h+2]=b>>>8;this[h+3]=b&255;return h+4};a.prototype.writeIntLE=function(b,h,a,d){b=+b;h>>>=0;d||(d=Math.pow(2,8*a-1),K(this,b,h,a,d-1,-d));d=0;var g=1,e=0;for(this[h]=b&255;++d<a&&(g*=256);)0>b&&0===e&&0!==this[h+d-1]&&(e=1),this[h+d]=(b/g>>0)-e&255;return h+a};a.prototype.writeIntBE=function(b,h,a,d){b=+b;h>>>=0;d||(d=Math.pow(2,8*a-1),K(this,b,h,a,d-1,-d));d=a-
1;var g=1,e=0;for(this[h+d]=b&255;0<=--d&&(g*=256);)0>b&&0===e&&0!==this[h+d+1]&&(e=1),this[h+d]=(b/g>>0)-e&255;return h+a};a.prototype.writeInt8=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,1,127,-128);0>b&&(b=255+b+1);this[h]=b&255;return h+1};a.prototype.writeInt16LE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,2,32767,-32768);this[h]=b&255;this[h+1]=b>>>8;return h+2};a.prototype.writeInt16BE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,2,32767,-32768);this[h]=b>>>8;this[h+1]=b&255;return h+2};a.prototype.writeInt32LE=
function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,4,2147483647,-2147483648);this[h]=b&255;this[h+1]=b>>>8;this[h+2]=b>>>16;this[h+3]=b>>>24;return h+4};a.prototype.writeInt32BE=function(b,h,a){b=+b;h>>>=0;a||K(this,b,h,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[h]=b>>>24;this[h+1]=b>>>16;this[h+2]=b>>>8;this[h+3]=b&255;return h+4};a.prototype.writeFloatLE=function(b,h,a){return I(this,b,h,!0,a)};a.prototype.writeFloatBE=function(b,h,a){return I(this,b,h,!1,a)};a.prototype.writeDoubleLE=function(b,
h,a){return M(this,b,h,!0,a)};a.prototype.writeDoubleBE=function(b,h,a){return M(this,b,h,!1,a)};a.prototype.copy=function(b,h,d,e){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");d||(d=0);e||0===e||(e=this.length);h>=b.length&&(h=b.length);h||(h=0);0<e&&e<d&&(e=d);if(e===d||0===b.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("sourceEnd out of bounds");
e>this.length&&(e=this.length);b.length-h<e-d&&(e=b.length-h+d);var g=e-d;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(h,d,e);else if(this===b&&d<h&&h<e)for(e=g-1;0<=e;--e)b[e+h]=this[e+d];else Uint8Array.prototype.set.call(b,this.subarray(d,e),h);return g};a.prototype.fill=function(b,h,d,e){if("string"===typeof b){"string"===typeof h?(e=h,h=0,d=this.length):"string"===typeof d&&(e=d,d=this.length);if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");
if("string"===typeof e&&!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===e&&128>g||"latin1"===e)b=g}}else"number"===typeof b&&(b&=255);if(0>h||this.length<h||this.length<d)throw new RangeError("Out of range index");if(d<=h)return this;h>>>=0;d=void 0===d?this.length:d>>>0;b||(b=0);if("number"===typeof b)for(e=h;e<d;++e)this[e]=b;else{g=a.isBuffer(b)?b:a.from(b,e);var f=g.length;if(0===f)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(e=0;e<d-h;++e)this[e+h]=g[e%f]}return this};var Q=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:8}],6:[function(c,r,q){(function(c){q.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};q.isBoolean=function(a){return"boolean"===typeof a};q.isNull=function(a){return null===a};q.isNullOrUndefined=function(a){return null==a};q.isNumber=function(a){return"number"===typeof a};q.isString=function(a){return"string"===typeof a};q.isSymbol=function(a){return"symbol"===
typeof a};q.isUndefined=function(a){return void 0===a};q.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};q.isObject=function(a){return"object"===typeof a&&null!==a};q.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)};q.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||a instanceof Error};q.isFunction=function(a){return"function"===typeof a};q.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===
typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};q.isBuffer=c.isBuffer}).call(this,{isBuffer:c("../../is-buffer/index.js")})},{"../../is-buffer/index.js":10}],7:[function(c,r,q){function k(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=b(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function a(a,d,e,f){var c;if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');if(c=a._events){c.newListener&&
(a.emit("newListener",d,e.listener?e.listener:e),c=a._events);var l=c[d]}else c=a._events=b(null),a._eventsCount=0;l?("function"===typeof l?l=c[d]=f?[e,l]:[l,e]:f?l.unshift(e):l.push(e),l.warned||(e=void 0===a._maxListeners?k.defaultMaxListeners:a._maxListeners)&&0<e&&l.length>e&&(l.warned=!0,e=Error("Possible EventEmitter memory leak detected. "+l.length+' "'+String(d)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),e.name="MaxListenersExceededWarning",e.emitter=a,e.type=d,
e.count=l.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",e.name,e.message))):(c[d]=e,++a._eventsCount);return a}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);
default:for(var b=Array(arguments.length),a=0;a<b.length;++a)b[a]=arguments[a];this.listener.apply(this.target,b)}}function p(b,a,d){b={fired:!1,wrapFn:void 0,target:b,type:a,listener:d};a=u.call(l,b);a.listener=d;return b.wrapFn=a}function w(b,a,e){b=b._events;if(!b)return[];a=b[a];if(!a)return[];if("function"===typeof a)return e?[a.listener||a]:[a];if(e)for(e=Array(a.length),b=0;b<e.length;++b)e[b]=a[b].listener||a[b];else e=d(a,a.length);return e}function t(b){var a=this._events;if(a){b=a[b];if("function"===
typeof b)return 1;if(b)return b.length}return 0}function d(b,a){for(var d=Array(a),e=0;e<a;++e)d[e]=b[e];return d}function f(b){var a=function(){};a.prototype=b;return new a}function A(b){var a=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&a.push(d);return d}function n(b){var a=this;return function(){return a.apply(b,arguments)}}var b=Object.create||f,e=Object.keys||A,u=Function.prototype.bind||n;r.exports=k;k.EventEmitter=k;k.prototype._events=void 0;k.prototype._maxListeners=void 0;
var v=10;try{c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0});var y=0===c.x}catch(K){y=!1}y?Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');v=b}}):k.defaultMaxListeners=v;k.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');this._maxListeners=
b;return this};k.prototype.getMaxListeners=function(){return void 0===this._maxListeners?k.defaultMaxListeners:this._maxListeners};k.prototype.emit=function(b){var a,e,f;var c="error"===b;if(f=this._events)c=c&&null==f.error;else if(!c)return!1;if(c){1<arguments.length&&(a=arguments[1]);if(a instanceof Error)throw a;f=Error('Unhandled "error" event. ('+a+")");f.context=a;throw f;}a=f[b];if(!a)return!1;f="function"===typeof a;var l=arguments.length;switch(l){case 1:if(f)a.call(this);else for(f=a.length,
a=d(a,f),c=0;c<f;++c)a[c].call(this);break;case 2:c=arguments[1];if(f)a.call(this,c);else for(f=a.length,a=d(a,f),l=0;l<f;++l)a[l].call(this,c);break;case 3:c=arguments[1];l=arguments[2];if(f)a.call(this,c,l);else for(f=a.length,a=d(a,f),e=0;e<f;++e)a[e].call(this,c,l);break;case 4:c=arguments[1];l=arguments[2];e=arguments[3];if(f)a.call(this,c,l,e);else{f=a.length;a=d(a,f);for(var k=0;k<f;++k)a[k].call(this,c,l,e)}break;default:c=Array(l-1);for(e=1;e<l;e++)c[e-1]=arguments[e];if(f)a.apply(this,c);
else for(f=a.length,a=d(a,f),l=0;l<f;++l)a[l].apply(this,c)}return!0};k.prototype.addListener=function(b,d){return a(this,b,d,!1)};k.prototype.on=k.prototype.addListener;k.prototype.prependListener=function(b,d){return a(this,b,d,!0)};k.prototype.once=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(b,p(this,b,a));return this};k.prototype.prependOnceListener=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
this.prependListener(b,p(this,b,a));return this};k.prototype.removeListener=function(a,d){var e;if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');var f=this._events;if(!f)return this;var c=f[a];if(!c)return this;if(c===d||c.listener===d)0===--this._eventsCount?this._events=b(null):(delete f[a],f.removeListener&&this.emit("removeListener",a,c.listener||d));else if("function"!==typeof c){var l=-1;for(e=c.length-1;0<=e;e--)if(c[e]===d||c[e].listener===d){var k=c[e].listener;
l=e;break}if(0>l)return this;if(0===l)c.shift();else{e=l+1;for(var u=c.length;e<u;l+=1,e+=1)c[l]=c[e];c.pop()}1===c.length&&(f[a]=c[0]);f.removeListener&&this.emit("removeListener",a,k||d)}return this};k.prototype.removeAllListeners=function(a){var d=this._events;if(!d)return this;if(!d.removeListener)return 0===arguments.length?(this._events=b(null),this._eventsCount=0):d[a]&&(0===--this._eventsCount?this._events=b(null):delete d[a]),this;if(0===arguments.length){var f=e(d);for(d=0;d<f.length;++d){var c=
f[d];"removeListener"!==c&&this.removeAllListeners(c)}this.removeAllListeners("removeListener");this._events=b(null);this._eventsCount=0;return this}f=d[a];if("function"===typeof f)this.removeListener(a,f);else if(f)for(d=f.length-1;0<=d;d--)this.removeListener(a,f[d]);return this};k.prototype.listeners=function(b){return w(this,b,!0)};k.prototype.rawListeners=function(b){return w(this,b,!1)};k.listenerCount=function(b,a){return"function"===typeof b.listenerCount?b.listenerCount(a):t.call(b,a)};k.prototype.listenerCount=
t;k.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],8:[function(c,r,q){q.read=function(c,a,l,p,w){var k=8*w-p-1;var d=(1<<k)-1,f=d>>1,A=-7;w=l?w-1:0;var n=l?-1:1,b=c[a+w];w+=n;l=b&(1<<-A)-1;b>>=-A;for(A+=k;0<A;l=256*l+c[a+w],w+=n,A-=8);k=l&(1<<-A)-1;l>>=-A;for(A+=p;0<A;k=256*k+c[a+w],w+=n,A-=8);if(0===l)l=1-f;else{if(l===d)return k?NaN:Infinity*(b?-1:1);k+=Math.pow(2,p);l-=f}return(b?-1:1)*k*Math.pow(2,l-p)};q.write=function(c,a,l,p,w,t){var d,f=8*
t-w-1,k=(1<<f)-1,n=k>>1,b=23===w?Math.pow(2,-24)-Math.pow(2,-77):0;t=p?0:t-1;var e=p?1:-1,u=0>a||0===a&&0>1/a?1:0;a=Math.abs(a);isNaN(a)||Infinity===a?(a=isNaN(a)?1:0,p=k):(p=Math.floor(Math.log(a)/Math.LN2),1>a*(d=Math.pow(2,-p))&&(p--,d*=2),a=1<=p+n?a+b/d:a+b*Math.pow(2,1-n),2<=a*d&&(p++,d/=2),p+n>=k?(a=0,p=k):1<=p+n?(a=(a*d-1)*Math.pow(2,w),p+=n):(a=a*Math.pow(2,n-1)*Math.pow(2,w),p=0));for(;8<=w;c[l+t]=a&255,t+=e,a/=256,w-=8);p=p<<w|a;for(f+=w;0<f;c[l+t]=p&255,t+=e,p/=256,f-=8);c[l+t-e]|=128*
u}},{}],9:[function(c,r,q){r.exports="function"===typeof Object.create?function(c,a){c.super_=a;c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:function(c,a){c.super_=a;var l=function(){};l.prototype=a.prototype;c.prototype=new l;c.prototype.constructor=c}},{}],10:[function(c,r,q){function k(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}r.exports=function(a){return null!=a&&(k(a)||"function"===
typeof a.readFloatLE&&"function"===typeof a.slice&&k(a.slice(0,0))||!!a._isBuffer)}},{}],11:[function(c,r,q){var k={}.toString;r.exports=Array.isArray||function(a){return"[object Array]"==k.call(a)}},{}],12:[function(c,r,q){(function(c){function a(a,k,w,t){if("function"!==typeof a)throw new TypeError('"callback" argument must be a function');var d=arguments.length;switch(d){case 0:case 1:return c.nextTick(a);case 2:return c.nextTick(function(){a.call(null,k)});case 3:return c.nextTick(function(){a.call(null,
k,w)});case 4:return c.nextTick(function(){a.call(null,k,w,t)});default:var f=Array(d-1);for(d=0;d<f.length;)f[d++]=arguments[d];return c.nextTick(function(){a.apply(null,f)})}}!c.version||0===c.version.indexOf("v0.")||0===c.version.indexOf("v1.")&&0!==c.version.indexOf("v1.8.")?r.exports=a:r.exports=c.nextTick}).call(this,c("_process"))},{_process:13}],13:[function(c,r,q){function k(){throw Error("setTimeout has not been defined");}function a(){throw Error("clearTimeout has not been defined");}function l(b){if(A===
setTimeout)return setTimeout(b,0);if((A===k||!A)&&setTimeout)return A=setTimeout,setTimeout(b,0);try{return A(b,0)}catch(K){try{return A.call(null,b,0)}catch(H){return A.call(this,b,0)}}}function p(b){if(n===clearTimeout)return clearTimeout(b);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(b);try{return n(b)}catch(K){try{return n.call(null,b)}catch(H){return n.call(this,b)}}}function w(){e&&u&&(e=!1,u.length?b=u.concat(b):v=-1,b.length&&t())}function t(){if(!e){var a=l(w);e=!0;for(var d=
b.length;d;){u=b;for(b=[];++v<d;)u&&u[v].run();v=-1;d=b.length}u=null;e=!1;p(a)}}function d(b,a){this.fun=b;this.array=a}function f(){}c=r.exports={};try{var A="function"===typeof setTimeout?setTimeout:k}catch(y){A=k}try{var n="function"===typeof clearTimeout?clearTimeout:a}catch(y){n=a}var b=[],e=!1,u,v=-1;c.nextTick=function(a){var f=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)f[c-1]=arguments[c];b.push(new d(a,f));1!==b.length||e||l(t)};d.prototype.run=function(){this.fun.apply(null,
this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=f;c.addListener=f;c.once=f;c.off=f;c.removeListener=f;c.removeAllListeners=f;c.emit=f;c.prependListener=f;c.prependOnceListener=f;c.listeners=function(b){return[]};c.binding=function(b){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(b){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},{}],14:[function(c,r,q){r.exports=c("./lib/_stream_duplex.js")},
{"./lib/_stream_duplex.js":15}],15:[function(c,r,q){function k(d){if(!(this instanceof k))return new k(d);w.call(this,d);t.call(this,d);d&&!1===d.readable&&(this.readable=!1);d&&!1===d.writable&&(this.writable=!1);this.allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||p(l,this)}function l(a){a.end()}q=Object.keys||function(a){var d=[],c;for(c in a)d.push(c);return d};r.exports=k;var p=c("process-nextick-args");
r=c("core-util-is");r.inherits=c("inherits");var w=c("./_stream_readable"),t=c("./_stream_writable");r.inherits(k,w);c=q(t.prototype);for(r=0;r<c.length;r++)q=c[r],k.prototype[q]||(k.prototype[q]=t.prototype[q])},{"./_stream_readable":17,"./_stream_writable":19,"core-util-is":6,inherits:9,"process-nextick-args":12}],16:[function(c,r,q){function k(c){if(!(this instanceof k))return new k(c);a.call(this,c)}r.exports=k;var a=c("./_stream_transform");r=c("core-util-is");r.inherits=c("inherits");r.inherits(k,
a);k.prototype._transform=function(a,c,k){k(null,a)}},{"./_stream_transform":18,"core-util-is":6,inherits:9}],17:[function(c,r,q){(function(k){function a(b,a,d){if("function"===typeof b.prependListener)return b.prependListener(a,d);if(b._events&&b._events[a])B(b._events[a])?b._events[a].unshift(d):b._events[a]=[d,b._events[a]];else b.on(a,d)}function l(b,a){G=G||c("./_stream_duplex");b=b||{};this.objectMode=!!b.objectMode;a instanceof G&&(this.objectMode=this.objectMode||!!b.readableObjectMode);a=
b.highWaterMark;var d=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:d;this.highWaterMark=~~this.highWaterMark;this.buffer=new P;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=b.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;b.encoding&&(Q||(Q=c("string_decoder/").StringDecoder),
this.decoder=new Q(b.encoding),this.encoding=b.encoding)}function p(b){G=G||c("./_stream_duplex");if(!(this instanceof p))return new p(b);this._readableState=new l(b,this);this.readable=!0;b&&"function"===typeof b.read&&(this._read=b.read);J.call(this)}function w(b,a,e,f,c){var h=e;var g=null;x.isBuffer(h)||"string"===typeof h||null===h||void 0===h||a.objectMode||(g=new TypeError("Invalid non-string/buffer chunk"));if(h=g)b.emit("error",h);else if(null===e)a.reading=!1,a.ended||(a.decoder&&(e=a.decoder.end())&&
e.length&&(a.buffer.push(e),a.length+=a.objectMode?1:e.length),a.ended=!0,d(b));else if(a.objectMode||e&&0<e.length)if(a.ended&&!c)b.emit("error",Error("stream.push() after EOF"));else if(a.endEmitted&&c)b.emit("error",Error("stream.unshift() after end event"));else{if(a.decoder&&!c&&!f){e=a.decoder.write(e);var l=!a.objectMode&&0===e.length}c||(a.reading=!1);l||(a.flowing&&0===a.length&&!a.sync?(b.emit("data",e),b.read(0)):(a.length+=a.objectMode?1:e.length,c?a.buffer.unshift(e):a.buffer.push(e),
a.needReadable&&d(b)));a.readingMore||(a.readingMore=!0,M(A,b,a))}else c||(a.reading=!1);return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function t(b,a){if(0>=b||0===a.length&&a.ended)return 0;if(a.objectMode)return 1;if(b!==b)return a.flowing&&a.length?a.buffer.head.data.length:a.length;if(b>a.highWaterMark){var d=b;8388608<=d?d=8388608:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);a.highWaterMark=d}return b<=a.length?b:a.ended?a.length:(a.needReadable=!0,0)}function d(b){var a=
b._readableState;a.needReadable=!1;a.emittedReadable||(z("emitReadable",a.flowing),a.emittedReadable=!0,a.sync?M(f,b):f(b))}function f(b){z("emit readable");b.emit("readable");u(b)}function A(b,a){for(var d=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(z("maybeReadMore read 0"),b.read(0),d!==a.length);)d=a.length;a.readingMore=!1}function n(b){return function(){var a=b._readableState;z("pipeOnDrain",a.awaitDrain);a.awaitDrain&&a.awaitDrain--;0===a.awaitDrain&&b.listeners("data").length&&
(a.flowing=!0,u(b))}}function b(b){z("readable nexttick read 0");b.read(0)}function e(b,a){a.reading||(z("resume read 0"),b.read(0));a.resumeScheduled=!1;a.awaitDrain=0;b.emit("resume");u(b);a.flowing&&!a.reading&&b.read(0)}function u(b){var a=b._readableState;for(z("flow",a.flowing);a.flowing&&null!==b.read(););}function v(b,a){if(0===a.length)return null;if(a.objectMode)var d=a.buffer.shift();else if(!b||b>=a.length)d=a.decoder?a.buffer.join(""):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),
a.buffer.clear();else{d=a.buffer;a=a.decoder;if(b<d.head.data.length)a=d.head.data.slice(0,b),d.head.data=d.head.data.slice(b);else{if(b===d.head.data.length)d=d.shift();else if(a){a=d.head;var e=1,h=a.data;for(b-=h.length;a=a.next;){var g=a.data,f=b>g.length?g.length:b;h=f===g.length?h+g:h+g.slice(0,b);b-=f;if(0===b){f===g.length?(++e,d.head=a.next?a.next:d.tail=null):(d.head=a,a.data=g.slice(f));break}++e}d.length-=e;d=h}else{a=L.allocUnsafe(b);e=d.head;h=1;e.data.copy(a);for(b-=e.data.length;e=
e.next;){g=e.data;f=b>g.length?g.length:b;g.copy(a,a.length-b,0,f);b-=f;if(0===b){f===g.length?(++h,d.head=e.next?e.next:d.tail=null):(d.head=e,e.data=g.slice(f));break}++h}d.length-=h;d=a}a=d}d=a}return d}function y(b){var a=b._readableState;if(0<a.length)throw Error('"endReadable()" called on non-empty stream');a.endEmitted||(a.ended=!0,M(q,a,b))}function q(b,a){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}function H(b,a){for(var d=0,e=b.length;d<e;d++)a(b[d],d)}function I(b,
a){for(var d=0,e=b.length;d<e;d++)if(b[d]===a)return d;return-1}r.exports=p;var M=c("process-nextick-args"),B=c("isarray"),G;p.ReadableState=l;c("events");try{var J=c("stream")}catch(g){}finally{J||(J=c("events").EventEmitter)}var x=c("buffer").Buffer,L=c("buffer-shims"),F=c("core-util-is");F.inherits=c("inherits");var E=c("util"),z=void 0;z=E&&E.debuglog?E.debuglog("stream"):function(){};var P=c("./internal/streams/BufferList"),Q;F.inherits(p,J);p.prototype.push=function(b,a){var d=this._readableState;
d.objectMode||"string"!==typeof b||(a=a||d.defaultEncoding,a!==d.encoding&&(b=L.from(b,a),a=""));return w(this,d,b,a,!1)};p.prototype.unshift=function(b){return w(this,this._readableState,b,"",!0)};p.prototype.isPaused=function(){return!1===this._readableState.flowing};p.prototype.setEncoding=function(b){Q||(Q=c("string_decoder/").StringDecoder);this._readableState.decoder=new Q(b);this._readableState.encoding=b;return this};p.prototype.read=function(b){z("read",b);b=parseInt(b,10);var a=this._readableState,
e=b;0!==b&&(a.emittedReadable=!1);if(0===b&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return z("read: emitReadable",a.length,a.ended),0===a.length&&a.ended?y(this):d(this),null;b=t(b,a);if(0===b&&a.ended)return 0===a.length&&y(this),null;var f=a.needReadable;z("need readable",f);if(0===a.length||a.length-b<a.highWaterMark)f=!0,z("length less than watermark",f);a.ended||a.reading?z("reading or ended",!1):f&&(z("do read"),a.reading=!0,a.sync=!0,0===a.length&&(a.needReadable=!0),this._read(a.highWaterMark),
a.sync=!1,a.reading||(b=t(e,a)));f=0<b?v(b,a):null;null===f?(a.needReadable=!0,b=0):a.length-=b;0===a.length&&(a.ended||(a.needReadable=!0),e!==b&&a.ended&&y(this));null!==f&&this.emit("data",f);return f};p.prototype._read=function(b){this.emit("error",Error("_read() is not implemented"))};p.prototype.pipe=function(b,d){function e(b){z("onunpipe");b===v&&f()}function h(){z("onend");b.end()}function f(){z("cleanup");b.removeListener("close",l);b.removeListener("finish",u);b.removeListener("drain",
p);b.removeListener("error",g);b.removeListener("unpipe",e);v.removeListener("end",h);v.removeListener("end",f);v.removeListener("data",c);S=!0;!D.awaitDrain||b._writableState&&!b._writableState.needDrain||p()}function c(a){z("ondata");X=!1;!1!==b.write(a)||X||((1===D.pipesCount&&D.pipes===b||1<D.pipesCount&&-1!==I(D.pipes,b))&&!S&&(z("false write response, pause",v._readableState.awaitDrain),v._readableState.awaitDrain++,X=!0),v.pause())}function g(a){z("onerror",a);N();b.removeListener("error",
g);0===b.listeners("error").length&&b.emit("error",a)}function l(){b.removeListener("finish",u);N()}function u(){z("onfinish");b.removeListener("close",l);N()}function N(){z("unpipe");v.unpipe(b)}var v=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=b;break;case 1:D.pipes=[D.pipes,b];break;default:D.pipes.push(b)}D.pipesCount+=1;z("pipe count=%d opts=%j",D.pipesCount,d);d=d&&!1===d.end||b===k.stdout||b===k.stderr?f:h;if(D.endEmitted)M(d);else v.once("end",d);b.on("unpipe",e);var p=
n(v);b.on("drain",p);var S=!1,X=!1;v.on("data",c);a(b,"error",g);b.once("close",l);b.once("finish",u);b.emit("pipe",v);D.flowing||(z("pipe resume"),v.resume());return b};p.prototype.unpipe=function(b){var a=this._readableState;if(0===a.pipesCount)return this;if(1===a.pipesCount){if(b&&b!==a.pipes)return this;b||(b=a.pipes);a.pipes=null;a.pipesCount=0;a.flowing=!1;b&&b.emit("unpipe",this);return this}if(!b){b=a.pipes;var d=a.pipesCount;a.pipes=null;a.pipesCount=0;a.flowing=!1;for(a=0;a<d;a++)b[a].emit("unpipe",
this);return this}d=I(a.pipes,b);if(-1===d)return this;a.pipes.splice(d,1);--a.pipesCount;1===a.pipesCount&&(a.pipes=a.pipes[0]);b.emit("unpipe",this);return this};p.prototype.on=function(a,e){e=J.prototype.on.call(this,a,e);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&d(this,a):M(b,this)));return e};p.prototype.addListener=p.prototype.on;
p.prototype.resume=function(){var b=this._readableState;b.flowing||(z("resume"),b.flowing=!0,b.resumeScheduled||(b.resumeScheduled=!0,M(e,this,b)));return this};p.prototype.pause=function(){z("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};p.prototype.wrap=function(b){var a=this._readableState,d=!1,e=this;b.on("end",function(){z("wrapped end");if(a.decoder&&!a.ended){var b=a.decoder.end();
b&&b.length&&e.push(b)}e.push(null)});b.on("data",function(f){z("wrapped data");a.decoder&&(f=a.decoder.write(f));a.objectMode&&(null===f||void 0===f)||!(a.objectMode||f&&f.length)||e.push(f)||(d=!0,b.pause())});for(var f in b)void 0===this[f]&&"function"===typeof b[f]&&(this[f]=function(a){return function(){return b[a].apply(b,arguments)}}(f));H(["error","close","destroy","pause","resume"],function(a){b.on(a,e.emit.bind(e,a))});e._read=function(a){z("wrapped _read",a);d&&(d=!1,b.resume())};return e};
p._fromList=v}).call(this,c("_process"))},{"./_stream_duplex":15,"./internal/streams/BufferList":20,_process:13,buffer:5,"buffer-shims":4,"core-util-is":6,events:7,inherits:9,isarray:11,"process-nextick-args":12,"string_decoder/":28,util:2}],18:[function(c,r,q){function k(a){this.afterTransform=function(c,d){var f=a._transformState;f.transforming=!1;var l=f.writecb;l?(f.writechunk=null,f.writecb=null,null!==d&&void 0!==d&&a.push(d),l(c),c=a._readableState,c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&
a._read(c.highWaterMark),c=void 0):c=a.emit("error",Error("no writecb in Transform class"));return c};this.transforming=this.needTransform=!1;this.writeencoding=this.writechunk=this.writecb=null}function a(c){if(!(this instanceof a))return new a(c);p.call(this,c);this._transformState=new k(this);var t=this;this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.once("prefinish",
function(){"function"===typeof this._flush?this._flush(function(a,f){l(t,a,f)}):l(t)})}function l(a,c,d){if(c)return a.emit("error",c);null!==d&&void 0!==d&&a.push(d);c=a._transformState;if(a._writableState.length)throw Error("Calling transform done when ws.length != 0");if(c.transforming)throw Error("Calling transform done when still transforming");return a.push(null)}r.exports=a;var p=c("./_stream_duplex");r=c("core-util-is");r.inherits=c("inherits");r.inherits(a,p);a.prototype.push=function(a,
c){this._transformState.needTransform=!1;return p.prototype.push.call(this,a,c)};a.prototype._transform=function(a,c,d){throw Error("_transform() is not implemented");};a.prototype._write=function(a,c,d){var f=this._transformState;f.writecb=d;f.writechunk=a;f.writeencoding=c;f.transforming||(a=this._readableState,(f.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};a.prototype._read=function(a){a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?
(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./_stream_duplex":15,"core-util-is":6,inherits:9}],19:[function(c,r,q){(function(k,a){function l(){}function p(b,a,d){this.chunk=b;this.encoding=a;this.callback=d;this.next=null}function q(b,a){y=y||c("./_stream_duplex");b=b||{};this.objectMode=!!b.objectMode;a instanceof y&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,l=this.objectMode?16:16384;this.highWaterMark=
d||0===d?d:l;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(b){var d=a._writableState,e=d.sync,c=d.writecb;d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0;b?(--d.pendingcb,e?u(c,b):c(b),a._writableState.errorEmitted=!0,a.emit("error",b)):((b=n(d))||
d.corked||d.bufferProcessing||!d.bufferedRequest||A(a,d),e?v(f,a,d,b,c):f(a,d,b,c))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new e(this)}function t(b){y=y||c("./_stream_duplex");if(!(B.call(t,this)||this instanceof y))return new t(b);this._writableState=new q(b,this);this.writable=!0;b&&("function"===typeof b.write&&(this._write=b.write),"function"===
typeof b.writev&&(this._writev=b.writev));H.call(this)}function d(b,a,d,e,f,c,l){a.writelen=e;a.writecb=l;a.writing=!0;a.sync=!0;d?b._writev(f,a.onwrite):b._write(f,c,a.onwrite);a.sync=!1}function f(a,d,e,f){!e&&0===d.length&&d.needDrain&&(d.needDrain=!1,a.emit("drain"));d.pendingcb--;f();b(a,d)}function A(b,a){a.bufferProcessing=!0;var f=a.bufferedRequest;if(b._writev&&f&&f.next){var c=Array(a.bufferedRequestCount),l=a.corkedRequestsFree;l.entry=f;for(var u=0;f;)c[u]=f,f=f.next,u+=1;d(b,a,!0,a.length,
c,"",l.finish);a.pendingcb++;a.lastBufferedRequest=null;l.next?(a.corkedRequestsFree=l.next,l.next=null):a.corkedRequestsFree=new e(a)}else{for(;f&&(c=f.chunk,d(b,a,!1,a.objectMode?1:c.length,c,f.encoding,f.callback),f=f.next,!a.writing););null===f&&(a.lastBufferedRequest=null)}a.bufferedRequestCount=0;a.bufferedRequest=f;a.bufferProcessing=!1}function n(b){return b.ending&&0===b.length&&null===b.bufferedRequest&&!b.finished&&!b.writing}function b(b,a){var d=n(a);d&&(0===a.pendingcb?(a.prefinished||
(a.prefinished=!0,b.emit("prefinish")),a.finished=!0,b.emit("finish")):a.prefinished||(a.prefinished=!0,b.emit("prefinish")));return d}function e(b){var a=this;this.entry=this.next=null;this.finish=function(d){var e=a.entry;for(a.entry=null;e;){var f=e.callback;b.pendingcb--;f(d);e=e.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}}r.exports=t;var u=c("process-nextick-args"),v=!k.browser&&-1<["v0.10","v0.9."].indexOf(k.version.slice(0,5))?a:u,y;t.WritableState=q;k=c("core-util-is");
k.inherits=c("inherits");var K={deprecate:c("util-deprecate")};try{var H=c("stream")}catch(G){}finally{H||(H=c("events").EventEmitter)}var I=c("buffer").Buffer,M=c("buffer-shims");k.inherits(t,H);q.prototype.getBuffer=function(){for(var b=this.bufferedRequest,a=[];b;)a.push(b),b=b.next;return a};(function(){try{Object.defineProperty(q.prototype,"buffer",{get:K.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(G){}})();
if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var B=Function.prototype[Symbol.hasInstance];Object.defineProperty(t,Symbol.hasInstance,{value:function(b){return B.call(this,b)?!0:b&&b._writableState instanceof q}})}else B=function(b){return b instanceof this};t.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};t.prototype.write=function(b,a,e){var f=this._writableState,c=!1;"function"===typeof a&&(e=a,a=
null);I.isBuffer(b)?a="buffer":a||(a=f.defaultEncoding);"function"!==typeof e&&(e=l);if(f.ended)f=e,b=Error("write after end"),this.emit("error",b),u(f,b);else{var k=e,n=!0,v=!1;null===b?v=new TypeError("May not write null values to stream"):I.isBuffer(b)||"string"===typeof b||void 0===b||f.objectMode||(v=new TypeError("Invalid non-string/buffer chunk"));v&&(this.emit("error",v),u(k,v),n=!1);n&&(f.pendingcb++,c=a,f.objectMode||!1===f.decodeStrings||"string"!==typeof b||(b=M.from(b,c)),I.isBuffer(b)&&
(c="buffer"),k=f.objectMode?1:b.length,f.length+=k,a=f.length<f.highWaterMark,a||(f.needDrain=!0),f.writing||f.corked?(k=f.lastBufferedRequest,f.lastBufferedRequest=new p(b,c,e),k?k.next=f.lastBufferedRequest:f.bufferedRequest=f.lastBufferedRequest,f.bufferedRequestCount+=1):d(this,f,!1,k,b,c,e),c=a)}return c};t.prototype.cork=function(){this._writableState.corked++};t.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,b.writing||b.corked||b.finished||b.bufferProcessing||
!b.bufferedRequest||A(this,b))};t.prototype.setDefaultEncoding=function(b){"string"===typeof b&&(b=b.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((b+"").toLowerCase())))throw new TypeError("Unknown encoding: "+b);this._writableState.defaultEncoding=b;return this};t.prototype._write=function(b,a,d){d(Error("_write() is not implemented"))};t.prototype._writev=null;t.prototype.end=function(a,d,e){var f=this._writableState;"function"===
typeof a?(e=a,d=a=null):"function"===typeof d&&(e=d,d=null);null!==a&&void 0!==a&&this.write(a,d);f.corked&&(f.corked=1,this.uncork());if(!f.ending&&!f.finished){a=e;f.ending=!0;b(this,f);if(a)if(f.finished)u(a);else this.once("finish",a);f.ended=!0;this.writable=!1}}}).call(this,c("_process"),c("timers").setImmediate)},{"./_stream_duplex":15,_process:13,buffer:5,"buffer-shims":4,"core-util-is":6,events:7,inherits:9,"process-nextick-args":12,timers:29,"util-deprecate":30}],20:[function(c,r,q){function k(){this.tail=
this.head=null;this.length=0}c("buffer");var a=c("buffer-shims");r.exports=k;k.prototype.push=function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length};k.prototype.unshift=function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length};k.prototype.shift=function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}};k.prototype.clear=function(){this.head=
this.tail=null;this.length=0};k.prototype.join=function(a){if(0===this.length)return"";for(var c=this.head,l=""+c.data;c=c.next;)l+=a+c.data;return l};k.prototype.concat=function(c){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;c=a.allocUnsafe(c>>>0);for(var l=this.head,k=0;l;)l.data.copy(c,k),k+=l.data.length,l=l.next;return c}},{buffer:5,"buffer-shims":4}],21:[function(c,r,q){r.exports=c("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":16}],22:[function(c,
r,q){var k=c("_process");a:{try{var a=c("stream");break a}catch(l){}a=void 0}q=r.exports=c("./lib/_stream_readable.js");q.Stream=a||q;q.Readable=q;q.Writable=c("./lib/_stream_writable.js");q.Duplex=c("./lib/_stream_duplex.js");q.Transform=c("./lib/_stream_transform.js");q.PassThrough=c("./lib/_stream_passthrough.js");!k.browser&&"disable"===k.env.READABLE_STREAM&&a&&(r.exports=a)},{"./lib/_stream_duplex.js":15,"./lib/_stream_passthrough.js":16,"./lib/_stream_readable.js":17,"./lib/_stream_transform.js":18,
"./lib/_stream_writable.js":19,_process:13}],23:[function(c,r,q){r.exports=c("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":18}],24:[function(c,r,q){r.exports=c("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":19}],25:[function(c,r,q){function k(a,c){for(var d in a)c[d]=a[d]}function a(a,c,d){return p(a,c,d)}var l=c("buffer"),p=l.Buffer;p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?r.exports=l:(k(l,q),q.Buffer=a);k(p,a);a.from=function(a,c,d){if("number"===typeof a)throw new TypeError("Argument must not be a number");
return p(a,c,d)};a.alloc=function(a,c,d){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=p(a);void 0!==c?"string"===typeof d?a.fill(c,d):a.fill(c):a.fill(0);return a};a.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return p(a)};a.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return l.SlowBuffer(a)}},{buffer:5}],26:[function(c,r,q){(function(k){(function(a){function l(b,
d){if(!(this instanceof l))return new l(b,d);for(var e=0,f=B.length;e<f;e++)this[B[e]]="";this.q=this.c="";this.bufferCheckPosition=a.MAX_BUFFER_LENGTH;this.opt=d||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!b;this.noscript=!(!b&&!this.opt.noscript);this.state=m.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?
Object.create(a.XML_ENTITIES):Object.create(a.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(C));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function p(b,a){if(!(this instanceof p))return new p(b,a);G.apply(this);this._parser=new l(b,a);this.readable=this.writable=!0;var d=this;this._parser.onend=function(){d.emit("end")};this._parser.onerror=function(b){d.emit("error",b);d._parser.error=null};this._decoder=
null;J.forEach(function(b){Object.defineProperty(d,"on"+b,{get:function(){return d._parser["on"+b]},set:function(a){if(!a)return d.removeAllListeners(b),d._parser["on"+b]=a;d.on(b,a)},enumerable:!0,configurable:!1})})}function q(b){return b.split("").reduce(function(b,a){b[a]=!0;return b},{})}function t(b,a){return"[object RegExp]"===Object.prototype.toString.call(b)?!!a.match(b):b[a]}function d(b,a,d){b.textNode&&f(b);b[a]&&b[a](d)}function f(b){b.textNode=A(b.opt,b.textNode);b.textNode&&b.ontext&&
b.ontext(b.textNode);b.textNode=""}function A(b,a){b.trim&&(a=a.trim());b.normalize&&(a=a.replace(/\s+/g," "));return a}function n(b,a){f(b);b.trackPosition&&(a+="\nLine: "+b.line+"\nColumn: "+b.column+"\nChar: "+b.c);a=Error(a);b.error=a;b.onerror&&b.onerror(a);return b}function b(b){b.sawRoot&&!b.closedRoot&&e(b,"Unclosed root tag");b.state!==m.BEGIN&&b.state!==m.BEGIN_WHITESPACE&&b.state!==m.TEXT&&n(b,"Unexpected end");f(b);b.c="";b.closed=!0;b.onend&&b.onend(void 0);l.call(b,b.strict,b.opt);return b}
function e(b,a){if("object"!==typeof b||!(b instanceof l))throw Error("bad call to strictFail");b.strict&&n(b,a)}function u(b,a){var d=0>b.indexOf(":")?["",b]:b.split(":"),e=d[0];d=d[1];a&&"xmlns"===b&&(e="xmlns",d="");return{prefix:e,local:d}}function v(b){b.strict||(b.attribName=b.attribName[b.looseCase]());if(-1===b.attribList.indexOf(b.attribName)&&!b.tag.attributes.hasOwnProperty(b.attribName))if(b.opt.xmlns){var a=u(b.attribName,!0),f=a.local;if("xmlns"===a.prefix)if("xml"===f&&b.attribValue!==
g)e(b,"xml: prefix must be bound to "+g+"\nActual: "+b.attribValue);else if("xmlns"===f&&b.attribValue!==h)e(b,"xmlns: prefix must be bound to "+h+"\nActual: "+b.attribValue);else{a=b.tag;var c=b.tags[b.tags.length-1]||b;a.ns===c.ns&&(a.ns=Object.create(c.ns));a.ns[f]=b.attribValue}b.attribList.push([b.attribName,b.attribValue])}else b.tag.attributes[b.attribName]=b.attribValue,d(b,"onattribute",{name:b.attribName,value:b.attribValue});b.attribName=b.attribValue=""}function y(b,a){if(b.opt.xmlns){var f=
b.tag,c=u(b.tagName);f.prefix=c.prefix;f.local=c.local;f.uri=f.ns[c.prefix]||"";f.prefix&&!f.uri&&(e(b,"Unbound namespace prefix: "+JSON.stringify(b.tagName)),f.uri=c.prefix);c=b.tags[b.tags.length-1]||b;f.ns&&c.ns!==f.ns&&Object.keys(f.ns).forEach(function(a){d(b,"onopennamespace",{prefix:a,uri:f.ns[a]})});c=0;for(var h=b.attribList.length;c<h;c++){var g=b.attribList[c],l=g[0],k=g[1],v=u(l,!0);g=v.prefix;var n=""===g?"":f.ns[g]||"";k={name:l,value:k,prefix:g,local:v.local,uri:n};g&&"xmlns"!==g&&
!n&&(e(b,"Unbound namespace prefix: "+JSON.stringify(g)),k.uri=g);b.tag.attributes[l]=k;d(b,"onattribute",k)}b.attribList.length=0}b.tag.isSelfClosing=!!a;b.sawRoot=!0;b.tags.push(b.tag);d(b,"onopentag",b.tag);a||(b.noscript||"script"!==b.tagName.toLowerCase()?b.state=m.TEXT:b.state=m.SCRIPT,b.tag=null,b.tagName="");b.attribName=b.attribValue="";b.attribList.length=0}function r(b){if(b.tagName){if(b.script){if("script"!==b.tagName){b.script+="</"+b.tagName+">";b.tagName="";b.state=m.SCRIPT;return}d(b,
"onscript",b.script);b.script=""}var a=b.tags.length,f=b.tagName;b.strict||(f=f[b.looseCase]());for(var c=f;a--;)if(b.tags[a].name!==c)e(b,"Unexpected close tag");else break;if(0>a)e(b,"Unmatched closing tag: "+b.tagName),b.textNode+="</"+b.tagName+">";else{b.tagName=f;for(f=b.tags.length;f-- >a;){var h=b.tag=b.tags.pop();b.tagName=b.tag.name;d(b,"onclosetag",b.tagName);for(var g in h.ns);c=b.tags[b.tags.length-1]||b;b.opt.xmlns&&h.ns!==c.ns&&Object.keys(h.ns).forEach(function(a){d(b,"onclosenamespace",
{prefix:a,uri:h.ns[a]})})}0===a&&(b.closedRoot=!0);b.tagName=b.attribValue=b.attribName="";b.attribList.length=0}}else e(b,"Weird empty close tag."),b.textNode+="</>";b.state=m.TEXT}function H(b){var a=b.entity,d=a.toLowerCase(),f="";if(b.ENTITIES[a])return b.ENTITIES[a];if(b.ENTITIES[d])return b.ENTITIES[d];a=d;if("#"===a.charAt(0))if("x"===a.charAt(1)){a=a.slice(2);var c=parseInt(a,16);f=c.toString(16)}else a=a.slice(1),c=parseInt(a,10),f=c.toString(10);a=a.replace(/^0+/,"");return f.toLowerCase()!==
a?(e(b,"Invalid character entity"),"&"+b.entity+";"):String.fromCodePoint(c)}function I(b,a){"<"===a?(b.state=m.OPEN_WAKA,b.startTagPosition=b.position):t(x,a)||(e(b,"Non-whitespace before first tag."),b.textNode=a,b.state=m.TEXT)}function M(b,a){var d="";a<b.length&&(d=b.charAt(a));return d}a.parser=function(b,a){return new l(b,a)};a.SAXParser=l;a.SAXStream=p;a.createStream=function(b,a){return new p(b,a)};a.MAX_BUFFER_LENGTH=65536;var B="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");
a.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");Object.create||(Object.create=function(b){function a(){}a.prototype=b;return new a});Object.keys||(Object.keys=function(b){var a=[],d;for(d in b)b.hasOwnProperty(d)&&a.push(d);return a});l.prototype={end:function(){b(this)},write:function(c){if(this.error)throw this.error;if(this.closed)return n(this,
"Cannot write after close. Assign an onready handler.");if(null===c)return b(this);"object"===typeof c&&(c=c.toString());for(var h=0,g;;){this.c=g=M(c,h++);if(!g)break;this.trackPosition&&(this.position++,"\n"===g?(this.line++,this.column=0):this.column++);switch(this.state){case m.BEGIN:this.state=m.BEGIN_WHITESPACE;if("\ufeff"===g)continue;I(this,g);continue;case m.BEGIN_WHITESPACE:I(this,g);continue;case m.TEXT:if(this.sawRoot&&!this.closedRoot){for(var l=h-1;g&&"<"!==g&&"&"!==g;)(g=M(c,h++))&&
this.trackPosition&&(this.position++,"\n"===g?(this.line++,this.column=0):this.column++);this.textNode+=c.substring(l,h-1)}"<"!==g||this.sawRoot&&this.closedRoot&&!this.strict?(t(x,g)||this.sawRoot&&!this.closedRoot||e(this,"Text data outside of root node."),"&"===g?this.state=m.TEXT_ENTITY:this.textNode+=g):(this.state=m.OPEN_WAKA,this.startTagPosition=this.position);continue;case m.SCRIPT:"<"===g?this.state=m.SCRIPT_ENDING:this.script+=g;continue;case m.SCRIPT_ENDING:"/"===g?this.state=m.CLOSE_TAG:
(this.script+="<"+g,this.state=m.SCRIPT);continue;case m.OPEN_WAKA:"!"===g?(this.state=m.SGML_DECL,this.sgmlDecl=""):t(x,g)||(t(O,g)?(this.state=m.OPEN_TAG,this.tagName=g):"/"===g?(this.state=m.CLOSE_TAG,this.tagName=""):"?"===g?(this.state=m.PROC_INST,this.procInstName=this.procInstBody=""):(e(this,"Unencoded <"),this.startTagPosition+1<this.position&&(g=Array(this.position-this.startTagPosition).join(" ")+g),this.textNode+="<"+g,this.state=m.TEXT));continue;case m.SGML_DECL:(this.sgmlDecl+g).toUpperCase()===
P?(d(this,"onopencdata"),this.state=m.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+g?(this.state=m.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+g).toUpperCase()===Q?(this.state=m.DOCTYPE,(this.doctype||this.sawRoot)&&e(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===g?(d(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=m.TEXT):(t(E,g)&&(this.state=m.SGML_DECL_QUOTED),this.sgmlDecl+=g);continue;case m.SGML_DECL_QUOTED:g===
this.q&&(this.state=m.SGML_DECL,this.q="");this.sgmlDecl+=g;continue;case m.DOCTYPE:">"===g?(this.state=m.TEXT,d(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=g,"["===g?this.state=m.DOCTYPE_DTD:t(E,g)&&(this.state=m.DOCTYPE_QUOTED,this.q=g));continue;case m.DOCTYPE_QUOTED:this.doctype+=g;g===this.q&&(this.q="",this.state=m.DOCTYPE);continue;case m.DOCTYPE_DTD:this.doctype+=g;"]"===g?this.state=m.DOCTYPE:t(E,g)&&(this.state=m.DOCTYPE_DTD_QUOTED,this.q=g);continue;case m.DOCTYPE_DTD_QUOTED:this.doctype+=
g;g===this.q&&(this.state=m.DOCTYPE_DTD,this.q="");continue;case m.COMMENT:"-"===g?this.state=m.COMMENT_ENDING:this.comment+=g;continue;case m.COMMENT_ENDING:"-"===g?(this.state=m.COMMENT_ENDED,(this.comment=A(this.opt,this.comment))&&d(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+g,this.state=m.COMMENT);continue;case m.COMMENT_ENDED:">"!==g?(e(this,"Malformed comment"),this.comment+="--"+g,this.state=m.COMMENT):this.state=m.TEXT;continue;case m.CDATA:"]"===g?this.state=m.CDATA_ENDING:
this.cdata+=g;continue;case m.CDATA_ENDING:"]"===g?this.state=m.CDATA_ENDING_2:(this.cdata+="]"+g,this.state=m.CDATA);continue;case m.CDATA_ENDING_2:">"===g?(this.cdata&&d(this,"oncdata",this.cdata),d(this,"onclosecdata"),this.cdata="",this.state=m.TEXT):"]"===g?this.cdata+="]":(this.cdata+="]]"+g,this.state=m.CDATA);continue;case m.PROC_INST:"?"===g?this.state=m.PROC_INST_ENDING:t(x,g)?this.state=m.PROC_INST_BODY:this.procInstName+=g;continue;case m.PROC_INST_BODY:if(!this.procInstBody&&t(x,g))continue;
else"?"===g?this.state=m.PROC_INST_ENDING:this.procInstBody+=g;continue;case m.PROC_INST_ENDING:">"===g?(d(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=m.TEXT):(this.procInstBody+="?"+g,this.state=m.PROC_INST_BODY);continue;case m.OPEN_TAG:if(t(U,g))this.tagName+=g;else{this.strict||(this.tagName=this.tagName[this.looseCase]());l=this.tags[this.tags.length-1]||this;var k=this.tag={name:this.tagName,attributes:{}};
this.opt.xmlns&&(k.ns=l.ns);this.attribList.length=0;d(this,"onopentagstart",k);">"===g?y(this):"/"===g?this.state=m.OPEN_TAG_SLASH:(t(x,g)||e(this,"Invalid character in tag name"),this.state=m.ATTRIB)}continue;case m.OPEN_TAG_SLASH:">"===g?(y(this,!0),r(this)):(e(this,"Forward-slash in opening tag not followed by >"),this.state=m.ATTRIB);continue;case m.ATTRIB:if(t(x,g))continue;else">"===g?y(this):"/"===g?this.state=m.OPEN_TAG_SLASH:t(O,g)?(this.attribName=g,this.attribValue="",this.state=m.ATTRIB_NAME):
e(this,"Invalid attribute name");continue;case m.ATTRIB_NAME:"="===g?this.state=m.ATTRIB_VALUE:">"===g?(e(this,"Attribute without value"),this.attribValue=this.attribName,v(this),y(this)):t(x,g)?this.state=m.ATTRIB_NAME_SAW_WHITE:t(U,g)?this.attribName+=g:e(this,"Invalid attribute name");continue;case m.ATTRIB_NAME_SAW_WHITE:if("="===g)this.state=m.ATTRIB_VALUE;else if(t(x,g))continue;else e(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",d(this,"onattribute",
{name:this.attribName,value:""}),this.attribName="",">"===g?y(this):t(O,g)?(this.attribName=g,this.state=m.ATTRIB_NAME):(e(this,"Invalid attribute name"),this.state=m.ATTRIB);continue;case m.ATTRIB_VALUE:if(t(x,g))continue;else t(E,g)?(this.q=g,this.state=m.ATTRIB_VALUE_QUOTED):(e(this,"Unquoted attribute value"),this.state=m.ATTRIB_VALUE_UNQUOTED,this.attribValue=g);continue;case m.ATTRIB_VALUE_QUOTED:if(g!==this.q){"&"===g?this.state=m.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=g;continue}v(this);
this.q="";this.state=m.ATTRIB_VALUE_CLOSED;continue;case m.ATTRIB_VALUE_CLOSED:t(x,g)?this.state=m.ATTRIB:">"===g?y(this):"/"===g?this.state=m.OPEN_TAG_SLASH:t(O,g)?(e(this,"No whitespace between attributes"),this.attribName=g,this.attribValue="",this.state=m.ATTRIB_NAME):e(this,"Invalid attribute name");continue;case m.ATTRIB_VALUE_UNQUOTED:if(!t(z,g)){"&"===g?this.state=m.ATTRIB_VALUE_ENTITY_U:this.attribValue+=g;continue}v(this);">"===g?y(this):this.state=m.ATTRIB;continue;case m.CLOSE_TAG:if(this.tagName)">"===
g?r(this):t(U,g)?this.tagName+=g:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=m.SCRIPT):(t(x,g)||e(this,"Invalid tagname in closing tag"),this.state=m.CLOSE_TAG_SAW_WHITE);else if(t(x,g))continue;else t(O,g)?this.tagName=g:this.script?(this.script+="</"+g,this.state=m.SCRIPT):e(this,"Invalid tagname in closing tag.");continue;case m.CLOSE_TAG_SAW_WHITE:if(t(x,g))continue;">"===g?r(this):e(this,"Invalid characters in closing tag");continue;case m.TEXT_ENTITY:case m.ATTRIB_VALUE_ENTITY_Q:case m.ATTRIB_VALUE_ENTITY_U:switch(this.state){case m.TEXT_ENTITY:var u=
m.TEXT;var p="textNode";break;case m.ATTRIB_VALUE_ENTITY_Q:u=m.ATTRIB_VALUE_QUOTED;p="attribValue";break;case m.ATTRIB_VALUE_ENTITY_U:u=m.ATTRIB_VALUE_UNQUOTED,p="attribValue"}";"===g?(this[p]+=H(this),this.entity="",this.state=u):t(this.entity.length?W:V,g)?this.entity+=g:(e(this,"Invalid character in entity name"),this[p]+="&"+this.entity+g,this.entity="",this.state=u);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){c=Math.max(a.MAX_BUFFER_LENGTH,
10);g=h=0;for(u=B.length;g<u;g++){p=this[B[g]].length;if(p>c)switch(B[g]){case "textNode":f(this);break;case "cdata":d(this,"oncdata",this.cdata);this.cdata="";break;case "script":d(this,"onscript",this.script);this.script="";break;default:n(this,"Max buffer length exceeded: "+B[g])}h=Math.max(h,p)}this.bufferCheckPosition=a.MAX_BUFFER_LENGTH-h+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){f(this);""!==this.cdata&&
(d(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(d(this,"onscript",this.script),this.script="")}};try{var G=c("stream").Stream}catch(N){G=function(){}}var J=a.EVENTS.filter(function(b){return"error"!==b&&"end"!==b});p.prototype=Object.create(G.prototype,{constructor:{value:p}});p.prototype.write=function(b){"function"===typeof k&&"function"===typeof k.isBuffer&&k.isBuffer(b)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),b=this._decoder.write(b));this._parser.write(b.toString());
this.emit("data",b);return!0};p.prototype.end=function(b){b&&b.length&&this.write(b);this._parser.end();return!0};p.prototype.on=function(b,a){var d=this;d._parser["on"+b]||-1===J.indexOf(b)||(d._parser["on"+b]=function(){var a=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);a.splice(0,0,b);d.emit.apply(d,a)});return G.prototype.on.call(d,b,a)};var x="\r\n\t ",L="0124356789",F="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",E="'\"",z=x+">",P="[CDATA[",Q="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",
h="http://www.w3.org/2000/xmlns/",C={xml:g,xmlns:h};x=q(x);L=q(L);F=q(F);var O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;E=q(E);z=q(z);var m=0;a.STATE={BEGIN:m++,BEGIN_WHITESPACE:m++,TEXT:m++,TEXT_ENTITY:m++,OPEN_WAKA:m++,SGML_DECL:m++,SGML_DECL_QUOTED:m++,DOCTYPE:m++,DOCTYPE_QUOTED:m++,DOCTYPE_DTD:m++,DOCTYPE_DTD_QUOTED:m++,COMMENT_STARTING:m++,COMMENT:m++,COMMENT_ENDING:m++,COMMENT_ENDED:m++,CDATA:m++,CDATA_ENDING:m++,CDATA_ENDING_2:m++,
PROC_INST:m++,PROC_INST_BODY:m++,PROC_INST_ENDING:m++,OPEN_TAG:m++,OPEN_TAG_SLASH:m++,ATTRIB:m++,ATTRIB_NAME:m++,ATTRIB_NAME_SAW_WHITE:m++,ATTRIB_VALUE:m++,ATTRIB_VALUE_QUOTED:m++,ATTRIB_VALUE_CLOSED:m++,ATTRIB_VALUE_UNQUOTED:m++,ATTRIB_VALUE_ENTITY_Q:m++,ATTRIB_VALUE_ENTITY_U:m++,CLOSE_TAG:m++,CLOSE_TAG_SAW_WHITE:m++,SCRIPT:m++,SCRIPT_ENDING:m++};a.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};a.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(a.ENTITIES).forEach(function(b){var d=a.ENTITIES[b];d="number"===
typeof d?String.fromCharCode(d):d;a.ENTITIES[b]=d});for(var T in a.STATE)a.STATE[a.STATE[T]]=T;m=a.STATE;String.fromCodePoint||function(){var b=String.fromCharCode,a=Math.floor,d=function(){var d=[],e=-1,f=arguments.length;if(!f)return"";for(var c="";++e<f;){var g=Number(arguments[e]);if(!isFinite(g)||0>g||1114111<g||a(g)!==g)throw RangeError("Invalid code point: "+g);if(65535>=g)d.push(g);else{g-=65536;var h=(g>>10)+55296;g=g%1024+56320;d.push(h,g)}if(e+1===f||16384<d.length)c+=b.apply(null,d),d.length=
0}return c};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})("undefined"===typeof q?this.sax={}:q)}).call(this,c("buffer").Buffer)},{buffer:5,stream:27,string_decoder:3}],27:[function(c,r,q){function k(){a.call(this)}r.exports=k;var a=c("events").EventEmitter;c("inherits")(k,a);k.Readable=c("readable-stream/readable.js");k.Writable=c("readable-stream/writable.js");k.Duplex=c("readable-stream/duplex.js");k.Transform=
c("readable-stream/transform.js");k.PassThrough=c("readable-stream/passthrough.js");k.Stream=k;k.prototype.pipe=function(c,k){function l(a){c.writable&&!1===c.write(a)&&b.pause&&b.pause()}function p(){b.readable&&b.resume&&b.resume()}function d(){e||(e=!0,c.end())}function f(){e||(e=!0,"function"===typeof c.destroy&&c.destroy())}function A(b){n();if(0===a.listenerCount(this,"error"))throw b;}function n(){b.removeListener("data",l);c.removeListener("drain",p);b.removeListener("end",d);b.removeListener("close",
f);b.removeListener("error",A);c.removeListener("error",A);b.removeListener("end",n);b.removeListener("close",n);c.removeListener("close",n)}var b=this;b.on("data",l);c.on("drain",p);c._isStdio||k&&!1===k.end||(b.on("end",d),b.on("close",f));var e=!1;b.on("error",A);c.on("error",A);b.on("end",n);b.on("close",n);c.on("close",n);c.emit("pipe",b);return c}},{events:7,inherits:9,"readable-stream/duplex.js":14,"readable-stream/passthrough.js":21,"readable-stream/readable.js":22,"readable-stream/transform.js":23,
"readable-stream/writable.js":24}],28:[function(c,r,q){function k(a){return a.toString(this.encoding)}function a(a){this.charLength=(this.charReceived=a.length%2)?2:0}function l(a){this.charLength=(this.charReceived=a.length%3)?3:0}var p=c("buffer").Buffer,w=p.isEncoding||function(a){switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};c=q.StringDecoder=
function(c){this.encoding=(c||"utf8").toLowerCase().replace(/[-_]/,"");if(c&&!w(c))throw Error("Unknown encoding: "+c);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;this.detectIncompleteChar=a;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=l;break;default:this.write=k;return}this.charBuffer=new p(6);this.charLength=this.charReceived=0};c.prototype.write=function(a){for(var d="";this.charLength;){d=a.length>=this.charLength-
this.charReceived?this.charLength-this.charReceived:a.length;a.copy(this.charBuffer,this.charReceived,0,d);this.charReceived+=d;if(this.charReceived<this.charLength)return"";a=a.slice(d,a.length);d=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var f=d.charCodeAt(d.length-1);if(55296<=f&&56319>=f)this.charLength+=this.surrogateSize,d="";else{this.charReceived=this.charLength=0;if(0===a.length)return d;break}}this.detectIncompleteChar(a);var c=a.length;this.charLength&&(a.copy(this.charBuffer,
0,a.length-this.charReceived,c),c-=this.charReceived);d+=a.toString(this.encoding,0,c);c=d.length-1;f=d.charCodeAt(c);return 55296<=f&&56319>=f?(f=this.surrogateSize,this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),d.substring(0,c)):d};c.prototype.detectIncompleteChar=function(a){for(var d=3<=a.length?3:a.length;0<d;d--){var c=a[a.length-d];if(1==d&&6==c>>5){this.charLength=2;break}if(2>=d&&14==c>>4){this.charLength=3;break}if(3>=d&&
30==c>>3){this.charLength=4;break}}this.charReceived=d};c.prototype.end=function(a){var d="";a&&a.length&&(d=this.write(a));this.charReceived&&(a=this.encoding,d+=this.charBuffer.slice(0,this.charReceived).toString(a));return d}},{buffer:5}],29:[function(c,r,q){(function(k,a){function l(a,d){this._id=a;this._clearFn=d}var p=c("process/browser.js").nextTick,r=Function.prototype.apply,t=Array.prototype.slice,d={},f=0;q.setTimeout=function(){return new l(r.call(setTimeout,window,arguments),clearTimeout)};
q.setInterval=function(){return new l(r.call(setInterval,window,arguments),clearInterval)};q.clearTimeout=q.clearInterval=function(a){a.close()};l.prototype.unref=l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};q.enroll=function(a,d){clearTimeout(a._idleTimeoutId);a._idleTimeout=d};q.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};q._unrefActive=q.active=function(a){clearTimeout(a._idleTimeoutId);var d=a._idleTimeout;0<=d&&(a._idleTimeoutId=
setTimeout(function(){a._onTimeout&&a._onTimeout()},d))};q.setImmediate="function"===typeof k?k:function(a){var c=f++,b=2>arguments.length?!1:t.call(arguments,1);d[c]=!0;p(function(){d[c]&&(b?a.apply(null,b):a.call(null),q.clearImmediate(c))});return c};q.clearImmediate="function"===typeof a?a:function(a){delete d[a]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":13,timers:29}],30:[function(c,r,q){(function(c){function a(a){try{if(!c.localStorage)return!1}catch(p){return!1}a=
c.localStorage[a];return null==a?!1:"true"===String(a).toLowerCase()}r.exports=function(c,k){if(a("noDeprecation"))return c;var l=!1;return function(){if(!l){if(a("throwDeprecation"))throw Error(k);a("traceDeprecation")?console.trace(k):console.warn(k);l=!0}return c.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],31:[function(c,r,q){(function(c,a,l,p,q){function k(b){if("contents"in b){var a="styleAttrs"in
b?b.styleAttrs[p.byName.ruby.qname]:null;a="span"===b.kind&&("container"===a||"textContainer"===a||"baseContainer"===a);for(var d=b.contents.length-1;0<=d;d--)!a||"styleAttrs"in b.contents[d]&&p.byName.ruby.qname in b.contents[d].styleAttrs?k(b.contents[d]):delete b.contents[d]}}function d(b,a,e,c){var f=c&&"seq"===c.timeContainer,g=0;c&&(g=f&&e?e.end:c.begin);a.begin=a.explicit_begin?a.explicit_begin+g:g;e=a.begin;c=null;for(var h in a.sets)d(b,a.sets[h],c,a),e="seq"===a.timeContainer?a.sets[h].end:
Math.max(e,a.sets[h].end),c=a.sets[h];if("contents"in a)for(var l in a.contents)d(b,a.contents[l],c,a),e="seq"===a.timeContainer?a.contents[l].end:Math.max(e,a.contents[l].end),c=a.contents[l];else e=f?a.begin:Number.POSITIVE_INFINITY;a.end=null!==a.explicit_end&&null!==a.explicit_dur?Math.min(a.begin+a.explicit_dur,g+a.explicit_end):null===a.explicit_end&&null!==a.explicit_dur?a.begin+a.explicit_dur:null!==a.explicit_end&&null===a.explicit_dur?g+a.explicit_end:e;delete a.explicit_begin;delete a.explicit_dur;
delete a.explicit_end;b._registerEvent(a)}function f(b){this.node=b}function A(){this.events=[];this.head=new n;this.body=null}function n(){this.styling=new b;this.layout=new v}function b(){this.styles={};this.initials={}}function e(){this.styleRefs=this.styleAttrs=this.id=null}function u(){this.styleAttrs=null}function v(){this.regions={}}function y(b,a){this.kind="image";this.src=b;this.type=a}function r(b){this.id=b}function H(b){this.regionID=b}function I(b){this.styleAttrs=b}function w(b){this.sets=
b}function B(b){this.contents=b}function G(b,a,d){this.explicit_begin=b;this.explicit_end=a;this.explicit_dur=d}function J(){this.kind="body"}function x(){this.kind="div"}function L(){this.kind="p"}function F(){this.kind="span"}function E(){this.kind="span"}function z(){this.kind="br"}function P(){}function Q(){}function g(b){return b&&"xml:id"in b.attributes?b.attributes["xml:id"].value||null:null}function h(b){return b&&"style"in b.attributes?b.attributes.style.value.split(" "):[]}function C(b,
a){var d={};if(null!==b)for(var e in b.attributes){var c=b.attributes[e].uri+" "+b.attributes[e].local,f=p.byQName[c];if(void 0!==f){var g=f.parse(b.attributes[e].value);null!==g?(d[c]=g,f===p.byName.zIndex&&N(a,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):R(a,"Cannot parse styling attribute "+c+" --\x3e "+b.attributes[e].value)}}return d}function O(b,a,d){for(var e in b.attributes)if(b.attributes[e].uri===a&&b.attributes[e].local===d)return b.attributes[e].value;
return null}function U(b,a){b=O(b,l.ns_tts,"extent");if(null===b)return null;var d=b.split(" ");if(2!==d.length)return N(a,"Malformed extent (ignoring)"),null;b=q.parseLength(d[0]);d=q.parseLength(d[1]);return d&&b?{h:d,w:b}:(N(a,"Malformed extent values (ignoring)"),null)}function V(b,a,d){var e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,c=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,f=/^(\d+(?:\.\d+)?)t$/,g=/^(\d+(?:\.\d+)?)ms$/,h=/^(\d+(?:\.\d+)?)s$/,l=/^(\d+(?:\.\d+)?)h$/,k=/^(\d+(?:\.\d+)?)m$/,u,v=null;null!==
(u=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==a&&(v=parseFloat(u[1])/a):null!==(u=f.exec(d))?null!==b&&(v=parseFloat(u[1])/b):null!==(u=g.exec(d))?v=parseFloat(u[1])/1E3:null!==(u=h.exec(d))?v=parseFloat(u[1]):null!==(u=l.exec(d))?v=3600*parseFloat(u[1]):null!==(u=k.exec(d))?v=60*parseFloat(u[1]):null!==(u=e.exec(d))?v=3600*parseInt(u[1])+60*parseInt(u[2])+parseFloat(u[3]):null!==(u=c.exec(d))&&null!==a&&(v=3600*parseInt(u[1])+60*parseInt(u[2])+parseInt(u[3])+(null===u[4]?0:parseInt(u[4])/a));return v}
function W(b,a,d){for(;0<a.styleRefs.length;){var e=a.styleRefs.pop();e in b.styles?(W(b,b.styles[e],d),T(b.styles[e].styleAttrs,a.styleAttrs)):R(d,"Non-existant style id referenced")}}function m(b,a,d,e){for(var c=a.length-1;0<=c;c--){var f=a[c];f in b.styles?T(b.styles[f].styleAttrs,d):R(e,"Non-existant style id referenced")}}function T(b,a){for(var d in b)d in a||(a[d]=b[d])}function N(b,a){if(b&&b.warn&&b.warn(a))throw a;}function R(b,a){if(b&&b.error&&b.error(a))throw a;}function D(b,a){b&&b.fatal&&
b.fatal(a);throw a;}function Y(b,a){for(var d=0,e=b.length-1,c;d<=e;){c=Math.floor((d+e)/2);var f=b[c];if(f<a)d=c+1;else if(f>a)e=c-1;else return{found:!0,index:c}}return{found:!1,index:d}}c.fromXML=function(c,g,h){var q=a.parser(!0,{xmlns:!0}),m=[],t=[],B=[],S=0,r=null;q.onclosetag=function(a){if(m[0]instanceof b)for(var d in m[0].styles)W(m[0],m[0].styles[d],g);else if(m[0]instanceof L||m[0]instanceof F){if(1<m[0].contents.length){a=[m[0].contents[0]];for(d=1;d<m[0].contents.length;d++)m[0].contents[d]instanceof
E&&a[a.length-1]instanceof E?a[a.length-1].text+=m[0].contents[d].text:a.push(m[0].contents[d]);m[0].contents=a}m[0]instanceof F&&1===m[0].contents.length&&m[0].contents[0]instanceof E&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else if(m[0]instanceof f)if(m[0].node.uri===l.ns_tt&&"metadata"===m[0].node.local)S--;else if(0<S&&h&&"onCloseTag"in h)h.onCloseTag();B.shift();t.shift();m.shift()};q.ontext=function(b){if(void 0!==m[0])if(m[0]instanceof F||m[0]instanceof L){if(m[0]instanceof F){var a=
m[0].styleAttrs[p.byName.ruby.qname];if("container"===a||"textContainer"===a||"baseContainer"===a)return}a=new E;a.initFromText(r,m[0],b,B[0],g);m[0].contents.push(a)}else if(m[0]instanceof f&&0<S&&h&&"onText"in h)h.onText(b)};q.onopentag=function(a){var d=a.attributes["xml:space"];d?B.unshift(d.value):0===B.length?B.unshift("default"):B.unshift(B[0]);(d=a.attributes["xml:lang"])?t.unshift(d.value):0===t.length?t.unshift(""):t.unshift(t[0]);if(a.uri===l.ns_tt)if("tt"===a.local)null!==r&&D(g,"Two <tt> elements at ("+
this.line+","+this.column+")"),r=new A,r.initFromNode(a,g),m.unshift(r);else if("head"===a.local)m[0]instanceof A||D(g,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),m.unshift(r.head);else if("styling"===a.local)m[0]instanceof n||D(g,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),m.unshift(r.head.styling);else if("style"===a.local)if(m[0]instanceof b){var c=new e;c.initFromNode(a,g);c.id?r.head.styling.styles[c.id]=c:R(g,"<style> element missing @id attribute");
m.unshift(c)}else m[0]instanceof P?(c=new e,c.initFromNode(a,g),T(c.styleAttrs,m[0].styleAttrs),m.unshift(c)):D(g,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(m[0]instanceof b){d=new u;d.initFromNode(a,g);for(c in d.styleAttrs)r.head.styling.initials[c]=d.styleAttrs[c];m.unshift(d)}else D(g,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)m[0]instanceof n||D(g,
"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),m.unshift(r.head.layout);else if("region"===a.local)m[0]instanceof v||D(g,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),c=new P,c.initFromNode(r,a,g),!c.id||c.id in r.head.layout.regions?R(g,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):r.head.layout.regions[c.id]=c,m.unshift(c);else if("body"===a.local)m[0]instanceof A||D(g,"Parent of <body> element is not <tt> at "+
this.line+","+this.column+")"),null!==r.body&&D(g,"Second <body> element at "+this.line+","+this.column+")"),c=new J,c.initFromNode(r,a,g),r.body=c,m.unshift(c);else if("div"===a.local){m[0]instanceof x||m[0]instanceof J||D(g,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");c=new x;c.initFromNode(r,m[0],a,g);if(d=c.styleAttrs[p.byName.backgroundImage.qname])c.contents.push(new y(d)),delete c.styleAttrs[p.byName.backgroundImage.qname];m[0].contents.push(c);m.unshift(c)}else"image"===
a.local?(m[0]instanceof x||D(g,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),c=new y,c.initFromNode(r,m[0],a,g),m[0].contents.push(c),m.unshift(c)):"p"===a.local?(m[0]instanceof x||D(g,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),c=new L,c.initFromNode(r,m[0],a,g),m[0].contents.push(c),m.unshift(c)):"span"===a.local?(m[0]instanceof F||m[0]instanceof L||D(g,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),c=
new F,c.initFromNode(r,m[0],a,B[0],g),m[0].contents.push(c),m.unshift(c)):"br"===a.local?(m[0]instanceof F||m[0]instanceof L||D(g,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),c=new z,c.initFromNode(r,m[0],a,g),m[0].contents.push(c),m.unshift(c)):"set"===a.local?(m[0]instanceof F||m[0]instanceof L||m[0]instanceof x||m[0]instanceof J||m[0]instanceof P||m[0]instanceof z||D(g,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+
")"),c=new Q,c.initFromNode(r,m[0],a,g),m[0].sets.push(c),m.unshift(c)):m.unshift(new f(a));else m.unshift(new f(a));if(m[0]instanceof f)if(a.uri===l.ns_tt&&"metadata"===a.local)S++;else if(0<S&&h&&"onOpenTag"in h){c=[];for(var k in a.attributes)c[a.attributes[k].uri+" "+a.attributes[k].local]={uri:a.attributes[k].uri,local:a.attributes[k].local,value:a.attributes[k].value};h.onOpenTag(a.uri,a.local,c)}};q.write(c).close();delete r.head.styling.styles;c=!1;for(var H in r.head.layout.regions){c=!0;
break}c||(H=P.prototype.createDefaultRegion(),r.head.layout.regions[H.id]=H);for(var Z in r.head.layout.regions)d(r,r.head.layout.regions[Z],null,null);r.body&&d(r,r.body,null,null);r.body&&k(r.body);return r};A.prototype.initFromNode=function(b,a){var d=O(b,l.ns_ttp,"cellResolution"),c=15;var e=32;null!==d&&(d=/(\d+) (\d+)/.exec(d),null!==d?(e=parseInt(d[1]),c=parseInt(d[2])):N(a,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new q.ComputedLength(0,1/c),w:new q.ComputedLength(1/
e,0)};c=O(b,l.ns_ttp,"frameRate");d=30;null!==c&&(e=/(\d+)/.exec(c),null!==e?d=parseInt(e[1]):N(a,"Malformed frame rate attribute (using initial value instead)"));e=O(b,l.ns_ttp,"frameRateMultiplier");var f=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?f=parseInt(e[1])/parseInt(e[2]):N(a,"Malformed frame rate multiplier attribute (using initial value instead)"));d*=f;f=1;e=O(b,l.ns_ttp,"tickRate");null===e?null!==c&&(f=d):(e=/(\d+)/.exec(e),null!==e?f=parseInt(e[1]):N(a,"Malformed tick rate attribute (using initial value instead)"));
this.effectiveFrameRate=d;this.tickRate=f;e=O(b,l.ns_ittp,"aspectRatio");null===e&&(e=O(b,l.ns_ttp,"displayAspectRatio"));c=null;null!==e&&(d=/(\d+)\s+(\d+)/.exec(e),null!==d?(e=parseInt(d[1]),d=parseInt(d[2]),0!==e&&0!==d?c=e/d:R(a,"Illegal aspectRatio values (ignoring)")):R(a,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=c;c=O(b,l.ns_ttp,"timeBase");null!==c&&"media"!==c&&D(a,"Unsupported time base");b=U(b,a);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||
D(a,"Extent on TT must be in px or absent"),this.pxLength={h:new q.ComputedLength(0,1/b.h.value),w:new q.ComputedLength(1/b.w.value,0)});this.dimensions={h:new q.ComputedLength(0,1),w:new q.ComputedLength(1,0)}};A.prototype._registerEvent=function(b){if(!(b.end<=b.begin)){var a=Y(this.events,b.begin);a.found||this.events.splice(a.index,0,b.begin);b.end!==Number.POSITIVE_INFINITY&&(a=Y(this.events,b.end),a.found||this.events.splice(a.index,0,b.end))}};A.prototype.getMediaTimeRange=function(){return[this.events[0],
this.events[this.events.length-1]]};A.prototype.getMediaTimeEvents=function(){return this.events};e.prototype.initFromNode=function(b,a){this.id=g(b);this.styleAttrs=C(b,a);this.styleRefs=h(b)};u.prototype.initFromNode=function(b,a){this.styleAttrs={};for(var d in b.attributes)if(b.attributes[d].uri===l.ns_itts||b.attributes[d].uri===l.ns_ebutts||b.attributes[d].uri===l.ns_tts)this.styleAttrs[b.attributes[d].uri+" "+b.attributes[d].local]=b.attributes[d].value};y.prototype.initFromNode=function(b,
a,d,c){(this.src="src"in d.attributes?d.attributes.src.value:null)||R(c,"Invalid image@src attribute");(this.type="type"in d.attributes?d.attributes.type.value:null)||R(c,"Invalid image@type attribute");I.prototype.initFromNode.call(this,b,a,d,c);G.prototype.initFromNode.call(this,b,a,d,c);w.prototype.initFromNode.call(this,b,a,d,c);H.prototype.initFromNode.call(this,b,a,d,c)};r.prototype.initFromNode=function(b,a,d,c){this.id=g(d)};H.prototype.initFromNode=function(b,a,d,c){this.regionID=d&&"region"in
d.attributes?d.attributes.region.value:""};I.prototype.initFromNode=function(b,a,d,c){this.styleAttrs=C(d,c);null!==b.head&&null!==b.head.styling&&m(b.head.styling,h(d),this.styleAttrs,c)};w.prototype.initFromNode=function(b,a,d,c){this.sets=[]};B.prototype.initFromNode=function(b,a,d,c){this.contents=[]};G.prototype.initFromNode=function(b,a,d,c){a=null;d&&"begin"in d.attributes&&(a=V(b.tickRate,b.effectiveFrameRate,d.attributes.begin.value),null===a&&N(c,"Malformed begin value "+d.attributes.begin.value+
" (using 0)"));var e=null;d&&"dur"in d.attributes&&(e=V(b.tickRate,b.effectiveFrameRate,d.attributes.dur.value),null===e&&N(c,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var f=null;d&&"end"in d.attributes&&(f=V(b.tickRate,b.effectiveFrameRate,d.attributes.end.value),null===f&&N(c,"Malformed end value (ignoring)"));this.explicit_begin=a;this.explicit_end=f;this.explicit_dur=e;(b=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==b?"seq"===b?c="seq":
(R(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};J.prototype.initFromNode=function(b,a,d){I.prototype.initFromNode.call(this,b,null,a,d);G.prototype.initFromNode.call(this,b,null,a,d);w.prototype.initFromNode.call(this,b,null,a,d);H.prototype.initFromNode.call(this,b,null,a,d);B.prototype.initFromNode.call(this,b,null,a,d)};x.prototype.initFromNode=function(b,a,d,c){I.prototype.initFromNode.call(this,b,a,d,c);G.prototype.initFromNode.call(this,b,a,d,c);
w.prototype.initFromNode.call(this,b,a,d,c);H.prototype.initFromNode.call(this,b,a,d,c);B.prototype.initFromNode.call(this,b,a,d,c)};L.prototype.initFromNode=function(b,a,d,c){I.prototype.initFromNode.call(this,b,a,d,c);G.prototype.initFromNode.call(this,b,a,d,c);w.prototype.initFromNode.call(this,b,a,d,c);H.prototype.initFromNode.call(this,b,a,d,c);B.prototype.initFromNode.call(this,b,a,d,c)};F.prototype.initFromNode=function(b,a,d,c,e){I.prototype.initFromNode.call(this,b,a,d,e);G.prototype.initFromNode.call(this,
b,a,d,e);w.prototype.initFromNode.call(this,b,a,d,e);H.prototype.initFromNode.call(this,b,a,d,e);B.prototype.initFromNode.call(this,b,a,d,e);this.space=c};E.prototype.initFromText=function(b,a,d,c,e){G.prototype.initFromNode.call(this,b,a,null,e);this.text=d;this.space=c};z.prototype.initFromNode=function(b,a,d,c){H.prototype.initFromNode.call(this,b,a,d,c);G.prototype.initFromNode.call(this,b,a,d,c)};P.prototype.createDefaultRegion=function(){var b=new P;b.id="";b.styleAttrs={};b.sets=[];G.call(b,
0,Number.POSITIVE_INFINITY,null);return b};P.prototype.initFromNode=function(b,a,d){r.prototype.initFromNode.call(this,b,null,a,d);I.prototype.initFromNode.call(this,b,null,a,d);G.prototype.initFromNode.call(this,b,null,a,d);w.prototype.initFromNode.call(this,b,null,a,d);null!==b.head&&null!==b.head.styling&&m(b.head.styling,h(a),this.styleAttrs,d)};Q.prototype.initFromNode=function(b,a,d,c){G.prototype.initFromNode.call(this,b,a,d,c);b=C(d,c);this.value=this.qname=null;for(var e in b){if(this.qname){R(c,
"More than one style specified on set");break}this.qname=e;this.value=b[e]}}})("undefined"===typeof q?this.imscDoc={}:q,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37,sax:26}],32:[function(c,r,q){(function(c,a,l){function k(b,a,c){if("region"===c.kind){var e=document.createElement("div");e.style.position=
"absolute"}else if("body"===c.kind)e=document.createElement("div");else if("div"===c.kind)e=document.createElement("div");else if("image"===c.kind){if(e=document.createElement("img"),null!==b.imgResolver&&null!==c.src){var f=b.imgResolver(c.src,e);f&&(e.src=f);e.height=b.regionH;e.width=b.regionW}}else if("p"===c.kind)e=document.createElement("p");else if("span"===c.kind){if("container"===c.styleAttrs[l.byName.ruby.qname])e=document.createElement("ruby"),b.ruby=!0;else if("base"===c.styleAttrs[l.byName.ruby.qname])e=
document.createElement("rb");else if("text"===c.styleAttrs[l.byName.ruby.qname])e=document.createElement("rt");else if("baseContainer"===c.styleAttrs[l.byName.ruby.qname])e=document.createElement("rbc");else if("textContainer"===c.styleAttrs[l.byName.ruby.qname])e=document.createElement("rtc");else{if("delimiter"===c.styleAttrs[l.byName.ruby.qname])return;e=document.createElement("span")}(f=c.styleAttrs[l.byName.textEmphasis.qname])&&"none"!==f.style&&(b.textEmphasis=!0)}else"br"===c.kind&&(e=document.createElement("br"));
if(e){a.appendChild(e);e.style.margin="0";for(var u in A)a=A[u],f=c.styleAttrs[a.qname],void 0!==f&&null!==a.map&&a.map(b,e,c,f);u=e;if("region"===c.kind)if(a=c.styleAttrs[l.byName.writingMode.qname],"lrtb"===a||"lr"===a)b.ipd="lr",b.bpd="tb";else if("rltb"===a||"rl"===a)b.ipd="rl",b.bpd="tb";else if("tblr"===a)b.ipd="tb",b.bpd="lr";else if("tbrl"===a||"tb"===a)b.ipd="tb",b.bpd="rl";(a=c.styleAttrs[l.byName.linePadding.qname])&&!a.isZero()&&(f=a.toUsedLength(b.w,b.h),0<f&&(f=Math.ceil(f)+"px","tb"===
b.bpd?(u.style.paddingLeft=f,u.style.paddingRight=f):(u.style.paddingTop=f,u.style.paddingBottom=f),b.lp=a));(a=c.styleAttrs[l.byName.multiRowAlign.qname])&&"auto"!==a&&(u=document.createElement("span"),u.style.display="inline-block",u.style.textAlign=a,e.appendChild(u),b.mra=a);(a=c.styleAttrs[l.byName.rubyReserve.qname])&&"none"!==a[0]&&(b.rubyReserve=a);c.styleAttrs[l.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===c.kind&&c.text)if(l.byName.textCombine.qname in c.styleAttrs&&"all"===c.styleAttrs[l.byName.textCombine.qname][0])e.textContent=
c.text;else for(a="",f=0;f<c.text.length;f++){a+=c.text.charAt(f);var n=c.text.charCodeAt(f);if(55296>n||56319<n||f===c.text.length)n=document.createElement("span"),n.textContent=a,e.appendChild(n),a=""}for(var p in c.contents)k(b,u,c.contents[p]);p=[];if((b.lp||b.mra||b.flg||b.ruby||b.textEmphasis||b.rubyReserve)&&"p"===c.kind){d(b,u,p,null);if(b.rubyReserve){for(a=0;a<p.length;a++){f=document.createElement("ruby");n=document.createElement("rb");n.textContent="\u200b";f.appendChild(n);var t=b.rubyReserve[1].toUsedLength(b.w,
b.h)+"px";if("both"===b.rubyReserve[0]){n=document.createElement("rtc");n.style.rubyPosition="under";n.textContent="\u200b";n.style.fontSize=t;var B=document.createElement("rtc");B.style.rubyPosition="over";B.textContent="\u200b";B.style.fontSize=t;f.appendChild(n);f.appendChild(B)}else n=document.createElement("rtc"),n.textContent="\u200b",n.style.fontSize=t,n.style.rubyPosition="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<a?"tb"===b.bpd||"rl"===b.bpd?"under":"over":"tb"===b.bpd||
"rl"===b.bpd?"over":"under",f.appendChild(n);p[a].elements[0].node.parentElement.insertBefore(f,p[a].elements[0].node)}b.rubyReserve=null}if(b.ruby||b.rubyReserve){for(a=0;a<p.length;a++)for(f=0;f<p[a].rbc.length;f++)p[a].rbc[f].style.rubyPosition||(p[a].rbc[f].style.rubyPosition="tb"===b.bpd?0===a?"over":"under":"rl"===b.bpd?0===a?"over":"under":0===a?"under":"over");b.ruby=null}if(b.textEmphasis){for(a=0;a<p.length;a++)for(f=0;f<p[a].te.length;f++)p[a].te[f].style.textEmphasisPosition&&"none"!==
p[a].te[f].style.textEmphasisPosition||(p[a].te[f].style.textEmphasisPosition="tb"===b.bpd?0===a?"left over":"left under":"rl"===b.bpd?0===a?"right under":"left under":0===a?"left under":"right under");b.textEmphasis=null}if(b.mra){for(a=0;a<p.length-1;a++)n=p[a].elements.length,0!==n&&!1===p[a].br&&(f=document.createElement("br"),n=p[a].elements[n-1].node,n.parentElement.insertBefore(f,n.nextSibling));b.mra=null}if(b.lp){a=b.lp.toUsedLength(b.w,b.h);for(var w in p)f=p[w].elements[p[w].start_elem],
n=p[w].elements[p[w].end_elem],B=Math.ceil(a)+"px",t="-"+Math.ceil(a)+"px",0!==p[w].elements.length&&("lr"===b.ipd?(f.node.style.borderLeftColor=f.bgcolor||"#00000000",f.node.style.borderLeftStyle="solid",f.node.style.borderLeftWidth=B,f.node.style.marginLeft=t):"rl"===b.ipd?(f.node.style.borderRightColor=f.bgcolor||"#00000000",f.node.style.borderRightStyle="solid",f.node.style.borderRightWidth=B,f.node.style.marginRight=t):"tb"===b.ipd&&(f.node.style.borderTopColor=f.bgcolor||"#00000000",f.node.style.borderTopStyle=
"solid",f.node.style.borderTopWidth=B,f.node.style.marginTop=t),"lr"===b.ipd?(n.node.style.borderRightColor=n.bgcolor||"#00000000",n.node.style.borderRightStyle="solid",n.node.style.borderRightWidth=B,n.node.style.marginRight=t):"rl"===b.ipd?(n.node.style.borderLeftColor=n.bgcolor||"#00000000",n.node.style.borderLeftStyle="solid",n.node.style.borderLeftWidth=B,n.node.style.marginLeft=t):"tb"===b.ipd&&(n.node.style.borderBottomColor=n.bgcolor||"#00000000",n.node.style.borderBottomStyle="solid",n.node.style.borderBottomWidth=
B,n.node.style.marginBottom=t));b.lp=null}if(b.flg){a=r(u.getBoundingClientRect(),b);w=a.before;a=a.after;f=Math.sign(a-w);for(n=0;n<=p.length;n++){B=0===n?w:n===p.length?a:(p[n].before+p[n-1].after)/2;if(0<n)for(var J=0;J<p[n-1].elements.length;J++)if(null!==p[n-1].elements[J].bgcolor){var x=p[n-1].elements[J];0>f*(x.after-B)&&(t=Math.ceil(Math.abs(B-x.after))+"px",x.node.style.backgroundColor=x.bgcolor,"lr"===b.bpd?x.node.style.paddingRight=t:"rl"===b.bpd?x.node.style.paddingLeft=t:"tb"===b.bpd&&
(x.node.style.paddingBottom=t))}if(n<p.length)for(J=0;J<p[n].elements.length;J++)x=p[n].elements[J],null!==x.bgcolor&&0<f*(x.before-B)&&(t=Math.ceil(Math.abs(x.before-B))+"px",x.node.style.backgroundColor=x.bgcolor,"lr"===b.bpd?x.node.style.paddingLeft=t:"rl"===b.bpd?x.node.style.paddingRight=t:"tb"===b.bpd&&(x.node.style.paddingTop=t))}b.flg=null}}"region"===c.kind&&(d(b,u,p),"tb"===b.bpd&&b.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[l.byName.displayAlign.qname]&&(c=new q(""===c.id?
"_":c.id,p),b.currentISDState[c.id]=c,b.previousISDState&&c.id in b.previousISDState&&0<b.previousISDState[c.id].plist.length&&1<c.plist.length&&c.plist[c.plist.length-2].text===b.previousISDState[c.id].plist[b.previousISDState[c.id].plist.length-1].text&&(b=e.firstElementChild,c=c.plist[c.plist.length-1].after-c.plist[c.plist.length-1].before,b.style.bottom="-"+c+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+c+"px)")))}else if(b=b.errorHandler,
c="Error processing ISD element kind: "+c.kind,b&&b.error&&b.error(c))throw c;}function q(b,a){this.id=b;this.plist=a}function r(b,a){var d={before:null,after:null,start:null,end:null};"tb"===a.bpd?(d.before=b.top,d.after=b.bottom,"lr"===a.ipd?(d.start=b.left,d.end=b.right):(d.start=b.right,d.end=b.left)):"lr"===a.bpd?(d.before=b.left,d.after=b.right,d.start=b.top,d.end=b.bottom):"rl"===a.bpd&&(d.before=b.right,d.after=b.left,d.start=b.top,d.end=b.bottom);return d}function d(b,a,c,f){if("rt"!==a.localName&&
"rtc"!==a.localName)if(f=a.style.backgroundColor||f,0===a.childElementCount)if("span"===a.localName||"rb"===a.localName){var e=a.getBoundingClientRect();if(0!==e.height&&0!==e.width){b=r(e,b);if(!(e=0===c.length)){e=b.before;var l=b.after,k=c[c.length-1].before,n=c[c.length-1].after;e=!(l<n&&e>k||n<=l&&k>=e)}e?c.push({before:b.before,after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(e=Math.sign(b.after-b.before),l=Math.sign(b.end-b.start),0>e*
(b.before-c[c.length-1].before)&&(c[c.length-1].before=b.before),0<e*(b.after-c[c.length-1].after)&&(c[c.length-1].after=b.after),0>l*(b.start-c[c.length-1].start)&&(c[c.length-1].start=b.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<l*(b.end-c[c.length-1].end)&&(c[c.length-1].end=b.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=a.textContent;c[c.length-1].elements.push({node:a,bgcolor:f,before:b.before,after:b.after})}}else"br"===a.localName&&0!==
c.length&&(c[c.length-1].br=!0);else for(a=a.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&(d(b,a,c,f),"ruby"===a.localName||"rtc"===a.localName?0<c.length&&c[c.length-1].rbc.push(a):"span"===a.localName&&a.style.textEmphasisStyle&&"none"!==a.style.textEmphasisStyle&&0<c.length&&c[c.length-1].te.push(a)),a=a.nextSibling}function f(b,a){this.qname=b;this.map=a}c.render=function(b,a,d,c,f,l,n,p,q){c=c||a.clientHeight;f=f||a.clientWidth;if(null!==b.aspectRatio){var e=c*b.aspectRatio;e>f?c=Math.round(f/
b.aspectRatio):f=e}e=document.createElement("div");e.style.position="relative";e.style.width=f+"px";e.style.height=c+"px";e.style.margin="auto";e.style.top=0;e.style.bottom=0;e.style.left=0;e.style.right=0;e.style.zIndex=0;d={h:c,w:f,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:l||!1,isd:b,errorHandler:n,previousISDState:p,enableRollUp:q||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};a.appendChild(e);for(var v in b.contents)k(d,
e,b.contents[v]);return d.currentISDState};var A=[new f("http://www.w3.org/ns/ttml#styling backgroundColor",function(b,a,d,c){0!==c[3]&&(a.style.backgroundColor="rgba("+c[0].toString()+","+c[1].toString()+","+c[2].toString()+","+(c[3]/255).toString()+")")}),new f("http://www.w3.org/ns/ttml#styling color",function(b,a,d,c){a.style.color="rgba("+c[0].toString()+","+c[1].toString()+","+c[2].toString()+","+(c[3]/255).toString()+")"}),new f("http://www.w3.org/ns/ttml#styling direction",function(b,a,d,
c){a.style.direction=c}),new f("http://www.w3.org/ns/ttml#styling display",function(b,a,d,c){}),new f("http://www.w3.org/ns/ttml#styling displayAlign",function(b,a,d,c){a.style.display="flex";a.style.flexDirection="column";"before"===c?a.style.justifyContent="flex-start":"center"===c?a.style.justifyContent="center":"after"===c&&(a.style.justifyContent="flex-end")}),new f("http://www.w3.org/ns/ttml#styling extent",function(b,a,d,c){b.regionH=c.h.toUsedLength(b.w,b.h);b.regionW=c.w.toUsedLength(b.w,
b.h);var f=c=0;if(d=d.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])c=d[0].toUsedLength(b.w,b.h)+d[2].toUsedLength(b.w,b.h),f=d[1].toUsedLength(b.w,b.h)+d[3].toUsedLength(b.w,b.h);a.style.height=b.regionH-c+"px";a.style.width=b.regionW-f+"px"}),new f("http://www.w3.org/ns/ttml#styling fontFamily",function(b,a,d,c){b=[];for(var f in c)"monospaceSerif"===c[f]?(b.push("Courier New"),b.push('"Liberation Mono"'),b.push("Courier"),b.push("monospace")):"proportionalSansSerif"===c[f]?(b.push("Arial"),
b.push("Helvetica"),b.push('"Liberation Sans"'),b.push("sans-serif")):"monospace"===c[f]?b.push("monospace"):"sansSerif"===c[f]?b.push("sans-serif"):"serif"===c[f]?b.push("serif"):"monospaceSansSerif"===c[f]?(b.push("Consolas"),b.push("monospace")):"proportionalSerif"===c[f]?b.push("serif"):b.push(c[f]);a.style.fontFamily=b.join(",")}),new f("http://www.w3.org/ns/ttml#styling shear",function(b,a,d,c){0!==c&&(d=-.9*c,a.style.transform="tb"===b.bpd?"skewX("+d+"deg)":"skewY("+d+"deg)")}),new f("http://www.w3.org/ns/ttml#styling fontSize",
function(b,a,d,c){a.style.fontSize=c.toUsedLength(b.w,b.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling fontStyle",function(b,a,d,c){a.style.fontStyle=c}),new f("http://www.w3.org/ns/ttml#styling fontWeight",function(b,a,d,c){a.style.fontWeight=c}),new f("http://www.w3.org/ns/ttml#styling lineHeight",function(b,a,d,c){a.style.lineHeight="normal"===c?"normal":c.toUsedLength(b.w,b.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling opacity",function(b,a,d,c){a.style.opacity=c}),new f("http://www.w3.org/ns/ttml#styling origin",
function(b,a,d,c){a.style.top=c.h.toUsedLength(b.w,b.h)+"px";a.style.left=c.w.toUsedLength(b.w,b.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling overflow",function(b,a,d,c){a.style.overflow=c}),new f("http://www.w3.org/ns/ttml#styling padding",function(b,a,d,c){d=[];d[0]=c[0].toUsedLength(b.w,b.h)+"px";d[1]=c[3].toUsedLength(b.w,b.h)+"px";d[2]=c[2].toUsedLength(b.w,b.h)+"px";d[3]=c[1].toUsedLength(b.w,b.h)+"px";a.style.padding=d.join(" ")}),new f("http://www.w3.org/ns/ttml#styling position",function(b,
a,d,c){a.style.top=c.h.toUsedLength(b.w,b.h)+"px";a.style.left=c.w.toUsedLength(b.w,b.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling rubyAlign",function(b,a,d,c){a.style.rubyAlign=c}),new f("http://www.w3.org/ns/ttml#styling rubyPosition",function(b,a,d,c){if("before"===c||"after"===c)a.parentElement.style.rubyPosition="tb"===b.bpd?"before"===c?"over":"under":"rl"===b.bpd?"before"===c?"over":"under":"before"===c?"under":"over"}),new f("http://www.w3.org/ns/ttml#styling showBackground",null),new f("http://www.w3.org/ns/ttml#styling textAlign",
function(b,a,d,c){b=d.styleAttrs[l.byName.direction.qname];a.style.textAlign="start"===c?"rtl"===b?"right":"left":"end"===c?"rtl"===b?"left":"right":c}),new f("http://www.w3.org/ns/ttml#styling textDecoration",function(b,a,d,c){a.style.textDecoration=c.join(" ").replace("lineThrough","line-through")}),new f("http://www.w3.org/ns/ttml#styling textOutline",function(b,a,d,c){}),new f("http://www.w3.org/ns/ttml#styling textShadow",function(b,a,d,c){d=d.styleAttrs[l.byName.textOutline.qname];if("none"===
c&&"none"===d)a.style.textShadow="";else{var f=[];"none"!==d&&f.push("rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+") 0px 0px "+d.thickness.toUsedLength(b.w,b.h)+"px");if("none"!==c)for(var e in c)f.push(c[e].x_off.toUsedLength(b.w,b.h)+"px "+c[e].y_off.toUsedLength(b.w,b.h)+"px "+c[e].b_radius.toUsedLength(b.w,b.h)+"px rgba("+c[e].color[0].toString()+","+c[e].color[1].toString()+","+c[e].color[2].toString()+","+(c[e].color[3]/255).toString()+
")");a.style.textShadow=f.join(",")}}),new f("http://www.w3.org/ns/ttml#styling textCombine",function(b,a,d,c){a.style.textCombineUpright=c.join(" ")}),new f("http://www.w3.org/ns/ttml#styling textEmphasis",function(b,a,d,c){if("none"===c.style)a.style.textEmphasisStyle="none";else if(a.style.textEmphasisStyle="auto"===c.style?"filled":c.style+" "+c.symbol,"before"===c.position||"after"===c.position)a.style.textEmphasisPosition="tb"===b.bpd?"before"===c.position?"left over":"left under":"rl"===b.bpd?
"before"===c.position?"right under":"left under":"before"===c.position?"left under":"right under"}),new f("http://www.w3.org/ns/ttml#styling unicodeBidi",function(b,a,d,c){a.style.unicodeBidi="bidiOverride"===c?"bidi-override":c}),new f("http://www.w3.org/ns/ttml#styling visibility",function(b,a,d,c){a.style.visibility=c}),new f("http://www.w3.org/ns/ttml#styling wrapOption",function(b,a,d,c){a.style.whiteSpace="wrap"===c?"preserve"===d.space?"pre-wrap":"normal":"preserve"===d.space?"pre":"noWrap"}),
new f("http://www.w3.org/ns/ttml#styling writingMode",function(b,a,d,c){if("lrtb"===c||"lr"===c)b.writingMode="horizontal-tb";else if("rltb"===c||"rl"===c)b.writingMode="horizontal-tb";else if("tblr"===c)b.writingMode="vertical-lr";else if("tbrl"===c||"tb"===c)b.writingMode="vertical-rl";a.style.writingMode=b.writingMode}),new f("http://www.w3.org/ns/ttml#styling zIndex",function(b,a,d,c){a.style.zIndex=c}),new f("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(b,a,d,c){b.displayForcedOnlyMode&&
!1===c&&(a.style.visibility="hidden")})],n;for(n in A);})("undefined"===typeof q?this.imscHTML={}:q,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37}],33:[function(c,r,q){(function(c,a,l,p){function k(b,a,c,f,r,t,w,I,M){if(a<w.begin||a>=w.end)return null;t="regionID"in w&&""!==w.regionID?w.regionID:t;if(null!==r&&t!==c.id&&(!("contents"in w)||
"contents"in w&&0===w.contents.length||""!==t))return null;var e=new A(w);for(u in w.sets)a<w.sets[u].begin||a>=w.sets[u].end||(e.styleAttrs[w.sets[u].qname]=w.sets[u].value);var u={};for(var v in e.styleAttrs)if(u[v]=!0,v===l.byName.writingMode.qname&&!(l.byName.direction.qname in e.styleAttrs)){var x=e.styleAttrs[v];if("lrtb"===x||"lr"===x)e.styleAttrs[l.byName.direction.qname]="ltr";else if("rltb"===x||"rl"===x)e.styleAttrs[l.byName.direction.qname]="rtl"}if(null!==r)for(var y in l.all)if(v=l.all[y],
v.qname===l.byName.textDecoration.qname){x=r.styleAttrs[v.qname];var F=e.styleAttrs[v.qname],E=[];void 0===F?E=x:-1===F.indexOf("none")?((-1===F.indexOf("noUnderline")&&-1!==x.indexOf("underline")||-1!==F.indexOf("underline"))&&E.push("underline"),(-1===F.indexOf("noLineThrough")&&-1!==x.indexOf("lineThrough")||-1!==F.indexOf("lineThrough"))&&E.push("lineThrough"),(-1===F.indexOf("noOverline")&&-1!==x.indexOf("overline")||-1!==F.indexOf("overline"))&&E.push("overline")):E.push("none");e.styleAttrs[v.qname]=
E}else v.qname!==l.byName.fontSize.qname||v.qname in e.styleAttrs||"span"!==e.kind||"textContainer"!==e.styleAttrs[l.byName.ruby.qname]?v.qname!==l.byName.fontSize.qname||v.qname in e.styleAttrs||"span"!==e.kind||"text"!==e.styleAttrs[l.byName.ruby.qname]?v.inherit&&v.qname in r.styleAttrs&&!(v.qname in e.styleAttrs)&&(e.styleAttrs[v.qname]=r.styleAttrs[v.qname]):(x=r.styleAttrs[l.byName.fontSize.qname],e.styleAttrs[v.qname]="textContainer"===r.styleAttrs[l.byName.ruby.qname]?x:new p.ComputedLength(.5*
x.rw,.5*x.rh)):(x=r.styleAttrs[l.byName.fontSize.qname],e.styleAttrs[v.qname]=new p.ComputedLength(.5*x.rw,.5*x.rh));for(var z in l.all)(y=l.all[z],y.qname in e.styleAttrs||y.qname===l.byName.position.qname&&l.byName.origin.qname in e.styleAttrs||y.qname===l.byName.origin.qname&&l.byName.position.qname in e.styleAttrs||(v=b.head.styling.initials[y.qname]||y.initial,"region"!==e.kind&&(!1!==y.inherit||null===v)))||(e.styleAttrs[y.qname]=y.parse(v),u[y.qname]=!0);for(var H in l.all)if(z=l.all[H],z.qname in
u&&null!==z.compute)if(y=z.compute(b,r,e,e.styleAttrs[z.qname],M),null!==y)e.styleAttrs[z.qname]=y;else if(e.styleAttrs[z.qname]=z.compute(b,r,e,z.parse(z.initial),M),z="Style '"+z.qname+"' on element '"+e.kind+"' cannot be computed",I&&I.error&&I.error(z))throw z;if("none"===e.styleAttrs[l.byName.display.qname])return null;if(null===r)var K=null===f?[]:[f];else"contents"in w&&(K=w.contents);for(var g in K)r=k(b,a,c,f,e,t,K[g],I,M),null!==r&&e.contents.push(r.element);for(var h in e.styleAttrs)b=
!1,"span"===e.kind&&(a=e.styleAttrs[l.byName.ruby.qname],(b=("container"===a||"textContainer"===a||"baseContainer"===a)&&-1!==n.indexOf(h))||(b="container"!==a&&h===l.byName.rubyAlign.qname),b||(b=!("textContainer"===a||"text"===a)&&h===l.byName.rubyPosition.qname)),b||(b=-1===l.byQName[h].applies.indexOf(e.kind)),b&&delete e.styleAttrs[h];"span"===e.kind&&e.text&&"default"===e.space&&(h=e.text.replace(/[\t\r\n ]+/g," "),e.text=h);if("p"===e.kind){h=[];q(e,h);b=0;a="after_br";for(c=0;;)if("after_br"===
a)b>=h.length||"br"===h[b].kind?(a="before_br",c=b,b--):("preserve"!==h[b].space&&(h[b].text=h[b].text.replace(/^[\t\r\n ]+/g,"")),0<h[b].text.length?(a="looking_br",b++):h.splice(b,1));else if("before_br"===a)if(0>b||"br"===h[b].kind){if(a="after_br",b=c+1,b>=h.length)break}else if("preserve"!==h[b].space&&(h[b].text=h[b].text.replace(/[\t\r\n ]+$/g,"")),0<h[b].text.length){if(a="after_br",b=c+1,b>=h.length)break}else h.splice(b,1),b--;else b>=h.length||"br"===h[b].kind?(a="before_br",c=b,b--):b++;
d(e)}return"div"===e.kind&&l.byName.backgroundImage.qname in e.styleAttrs||"br"===e.kind||"image"===e.kind||"contents"in e&&0<e.contents.length||"span"===e.kind&&null!==e.text||"region"===e.kind&&"always"===e.styleAttrs[l.byName.showBackground.qname]?{region_id:t,element:e}:null}function q(b,a){if("contents"in b)for(var d in b.contents)q(b.contents[d],a);else"span"!==b.kind&&"br"!==b.kind||a.push(b)}function d(b){if("br"===b.kind)return!1;if("text"in b)return 0===b.text.length;if("contents"in b){for(var a=
b.contents.length;a--;)d(b.contents[a])&&b.contents.splice(a,1);return 0===b.contents.length}}function f(b){this.contents=[];this.aspectRatio=b.aspectRatio}function A(b){this.kind=b.kind||"region";b.id&&(this.id=b.id);this.styleAttrs={};for(var a in b.styleAttrs)this.styleAttrs[a]=b.styleAttrs[a];"src"in b&&(this.src=b.src);"type"in b&&(this.type=b.type);if("text"in b)this.text=b.text;else if("region"===this.kind||"contents"in b)this.contents=[];"space"in b&&(this.space=b.space)}c.generateISD=function(b,
a,d){var c=new f(b),e={},l;for(l in b.head.layout.regions){var n=k(b,a,b.head.layout.regions[l],b.body,null,"",b.head.layout.regions[l],d,e);null!==n&&c.contents.push(n.element)}return c};var n=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]})("undefined"===typeof q?this.imscISD={}:q,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,
"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37}],34:[function(c,r,q){q.generateISD=c("./isd").generateISD;q.fromXML=c("./doc").fromXML;q.renderHTML=c("./html").render},{"./doc":31,"./html":32,"./isd":33}],35:[function(c,r,q){c="undefined"===typeof q?this.imscNames={}:q;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts=
"http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style"},{}],36:[function(c,r,q){(function(c,a,l){function k(a,c,l,k,b,e,p,q){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=b;this.animatable=e;this.initial=l;this.applies=k;this.parse=p;this.compute=q}c.all=[new k(a.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,
!0,l.parseColor,null),new k(a.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new k(a.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new k(a.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new k(a.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new k(a.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var d=a.split(" ");if(2!==d.length)return null;a=l.parseLength(d[0]);
return(d=l.parseLength(d[1]))&&a?{h:d,w:a}:null},function(a,c,k,n,b){if("auto"===n)c=new l.ComputedLength(0,1);else if(c=l.toComputedLength(n.h.value,n.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===n)a=new l.ComputedLength(1,0);else if(a=l.toComputedLength(n.w.value,n.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new k(a.ns_tts,"fontFamily","default",["span"],!0,!0,function(a){a=a.split(",");var d=[],c;for(c in a)"'"!==a[c].charAt(0)&&
'"'!==a[c].charAt(0)?"default"===a[c]?d.push("monospaceSerif"):d.push(a[c]):d.push(a[c]);return d},null),new k(a.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(a,c,l,k){if("%"===k.unit)a=100<Math.abs(k.value)?100*Math.sign(k.value):k.value;else return null;return a}),new k(a.ns_tts,"fontSize","1c",["span"],!0,!0,l.parseLength,function(a,f,k,n,b){return l.toComputedLength(n.value,n.unit,null!==f?f.styleAttrs[c.byName.fontSize.qname]:a.cellLength.h,null!==f?f.styleAttrs[c.byName.fontSize.qname]:
a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new k(a.ns_tts,"fontStyle","normal",["span"],!0,!0,function(a){return a},null),new k(a.ns_tts,"fontWeight","normal",["span"],!0,!0,function(a){return a},null),new k(a.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:l.parseLength(a)},function(a,f,k,n,b){if("normal"===n)a=n;else if(a=l.toComputedLength(n.value,n.unit,k.styleAttrs[c.byName.fontSize.qname],k.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===
a)return null;return a}),new k(a.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new k(a.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var d=a.split(" ");if(2!==d.length)return null;a=l.parseLength(d[0]);return(d=l.parseLength(d[1]))&&a?{h:d,w:a}:null},function(a,c,k,n,b){if("auto"===n)c=new l.ComputedLength(0,0);else if(c=l.toComputedLength(n.h.value,n.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===n)a=new l.ComputedLength(0,0);else if(a=
l.toComputedLength(n.w.value,n.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new k(a.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new k(a.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;var d=[],c;for(c in a){var k=l.parseLength(a[c]);if(!k)return null;d.push(k)}return d},function(a,f,k,n,b){if(1===n.length)f=[n[0],n[0],n[0],n[0]];else if(2===n.length)f=[n[0],n[1],n[0],n[1]];else if(3===
n.length)f=[n[0],n[1],n[2],n[1]];else if(4===n.length)f=[n[0],n[1],n[2],n[3]];else return null;n=k.styleAttrs[c.byName.writingMode.qname];if("lrtb"===n||"lr"===n)f=[f[0],f[3],f[2],f[1]];else if("rltb"===n||"rl"===n)f=[f[0],f[1],f[2],f[3]];else if("tblr"===n)f=[f[3],f[0],f[1],f[2]];else if("tbrl"===n||"tb"===n)f=[f[3],f[2],f[1],f[0]];else return null;n=[];for(var d in f)if(0===f[d].value)n[d]=new l.ComputedLength(0,0);else if(n[d]=l.toComputedLength(f[d].value,f[d].unit,k.styleAttrs[c.byName.fontSize.qname],
"0"===d||"2"===d?k.styleAttrs[c.byName.extent.qname].h:k.styleAttrs[c.byName.extent.qname].w,"0"===d||"2"===d?a.cellLength.h:a.cellLength.w,"0"===d||"2"===d?a.pxLength.h:a.pxLength.w),null===n[d])return null;return n}),new k(a.ns_tts,"position","top left",["region"],!1,!0,function(a){return l.parsePosition(a)},function(a,f,k,n){f=l.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new l.ComputedLength(-k.styleAttrs[c.byName.extent.qname].h.rw,a.dimensions.h.rh-k.styleAttrs[c.byName.extent.qname].h.rh),
null,a.pxLength.h);if(null===f)return null;"bottom"===n.v.edge&&(f=new l.ComputedLength(-f.rw-k.styleAttrs[c.byName.extent.qname].h.rw,a.dimensions.h.rh-f.rh-k.styleAttrs[c.byName.extent.qname].h.rh));var b=l.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new l.ComputedLength(a.dimensions.w.rw-k.styleAttrs[c.byName.extent.qname].w.rw,-k.styleAttrs[c.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===f)return null;"right"===n.h.edge&&(b=new l.ComputedLength(a.dimensions.w.rw-b.rw-k.styleAttrs[c.byName.extent.qname].w.rw,
-b.rh-k.styleAttrs[c.byName.extent.qname].w.rh));return{h:f,w:b}}),new k(a.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new k(a.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new k(a.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new k(a.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var c=a.split(" ");a=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&
"before"!==c[0]&&"outside"!==c[0])return null;a[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=l.parseLength(c[1]))a[1]=c;else return null;return a},function(a,f,k,n,b){if("none"===n[0])return n;a=null===n[1]?new l.ComputedLength(.5*k.styleAttrs[c.byName.fontSize.qname].rw,.5*k.styleAttrs[c.byName.fontSize.qname].rh):l.toComputedLength(n[1].value,n[1].unit,k.styleAttrs[c.byName.fontSize.qname],k.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[n[0],a]}),new k(a.ns_tts,
"showBackground","always",["region"],!1,!0,function(a){return a},null),new k(a.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,c,l,k,b){return"left"===k?"start":"right"===k?"end":k}),new k(a.ns_tts,"textCombine","none",["span"],!0,!0,function(a){a=a.split(" ");return 1!==a.length||"none"!==a[0]&&"all"!==a[0]?null:[a[0]]},null),new k(a.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new k(a.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=
a.split(" ");var c={style:null,symbol:null,color:null,position:null},d;for(d in a)if("none"===a[d]||"auto"===a[d])c.style=a[d];else if("filled"===a[d]||"open"===a[d])c.style=a[d];else if("circle"===a[d]||"dot"===a[d]||"sesame"===a[d])c.symbol=a[d];else if("current"===a[d])c.color=a[d];else if("outside"===a[d]||"before"===a[d]||"after"===a[d])c.position=a[d];else if(c.color=l.parseColor(a[d]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=
c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new k(a.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var c={};a=a.split(" ");if(0===a.length||2<a.length)return null;var d=l.parseColor(a[0]);c.color=d;null!==d&&a.shift();if(1!==a.length)return null;a=l.parseLength(a[0]);if(!a)return null;c.thickness=a;return c},function(a,f,k,n,b){if("none"===n)return n;f={};f.color=null===n.color?k.styleAttrs[c.byName.color.qname]:n.color;
f.thickness=l.toComputedLength(n.thickness.value,n.thickness.unit,k.styleAttrs[c.byName.fontSize.qname],k.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===f.thickness?null:f}),new k(a.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(a,f,k,n){if("none"===n)return n;f=[];for(var b in n){var d={};d.x_off=l.toComputedLength(n[b][0].value,n[b][0].unit,null,k.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.w);if(null===d.x_off)return null;d.y_off=l.toComputedLength(n[b][1].value,
n[b][1].unit,null,k.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.h);if(null===d.y_off)return null;if(null===n[b][2])d.b_radius=0;else if(d.b_radius=l.toComputedLength(n[b][2].value,n[b][2].unit,null,k.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.h),null===d.b_radius)return null;d.color=null===n[b][3]?k.styleAttrs[c.byName.color.qname]:n[b][3];f.push(d)}return f}),new k(a.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new k(a.ns_tts,"visibility","visible",
["body","div","p","region","span"],!0,!0,function(a){return a},null),new k(a.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new k(a.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new k(a.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new k(a.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(a,c,k,n,b){return l.toComputedLength(n.value,n.unit,null,null,a.cellLength.w,null)}),
new k(a.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new k(a.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new k(a.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new k(a.ns_itts,"fillLineGap","false",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];c.byQName={};for(var q in c.all)c.byQName[c.all[q].qname]=c.all[q];c.byName={};for(var r in c.all)c.byName[c.all[r].name]=
c.all[r]})("undefined"===typeof q?this.imscStyles={}:q,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./utils":37}],37:[function(c,r,q){(function(c){var a=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,k=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,q={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,
255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(c){var d,p=null,n=q[c.toLowerCase()];void 0!==n?p=n:null!==(d=a.exec(c))?p=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),void 0!==d[4]?parseInt(d[4],16):255]:null!==
(d=l.exec(c))?p=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),255]:null!==(d=k.exec(c))&&(p=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),parseInt(d[4])]);return p};var r=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var c,d=null;null!==(c=r.exec(a))&&(d={value:parseFloat(c[1]),unit:c[2]});return d};c.parseTextShadow=function(a){a=a.split(",");var d=[],l;for(l in a){var k=a[l].split(" ");if(1===k.length&&"none"===k[0])return"none";if(1<k.length&&5>k.length){var b=[null,
null,null,null],e=c.parseLength(k.shift());if(null===e)return null;b[0]=e;e=c.parseLength(k.shift());if(null===e)return null;b[1]=e;if(0!==k.length&&(e=c.parseLength(k[0]),null!==e&&(b[2]=e,k.shift()),0!==k.length)){k=c.parseColor(k[0]);if(null===k)return null;b[3]=k}d.push(b)}}return d};c.parsePosition=function(a){a=a.split(" ");var d=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var k in a)if(!d(a[k])){var l=c.parseLength(a[k]);if(null===
l)return null;a[k]=l}k={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(l=0;l<a.length;){var b=a[l++];if(d(b)){var e={value:0,unit:"%"};2!==a.length&&l<a.length&&!d(a[l])&&(e=a[l++]);"right"===b?(k.h.edge=b,k.h.offset=e):"bottom"===b?(k.v.edge=b,k.v.offset=e):"left"===b?k.h.offset=e:"top"===b&&(k.v.offset=e)}else if(1===a.length||2===a.length)1===l?k.h.offset=b:k.v.offset=b;else return null}return k};c.ComputedLength=function(a,c){this.rw=a;this.rh=c};c.ComputedLength.prototype.toUsedLength=
function(a,c){return a*this.rw+c*this.rh};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,f,k,l,b,e){return"%"===f&&l?new c.ComputedLength(l.rw*a/100,l.rh*a/100):"em"===f&&k?new c.ComputedLength(k.rw*a,k.rh*a):"c"===f&&b?new c.ComputedLength(a*b.rw,a*b.rh):"px"===f&&e?new c.ComputedLength(a*e.rw,a*e.rh):"rh"===f?new c.ComputedLength(0,a/100):"rw"===f?new c.ComputedLength(a/100,0):null}})("undefined"===typeof q?this.imscUtils={}:q)},{}]},
{},[34])(34)});
