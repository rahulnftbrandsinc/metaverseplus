{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/audio-params.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/react-components/modal/Modal.scss?41cd","webpack:///./src/react-components/room/ChatSidebar.scss?db5d","webpack:///./src/assets/stylesheets/hub.scss?2604","webpack:///./src/react-components/debug-panel/AudioDebugPanel.scss?6e55","webpack:///./src/utils/mask-email.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/detect-touchscreen.js","webpack:///./src/utils/permissions-utils.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/fader.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/mute-button.js","webpack:///./src/components/kick-button.js","webpack:///./src/components/close-vr-notice-button.js","webpack:///./src/components/leave-room-button.js","webpack:///./src/components/visible-if-permitted.js","webpack:///./src/components/visibility-on-content-types.js","webpack:///./src/components/hide-when-pinned-and-forbidden.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/utils/async-utils.js","webpack:///./src/assets/locales lazy ^\\.\\/.*\\.json$ namespace object","webpack:///./src/components/pinnable.js","webpack:///./src/components/drop-object-button.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/action-to-remove.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/follow-in-fov.js","webpack:///./src/components/hover-menu.js","webpack:///./src/components/disable-frustum-culling.js","webpack:///./src/components/track-pose.js","webpack:///./src/components/replay.js","webpack:///./src/components/visibility-by-path.js","webpack:///./src/components/periodic-full-syncs.js","webpack:///./src/components/inspect-button.js","webpack:///./src/components/inspect-pivot-child-selector.js","webpack:///./src/components/optional-alternative-to-not-hide.js","webpack:///./src/components/avatar-inspect-collider.js","webpack:///./src/utils/get-app-logo.js","webpack:///./src/react-components/icons/HmcLogo.svg","webpack:///./src/react-components/misc/AppLogo.js","webpack:///./src/react-components/input/Button.js","webpack:///./src/systems/camera-system.js","webpack:///./src/react-components/input/TextInputField.js","webpack:///./src/utils/next-tick.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/systems/app-mode.js","webpack:///./src/systems/permissions.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/auto-pixel-ratio.js","webpack:///./src/systems/listed-media.js","webpack:///./src/components/owned-object-limiter.js","webpack:///./src/components/owned-object-cleanup-timeout.js","webpack:///./src/components/set-unowned-body-kinematic.js","webpack:///./src/react-components/input/InputField.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/utils/component-utils.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/hub-utils.js","webpack:///./src/utils/aframe-overrides.js","webpack:///./src/transport-for-channel.js","webpack:///./src/phoenix-adapter.js","webpack:///./src/naf-dialog-adapter.js","webpack:///./src/change-hub.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/emoji.js","webpack:///./src/components/emoji-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/player-info.js","webpack:///./src/components/name-tag.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/utils/mirror-utils.js","webpack:///./src/utils/error-texture.js","webpack:///./src/utils/scale-to-aspect-ratio.js","webpack:///./src/components/media-video.js","webpack:///./src/components/media-pdf.js","webpack:///./src/utils/create-basis-texture.js","webpack:///./src/utils/gif-texture.js","webpack:///./src/components/media-image.js","webpack:///./src/utils/texture-cache.js","webpack:///./src/utils/avatar-volume-utils.js","webpack:///./src/components/avatar-volume-controls.js","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/position-at-border.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/mirror-media-button.js","webpack:///./src/components/close-mirrored-media-button.js","webpack:///./src/utils/removeNetworkedObject.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/camera-tool.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/utils/vr-interstitial.js","webpack:///./src/components/open-media-button.js","webpack:///./src/components/refresh-media-button.js","webpack:///./src/components/tweet-media-button.js","webpack:///./src/components/remix-avatar-button.js","webpack:///./src/components/transform-object-button.js","webpack:///./src/components/scale-button.js","webpack:///./src/utils/aframe-utils.js","webpack:///./src/components/teleporter.js","webpack:///./src/components/cylinder-texture.js","webpack:///./src/components/inspect-pivot-offset-from-camera.js","webpack:///./src/components/avatar-audio-source.js","webpack:///./src/components/video-texture-target.js","webpack:///./src/components/mirror.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/utils/share.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/react-components/state-route.js","webpack:///./src/utils/microphone-presence.js","webpack:///./src/react-components/sidebar/Sidebar.js","webpack:///./src/react-components/icons/ChevronBack.svg","webpack:///./src/react-components/input/BackButton.js","webpack:///./src/react-components/room/AvatarSettingsContent.js","webpack:///./src/react-components/room/AvatarSettingsSidebar.js","webpack:///./src/react-components/room/AvatarSetupModal.js","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/room/AvatarUrlModal.js","webpack:///./src/react-components/room/AvatarUrlModalContainer.js","webpack:///./src/react-components/room/SceneUrlModal.js","webpack:///./src/utils/scene-url-utils.js","webpack:///./src/react-components/room/SceneUrlModalContainer.js","webpack:///./src/react-components/icons/Attach.svg","webpack:///./src/react-components/room/ObjectUrlModal.js","webpack:///./src/react-components/room/ObjectUrlModalContainer.js","webpack:///./src/react-components/icons/ArrowForward.svg","webpack:///./src/react-components/icons/ArrowBack.svg","webpack:///./src/react-components/layout/FullscreenLayout.js","webpack:///./src/react-components/room/MediaBrowser.js","webpack:///./src/react-components/icons/Upload.svg","webpack:///./src/react-components/icons/Link.svg","webpack:///./src/react-components/media-browser.js","webpack:///./src/react-components/entry-start-panel.js","webpack:///./src/react-components/avatar-editor.js","webpack:///./src/utils/media-devices-manager.js","webpack:///./src/react-components/input/Slider.js","webpack:///./src/react-components/preferences-screen.js","webpack:///./src/react-components/icons/Wand.svg","webpack:///./src/react-components/icons/Chat.svg","webpack:///./src/react-components/icons/Send.svg","webpack:///./src/react-components/icons/Reaction.svg","webpack:///./src/react-components/input/TextAreaInput.js","webpack:///./src/react-components/input/ToolbarButton.js","webpack:///./src/react-components/popover/Popover.js","webpack:///./src/react-components/room/EmojiPicker.js","webpack:///./src/utils/chat-message.js","webpack:///./src/react-components/room/ChatSidebar.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/video-message.js","webpack:///./src/react-components/image-message.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/react-components/preload-overlay.js","webpack:///./src/react-components/debug-panel/DataGraph.js","webpack:///./src/react-components/debug-panel/Prop.js","webpack:///./src/react-components/debug-panel/DataPanel.js","webpack:///./src/react-components/debug-panel/CollapsiblePanel.js","webpack:///./src/react-components/icons/CaretDown.svg","webpack:///./src/react-components/input/SelectInputField.js","webpack:///./src/react-components/debug-panel/AudioDebugPanel.js","webpack:///./src/react-components/debug-panel/RtcDebugPanel.js","webpack:///./src/react-components/layout/LoadingScreenLayout.js","webpack:///./src/react-components/room/LoadingScreen.js","webpack:///./src/react-components/room/useRandomMessageTransition.js","webpack:///./src/react-components/room/useRoomLoadingState.js","webpack:///./src/react-components/room/LoadingScreenContainer.js","webpack:///./src/react-components/layout/Toolbar.js","webpack:///./src/react-components/layout/RoomLayout.js","webpack:///./src/react-components/room/RoomLayoutContainer.js","webpack:///./src/react-components/icons/Enter.svg","webpack:///./src/react-components/icons/VR.svg","webpack:///./src/react-components/icons/Show.svg","webpack:///./src/react-components/icons/Settings.svg","webpack:///./src/react-components/room/RoomEntryModal.js","webpack:///./src/react-components/room/EnterOnDeviceModal.js","webpack:///./src/react-components/icons/Microphone.svg","webpack:///./src/react-components/icons/MicrophoneMuted.svg","webpack:///./src/react-components/icons/VolumeOff.svg","webpack:///./src/react-components/icons/Info.svg","webpack:///./src/react-components/input/ToggleInput.js","webpack:///./src/react-components/misc/LevelBar.js","webpack:///./src/react-components/room/MicSetupModal.js","webpack:///./src/react-components/room/useMicrophoneStatus.js","webpack:///./src/react-components/room/useMicrophone.js","webpack:///./src/react-components/misc/useVolumeMeter.js","webpack:///./src/react-components/room/useSound.js","webpack:///./src/react-components/room/useSpeakers.js","webpack:///./src/react-components/room/MicSetupModalContainer.js","webpack:///./src/react-components/input/CopyableTextInputField.js","webpack:///./src/react-components/icons/Invite.svg","webpack:///./src/react-components/room/InviteLinkInputField.js","webpack:///./src/react-components/room/InvitePopover.js","webpack:///./src/react-components/room/useInviteUrl.js","webpack:///./src/react-components/room/InvitePopoverContainer.js","webpack:///./src/react-components/icons/More.svg","webpack:///./src/react-components/room/MoreMenuPopover.js","webpack:///./src/react-components/room/ChatSidebarContainer.js","webpack:///./src/react-components/misc/useMaintainScrollPosition.js","webpack:///./src/react-components/misc/joinChildren.js","webpack:///./src/react-components/icons/Objects.svg","webpack:///./src/react-components/room/ContentMenu.js","webpack:///./src/react-components/icons/Camera.svg","webpack:///./src/react-components/icons/Avatar.svg","webpack:///./src/react-components/icons/Delete.svg","webpack:///./src/react-components/icons/Favorites.svg","webpack:///./src/react-components/icons/StarOutline.svg","webpack:///./src/react-components/icons/WarningCircle.svg","webpack:///./src/react-components/icons/Home.svg","webpack:///./src/react-components/icons/TextDocument.svg","webpack:///./src/react-components/icons/Support.svg","webpack:///./src/react-components/icons/Shield.svg","webpack:///./src/react-components/icons/Discord.svg","webpack:///./src/react-components/icons/Leave.svg","webpack:///./src/react-components/icons/Desktop.svg","webpack:///./src/react-components/icons/Phone.svg","webpack:///./src/react-components/icons/VolumeHigh.svg","webpack:///./src/react-components/icons/VolumeMuted.svg","webpack:///./src/react-components/icons/HandRaised.svg","webpack:///./src/react-components/layout/List.js","webpack:///./src/react-components/room/PeopleSidebar.js","webpack:///./src/react-components/room/PromoteClientModal.js","webpack:///./src/react-components/room/UserProfileSidebar.js","webpack:///./src/react-components/room/useAvatarVolume.js","webpack:///./src/react-components/room/UserProfileSidebarContainer.js","webpack:///./src/react-components/room/PeopleSidebarContainer.js","webpack:///./src/utils/media-sorting.js","webpack:///./src/react-components/room/useObjectList.js","webpack:///./src/react-components/icons/Object.svg","webpack:///./src/react-components/icons/Image.svg","webpack:///./src/react-components/icons/Video.svg","webpack:///./src/react-components/icons/Audio.svg","webpack:///./src/react-components/room/ObjectsSidebar.js","webpack:///./src/react-components/room/ObjectsSidebarContainer.js","webpack:///./src/react-components/icons/Lightbulb.svg","webpack:///./src/react-components/icons/LightbulbOutline.svg","webpack:///./src/react-components/room/ObjectMenu.js","webpack:///./src/react-components/room/object-hooks.js","webpack:///./src/react-components/icons/Pin.svg","webpack:///./src/react-components/icons/GoTo.svg","webpack:///./src/react-components/icons/Hide.svg","webpack:///./src/react-components/room/ObjectMenuContainer.js","webpack:///./src/react-components/icons/GIF.svg","webpack:///./src/react-components/icons/Scene.svg","webpack:///./src/react-components/popover/ButtonGridPopover.js","webpack:///./src/react-components/room/PlacePopover.js","webpack:///./src/react-components/room/PlacePopoverContainer.js","webpack:///./src/react-components/icons/Share.svg","webpack:///./src/react-components/room/SharePopover.js","webpack:///./src/react-components/room/SharePopoverContainer.js","webpack:///./src/react-components/room/useAvatar.js","webpack:///./src/react-components/layout/Row.js","webpack:///./src/react-components/layout/Divider.js","webpack:///./src/react-components/room/AudioPopoverContent.js","webpack:///./src/react-components/room/AudioPopoverContentContainer.js","webpack:///./src/react-components/icons/Arrow.svg","webpack:///./src/react-components/room/AudioPopoverButton.js","webpack:///./src/react-components/room/AudioPopoverButtonContainer.js","webpack:///./src/react-components/room/AudioPopoverContainer.js","webpack:///./src/react-components/popover/ImageGridPopover.js","webpack:///./src/react-components/room/ReactionButton.js","webpack:///./src/react-components/room/ReactionPopover.js","webpack:///./src/react-components/room/ReactionPopoverContainer.js","webpack:///./src/react-components/room/SafariMicModal.js","webpack:///./src/react-components/auth/RoomSignInModalContainer.js","webpack:///./src/react-components/room/LeaveRoomModal.js","webpack:///./src/react-components/room/RoomSidebar.js","webpack:///./src/react-components/input/TextAreaInputField.js","webpack:///./src/react-components/input/RadioInput.js","webpack:///./src/react-components/input/RadioInputField.js","webpack:///./src/react-components/input/NumericInput.js","webpack:///./src/react-components/input/NumericInputField.js","webpack:///./src/react-components/room/RoomSettingsSidebar.js","webpack:///./src/react-components/room/RoomSettingsSidebarContainer.js","webpack:///./src/react-components/room/AutoExitWarningModal.js","webpack:///./src/react-components/room/ExitedRoomScreen.js","webpack:///./src/react-components/room/CloseRoomModal.js","webpack:///./src/react-components/room/WebVRUnsupportedModal.js","webpack:///./src/react-components/room/TweetEditorModal.js","webpack:///./src/react-components/room/TweetEditorModalContainer.js","webpack:///./src/react-components/room/TwitterOAuthModal.js","webpack:///./src/react-components/room/TwitterOAuthModalContainer.js","webpack:///./src/react-components/room/TweetModalContainer.js","webpack:///./src/react-components/room/Tip.js","webpack:///./src/react-components/room/TipContainer.js","webpack:///./src/react-components/room/SpectatingLabel.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/react-components/room/ExitedRoomScreenContainer.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/utils/physics-utils.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/utils/traverseFilteredSubtrees.js","webpack:///./src/systems/idle-detector.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/systems/pen-tools.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/array-backed-set.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/arm-model.js","webpack:///./src/systems/userinput/devices/copy-sitting-to-standing-transform.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/webxr-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/interactions.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/webxr-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/cardboard-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/ui-hotkeys.js","webpack:///./src/systems/tips.js","webpack:///./src/systems/cursor-targetting-system.js","webpack:///./src/systems/cursor-toggling-system.js","webpack:///./src/systems/physics-system.js","webpack:///./src/systems/constraints-system.js","webpack:///./src/systems/two-point-stretching-system.js","webpack:///./src/systems/button-systems.js","webpack:///./src/systems/drawing-menu-system.js","webpack:///./src/systems/hover-menu-system.js","webpack:///./src/systems/super-spawner-system.js","webpack:///./src/systems/haptic-feedback-system.js","webpack:///./src/systems/render-manager-system.js","webpack:///./src/systems/interaction-sfx-system.js","webpack:///./src/utils/theme-sprites.js","webpack:///./src/systems/sprites.js","webpack:///./src/systems/waypoint-system.js","webpack:///./src/utils/mat4-pool.js","webpack:///./src/utils/get-current-player-height.js","webpack:///./src/systems/character-controller-system.js","webpack:///./src/systems/cursor-pose-tracking.js","webpack:///./src/systems/menu-animation-system.js","webpack:///./src/systems/audio-settings-system.js","webpack:///./src/systems/audio-system.js","webpack:///./src/systems/media-frames.js","webpack:///./src/systems/inspect-yourself-system.js","webpack:///./src/systems/emoji-system.js","webpack:///./src/systems/audio-zones-system.js","webpack:///./src/systems/audio-gain-system.js","webpack:///./src/systems/name-tag-visibility-system.js","webpack:///./src/systems/hubs-systems.js","webpack:///./src/systems/capture-system.js","webpack:///./src/systems/linked-media.js","webpack:///./src/systems/audio-debug-system.js","webpack:///./src/utils/pinning-helper.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/components/scalable-when-grabbed.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/tools/pen.js","webpack:///./src/components/tools/pen-laser.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/components/body-helper.js","webpack:///./src/components/shape-helper.js","webpack:///./src/network-schemas.js","webpack:///./src/react-components/auth/OAuthScreen.js","webpack:///./src/react-components/auth/OAuthScreenContainer.js","webpack:///./src/hub.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/emitter.js","webpack:///./src/react-components/input/useAccessibleOutlineStyle.js","webpack:///./src/components/tags.js","webpack:///./src/react-components/styles/style-utils.scss?548a","webpack:///./src/utils/media-utils.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/fullscreen.js","webpack:///./src/react-components/layout/RoomLayout.scss?9f2d","webpack:///./src/react-components/room/RoomSidebar.scss?0da3","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/utils/media-url-utils.js","webpack:///./src/react-components/room/AudioPopover.scss?cee5","webpack:///./src/systems/userinput/paths.js","webpack:///./src/assets/locales/locale_config.js","webpack:///./src/react-components/input/IconButton.scss?0bc2","webpack:///./src/react-components/input/useId.js","webpack:///./src/assets/stylesheets/support.scss?7a14","webpack:///./src/react-components/input/InputField.scss?124a","webpack:///./src/constants.js","webpack:///./src/react-components/styles/theme.js","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/utils/promisify-worker.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/react-components/icons/Pen.svg","webpack:///./src/react-components/popover/Popover.scss?83b5","webpack:///./src/react-components/room/ObjectMenu.scss?f293","webpack:///./src/react-components/layout/Column.js","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/react-components/icons/Star.svg","webpack:///./src/utils/detect-safari.js","webpack:///./src/react-components/room/MediaGrid.scss?443c","webpack:///./src/react-components/room/MediaBrowser.scss?f263","webpack:///./src/react-components/debug-panel/CollapsiblePanel.scss?1b69","webpack:///./src/react-components/debug-panel/RtcDebugPanel.scss?e4f5","webpack:///./src/components/layers.js","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/react-components/misc/Spinner.svg","webpack:///./src/react-components/misc/Spinner.js","webpack:///./src/react-components/icons/Close.svg","webpack:///./src/react-components/input/Button.scss?0913","webpack:///./src/utils/easing.js","webpack:///./src/assets/waternormals.jpg","webpack:///./src/react-components/icons/Warning.svg","webpack:///./src/utils/focus-utils.js","webpack:///./src/react-components/input/TextInput.js","webpack:///./src/react-components/layout/List.scss?d848","webpack:///./src/react-components/input/ToolbarButton.scss?9c5d","webpack:///./src/react-components/layout/Column.scss?5e1d","webpack:///./src/workers/sketchfab-zip.worker.js","webpack:///./src/react-components/misc/Spinner.scss?2af4","webpack:///./src/App.js","webpack:///./src/react-components/icons/Duplicate.svg","webpack:///./src/react-components/icons/Help.svg","webpack:///./src/react-components/icons/ExternalLink.svg","webpack:///./src/react-components/room/MediaTiles.js","webpack:///./src/react-components/layout/Toolbar.scss?a25b","webpack:///./src/react-components/input/ToggleInput.scss?cb11","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/stylesheets/globals.scss?0900","webpack:///./src/components/animation-mixer.js","webpack:///./src/react-components/icons/People.svg","webpack:///./src/react-components/icons/Add.svg","webpack:///./src/react-components/icons/Search.svg","webpack:///./src/utils/webgl.js","webpack:///./src/utils/animation.js","webpack:///./src/react-components/auth/LegalMessage.js","webpack:///./src/components/environment-map.js","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/react-components/room/RoomSettingsSidebar.scss?bf83","webpack:///./src/react-components/sidebar/Sidebar.scss?5994","webpack:///./src/react-components/layout/FullscreenLayout.scss?416d","webpack:///./src/assets/stylesheets/preload-overlay.scss?5ffb","webpack:///./src/react-components/input/SelectInputField.scss?cc48","webpack:///./src/react-components/room/MoreMenuPopover.scss?3106","webpack:///./src/react-components/input/RadioInput.scss?7965","webpack:///./src/react-components/room/TweetEditorModal.scss?2dd5","webpack:///./src/react-components/auth/SignInModal.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/react-components/room/MediaGrid.js","webpack:///./src/utils/history.js","webpack:///./src/react-components/if-feature.js","webpack:///./src/assets/models/LoadingEnvironment.glb","webpack:///./src/react-components/room/RoomEntryModal.scss?bcfc","webpack:///./src/react-components/layout/Row.scss?f410","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/logging.js","webpack:///./src/update-audio-settings.js","webpack:///./src/components/uv-scroll.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/hud/action_button.9.png","webpack:///./src/assets/hud/button.9.png","webpack:///./src/assets/hud/nametag.9.png","webpack:///./src/assets/hud/nametag-border.9.png","webpack:///./src/assets/models/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/utils/configs.js","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/sfx/emoji.mp3","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/images/avatar_unavailable.png","webpack:///./src/react-components/input/CloseButton.scss?c1e0","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/assets/stylesheets/avatar-preview.scss?0bdf","webpack:///./src/react-components/room/useResizeViewport.js","webpack:///./src/systems/scene-preview-camera-system.js","webpack:///./src/systems/shadow-system.js","webpack:///./src/systems/environment-system.js","webpack:///./src/assets/blender-lut.cube","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/react-components/input/Slider.scss?d8c8","webpack:///./src/react-components/layout/LoadingScreenLayout.scss?db4e","webpack:///./src/react-components/room/ContentMenu.scss?5021","webpack:///./src/assets/stylesheets/preferences-screen.scss?d977","webpack:///./src/react-components/input/TextInput.scss?a0f7","webpack:///./src/support.js","webpack:///./src/react-components/modal/Modal.js","webpack:///./src/assets/models/DuckyMesh.glb","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/assets/stylesheets/ui-root.scss?9441","webpack:///./src/react-components/input/CloseButton.js","webpack:///./src/react-components/room/ObjectUrlModal.scss?0069","webpack:///./src/react-components/room/EnterOnDeviceModal.scss?5cec","webpack:///./src/react-components/misc/LevelBar.scss?6631","webpack:///./src/react-components/room/PeopleSidebar.scss?b283","webpack:///./src/react-components/room/UserProfileSidebar.scss?eae2","webpack:///./src/react-components/room/Tip.scss?06f6","webpack:///./src/assets/stylesheets/presence-log.scss?7adb","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/billboard.js","webpack:///./src/components/css-class.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/vendor/Water.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/audio-zone.js","webpack:///./src/components/frustrum.js","webpack:///./src/components/inject-main-camera-here.js","webpack:///./src/components/debug.js","webpack:///./src/utils/isHmc.js","webpack:///./src/react-components/input/IconButton.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/assets/models/DefaultAvatar.glb","webpack:///./src/components/audio-feedback.js","webpack:///./src/components/slice9.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/components/simple-water.js","webpack:///./src/components/particle-emitter.js","webpack:///./src/components/audio-zone-source.js","webpack:///./src/components/troika-text.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/react-components/room/AvatarSettingsContent.scss?b8fc","webpack:///./src/react-components/debug-panel/Prop.scss?b0b5","webpack:///./src/react-components/debug-panel/DataPanel.scss?8c37","webpack:///./src/react-components/room/ObjectsSidebar.scss?c391","webpack:///./src/react-components/popover/ButtonGridPopover.scss?3362","webpack:///./src/react-components/popover/ImageGridPopover.scss?9683","webpack:///./src/react-components/room/ReactionButton.scss?254e","webpack:///./src/react-components/room/ReactionPopover.scss?41b3","webpack:///./src/react-components/wrapped-intl-provider.js","webpack:///./src/assets/images/app-logo.png","webpack:///./src/assets/images/app-logo-dark.png","webpack:///./src/assets/images/company-logo.png","webpack:///./src/assets/images/home-hero-background-unbranded.png","webpack:///./src/assets/images/editor-logo.png","webpack:///./src/utils/media-devices-utils.js","webpack:///./src/assets/images/emojis/emoji_0.png","webpack:///./src/assets/images/emojis/emoji_1.png","webpack:///./src/assets/images/emojis/emoji_2.png","webpack:///./src/assets/images/emojis/emoji_3.png","webpack:///./src/assets/images/emojis/emoji_4.png","webpack:///./src/assets/images/emojis/emoji_5.png","webpack:///./src/assets/images/emojis/emoji_6.png","webpack:///./src/assets/models/emojis/emoji_0.glb","webpack:///./src/assets/models/emojis/emoji_1.glb","webpack:///./src/assets/models/emojis/emoji_2.glb","webpack:///./src/assets/models/emojis/emoji_3.glb","webpack:///./src/assets/models/emojis/emoji_4.glb","webpack:///./src/assets/models/emojis/emoji_5.glb","webpack:///./src/assets/models/emojis/emoji_6.glb","webpack:///./src/assets/hud/hand-raised.png","webpack:///./src/assets/images/audio.png","webpack:///./src/utils/is-mobile.js","webpack:///./src/assets/images/media-error.png","webpack:///./src/workers/gifparsing.worker.js","webpack:///./src/assets/camera_tool.glb","webpack:///./src/react-components/input/BackButton.scss?81ee","webpack:///./src/assets/stylesheets/avatar-editor.scss?f273","webpack:///./src/react-components/input/TextAreaInput.scss?2434","webpack:///./src/assets/images/emoji-picker-16.png","webpack:///./src/assets/images/emoji-picker-20.png","webpack:///./src/assets/images/emoji-picker-32.png","webpack:///./src/assets/images/emoji-picker-64.png","webpack:///./src/react-components/room/InvitePopover.scss?0c7e","webpack:///./src/react-components/input/CopyableTextInputField.scss?f587","webpack:///./src/utils/name-generation.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/object-types.js","webpack:///./src/react-components/layout/Divider.scss?b74b","webpack:///./src/react-components/input/NumericInput.scss?a2d8","webpack:///./src/react-components/room/SpectatingLabel.scss?d5a0","webpack:///./src/assets/images/spritesheets/sprite-system-action-spritesheet.png","webpack:///./src/assets/images/spritesheets/sprite-system-notice-spritesheet.png","webpack:///./src/systems/sprites/sprite.vert","webpack:///./src/systems/sprites/sprite.frag","webpack:///./src/react-components/room/MediaTiles.scss?8edd","webpack:///./src/workers/color-shift.worker.js","webpack:///./src/systems/audio-debug.vert","webpack:///./src/systems/audio-debug.frag","webpack:///./src/react-components/auth/OAuthScreen.scss?1a0b","webpack:///./src/utils/get-color-scheme-pref.js","webpack:///./src/utils/avatar-utils.js","webpack:///./src/telemetry.js","webpack:///./src/utils/debug-log.js","webpack:///./src/react-components/room/MicSetupModal.scss?c955","webpack:///./src/utils/theme.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/components/virtual-gamepad-controls.css?7fd4"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","6","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","DISTANCE_MODEL_OPTIONS","SourceType","freeze","MEDIA_VIDEO","AVATAR_AUDIO_SOURCE","SFX","AUDIO_TARGET","AUDIO_ZONE","AudioType","Stereo","PannerNode","DistanceModelType","Linear","Inverse","Exponential","AvatarAudioDefaults","audioType","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","gain","MediaAudioDefaults","TargetAudioDefaults","GAIN_TIME_CONST","findAncestorWithComponent","entity","componentName","components","parentNode","findComponentsInNearestAncestor","maskEmail","email","emailParts","split","emailIdentity","emailDomain","truncatedIdentity","substring","Math","min","tempVector3","THREE","Vector3","Quaternion","getLastWorldPosition","updateMatrices","setFromMatrixPosition","matrixWorld","getLastWorldQuaternion","decompose","disposeMaterial","mtrl","map","dispose","lightMap","bumpMap","normalMap","specularMap","envMap","disposeNode","node","Mesh","geometry","material","materialArray","MeshFaceMaterial","MultiMaterial","materials","Array","forEach","IDENTITY","Matrix4","identity","tempMatrix4","setMatrixWorld","object3D","matrixIsModified","applyMatrix4","copy","parent","matrix","invert","multiply","position","quaternion","scale","near","childrenNeedMatrixWorldUpdate","cloneAnimationClip","sourceAnimationClip","cloneUUIDLookup","clonedTracks","tracks","keyframeTrack","sourceKeyframeTrack","nodeName","uuid","objectName","objectIndex","propertyName","propertyIndex","PropertyBinding","parseTrackName","path","clonedUUID","warn","clonedKeyframeTrack","clone","cloneKeyframeTrack","AnimationClip","duration","cloneObject3D","source","preserveUUIDs","cloneLookup","Map","parallelTraverse","a","b","callback","children","sourceNode","clonedNode","set","traverse","animations","animationClip","isMesh","boundsTree","isDirectionalLight","isSpotLight","isSkinnedMesh","sourceBones","skeleton","bones","sourceBone","has","bindMatrix","findNode","root","pred","nodes","concat","interpolateAffine","mat4","end","start","interpolated","startMat4","endMat4","progress","outMat4","setFromRotationMatrix","extractRotation","slerpQuaternions","lerpVectors","setFromMatrixColumn","setFromMatrixScale","compose","posA","posB","affixToWorldUp","inRotationMat4","inForward","outForward","outSide","worldUp","v","inMat4Copy","inMat4","multiplyScalar","sub","projectOnVector","normalize","crossVectors","makeBasis","setPosition","calculateCameraTransformForWaypoint","upAffixedCameraTransform","upAffixedWaypointTransform","detachFromWorldUp","cameraTransform","waypointTransform","calculateViewingDistance","fov","aspect","box","center","vrMode","halfYExtents","max","abs","y","halfXExtents","x","halfVertFOV","degToRad","halfHorFOV","atan","tan","length1","length2","length3","z","rotateInPlaceAroundWorldUp","startRotation","endRotation","theta","makeRotationY","childMatch","inverseParentWorld","childRelativeToParent","childInverse","newParentMatrix","child","multiplyMatrices","createPlaneBufferGeometry","width","height","widthSegments","heightSegments","flipY","PlaneBufferGeometry","uv","getAttribute","count","setY","getY","createHeadlessModelForSkinnedMesh","mesh","eraseBoneIndexes","bone","index","isEraseTarget","layers","Layers","CAMERA_LAYER_THIRD_PERSON_ONLY","erasingBonesIndex","dst","SkinnedMesh","frustumCulled","CAMERA_LAYER_FIRST_PERSON_ONLY","skinIndexAttr","array","skinIndex","skinWeightAttr","skinWeight","getIndex","oldTriangles","from","triangles","bws","exclude","bw0","skin0","includes","bw1","skin1","bw2","skin2","excludeTriangles","newTriangle","setIndex","onBeforeRender","Skeleton","boneInverses","createErasedMesh","enable","hackyMobileSafariTestValue","hackyMobileSafariTest","test","navigator","userAgent","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","UA","detectTouchScreen","showHoverEffect","el","isFrozen","sceneEl","is","isPinned","pinnable","pinned","isSpawner","isEmojiSpawner","template","canMove","emoji","APP","hubChannel","can","networkedTemplate","networked","isCamera","isPen","isEmoji","tags","holdableButton","indexForComponent","component","schema","fullComponent","findIndex","schemaComponent","nonAuthorizedSchemas","sanitizeMessageData","schemaDict","NAF","schemas","nonAuthorizedComponents","nonAuthorizedComponent","toString","initializeNonAuthorizedSchemas","nonAuthorizedIndices","authorizeEntityManipulation","entityMetadata","sender","senderPermissions","creator","isCreator","endsWith","pin_objects","spawn_and_move_media","spawn_camera","spawn_drawing","spawn_emoji","getPendingOrExistingEntityMetadata","networkId","pendingData","connection","adapter","getPendingDataForNetworkId","owner","presence","state","pinnableComponent","entities","getEntity","authorizeOrSanitizeMessageData","persistentSyncs","stashPersistentSync","entityData","currentData","currentComponents","assign","dataType","clientId","from_session_id","emptyObject","authorizeOrSanitizeMessage","isFirstSync","persistent","presenceState","metas","permissions","sanitizedAny","stashedAny","filter","applyPersistentSync","handleIncomingNAF","AFRAME","registerComponent","unmutedBoneName","default","mutedBoneName","onPos","offPos","init","this","onStateToggled","addEventListener","unmutedBone","getObjectByName","mutedBone","modelLoaded","updateMuteState","onMicStateChanged","play","dialog","on","pause","off","muted","mediaDevicesManager","isMicEnabled","matrixNeedsUpdate","direction","BoxGeometry","MeshBasicMaterial","color","side","BackSide","opacity","transparent","fog","object3DMap","camera","add","fadeOut","beginTransition","fadeIn","_resolveFinish","res","tick","dt","mat","visible","image","hoverImage","activeImage","activeHoverImage","disabledImage","active","disabled","tooltip","tooltipText","activeTooltipText","onHover","hovering","updateButtonState","onHoverOut","removeEventListener","update","sprite","querySelector","textHoverColor","textColor","backgroundHoverColor","backgroundColor","textEl","getObject3D","slice9","plane","toneMapped","once","noop","dependencies","raycast","onClick","block","utils","getNetworkedEntity","then","networkedEl","hide","mute","emit","kick","updateVisibility","systems","canOrWillIfCreator","remove","contentTypes","contentSubtype","detail","contentType","catch","mediaLoader","mediaImage","mediaVideo","mediaPdf","currentContentType","matchesType","targetContentType","toLowerCase","startsWith","matchesSubtype","whenPinned","_updateUI","_updateUIOnStateChange","targetEl","pinnedAndForbidden","left_hand_pose","right_hand_pose","isVisibleUpToRoot","FAKE_TROIKA_BOUNDS","Box3","computeLocalBoundingBox","vertex","rootInverse","toRootSpace","excludeInvisible","makeEmpty","isTroikaText","union","isGeometry","vertices","isNaN","expandByPoint","isBufferGeometry","attributes","itemSize","fromBufferAttribute","computeObjectAABB","bounds","boundingBox","computeBoundingBox","rotation","Euler","getBox","boxRoot","worldSpace","updateMatrixWorld","isEmpty","worldToLocal","matrixWorldNeedsUpdate","getScaleCoefficient","dX","dY","dZ","qs","URLSearchParams","location","search","qsTruthy","param","val","qsGet","waitForEvent","eventName","eventObj","waitForDOMContentLoaded","readyState","sleep","milliseconds","webpackAsyncContext","req","code","ids","id","keys","_persist","_persistAndAnimate","_animate","pinningHelper","setPinned","_isMine","isMine","isAnimationRunning","animationIsPlaying","removeAttribute","currentScale","dur","to","easing","delay","interaction","isHeld","didFireThisFrame","wasHeld","transformObjectSystem","scenes","transforming","wasTransforming","COLLISION_LAYERS","require","takeOwnership","modifyGravityOnRelease","gravity","angularDamping","linearDamping","linearSleepingThreshold","angularSleepingThreshold","collisionFilterMask","DEFAULT_INTERACTABLE","physicsSystem","activateBody","removeChild","onStateChange","newOwner","multiple","transform","oneof","stateadded","stateremoved","withPermission","needsPermission","updatePermissions","hasPermission","onPermissionsUpdated","userinput","requireOwnership","offset","speed","angle","targetPos","snappedRot","snappedQ","snappedXForm","snappedXFormWorld","tempVector","obj","isHovered","hoveredEl","rightRemote","hovered","leftRemote","_hoveredFrames","_applyMaskedTargetRotation","DEG2RAD","started","reset","order","setFromEuler","isFlat","dim","onFrozenStateChange","getHoverMenu","applyHoverState","menuPromise","menu","importNode","content","parentEl","animate","hoverContainer","allowed","setScalar","didRegister","cursorPoseTrackingSystem","register","unregister","playhead","poseIndex","overflow","poses","timestamp","shouldBeVisible","lastSync","now","performance","syncAll","initializedInTick","cameraSystem","inspect","uninspect","selector","setObject3D","depthWrite","getAppLogo","theme","isArray","themes","preferredThemeId","store","preferences","find","getColorSchemePref","getCurrentTheme","darkModeDefault","configs","_extends","arguments","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgHmcLogo","_ref","title","titleId","props","viewBox","fill","xmlns","fillRule","clipRule","defaultProps","AppLogo","className","forceConfigurableLogo","isHmc","alt","translation","propTypes","PropTypes","string","bool","Button","memo","forwardRef","ref","as","sm","lg","xl","thin","thick","preset","rest","ButtonComponent","buttonProps","classNames","styles","button","textInputStyles","NextButton","defaultMessage","CancelButton","ContinueButton","AcceptButton","ApplyButton","elementType","oneOf","customFOV","enableThirdPersonMode","getInspectableAndPivot","inspectable","isTagged","getInspectableInHierarchy","pivot","pivotFor","q","orbit","owq","owp","cwq","cwp","rwq","UP","RIGHT","dPos","targetQuat","targetScale","targetMatrix","dhQ","dvQ","rig","dh","dv","dz","panY","getWorldQuaternion","setFromAxisAngle","applyQuaternion","premultiply","subVectors","zoom","newLength","addVectors","moveRigSoCameraLooksAtPivot","oForw","defaultBoxMax","Object3D","distanceMod","Infinity","getCenter","dist","CAMERA_MODE_FIRST_PERSON","CAMERA_MODE_INSPECT","CAMERA_MODE_SCENE_PREVIEW","NEXT_MODES","ensureLightsAreSeenByCamera","isLight","CAMERA_LAYER_INSPECT","firstPersonOnlyLayer","enableInspectLayer","batchManagerSystem","batch","batchingEnabled","batchManager","batchForMesh","CAMERA_LAYER_BATCH_INSPECT","disableInspectLayer","disable","CameraSystem","constructor","renderer","uiRoot","scene","viewingCamera","updateMatrix","entered","getElementById","firstChild","classList","contains","quat","viewingRig","avatarRig","characterController","fly","avatarPOV","enteredScene","avatarPOVRotator","viewingCameraRotator","paths","actions","startInspecting","hoverEl","stopInspecting","nextCameraMode","nextMode","ensureListenerIsParentedCorrectly","makeTranslation","cameraDelta","lobbyCameraDelta","horizontalDelta","device","isMobile","verticalDelta","inspectZoom","inspectPanY","resetInspectView","snapshot","audio","audioSourceTargetTransform","lightsEnabled","localStorage","getItem","audioTransform","CAMERA_LAYER_VIDEO_TEXTURE_TARGET","xrManager","xr","updateXRCamera","updateCamera","xrCamera","getCamera","mask","cameras","CAMERA_LAYER_XR_LEFT_EYE","CAMERA_LAYER_XR_RIGHT_EYE","bg","fireChangeEvent","hideEverythingButThisObject","getAudio","audioListener","showEverythingAsNormal","toggleLights","setItem","notHiddenObject","TextInputField","description","inputClassName","label","fullWidth","useId","labelId","htmlFor","labelClassName","nextTick","registerSystem","registry","queues","frameIndex","schedule","func","queue","unschedule","entries","idx","updateComponentState","inVRMode","class","handler","permissionName","fetchPermissions","onBlur","onFocus","onTimeout","onEnterVR","isOculusBrowser","match","enteredVR","lastTimeoutCheck","exitTimeout","disableIdleDetection","dispatchEvent","CustomEvent","enabled","devicePixelRatio","deltas","secondsSinceMeasurementStart","secondsSinceSceneVisible","maxPixelRatio","pixelRatioToTimesDecreased","disabledByPref","disableAutoPixelRatio","onPreferenceChange","time","delta","visibilityState","sort","medianFps","floor","currentPixelRatio","getPixelRatio","shouldDecrease","shouldIncrease","newPixelRatio","info","toFixed","setPixelRatio","timesDecreased","els","system","counter","_syncCounterRegistration","timestamps","deregister","ttl","setBodyKinematic","didThisOnce","UNOWNED_INTERACTABLE","locked","InputField","inputField","clear","size","_destroyOldest","delete","oldestEl","minTs","Number","MAX_VALUE","ts","_destroy","penSpawner","drawingToPen","drawingEl","createDrawing","createDrawingPromise","handNetworkedDrawingInit","drawing","destroyDrawing","networkedDrawing","getDrawingPromise","getDrawing","pen","returnDrawing","registerComponentInstance","componentRegistry","deregisterComponentInstance","getCurrentStreamer","playerInfos","presences","playerInfo","playerSessionId","streaming","getPlayerInfo","sessionId","defaultLocaleData","cachedMessages","_locale","_localeData","setLocale","locale","resolvedLocale","locales","curLocale","AVAILABLE_LOCALES","FALLBACK_LOCALES","primaryLanguageSubtag","findLocale","localeData","interval","getLocale","getMessage","getMessages","configTranslations","messages","acc","entry","updateVRHudPresenceCount","occupantCount","getOwnPropertyNames","transportForChannel","channel","reliable","payload","isOpen","socket","connectionState","nafrPayload","naf","JSON","stringify","getTimeOffsetToServer","clientSentTime","Date","serverReceivedTime","fetch","href","method","cache","headers","getTime","precision","clientReceivedTime","getAverageTimeOffset","average","offsets","reduce","adapters","frozen","storeMessage","nafMessageReceived","handleIncomingNAFR","unparsedData","parse","refs","frozenUpdates","_blockedClients","setServerUrl","setApp","setRoom","setWebRtcOptions","setServerConnectListeners","nafConnectSuccess","nafConnectFailed","setRoomOccupantListener","setDataChannelListeners","nafOccupantJoined","nafOccupantLeave","connect","session_id","reliableTransport","unreliableTransport","list","events","shouldStartConnectionTo","startStreamConnection","closeStreamConnection","getConnectStatus","getMediaStream","getServerTime","sendData","sendDataGuaranteed","broadcastData","broadcastDataGuaranteed","disconnect","toggleFreeze","unfreeze","flushPendingUpdates","getPendingData","dataForUpdateMultiMessage","storeSingleMessage","storedMessage","storedData","isOutdatedMessage","lastOwnerTime","isContemporaneousMessage","unblock","debug","newDebug","PC_PROPRIETARY_CONSTRAINTS","optional","googDscp","WEBCAM_SIMULCAST_ENCODINGS","scaleResolutionDownBy","maxBitrate","SCREEN_SHARING_SIMULCAST_ENCODINGS","dtx","DialogAdapter","EventEmitter","super","_micShouldBeEnabled","_micProducer","_cameraProducer","_shareProducer","_localMediaStream","_consumers","_pendingMediaRequests","_forceTcp","_forceTurn","_iceTransportPolicy","_serverParams","_consumerStats","_downlinkBwe","getIceServers","host","port","turn","iceServers","_serverUrl","transports","urls","username","credential","getServerStats","_protoo","connected","_sendTransport","_closed","sendTransport","stats","transportId","producer","_producers","producerId","_recvTransport","recvTransport","consumer","consumerId","emitRTCEvent","iceRestart","transport","iceParameters","restartIce","recreateSendTransport","closeSendTransport","createSendTransport","restartSendICE","checkSendIceStatus","recreateRecvTransport","closeRecvTransport","createRecvTransport","restartRecvICE","checkRecvIceStatus","serverUrl","roomId","joinToken","serverParams","forceTcp","forceTurn","iceTransportPolicy","_roomId","_joinToken","_clientId","urlWithParams","URL","searchParams","append","protooTransport","protooClient","WebSocketTransport","retry","retries","Peer","cleanUpLocalState","attempt","_retryConnectWithNewHost","accept","peerId","kind","rtpParameters","appData","consume","removeConsumer","spatialLayers","temporalLayers","mediasoupClient","encodings","scalabilityMode","resolvePendingMediaRequestForTrack","track","notification","closePeer","close","body","spatialLayer","temporalLayer","score","_joinRoom","removeAllListeners","getHost","newServerUrl","log","token","pendingMediaRequests","video","requests","MediaStream","closed","sendTransportInfo","producing","consuming","sctpCapabilities","_mediasoupDevice","iceCandidates","dtlsParameters","sctpParameters","proprietaryConstraints","errback","observer","level","_videoProducer","recvTransportInfo","routerRtpCapabilities","load","displayName","_device","rtpCapabilities","_useDataChannel","setLocalMediaStream","stream","sawAudio","sawVideo","getTracks","stop","replaceTrack","produce","stopTracks","codecOptions","opusStereo","opusDtx","zeroRtpOnPause","disableTrackOnPause","_hubs_contentHint","MediaDevices","SCREEN","disableCamera","enableShare","CAMERA","disableShare","enableCamera","videoGoogleStartBitrate","share","toggleMicrophone","enableMicrophone","resume","paused","room_id","room","user_id","whom","tag","msgFunc","showRtcDebugPanel","toLocaleTimeString","hour12","hour","minute","second","msg","unloadRoomObjects","querySelectorAll","loadRoomObjects","hubId","objectsScene","objectsUrl","getReticulumFetchUrl","objectsEl","useCache","inflate","changeHub","addToHistory","hub","hub_id","hideHubPresenceEvents","migrateToHub","reason","messageDispatch","hubs","history","pushState","hubUrl","slug","updateUIForHub","subscriptions","setSubscribed","web_push","remountUI","hubIsBound","hub_requires_oauth","initialIsFavorited","favorites","removeRemoteEntities","connectedClients","activeDataChannels","childNodes","getSceneUrlForHub","updateEnvironmentForHub","entryManager","retChannel","perms_token","sendEnteredEvent","receive","hubName","showLineBreak","fastRoomSwitching","newHubId","pathname","bindAllEvents","elements","f","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","toggleMic","soundEffectsSystem","playSoundOneShot","SOUND_TOGGLE_MIC","micEnabled","BoneVisibilitySystem","cmp","updateWhileInvisible","lastVisible","mic","spawn","cameraBtn","inviteBtn","background","updateButtonStates","evt","onMicClick","onSpawnClick","onPenClick","SOUND_SPAWN_PEN","onCameraClick","onInviteClick","onHubUpdated","entry_mode","emojis","model","emoji0Model","particle","emoji0Particle","emoji1Model","emoji1Particle","emoji2Model","emoji2Particle","emoji3Model","emoji3Particle","emoji4Model","emoji4Particle","emoji5Model","emoji5Particle","emoji6Model","emoji6Particle","particleEmitterConfig","particleCount","startSize","endSize","sizeRandomness","lifetime","lifetimeRandomness","ageRandomness","startVelocity","endVelocity","startOpacity","middleOpacity","endOpacity","spawnEmojiInFrontOfUser","addMedia","emitDecayTime","emitFadeTime","emitEndTime","playPositionalSoundFollowing","SOUND_SPAWN_EMOJI","particleEmitter","particleConfig","originalParticleCount","initialized","setOffsetVector","totalNumEmojis","spacing","offsetVector","sign","spawnerScale","spawnedScale","hudAngle","minHudAngle","maxHudAngle","hudDistance","spawnerPlatformWidth","spawnerPlatformSpacing","cameraWorldPosition","_onFrozen","_onThaw","spawnerEntities","spawnerEntity","isHandCollisionTarget","requireHoverOnNonMobile","mass","TYPE","STATIC","collisionFilterGroup","INTERACTABLES","DEFAULT_SPAWNER","cameraObject3D","getWorldPosition","lookAt","spawnScale","_updateOffset","targetWorldPos","cameraForward","projectedCameraForward","angledCameraForward","defaultRight","transformDirection","projectOnPlane","DefaultUp","dot","angleTo","angleOffset","applyAxisAngle","localToWorld","insertAfter","referenceEl","insertBefore","nextSibling","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","mockJoystickContainer","leftMock","mockJoystick","leftMockSmall","inner","rightMock","rightMockSmall","enableLeft","enableOnScreenJoystickLeft","enableRight","enableOnScreenJoystickRight","canvas","createLeftStick","hidden","createRightStick","inVr","moving","rotating","displacement","lookDy","lookDx","newEnableLeft","newEnableRight","leftStick","destroy","leftTouchZone","rightStick","rightTouchZone","touchZone","right","nipplejs","zone","fadeTime","left","joystick","preferenceScreenIsVisible","radian","force","cos","sin","enqueueRelativeMotion","enqueueInPlaceRotationAroundWorldUp","style","display","leftController","rightController","oldData","HAND_ROTATIONS","makeRotationFromEuler","PI","angleOnXZPlaneBetweenMatrixRotations","XZ_PLANE_NORMAL","v1","v2","matrixA","matrixB","leftEye","rightEye","neck","leftHand","rightHand","chest","rotationSpeed","maxLerpAngle","alwaysUpdate","_runScheduledWork","_updateIsInView","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","isInView","hasConvergedHips","lastCameraTransform","playerCamera","forceIkUpdate","avatar","divideScalar","negate","hasNewCameraTransform","equals","_hadFirstTick","epsilon","u","w","updateHand","handRotation","handObject3D","controllerObject3D","isLeft","handMatrix","spaceInvader","setAlwaysHidden","frustum","Frustum","frustumMatrix","cameraWorld","isInViewOfCamera","screenCamera","pos","projectionMatrix","matrixWorldInverse","setFromProjectionMatrix","containsPoint","cameraTools","ifMyCameraRenderingViewfinder","cameraTool","POSES","pose","poseForFingers","thumb","middleRingPinky","hand","subpath","previous","current","handleLeftVisuals","handleRightVisuals","hadLeftVisualLastFrame","hadRightVisualLastFrame","uniforms","sweepParams","interactingElement","held","hideVisual","uniform","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_SweepParams","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","orientation","selfDestruct","updateOffset","QUARTER_CIRCLE","rotateOnAxis","ensureAvatarNodes","json","some","originalRoot","extensions","MOZ_hubs_components","avatarSrc","avatarType","AVATAR_TYPES","SKINNABLE","isSharingAvatarCamera","applyProperties","handleModelError","handleRemoteModelError","onPresenceUpdated","onAvatarModelLoaded","isLocalPlayerInfo","networkedEntity","getCreator","playerPresence","updateFromPresenceMeta","avatarEl","isAudioPaused","modelEl","isSkinnedAvatar","headlessMesh","presenceMeta","perm","jsonPreprocessor","injectCustomShaderChunks","videoTextureTargets","MediaDevicesEvents","VIDEO_SHARE_ENDED","resetToRandomDefaultAvatar","defaultAvatar","DEBUG","ANIM_CONFIG","elasticity","loop","round","nametagVolumeGeometry","nametagVolumeMaterial","nametagTypingGeometry","CircleBufferGeometry","handRaisedTexture","textureLoader","handRaisedIconSrc","handRaisedGeometry","handRaisedMaterial","identityName","isTalking","isTyping","isOwner","isRecording","isHandRaised","volumeAvg","MovingAverage","avatarAABB","avatarAABBSize","avatarAABBCenter","nametagHeight","isAvatarReady","lastUpdateTime","onModelLoading","onModelLoaded","onModelIkFirstTick","onStateChanged","nametag","nametagIdentityName","nametagBackground","nametagStatusBorder","recordingBadge","modBadge","nametagText","handRaised","nametagVolume","nametagTyping","Group","updateTheme","avatarAABBHelper","Box3Helper","typingAnimTime","worldPos","wasTalking","audioAnalyzer","avatarIsTalking","resizeNameTag","setX","volume","nametagElPosY","updateAvatarModelAABB","nameTagSystem","profile","recording","roles","typing","hand_raised","updateDisplayName","updateHandRaised","prevDisplayName","getSize","tmpVector","getThemeColor","NAMETAG_BACKGROUND_PADDING","anime","targets","anim","animatables","setFromObject","open","thumbDown","indexDown","mrpDown","thumbUp","point","fist","pinch","NETWORK_POSES","animatePose","mixerEl","suffix","mixer","clipAction","networkField","getNetworkedAvatar","networkedAvatar","prev","curr","setLoop","LoopOnce","clampWhenFinished","setHandPose","TWOPI","lookCutoff","animRange","yawCutoff","onChildHovered","removeHoverEvents","isYLocked","lockedHeadPositionY","lookDir","lookEuler","hoverableChildren","hud","pitch","RAD2DEG","yawDif","deltaAngle","forceHudVisible","activity","hasHoveredInWorldHud","clamp","hudLocked","hudOutOfView","wasInspecting","ensureFrozen","thaw","hasFoundFreeze","SOUND_FREEZE","addState","SOUND_THAW","removeState","withinDistance","withoutPermission","visibleIfOwned","camWorldPos","objWorldPos","cameraEl","hoverableSearch","hoverable","isVisible","shouldNotBeVisible","isWithinDistance","distanceToSquared","isTransforming","isHoldingAnything","toggle","ThreeStats","_rS","memory","geometries","programs","textures","render","calls","points","attach","values","caption","over","groups","fractions","onExpand","onCollapse","plugins","rStats","css","fps","below","createStats","statsEl","statsHeaderEl","statsTitleEl","innerHTML","collapseEl","fpsEl","lastFpsUpdate","lastFps","frameCount","inVR","showFPSCounter","vrStatsEnabled","initVRStats","lastUpdate","vrPanel","maxWidth","anchorY","depthTest","toggleVRStats","frame","stepDuration","batches","instanceCount","atlas","arrayDepth","join","show","mirrorTarget","getCurrentMirroredMedia","mirrorEl","linkedEl","closeExistingMediaMirror","cloneMedia","refreshButton","localRefreshButton","errorImage","Image","errorImageSrc","errorTexture","Texture","scaleToAspectRatio","ratio","needsUpdate","ONCE_TRUE","TYPE_IMG_PNG","isIOS","detectIOS","audioIconTexture","HubsTextureLoader","audioIcon","VOLUME_LABELS","timeFmt","h","audioSrc","hidePlaybackControls","videoPaused","projection","tickRate","syncTolerance","linkedVideoTexture","linkedAudioSource","linkedMediaElementAudioSource","gainMultipliers","onPauseStateChange","updateHoverMenu","tryUpdateVideoPlaybackState","ensureOwned","isMineOrLocal","updateSrc","seekForward","seekBack","volumeUp","volumeDown","snap","changeVolumeBy","togglePlaying","setupAudio","audioSystem","videoMutedAt","localSnapCount","isSnapping","videoIsLive","onSnapImageLoaded","hasAudioTracks","hoverMenu","playbackControls","playPauseButton","volumeUpButton","volumeDownButton","seekForwardButton","seekBackButton","snapButton","timeLabel","volumeLabel","linkButton","updateVolumeLabel","updatePlaybackState","getNetworkOwner","random","disableLeftRightPanningPref","disableLeftRightPanning","onPreferenceChanged","newPref","shouldRecreateAudio","mediaElementAudioSource","currentTime","gainMultiplier","audios","updateAudioSettings","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","videoWidth","videoHeight","getContext","drawImage","blob","toBlob","file","File","addAndArrangeMedia","_ignorePauseStateChanges","_playbackStateChangeTimeout","removeAudio","sourceType","getCurrentAudioSettings","PositionalAudio","Audio","addAudio","setNodeSource","texture","audioSourceEl","cleanUp","createVideoTextureAudioSourceEl","refreshMediaMirror","disposeTexture","semver","satisfies","detect","version","context","createMediaElementSource","hls","updateHLSLiveState","currentLevel","levels","details","live","HLS","Events","LEVEL_LOADED","LEVEL_SWITCHED","videoTexture","audioSource","SphereBufferGeometry","isVideoTexture","DoubleSide","url","pollTimeout","_audioSyncInterval","clearInterval","resolved","failLoad","videoEl","createVideoOrAudioEl","audioEl","isReady","VideoTexture","minFilter","LinearFilter","encoding","sRGBEncoding","format","RGBAFormat","streamController","audioOnly","streamClientId","_onStreamUpdated","srcObject","getVideoTracks","dashPlayer","MediaPlayer","extend","modifyRequestHeader","xhr","modifyRequestURL","proxiedUrlFor","ERROR","initialize","setTextDefaultEnabled","clearDefaultUTCTimingSources","addUTCTimingSource","dash","isHLS","isSupported","corsProxyPrefix","CORS_PROXY_SERVER","baseUrl","stopLoad","detachMedia","xhrSetup","buildAbsoluteURL","loadSource","attachMedia","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","setupHls","canPlayType","isSafari","setInterval","poll","pinnableElement","mayModifyPlayHead","mediaOptions","volumeModRight","cursor","mediaVolumeMod","volumeModLeft","removeObject3D","supplementaryAttenuation","pdfjs","GlobalWorkerOptions","workerSrc","canvasContext","CanvasTexture","removeObject","renderTask","loadingSrc","pdf","getDocument","maxIndex","numPages","page","getPage","viewport","getViewport","pw","ph","addObject","loadingManager","LoadingManager","ktxLoader","basisLoader","setURLModifier","rewriteBasisTranscoderUrls","GIFTexture","frames","delays","disposals","_ctx","generateMipmaps","NearestFilter","frameStartTime","clearRect","parseGIF","promisifyWorker","GIFWorker","arrayBuffer","rawImageData","delayTimes","loadCnt","img","textureCache","retain","cacheItem","release","inflightTextures","errorCacheItem","alphaMode","alphaCutoff","currentSrcIsRetained","inflightKey","createGIFTexture","BasisTextureLoader","detectSupport","onUpdate","mipmaps","KTX2Loader","anisotropy","createKTX2Texture","createImageTexture","uvs","alphaTest","hasAlpha","isCompressedTexture","calcLevel","MAX_VOLUME_LABELS","updateAvatarVolumesPref","avatarVoiceLevels","muteButton","normalizer","onRemoteMuteUpdated","volumePref","updateGainMultiplier","updateLocalMuted","updatePref","isLocalMuted","mutedState","step","calcGainStepUp","calcGainStepDown","numBars","axis","touchscreen","pinchDelta","rotatePitchAndYaw","opq","oq","pq","yq","initialUpDot","initialForwardDotUp","newUpDot","newForwardDotUp","scenePreviewNode","pendingXRotation","lobby","isGhost","ROTATE_Y","updateFromLocalBB","currentPosition","localBox","halfExtents","offsetToCenter","updateTargetRotationFromCamera","up","back","forward","cameraPosition","cameraRotation","isVR","vrFocalPoint","desiredTargetQuaternion","positionAtBorderComponents","ready","didInit","tick2","doInit","cam","didRegisterWithAnimationSystem","menuAnimationSystem","wasVisible","previousMesh","meshLocalBoundingBox","meshCenter","meshHalfExtents","meshOffsetToCenter","isTargetBoundingBoxDirty","targetLocalBoundingBox","targetCenter","targetHalfExtents","targetOffsetToCenter","markDirty","centerToCamera","intersectionToCam","desiredCenterPoint","desiredTargetPosition","currentTargetScale","desiredTargetScale","desiredTargetTransform","centerToBorder","currentMeshRotation","currentMeshScale","meshForward","boxCorners","currentMesh","isOpening","needsYRotate","intersection","getActiveIntersection","meshSphereRadius","distanceToSphere","distanceToCenter","divide","PositionAtBorderSystem","tipSelector","labelSelector","tipEl","labelEl","onHovered","onUnhovered","wasPinned","SOUND_PIN","_discordBridges","discordBridges","fileIsOwned","fileId","canPin","getPromotionTokenForFile","applyThemeToTextButton","removeNetworkedObject","myCamera","getMyCamera","focus","menuPlacementRoots","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","isFirefox","cameraModelPromise","loadModel","cameraModelSrc","pathsMap","takeSnapshot","isMobileVR","videoCodec","codec","MediaRecorder","isTypeSupported","videoMimeType","hasWebGL2","allowVideo","CAPTURE_WIDTH","CAPTURE_HEIGHT","CAPTURE_DURATIONS","snapCanvas","pixels","imageData","createImageData","bitmap","createImageBitmap","captureDuration","captureAudio","showCameraViewfinder","renderTarget","WebGLRenderTarget","magFilter","GammaEncoding","depth","stencil","PerspectiveCamera","viewfinderInViewThisFrame","updateUI","lastValue","MIN_VALUE","config","complete","screen","selfieScreen","labelActionBackground","labelBackground","durationLabel","recordIcon","recordAlphaIcon","snapMenu","recordButton","cancelButton","nextDurationButton","prevDurationButton","snapClicked","cancelSnapping","changeDuration","stopButton","stopRecording","captureAudioButton","captureAudioIcon","updateRenderTargetNextTick","updateViewfinder","newIdx","trackTarget","isPhoto","SOUND_CAMERA_TOOL_COUNTDOWN","snapCountdown","countdownInterval","takeSnapshotNextTick","beginRecording","hasDuration","isRecordingUnbound","videoRecorder","showActionLabelBackground","videoContext","videoCanvas","videoImageData","videoPixels","Uint8Array","captureStream","attachBlankAudio","AudioContext","oscillator","createOscillator","createGain","destination","createMediaStreamDestination","setValueAtTime","addTrack","getAudioTracks","selfAudio","listener","getInput","createMediaStreamSource","mimeType","chunks","recordingStartTime","ondataavailable","videoCountdown","videoCountdownInterval","_free","onstop","recordingDuration","Blob","playerIsBehindCamera","MAX_DURATION_TO_LIMIT_LOOPS","objectType","ObjectTypes","cancel","heldLeftHand","heldRightHand","heldRightRemote","heldThisFrame","options","grabPath","isHolding","updateSnapMenuOrientation","isHoldingTrigger","isHoldingSnapshotTrigger","snapTriggerTimeout","releaseInterval","tock","playerHud","hudEl","playerHudWasVisible","spriteSystem","meshes","bubbleSystem","boneVisibilitySystem","invaders","tmpVRFlag","tmpOnAfterRender","onAfterRender","tmpAutoUpdate","autoUpdate","videoRenderTarget","setRenderTarget","srcX0","srcY0","srcX1","srcY1","dest","dstX0","dstY0","dstX1","dstY1","gl","srcFramebuffer","properties","__webglFramebuffer","destFramebuffer","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","blitFramebuffer","COLOR_BUFFER_BIT","LINEAR","readRenderTargetPixels","flipPixelsY","putImageData","snapPixels","RENDER_WIDTH","pixelsToPNG","halfHeight","bytesPerRow","temp","topOffset","bottomOffset","subarray","copyWithin","heldLeftRemote","grabberId","grabberPaths","playerWorld","playerToCamera","cameraForwardPoint","cameraForwardWorld","guessContentType","_isIn2DInterstitial","_exitAction","getUserGesture","handleExitTo2DInterstitial","isLower","exitAction","nonFullscreen","exitVR","showFullScreenIfAvailable","vrNotice","willRequireUserGesture","exit2DInterstitialAndEnterVR","screenfull","isFullscreen","exit","enterVR","isIn2DInterstitial","onlyOpenLink","mayChangeScene","isLocalHubsAvatarUrl","isLocalHubsSceneUrl","isHubsRoomUrl","hash","exitImmersive","avatarId","pop","replaceState","isLocalHubsUrl","sfx","refresh","loadingSoundEffect","SOUND_MEDIA_LOADING","stopPositionalAudio","initialTweet","hostname","mediaUrl","integration","fetchAvatar","idForAvatarUrl","allow_remixing","copying","remixAvatar","avatar_id","AMMO_BODY_ATTRIBUTES","HANDS","TRANSFORM_MODE","AXIS","PUPPET","CURSOR","ALIGN","SCALE","STEP_LENGTH","CAMERA_WORLD_QUATERNION","CAMERA_WORLD_POSITION","TARGET_WORLD_QUATERNION","q2","onGrabStart","transformSystem","startTransform","onGrabEnd","stopTransform","startQ","dxStore","dxApplied","dyAll","dyStore","dyApplied","raycasters","puppet","initialControllerOrientation","initialControllerOrientation_inverse","initialObjectOrientation","currentControllerOrientation","controllerOrientationDelta","planarInfo","wireframe","normal","intersections","previousPointOnPlane","currentPointOnPlane","deltaOnPlane","finalProjectedVec","PI_AROUND_Y","pInv","startPlaneCasting","raycaster","far","sign2","dxAll","hasRotated","hasRecentered","puppetingTick","cursorAxisOrScaleTick","cameraToPlaneDistance","modify","transformModifier","FORWARD","TWO_PI","calculatePlaneMatrix","planeMatrix","planeUp","planeForward","planeRight","planePosition","camPosition","planeForLeftCursor","planeForRightCursor","isScaling","planeRotation","initialIntersectionPoint","intersectionPoint","initialObjectScale","desiredObjectScale","deltaScale","objectMatrix","dragVector","currentObjectScale","objectToScale","objectPosition","objectToCam","startScaling","didGetObjectReferences","leftEventer","leftCursorController","leftRaycaster","rightCursorController","rightRaycaster","raycastOnPlane","initialDistanceToObject","hasScaled","transformSelectedObjectSystem","endScaling","dotFactor","scaleFactor","getMeshes","collisionEntities","CYLINDER_TEXTURE","RayCurve","numPoints","BufferGeometry","setPoint","A","B","C","D","P","Float32Array","BufferAttribute","setUsage","DynamicDrawUsage","setDirection","cross","setWidth","parabolicCurve","p0","v0","out","checkLineIntersection","referenceNormal","landingMaxAngle","hitPoint","distance","intersects","intersectObjects","collisionNormal","angleNormals","isValidNormalsAngle","face","LANDING_NORMAL","vecHelper","confirm","hitCylinderColor","hitCylinderRadius","outerRadius","hitCylinderHeight","isTeleporting","rayCurve","parabola","hit","Raycaster","rigWorldPosition","newRigWorldPosition","teleportOriginWorldPosition","teleportEventDetail","oldPosition","newPosition","prevHitHeight","hitEntity","createHitEntity","queryCollisionEntities","stopPlayingTeleportSound","teleportingSound","stopSoundNode","isTeleportingDisabled","disableTeleporter","timeTeleporting","playSoundLoopedWithGain","SOUND_TELEPORT_START","teleportTo","SOUND_TELEPORT_END","playerScale","sqrt","collidedIndex","timeSegment","percentToDraw","segmentT","dRadii","outerScale","easeIn","outerTorus","hitEntityOpacity","easeOutIn","torus","cylinder","TorusBufferGeometry","CylinderBufferGeometry","rotate","translate","INFO_INIT_FAILED","SHOULD_CREATE_SILENT_AUDIO_ELS","getOwnerId","createAudio","isCreatingAudio","isRemoved","attrName","createSilentAudioEl","mediaStreamSource","destinationSource","soundSource","mediaStream","ownerId","newStream","tmpWorldPos","onlyMods","muteSelf","ctx","gainFilter","whiteNoise","audioContext","bufferSize","sampleRate","noiseBuffer","createBuffer","getChannelData","createBufferSource","buffer","createWhiteNoise","setInput","radius","getMaxScaleOnAxis","boundingRadiusSquared","LineSegments","WireframeGeometry","newInput","input","getGainFilter","trackingEl","minDelay","maxDelay","srcEl","connectAudio","delayNode","createDelay","delayTime","randFloat","setFilters","srcZone","resolution","matrixAutoUpdate","textureNeedsUpdate","lastRenderTime","tmpXRFlag","targetBaseColorMap","targetEmissiveMap","getMaterial","skinnedmesh","mask1","originalMap","originalEmissiveMap","emissiveMap","prevData","videoTextureSource","applyTexture","originalTexture","wrapS","wrapT","DEFAULT_MIRROR_GEOMETRY","DEFAULT_TEXTURE_WIDTH","innerWidth","DEFAULT_TEXTURE_HEIGHT","innerHeight","reflector","Reflector","textureWidth","textureHeight","originalOnBeforeRender","originalRender","browser","VR_DEVICE_AVAILABILITY","isMaybeGearVRCompatibleDevice","ua","isMaybeDaydreamCompatibleDevice","GENERIC_ENTRY_TYPE_DISALLOWED_DEVICES","getAvailableVREntryTypes","isSamsungBrowser","isWebVRCapableBrowser","hasNativeWebVRImplementation","isWebXRCapableBrowser","hasNativeWebXRImplementation","isDaydreamCapableBrowser","isIDevice","isFirefoxBrowser","isUIWebView","mediaDevices","safari","isCardboardCapableBrowser","displays","getVRDisplays","generic","cardboard","gearvr","daydream","capabilities","canPresent","ONLY_SCREEN_AVAILABLE","canShare","opts","top","params","tweetLink","encodeURIComponent","ReactAudioContext","React","createContext","StateRoute","Component","stateKey","stateValue","routeProps","getMicrophonePresences","microphonePresences","sessionIds","currentSessionIds","talking","networkedAudioAnalysers","networkedAudioAnalyser","Sidebar","beforeTitle","afterTitle","contentClassName","disableOverflowScroll","sidebar","header","overflowY","SvgChevronBack","stroke","strokeWidth","strokeLinecap","strokeLinejoin","BackButton","IconButton","backButton","AvatarSettingsContent","displayNameInputRef","disableDisplayNameInput","onChangeDisplayName","avatarPreview","displayNamePattern","onChangeAvatar","Column","pattern","spellCheck","required","onChange","avatarPreviewContainer","AvatarSettingsSidebar","showBackButton","onBack","onClose","CloseButton","AvatarSetupModal","Modal","ProfileEntryPanel","getStateFromProfile","storeUpdated","setState","saveStateAndFinish","preventDefault","hasChangedName","hasChangedNowOrPreviously","hasAcceptedProfile","finished","stopPropagation","setAvatarFromMediaResult","selectAction","replaceHistoryState","refetchAvatar","componentDidMount","nameInput","componentDidUpdate","_prevProps","prevState","componentWillUnmount","avatarSettingsProps","inp","displayNameOverride","definitions","avatarGltfUrl","gltf_url","mediaSearchStore","sourceNavigateWithNoNav","onSubmit","containerType","AvatarUrlModal","handleSubmit","useForm","padding","placeholder","rel","AvatarUrlModalContainer","useCallback","SceneUrlModal","enableSpoke","editorName","onValidateUrl","isSubmitting","errors","glblink","validate","isValidGLB","reader","getReader","read","readChunk","done","String","fromCharCode","isValidSceneUrl","trim","isRequired","SceneUrlModalContainer","intl","useIntl","formatMessage","updateScene","feature","SvgAttach","strokeMiterlimit","ObjectUrlModal","showModelCollectionLink","modelCollectionUrl","watch","setValue","useEffect","hasFile","fileName","onClear","showCloseButton","sketchfablink","collectionlink","afterInput","urlInput","ObjectUrlModalContainer","ducky","link","SvgArrowForward","SvgArrowBack","FullscreenLayout","headerLeft","headerCenter","headerRight","fullscreenLayout","navTitleMessages","defineMessages","youtube","videos","images","gifs","avatars","sketchfab","twitch","MediaBrowser","browserRef","searchInputRef","autoFocusSearch","searchPlaceholder","searchDescription","onSearchKeyDown","onClearSearch","mediaSources","selectedSource","onSelectSource","activeFilter","facets","onSelectFacet","query","onChangeQuery","hasNext","hasPrevious","onNextPage","onPreviousPage","noResultsMessage","Close","Star","favoriteIcon","autoFocus","onKeyDown","beforeInput","Search","searchIcon","buttonNav","facetsNav","facet","text","grow","MediaGrid","isVariableWidth","noResults","pager","pagerButton","any","SvgUpload","clipPath","SvgLink","PRIVACY_POLICY_LINKS","DEFAULT_FACETS","poweredByMessages","customObjectMessages","searchPlaceholderMessages","emptyMessages","MediaBrowserContainer","showNav","selectNextResult","clearStashedQueryOnClose","newState","getStoreAndHistoryState","selectEntry","sourceChanged","inputRef","getUrlSource","sluglessPath","urlSource","suggestions","handleQueryUpdated","forceNow","_sendQueryTimeout","filterQueryNavigate","handleEntryClicked","lucky_query","onShowSimilar","handleFacetClicked","similar_to","similar_name","onMediaSearchResultEntrySelected","handleSourceClicked","sourceNavigate","getSearchClearedSearchParams","k","pushHistoryPath","keepSource","keepNav","keepSelectAction","pushExitMediaBrowserHistory","stashLastSearchParams","showCustomMediaDialog","isAvatarApiType","showNonHistoriedDialog","showFullScreenIfWasFullScreen","clearStashedQuery","handlePager","pageNavigate","browserDiv","scrollTop","handleCopyAvatar","performConditionalSignIn","signedIn","SignInMessages","handleCopyScene","fetchReticulumAuthenticated","parent_scene_id","remixScene","onCreateAvatar","processThumbnailUrl","thumbnailWidth","thumbnailHeight","preview","scaledThumbnailUrlFor","isSceneApiType","showCustomOption","hideSearch","showEmptyStringOnNoResult","handleCustomClicked","changeScene","meta","next_cursor","customObjectType","ctrlKey","blur","SOURCES","isFetching","isAvatar","isScene","onEdit","onCopy","pushHistoryState","spokeProjectUrl","project_id","injectIntl","EntryStartPanel","entering","onEnteringCanceled","delistAvatarInfoMessage","defineMessage","defaultEditors","allowedEditors","GLTFBinarySplitterPlugin","parser","gltf","bin","beforeRoot","KHR_binary_glTF","ensureAvatarMaterial","asset","afterRoot","files","AvatarEditor","baseAvatarResults","editorLinks","previewGltfUrl","creatorAttribution","attributions","inputFiles","base_gltf_url","gltfs","randomAvatarResult","base","parent_avatar_listing_id","createOrUpdateAvatar","uploadAvatar","glb","gltfLoader","GLTFLoader","gltfUrl","createObjectURL","onProgress","revokeObjectURL","thumbnail","filesToUpload","uploading","fileUploads","upload","resp","file_id","access_token","promotion_token","onSave","deleteAvatar","fileField","getPreviewUrl","icon","faTimes","mapField","faCloudUploadAlt","textField","baseSid","avatarResult","selectListingField","propName","sid","srcSet","selectListingGrid","selected","paddingBottom","textarea","checkbox","checked","handleGltfLoaded","ext","editors","avatarEditor","companyName","license","licenselink","onGltfLoaded","replace","hideDelete","confirmDelete","has_listings","HMD_MIC_REGEXES","audioOutputSelectEnabled","HTMLMediaElement","detectedOS","detectOS","audioInputSelectEnabled","MediaDevicesManager","onDeviceChange","fetchMediaDevices","changeAudioOutput","selectedSpeakersDeviceId","DEVICE_CHANGE","_scene","_store","_micDevices","_videoDevices","_outputDevices","_deviceId","_audioTrack","_mediaStream","outboundStream","_permissionsStatus","MICROPHONE","PermissionStatus","PROMPT","SPEAKERS","deviceId","audioTrack","NO_DEVICE_ID","micLabelForAudioTrack","isAudioInputSelectEnabled","GRANTED","deviceIdForMicDeviceLabel","selectedMicLabel","preferredSpeakers","defaultOutputDeviceId","getPermissionsStatus","micStatus","PERMISSIONS_STATUS_CHANGED","mediaDevice","status","videoStatus","speakersStatus","enumerateDevices","isAudioOutputSelectEnabled","startMicShare","unmute","updatePrefs","isMicShared","selectedMicDeviceId","preferredMic","constraints","ideal","_startMicShare","micDeviceId","micLabelForDeviceId","MIC_SHARE_STARTED","DENIED","MIC_SHARE_ENDED","echoCancellation","disableEchoCancellation","noiseSuppression","disableNoiseSuppression","autoGainControl","disableAutoGainControl","getUserMedia","addStreamToOutboundAudio","recreateAudioStream","stopMicShare","removeStreamFromOutboundAudio","startVideoShare","isDisplayMedia","success","videoTrackAdded","getDisplayMedia","frameRate","VIDEO_SHARE_STARTED","stopVideoShare","removeTrack","shouldShowHmdMicWarning","enterInVR","hasHmdMicrophone","defaultInputDeviceId","deviceIdForSpeakersDeviceLabel","speakersLabelForDeviceId","videoDeviceIdForMicLabel","videoLabelForDeviceId","updateGradient","parseFloat","backgroundImage","leftColor","rightColor","getLinearGradientCSS","trackColor","Slider","useRef","numberWithRange","rangeSlider","number","WarnIcon","flex","warnIcon","faExclamationTriangle","ResetToDefaultButton","noDefaultButtonStyle","aria-label","resetToDefaultButton","faUndo","ResetToDefaultButtonPlaceholder","resetToDefaultButtonPlaceholder","sanitize","countDigits","NumberRangeSelector","isFocused","displayValue","digitsFromUser","digits","storeKey","forceUpdate","numberInNumberWithRange","select","sanitizedInput","numberOrReset","finalValue","num","CheckboxPlaceholder","checkboxPlaceholder","BooleanPreference","tabIndex","MapCountPreference","defaultValue","storedPref","preferenceLabel","Select","dropdown","dropdownArrow","PreferenceSelect","onChanged","PREFERENCE_LIST_ITEM_TYPE","MaxResolutionPreferenceItem","numWidth","parseInt","numHeight","maxResolutionWidth","maxResolutionHeight","maxResolutionPreferenceItem","ListItem","indent","listItem","preferenceLabels","preferredCamera","globalVoiceVolume","globalMediaVolume","globalSFXVolume","disableSoundEffects","snapRotationDegrees","disableMovement","disableBackwardsMovement","disableStrafing","movementSpeedModifier","enableGyro","invertTouchscreenCameraMove","animateWaypointTransitions","maxResolution","materialQualitySetting","enableDynamicShadows","allowMultipleHubsInstances","preferMobileObjectInfoPanel","showAudioDebugPanel","enableAudioClipping","audioClippingThreshold","lazyLoadSceneMedia","cursorSize","nametagVisibility","nametagVisibilityDistance","PreferenceListItem","isCheckbox","itemProps","prefType","isSmallScreen","prefSchema","resetToDefault","disableIfTrue","disableIfFalse","row","Control","rowRight","column","rowCenter","IntlPreferenceListItem","TOP_LEVEL_CATEGORIES","categoryNames","NavItem","ariaLabel","navItem","closeButton","controlType","ControlType","Section","items","section","sectionTitle","Nav","navContainer","nav","RefreshPrompt","createRef","reportHeight","getComputedStyle","toast","refreshPrompt","warnIconPlaceholder","refreshNowButton","PreferencesScreen","onMediaDevicesUpdated","currentSpeakers","updateMediaDevices","micOptions","micDevicesOptions","speakersOptions","outputDevicesOptions","videoOptions","videoDevicesOptions","category","toastHeight","createSections","browserDefault","availableLocales","availableThemes","DEFINITIONS","promptForRefresh","defaultBool","toItem","shouldPromptForRefresh","createItem","preferencesPanel","categoryName","contentContainer","scrollingContent","minHeight","SvgWand","SvgChat","SvgSend","SvgReaction","TextAreaInput","TextInput","TextareaAutosize","ToolbarButton","iconContainerClassName","large","statusColor","toolbarButton","iconContainer","aria-hidden","statusIndicator","PopoverArrow","arrowClass","arrowBg","arrowBorder","Popover","Content","showHeader","placement","offsetSkidding","offsetDistance","initiallyVisible","disableFullscreen","onChangeVisible","popoverApiRef","popoverClass","_visible","_setVisible","useState","setVisible","referenceElement","setReferenceElement","popperElement","setPopperElement","arrowElement","setArrowElement","popper","popperStyles","arrow","arrowStyles","usePopper","modifiers","element","breakpoint","useCssBreakpoints","fullscreen","openPopover","closePopover","togglePopover","fullscreenBody","popoverVisible","triggerRef","createPortal","popover","oneOfType","iconSheet","16","emojiIcons16","20","emojiIcons20","32","emojiIcons32","64","emojiIcons64","EmojiPicker","backgroundImageFn","sheetSize","emojiRegex","formatMessageBody","emojiClassName","bodyLength","monospace","cleanedBody","toEmojis","multiline","emojiComponents","formattedBody","SpawnMessageButton","chatInputIcon","SendMessageButton","EmojiPickerPopoverButton","onSelectEmoji","shiftKeyDown","onKeyUp","onSelect","keepPickerOpen","pickerRemainedOpen","MessageAttachmentButton","ChatLengthWarning","messageLength","maxLength","chatInputWarning","warningTextColor","ChatInput","warning","isOverMaxLength","chatInputContainer","chatInputTextAreaStyles","warningBorder","onSpawn","enteredMessages","joinedMessages","LogMessageType","roomEntryRequired","flyModeDisabled","flyModeEnabled","unauthorizedSceneChange","invalidSceneUrl","unauthorizedRoomRename","captureUnavailable","captureStopped","captureStarted","captureAlreadyStopped","captureAlreadyRunning","positionalAudioEnabled","positionalAudioDisabled","setAudioNormalizationFactor","audioNormalizationDisabled","audioNormalizationNaN","invalidAudioNormalizationRange","audioSuspended","audioResumed","joinFailed","avatarChanged","logMessages","formatSystemMessage","oldName","newName","sceneName","messageType","SystemMessage","messageGroup","systemMessage","messageGroupLabel","updateIntervalInSeconds","MessageBubble","messageBubble","ChatMessageGroup","sent","messageGroupMessages","controls","getMessageComponent","ChatMessageList","messageList","ChatSidebar","ChatToolbarButton","onScrollList","listRef","messageBodyDom","fromSessionId","onViewProfile","wrapStyle","messageWrapMulti","messageWrap","messageBodyClasses","messageBody","messageBodyMulti","messageBodyMono","includeClientLink","onFromClick","messageSource","messageSourceLink","renderChatMessage","allowEmojiRender","presenceLog","presenceLogSpawn","entryDom","presenceLogEntry","presenceLogEntryOneLine","presenceLogEmoji","ReactDOM","offsetWidth","offsetHeight","html2canvas","logging","meshEntity","blobUrl","isRawProperty","meshMaterial","spawnChatMessage","coerceToUrl","ChatMessage","maySpawn","iconButton","spawnMessage","PhotoMessage","landingPageUrl","getLandingPageForPhoto","onShareClicked","shareHashtag","SHORTLINK_DOMAIN","mediaBody","VideoMessage","ImageMessage","spawnImage","PresenceLog","domForEntry","entryClasses","presenceLogEntryWithButton","presenceLogChat","expired","isBot","getPresenceContextForSession","discord","includeFromLink","inRoom","presenceClasses","presenceLogInRoom","PreloadOverlay","loadButtonText","treatment","screenshot","hubScene","screenshot_url","logo","mainPanel","onLoadClicked","drawFunc","xData","yData","xSum","xRatio","yRatio","fillStyle","strokeStyle","lineWidth","x0","x1","y0","y1","beginPath","moveTo","lineTo","closePath","DataGraph","xAxis","yAxis","canvasRef","draw","animationFrameId","requestAnimationFrame","cancelAnimationFrame","useCanvas","CreatePropsFromData","propKey","propValue","Prop","rtcTileText","rtcValueText","DataPanel","graphData","dataTile","dataTileTitle","alignSelf","CollapsiblePanel","border","wrap","isRoot","collapsed","download","rootClassName","borderTile","borderlessTile","rootStyle","flexGrow","collapsibleContentRoot","collapsibleContent","buttonClassName","collapseButton","contentStyle","flexFlow","collapsibleHeader","isCollapsed","parentElement","collapse","logButton","openLink","collapsibleRightButtons","SvgCaretDown","getItemValue","item","getSelectedItem","selectedItemValue","getItemLabel","SelectInputField","selectedItem","getToggleButtonProps","getMenuProps","getLabelProps","highlightedIndex","getItemProps","useSelect","onSelectedItemChange","selectedItemLabel","selectInput","dropdownButton","dropdownItem","highlightedItem","arrayOf","shape","SelectProperty","audioDebugRow","padEnd","newValue","SliderProperty","parsedValue","valueText","getPrefs","AudioDebugPanel","isNarrow","onCollapsed","mediaSettings","setMediaSettings","getCurrentAudioSettingsForSourceType","avatarSettings","setAvatarSettings","onSettingChange","newSetting","settings","audioDebugPanelOverrides","setPreferences","onPreferencesUpdated","audioDebugContainer","maxHeight","alignItems","marginLeft","propText","TransportType","StatsType","MEDIASOUP_DOC_BASE_URL","MDN_DOC_BASE_URL","MessageButtonStyle","margin","fontSize","minWidth","capitalize","str","toUpperCase","PanelMessageButton","TrackStatsPanel","opened","producerScore","producerScores","rtpStats","graph","TransportPanel","candidates","producers","consumers","isButtonEnabled","onRestart","rtcLogMsg","SignalingPanel","onConnect","onDisconnect","RtcDebugPanel","logEvent","currentLog","showPanel","connectSignaling","disconnectSignaling","colorForLevel","createLogMsgs","logLines","reverse","rtcLogTime","rtcLogTag","createLog","Local","Log","Remote","runStats","getDeviceData","_recvRtpCapabilities","codecs","clockRate","downlinkBwe","getCandidatesData","peer","getStats","selectedCandidatePairId","candidatePair","isCandidate","getTransportData","_connectionState","_id","getProducerConsumerData","profileFromPresence","profileFromConsumer","_appData","_paused","getTrackData","_kind","consumerStats","_track","getSignalingData","getServerData","getRtpStatsData","getGraphData","lastStats","statsData","last","bytesSent","bytesReceived","packetsSent","packetsReceived","bytesSentDelta","bytesReceivedDelta","packetsSentDelta","packetsReceivedDelta","timeDelta","getPeerSpeed","lastData","running","taskId","deviceData","serverData","signalingData","transportsData","speedData","rtpStatsData","createCandidates","createProducers","createConsumers","reducedConsumers","reducedConsumer","consumerPanels","createRemoteTransports","stat","rtcDebugPanelRoot","rtcStatusContainerLeft","showRtcDebug","statusContainerMiddle","showAudioDebug","rtcLogContainer","filename","click","rtcLogMsgContainer","rtcStatusContainerRight","LoadingScreenLayout","bottom","loadingScreenLayout","gap","LoadingScreen","infoMessages","infoMessage","transitionDelay","messageTimeoutRef","queueNextMessage","currentIndex","useRandomMessageTransition","Spinner","heading","reducer","action","objectCount","messageKey","loadedCount","allObjectsLoaded","loading","environmentLoaded","networkConnected","loaded","lazyLoadMedia","dialogConnected","loadingObjects","connectingScene","enteringRoom","LoadingScreenContainer","onLoaded","loadingTimeoutRef","dispatch","useReducer","onObjectLoading","onObjectLoaded","onEnvironmentLoaded","onNetworkConnected","onDialogConnected","useRoomLoadingState","useMemo","Toolbar","toolbar","leftContent","styleUtils","showLg","centerContent","rightContent","RoomLayout","viewportClassName","sidebarClassName","toolbarLeft","toolbarCenter","toolbarRight","toolbarClassName","modal","objectFocused","viewportRef","roomLayout","modalContainer","main","hideLeft","hideRight","RoomLayoutContainer","useResizeViewport","SvgEnter","SvgVr","SvgShow","SvgSettings","RoomEntryModal","roomName","showJoinRoom","onJoinRoom","showEnterOnDevice","onEnterOnDevice","showSpectate","onSpectate","showOptions","onOptions","roomEntryModal","logoContainer","buttons","EnterOnDeviceModal","shortUrl","loadingCode","headsetConnected","unsupportedBrowser","onEnterOnConnectedHeadset","shortUrlContainer","codeContainer","char","codeLetter","data-or-text","SvgMicrophone","SvgMicrophoneMuted","SvgVolumeOff","SvgInfo","ToggleInput","toggleInput","labelContainer","LevelBar","pct","clientWidth","clientHeight","levelBarContainer","levelBarBorder","levelBar","MicSetupModal","microphoneOptions","onChangeMicrophone","speakerOptions","onChangeSpeaker","isMicrophoneEnabled","micLevel","speakerLevel","onPlaySound","isMicrophoneMuted","onChangeMicrophoneMuted","onEnterRoom","permissionStatus","iconStyle","iconEnabled","iconDisabled","audioCheckContainer","audioIoContainer","spinnerContainer","actionContainer","popoverContent","popoverArrow","infoIcon","onMouseEnter","onMouseLeave","errorTitle","selectionContainer","selectionInput","marginRight","useMicrophoneStatus","isMicMuted","setIsMicMuted","setIsMicEnabled","setPermissionsStatus","onMicMutedStateChanged","onMicEnabled","onMicDisabled","onPermissionsChanged","toggleMute","useMicrophone","micDevices","setMicDevices","micDeviceChanged","updateVolume","analyser","meter","newRawVolume","getByteTimeDomainData","sum","amplitude","calculateVolume","newPerceivedVolume","mapLinear","E","prevVolume","useVolumeMeter","updateRate","movingAvgRef","meterRef","setVolume","fftSize","timout","movingAverage","nextVolume","useSound","sound","sfxSystem","analyserRef","mixerAnalyser","playSound","soundVolume","useSpeakers","speakerDevices","setSpeakerDevices","speakerDeviceChanged","MicSetupModalContainer","micVolume","outboundAnalyser","SOUND_SPEAKER_TONE","isMicMutedOnEntry","setIsMicMutedOnEntry","muteMicOnEntry","copyLabelMessage","copiedLabelMessage","CopyableTextInputField","buttonPreset","clipboard","useClipboard","copiedTimeout","copyLabel","copiedLabel","maxLabelLength","copyButton","copied","SvgInvite","InviteLinkInputField","fetchingInvite","inviteUrl","onRevokeInvite","showRevokeConfirmation","setShowRevokeConfirmation","revokeInvite","cancelConfirmRevokeInvite","confirmRevokeInvite","confirmRevokeButton","InvitePopoverContent","embed","inviteRequired","invitePopover","invitePopoverTitle","InvitePopoverButton","useInviteUrl","inviteId","setInviteId","fetchInvite","hub_invite_id","InvitePopoverContainer","embedUrl","embed_token","embedText","onInviteButtonClicked","canGenerateInviteUrl","SvgMore","MoreMenuItem","Icon","moreMenuItemTarget","MoreMenuGroup","group","moreMenuGroupLabel","moreMenuItemList","MoreMenuPopoverContent","moreMenuPopover","MoreMenuContext","MoreMenuContextProvider","Provider","moreMenuTitle","MoreMenuPopoverButton","useContext","CompactMoreMenuButton","compactButton","ChatContext","messageGroups","sendMessage","uniqueMessageId","updateMessageGroups","newMessage","messageProps","lastMessageGroup","senderSessionId","shouldCreateNewMessageGroup","processChatMessage","ChatContextProvider","setMessageGroups","unreadMessages","setUnreadMessages","onReceiveMessage","setMessagesRead","ChatSidebarContainer","canSpawnMessages","inputEffect","scrolledToBottom","setScrolledToBottom","scrollHeight","useMaintainScrollPosition","setMessage","typingTimeoutRef","shiftKey","endTyping","beginTyping","onSendMessage","onUploadAttachments","native","discordBridgesForPresences","discordSnippet","ch","discordChannels","onScroll","ChatToolbarButtonContainer","joinChildren","renderSeparator","Children","toArray","SvgObjects","ContentMenuButton","contentMenuButton","ObjectsMenuButton","PeopleMenuButton","People","presenceCount","presencecount","ContentMenu","contentMenu","separator","SvgCamera","SvgAvatar","SvgDelete","SvgFavorites","SvgStarOutline","SvgWarningCircle","SvgHome","SvgTextDocument","SvgSupport","SvgShield","SvgDiscord","SvgLeave","SvgDesktop","SvgPhone","SvgVolumeHigh","SvgVolumeMuted","SvgHandRaised","xmlSpace","List","ButtonListItem","listItemContent","buttonListItem","getDeviceLabel","hmd","mobile","getVoiceLabel","micPresence","PeopleSidebar","people","onSelectPerson","showMuteAll","onMuteAll","numPeople","person","DeviceIcon","VRIcon","DiscordIcon","PhoneIcon","DesktopIcon","getDeviceIconComponent","VoiceIcon","VolumeMutedIcon","VolumeHighIcon","VolumeOffIcon","getVoiceIconComponent","you","isMe","getPersonName","moderatorIcon","getPresenceMessage","PromoteClientModal","onConfirm","linebreak","UserProfileSidebar","userId","hasMicPresence","isSignedIn","canPromote","onPromote","canDemote","onDemote","isHidden","onToggleHidden","canMute","isNetworkMuted","canKick","onKick","multiplier","updateMultiplier","isMuted","updateMuted","onMultiplierChanged","controlsEl","setMultiplier","setIsMuted","onMultiplierUpdated","onLocalMutedUpdated","useAvatarVolume","onLevelChanged","calcGainMultiplier","newLevel","sliderContainer","sliderInputContainer","UserProfileSidebarContainer","user","onCloseDialog","avatarThumbnailUrl","setAvatarThumbnailUrl","mayKick","mayMute","setIsOwner","signed_in","mayAddOwner","mayRemoveOwner","setIsHidden","getAvatarThumbnailUrl","addOwner","removeOwner","toggleHidden","unhide","muteUser","kickUser","userFromPresence","micPresences","mySessionId","PeopleListContainer","mute_users","PeopleSidebarContainer","micUpdateFrequency","setPeople","updateMicrophoneState","usePeopleList","selectedPersonId","setSelectedPersonId","selectedPerson","setSelectedPerson","mediaSortOrder","mediaSort","el1","el2","faVideo","faMusic","faImage","faNewspaper","faQuestion","faCube","SORT_ORDER_TO_TYPE","getMediaType","getDisplayString","resourceName","httpIndex","lessHost","hostSplit","firstPart","substr","ObjectListContext","objects","focusedObject","selectedObject","focusObject","unfocusObject","inspectObject","uninspectObject","handleInspect","handleDeselect","ObjectListProvider","setObjects","setFocusedObject","setSelectedObject","setLightsEnabled","updateMediaEntities","onInspectTargetChanged","inspectedEl","onLightsChanged","selectObject","deselectObject","selectNextObject","curObjIdx","nextObjIdx","selectPrevObject","activeObject","cloneElement","useObjectList","SvgObject","SvgImage","SvgVideo","SvgAudio","objectTypeNames","ObjectsSidebarItem","ObjectTypeIcon","VideoIcon","AudioIcon","ImageIcon","TextDocumentIcon","ObjectIcon","getObjectIcon","listStyles","NoObjects","canAddObjects","noObjects","ObjectsSidebar","ObjectsSidebarContainer","onUnfocusListItem","relatedTarget","onMouseOver","onMouseOut","SvgLightbulb","SvgLightbulbOutline","ObjectMenuButton","compactSm","objectMenuButton","ObjectMenu","onPrevObject","onNextObject","currentObjectIndex","onToggleLights","lightsButton","objectMenuContainer","objectMenu","lightsHeaderButton","pagination","getPinnedState","hasIsStaticTag","isStatic","isPlayer","SvgPin","SvgGoTo","SvgHide","MyMenuItems","onOpenProfile","PlayerMenuItems","hideAvatar","useHideAvatar","ObjectMenuItems","onGoToObject","togglePinned","setIsPinned","pinObject","unpinObject","onPinStateChanged","userOwnsFile","usePinObject","canRemoveObject","useRemoveObject","canGoTo","goToSelectedObject","enqueueWaypointTravelTo","willDisableMotion","willDisableTeleporting","snapToNavMesh","willMaintainInitialOrientation","useGoToSelectedObject","getObjectUrl","ObjectMenuContainer","menuItems","SvgGif","SvgScene","ButtonGridPopover","buttonGridPopover","placePopoverTitle","PlacePopoverButton","filteredItems","PlacePopoverContainer","setItems","updateItems","hasActiveCamera","hasActivePen","getMyPen","nextItems","PenIcon","CameraIcon","GIFIcon","AvatarIcon","SceneIcon","UploadIcon","onSceneStateChange","SvgShare","sharePopoverTitle","SharePopoverButton","activeItem","useShare","sharingSource","setSharingSource","canShareCamera","setCanShareCamera","canShareScreen","setCanShareScreen","canShareCameraToAvatar","setCanShareCameraToAvatar","hasVideoTextureTarget","avatarModelEl","useAvatar","onShareVideoEnabled","onShareVideoDisabled","devices","hasCamera","isVideoShared","isWebcamShared","toggleShareCamera","toggleShareScreen","V","toggleShareCameraToAvatar","SharePopoverContainer","Row","spaceBetween","breakpointColumn","topMargin","flexClassName","flexBasis","noWrap","childrenMarginR","paddingClass","lgPadding","gapClass","mdGap","breakpointColumnClass","topMarginClass","flexBasisClass","childrenMarginRClass","flexRow","noFlexWrap","Divider","marginClass","divider","AudioPopoverContent","audioToolbarPopover","nowrap","isSoundPlaying","AudioPopoverContentContainer","SvgArrow","AudioPopoverButton","micButtonRef","rect","buttonsContainer","arrowButton","arrowButtonSelected","AudioPopoverButtonContainer","AudioPopoverContainer","ImageGridPopover","imageGridPopover","crossOrigin","ReactionButton","reactionButton","HandRaisedButton","reactionPopoverTitle","ReactionPopoverContent","onToggleHandRaised","TooltipPopoverContent","ReactionPopoverButton","isReactionsVisible","setIsReactionsVisible","isTooltipVisible","setIsTooltipVisible","onTooltipHandLowered","emojiLabels","smile","laugh","clap","heart","wave","angry","cry","ReactionPopoverContainer","initialPresence","setPresence","onPresenceUpdate","usePresence","lowerHand","raiseHand","SafariMicModal","reload","RoomSignInModalContainer","onSubmitEmail","onContinue","cachedEmail","setCachedEmail","SignInModal","closeable","SignInStep","submit","initialEmail","termsUrl","showTerms","privacyUrl","showPrivacy","waitForVerification","onCancel","showNewsletterSignup","LeaveReason","reasonMessages","confirmationMessages","LeaveRoomModal","destinationUrl","centerMd","SceneAttribution","attribution","unknown","author","attributionName","attributionAuthor","SceneInfo","accountId","showAttributions","canChangeScene","onChangeScene","changeSceneButton","showSceneLink","account_id","allow_promotion","allowDisplayOfSceneLink","filteredAttributionElements","sceneScreenshotContainer","sceneScreenshotImage","sceneInfo","sceneCreator","RoomSidebar","canEdit","TextAreaInputField","RadioInputContainer","radioInput","RadioInputOption","option","RadioInputField","_RadioInputOption","NumericInput","inputMode","numericInput","NumericInputField","RoomSettingsSidebar","maxRoomSize","showPublicRoomSetting","defaultValues","entryMode","spawnAndMoveMedia","shouldDirty","autoComplete","minLength","minRows","room_size","roomPermissions","permissionsGroup","RoomSettingsSidebarContainer","applyChanges","updateHub","roomSize","AutoExitReason","AutoExitWarningModal","secondsRemaining","ExitReason","exited","denied","disconnected","full","sceneError","connectError","versionMismatch","ExitedRoomScreen","showSourceLink","subtitle","contactEmail","toslink","tcpUrl","tcpParams","CloseRoomModal","confirmText","setConfirmText","showIsNotMatchError","setShowIsNotMatchError","onClickConfirm","WebVRUnsupportedModal","emojiPlugin","createEmojiPlugin","hashtagPlugin","createHashtagPlugin","linkifyPlugin","createLinkifyPlugin","counterPlugin","createCounterPlugin","TweetEditorModal","editorState","editorRef","sending","mediaThumbnailUrl","onClickEditor","onSend","EmojiSuggestions","EmojiSelect","CharCounter","tweetLength","getCurrentContent","getPlainText","editor","editorInner","emojiButton","emojiSuggestions","limit","TweetEditorModalContainer","setEditorState","createEditorStateWithText","contentState","entityKey","createEntity","emojiUnicode","getLastCreatedEntityKey","currentSelectionState","getSelection","emojiAddedContent","emojiEndPos","blockSize","afterRemovalContentState","Modifier","removeRange","targetSelection","getSelectionAfter","insertText","getAnchorOffset","blockKey","getAnchorKey","getBlockForKey","getLength","newEditorState","EditorState","forceSelection","addEmoji","setSending","sendTweet","media_stored_file_url","TwitterOAuthModal","appName","TwitterOAuthModalContainer","onConnected","isAdmin","popupRef","getTwitterOAuthURL","screenLeft","screenTop","doingTwitterOAuth","popup","onMessage","TweetModalContainer","canTweet","setCanTweet","Tip","onDismiss","dismissLabel","tip","dismissButton","moveKeys","turnLeftKey","turnRightKey","keyboard","getLayoutMap","onboardingMessages","OkDismissLabel","SkipDismissLabel","FullscreenTip","TipContainer","inLobby","isStreaming","isEmbedded","lobbyTipDismissed","setLobbyTipDismissed","broadcastTipDismissed","setBroadcastTipDismissed","confirmedBroadcastedRooms","streamingTipDismissed","setStreamingTipDismissed","embeddedTipDismissed","setEmbeddedTipDismissed","onboardingTipId","setOnboardingTipId","onSkipOnboarding","tips","skipTips","tipId","activeTip","isBroadcasting","broadcastTarget","channelName","hasEmbedPresences","SpectatingLabel","avatarEditorDebug","IN_ROOM_MODAL_ROUTER_PATHS","IN_ROOM_MODAL_QUERY_VARS","LOBBY_MODAL_ROUTER_PATHS","LOBBY_MODAL_QUERY_VARS","LOBBY_MODAL_QUERY_VALUES","UIRoot","willCompileAndUploadMaterials","showShareDialog","linkCode","linkCodeCancel","miniInviteActivated","didConnectToNetworkedScene","noMoreLoadingUpdates","hideLoader","showPrefs","watching","waitingOnAudio","audioTrackClone","autoExitTimerStartedAt","autoExitTimerInterval","autoExitReason","secondsRemainingBeforeAutoExit","videoShareMediaSource","showVideoShareFailed","objectInfo","objectSrc","sidebarId","chatInputEffect","onConcurrentLoad","startAutoExitTimer","onIdleDetected","disableAutoExitOnIdle","onActivityDetected","endAutoExitTimer","showContextualSignInDialog","signInMessage","authChannel","onCallback","onContinueAfterSignIn","closeDialog","authComplete","startAuthentication","updateSubscribedState","isSubscribed","toggleFavorited","isFavorited","favoriteRoom","onLoadingFinished","onSceneLoaded","sceneLoaded","onShareVideoFailed","shareVideo","mediaSource","endShareVideo","spawnPen","onSubscribeChanged","handleForceEntry","forcedVREntryType","enterDaydream","enter2D","secondsSinceStart","checkForAutoExit","exitScene","isWaitingForAutoExit","performDirectEntryFlow","grantedMicLabels","beginOrSkipAudioSetup","onRequestMicPermission","availableVREntryTypes","onAudioReadyButton","shouldShowFullScreen","clearHistoryState","muteOnEntry","enterScene","attemptLink","onFinished","linkChannel","generateCode","toggleShareDialog","hasOpenedShare","onSignInDialogVisibilityChanged","DialogClass","toggleStreamerMode","beginStreaming","endStreaming","renderDialog","signOut","onMiniInviteClicked","hasEmbedPresence","onTweet","tweet","onFocusChat","setSidebar","prefix","renderInterstitialPrompt","interstitial","onInterstitialPromptClicked","renderBotMode","sendEnteringCancelledEvent","renderEntryStartPanel","promptForNameAndAvatarBeforeEntry","entryDisallowed","sendEnteringEvent","roomSettings","renderDevicePanel","goBack","renderAudioSetupPanel","isInModalOrOverlay","overlay","setHistory","exitEventHandler","prevProps","showSignInDialog","isBotMode","compile","prop","isTexture","initTexture","roomLayoutStyles","sceneSmFullScreen","hideUITip","unsubscribe","listen","entry_step","navigateToPriorPage","popToBeginningOfHubHistory","playerRig","UNSAFE_componentWillMount","otherState","selectedUserId","toggleSidebar","curSidebarId","getSelectedUser","rootStyles","ui","showSafariMicDialog","preload","showPreload","isLoading","showInterstitialPrompt","enteredOrWatching","getPresenceProfileForSession","enableSpectateVRButton","entryDialog","presenceLogEntries","getUrlMediaSource","showMediaBrowser","showObjectList","streamer","streamerName","renderEntryFlow","canCreateRoom","canCloseRoom","isModerator","moreMenu","credentials","LeaveIcon","EnterIcon","AddIcon","FavoritesIcon","favoriteRooms","SettingsIcon","HomeIcon","InviteIcon","StarIcon","StarOutlineIcon","DeleteIcon","closeHub","closeRoom","WarningCircleIcon","SupportIcon","resetTips","ShieldIcon","onPreloadLoadClicked","onSignIn","returnToProfile","onAvatarSaved","hideLg","UIRootHooksWrapper","useAccessibleOutlineStyle","checkingForDeviceAvailability","environmentSceneLoaded","roomUnavailableReason","isSupportAvailable","embedToken","ExitedRoomScreenContainer","isSameMonth","da","db","getFullYear","getMonth","HUB_CREATOR_PERMISSIONS","VALID_PERMISSIONS","HubChannel","EventTarget","setPermissionsFromToken","_permissions","jwtDecode","setIsAdmin","postgrest_role","nextRefresh","exp","fetchPermissionsTimeout","entryDisplayType","vrDisplay","isPresenting","initialOccupantCount","entryState","entryEvent","getEntryTimingFlags","entryTimingFlags","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEnteredAt","lastEntered","msSinceLastEntered","getDate","sendObjectSpawnedEvent","spawnEvent","object_type","sendProfileUpdate","update_hub","hubInviteId","close_hub","subscribe","subscription","allowNAFTraffic","allow","_getCreatorAssignmentToken","creatorAssignmentTokenEntry","creatorAssignmentTokens","creatorAssignmentToken","signIn","creator_assignment_token","_signedIn","auth_token","oauth_url","pin","gltfNode","fileAccessToken","promotionToken","gltf_node","file_access_token","unpin","permsToken","_blockedSessionIds","completeSync","requestSupport","favorite","unfavorite","Set","permission","canEnterRoom","migrateToSocket","presenceBindings","onJoin","caller","onLeave","onSync","migrateChannelToSocket","Presence","newChannel","hubChannelParamsForPermsToken","migrateToChannel","endRecording","exceedsDensityThreshold","subtree","boundingData","isHighDensity","continueGeneration","leftResult","rightResult","traverseMeshesAndAddShapes","shapePrefix","shapes","meshRoot","Sky","__proto__","geo","roots","_roots","isGeometryHighDensity","navMesh","SHAPE","MESH","fit","FIT","ALL","includeInvisible","BOX","MANUAL","groupEnd","MessageDispatch","commandParts","dispatchCommand","activeElement","command","args","scales","curScale","captureSystem","enableFly","getAbsoluteHref","SOUND_SPECIAL_QUACK","SOUND_QUACK","setDebug","debugEnabled","inalidSceneUrl","rename","available","factor","effectiveFactor","audioNormalization","addToPresenceLog","SOUND_CHAT_MESSAGE","forceEnableTouchscreen","isDebug","SceneEntryManager","whenSceneLoaded","_setupBlocking","hasEntered","_entered","session","verbose","waypointSystem","moveToSpawnPoint","_setupPlayerRig","_setupKicking","_setupMedia","_setupCamera","_spawnAvatar","SOUND_ENTER_SCENE","_runBot","toISOString","bumpEntryCount","hasLoaded","enterSceneWhenLoaded","localMediaStream","setAnimationLoop","_setPlayerInfoFromProfile","avatarScale","_lastFetchedAvatarId","getAvatarSrc","getAvatarType","kickedClientId","unpinElement","removeEntity","ev","removeEntitiesOfClient","spawnMediaInfrontOfPlayer","contentOrigin","or","lastDebugScene","currentVideoShareEntity","ObjectContentOrigins","FILE","sourceNavigateToDefaultSource","forceExitFrom2DInterstitial","contentEditable","clipboardData","getData","CLIPBOARD","dataTransfer","isHandlingVideoShare","shareSuccess","isVideoTrackAdded","shareError","delaySpawn","audioInput","dataInput","crossorigin","onchange","getRecording","audioStream","mozCaptureStream","audioVolume","audioDestination","gainNode","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","charCodeAt","Subscriptions","setHubChannel","setRegistration","registration","setRegistrationFailed","setVapidPublicKey","vapidPublicKey","_isSubscribed","getCurrentEndpoint","serviceWorker","startedAt","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","line","bubbles","tickCount","_updateInvaders","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","tempInvasionFlags","setInvaderFlag","distanceSquared","radiusSum","flushInvadingFlagsForIndex","invading","useMaterial","invadingOpacity","gltfRootEl","getGLTFModelRoot","alwaysHidden","radiusSquared","applyInvasionToMesh","traverseFilteredSubtrees","cb","ignoreSpaceBubble","forEachMaterial","originalProps","userData","blending","NormalBlending","IDLE_TIMEOUT_MS","CHARACTER_ACCELERATION_PATH","characterAcceleration","BASIC_ACTIVITY_PATHS","startGazeTeleport","startTeleport","snapRotateRight","snapRotateLeft","grab","angularVelocity","resetTimeout","idleTimeout","lastInputCheck","onIdleTimeout","basicActivity","activityPath","cameraEls","cameraUpdateCount","ticks","updateMyCamera","myCameraTool","penEls","updateMyPen","myPen","sets","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","isInModal","MouseDevice","coords","movementXY","buttonLeft","buttonRight","buttonMiddle","wheel","queueEvent","passive","process","deltaX","deltaY","deltaMode","middle","clientX","clientY","movementX","movementY","mouseDownLeftThisFrame","mouseDownRightThisFrame","mouseDownMiddleThisFrame","write","didStopProcessingEarly","setVector2","mouse","setValueType","ArrayBackedSet","initialItems","oncontextmenu","CODE_TO_KEY","KeyW","KeyA","KeyS","KeyD","KeyQ","KeyE","KeyboardDevice","seenKeys","HudDevice","penButton","XboxControllerDevice","gamepad","buttonMap","buttonId","axisMap","axisId","getGamepads","xboxPaths","xbox","pressed","touched","axesSum","axes","hapticActuators","haptics","actuators","Pose","fromOriginAndDirection","origin","setFromUnitVectors","fromCameraProjection","normalizedX","normalizedY","unproject","EYES_TO_ELBOW","FOREARM","applyArmModel","controllerEuler","deltaControllerPosition","controllerQuaternion","controllerPosition","gamepadPose","headObject3D","userHeight","fromArray","setFromQuaternion","applyEuler","copySittingToStandingTransform","stageParameters","sittingToStandingTransform","ONES","TOUCHPAD","oculusgo","touchpad","TRIGGER","trigger","OculusGoControllerDevice","rayObjectRotation","sittingToStandingMatrix","rayObject","axisX","axisY","rayMatrixWorld","setPose","setMatrix4","gearVRController","TOUCHPAD_X","TOUCHPAD_Y","GearVRControllerDevice","leftOculusTouchButtonMap","rightOculusTouchButtonMap","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","OculusTouchControllerDevice","buttonMaps","devicePaths","leftOculusTouch","rightOculusTouch","handOffset","HAND_OFFSET","POSE","MATRIX","DaydreamControllerDevice","RAY_ROTATION","ViveControllerDevice","vive","gamepads","WindowsMixedRealityControllerDevice","wmr","grip","WebXRControllerDevice","referenceSpace","webxr","thumbStick","touchpadX","touchpadY","joyX","joyY","getPose","targetRaySpace","CircularBuffer","writePtr","difference","GyroDevice","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","hasPolyfill","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","averageDeltaX","averageDeltaY","gyro","findHandCollisionTargetForHand","bodyHelper","handCollisions","getCollisions","bodyData","bodyUuidToData","notRemoteHoverTargets","remoteHoverTargets","findRemoteHoverTarget","isUI","identityFn","updateCursorIntersection","leftRemoteHoverTarget","rightRemoteHoverTarget","rightCursorControllerEl","leftCursorControllerEl","wasReleasedThisFrame","previousState","getRightRemoteHoverTarget","getLeftRemoteHoverTarget","dropPath","drop","hoverFn","spawning","tickInteractor","lostOwnership","AppAwareMouseDevice","prevButtonLeft","clickedOnAnything","cursorPose","prevCursorPose","prevOrigin","prevDirection","cursorController","rawIntersections","cursorTargettingSystem","remoteHoverTarget","isInteractable","isStaticControlledMedia","isStaticMedia","activeSets","rightCursorHoldingPen","rightCursorHoldingInteractable","rightCursorHoldingCamera","smartMouse","shouldMoveCamera","calculateCursorPose","touchIsAssigned","touch","assignments","assignment","identifier","jobIsAssigned","job","unassign","findByJob","findByTouch","TAP_PATHS","tap1","tap2","tap3","tap4","tap5","x2","y2","dx","dy","getPlayerCamera","AppAwareTouchscreenDevice","initialDistance","currentDistance","pendingTap","maxTouchCount","tapIndexToWriteNextFrame","canvasRect","getBoundingClientRect","ResizeObserver","observe","framesUntilGrab","framesUntilUnassign","first","cameraMover","move","isFirstTouch","isSecondTouch","isThirdTouch","hasSecondPinch","setFromCamera","singleActionButton","shouldMoveCursor","cursorJob","previousAssignment","changedTouches","touches","hasCursorJob","hasCameraJob","isTouching","isTouchingGrabbable","touchCameraDelta","anything","xforms","scalar","scaleExp","pow","deadzone","deadzoneSize","split_vec2","compose_vec2","copyIfFalse","copyIfTrue","copyVec2IfTrue","zeroIfDefined","true","rising","risingWithFrameDelay","falling","vec2Zero","_","poseFromCameraProjection","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","atan2","always","constValue","wasd_to_vec2","vec2","add_vec2","max_vec2","normalize_vec2","touch_axis_scroll","snap_to","touching","diff_vec2","invert_vec2_if_preference","preference","oneOrMinusOne","addSetsToBindings","mapping","setName","binding","togglePenWithP","togglePenWithHud","inspectZoomSpeed","keyboardMouseUserBindings","global","hideLine","xform","wake","dCharSpeed","boost","priority","exitMirror","toggleFly","toggleUI","toggleCamera","muteMic","focusChat","focusChatCommand","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","logDebugFrame","logInteractionState","stopGazeTeleport","spawnEmoji0","spawnEmoji1","spawnEmoji2","spawnEmoji3","spawnEmoji4","spawnEmoji5","spawnEmoji6","startInspectingSelf","penPrevColor","penNextColor","startDrawing","stopDrawing","scalePenTip","undoDrawing","scaleGrabbedGrabbable","modDelta","rightCursorHoldingUI","rightCursorHoveringOnInteractable","rightCursorHoveringOnVideo","inputFocused","rightCursorHoveringOnUI","inspecting","debugUserInput","describeCurrentMasks","zero","touchscreenUserBindings","rightCursorHoveringOnPen","keyboardDebuggingBindings","leftButton","leftAxis","leftPose","rightButton","rightAxis","rightPose","wakeLeft","wakeRight","leftJoyXDeadzoned","leftJoyYDeadzoned","scaledLeftJoyX","scaledLeftJoyY","cursorDrop2","cursorDrop1","leftCursorDrop2","leftCursorDrop1","rightHandDrop2","rightGripRisingGrab","rightTriggerRisingGrab","leftGripRisingGrab","leftTriggerRisingGrab","rightDpadNorth","rightDpadSouth","rightDpadEast","rightDpadWest","rightDpadCenter","rightJoy","rightJoyY1","rightJoyY2","rightJoyYDeadzoned","leftDpadNorth","leftDpadSouth","leftDpadEast","leftDpadWest","leftDpadCenter","leftJoy","oculusTouchCharacterAcceleration","rightTouchSnapRight","rightTouchSnapLeft","keyboardSnapRight","keyboardSnapLeft","lowerButtons","upperButtons","ensureFrozenViaButtons","ensureFrozenViaKeyboard","thawViaButtons","thawViaKeyboard","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","oculusTouchUserBindings","north","south","east","west","override","stopTeleport","leftHandHoveringOnNothing","leftCursorHoveringOnUI","leftCursorHoveringOnVideo","rightCursorHoveringOnNothing","leftCursorHoveringOnNothing","leftHandHoveringOnInteractable","leftHandHoldingInteractable","leftHandHoveringOnPen","leftHandHoldingPen","switchDrawMode","leftCursorHoveringOnInteractable","leftCursorHoldingUI","leftCursorHoldingInteractable","leftCursorHoldingPen","rightHandHoveringOnInteractable","rightHandHoldingInteractable","rightHandHoveringOnPen","rightHandHoldingPen","rightCursorHoveringOnCamera","rightHandHoveringOnCamera","leftHandHoveringOnCamera","rightHandHoldingCamera","leftHandHoldingCamera","leftCursorHoldingCamera","rightHandHoveringOnNothing","cursorDrop3","rightBoost","leftBoost","touchpadRising","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","dpadCenterStrip","snapRotateRight1","snapRotateRight2","snapRotateLeft1","snapRotateLeft2","centerStripPressed","touchpadReleased","lowerButtonsReleased","webXRUserBindings","lButton","lAxis","lPose","lJoy","lJoyScaled","lJoyXScaled","lJoyYScaled","lJoyYDeadzoned","lTouch","lTouchScaled","lTouchXScaled","lTouchY","lTouchYScaled","lDpadNorth1","lDpadSouth1","lDpadEast1","lDpadWest1","lDpadCenter1","lDpadNorth2","lDpadSouth2","lDpadEast2","lDpadWest2","lDpadCenter2","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","touchCharacterAcceleration","lCharacterAcceleration","leftUndoDrawing","rButton","rAxis","rPose","rTouch","rJoy","rJoyYDeadzoned","rDpadNorth1","rDpadSouth1","rDpadEast1","rDpadWest1","rDpadCenter1","rDpadNorth2","rDpadSouth2","rDpadEast2","rDpadWest2","rDpadCenter2","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rTriggerRisingGrab","rGripRisingGrab","rightCursorDrop1","rightCursorDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","rightUndoDrawing","ensureFrozenViaDpad","thawViaDpad","freezeButtons","inspectButtons","rSnapRight1","rSnapLeft1","rSnapRight2","rSnapLeft2","keyboardCharacterAcceleration","wasd_vec2","arrows_vec2","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","viveUserBindings","rightHandTeleporting","leftHandTeleporting","leftCursorHoveringOnPen","leftCursorHoveringOnCamera","viveWandUserBindings","indexUserBindings","viveFocusPlusUserBindings","viveCosmosUserBindings","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","pad","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","wmrUserBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","characterAccelerationBindings","cursorMediaVolumeModBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","scaledRightJoystickVertical","scaledLeftJoystickCursorDelta","scaledRightJoystickHorizontal","deadzonedRightJoystickHorizontal","deadzonedRightJoystickVertical","deadzonedLeftJoystickHorizontal","deadzonedLeftJoystickVertical","disableForwardOnTrigger","scaledLeftJoystickHorizontal","scaledLeftJoystickVertical","scaledLeftJoystickForwardAcceleration","xboxControllerUserBindings","rightCursorHoldingNothing","touchpadFalling","touchpadPressed","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","daydreamUserBindings","cardboardUserBindings","generate3DOFTriggerBindings","touchpadButton","triggerButton","touchpadXForPen","touchpadYForPen","triggerRising","triggerFalling","dpadBottomCenterStrip","togglePen","dropBinding","leftTeleporter","rightTeleporter","GamepadDevice","buttonPath","gamepadBindings","oculusGoUserBindings","gearVRControllerUserBindings","satisfiesPath","satisfyPath","bindings","satisfiedBy","notEmpty","isSubpath","canMask","masker","masked","maskerKey","maskerPath","maskedKey","maskedPath","isActive","toggleSet","pendingSetChanges","generation","generations","prevActiveSets","xformStates","activeDevices","registeredMappings","registeredMappingsChanged","vrGamepadMappings","nonVRGamepadMappings","addExtraMappings","activeDevice","deleteExtraMappings","updateBindingsForVRMode","gamepadConnected","gamepadDevice","isWebXRGamepad","gamepadDisconnected","retrieveXRGamepads","added","removed","inputSource","primaryProfile","profiles","handedness","xrSession","requestReferenceSpace","xrReferenceSpace","maybeToggleXboxMapping","vrAxesSum","mouseMovement","nonXboxActivity","hasXboxMapping","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","masksRow","bindingsRow","col","computeMasks","teleporter","offersHandConstraint","offersRemoteConstraint","togglesHoveredActionSet","leftHandHoveringOnVideo","rightHandHoveringOnVideo","leftCursorHoldingNothing","resolveActionSets","activeSetsChanged","il","elem","found","jl","arrayContentsDiffer","actives","prevActives","prevMasked","maskedRow","computeExecutionStrategy","bindingExistedLastFrame","oldValue","PATHS_TO_SHOW","replacer","userinputFrameStatus","pathsOutput","textContent","strings","maskers","logBindings","MEDIA_SEARCH_PATHS","ignoredStates","localStorageCache","tipPlatform","platformTips","desktop","standalone","markTipFinished","storeData","VALIDATORS","look","locomotion","accel","turning","invite","_userinput","_performStep","resetTipActivityFlags","resetConfirmedBroadcastedRooms","prevTip","chosenTip","finishCount","CursorTargettingSystem","dirty","onMutation","onObject3DSet","onObject3DRemove","MutationObserver","childList","populateEntities","records","attributeName","shouldEnableRemote","remote","teleporting","woke","vrRemotePenIntersection","CursorTogglingSystem","domContentLoadedButComponentsMayNotHave","gotComponentReferences","rightHandTeleporter","leftHandTeleporter","gazeTeleporter","shouldEnableLeftRemote","shouldEnableRightRemote","MESSAGE_TYPES","CONSTANTS","BUFFER_CONFIG","WORLD_CONFIG","debugDrawMode","AmmoDebugConstants","DrawWireframe","PhysicsSystem","inverse","debugRequested","enableDebug","disableDebug","objectMatricesFloatArray","byteLength","bodyUuids","DYNAMIC","BODY_DATA_SIZE","MATRIX_OFFSET","linearVelocity","LINEAR_VELOCITY_OFFSET","ANGULAR_VELOCITY_OFFSET","collisions","COLLISIONS_OFFSET","collidingIndex","objectMatricesIntArray","indexToUuid","ammoWorker","postMessage","TRANSFER_DATA","Atomics","debugIndex","debugGeometry","setDrawRange","AmmoWorker","workerHelpers","WorkerHelpers","bodyHelpers","shapeHelpers","nextBodyUuid","nextShapeUuid","ArrayBuffer","Int32Array","INIT","worldConfig","maxBodies","wasmUrl","ammoWasmUrl","BASE_ASSETS_PATH","onmessage","READY","alive","init2","shapeHelper","BODY_READY","SHAPES_READY","bodyUuid","shapesUuid","SharedArrayBuffer","debugMesh","debugSharedArrayBuffer","DefaultBufferSize","Uint32Array","debugVertices","debugColors","addAttribute","debugMaterial","LineBasicMaterial","vertexColors","VertexColors","renderOrder","addBody","updateBody","removeBody","addShapes","removeShapes","addConstraint","constraintId","targetUuid","removeConstraint","registerBodyHelper","registerShapeHelper","bodyInitialized","getLinearVelocity","getAngularVelocity","resetDynamicBody","ACTIVATION_STATE","ConstraintsSystem","prevLeftHand","prevRightHand","prevRightRemote","prevLeftRemote","constraintPairs","constraintTag","entityId","heldEntityId","activationState","ACTIVE_TAG","DISABLE_DEACTIVATION","COLLISION_FILTER_MASK_HANDS","distanceBetweenStretchers","obj1","obj2","distanceTo","existsAndHeldInEither","holderA","holderB","TwoPointStretchingSystem","initialScale","stretching","stretched","leftStretcher","rightStretcher","previousLeftStretcher","previousRightStretcher","initialStretchDistance","SingleActionButtonSystem","didInteractThisFrame","hovered2","HoldableButtonSystem","prevHeld","heldLeft","prevHeldLeft","hasButtonComponent","BUTTON_COMPONENT_NAMES","getHoverableButton","HOVERED","UNHOVERED","HoverButtonSystem","button2","prevButton","DrawingMenuSystem","scaleMenus","cameraWorldPos","drawingMenus","getMenuScale","handleButtons","remotes","undoDraw","SOUND_PEN_UNDO_DRAW","serializeDrawing","showMenu","lastIntersection","finalScale","hideMenus","cursorControllers","getHovered","registerDrawingMenu","networkedDrawingEl","menuEl","undoButton","deleteButton","serializeButton","unregisterDrawingMenu","getSpecificHoverMenu","findHoverMenu","isHoverMenuChild","HoverMenuSystem","prevHoverMenu","hoverMenu2","prevHoverMenu2","SuperSpawnerSystem","maybeSpawn","superSpawner","isPermitted","spawnedMediaScale","cooldownTimeout","performSpawn","spawnedEntity","SPAWNER","activateCooldown","copyState","STRENGTH","determineStrength","HapticFeedbackSystem","twoPointStretchingSystem","interactLeft","interactRight","leftActuator","rightActuator","leftHandStrength","rightHandStrength","rightRemoteStrength","leftRemoteStrength","buttonLeftStrength","buttonRightStrength","stretchingStrength","stretchSystem","stretcherLeft","stretcherRight","leftStrength","rightStrength","pulse","BatchManagerSystem","InteractionSfxSystem","SOUND_HOVER_OR_GRAB","colorShift","ColorShiftWorker","getThemeColorShifter","getImageData","ImageData","SHEET_TYPES","PNGS","spritesheetActionPng","notice","spritesheetNoticePng","ZEROS","getSheetType","spritesheetAction","didRegisterWithSystem","didFailToRegister","registered","updateUVs","normalizedFrame","spritesheet","ret","raycastOnSprite","vA","vB","vC","vD","intersectionInfo","intersect","ray","intersectTriangle","getHoverableVisuals","enableSweepingEffect","comp","hoverableVisuals","hideDueToPinning","createGeometry","maxSprites","positions","indices","Uint16Array","drawRange","createMaterial","spritesheetTexture","RawShaderMaterial","u_spritesheet","hubs_Time","vertexShader","fragmentShader","SpriteSystem","sheetType","sprites","indicesFromSprites","WeakMap","spritesheetPng","RENDER_ORDER","HUD_ICONS","newTexture","oldTexture","uniformsNeedUpdate","aMv","aEnableSweepingEffect","aSweepParams","aEnableSweepingEffectNeedsUpdate","aSweepParamsNeedsUpdate","enableSweepingEffectValue","setXY","updateRange","spritesheetNotice","aUvs","lastSprite","calculateIconTransform","backward","camToWaypoint","m1","waypoint","extractBasis","isOccupiableSpawnPoint","waypointData","canBeOccupied","canBeSpawnPoint","isUnoccupiableSpawnPoint","loadTemplateAndAddToScene","templateId","loadTemplatesForWaypointData","templateIds","canBeClicked","templatesToLoadForWaypointData","isOccupiedByMe","waypointComponent","isOccupied","unoccupyWaypoint","unoccupyWaypoints","waypointComponents","WaypointSystem","helperMat4","previousWaypointHash","initialSpawnHappened","waypointForTemplateEl","elementsFromTemplatesFor","eventHandlers","lostOwnershipOfWaypoint","waypointPreviewAvatar","releaseAnyOccupiedWaypoints","currentWaypoint","teleportToWaypoint","iconEl","moveToWaypoint","tryTeleportToOccupiableWaypoint","previouslyOccupiedWaypoints","tryToOccupy","didOccupy","shouldLandWhenPossible","wp","setupEventHandlersFor","onUnhover","onInteract","setupEventHandlers","waypointId","elementsFromTemplates","li","unregisterComponent","ri","getUnoccupiableSpawnPoint","mightNeedRespawn","ownershipLostTime","shouldTryToOccupy","occupyWaypoint","tryToOccupyAnyOf","waypoints","candidate","currentMoveToSpawn","nextMoveToSpawn","waitOneTick","nextMoveToSpawnResolve","instant","moveToUnoccupiableSpawnPoint","waypointName","resolvedWaypointOrNull","currentMoveToSpawnResolve","waypointComponentOrNull","tickTemplateEl","elementFromTemplate","willMaintainWorldUp","mat4Pool","getCurrentPlayerHeight","world","NAV_ZONE","qsAllowWaypointLerp","calculateDisplacementToDesiredPOV","translationCoordinateSpace","translated","localTranslation","povMat4","allowVerticalMovement","localDisplacement","displacementToDesiredPOV","CharacterControllerSystem","deltaFromHeadToTargetForHead","targetForHead","targetForRig","targetWorldPosition","isMotionDisabled","navMeshExists","pathfinder","zones","findPositionOnNavMesh","travelByWaypoint","inPosition","outPosition","initialOrientation","finalPosition","finalPOV","shouldUnoccupyWaypointsOnceMoving","snapRotatedPOV","newPOV","startPOVPosition","desiredPOVPosition","navMeshSnappedPOVPosition","interpolatedWaypoint","startTranslation","waypointPosition","activeWaypoint","waypointComponentData","waypointTravelTime","isInstant","waypointTravelStartTime","SOUND_WAYPOINT_START","animationIsOver","easeOutQuadratic","SOUND_WAYPOINT_END","wasFlying","didStopFlying","navNode","dXZ","SOUND_SNAP_ROTATE","zCharacterAcceleration","relativeMotion","lerpC","nextRelativeMotion","triedToMove","lengthSq","speedModifier","shouldRecomputeNavGroupAndNavNode","shouldResnapToNavMesh","squareDistNavMeshCorrection","findPOVPositionAboveNavMesh","startingFeetPosition","desiredFeetPosition","outPOVPosition","shouldRecomputeGroupAndNode","playerHeight","navGroup","inTransform","motion","getClosestNode","outPos","getGroup","clampStep","CursorPoseTrackingSystem","pairs","MenuAnimationSystem","menuToCamera","menuScale","menuParentScale","menuPosition","viewingCameraEl","datum","isMenuVisible","isMenuOpening","wasMenuVisible","distanceToMenu","chooseScale","endingScale","menuOpenTime","startScaleAtMenuOpenTime","lerp","elasticOut","AudioSettingsSystem","onSceneReset","sceneAudioDefaults","delayedReconnectTimeout","performDelayedReconnect","enableChromeAEC","isThreeAudio","loopbackDestination","outboundPeerConnection","RTCPeerConnection","inboundPeerConnection","onError","addIceCandidate","iceConnectionState","streams","offer","createOffer","setLocalDescription","setRemoteDescription","answer","createAnswer","parsedSdp","sdpTransform","sdp","fmtp","AudioSystem","_resumeAudioContext","disableAEC","_sceneEl","audioNodes","mediaStreamDestinationNode","outboundGainNode","createAnalyser","analyserLevels","audioContextNeedsToBeResumed","_safariMobileAudioInterruptionFix","onPrefsUpdated","outputNode","newGain","setTargetAtTime","sinkId","isDefault","outputMediaAudio","sink","setSinkId","onstatechange","scaleForAspectFit","containerSize","isCapturableByType","MediaType","ALL_2D","MODEL","IMAGE","VIDEO","PDF","MediaFramesSystem","interactionSystem","bodyUUID","holdingSomethingCapturable","mediaType","guideMesh","targetId","capturableEl","getCapturableEntityCollidingWithBody","showPreview","capture","hidePreview","capturedEl","isColliding","snapToCenter","snapObject","mediaObjectEl","entityA","entityB","bodyAUUID","bodyBUUID","originalTargetScale","tmpWorldPosition","ShaderMaterial","Color","translateZ","setLocked","capturableEntity","srcMesh","clonedMesh","loopAnimation","isPlaying","originalAnimation","currentActions","activeClipIndex","animation","AnimationMixer","syncWith","LoopRepeat","aabb","updateWorldMatrix","worldQuat","setRotationFromQuaternion","helperBBAA","centerBBAA","AxesHelper","stopAllAction","uncacheRoot","InspectYourselfSystem","EmojiSystem","emojiHudEntity","lastSpawnedEmoji","paramsReducer","addOrRemoveZone","isInZone","isEnabled","wasInZone","isUpdated","currZones","prevZones","predicate","setRay","hasIntersection","intersectTarget","intersectBox","getBoundingBox","updateSource","Ray","sourcePosition","sourceZones","listenerPosition","listenerZones","inOutParams","inOut","getAudioParams","outInParams","outIn","restore","AudioZonesSystem","didRegisterAudioListener","registerEntity","currListenerZones","sources","getPosition","isListenerUpdated","registerZone","unregisterZone","registerSource","unregisterSource","unregisterEntity","distanceModels","linear","exponential","calculateAttenuation","listenerPos","sourcePos","panner","GainSystem","attenuation","shouldAddSupplementaryAttenuation","shouldBeClipped","clippingState","NameTagVisibilitySystem","avatarRigWorldPos","DOMContentDidLoad","cursorTogglingSystem","interactionSfxSystem","superSpawnerSystem","positionAtBorderSystem","constraintsSystem","singleActionButtonSystem","holdableButtonSystem","hoverButtonSystem","hoverMenuSystem","hapticFeedbackSystem","SoundEffectsSystem","scenePreviewCameraSystem","ScenePreviewCameraSystem","drawingMenuSystem","audioSettingsSystem","animationMixerSystem","AnimationMixerSystem","uvScrollSystem","UVScrollSystem","shadowSystem","ShadowSystem","mediaFramesSystem","inspectYourselfSystem","emojiSystem","audioZonesSystem","gainSystem","environmentSystem","EnvironmentSystem","didInteractLeftThisFrame","didInteractRightThisFrame","_gotAudioTrack","_recorderTimeout","_initRecorder","_stream","_recorder","_tryAddingAudioTrack","handlers","addLinkageHandler","syncLinkage","elA","elB","_handlingLinkage","waitForMediaLoader","registerLinkage","handlerA","handlerB","deregisterLinkage","syncedVideoAttributes","fakePanner","unsupported","getWebGLVersion","updateState","navMeshObject","colorInner","colorOuter","colorGain","sourceOrientation","clipped","audioDebugVert","audioDebugFrag","FrontSide","defines","MAX_DEBUG_SOURCES","sourcePositions","sourceOrientations","maxDistances","refDistances","rolloffFactors","coneInnerAngles","coneOuterAngles","gains","sourceDir","sourceNum","getWorldDirection","enableDebugMode","_hubs_audio_debug_prev_material","computeVertexNormals","PinningHelper","_signInAndPinOrUnpinElement","_pinElement","storedPromotionToken","gltfComponents","HUBS_components","equalArray","every","mediaSrc","mediaVersion","mediaContentSubtype","pageIndex","pinnedEntityToGltf","hasPinned","addScalar","clampScalar","HIGHLIGHT","NO_HIGHLIGHT","TRANSFORM_COLOR_1","TRANSFORM_COLOR_2","defaultDistance","minDistance","cursorVisual","setCursorScale","firstHitOnly","lineGeometry","Line","cameraPos","isGrabbing","intersectionIsValid","addScaledVector","lerpHSL","posePosition","cursorPosition","positionArray","computeBoundingSphere","DRAW_MODE","almostEquals","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","drawMode","penVisible","penTipPosition","timeSinceLastDraw","lastPosition","currentDrawing","worldPosition","colorIndex","grabbed","originalPosition","lastIntersectionDistance","setDirty","MeshStandardMaterial","quality","convertStandardMaterial","penTip","penLaserAttributesUpdated","penLaserAttributes","laserVisible","laserInHand","laserOrigin","remoteLaserOrigin","laserTarget","penSystem","_handleInput","_getIntersection","_updatePenTip","_updateLaser","_setPenVisible","_doDraw","_startDraw","SOUND_PEN_START_DRAW","_endDraw","SOUND_PEN_STOP_DRAW","penScaleMod","_changeRadius","_changeColor","SOUND_PEN_CHANGE_COLOR","_undoDraw","worldQuaternion","laserStartPosition","laserEndPosition","camerWorldPosition","lastIntersectedObject","getLastPoint","_getNormal","directionToCamera","startDraw","endDraw","mod","InterpolationBuffer","tipMaterial","lineCurve","LineCurve3","TubeBufferGeometry","laser","laserTip","originBuffer","MODE_LERP","targetBuffer","originBufferPosition","targetBufferPosition","laserTipVisible","SharedBufferGeometry","maxBufferSize","addBuffer","prevIdx","componentSize","diff","undo","normals","colors","addColor","g","setXYZ","addNormal","addVertex","addIndex","computeBoundingSpheres","SharedBufferGeometryManager","sharedBuffers","addSharedBuffer","getSharedBuffer","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","sharedBufferGeometryManager","lastPoint","lastSegments","currentSegments","sharedBuffer","vertexCount","indexCount","networkBufferCount","currentPointCount","invalidPointRead","lastReadPointCount","networkBufferHistory","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","isConnected","hasActiveDataChannel","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","cloneMesh","sharedBufferGeometry","originalGeometry","exporter","GLTFExporter","gltfExtensions","binary","includeCustomExtensions","POSITIVE_INFINITY","NEGATIVE_INFINITY","attribute","getX","getZ","deserializeDrawing","setHex","copyArray","didWork","pointCount","_draw","_updateBuffer","drawTime","parts","ceil","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawProjectedEndCap","_endLine","_drawStartCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","_drawEndCap","clock","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","bufferVertexCount","_addIndex","down","segment","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","_getDeserializeButton","networkedDrawingBuffer","finishDrawing","addMeshScaleAnimation","ACTIVATION_STATES","ISLAND_SLEEPING","WANTS_DEACTIVATION","DISABLE_SIMULATION","loadedEvent","angularFactor","KINEMATIC","emitCollisionEvents","disableCollision","scaleAutoUpdate","HULL","CYLINDER","SPHERE","CAPSULE","CONE","HACD","VHACD","HEIGHTFIELD","minHalfExtent","maxHalfExtent","sphereRadius","NaN","cylinderAxis","heightfieldData","heightfieldDistance","bodyEl","registerNetworkSchemas","vectorRequiresUpdate","almostEqualVec3","requiresNetworkUpdate","providerLabel","slack","OAuthScreen","provider","redirectUrl","oauthScreen","LegalMessage","OAuthScreenContainer","oauthInfo","IS_LOCAL_OR_CUSTOM_CLIENT","Cache","patchWebGLRenderingContext","App","HUD_BACKGROUND","isEmbed","self","DefaultMatrixAutoUpdate","firstSyncSource","syncSource","isOAuthModal","opener","isTelemetryDisabled","registerTelemetry","disableiOSZoom","instanceKey","started_at","onStorageEvent","detectConcurrentLoad","uiProps","routerBaseName","createMemoryHistory","createBrowserHistory","basename","qsVREntryType","showOAuthScreen","mountUI","sceneUrl","isLegacyBundle","model_url","loadingEnvironment","defaultSpaceTopic","topics","glbAsset","assets","asset_type","bundleAsset","hasExtension","baseURL","LoaderUtils","extractUrlBase","sceneErrorHandler","environmentScene","envSystem","loadStart","environmentEl","updateEnvironment","fader","bindingRef","getBindings","emitter","handleHubChannelJoined","embedTokenEntry","embedTokens","executeOnLoadActions","onMediaSearchCancelled","serverURL","loadEnvironmentAndConnect","onConnectionError","shadowMap","vr","setSize","initProfile","platformUnsupported","defaultRoomId","getCurrentHubId","initialBatchImage","AuthChannel","onFailure","actionError","createAvatar","LinkChannel","handleEarlyVRMode","availableVREntryTypesPromise","getVRDisplay","videoComponent","buildNumber","getReticulumMeta","reticulumMeta","phx_host","pool","hasVREntryDevice","runBotMode","previewCamera","reorder","setupLobbyCamera","addAnimationComponents","isReloading","connectToReticulum","vapid_public_key","pushSubscriptionEndpoint","authToken","push_subscription_endpoint","createHubChannelParams","migrateToNewReticulumServer","ret_version","ret_pool","shouldAbandonMigration","tryGetMatchingMeta","oldSocket","setSocket","teardown","onRetDeploy","pendingNotification","hasPendingNotification","handleNextMessage","isLocked","currentNotification","deployNotification","oauthFlowPermsToken","Cookies","hubPhxChannel","rawOnJoin","rawOnLeave","denoisePresence","presenceEventsForHub","presenceSync","updateSceneCopresentState","session_token","oauth_info","incomingMessage","userInfo","getAuthor","createInWorldLogMessage","stale_fields","titleParts","oldSlug","keyboardUserClass","keyboardUser","setKeyboardUser","onMouseDown","isHoldable","preventAudioBoost","didUpdateOnce","linkify","Linkify","tlds","mediaAPIEndpoint","resolveUrlCache","getDefaultResolveQuality","is360","useLowerQuality","resolveUrl","bustCache","resultPromise","response","ok","statusText","desiredContentType","formData","FormData","getDirectReticulumFetchUrl","urlOrText","fitToBox","templateBody","firstElementChild","cloneNode","elAttrs","attrIdx","needsToBeUploaded","loader","getLatestMediaVersionOfSrc","FileReader","view","DataView","getUint16","marker","getUint32","little","readAsArrayBuffer","getOrientation","srcUrl","uploadPromotionTokens","objectTypeForOriginAndContentType","sourceEl","shaderUniforms","reflectionProbeMode","updateMaterials","hubs_InjectedCustomShaderChunks","validMaterials","meshToEl","newMaterial","onBeforeCompile","shader","hubs_IsFrozen","hubs_EnableSweepingEffect","mediaHighlightFrag","mediaPos","snapCount","mirrorOrientation","rotateY","eventType","setCrossOrigin","loadAsync","autoplay","onComplete","audioTracks","mozHasAudio","webkitAudioDecodedByteCount","acceleratedRaycast","gltfCache","inflightGltfs","extractZipFile","SketchfabZipWorker","defaultInflator","componentData","cloneGltf","getHubsComponents","hubsComponents","legacyComponents","getHubsComponentsFromMaterial","GLTFModelPlus","componentKey","inflator","inflateEntities","indexToEntityMap","templates","modelToWorldScale","childEntities","entityComponents","materialComponents","generateUUID","morphTargetInfluences","gltfIndex","inflatedEntity","isFirstInflation","objectInflations","objectInflation","resolveNodeRefs","__mhc_link_type","attachTemplate","templateRoot","targetEls","getHubsComponentsExtension","extras","dracoLoader","GLTFHubsPlugin","manager","oldHeightfieldNode","heightfield","light","range","decay","runMigration","materialQuality","parsedPath","GLTFHubsComponentsExtension","deps","resolveComponents","gltfRootType","associations","getDependency","loadedDep","MOZ_texture_rgbe","mapMaterials","GLTFHubsLightMapExtension","loadMaterial","materialIndex","materialDef","extensionDef","pending","results","lightMapIntensity","intensity","GLTFHubsTextureBasisExtension","loadTexture","textureIndex","textureDef","loadTextureImage","GLTFMozTextureRGBE","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","loadGLTF","fileMap","getCustomGLTFParserURLResolver","RGBELoader","setDataType","HalfFloatType","DRACOLoader","setKTX2Loader","setDRACOLoader","finally","resolveAsset","charAt","assetEl","loadTemplates","applySrc","templateEl","lastSrc","inflatedEl","disposeLastInflatedEl","initMixer","hasBufferGeometry","hasBoundsTree","isInterleavedBufferAttribute","triCount","MeshBVH","strategy","maxDepth","object3DToSet","inflateComponents","rewires","hasEnteredFullScreenThisSession","toDataURL","disposeImageBitmap","imageBitmap","HTMLImageElement","nonCorsProxyDomains","NON_CORS_PROXY_DOMAINS","commonKnownContentTypes","png","jpg","jpeg","mp4","mp3","basis","ktx2","m3u8","mpd","farsparkEncodeUrl","btoa","p1","extension","pathParts","extensionCandidate","thumbnailUrl","THUMBNAIL_SERVER","urlHostname","hasReticulumServer","RETICULUM_SERVER","isNonCorsProxyDomain","domain","parsedUrl","relativeUrl","getAbsoluteUrl","basisJsUrl","basisWasmUrl","dracoWrapperJsUrl","dracoWasmUrl","originalUrlParts","decodeURIComponent","dataUrlRegex","exec","originIsHubsServer","isHubsServer","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","isHubsSceneUrl","isHubsAvatarUrl","toggleScreenShare","waypointDeltaDistance","gyroCameraDelta","gamepadIndex","buttonIndex","axisIndex","buttonName","axisName","wmrController","en","pt","ja","es","ru","fr","ko","de","jp","nextId","bit","nextBit","CL","NONE","ENVIRONMENT","AVATAR","MEDIA_FRAMES","APP_CONFIG","STORYBOOK_APP_CONFIG","useTheme","themeId","darkMode","setDarkMode","darkmodeQuery","addListener","useDarkMode","variables","styleTag","ThemeProvider","setThemeId","onStoreChanged","nextThemeId","useThemeFromStore","worker","nextItemId","outstanding","transfer","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","apiSource","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","_update","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","languages","singular","credentialsAccountId","lastSavedUrl","nextCursor","lastFetchedUrl","_stashLastSearchParams","_stashedParams","_stashedSource","_sourceNavigate","hideNav","useLastStashedParams","currentQuery","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","withSlug","hasMediaPath","SvgPen","lastChildMargin","centerVertical","centerVerticalMd","margin0LastChild","lastTouchAtMs","isDoubleTouch","SvgStar","browserIsSafari","os","CAMERA_LAYER_DEFAULT","CAMERA_LAYER_REFLECTION","reflection","inWorldHud","exclusive","layer","soundEnum","SOUND_MEDIA_LOADED","SOUND_PREFERENCE_MENU_HOVER","pendingAudioSourceNodes","pendingPositionalAudios","positionalAudiosStationary","positionalAudiosFollowingObject3Ds","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","URL_SPAWN_EMOJI","URL_SPEAKER_TONE","audioBufferPromise","decodeAudioData","sounds","audioBuffer","isDisabled","shouldBeDisabled","stopAllPositionalAudios","enqueueSound","enqueuePositionalSound","positionalAudio","setBuffer","playPositionalSoundAt","playSoundLooped","inPositionalAudio","pendingIndex","removeFromParent","pendingPositionalAudio","positionalAudioAndObject3D","SvgSpinner","spinner","SvgClose","tau","asin","SvgWarning","isExitingFullscreenDueToFocus","invalid","InputElement","outerWrapper","buttonStyles","inputGroup","iconButtonStyles","inputWrapper","textInput","handleTextFieldFocus","invalidIcon","Store","audioOverrides","zoneOverrides","setupRenderer","dataset","aframeCanvas","WebGLRenderer","alpha","antialias","premultipliedAlpha","preserveDrawingBuffer","logarithmicDepthBuffer","powerPreference","checkShaderErrors","physicallyCorrectLights","outputEncoding","domElement","AudioListener","renderClock","Clock","mainTick","_rafTime","xrFrame","getDelta","renderStarted","SvgDuplicate","SvgHelp","SvgExternalLink","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","twitch_stream","useThumbnail","isImage","imageAspect","imageWidth","imageHeight","useThumbnailSize","BaseTile","additionalProps","TileComponent","tall","wide","role","mediaTile","thumbnailContainer","TileAction","tileAction","CreateTile","createTile","createTileContent","Add","MediaTile","onInfo","publisherName","publisher","last_activated_at","relativeTime","thumbnailLink","autoPlay","playsInline","favorited","member_count","memberCount","tileActions","Pen","names","chooseRandom","arr","fetchRandomDefaultAvatarId","defaultAvatars","STORE_STATE_CACHE_KEY","validator","Validator","defaultMaterialQuality","MATERIAL_QUALITY_OPTIONS","qsMobileDefault","qsDefault","isFirefoxReality","SCHEMA","additionalProperties","personalAvatarId","entryCount","lastUsedMicDeviceId","micMuted","confirmedDiscordRooms","onLoadActions","$ref","_signOutOnExpiredAuthToken","_shouldResetAvatarOnInit","_preferences","oauthFlowCredentials","getJSON","maybeDispatchThemeChanged","clearStoredArray","currentEntryCount","enqueueOnLoadAction","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","mergeOpts","finalState","merge","valid","instance","argument","SvgPeople","SvgAdd","SvgSearch","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","forceWebVR","Scene","dataTexture","DataTexture","FloatType","Camera","getError","checkFloatTextureSupport","getParameter","VERSION","privacylink","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","useDevicePixelRatio","ORBIT_ANGLE","fitBoxInFrustum","AvatarPreview","OrbitControls","screenSpacePanning","enableKeys","DirectionalLight","HemisphereLight","loadId","loadCurrentAvatarGltfUrl","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","currentTheme","currentThemeObject","getThemeBackground","resize","mounted","updateProjectionMatrix","setAvatar","resetCamera","imageBitmaps","oldProps","applyMaps","loadPreviewAvatar","previewMesh","MAT_NAME","idleAnimation","idleAnimationAction","removeOnUpdate","getImage","originalMaps","createDefaultEnvironmentMap","applyMapToPreview","revertMap","bm","newLoadId","newProps","mapName","applyMap","SubmitEmail","setEmail","onSubmitForm","onChangeEmail","WaitForVerification","SignInComplete","interactorOneTransform","interactorTwoTransform","geometryRadius","isTouchscreen","showEffect","toggling","interactorOne","interactorTwo","leftToggledOff","rightToggledOff","worldY","ms1","ms2","ms3","scaledRadius","mediaGrid","variableWidth","pushOrUpdateHistory","newPathname","newSearch","__historyLength","__duplicate","isDuplicate","len","go","IfFeature","fn","HubsMeshBasicMaterial","Material","emissive","emissiveIntensity","aoMap","aoMapIntensity","alphaMap","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","_emissive","_emissiveIntensity","_emissiveMap","HubsMeshPhongMaterial","MeshPhongMaterial","normalMapType","normalScale","bumpScale","displacementMap","displacementScale","displacementBias","reflectivity","refractionRatio","isMeshStandardMaterial","fromMeshStandardMaterial","HTMLVideoElement","logFilter","defaultSettingsForSourceType","defaults","sceneOverrides","zoneSettings","preferencesOverrides","safariOverrides","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","applySettings","textureToData","registeredTextures","instances","increment","Vector2","__webpack_public_path__","hasThumbnailServerMetaTag","colorVars","features","featureName","localDevImages","_isAdmin","availableIntegrations","translationsConfig","setMaxResolution","isVRPresenting","contentRect","pixelRatio","aspectRatio","getRenderResolution","hubsSystems","frustumBox","inverseShadowCameraMatrixWorld","tempBox","verts","shadowCameraBoundingBox","previousShadowsEnabled","realtimeShadowsEnabled","PCFSoftShadowMap","receiveShadow","castShadow","computeShadowCameraBoundingBox","shadow","resizeShadowCameraFrustum","toneMappingOptions","None","Reinhard","Cineon","ACESFilmic","CustomToneMapping","LUTToneMapping","outputEncodingOptions","LinearEncoding","GBEEncoding","LogLuvEncoding","GBM7Encoding","RGBM16Encoding","GBDEncoding","BasicDepthPacking","GBADepthPacking","defaultEnvSettings","toneMapping","toneMappingExposure","envMapTexture","backgroundTexture","fogType","fogColor","fogDensity","fogFar","fogNear","blenderLUTPromise","pmremGenerator","PMREMGenerator","applyEnvSettings","setupDebugView","debugSettings","gui","GUI","debugGui","debugMode","$E","envEl","envSettingsEl","skyboxEl","navmeshEl","envSettings","skybox","getObjectByProperty","loadMesh","materialsNeedUpdate","newToneMapping","LUTCubeLoader","blenderLutPath","texture3D","tonemappingLUT","newOutputEncoding","lp","EquirectangularReflectionMapping","prevEnvMapTextureUUID","environment","sky","generateEnvironmentMap","Fog","FogExp2","density","forNear","setFromCenterAndSize","ReflectionProbe","debugBox","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","arrayBufferToString","keyPair","generateKey","publicKeyString","incomingPublicKeyString","iv","incomingPublicKey","secret","encryptedData","encrypt","base64value","ciphertext","decrypt","getLetter","readyToSend","leftChannel","leave","incoming","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","generateKeys","numOccupants","decryptObject","SHORTHAND_INITIALIZER","SPREAD_SYNTAX","CATCH_SYNTAX","syntaxSupported","syntax","eval","getPlatformSupport","supported","WebAssembly","isInAppBrowser","showDetails","hasCopied","platformSupport","allSupported","inAppBrowser","supportMain","supportContent","unsupportedLangs","readOnly","onCopyClicked","toggleDetails","titleNode","smFullscreen","colorHelperFrom","colorHelperTo","propertyPathCache","getComponentPropertyPath","delimiter","getComponentProperty","splitName","setComponentProperty","splitCache","toRadians","addEventListeners","eventNames","removeEventListeners","getRawProperty","splitDot","setRawProperty","targetValue","dir","startEvents","pauseEvents","resumeEvents","eventDetail","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","createAndStartAnimation","cancelDelayedStart","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","isBoolean","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","wait","AmbientLight","convertSRGBToLinear","onlyY","_updateBillboard","boxTemp","expandBox","intersectsBox","shadowMapResolution","shadowBias","shadowRadius","bias","prevWidth","prevHeight","mapSize","initialForce","maxForce","maxScale","generateAndAddHeightfield","CANNON","Vec3","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","PointLight","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","releaseGravity","reduceAngularFloat","gravitySpeedLimit","onGrab","onRelease","_makeStaticWhenAtRest","linearThreshold","angularThreshold","isAtRest","hasBeenHereBefore","stuckTo","_unstickObject","Water","scope","clipBias","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","mirrorPlane","Plane","mirrorWorldPosition","rotationMatrix","lookAtPosition","clipPlane","Vector4","textureMatrix","mirrorCamera","parameters","stencilBuffer","isPowerOfTwo","mirrorShader","UniformsUtils","UniformsLib","mirrorSampler","ShaderChunk","lights","reflect","setFromNormalAndCoplanarPoint","constant","currentRenderTarget","getRenderTarget","currentXrEnabled","currentShadowAutoUpdate","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","colliders","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","collidingLastFrame","onVideoLoaded","debuggable","debugBBAA","BoxHelper","bbaa","culled","updateDescendants","origDispatch","firstObject","Pathfinding","removeNavMeshData","setZoneData","createZone","teleporters","helperMesh","eventSource","eventListeners","_handleEvent","getAnalyser","ikRootEl","analyserEl","disableUpdates","_updateAnalysis","lastSeenVolume","minScale","minValue","maxValue","morphs","morphNumber","morphTargetDictionary","morphValue","SPRITE_NAMES","MIC","MIC_HOVER","MIC_OFF","MIC_OFF_HOVER","prevSpriteName","audioAnalyser","spriteName","tex","actionButtonSrc","buttonSrc","nametagSrc","nametagBorderSrc","usingCustomMaterial","usingAtlas","uvAtlasMin","uvAtlasMax","textureSrc","regenerateMesh","setPos","setUV","w2","h2","setStyle","parseSide","updateMap","setMap","clip","activeClipIndices","updateClip","clipName","clips","clipNames","loadingObject","loadingObjectSrc","forceMeshBatching","forceImageBatching","disableBatching","playSoundEffect","moveTheParentNotTheMesh","showLoader","clearLoadingTimeout","onMediaLoaded","handleLinkedElRemoved","animating","updateScale","originalMeshMatrix","desiredObjectMatrix","scaleCoefficient","removeShape","loaderMixer","loadedSoundEffect","useFancyLoader","loadingClip","loadingScaleClip","VectorKeyframeTrack","showLoaderTimeout","updateHoverableVisuals","boundingSphere","Sphere","injectedCustomShaderChunks","getBoundingSphere","physicsShape","shouldUpdateScale","finish","forceLocalRefresh","srcChanged","canonicalUrl","canonicalAudioUrl","accessibleUrl","isLocalModelAsset","protocol","origin_audio","expected_content_type","raw","linkedMediaVideo","qsTime","startTime","applyGravity","onNext","onPrev","onSnap","nextButton","pageLabel","newIndex","quackPercentage","specialQuackPercentage","wasInteracting","isInteracting","quack","rand","newRot","positionOnly","startPoint","targetPoint","targetRotDelta","targetRotation","backwards","ranOnePass","streamerCamera","getStreamerCamera","fromRot","toRot","BoxBufferGeometry","CubeCamera","LightProbeGenerator","WebGLCubeRenderTarget","_geometry","_inclination","_azimuth","_distance","updateSunPosition","turbidity","rayleigh","luminance","mieCoefficient","mieDirectionalG","phi","sunPosition","skyScene","cubeCamera","vrEnabled","fromCubemap","generateLightProbe","lightProbe","fromCubeRenderTarget","recursive","skyIndex","inclination","azimuth","spawnPoints","spawnPoint","spawnCooldown","animateFromCursor","handPosition","onSpawnEvent","tempSpawnHandPosition","handleMediaLoaded","boxSize","willAnimateFromCursor","sx","sy","sz","MobileWater","RepeatWrapping","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","water","Octave","alternate","SimpleWater","lowQuality","rotateX","waterUniforms","ripplesSpeed","ripplesScale","materialClass","roughness","metalness","specular","dynamic","octaves","simplex","SimplexNoise","positionAttribute","octave","noise","tideHeight","tideScale","tideSpeed","waveHeight","waveScale","waveSpeed","vec2Equals","waterNormalsUrl","usePhongShader","defaultSrcUrl","defaultSrcImage","startColor","middleColor","endColor","colorCurve","sizeCurve","velocityCurve","ParticleEmitter","updateParticles","setTexture","originalAudioParamsData","Text","THREE_SIDES","front","double","numberOrPercent","textAlign","anchorX","clipRect","curveRadius","depthOffset","fillOpacity","fontUrl","letterSpacing","lineHeight","outlineBlur","outlineColor","outlineOffsetX","outlineOffsetY","outlineOpacity","outlineWidth","overflowWrap","strokeColor","strokeOpacity","textIndent","whiteSpace","troikaTextMesh","font","sync","outSize","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","mediaInflator","isControlled","hasVolume","templateName","sanitizeUrl","euler","attachTemplateToLocal","mediaLoaderAttributes","enterComponentMapping","leaveComponentMapping","targetEntity","_componentName","removeUndefined","mediaDistanceModel","mediaRolloffFactor","mediaRefDistance","mediaMaxDistance","mediaConeInnerAngle","mediaConeOuterAngle","mediaConeOuterGain","mediaVolume","avatarDistanceModel","avatarRolloffFactor","avatarRefDistance","avatarMaxDistance","avatarConeInnerAngle","avatarConeOuterAngle","avatarConeOuterGain","avatarVolume","_components","srcNode","positional","WrappedIntlProvider","updateLocale","MOBILE_RE","TABLET_RE","isIpadOS","platform","_isMobile","vendor","opera","mockUserAgent","isTablet","adjectives","nouns","generateHubName","randItem","isLocalClient","extraParams","maybeSlug","resolverLink","directReticulumHostAndPort","invalidatedReticulumMetaThisSession","absolute","phxHostOverride","refreshDirectReticulumHostAndPort","RETICULUM_SOCKET_SERVER","invalidateReticulumMeta","socketClass","Socket","getNewSocketUrl","RETICULUM_SOCKET_PROTOCOL","socketUrl","socketSettings","logger","endPointPath","endPoint","newSocketUrl","newEndPoint","photoUrl","retUrl","authorization","createAndRedirectToNewHub","sceneId","createUrl","scene_id","getPresenceEntryForSession","migrateBindings","oldChannel","doNotDuplicate","topic","pushBuffer","oldJoinPush","joinPush","recHooks","channels","beforeJoin","afterJoin","remaining","didMatchMeta","delayMS","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","srcSuffixLookupMap","fetchSkinnableAvatar","fetchAvatarGltfUrl","avatarUnavailableImage","materialForMesh","primitives","primitive","parentId","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","showLog","debugLog","debugLogInput","debugLogEval","onsubmit","minimized","debugLogMinimize","onclick","origConsoleInfo","origConsoleLog","origConsoleError","origConsoleWarn","objs","firstObj","stack","shouldScroll","onunhandledrejection","DEFAULT_COLORS","activateTheme","actionColor","actionHoverColor","newThemeId","highlighted","verifyAuthentication","authTopic","authPayload","handleAuthCredentials","HAS_IMAGE_BITMAP","TextureLoader","onLoad","loadImageBitmapTexture","ImageBitmapLoader","setPath","resolveURL"],"mappings":"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WACA,WACA,QACA,QACA,MACA,QACA,YACA,OACA,UACA,SACA,cACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,aACA,SACA,WACA,UACA,WACA,SACA,YACA,UACA,QACA,OACA,OACA,QACA,YACA,QACA,SACA,SACA,QACA,UACA,aACA,SACA,cACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,WACA,cACA,cACA,OACA,SACA,QACA,YACA,UACA,WACA,SACA,WACA,eACA,aACA,OACA,SACA,MACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,SACA,WACA,OACA,UACA,aACA,aACA,YACA,YACA,UACA,SACA,UACA,aACA,aACA,OACA,YACA,WACA,WACA,SACA,YACA,WACA,aACA,aACA,cACA,UACA,UACA,OACA,QACA,QACA,SACA,OACA,WACA,OACA,YACA,QACA,UACA,UACA,WACA,QACA,WACA,YACA,QACA,YACA,QACA,OACA,YACA,aACA,QACA,SACA,SACA,QACA,QACA,QACA,MACA,QACA,WACA,QACA,WACA,QACA,WACA,UACA,SACA,OACA,QACA,MACA,UACA,QACA,UACA,QACA,QACA,QACA,WACA,WACA,SACA,WACA,WACA,cACA,gBACA,WACA,aACA,QACA,aACA,YACA,cACA,WACA,aACA,UACA,YACA,UACA,YACA,YACA,aACA,YACA,WACA,OACA,WACA,OACA,YACA,QACA,SACA,WACA,WACA,SACA,SACA,OACA,WACA,WACA,UACA,YACA,SACA,UACA,YACA,aACA,QACA,SACA,eACA,UACA,QACA,SACA,UACA,YACA,OACA,MACA,UACA,UACA,WACA,WACA,QACA,QACA,WACA,SACA,WACA,WACA,aACA,SACA,aACA,cACA,SACA,aACA,WACA,SACA,SACA,OACA,QACA,SACA,SACA,SACA,UACA,OACA,WACA,QACA,aACA,SACA,UACA,UACA,WACA,YACA,YACA,QACA,UACA,YACA,QACA,SACA,UACA,UACA,UACA,UACA,OACA,QACA,OACA,SACA,YACA,UACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,WACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,SACA,YACA,UACA,OACA,WACA,QACA,YACA,WACA,WACA,QACA,QACA,SACA,OACA,YACA,SACA,eACA,aACA,WACA,SACA,SACA,YACA,SACA,OACA,WACA,YACA,QACA,QACA,OACA,OACA,QACA,SACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,YACA,WACA,UACA,cACA,QACA,YACA,OACA,QACA,WACA,OACA,QACA,OACA,gBACA,UACA,YACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,OACA,UACA,OACA,QACA,SACA,SACA,SACA,WACA,SACA,SACA,OACA,OACA,UACA,UACA,QACA,SACA,eACA,cACA,WACA,UACA,cACA,SACA,YACA,SACA,cACA,aACA,YACA,SACA,QACA,SACA,WACA,QACA,UACA,WACA,YACA,YACA,cACA,QACA,OACA,YACA,YACA,YACA,YACA,aACA,YACA,WACA,QACA,OACA,WACA,QACA,WACA,aACA,SACA,WACA,WACA,SACA,YACA,UACA,UACA,aACA,MACA,OACA,aACA,WACA,WACA,YACA,cACA,QACA,QACA,UACA,gBACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,SACA,UACA,WACA,WACA,SACA,UACA,UACA,WACA,UACA,QACA,aACA,aACA,QACA,iBACA,UACA,SACA,SACA,WACA,SACA,QACA,SACA,QACA,cACA,WACA,UACA,SACA,WACA,WACA,QACA,UACA,YACA,aACA,aACA,SACA,SACA,UACA,SACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,aACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,OACA,UACA,SACA,WACA,QACA,QACA,OACA,cACA,YACA,WACA,UACA,WACA,SACA,cACA,SACA,SACA,WACA,OACA,WACA,QACA,QACA,UACA,QACA,QACA,SACA,YACA,SACA,cACA,cACA,QACA,QACA,QACA,QACA,WACA,WACA,YACA,eACA,aACA,aACA,OACA,aACA,cACA,YACA,SACA,QACA,UACA,WACA,OACA,OACA,UACA,WACA,SACA,aACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,aACA,YACA,QACA,QACA,cACA,UACA,WACA,cACA,SACA,WACA,OACA,SACA,OACA,SACA,WACA,QACA,QACA,UACA,aACA,SACA,WACA,MACA,QACA,YACA,UACA,OACA,UACA,OACA,WACA,OACA,QACA,UACA,QACA,OACA,SACA,WACA,SACA,OACA,UACA,SACA,cACA,YACA,UAGIC,EAAQ,CACZ,QACA,OACA,QACA,WACA,QACA,OACA,SACA,QACA,YACA,SACA,eACA,WACA,QACA,SACA,WACA,QACA,SACA,UACA,OACA,SACA,SACA,UACA,OACA,OACA,OACA,QACA,OACA,QACA,YACA,SACA,OACA,SACA,SACA,WACA,YACA,cACA,SACA,YACA,SACA,UACA,aACA,WACA,cACA,YACA,OACA,UACA,SACA,aACA,WACA,eACA,aACA,SACA,OACA,UAGK,SAASC,IACd,MAAMC,EAAWlzP,IACf,MAAMvM,EAAIuM,EAAIrF,KAAKy1B,MAAMz1B,KAAK6xD,SAAWxsD,EAAI3N,SAC7C,OAAOoB,EAAEi8N,OAAO,GAAGz1G,cAAgBxmH,EAAEuE,MAAM,IAG7C,gBAAUk7P,EAASH,GAAnB,YAAkCG,EAASH,GAA3C,YAA0DG,EAASF,I,uVClpB9D,SAASzgC,IACd,QAASjxM,IAAQkxM,iBAGZ,SAAS2gC,IACd,OAAO5gC,KAAwB/9N,SAASokB,SAASkjB,OAASxa,IAAQkxM,iBAG7D,SAAS1rL,EAAOlB,EAAOwtN,EAAarsN,GASzC,IAAIkpB,EACJ,GATKrqB,IAEDA,EADEutN,IACM,IAAIx6O,gBAAgBC,SAASC,QAAQliB,IAAI,UAEzCiiB,SAAS4vB,SAASluC,MAAM,KAAK,IAKrC64P,IACFljM,EAAM,IAAIjxB,IAAJ,YAAqBpmB,SAAS0d,MACpC25B,EAAIhxB,aAAaj/B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","file":"assets/js/hub-a6c90215e64baf4dbee3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t6: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"assets/js/\" + ({\"14\":\"vendors~pdfjsWorker\"}[chunkId]||chunkId) + \"-\" + {\"14\":\"cc10ff43502da9914f92\",\"18\":\"deb590a95f32ad55a327\",\"19\":\"9d314885b4be2546bd4d\",\"20\":\"51602cb7f065a8c1138b\",\"21\":\"6a9f00d0a5e7b80146b6\",\"22\":\"3abf1b2bcf31f38ae0ed\",\"23\":\"94819a85f75533f6e91c\",\"24\":\"1aa12389c4edd8cb52ac\",\"25\":\"6abcf658582e38411709\",\"26\":\"a0114c7e0a3079e69f56\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://assets.metaverseplus2.xyz/hubs/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1609,0,2,1,7]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// TODO: Reintroduce audio normalization\n// import { AudioNormalizer } from \"../utils/audio-normalizer\";\n\nexport const DISTANCE_MODEL_OPTIONS = [\"linear\", \"inverse\", \"exponential\"];\n\nexport const SourceType = Object.freeze({\n  MEDIA_VIDEO: 0,\n  AVATAR_AUDIO_SOURCE: 1,\n  SFX: 2,\n  AUDIO_TARGET: 3,\n  AUDIO_ZONE: 4\n});\n\nexport const AudioType = {\n  Stereo: \"stereo\",\n  PannerNode: \"pannernode\"\n};\n\nexport const DistanceModelType = {\n  Linear: \"linear\",\n  Inverse: \"inverse\",\n  Exponential: \"exponential\"\n};\n\nexport const AvatarAudioDefaults = Object.freeze({\n  audioType: AudioType.PannerNode,\n  distanceModel: DistanceModelType.Inverse,\n  rolloffFactor: 5,\n  refDistance: 5,\n  maxDistance: 10000,\n  coneInnerAngle: 180,\n  coneOuterAngle: 360,\n  coneOuterGain: 0.9,\n  gain: 1.0\n});\n\nexport const MediaAudioDefaults = Object.freeze({\n  audioType: AudioType.PannerNode,\n  distanceModel: DistanceModelType.Inverse,\n  rolloffFactor: 5,\n  refDistance: 5,\n  maxDistance: 10000,\n  coneInnerAngle: 360,\n  coneOuterAngle: 0,\n  coneOuterGain: 0.9,\n  gain: 0.5\n});\n\nexport const TargetAudioDefaults = Object.freeze({\n  audioType: AudioType.PannerNode,\n  distanceModel: DistanceModelType.Inverse,\n  rolloffFactor: 5,\n  refDistance: 8,\n  maxDistance: 10000,\n  coneInnerAngle: 170,\n  coneOuterAngle: 300,\n  coneOuterGain: 0.3,\n  gain: 1.0\n});\n\nexport const GAIN_TIME_CONST = 0.2;\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n\nexport function findComponentsInNearestAncestor(entity, componentName) {\n  const components = [];\n  while (entity) {\n    if (entity.components) {\n      for (const c in entity.components) {\n        if (entity.components[c].name === componentName) {\n          components.push(entity.components[c]);\n        }\n      }\n    }\n    if (components.length) {\n      return components;\n    }\n    entity = entity.parentNode;\n  }\n  return components;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal__modal__1Ursl\",\"header\":\"Modal__header__3mOig\",\"before-title\":\"Modal__before-title__1zICW\",\"beforeTitle\":\"Modal__before-title__1zICW\",\"after-title\":\"Modal__after-title__1cSnu\",\"afterTitle\":\"Modal__after-title__1cSnu\",\"content\":\"Modal__content__2Xoyi\",\"sm-fullscreen\":\"Modal__sm-fullscreen__3KER8\",\"smFullscreen\":\"Modal__sm-fullscreen__3KER8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-input-container\":\"ChatSidebar__chat-input-container__5hl7C\",\"chatInputContainer\":\"ChatSidebar__chat-input-container__5hl7C\",\"message-list\":\"ChatSidebar__message-list__3771x\",\"messageList\":\"ChatSidebar__message-list__3771x\",\"message-group\":\"ChatSidebar__message-group__2XAMr\",\"messageGroup\":\"ChatSidebar__message-group__2XAMr\",\"message-group-label\":\"ChatSidebar__message-group-label__gHMNV\",\"messageGroupLabel\":\"ChatSidebar__message-group-label__gHMNV\",\"message-group-messages\":\"ChatSidebar__message-group-messages__1vI-w\",\"messageGroupMessages\":\"ChatSidebar__message-group-messages__1vI-w\",\"message-bubble\":\"ChatSidebar__message-bubble__1T3tG\",\"messageBubble\":\"ChatSidebar__message-bubble__1T3tG\",\"sent\":\"ChatSidebar__sent__1nNfC\",\"emoji\":\"ChatSidebar__emoji__1c4DB\",\"media\":\"ChatSidebar__media__2r4Qs\",\"monospace\":\"ChatSidebar__monospace__2J8GU\",\"system-message\":\"ChatSidebar__system-message__2XsZ4\",\"systemMessage\":\"ChatSidebar__system-message__2XsZ4\",\"chat-input-icon\":\"ChatSidebar__chat-input-icon__2U7e_\",\"chatInputIcon\":\"ChatSidebar__chat-input-icon__2U7e_\",\"chat-input-warning\":\"ChatSidebar__chat-input-warning__2g3DW\",\"chatInputWarning\":\"ChatSidebar__chat-input-warning__2g3DW\",\"warning-border\":\"ChatSidebar__warning-border__UOmZx\",\"warningBorder\":\"ChatSidebar__warning-border__UOmZx\",\"warning-text-color\":\"ChatSidebar__warning-text-color__3flSA\",\"warningTextColor\":\"ChatSidebar__warning-text-color__3flSA\",\"chat-input-text-area-styles\":\"ChatSidebar__chat-input-text-area-styles__1UPBX\",\"chatInputTextAreaStyles\":\"ChatSidebar__chat-input-text-area-styles__1UPBX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"no-default-button-style\":\"hub__no-default-button-style__nC22i\",\"noDefaultButtonStyle\":\"hub__no-default-button-style__nC22i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"audio-debug-container\":\"AudioDebugPanel__audio-debug-container__3Py8H\",\"audioDebugContainer\":\"AudioDebugPanel__audio-debug-container__3Py8H\",\"audio-debug-row\":\"AudioDebugPanel__audio-debug-row__2FO2j\",\"audioDebugRow\":\"AudioDebugPanel__audio-debug-row__2FO2j\",\"prop-text\":\"AudioDebugPanel__prop-text__wY15J\",\"propText\":\"AudioDebugPanel__prop-text__wY15J\",\"value-text\":\"AudioDebugPanel__value-text__3GP95\",\"valueText\":\"AudioDebugPanel__value-text__3GP95\"};","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst tempMatrix4 = new THREE.Matrix4();\nconst EPSILON = 0.00000000001;\nexport function setMatrixWorld(object3D, m) {\n  if (!object3D.matrixIsModified) {\n    object3D.applyMatrix4(IDENTITY); // hack around our matrix optimizations\n  }\n  tempMatrix4.copy(object3D.matrixWorld);\n  object3D.matrixWorld.copy(m);\n  if (object3D.parent) {\n    object3D.parent.updateMatrices();\n    object3D.matrix = object3D.matrix\n      .copy(object3D.parent.matrixWorld)\n      .invert()\n      .multiply(object3D.matrixWorld);\n  } else {\n    object3D.matrix.copy(object3D.matrixWorld);\n  }\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n  if (tempMatrix4.near(object3D.matrixWorld, EPSILON)) {\n    object3D.matrixWorld.copy(tempMatrix4);\n  } else {\n    object3D.childrenNeedMatrixWorldUpdate = true;\n  }\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\n// Supports the following PropertyBinding path formats:\n// uuid.propertyName\n// uuid.propertyName[propertyIndex]\n// uuid.objectName[objectIndex].propertyName[propertyIndex]\n// Does not support property bindings that use object3D names or parent nodes\nfunction cloneKeyframeTrack(sourceKeyframeTrack, cloneUUIDLookup) {\n  const { nodeName: uuid, objectName, objectIndex, propertyName, propertyIndex } = THREE.PropertyBinding.parseTrackName(\n    sourceKeyframeTrack.name\n  );\n\n  let path = \"\";\n\n  if (uuid !== undefined) {\n    const clonedUUID = cloneUUIDLookup.get(uuid);\n\n    if (clonedUUID === undefined) {\n      console.warn(`Could not find KeyframeTrack target with uuid: \"${uuid}\"`);\n    }\n\n    path += clonedUUID;\n  }\n\n  if (objectName !== undefined) {\n    path += \".\" + objectName;\n  }\n\n  if (objectIndex !== undefined) {\n    path += \"[\" + objectIndex + \"]\";\n  }\n\n  if (propertyName !== undefined) {\n    path += \".\" + propertyName;\n  }\n\n  if (propertyIndex !== undefined) {\n    path += \"[\" + propertyIndex + \"]\";\n  }\n\n  const clonedKeyframeTrack = sourceKeyframeTrack.clone();\n  clonedKeyframeTrack.name = path;\n\n  return clonedKeyframeTrack;\n}\n\nfunction cloneAnimationClip(sourceAnimationClip, cloneUUIDLookup) {\n  const clonedTracks = sourceAnimationClip.tracks.map(keyframeTrack =>\n    cloneKeyframeTrack(keyframeTrack, cloneUUIDLookup)\n  );\n  return new THREE.AnimationClip(sourceAnimationClip.name, sourceAnimationClip.duration, clonedTracks);\n}\n\nexport function cloneObject3D(source, preserveUUIDs) {\n  const cloneLookup = new Map();\n  const cloneUUIDLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, (sourceNode, clonedNode) => {\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (preserveUUIDs) {\n      clonedNode.uuid = sourceNode.uuid;\n    }\n\n    cloneUUIDLookup.set(sourceNode.uuid, clonedNode.uuid);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (!clonedNode) {\n      return;\n    }\n\n    if (sourceNode.animations) {\n      clonedNode.animations = sourceNode.animations.map(animationClip =>\n        cloneAnimationClip(animationClip, cloneUUIDLookup)\n      );\n    }\n\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n\n    if ((clonedNode.isDirectionalLight || clonedNode.isSpotLight) && sourceNode.target) {\n      clonedNode.target = cloneLookup.get(sourceNode.target);\n    }\n\n    if (!sourceNode.isSkinnedMesh) return;\n\n    const sourceBones = sourceNode.skeleton.bones;\n\n    clonedNode.skeleton = sourceNode.skeleton.clone();\n\n    clonedNode.skeleton.bones = sourceBones.map(sourceBone => {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedNode.bind(clonedNode.skeleton, sourceNode.bindMatrix);\n  });\n\n  return clone;\n}\n\nexport function findNode(root, pred) {\n  let nodes = [root];\n  while (nodes.length) {\n    const node = nodes.shift();\n    if (pred(node)) return node;\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n  return null;\n}\n\nexport const interpolateAffine = (function() {\n  const mat4 = new THREE.Matrix4();\n  const end = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const start = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const interpolated = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  return function(startMat4, endMat4, progress, outMat4) {\n    start.quaternion.setFromRotationMatrix(mat4.extractRotation(startMat4));\n    end.quaternion.setFromRotationMatrix(mat4.extractRotation(endMat4));\n    interpolated.quaternion.slerpQuaternions(start.quaternion, end.quaternion, progress);\n    interpolated.position.lerpVectors(\n      start.position.setFromMatrixColumn(startMat4, 3),\n      end.position.setFromMatrixColumn(endMat4, 3),\n      progress\n    );\n    interpolated.scale.lerpVectors(\n      start.scale.setFromMatrixScale(startMat4),\n      end.scale.setFromMatrixScale(endMat4),\n      progress\n    );\n    return outMat4.compose(\n      interpolated.position,\n      interpolated.quaternion,\n      interpolated.scale\n    );\n  };\n})();\n\nexport const squareDistanceBetween = (function() {\n  const posA = new THREE.Vector3();\n  const posB = new THREE.Vector3();\n  return function(objA, objB) {\n    objA.updateMatrices();\n    objB.updateMatrices();\n    posA.setFromMatrixColumn(objA.matrixWorld, 3);\n    posB.setFromMatrixColumn(objB.matrixWorld, 3);\n    return posA.distanceToSquared(posB);\n  };\n})();\n\nexport function isAlmostUniformVector3(v, epsilonHalf = 0.005) {\n  return Math.abs(v.x - v.y) < epsilonHalf && Math.abs(v.x - v.z) < epsilonHalf;\n}\nexport function almostEqual(a, b, epsilon = 0.01) {\n  return Math.abs(a - b) < epsilon;\n}\n\nexport const affixToWorldUp = (function() {\n  const inRotationMat4 = new THREE.Matrix4();\n  const inForward = new THREE.Vector3();\n  const outForward = new THREE.Vector3();\n  const outSide = new THREE.Vector3();\n  const worldUp = new THREE.Vector3(); // Could be called \"outUp\"\n  const v = new THREE.Vector3();\n  const inMat4Copy = new THREE.Matrix4();\n  return function affixToWorldUp(inMat4, outMat4) {\n    inRotationMat4.identity().extractRotation(inMat4Copy.copy(inMat4));\n    inForward.setFromMatrixColumn(inRotationMat4, 2).multiplyScalar(-1);\n    outForward\n      .copy(inForward)\n      .sub(v.copy(inForward).projectOnVector(worldUp.set(0, 1, 0)))\n      .normalize();\n    outSide.crossVectors(outForward, worldUp);\n    outMat4.makeBasis(outSide, worldUp, outForward.multiplyScalar(-1));\n    outMat4.scale(v.setFromMatrixScale(inMat4Copy));\n    outMat4.setPosition(v.setFromMatrixColumn(inMat4Copy, 3));\n    return outMat4;\n  };\n})();\n\nexport const calculateCameraTransformForWaypoint = (function() {\n  const upAffixedCameraTransform = new THREE.Matrix4();\n  const upAffixedWaypointTransform = new THREE.Matrix4();\n  const detachFromWorldUp = new THREE.Matrix4();\n  return function calculateCameraTransformForWaypoint(cameraTransform, waypointTransform, outMat4) {\n    affixToWorldUp(cameraTransform, upAffixedCameraTransform);\n    detachFromWorldUp\n      .copy(upAffixedCameraTransform)\n      .invert()\n      .multiply(cameraTransform);\n    affixToWorldUp(waypointTransform, upAffixedWaypointTransform);\n    outMat4.copy(upAffixedWaypointTransform).multiply(detachFromWorldUp);\n  };\n})();\n\nexport const calculateViewingDistance = (function() {\n  return function calculateViewingDistance(fov, aspect, box, center, vrMode) {\n    const halfYExtents = Math.max(Math.abs(box.max.y - center.y), Math.abs(center.y - box.min.y));\n    const halfXExtents = Math.max(Math.abs(box.max.x - center.x), Math.abs(center.x - box.min.x));\n    const halfVertFOV = THREE.Math.degToRad(fov / 2);\n    const halfHorFOV = Math.atan(Math.tan(halfVertFOV) * aspect) * (vrMode ? 0.5 : 1);\n    const margin = 1.05;\n    const length1 = Math.abs((halfYExtents * margin) / Math.tan(halfVertFOV));\n    const length2 = Math.abs((halfXExtents * margin) / Math.tan(halfHorFOV));\n    const length3 = Math.abs(box.max.z - center.z) + Math.max(length1, length2);\n    const length = vrMode ? Math.max(0.25, length3) : length3;\n    return length || 1.25;\n  };\n})();\n\nexport const rotateInPlaceAroundWorldUp = (function() {\n  const inMat4Copy = new THREE.Matrix4();\n  const startRotation = new THREE.Matrix4();\n  const endRotation = new THREE.Matrix4();\n  const v = new THREE.Vector3();\n  return function rotateInPlaceAroundWorldUp(inMat4, theta, outMat4) {\n    inMat4Copy.copy(inMat4);\n    return outMat4\n      .copy(endRotation.makeRotationY(theta).multiply(startRotation.extractRotation(inMat4Copy)))\n      .scale(v.setFromMatrixScale(inMat4Copy))\n      .setPosition(v.setFromMatrixPosition(inMat4Copy));\n  };\n})();\n\nexport const childMatch = (function() {\n  const inverseParentWorld = new THREE.Matrix4();\n  const childRelativeToParent = new THREE.Matrix4();\n  const childInverse = new THREE.Matrix4();\n  const newParentMatrix = new THREE.Matrix4();\n  // transform the parent such that its child matches the target\n  return function childMatch(parent, child, target) {\n    parent.updateMatrices();\n    inverseParentWorld.copy(parent.matrixWorld).invert();\n    child.updateMatrices();\n    childRelativeToParent.multiplyMatrices(inverseParentWorld, child.matrixWorld);\n    childInverse.copy(childRelativeToParent).invert();\n    newParentMatrix.multiplyMatrices(target, childInverse);\n    setMatrixWorld(parent, newParentMatrix);\n  };\n})();\n\nexport function createPlaneBufferGeometry(width, height, widthSegments, heightSegments, flipY = true) {\n  const geometry = new THREE.PlaneBufferGeometry(width, height, widthSegments, heightSegments);\n  // Three.js seems to assume texture flipY is true for all its built in geometry\n  // but we turn this off on our texture loader since createImageBitmap in Firefox\n  // does not support flipping. Then we flip the uv for flipY = false texture.\n  if (flipY === false) {\n    const uv = geometry.getAttribute(\"uv\");\n    for (let i = 0; i < uv.count; i++) {\n      uv.setY(i, 1.0 - uv.getY(i));\n    }\n  }\n  return geometry;\n}\n\nimport { Layers } from \"../components/layers\";\n\n// This code is from three-vrm. We will likely be using that in the future and this inlined code can go away\nfunction excludeTriangles(triangles, bws, skinIndex, exclude) {\n  let count = 0;\n  if (bws != null && bws.length > 0) {\n    for (let i = 0; i < triangles.length; i += 3) {\n      const a = triangles[i];\n      const b = triangles[i + 1];\n      const c = triangles[i + 2];\n      const bw0 = bws[a];\n      const skin0 = skinIndex[a];\n\n      if (bw0[0] > 0 && exclude.includes(skin0[0])) continue;\n      if (bw0[1] > 0 && exclude.includes(skin0[1])) continue;\n      if (bw0[2] > 0 && exclude.includes(skin0[2])) continue;\n      if (bw0[3] > 0 && exclude.includes(skin0[3])) continue;\n\n      const bw1 = bws[b];\n      const skin1 = skinIndex[b];\n      if (bw1[0] > 0 && exclude.includes(skin1[0])) continue;\n      if (bw1[1] > 0 && exclude.includes(skin1[1])) continue;\n      if (bw1[2] > 0 && exclude.includes(skin1[2])) continue;\n      if (bw1[3] > 0 && exclude.includes(skin1[3])) continue;\n\n      const bw2 = bws[c];\n      const skin2 = skinIndex[c];\n      if (bw2[0] > 0 && exclude.includes(skin2[0])) continue;\n      if (bw2[1] > 0 && exclude.includes(skin2[1])) continue;\n      if (bw2[2] > 0 && exclude.includes(skin2[2])) continue;\n      if (bw2[3] > 0 && exclude.includes(skin2[3])) continue;\n\n      triangles[count++] = a;\n      triangles[count++] = b;\n      triangles[count++] = c;\n    }\n  }\n  return count;\n}\n\nfunction createErasedMesh(src, erasingBonesIndex) {\n  const dst = new THREE.SkinnedMesh(src.geometry.clone(), src.material);\n  dst.name = `${src.name}(headless)`;\n  dst.frustumCulled = src.frustumCulled;\n  dst.layers.set(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n\n  const geometry = dst.geometry;\n\n  const skinIndexAttr = geometry.getAttribute(\"skinIndex\").array;\n  const skinIndex = [];\n  for (let i = 0; i < skinIndexAttr.length; i += 4) {\n    skinIndex.push([skinIndexAttr[i], skinIndexAttr[i + 1], skinIndexAttr[i + 2], skinIndexAttr[i + 3]]);\n  }\n\n  const skinWeightAttr = geometry.getAttribute(\"skinWeight\").array;\n  const skinWeight = [];\n  for (let i = 0; i < skinWeightAttr.length; i += 4) {\n    skinWeight.push([skinWeightAttr[i], skinWeightAttr[i + 1], skinWeightAttr[i + 2], skinWeightAttr[i + 3]]);\n  }\n\n  const index = geometry.getIndex();\n  if (!index) {\n    throw new Error(\"The geometry doesn't have an index buffer\");\n  }\n  const oldTriangles = Array.from(index.array);\n\n  const count = excludeTriangles(oldTriangles, skinWeight, skinIndex, erasingBonesIndex);\n  const newTriangle = [];\n  for (let i = 0; i < count; i++) {\n    newTriangle[i] = oldTriangles[i];\n  }\n  geometry.setIndex(newTriangle);\n\n  if (src.onBeforeRender) {\n    dst.onBeforeRender = src.onBeforeRender;\n  }\n\n  dst.bind(new THREE.Skeleton(src.skeleton.bones, src.skeleton.boneInverses), new THREE.Matrix4());\n\n  return dst;\n}\n\nfunction isEraseTarget(bone) {\n  return bone.name === \"Head\" || (bone.parent && isEraseTarget(bone.parent));\n}\n\nexport function createHeadlessModelForSkinnedMesh(mesh) {\n  const eraseBoneIndexes = [];\n  mesh.skeleton.bones.forEach((bone, index) => {\n    if (isEraseTarget(bone)) eraseBoneIndexes.push(index);\n  });\n\n  if (!eraseBoneIndexes.length) {\n    mesh.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n    mesh.layers.enable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n    return;\n  }\n\n  mesh.layers.set(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n\n  return createErasedMesh(mesh, eraseBoneIndexes);\n}\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\nfunction detectTouchScreen() {\n  let hasTouchScreen = false;\n  if (\"maxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.maxTouchPoints > 0;\n  } else if (\"msMaxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\n  } else {\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\n      hasTouchScreen = !!mQ.matches;\n    } else if (\"orientation\" in window) {\n      hasTouchScreen = true; // deprecated, but good fallback\n    } else {\n      // Only as a last resort, fall back to user agent sniffing\n      const UA = navigator.userAgent;\n      hasTouchScreen =\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\n    }\n  }\n  return hasTouchScreen;\n}\n\nlet hackyMobileSafariTestValue = null;\n\n// HACK for https://github.com/mozilla/hubs/issues/1813\n// Touchscreen controls depend on iPad and iPhone detection,\n// which recently regressed. For UA matching \"Macintosh\", enable\n// touchscreen controls if there exists a touchscreen.\n// We cannot always enable touchscreen controls when a touchscreen\n// is present until we fix conflicts between simultaneous mouse\n// and touchscreen interactions.\nexport function hackyMobileSafariTest() {\n  if (hackyMobileSafariTestValue === null) {\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\n  }\n\n  return hackyMobileSafariTestValue;\n  // e.g. Match\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\n  // but not\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\n}\n","// Brief overview of client authorization can be found in the wiki:\n// https://github.com/mozilla/hubs/wiki/Hubs-authorization\nexport function showHoverEffect(el) {\n  const isFrozen = el.sceneEl.is(\"frozen\");\n  const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n  const isSpawner = !!el.components[\"super-spawner\"];\n  const isEmojiSpawner = isSpawner && el.components[\"super-spawner\"].data.template === \"#interactable-emoji\";\n  const isEmoji = !!el.components.emoji;\n  const canMove =\n    (isEmoji || isEmojiSpawner\n      ? window.APP.hubChannel.can(\"spawn_emoji\")\n      : window.APP.hubChannel.can(\"spawn_and_move_media\")) &&\n    (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n  return (isSpawner || !isPinned || isFrozen) && canMove;\n}\n\nexport function canMove(entity) {\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const networkedTemplate = entity && entity.components.networked && entity.components.networked.data.template;\n  const isCamera = networkedTemplate === \"#interactable-camera\";\n  const isPen = networkedTemplate === \"#interactable-pen\";\n  const spawnerTemplate =\n    entity && entity.components[\"super-spawner\"] && entity.components[\"super-spawner\"].data.template;\n  const isEmojiSpawner = spawnerTemplate === \"#interactable-emoji\";\n  const isEmoji = !!entity.components.emoji;\n  const isHoldableButton = entity.components.tags && entity.components.tags.data.holdableButton;\n  return (\n    isHoldableButton ||\n    ((isEmoji || isEmojiSpawner\n      ? window.APP.hubChannel.can(\"spawn_emoji\")\n      : window.APP.hubChannel.can(\"spawn_and_move_media\")) &&\n      (!isPinned || window.APP.hubChannel.can(\"pin_objects\")) &&\n      (!isCamera || window.APP.hubChannel.can(\"spawn_camera\")) &&\n      (!isPen || window.APP.hubChannel.can(\"spawn_drawing\")))\n  );\n}\n\nfunction indexForComponent(component, schema) {\n  const fullComponent = typeof component === \"string\";\n  const componentName = fullComponent ? component : component.component;\n\n  if (fullComponent) {\n    return schema.components.findIndex(schemaComponent => schemaComponent === componentName);\n  } else {\n    return schema.components.findIndex(\n      schemaComponent => schemaComponent.component === componentName && schemaComponent.property === component.property\n    );\n  }\n}\n\nlet nonAuthorizedSchemas = null;\nfunction initializeNonAuthorizedSchemas() {\n  /*\n  Takes the NAF schemas defined in network-schemas.js and produces a data structure of template name to non-authorized\n  component indices:\n  {\n    \"#interactable-media\": [\"4\", \"5\", \"6\"]\n  }\n  */\n  nonAuthorizedSchemas = {};\n  const { schemaDict } = NAF.schemas;\n  for (const template in schemaDict) {\n    if (!schemaDict.hasOwnProperty(template)) continue;\n    const schema = schemaDict[template];\n    nonAuthorizedSchemas[template] = (schema.nonAuthorizedComponents || [])\n      .map(nonAuthorizedComponent => indexForComponent(nonAuthorizedComponent, schema))\n      .map(index => index.toString());\n  }\n}\n\nfunction sanitizeMessageData(template, data) {\n  if (nonAuthorizedSchemas === null) {\n    initializeNonAuthorizedSchemas();\n  }\n  const nonAuthorizedIndices = nonAuthorizedSchemas[template];\n  for (const index in data.components) {\n    if (!data.components.hasOwnProperty(index)) continue;\n    if (!nonAuthorizedIndices.includes(index)) {\n      data.components[index] = null;\n    }\n  }\n  return data;\n}\n\nfunction authorizeEntityManipulation(entityMetadata, sender, senderPermissions) {\n  const { template, creator, isPinned } = entityMetadata;\n  const isCreator = sender === creator;\n\n  if (template.endsWith(\"-waypoint-avatar\") || template.endsWith(\"-media-frame\")) {\n    return true;\n  } else if (template.endsWith(\"-avatar\")) {\n    return isCreator;\n  } else if (template.endsWith(\"-media\")) {\n    return (!isPinned || senderPermissions.pin_objects) && (isCreator || senderPermissions.spawn_and_move_media);\n  } else if (template.endsWith(\"-camera\")) {\n    return isCreator || senderPermissions.spawn_camera;\n  } else if (template.endsWith(\"-pen\") || template.endsWith(\"-drawing\")) {\n    return isCreator || senderPermissions.spawn_drawing;\n  } else if (template.endsWith(\"-emoji\")) {\n    return isCreator || senderPermissions.spawn_emoji;\n  } else {\n    return false;\n  }\n}\n\nfunction getPendingOrExistingEntityMetadata(networkId) {\n  const pendingData = NAF.connection.adapter.getPendingDataForNetworkId(networkId);\n\n  if (pendingData) {\n    if (pendingData.owner) {\n      // If owner is no longer present, give up.\n      const presenceState = window.APP.hubChannel.presence.state[pendingData.owner];\n      if (!presenceState) return;\n    }\n\n    const { template, creator } = pendingData;\n    const schema = NAF.schemas.schemaDict[template];\n    const pinnableComponent = pendingData.components[indexForComponent(\"pinnable\", schema)];\n    const isPinned = pinnableComponent && pinnableComponent.pinned;\n    return { template, creator, isPinned };\n  }\n\n  const entity = NAF.entities.getEntity(networkId);\n  if (!entity) return null;\n\n  const { template, creator } = entity.components.networked.data;\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  return { template, creator, isPinned };\n}\n\nfunction authorizeOrSanitizeMessageData(data, sender, senderPermissions) {\n  const entityMetadata = getPendingOrExistingEntityMetadata(data.networkId);\n  if (!entityMetadata) return false;\n\n  if (authorizeEntityManipulation(entityMetadata, sender, senderPermissions)) {\n    return true;\n  } else {\n    const { template } = entityMetadata;\n    sanitizeMessageData(template, data);\n    return true;\n  }\n}\n\n// If we receive a sync from a persistent object that we don't have an entity for yet, it must be a scene-owned object\n// (since we guarantee that pinned objects are loaded before connecting NAF).\n// Since we need to get metadata (the template id in particular) from the entity, we must stash these messages until\n// the scene has loaded.\n// Components which require this data must call applyPersistentSync after they are initialized\nconst persistentSyncs = {};\nfunction stashPersistentSync(message, entityData) {\n  if (!persistentSyncs[entityData.networkId]) {\n    persistentSyncs[entityData.networkId] = {\n      dataType: \"u\",\n      data: entityData,\n      clientId: message.clientId,\n      from_session_id: message.from_session_id\n    };\n  } else {\n    const currentData = persistentSyncs[entityData.networkId].data;\n    const currentComponents = currentData.components;\n    Object.assign(currentData, entityData);\n    currentData.components = Object.assign(currentComponents, entityData.components);\n  }\n}\n\nconst emptyObject = {};\nexport function authorizeOrSanitizeMessage(message) {\n  const { dataType, from_session_id } = message;\n\n  if (dataType === \"u\" && message.data.isFirstSync && !message.data.persistent) {\n    // The server has already authorized first sync messages that result in an instantiation.\n    return message;\n  }\n\n  const presenceState = window.APP.hubChannel.presence.state[from_session_id];\n\n  if (!presenceState) {\n    // We've received a manipulation message from a user that we don't have presence state for yet.\n    // Since we can't make a judgement about their permissions, we'll have to ignore the message.\n    return emptyObject;\n  }\n\n  const senderPermissions = presenceState.metas[0].permissions;\n\n  if (dataType === \"um\") {\n    let sanitizedAny = false;\n    let stashedAny = false;\n    for (const index in message.data.d) {\n      if (!message.data.d.hasOwnProperty(index)) continue;\n      const entityData = message.data.d[index];\n      if (entityData.persistent && !NAF.entities.getEntity(entityData.networkId)) {\n        stashPersistentSync(message, entityData);\n        message.data.d[index] = null;\n        stashedAny = true;\n      } else {\n        const authorizedOrSanitized = authorizeOrSanitizeMessageData(entityData, from_session_id, senderPermissions);\n        if (!authorizedOrSanitized) {\n          message.data.d[index] = null;\n          sanitizedAny = true;\n        }\n      }\n    }\n\n    if (sanitizedAny || stashedAny) {\n      message.data.d = message.data.d.filter(x => x != null);\n    }\n\n    return message;\n  } else if (dataType === \"u\") {\n    if (message.data.persistent && !NAF.entities.getEntity(message.data.networkId)) {\n      persistentSyncs[message.data.networkId] = message;\n      return emptyObject;\n    } else {\n      const authorizedOrSanitized = authorizeOrSanitizeMessageData(message.data, from_session_id, senderPermissions);\n      if (authorizedOrSanitized) {\n        return message;\n      } else {\n        return emptyObject;\n      }\n    }\n  } else if (dataType === \"r\") {\n    const entityMetadata = getPendingOrExistingEntityMetadata(message.data.networkId);\n    if (!entityMetadata) return emptyObject;\n    if (authorizeEntityManipulation(entityMetadata, from_session_id, senderPermissions)) {\n      return message;\n    } else {\n      return emptyObject;\n    }\n  } else {\n    // Fall through for other data types. Namely, \"drawing-<networkId>\" messages at the moment.\n    return message;\n  }\n}\n\nexport function applyPersistentSync(networkId) {\n  if (!persistentSyncs[networkId]) return;\n  NAF.connection.adapter.handleIncomingNAF(persistentSyncs[networkId]);\n  delete persistentSyncs[networkId];\n}\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\n// TODO: Remove this\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n\n    this.onMicStateChanged = () => {\n      this.updateMuteState();\n    };\n  },\n\n  play() {\n    APP.dialog.on(\"mic-state-changed\", this.onMicStateChanged);\n  },\n\n  pause() {\n    APP.dialog.off(\"mic-state-changed\", this.onMicStateChanged);\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = !APP.mediaDevicesManager.isMicEnabled;\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Creates a box around the element (assumed to be the camera's PoV) which can be used for fade-to-black.\n */\n\nconst FADE_DURATION_MS = 750;\n\nAFRAME.registerComponent(\"fader\", {\n  schema: {\n    direction: { type: \"string\", default: \"none\" } // \"in\", \"out\", or \"none\"\n  },\n\n  init() {\n    const mesh = new THREE.Mesh(\n      new THREE.BoxGeometry(),\n      new THREE.MeshBasicMaterial({ color: 0x0, side: THREE.BackSide, opacity: 0, transparent: true, fog: false })\n    );\n    mesh.scale.x = mesh.scale.y = 1;\n    mesh.scale.z = 0.15;\n    mesh.matrixNeedsUpdate = true;\n    this.el.object3DMap.camera.add(mesh);\n    this.mesh = mesh;\n  },\n\n  fadeOut() {\n    return this.beginTransition(\"out\");\n  },\n\n  fadeIn() {\n    return this.beginTransition(\"in\");\n  },\n\n  async beginTransition(direction) {\n    if (this._resolveFinish) {\n      throw new Error(\"Cannot fade while a fade is happening.\");\n    }\n\n    this.el.setAttribute(\"fader\", { direction });\n\n    return new Promise(res => {\n      if (this.mesh.material.opacity === (direction == \"in\" ? 0 : 1)) {\n        res();\n      } else {\n        this._resolveFinish = res;\n      }\n    });\n  },\n\n  tick(t, dt) {\n    const mat = this.mesh.material;\n    this.mesh.visible = this.data.direction === \"out\" || mat.opacity !== 0;\n    if (!this.mesh.visible) return;\n\n    if (this.data.direction === \"in\") {\n      mat.opacity = Math.max(0, mat.opacity - (1.0 / FADE_DURATION_MS) * Math.min(dt, 50));\n    } else if (this.data.direction === \"out\") {\n      mat.opacity = Math.min(1, mat.opacity + (1.0 / FADE_DURATION_MS) * Math.min(dt, 50));\n    }\n\n    if (mat.opacity === 0 || mat.opacity === 1) {\n      if (this.data.direction !== \"none\") {\n        if (this._resolveFinish) {\n          this._resolveFinish();\n          this._resolveFinish = null;\n        }\n      }\n\n      this.el.setAttribute(\"fader\", { direction: \"none\" });\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    disabledImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    disabled: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = true;\n      }\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = false;\n      }\n      this.updateButtonState();\n    };\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n    const disabled = this.data.disabled;\n\n    let image;\n    if (disabled) {\n      image = \"disabledImage\";\n    } else if (active) {\n      image = hovering ? \"activeHoverImage\" : \"activeImage\";\n    } else {\n      image = hovering ? \"hoverImage\" : \"image\";\n    }\n\n    if (this.el.components.sprite) {\n      if (this.data[image]) {\n        this.el.setAttribute(\"sprite\", \"name\", this.data[image]);\n      } else {\n        console.warn(`No ${image} image on me.`, this);\n      }\n    } else {\n      console.error(\"No sprite.\");\n    }\n\n    if (this.data.tooltip && hovering) {\n      const tooltipText =\n        (this.data.active ? this.data.activeTooltipText : this.data.tooltipText) + (disabled ? \" Disabled\" : \"\");\n      this.data.tooltip.querySelector(\"[text]\").setAttribute(\"text\", \"value\", tooltipText);\n    }\n  }\n});\n","/**\n * A button with text\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    // TODO: This is a bit of a hack to deal with position \"component\" not setting matrixNeedsUpdate. Come up with a better solution.\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.textEl = this.el.querySelector(\"[text]\");\n\n    if (this.el.getObject3D(\"mesh\")) {\n      this.el.components.slice9.plane.material.toneMapped = false;\n    } else {\n      this.el.addEventListener(\n        \"object3dset\",\n        () => {\n          this.el.components.slice9.plane.material.toneMapped = false;\n        },\n        { once: true }\n      );\n    }\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n\n    if (this.textEl) {\n      this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n    }\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  block(clientId) {\n    window.APP.hubChannel.hide(clientId);\n  }\n});\n","AFRAME.registerComponent(\"mute-button\", {\n  init() {\n    this.onClick = () => {\n      this.mute(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async mute(clientId) {\n    this.el.sceneEl.emit(\"action_mute_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"kick-button\", {\n  init() {\n    this.onClick = () => {\n      this.kick(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async kick(clientId) {\n    this.el.sceneEl.emit(\"action_kick_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"close-vr-notice-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"action_vr_notice_closed\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"leave-room-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"leave_room_requested\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"visible-if-permitted\", {\n  schema: {\n    type: \"string\"\n  },\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.updateVisibility();\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n  },\n  updateVisibility() {\n    this.el.object3D.visible = this.el.sceneEl.systems.permissions.canOrWillIfCreator(this.data);\n  },\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n  }\n});\n","AFRAME.registerComponent(\"visibility-on-content-types\", {\n  schema: {\n    contentTypes: { type: \"string\" }, // Space separate content types. Or partial type, like video/\n    contentSubtype: { type: \"string\" },\n    visible: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(el => {\n        this.networkedEl = el;\n        el.addEventListener(\"media_resolved\", ({ detail: { contentType } }) => this.updateVisibility(contentType));\n        this.updateVisibility();\n      })\n      .catch(() => {\n        // Non-networked, do not handle for now.\n      });\n  },\n\n  updateVisibility(contentType) {\n    const mediaLoader = this.networkedEl.components[\"media-loader\"];\n    const mediaImage = this.networkedEl.components[\"media-image\"];\n    const mediaVideo = this.networkedEl.components[\"media-video\"];\n    const mediaPdf = this.networkedEl.components[\"media-pdf\"];\n    const currentContentType =\n      contentType ||\n      (mediaVideo && mediaVideo.data.contentType) ||\n      (mediaImage && mediaImage.data.contentType) ||\n      (mediaPdf && mediaPdf.data.contentType);\n\n    let matchesType = !this.data.contentTypes;\n\n    if (this.data.contentTypes && currentContentType) {\n      for (const contentType of this.data.contentTypes.split(\" \")) {\n        const targetContentType = currentContentType.toLowerCase().split(\";\")[0];\n\n        if (\n          targetContentType === contentType ||\n          (contentType.endsWith(\"/\") && targetContentType.startsWith(contentType))\n        ) {\n          matchesType = true;\n          break;\n        }\n      }\n    }\n\n    const matchesSubtype =\n      !this.data.contentSubtype ||\n      (mediaLoader.data.contentSubtype && mediaLoader.data.contentSubtype === this.data.contentSubtype);\n    const matches = !!(matchesType && matchesSubtype);\n    this.el.object3D.visible = this.data.visible ? matches : !matches;\n  }\n});\n","AFRAME.registerComponent(\"hide-when-pinned-and-forbidden\", {\n  schema: {\n    // Hide regardless of being forbidden.\n    whenPinned: { type: \"boolean\" }\n  },\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (!this.targetEl) return;\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n\n    if (this.data.whenPinned) {\n      this.el.object3D.visible = !isPinned;\n    } else {\n      const pinnedAndForbidden = isPinned && !window.APP.hubChannel.canOrWillIfCreator(\"pin_objects\");\n      this.el.object3D.visible = !pinnedAndForbidden;\n    }\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","function isVisibleUpToRoot(node, root) {\n  let child = node;\n  while (child) {\n    if (child === root) return true;\n    if (!child.visible) return false;\n    child = child.parent;\n  }\n  console.error(`Root ${root} is not an ancestor of node ${node}`);\n  return false;\n}\n\n// HACK Troika Text GlyphGeometry doesn't play nicely with this code. Also it's infinitely thin.\n// We don't particularly care about it's bounds, but its important that they are non zero since\n// other code checks for that case. Fudge it for now with a very small static box.\nconst FAKE_TROIKA_BOUNDS = new THREE.Box3(\n  new THREE.Vector3(-0.001, -0.001, -0.001),\n  new THREE.Vector3(0.001, 0.001, 0.001)\n);\n\n// TODO This whole function is suspect for manually computing bounding boxes when geometry already has code for this\nexport const computeLocalBoundingBox = (function() {\n  const vertex = new THREE.Vector3();\n  const rootInverse = new THREE.Matrix4();\n  const toRootSpace = new THREE.Matrix4();\n  return function computeLocalBoundingBox(root, box, excludeInvisible) {\n    box.makeEmpty();\n    root.updateMatrices();\n    rootInverse.copy(root.matrixWorld).invert();\n    root.traverse(node => {\n      if (excludeInvisible && !isVisibleUpToRoot(node, root)) {\n        return;\n      }\n      node.updateMatrices();\n      toRootSpace.multiplyMatrices(rootInverse, node.matrixWorld);\n      if (node.geometry) {\n        if (node.isTroikaText) {\n          box.union(FAKE_TROIKA_BOUNDS);\n        } else if (node.geometry.isGeometry) {\n          for (let i = 0; i < node.geometry.vertices; i++) {\n            vertex.copy(node.geometry.vertices[i]).applyMatrix4(toRootSpace);\n            if (isNaN(vertex.x)) continue;\n            box.expandByPoint(vertex);\n          }\n        } else if (node.geometry.isBufferGeometry && node.geometry.attributes.position) {\n          const array = node.geometry.attributes.position.array;\n          const itemSize = node.geometry.attributes.position.itemSize;\n          for (let i = 0; i < node.geometry.attributes.position.count; i++) {\n            if (itemSize === 2) {\n              vertex.set(array[2 * i], array[2 * i + 1], 0);\n            } else if (itemSize === 3) {\n              vertex.fromBufferAttribute(node.geometry.attributes.position, i);\n            } else {\n              return;\n            }\n            vertex.applyMatrix4(toRootSpace);\n            if (isNaN(vertex.x)) continue;\n            box.expandByPoint(vertex);\n          }\n        }\n      }\n    });\n  };\n})();\n\n// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nexport const computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function computeObjectAABB(root, target, excludeInvisible) {\n    target.makeEmpty();\n    root.updateMatrices();\n    root.traverse(node => {\n      if (excludeInvisible && !isVisibleUpToRoot(node, root)) {\n        return;\n      }\n      node.updateMatrices();\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot, worldSpace) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box, false);\n\n  if (!box.isEmpty()) {\n    if (!worldSpace) {\n      entity.object3D.worldToLocal(box.min);\n      entity.object3D.worldToLocal(box.max);\n    }\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n\nexport function qsGet(param) {\n  return qs.get(param);\n}\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n\nexport const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return waitForEvent(\"DOMContentLoaded\", window);\n  }\n};\n\nexport const sleep = function(milliseconds) {\n  return new Promise(resolve => {\n    setTimeout(resolve, milliseconds);\n  });\n};\n","var map = {\n\t\"./de.json\": [\n\t\t237,\n\t\t18\n\t],\n\t\"./es.json\": [\n\t\t238,\n\t\t19\n\t],\n\t\"./fr.json\": [\n\t\t239,\n\t\t20\n\t],\n\t\"./ja.json\": [\n\t\t240,\n\t\t21\n\t],\n\t\"./ko.json\": [\n\t\t241,\n\t\t22\n\t],\n\t\"./pt.json\": [\n\t\t242,\n\t\t23\n\t],\n\t\"./ru.json\": [\n\t\t243,\n\t\t24\n\t],\n\t\"./zh-cn.json\": [\n\t\t244,\n\t\t25\n\t],\n\t\"./zh-tw.json\": [\n\t\t245,\n\t\t26\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 132;\nmodule.exports = webpackAsyncContext;","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._persist = this._persist.bind(this);\n    this._persistAndAnimate = this._persistAndAnimate.bind(this);\n\n    // Persist when media is refreshed since the version will be bumped.\n    this.el.addEventListener(\"media_refreshed\", this._persistAndAnimate);\n\n    this.el.addEventListener(\"owned-pager-page-changed\", this._persist);\n\n    this.el.addEventListener(\"owned-video-state-changed\", this._persistAndAnimate);\n  },\n\n  update() {\n    this._animate();\n  },\n\n  _persistAndAnimate() {\n    this._persist();\n    this._animate();\n  },\n\n  _persist() {\n    // Re-pin or unpin entity to reflect state changes.\n    window.APP.pinningHelper.setPinned(this.el, this.data.pinned);\n  },\n\n  _isMine() {\n    return this.el.components.networked?.data && NAF.utils.isMine(this.el);\n  },\n\n  _animate() {\n    const isAnimationRunning =\n      this.el.components[\"animation__pin-start\"]?.animationIsPlaying ||\n      this.el.components[\"animation__pin-end\"]?.animationIsPlaying;\n\n    if (this._isMine() && this.data.pinned && !isAnimationRunning) {\n      this.el.removeAttribute(\"animation__pin-start\");\n      this.el.removeAttribute(\"animation__pin-end\");\n      const currentScale = this.el.object3D.scale;\n\n      this.el.setAttribute(\"animation__pin-start\", {\n        property: \"scale\",\n        dur: 200,\n        from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        easing: \"easeOutElastic\"\n      });\n\n      this.el.setAttribute(\"animation__pin-end\", {\n        property: \"scale\",\n        delay: 200,\n        dur: 200,\n        from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        easing: \"easeOutElastic\"\n      });\n\n      if (this.el.components[\"body-helper\"] && !this.el.sceneEl.systems.interaction.isHeld(this.el)) {\n        this.el.setAttribute(\"body-helper\", { type: \"kinematic\" });\n      }\n    }\n  },\n\n  tick() {\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    const isMine = this._isMine();\n\n    let didFireThisFrame = false;\n    if (!isHeld && this.wasHeld && isMine) {\n      didFireThisFrame = true;\n      this._persistAndAnimate();\n    }\n\n    this.wasHeld = isHeld;\n\n    this.transformObjectSystem = this.transformObjectSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n    const transforming = this.transformObjectSystem.transforming && this.transformObjectSystem.target.el === this.el;\n    if (!didFireThisFrame && !transforming && this.wasTransforming && isMine) {\n      this._persistAndAnimate();\n    }\n    this.wasTransforming = transforming;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"drop-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"floaty-object\", { modifyGravityOnRelease: false });\n      this.targetEl.setAttribute(\"body-helper\", {\n        type: \"dynamic\",\n        gravity: { x: 0, y: -9.8, z: 0 },\n        angularDamping: 0.01,\n        linearDamping: 0.01,\n        linearSleepingThreshold: 1.6,\n        angularSleepingThreshold: 2.5,\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n      });\n\n      const physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n      if (this.targetEl.components[\"body-helper\"].uuid) {\n        physicsSystem.activateBody(this.targetEl.components[\"body-helper\"].uuid);\n      }\n\n      // Remove drop button after using it\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" },\n    withPermission: { type: \"string\" }\n  },\n\n  init() {\n    this.needsPermission = !!this.data.withPermission;\n    this.updatePermissions = () => {\n      if (!this.needsPermission || !window.APP.hubChannel) return;\n      this.hasPermission = window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    };\n  },\n\n  play() {\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updatePermissions);\n    this.updatePermissions();\n  },\n\n  pause() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updatePermissions);\n  },\n\n  tick() {\n    if (this.needsPermission && !this.hasPermission) return;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-remove\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    requireOwnership: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (!userinput.get(this.data.path)) return;\n    if (this.data.requireOwnership && this.networkedEl && !NAF.utils.isMine(this.networkedEl)) return;\n\n    this.el.parentNode.removeChild(this.el);\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","AFRAME.registerComponent(\"follow-in-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 },\n    angle: { type: \"number\", default: 45 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    if (!this.el.object3D.visible) return;\n    if (!this.data.target) return;\n\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Slow updating position if the element or any subelement is hovered.\n    let isHovered = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const hoveredEl = interaction.state.rightRemote.hovered || interaction.state.leftRemote.hovered;\n\n    if (hoveredEl) {\n      let el = hoveredEl;\n\n      while (el) {\n        if (this.el === el) {\n          isHovered = true;\n          break;\n        }\n\n        el = el.parentNode;\n      }\n    }\n\n    if (!isHovered) {\n      this._hoveredFrames = 0;\n    } else {\n      this._hoveredFrames += 1;\n    }\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(\n      -this.data.angle * THREE.Math.DEG2RAD,\n      target.rotation.y,\n      0,\n      this.snappedXFormWorld\n    );\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      // Slow down movement if hovering by dampening speed each frame.\n      const speed = this._hoveredFrames\n        ? this.data.speed * (1.0 / ((this._hoveredFrames + 5.0) * 0.2))\n        : this.data.speed;\n      const t = speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  reset() {\n    this.started = false;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"hover-menu\", {\n  multiple: true,\n  schema: {\n    template: { type: \"selector\" },\n    isFlat: { default: true },\n    dim: { default: true },\n    withPermission: { type: \"string\" }\n  },\n\n  async init() {\n    this.onFrozenStateChange = this.onFrozenStateChange.bind(this);\n    this.hovering = false;\n    await this.getHoverMenu();\n    this.applyHoverState();\n  },\n\n  getHoverMenu() {\n    if (this.menuPromise) return this.menuPromise;\n    return (this.menuPromise = new Promise(resolve => {\n      const menu = this.el.appendChild(document.importNode(this.data.template.content, true).children[0]);\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      setTimeout(() => {\n        this.menu = menu;\n\n        // HACK workaround for now due to position-at-box-shape-border having problems\n        // with nested entities, when using 'mirror' viewing.\n        //\n        // TODO Revisit once that component is removed/deprecated. If we disable repositioning,\n        // the menu will only appear on the front of the object (which is fine for our purposes)\n        const isMirroredMedia = this.el.parentEl.id === \"media-mirror-target\";\n        const enableRepositioning = !isMirroredMedia;\n\n        if (enableRepositioning) {\n          this.el.setAttribute(\"position-at-border\", {\n            target: \".hover-container\",\n            isFlat: this.data.isFlat,\n            animate: false,\n            scale: false\n          });\n        } else {\n          const hoverContainer = this.el.querySelector(\".hover-container\");\n          hoverContainer.object3D.position.z = 0.001;\n          hoverContainer.object3D.matrixNeedsUpdate = true;\n        }\n\n        resolve(this.menu);\n      });\n    }));\n  },\n\n  onFrozenStateChange(e) {\n    if (!e.detail === \"frozen\") return;\n    this.applyHoverState();\n  },\n\n  applyHoverState() {\n    if (!this.menu) return;\n    const allowed = !this.data.withPermission || window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    this.menu.object3D.visible = allowed && !this.el.sceneEl.is(\"frozen\") && this.hovering;\n    if (this.data.dim && this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) {\n      this.el.object3DMap.mesh.material.color.setScalar(this.menu.object3D.visible ? 0.5 : 1);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onFrozenStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onFrozenStateChange);\n  }\n});\n","AFRAME.registerComponent(\"disable-frustum-culling\", {\n  init() {\n    this.el.object3D.traverse(o => (o.frustumCulled = false));\n  }\n});\n","AFRAME.registerComponent(\"track-pose\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n\n  play() {\n    if (!this.didRegister) {\n      this.didRegister = true;\n      this.el.sceneEl.systems[\"hubs-systems\"].cursorPoseTrackingSystem.register(this.el.object3D, this.data.path);\n    }\n  },\n  remove() {\n    if (this.didRegister) {\n      this.el.sceneEl.systems[\"hubs-systems\"].cursorPoseTrackingSystem.unregister(this.el.object3D);\n    }\n  }\n});\n","AFRAME.registerComponent(\"replay\", {\n  init: function() {\n    this.playhead = 0;\n    this.poseIndex = 0;\n  },\n\n  tick: function(t, dt) {\n    let overflow = false;\n    while (!overflow && this.playhead >= this.poses[this.poseIndex].timestamp) {\n      this.el.setAttribute(\"position\", this.poses[this.poseIndex].position);\n      this.el.setAttribute(\"rotation\", this.poses[this.poseIndex].rotation);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.poseIndex += 1;\n      overflow = this.poseIndex === this.poses.length;\n    }\n\n    this.playhead += dt;\n\n    if (overflow) {\n      this.playhead = 0;\n      this.poseIndex = 0;\n    }\n  }\n});\n","AFRAME.registerComponent(\"visibility-by-path\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const shouldBeVisible = !!userinput.get(this.data.path);\n    if (this.el.object3D.visible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  }\n});\n","const SYNC_DURATION_MS = 5000;\n\n// HACK this is a hacky component that is used to mitigate the situation where a first sync is missed on critical\n// networked elements. (At the time of this writing, specifically just the user's avatar.) The motivation\n// is that there have been a variety of issues resulting in missed avatar instantiation messages, and\n// this is meant to ensure we recover from those in the cases where they occur.\n//\n// This component, when added, will re-send a isFirstSync message for the networked object is it attached to\n// every SYNC_DURATION_MS milliseconds.\nAFRAME.registerComponent(\"periodic-full-syncs\", {\n  init() {\n    this.lastSync = 0;\n  },\n\n  tick() {\n    const now = performance.now();\n\n    if (now - this.lastSync >= SYNC_DURATION_MS && this.el.components && this.el.components.networked) {\n      this.lastSync = now;\n\n      // Sends an undirected first sync message.\n      this.el.components.networked.syncAll(null, true);\n    }\n  }\n});\n","AFRAME.registerComponent(\"inspect-button\", {\n  tick() {\n    if (!this.initializedInTick) {\n      // initialize in tick so that parent's `tags` component has been initialized\n      this.initializedInTick = true;\n      this.el.object3D.addEventListener(\"holdable-button-down\", () => {\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.inspect(this.el, 1.5);\n      });\n      this.el.object3D.addEventListener(\"holdable-button-up\", () => {\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.uninspect();\n      });\n    }\n  }\n});\n","AFRAME.registerComponent(\"inspect-pivot-child-selector\", {\n  schema: {\n    selector: { type: \"string\" }\n  }\n});\n","AFRAME.registerComponent(\"optional-alternative-to-not-hide\", {});\n","AFRAME.registerComponent(\"avatar-inspect-collider\", {\n  play() {\n    this.el.setObject3D(\n      \"avatar-inspect-collider\",\n      new THREE.Mesh(\n        new THREE.BoxGeometry(0.3, 0.8, 0.3),\n        new THREE.MeshBasicMaterial({\n          depthWrite: false,\n          opacity: 0,\n          transparent: true,\n          color: 0x020202,\n          side: THREE.BackSide\n        })\n      )\n    );\n  }\n});\n","import configs from \"./configs\";\nimport { themes } from \"../react-components/styles/theme\";\nimport { getColorSchemePref } from \"./get-color-scheme-pref\";\n\nfunction getCurrentTheme() {\n  if (!Array.isArray(themes)) return;\n\n  const preferredThemeId = window.APP.store?.state?.preferences?.theme;\n  if (preferredThemeId) {\n    return themes.find(t => t.id === preferredThemeId);\n  } else {\n    return getColorSchemePref();\n  }\n}\n\nexport function getAppLogo() {\n  const theme = getCurrentTheme();\n  const shouldUseDarkLogo = !!(theme && theme.darkModeDefault);\n  return (shouldUseDarkLogo && configs.image(\"logo_dark\")) || configs.image(\"logo\");\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgHmcLogo(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 144,\n    height: 100,\n    viewBox: \"0 0 144 100\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M144 99.74H0V58.115h144v41.627zM41.88 87.245h-2.32V78.95c0-4.329-2.96-6.311-6.2-6.311-2.84 0-4.88 1.497-5.88 3.924-.88-2.67-3.28-3.924-5.88-3.924-2.52 0-4.4 1.173-5.48 3.115v-2.751H8.56v3.964h2.4v10.316h-2.4v3.964h10.96v-3.964h-3.44v-6.351c0-2.549 1-4.329 3.48-4.329 2.04 0 3.08 1.214 3.08 4.37v10.274h7.56v-3.964h-2.4v-6.351c0-2.549 1-4.329 3.48-4.329 2.04 0 3.08 1.214 3.08 4.37v10.234h7.52v-3.965zM53.801 72.64c-6.48 0-9.68 4.41-9.68 9.75 0 5.824 3.84 9.263 9.4 9.263 5.76 0 9.92-3.681 9.92-9.507 0-5.097-3.16-9.506-9.64-9.506zm-4.36 9.382c0 3.155 1.44 5.582 4.24 5.582 2.68 0 4.44-2.143 4.44-5.663 0-3.681-1.961-5.34-4.4-5.34-2.64 0-4.28 1.982-4.28 5.421zm30.156 2.43l4.08.404-1.12 6.392h-15.72l-.52-2.75 9.92-11.53h-5.64l-.8 2.832-3.72-.405.64-6.392h15.8l.4 2.751-10 11.53h5.84l.84-2.832zm13.283 6.797h-5.4v-6.553h5.4v6.553zm-5.4-11.692h5.4v-6.554h-5.4v6.554zm13.798 11.65l7.8-27.792h-5.08l-7.8 27.792h5.08zm18.282-27.792l-7.801 27.792h-5.08l7.8-27.792h5.081zm17.2 24.718c.24 0 .479-.04.76-.12l.12 2.79c-.961.527-2.12.85-3.24.85-2.401 0-3.72-1.416-3.96-3.64-1.04 1.86-2.88 3.64-5.801 3.64-2.6 0-5.559-1.416-5.559-5.219 0-4.49 4.279-5.542 8.4-5.542 1 0 2.04.04 2.96.162v-.607c0-1.86-.04-4.085-2.96-4.085-1.08 0-1.92.08-2.76.526l-.6 2.063-4.12-.445.64-4.208c3.16-1.294 4.76-1.658 7.72-1.658 3.88 0 7.16 2.022 7.16 6.19v7.888c0 1.051.4 1.415 1.24 1.415z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M126.48 87.891c-1.56 0-2.12-.93-2.12-2.104 0-1.982 1.6-2.508 3.44-2.508.84 0 1.76.122 2.6.243-.12 3.034-2.08 4.37-3.92 4.37z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M43.81 46.79H30.181V41.35h3.283V32.54c0-2.17-.383-3.721-1.149-4.657-.73-.935-1.788-1.402-3.174-1.402-1.606 0-2.864.505-3.776 1.515-.876 1.01-1.35 2.337-1.424 3.983v9.37h3.284v5.442H13.6v-5.442h3.284v-27.66h-3.284V8.191h10.343v17.168c1.642-2.918 4.288-4.376 7.936-4.376 2.335 0 4.36.71 6.075 2.132 1.715 1.42 2.572 3.628 2.572 6.62v11.614h3.284v5.442zm31.964 0H65.156v-3.87c-1.642 2.917-4.287 4.376-7.935 4.376-2.335 0-4.36-.711-6.075-2.132-1.715-1.422-2.572-3.629-2.572-6.62V26.93H45.29v-5.442h10.343v14.25c0 2.207.347 3.778 1.04 4.713.73.898 1.788 1.346 3.175 1.346 1.678 0 2.973-.56 3.885-1.683.949-1.122 1.423-2.562 1.423-4.32V26.93h-3.995v-5.442h11.055v19.86h3.558v5.443zm29.77-13.24c0 3.74-.967 6.976-2.901 9.706-1.897 2.73-4.706 4.096-8.428 4.096-3.758 0-6.403-1.459-7.936-4.377a34.365 34.365 0 01-.273 1.908 34.28 34.28 0 01-.274 1.908h-7.06c.255-1.31.475-2.619.657-3.928.182-1.309.274-2.6.274-3.87V13.688h-3.284V8.191h10.344v18.122c.656-1.46 1.641-2.712 2.955-3.76 1.35-1.047 3.138-1.57 5.363-1.57 3.102 0 5.637 1.103 7.608 3.31 1.97 2.207 2.955 5.292 2.955 9.257zm-7.334.617c0-2.431-.51-4.283-1.532-5.554-1.022-1.272-2.372-1.908-4.05-1.908-1.897 0-3.375.71-4.433 2.132-1.022 1.422-1.532 3.067-1.532 4.937v.617c0 2.058.492 3.797 1.477 5.218 1.022 1.384 2.463 2.076 4.324 2.076 1.605 0 2.955-.598 4.05-1.795 1.13-1.234 1.696-3.142 1.696-5.723zm32.278 4.881c0 2.805-1.095 4.9-3.284 6.284-2.152 1.346-4.962 2.02-8.427 2.02-1.789 0-3.595-.187-5.419-.561a21.349 21.349 0 01-5.144-1.908l.985-7.07 5.473.618v3.142c.656.224 1.35.374 2.079.449.73.037 1.278.056 1.643.056 1.349 0 2.517-.225 3.502-.673.985-.45 1.477-1.123 1.477-2.02 0-1.085-.748-1.795-2.243-2.132a102.972 102.972 0 00-5.2-1.01c-1.97-.337-3.703-1.029-5.199-2.076-1.496-1.047-2.244-2.824-2.244-5.33 0-3.104 1.168-5.18 3.503-6.227 2.372-1.085 4.816-1.627 7.334-1.627 3.284 0 6.366.766 9.248 2.3l.603 6.452-5.473.617-.438-3.535c-1.204-.41-2.499-.617-3.886-.617-.911 0-1.696.206-2.352.617-.622.375-.931.973-.931 1.796 0 1.085.711 1.814 2.134 2.188 1.459.337 3.137.673 5.035 1.01 1.934.336 3.613 1.028 5.035 2.076 1.46 1.01 2.189 2.73 2.189 5.161z\",\n    fill: props.color\n  }));\n}\n\nSvgHmcLogo.defaultProps = {\n  color: \"#000\",\n  title: \"Hmc Logo\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0htY0xvZ28tMmJmZjNkOTZmNjA5ODk5ODc2YjJiNTUzZDVlMTZiNDkuc3ZnIjs=\";\nexport { SvgHmcLogo as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport configs from \"../../utils/configs\";\nimport { getAppLogo } from \"../../utils/get-app-logo\";\nimport { ReactComponent as HmcLogo } from \"../icons/HmcLogo.svg\";\nimport { isHmc } from \"../../utils/isHmc\";\n\nexport function AppLogo({ className, forceConfigurableLogo }) {\n  if (isHmc() && !forceConfigurableLogo) {\n    return <HmcLogo className=\"hmc-logo\" />;\n  } else {\n    return <img className={className} alt={configs.translation(\"app-name\")} src={getAppLogo()} />;\n  }\n}\n\nAppLogo.propTypes = {\n  className: PropTypes.string,\n  forceConfigurableLogo: PropTypes.bool\n};\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Button.scss\";\nimport textInputStyles from \"./TextInput.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport const presets = [\n  \"transparent\",\n  \"basic\",\n  \"primary\",\n  \"accept\",\n  \"cancel\",\n  \"accent1\",\n  \"accent2\",\n  \"accent3\",\n  \"accent4\",\n  \"accent5\",\n  \"accent6\",\n  \"landing\",\n  \"signin\"\n];\n\nexport const Button = memo(\n  forwardRef(({ as, sm, lg, xl, thin, thick, preset, className, children, ...rest }, ref) => {\n    const ButtonComponent = as;\n    const buttonProps = ButtonComponent === \"button\" ? { type: \"button\" } : {};\n\n    return (\n      <ButtonComponent\n        className={classNames(\n          styles.button,\n          textInputStyles.button,\n          styles[preset],\n          {\n            [styles.sm]: sm,\n            [styles.lg]: lg,\n            [styles.xl]: xl,\n            [styles.thin]: thin,\n            [styles.thick]: thick\n          },\n          className\n        )}\n        {...buttonProps}\n        {...rest}\n        ref={ref}\n      >\n        {children}\n      </ButtonComponent>\n    );\n  })\n);\n\nButton.propTypes = {\n  as: PropTypes.elementType,\n  preset: PropTypes.oneOf(presets),\n  className: PropTypes.string,\n  children: PropTypes.node,\n  sm: PropTypes.bool\n};\n\nButton.defaultProps = {\n  as: \"button\",\n  preset: \"basic\"\n};\n\nexport function NextButton(props) {\n  return (\n    <Button preset=\"accept\" {...props}>\n      <FormattedMessage id=\"button.next\" defaultMessage=\"Next\" />\n    </Button>\n  );\n}\n\nexport function CancelButton(props) {\n  return (\n    <Button preset=\"cancel\" {...props}>\n      <FormattedMessage id=\"button.cancel\" defaultMessage=\"Cancel\" />\n    </Button>\n  );\n}\n\nexport function ContinueButton(props) {\n  return (\n    <Button preset=\"accept\" {...props}>\n      <FormattedMessage id=\"button.continue\" defaultMessage=\"Continue\" />\n    </Button>\n  );\n}\n\nexport function AcceptButton(props) {\n  return (\n    <Button preset=\"accept\" {...props}>\n      <FormattedMessage id=\"button.accept\" defaultMessage=\"Accept\" />\n    </Button>\n  );\n}\n\nexport function ApplyButton(props) {\n  return (\n    <Button preset=\"accept\" {...props}>\n      <FormattedMessage id=\"button.apply\" defaultMessage=\"Apply\" />\n    </Button>\n  );\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { childMatch, setMatrixWorld, calculateViewingDistance } from \"../utils/three-utils\";\nimport { paths } from \"./userinput/paths\";\nimport { getBox } from \"../utils/auto-box-collider\";\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { isTagged } from \"../components/tags\";\nimport { qsGet } from \"../utils/qs_truthy\";\nconst customFOV = qsGet(\"fov\");\nconst enableThirdPersonMode = qsTruthy(\"thirdPerson\");\nimport { Layers } from \"../components/layers\";\n\nfunction getInspectableInHierarchy(el) {\n  let inspectable = el;\n  while (inspectable) {\n    if (isTagged(inspectable, \"inspectable\")) {\n      return inspectable.object3D;\n    }\n    inspectable = inspectable.parentNode;\n  }\n  console.warn(\"could not find inspectable in hierarchy\");\n  return el.object3D;\n}\n\nfunction pivotFor(el) {\n  const selector =\n    el.components[\"inspect-pivot-child-selector\"] && el.components[\"inspect-pivot-child-selector\"].data.selector;\n  if (!selector) {\n    return el.object3D;\n  }\n\n  const child = el.querySelector(selector);\n  if (!child) {\n    console.error(`Failed to find pivot for selector: ${selector}`, el);\n    return el.object3D;\n  }\n  return child.object3D;\n}\n\nexport function getInspectableAndPivot(el) {\n  const inspectable = getInspectableInHierarchy(el);\n  const pivot = pivotFor(inspectable.el);\n  return { inspectable, pivot };\n}\n\nconst decompose = (function() {\n  const scale = new THREE.Vector3();\n  return function decompose(m, p, q) {\n    m.decompose(p, q, scale); //ignore scale, like we're dealing with a motor\n  };\n})();\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst orbit = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const rwq = new THREE.Quaternion();\n  const UP = new THREE.Vector3();\n  const RIGHT = new THREE.Vector3();\n  const dPos = new THREE.Vector3();\n  const targetPos = new THREE.Vector3();\n  const targetQuat = new THREE.Quaternion();\n  const targetScale = new THREE.Vector3(1, 1, 1);\n  const targetMatrix = new THREE.Matrix4();\n  const dhQ = new THREE.Quaternion();\n  const dvQ = new THREE.Quaternion();\n  return function orbit(pivot, rig, camera, dh, dv, dz, dt, panY) {\n    pivot.updateMatrices();\n    decompose(pivot.matrixWorld, owp, owq);\n\n    camera.updateMatrices();\n    decompose(camera.matrixWorld, cwp, cwq);\n\n    rig.getWorldQuaternion(rwq);\n\n    dhQ.setFromAxisAngle(UP.set(0, 1, 0).applyQuaternion(owq), 0.1 * dh * dt);\n    targetQuat.copy(cwq).premultiply(dhQ);\n    dPos.subVectors(cwp, owp);\n    const zoom = 1 - dz * dt;\n    const newLength = dPos.length() * zoom;\n    // TODO: These limits should be calculated based on the calculated view distance.\n    if (newLength > 0.1 && newLength < 100) {\n      dPos.multiplyScalar(zoom);\n    }\n\n    dvQ.setFromAxisAngle(RIGHT.set(1, 0, 0).applyQuaternion(targetQuat), 0.1 * dv * dt);\n    targetQuat.premultiply(dvQ);\n    targetPos.addVectors(owp, dPos.applyQuaternion(dhQ).applyQuaternion(dvQ)).add(\n      UP.set(0, 1, 0)\n        .multiplyScalar(panY * newLength)\n        .applyQuaternion(targetQuat)\n    );\n\n    targetMatrix.compose(\n      targetPos,\n      targetQuat,\n      targetScale\n    );\n\n    childMatch(rig, camera, targetMatrix);\n  };\n})();\n\nconst moveRigSoCameraLooksAtPivot = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const oForw = new THREE.Vector3();\n  const center = new THREE.Vector3();\n  const defaultBoxMax = new THREE.Vector3(0.3, 0.3, 0.3);\n  const target = new THREE.Object3D();\n  return function moveRigSoCameraLooksAtPivot(rig, camera, inspectable, pivot, distanceMod) {\n    if (!target.parent) {\n      // add dummy object to the scene, if this is the first time we call this function\n      AFRAME.scenes[0].object3D.add(target);\n      target.applyMatrix4(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    }\n\n    pivot.updateMatrices();\n    decompose(pivot.matrixWorld, owp, owq);\n    decompose(camera.matrixWorld, cwp, cwq);\n    rig.getWorldQuaternion(cwq);\n\n    const box = getBox(inspectable.el, inspectable.el.getObject3D(\"mesh\") || inspectable, true);\n    if (box.min.x === Infinity) {\n      // fix edgecase where inspectable object has no mesh / dimensions\n      box.min.subVectors(owp, defaultBoxMax);\n      box.max.addVectors(owp, defaultBoxMax);\n    }\n    box.getCenter(center);\n    const vrMode = inspectable.el.sceneEl.is(\"vr-mode\");\n    const dist =\n      calculateViewingDistance(\n        inspectable.el.sceneEl.camera.fov,\n        inspectable.el.sceneEl.camera.aspect,\n        box,\n        center,\n        vrMode\n      ) * distanceMod;\n    target.position.addVectors(\n      owp,\n      oForw\n        .set(0, 0, 1) //TODO: Suspicious that this is called oForw but (0,0,1) is backwards\n        .multiplyScalar(dist)\n        .applyQuaternion(owq)\n    );\n    target.quaternion.copy(owq);\n    target.matrixNeedsUpdate = true;\n    target.updateMatrices();\n    childMatch(rig, camera, target.matrixWorld);\n  };\n})();\n\nexport const CAMERA_MODE_FIRST_PERSON = 0;\nexport const CAMERA_MODE_THIRD_PERSON_NEAR = 1;\nexport const CAMERA_MODE_THIRD_PERSON_FAR = 2;\nexport const CAMERA_MODE_INSPECT = 3;\nexport const CAMERA_MODE_SCENE_PREVIEW = 4;\n\nconst NEXT_MODES = {\n  [CAMERA_MODE_FIRST_PERSON]: CAMERA_MODE_THIRD_PERSON_NEAR,\n  [CAMERA_MODE_THIRD_PERSON_NEAR]: CAMERA_MODE_THIRD_PERSON_FAR,\n  [CAMERA_MODE_THIRD_PERSON_FAR]: CAMERA_MODE_FIRST_PERSON\n};\n\nconst ensureLightsAreSeenByCamera = function(o) {\n  if (o.isLight) {\n    o.layers.enable(Layers.CAMERA_LAYER_INSPECT);\n  }\n};\n\nconst firstPersonOnlyLayer = new THREE.Layers();\nfirstPersonOnlyLayer.set(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\nconst enableInspectLayer = function(o) {\n  // Ignore first person only meshes\n  if (o.layers.test(firstPersonOnlyLayer)) return;\n\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n  const batch = batchManagerSystem.batchingEnabled && batchManagerSystem.batchManager.batchForMesh.get(o);\n  if (batch) {\n    batch.layers.enable(Layers.CAMERA_LAYER_INSPECT);\n    o.layers.enable(Layers.CAMERA_LAYER_BATCH_INSPECT);\n  } else {\n    o.layers.enable(Layers.CAMERA_LAYER_INSPECT);\n  }\n};\nconst disableInspectLayer = function(o) {\n  // Ignore first person only meshes\n  if (o.layers.test(firstPersonOnlyLayer)) return;\n\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n  const batch = batchManagerSystem.batchingEnabled && batchManagerSystem.batchManager.batchForMesh.get(o);\n  if (batch) {\n    batch.layers.disable(Layers.CAMERA_LAYER_INSPECT);\n    o.layers.disable(Layers.CAMERA_LAYER_BATCH_INSPECT);\n  } else {\n    o.layers.disable(Layers.CAMERA_LAYER_INSPECT);\n  }\n};\n\nfunction getAudio(o) {\n  let audio;\n  o.traverse(c => {\n    if (!audio && c.type === \"Audio\") {\n      audio = c;\n    }\n  });\n  return audio;\n}\n\nconst FALLOFF = 0.9;\nexport class CameraSystem {\n  constructor(camera, renderer) {\n    this.viewingCamera = camera;\n    this.lightsEnabled = localStorage.getItem(\"show-background-while-inspecting\") === \"true\";\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    this.mode = CAMERA_MODE_SCENE_PREVIEW;\n    this.snapshot = { audioTransform: new THREE.Matrix4(), matrixWorld: new THREE.Matrix4() };\n    this.audioSourceTargetTransform = new THREE.Matrix4();\n\n    if (customFOV) {\n      this.viewingCamera.fov = customFOV;\n    }\n    this.viewingCamera.layers.enable(Layers.CAMERA_LAYER_VIDEO_TEXTURE_TARGET);\n    this.viewingCamera.layers.enable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n\n    // xr.updateCamera gets called every render to copy the active cameras properties to the XR cameras. We also want to copy layers.\n    // TODO this logic should either be moved into THREE or removed when we ditch aframe camera system\n    const xrManager = renderer.xr;\n    const updateXRCamera = xrManager.updateCamera;\n    xrManager.updateCamera = function(camera) {\n      updateXRCamera(camera);\n      const xrCamera = xrManager.getCamera();\n      xrCamera.layers.mask = camera.layers.mask;\n      if (xrCamera.cameras.length) {\n        xrCamera.cameras[0].layers.set(Layers.CAMERA_LAYER_XR_LEFT_EYE);\n        xrCamera.cameras[0].layers.mask |= camera.layers.mask;\n        xrCamera.cameras[1].layers.set(Layers.CAMERA_LAYER_XR_RIGHT_EYE);\n        xrCamera.cameras[1].layers.mask |= camera.layers.mask;\n      }\n    };\n\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n      this.viewingRig = document.getElementById(\"viewing-rig\");\n\n      const bg = new THREE.Mesh(\n        new THREE.BoxGeometry(100, 100, 100),\n        new THREE.MeshBasicMaterial({ color: 0x020202, side: THREE.BackSide })\n      );\n      bg.layers.set(Layers.CAMERA_LAYER_INSPECT);\n      this.viewingRig.object3D.add(bg);\n    });\n  }\n\n  nextMode() {\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      this.uninspect();\n      return;\n    }\n\n    if (!enableThirdPersonMode) return;\n    if (this.mode === CAMERA_MODE_SCENE_PREVIEW) return;\n\n    this.mode = NEXT_MODES[this.mode] || 0;\n  }\n\n  inspect(el, distanceMod, fireChangeEvent = true) {\n    const { inspectable, pivot } = getInspectableAndPivot(el);\n\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      return;\n    }\n    const scene = AFRAME.scenes[0];\n    scene.object3D.traverse(ensureLightsAreSeenByCamera);\n    scene.classList.add(\"hand-cursor\");\n    scene.classList.remove(\"no-cursor\");\n    this.snapshot.mode = this.mode;\n    this.mode = CAMERA_MODE_INSPECT;\n    this.inspectable = inspectable;\n    this.pivot = pivot;\n\n    const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n    this.snapshot.mask = camera.layers.mask;\n    if (!this.lightsEnabled) {\n      this.hideEverythingButThisObject(inspectable);\n    } else {\n      camera.layers.disable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n      camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n    }\n\n    this.viewingCamera.updateMatrices();\n    this.snapshot.matrixWorld.copy(this.viewingRig.object3D.matrixWorld);\n\n    this.snapshot.audio = !(inspectable.el && isTagged(inspectable.el, \"preventAudioBoost\")) && getAudio(inspectable);\n    if (this.snapshot.audio) {\n      this.snapshot.audio.updateMatrices();\n      this.snapshot.audioTransform.copy(this.snapshot.audio.matrixWorld);\n      scene.audioListener.updateMatrices();\n      this.audioSourceTargetTransform.makeTranslation(0, 0, -0.25).premultiply(scene.audioListener.matrixWorld);\n      setMatrixWorld(this.snapshot.audio, this.audioSourceTargetTransform);\n    }\n\n    this.ensureListenerIsParentedCorrectly(scene);\n\n    moveRigSoCameraLooksAtPivot(\n      this.viewingRig.object3D,\n      this.viewingCamera,\n      this.inspectable,\n      this.pivot,\n      distanceMod || 1\n    );\n\n    if (fireChangeEvent) {\n      scene.emit(\"inspect-target-changed\");\n    }\n  }\n\n  uninspect(fireChangeEvent = true) {\n    if (this.mode !== CAMERA_MODE_INSPECT) return;\n    const scene = AFRAME.scenes[0];\n    if (scene.is(\"entered\")) {\n      scene.classList.remove(\"hand-cursor\");\n      scene.classList.add(\"no-cursor\");\n    }\n    this.showEverythingAsNormal();\n    this.inspectable = null;\n    this.pivot = null;\n    if (this.snapshot.audio) {\n      setMatrixWorld(this.snapshot.audio, this.snapshot.audioTransform);\n      this.snapshot.audio = null;\n    }\n\n    this.mode = this.snapshot.mode;\n    if (this.snapshot.mode === CAMERA_MODE_SCENE_PREVIEW) {\n      setMatrixWorld(this.viewingRig.object3D, this.snapshot.matrixWorld);\n    }\n    this.snapshot.mode = null;\n    this.tick(AFRAME.scenes[0]);\n\n    if (fireChangeEvent) {\n      scene.emit(\"inspect-target-changed\");\n    }\n  }\n\n  toggleLights() {\n    this.lightsEnabled = !this.lightsEnabled;\n    localStorage.setItem(\"show-background-while-inspecting\", this.lightsEnabled.toString());\n\n    if (this.mode === CAMERA_MODE_INSPECT && this.inspectable) {\n      if (this.lightsEnabled) {\n        this.showEverythingAsNormal();\n        const scene = AFRAME.scenes[0];\n        const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n        camera.layers.disable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n        camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n      } else {\n        this.hideEverythingButThisObject(this.inspectable);\n      }\n    }\n\n    AFRAME.scenes[0].emit(\"inspect-lights-changed\");\n  }\n\n  ensureListenerIsParentedCorrectly(scene) {\n    if (scene.audioListener && this.avatarPOV) {\n      if (this.mode === CAMERA_MODE_INSPECT && scene.audioListener.parent !== this.avatarPOV.object3D) {\n        this.avatarPOV.object3D.add(scene.audioListener);\n      } else if (\n        (this.mode === CAMERA_MODE_FIRST_PERSON ||\n          this.mode === CAMERA_MODE_THIRD_PERSON_NEAR ||\n          this.mode === CAMERA_MODE_THIRD_PERSON_FAR) &&\n        scene.audioListener.parent !== this.viewingCamera\n      ) {\n        this.viewingCamera.add(scene.audioListener);\n      }\n    }\n  }\n\n  hideEverythingButThisObject(o) {\n    this.notHiddenObject = o;\n    o.traverse(enableInspectLayer);\n\n    const scene = AFRAME.scenes[0];\n    const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n    camera.layers.set(Layers.CAMERA_LAYER_INSPECT);\n  }\n\n  showEverythingAsNormal() {\n    if (this.notHiddenObject) {\n      this.notHiddenObject.traverse(disableInspectLayer);\n      this.notHiddenObject = null;\n    }\n    const scene = AFRAME.scenes[0];\n    const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n    camera.layers.mask = this.snapshot.mask;\n  }\n\n  tick = (function() {\n    const translation = new THREE.Matrix4();\n    let uiRoot;\n    return function tick(scene, dt) {\n      this.viewingCamera.matrixNeedsUpdate = true;\n      this.viewingCamera.updateMatrix();\n      this.viewingCamera.updateMatrixWorld();\n\n      const entered = scene.is(\"entered\");\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      if (isGhost && this.mode !== CAMERA_MODE_FIRST_PERSON && this.mode !== CAMERA_MODE_INSPECT) {\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n        const position = new THREE.Vector3();\n        const quat = new THREE.Quaternion();\n        const scale = new THREE.Vector3();\n        this.viewingRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.decompose(position, quat, scale);\n        position.setFromMatrixPosition(this.viewingCamera.matrixWorld);\n        position.y = position.y - 1.6;\n        setMatrixWorld(\n          this.avatarRig.object3D,\n          new THREE.Matrix4().compose(\n            position,\n            quat,\n            scale\n          )\n        );\n        scene.systems[\"hubs-systems\"].characterController.fly = true;\n        this.avatarPOV.object3D.updateMatrices();\n        setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.matrixWorld);\n      }\n      if (!this.enteredScene && entered) {\n        this.enteredScene = true;\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n      }\n      this.avatarPOVRotator = this.avatarPOVRotator || this.avatarPOV.components[\"pitch-yaw-rotator\"];\n      this.viewingCameraRotator = this.viewingCameraRotator || this.viewingCamera.el.components[\"pitch-yaw-rotator\"];\n      this.avatarPOVRotator.on = true;\n      this.viewingCameraRotator.on = true;\n\n      this.userinput = this.userinput || scene.systems.userinput;\n      this.interaction = this.interaction || scene.systems.interaction;\n\n      if (this.userinput.get(paths.actions.startInspecting) && this.mode !== CAMERA_MODE_INSPECT) {\n        const hoverEl = this.interaction.state.rightRemote.hovered || this.interaction.state.leftRemote.hovered;\n\n        if (hoverEl) {\n          this.inspect(hoverEl, 1.5);\n        }\n      } else if (this.mode === CAMERA_MODE_INSPECT && this.userinput.get(paths.actions.stopInspecting)) {\n        scene.emit(\"uninspect\");\n        this.uninspect();\n      }\n\n      if (this.userinput.get(paths.actions.nextCameraMode)) {\n        this.nextMode();\n      }\n\n      this.ensureListenerIsParentedCorrectly(scene);\n\n      if (this.mode === CAMERA_MODE_FIRST_PERSON) {\n        this.viewingCameraRotator.on = false;\n        this.avatarRig.object3D.updateMatrices();\n        setMatrixWorld(this.viewingRig.object3D, this.avatarRig.object3D.matrixWorld);\n        if (scene.is(\"vr-mode\")) {\n          this.viewingCamera.updateMatrices();\n          setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.matrixWorld);\n        } else {\n          this.avatarPOV.object3D.updateMatrices();\n          setMatrixWorld(this.viewingCamera, this.avatarPOV.object3D.matrixWorld);\n        }\n      } else if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) {\n        if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR) {\n          translation.makeTranslation(0, 1, 3);\n        } else {\n          translation.makeTranslation(0, 2, 8);\n        }\n        this.avatarRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.copy(this.avatarRig.object3D.matrixWorld).multiply(translation);\n        setMatrixWorld(this.viewingRig.object3D, this.viewingRig.object3D.matrixWorld);\n        this.avatarPOV.object3D.quaternion.copy(this.viewingCamera.quaternion);\n        this.avatarPOV.object3D.matrixNeedsUpdate = true;\n      } else if (this.mode === CAMERA_MODE_INSPECT) {\n        this.avatarPOVRotator.on = false;\n        this.viewingCameraRotator.on = false;\n        const cameraDelta = this.userinput.get(\n          scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta\n        );\n\n        if (cameraDelta) {\n          // TODO: Move device specific tinkering to action sets\n          const horizontalDelta = (AFRAME.utils.device.isMobile() ? -0.6 : 1) * cameraDelta[0] || 0;\n          const verticalDelta = (AFRAME.utils.device.isMobile() ? -1.2 : 1) * cameraDelta[1] || 0;\n          this.horizontalDelta = (this.horizontalDelta + horizontalDelta) / 2;\n          this.verticalDelta = (this.verticalDelta + verticalDelta) / 2;\n        } else if (Math.abs(this.verticalDelta) > 0.0001 || Math.abs(this.horizontalDelta) > 0.0001) {\n          this.verticalDelta = FALLOFF * this.verticalDelta;\n          this.horizontalDelta = FALLOFF * this.horizontalDelta;\n        }\n\n        const inspectZoom = this.userinput.get(paths.actions.inspectZoom) * 0.001;\n        if (inspectZoom) {\n          this.inspectZoom = inspectZoom + (5 * this.inspectZoom) / 6;\n        } else if (Math.abs(this.inspectZoom) > 0.0001) {\n          this.inspectZoom = FALLOFF * this.inspectZoom;\n        }\n        const panY = this.userinput.get(paths.actions.inspectPanY) || 0;\n        if (this.userinput.get(paths.actions.resetInspectView)) {\n          moveRigSoCameraLooksAtPivot(this.viewingRig.object3D, this.viewingCamera, this.inspectable, this.pivot, 1);\n        }\n        if (this.snapshot.audio) {\n          setMatrixWorld(this.snapshot.audio, this.audioSourceTargetTransform);\n        }\n\n        if (\n          Math.abs(this.verticalDelta) > 0.001 ||\n          Math.abs(this.horizontalDelta) > 0.001 ||\n          Math.abs(this.inspectZoom) > 0.001 ||\n          Math.abs(panY) > 0.0001\n        ) {\n          orbit(\n            this.pivot,\n            this.viewingRig.object3D,\n            this.viewingCamera,\n            this.horizontalDelta,\n            this.verticalDelta,\n            this.inspectZoom,\n            dt,\n            panY\n          );\n        }\n      }\n    };\n  })();\n}\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { InputField } from \"./InputField\";\nimport { TextInput } from \"./TextInput\";\nimport { useId } from \"./useId\";\n\nexport const TextInputField = memo(\n  forwardRef(({ className, error, description, inputClassName, label, fullWidth, ...rest }, ref) => {\n    const id = useId();\n    const labelId = useId();\n\n    return (\n      <InputField\n        id={labelId}\n        htmlFor={id}\n        className={className}\n        label={label}\n        error={error}\n        description={description}\n        fullWidth={fullWidth}\n      >\n        <TextInput id={id} ref={ref} className={inputClassName} {...rest} />\n      </InputField>\n    );\n  })\n);\n\nTextInputField.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.node,\n  error: PropTypes.node,\n  description: PropTypes.node,\n  labelClassName: PropTypes.string,\n  inputClassName: PropTypes.string,\n  fullWidth: PropTypes.bool\n};\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","/* global AFRAME */\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: \"\" }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","AFRAME.registerSystem(\"permissions\", {\n  onPermissionsUpdated(handler) {\n    if (window.APP.hubChannel) {\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", handler);\n    } else {\n      window.addEventListener(\n        \"hub_channel_ready\",\n        () => window.APP.hubChannel.addEventListener(\"permissions_updated\", handler),\n        { once: true }\n      );\n    }\n  },\n  can(permissionName) {\n    return !!window.APP.hubChannel.can(permissionName);\n  },\n  canOrWillIfCreator(permissionName) {\n    return !!window.APP.hubChannel.canOrWillIfCreator(permissionName);\n  },\n  fetchPermissions() {\n    return window.APP.hubChannel.fetchPermissions();\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    if (window.APP.store.state.preferences.disableIdleDetection) return;\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// On high-DPI displays, measures the median FPS over time and reduces the\n// pixelRatio if the FPS drops below a threshold.\n\nconst LOW_FPS_THRESHOLD = 30;\nconst HIGH_FPS_THRESHOLD = 48;\nconst SKIP_SECONDS_AFTER_SCENE_VISIBLE = 30;\nconst MEASUREMENT_PERIOD_SECONDS = 5;\nconst MIN_PIXEL_RATIO = 1;\nconst CHANGE_RATE = 1;\nconst NUM_TIMES_DECREASED_BEFORE_CHANGING_MAX_PIXEL_RATIO = 3;\n\nAFRAME.registerSystem(\"auto-pixel-ratio\", {\n  init() {\n    // For now let's only enabled this on macs, since they tend to have retina displays.\n    // Note this test will also include iPads running iPadOS.\n    this.enabled = window.devicePixelRatio > 1 && /macintosh/i.test(navigator.userAgent);\n    this.deltas = [];\n    this.secondsSinceMeasurementStart = 0;\n    this.secondsSinceSceneVisible = 0;\n    this.maxPixelRatio = window.devicePixelRatio;\n    this.pixelRatioToTimesDecreased = {};\n\n    this.disabledByPref = window.APP.store.state.preferences.disableAutoPixelRatio;\n    this.onPreferenceChange = this.onPreferenceChange.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.onPreferenceChange);\n  },\n  onPreferenceChange() {\n    this.disabledByPref = window.APP.store.state.preferences.disableAutoPixelRatio;\n  },\n  tick(time, delta) {\n    if (!this.enabled || this.disabledByPref || this.maxPixelRatio === MIN_PIXEL_RATIO) return;\n    if (!this.el.is(\"visible\")) return;\n    if (this.secondsSinceSceneVisible < SKIP_SECONDS_AFTER_SCENE_VISIBLE) {\n      this.secondsSinceSceneVisible += delta / 1000;\n      return;\n    }\n    if (document.visibilityState === \"hidden\") return;\n\n    this.deltas.push(delta);\n    this.secondsSinceMeasurementStart += delta / 1000;\n\n    if (this.secondsSinceMeasurementStart > MEASUREMENT_PERIOD_SECONDS) {\n      this.deltas.sort();\n      const medianDelta = this.deltas[Math.floor(this.deltas.length / 2)];\n      const medianFps = 1000 / medianDelta;\n\n      const currentPixelRatio = this.el.renderer.getPixelRatio();\n\n      const shouldDecrease = currentPixelRatio > MIN_PIXEL_RATIO && medianFps < LOW_FPS_THRESHOLD;\n      const shouldIncrease = currentPixelRatio < this.maxPixelRatio && medianFps > HIGH_FPS_THRESHOLD;\n      if (shouldDecrease || shouldIncrease) {\n        const newPixelRatio = currentPixelRatio + (CHANGE_RATE * shouldIncrease ? 1 : -1);\n        console.info(\n          `Hubs auto-pixel-ratio: Median FPS (${medianFps.toFixed()}) was ${\n            shouldIncrease ? `above ${HIGH_FPS_THRESHOLD}` : `below ${LOW_FPS_THRESHOLD}`\n          }. ` + `Adjusting pixel ratio to ${newPixelRatio}.`\n        );\n        this.el.renderer.setPixelRatio(newPixelRatio);\n        if (shouldDecrease) {\n          const timesDecreased = (this.pixelRatioToTimesDecreased[currentPixelRatio] || 0) + 1;\n          this.pixelRatioToTimesDecreased[currentPixelRatio] = timesDecreased;\n          if (timesDecreased >= NUM_TIMES_DECREASED_BEFORE_CHANGING_MAX_PIXEL_RATIO) {\n            console.info(\n              `Hubs auto-pixel-ratio: Attempts to maintain high frame rate with pixel ratio ${currentPixelRatio} failed ${timesDecreased} times and will not be attempted again. Lowering maximum pixel ratio to ${newPixelRatio}.`\n            );\n            this.maxPixelRatio = newPixelRatio;\n          }\n        }\n      }\n\n      // Clear deltas so that we start measuring a new median.\n      this.deltas.length = 0;\n      this.secondsSinceMeasurementStart = 0;\n    }\n  }\n});\n","AFRAME.registerSystem(\"listed-media\", {\n  init: function() {\n    this.els = [];\n  },\n\n  register: function(el) {\n    this.els.push(el);\n    this.el.emit(\"listed_media_changed\");\n  },\n\n  unregister: function(el) {\n    this.els.splice(this.els.indexOf(el), 1);\n    this.el.emit(\"listed_media_changed\");\n  }\n});\n\nAFRAME.registerComponent(\"listed-media\", {\n  init: function() {\n    this.system.register(this.el);\n  },\n\n  remove: function() {\n    this.system.unregister(this.el);\n  }\n});\n","/* global AFRAME NAF performance */\nAFRAME.registerComponent(\"owned-object-limiter\", {\n  schema: {\n    counter: { type: \"selector\" }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n  },\n\n  tick() {\n    this._syncCounterRegistration();\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.counter.timestamps.set(this.el, performance.now());\n    }\n    this.wasHeld = isHeld;\n  },\n\n  remove() {\n    this.counter.deregister(this.el);\n  },\n\n  _syncCounterRegistration() {\n    if (!this.el.components[\"networked\"]) return;\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(this.el) && !isPinned) {\n      this.counter.register(this.el);\n    } else {\n      this.counter.deregister(this.el);\n    }\n  }\n});\n","/* global performance */\nAFRAME.registerComponent(\"owned-object-cleanup-timeout\", {\n  schema: {\n    ttl: { default: 0 }\n  },\n\n  init() {\n    this.timeout = performance.now() + this.data.ttl * 1000;\n  },\n\n  tick() {\n    if (!this.el.components[\"networked\"] || !NAF.utils.isMine(this.el)) {\n      return;\n    }\n\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n\n    if (isHeld) {\n      this.timeout = performance.now() + this.data.ttl * 1000;\n      return;\n    }\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (!isPinned && performance.now() >= this.timeout) {\n      this.el.parentNode.removeChild(this.el);\n    }\n  }\n});\n","/* global NAF */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"set-unowned-body-kinematic\", {\n  init() {\n    this.setBodyKinematic = this.setBodyKinematic.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"ownership-lost\", this.setBodyKinematic);\n\n    if (!this.didThisOnce) {\n      // Do this in play instead of init so that the ammo-body and networked components are done\n      this.didThisOnce = true;\n\n      if (!this.el.components.networked || !NAF.utils.isMine(this.el)) {\n        this.setBodyKinematic();\n      }\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"ownership-lost\", this.setBodyKinematic);\n  },\n  setBodyKinematic() {\n    this.el.setAttribute(\"body-helper\", {\n      type: \"kinematic\",\n      collisionFilterMask: COLLISION_LAYERS.UNOWNED_INTERACTABLE\n    });\n    if (this.el.components[\"floaty-object\"]) {\n      this.el.components[\"floaty-object\"].locked = true;\n    }\n  }\n});\n","import React, { memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./InputField.scss\";\n\nexport const InputField = memo(\n  ({ id, htmlFor, label, error, description, className, fullWidth, children, ...rest }) => {\n    return (\n      <div className={classNames(styles.inputField, { [styles.fullWidth]: fullWidth }, className)} {...rest}>\n        {label && (\n          <label id={id} className={styles.label} htmlFor={htmlFor}>\n            {label}\n          </label>\n        )}\n        {children}\n        {error ? (\n          <small className={styles.error}>{error}</small>\n        ) : description ? (\n          <small className={styles.info}>{description}</small>\n        ) : (\n          undefined\n        )}\n      </div>\n    );\n  }\n);\n\nInputField.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n  error: PropTypes.node,\n  description: PropTypes.node,\n  fullWidth: PropTypes.bool\n};\n","/* global AFRAME performance */\n/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 }\n  },\n\n  init() {\n    this.timestamps = new Map();\n    this.el.object3D.visible = false;\n  },\n\n  remove() {\n    this.timestamps.clear();\n  },\n\n  count() {\n    return this.timestamps.size;\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.timestamps.has(el)) return;\n\n    this.timestamps.set(el, performance.now());\n    if (this.timestamps.size > this.data.max) {\n      this._destroyOldest();\n    }\n  },\n\n  deregister(el) {\n    if (!this.timestamps.has(el)) return;\n    this.timestamps.delete(el);\n  },\n\n  _destroyOldest() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    let oldestEl = null,\n      minTs = Number.MAX_VALUE;\n    this.timestamps.forEach((ts, el) => {\n      if (ts < minTs && !interaction.isHeld(el) && NAF.utils.isMine(el)) {\n        oldestEl = el;\n        minTs = ts;\n      }\n    });\n    this._destroy(oldestEl);\n  },\n\n  _destroy(el) {\n    // Pause the entity so that it won't just re-register itself immediately in owned-object-limiter.\n    el.pause();\n    // networked-interactable's remove will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    if (el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  schema: {\n    penSpawner: { type: \"selector\" }\n  },\n\n  init() {\n    this.el.object3D.visible = false;\n    this.drawingToPen = new Map();\n    this.data.penSpawner.addEventListener(\"spawned-entity-created\", () => {\n      if (!this.drawingEl) {\n        this.createDrawing();\n      }\n    });\n  },\n\n  createDrawing() {\n    if (!this.createDrawingPromise) {\n      this.createDrawingPromise = new Promise(resolve => {\n        this.drawingEl = document.createElement(\"a-entity\");\n        this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n        this.el.sceneEl.appendChild(this.drawingEl);\n\n        const handNetworkedDrawingInit = e => {\n          if (e.detail.name === \"networked-drawing\") {\n            this.drawing = this.drawingEl.components[\"networked-drawing\"];\n            this.drawingEl.removeEventListener(\"componentinitialized\", handNetworkedDrawingInit);\n            resolve();\n          }\n        };\n\n        this.drawingEl.addEventListener(\"componentinitialized\", handNetworkedDrawingInit);\n      });\n    }\n    return this.createDrawingPromise;\n  },\n\n  destroyDrawing(networkedDrawing) {\n    if (this.drawing === networkedDrawing) {\n      this.drawingToPen.delete(this.drawing);\n      this.drawing = null;\n      this.drawingEl = null;\n      this.createDrawingPromise = null;\n      this.getDrawingPromise = null;\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (!this.getDrawingPromise) {\n      this.getDrawingPromise = new Promise((resolve, reject) => {\n        if (!this.drawingEl) {\n          this.createDrawing().then(() => {\n            this.drawingToPen.set(this.drawing, pen);\n            resolve(this.drawing);\n          });\n        } else if (\n          this.drawing &&\n          (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)\n        ) {\n          this.drawingToPen.set(this.drawing, pen);\n          resolve(this.drawing);\n        } else {\n          reject();\n        }\n      });\n    }\n    return this.getDrawingPromise;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel || !window.APP.hubChannel.presence)\n    return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n\nexport function getPlayerInfo(sessionId) {\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  return playerInfos.find(info => {\n    return info.playerSessionId === sessionId;\n  });\n}\n","import configs from \"./configs\";\nimport { AVAILABLE_LOCALES, FALLBACK_LOCALES } from \"../assets/locales/locale_config\";\n\n// These are set in the admin panel and are only included as fallbacks.\nconst defaultLocaleData = {\n  \"app-name\": \"App\",\n  \"editor-name\": \"Scene Editor\",\n  \"contact-email\": \"app@company.com\",\n  \"company-name\": \"Company\",\n  \"share-hashtag\": \"#app\",\n  \"app-description\": \"Gather share and collaborate together in a virtual, private and safe space\",\n  \"app-tagline\": \"Private social VR in your web browser\"\n};\n\nconst DEFAULT_LOCALE = \"en\";\nconst cachedMessages = new Map();\n\nlet _locale = DEFAULT_LOCALE;\nlet _localeData = defaultLocaleData;\n\nfunction findLocale(locale) {\n  const locales = (() => {\n    if (navigator.languages) {\n      return [...navigator.languages];\n    }\n    if (navigator.language) {\n      return [navigator.language];\n    }\n    if (navigator.userLanguage) {\n      return [navigator.userLanguage];\n    }\n  })();\n\n  if (locale && locale !== \"browser\") {\n    locales.unshift(locale);\n  }\n\n  for (let i = 0; i < locales.length; i++) {\n    const curLocale = locales[i];\n    if (AVAILABLE_LOCALES.hasOwnProperty(curLocale)) {\n      return curLocale;\n    }\n    if (FALLBACK_LOCALES.hasOwnProperty(curLocale)) {\n      FALLBACK_LOCALES.hasOwnProperty(curLocale);\n    }\n    // Also check the primary language subtag in case\n    // we do not have an entry for full tag\n    // See https://en.wikipedia.org/wiki/IETF_language_tag#Syntax_of_language_tags\n    // and https://github.com/mozilla/hubs/pull/3350/files#diff-70ef5717d3da03ef288e8d15c2fda32c5237d7f37074421496f22403e4475bf1R16\n    const primaryLanguageSubtag = curLocale.split(\"-\")[0].toLowerCase();\n    if (AVAILABLE_LOCALES.hasOwnProperty(primaryLanguageSubtag)) {\n      return primaryLanguageSubtag;\n    }\n    if (FALLBACK_LOCALES.hasOwnProperty(primaryLanguageSubtag)) {\n      return FALLBACK_LOCALES[primaryLanguageSubtag];\n    }\n  }\n  return DEFAULT_LOCALE;\n}\n\nexport function setLocale(locale) {\n  const resolvedLocale = findLocale(locale);\n\n  if (resolvedLocale === DEFAULT_LOCALE) {\n    _locale = resolvedLocale;\n    _localeData = defaultLocaleData;\n    window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n  } else {\n    if (cachedMessages.has(resolvedLocale)) {\n      _locale = resolvedLocale;\n      window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n    } else {\n      import(`../assets/locales/${resolvedLocale}.json`).then(({ default: localeData }) => {\n        _locale = resolvedLocale;\n        _localeData = localeData;\n        window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n      });\n    }\n  }\n}\n\nconst interval = window.setInterval(() => {\n  if (window.APP && window.APP.store) {\n    window.clearInterval(interval);\n    setLocale(window.APP.store.state.preferences.locale);\n    window.APP.store.addEventListener(\"statechanged\", () => {\n      setLocale(window.APP.store.state.preferences.locale);\n    });\n  }\n}, 100);\n\nexport const getLocale = () => {\n  return _locale;\n};\n\nexport const getMessage = key => {\n  return _localeData[key];\n};\n\n// TODO: This should be removed, lets not inject app config data up front but rather via variables so that defaultMessage works properly.\nexport const getMessages = () => {\n  if (cachedMessages.has(_locale)) {\n    return cachedMessages.get(_locale);\n  }\n\n  // Swap in translations specified via the admin panel\n  if (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[_locale]) {\n    const configTranslations = configs.APP_CONFIG.translations[_locale];\n    for (const messageKey in configTranslations) {\n      if (!configTranslations.hasOwnProperty(messageKey)) continue;\n      if (!configTranslations[messageKey]) continue;\n      _localeData[messageKey] = configTranslations[messageKey];\n    }\n  }\n\n  const entries = [];\n  for (const key in _localeData) {\n    if (!_localeData.hasOwnProperty(key)) continue;\n    entries.push([key, _localeData[key]]);\n  }\n\n  const messages = entries\n    .map(([key, message]) => [\n      key,\n      // Replace nested message keys (e.g. %app-name%) with their messages.\n      message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _localeData[subkey])\n    ])\n    .reduce((acc, entry) => {\n      acc[entry[0]] = entry[1];\n      return acc;\n    }, {});\n\n  cachedMessages.set(_locale, messages);\n  return messages;\n};\n","import configs from \"./configs\";\nexport function getCurrentHubId() {\n  const qs = new URLSearchParams(location.search);\n  const defaultRoomId = configs.feature(\"default_room_id\");\n\n  return (\n    qs.get(\"hub_id\") ||\n    (document.location.pathname === \"/\" && defaultRoomId\n      ? defaultRoomId\n      : document.location.pathname.substring(1).split(\"/\")[0])\n  );\n}\n\nexport function updateVRHudPresenceCount({ presence }) {\n  const occupantCount = Object.getOwnPropertyNames(presence.state).length;\n  const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n  vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n}\nexport function updateSceneCopresentState(presence, scene) {\n  const occupantCount = Object.getOwnPropertyNames(presence.state).length;\n  if (occupantCount > 1) {\n    scene.addState(\"copresent\");\n  } else {\n    scene.removeState(\"copresent\");\n  }\n}\n\nexport function createHubChannelParams({\n  permsToken,\n  profile,\n  pushSubscriptionEndpoint,\n  isMobile,\n  isMobileVR,\n  isEmbed,\n  hubInviteId,\n  authToken\n}) {\n  return {\n    profile,\n    push_subscription_endpoint: pushSubscriptionEndpoint,\n    auth_token: authToken || null,\n    perms_token: permsToken || null,\n    context: {\n      mobile: isMobile || isMobileVR,\n      embed: isEmbed,\n      hmd: isMobileVR\n    },\n    hub_invite_id: hubInviteId\n  };\n}\n","import isMobile from \"./is-mobile\";\n\n/**\n * Checks if browser is mobile and not stand-alone dedicated vr device.\n * @return {Boolean} True if mobile browser detected.\n */\nAFRAME.utils.device.isMobile = isMobile;\n","export function transportForChannel(channel, reliable = true) {\n  return (clientId, dataType, data) => {\n    const payload = { dataType, data };\n\n    if (clientId) {\n      payload.clientId = clientId;\n    }\n\n    const isOpen = channel.socket.connectionState() === \"open\";\n\n    if (isOpen || reliable) {\n      const hasFirstSync =\n        payload.dataType === \"um\" ? payload.data.d.find(r => r.isFirstSync) : payload.data.isFirstSync;\n\n      if (hasFirstSync) {\n        if (isOpen) {\n          channel.push(\"naf\", payload);\n        } else {\n          // Memory is re-used, so make a copy\n          channel.push(\"naf\", AFRAME.utils.clone(payload));\n        }\n      } else {\n        // Optimization: Strip isFirstSync and send payload as a string to reduce server parsing.\n        // The server will not parse messages without isFirstSync keys when sent to the nafr event.\n        //\n        // The client must assume any payload that does not have a isFirstSync key is not a first sync.\n        const nafrPayload = AFRAME.utils.clone(payload);\n        if (nafrPayload.dataType === \"um\") {\n          for (let i = 0; i < nafrPayload.data.d.length; i++) {\n            delete nafrPayload.data.d[i].isFirstSync;\n          }\n        } else {\n          delete nafrPayload.data.isFirstSync;\n        }\n\n        channel.push(\"nafr\", { naf: JSON.stringify(nafrPayload) });\n      }\n    }\n  };\n}\n","import { transportForChannel } from \"./transport-for-channel\";\nimport { authorizeOrSanitizeMessage } from \"./utils/permissions-utils\";\n\n// TODO: Use the websocket connection, not HEAD requests\nconst getTimeOffsetToServer = async () => {\n  const precision = 1000;\n  const clientSentTime = Date.now();\n  const serverReceivedTime =\n    new Date(\n      (await fetch(document.location.href, {\n        method: \"HEAD\",\n        cache: \"no-cache\"\n      })).headers.get(\"Date\")\n    ).getTime() +\n    precision / 2;\n  const clientReceivedTime = Date.now();\n  const serverTime = serverReceivedTime + (clientReceivedTime - clientSentTime) / 2;\n  const offset = serverTime - clientReceivedTime;\n  return offset;\n};\n\nconst getAverageTimeOffset = (() => {\n  let average = 0;\n  const numOffsetsToGather = 10;\n  const offsets = [];\n  let n = 0;\n\n  const update = async () => {\n    offsets[n % numOffsetsToGather] = await getTimeOffsetToServer();\n    n = n + 1;\n    average = offsets.reduce((acc, offset) => (acc += offset), 0) / offsets.length;\n    if (offsets.length == numOffsetsToGather) {\n      setTimeout(update, 5 * 60 * 1000);\n    } else {\n      update();\n    }\n  };\n\n  update();\n\n  return () => {\n    return average;\n  };\n})();\n\nexport default class PhoenixAdapter {\n  constructor() {\n    this.refs = new Map();\n    // TODO: Frozen messages can be handled outside this class.\n    this.frozenUpdates = new Map();\n    this._blockedClients = new Map();\n  }\n  setServerUrl() {}\n  setApp() {}\n  setRoom() {}\n  setWebRtcOptions() {}\n  setServerConnectListeners(nafConnectSuccess, nafConnectFailed) {\n    this.nafConnectSuccess = nafConnectSuccess;\n    this.nafConnectFailed = nafConnectFailed;\n  }\n  setRoomOccupantListener() {}\n  setDataChannelListeners(nafOccupantJoined, nafOccupantLeave, nafMessageReceived) {\n    this.nafOccupantJoined = nafOccupantJoined;\n    this.nafOccupantLeave = nafOccupantLeave;\n    this.nafMessageReceived = nafMessageReceived;\n  }\n  async connect() {\n    this.refs.set(\"naf\", this.hubChannel.channel.on(\"naf\", this.handleIncomingNAF));\n    this.refs.set(\"nafr\", this.hubChannel.channel.on(\"nafr\", this.handleIncomingNAFR));\n\n    this.nafConnectSuccess(this.session_id);\n    this.reliableTransport = transportForChannel(this.hubChannel.channel, true);\n    this.unreliableTransport = transportForChannel(this.hubChannel.channel, false);\n\n    this.hubChannel.presence.list(key => key).forEach(this.nafOccupantJoined);\n    this.refs.set(\"hub:join\", this.events.on(`hub:join`, ({ key }) => this.nafOccupantJoined(key)));\n    this.refs.set(\"hub:leave\", this.events.on(`hub:leave`, ({ key }) => this.nafOccupantLeave(key)));\n  }\n  shouldStartConnectionTo() {}\n  startStreamConnection() {}\n  closeStreamConnection() {}\n  getConnectStatus() {}\n\n  getMediaStream() {\n    return Promise.reject(\"getMediaStream not implemented in phoenix-adapter\");\n  }\n\n  getServerTime() {\n    return Date.now() + getAverageTimeOffset();\n  }\n\n  sendData(clientId, dataType, data) {\n    this.unreliableTransport(clientId, dataType, data);\n  }\n  sendDataGuaranteed(clientId, dataType, data) {\n    this.reliableTransport(clientId, dataType, data);\n  }\n  broadcastData(dataType, data) {\n    this.unreliableTransport(undefined, dataType, data);\n  }\n  broadcastDataGuaranteed(dataType, data) {\n    this.reliableTransport(undefined, dataType, data);\n  }\n\n  disconnect() {\n    this.hubChannel.presence.list(key => key).forEach(this.nafOccupantLeave);\n    this.hubChannel.channel.off(\"naf\", this.refs.get(\"naf\"));\n    this.hubChannel.channel.off(\"nafr\", this.refs.get(\"nafr\"));\n    this.events.off(\"hub:join\", this.refs.get(\"hub:join\"));\n    this.events.off(\"hub:leave\", this.refs.get(\"hub:leave\"));\n    this.refs.delete(\"naf\");\n    this.refs.delete(\"nafr\");\n    this.refs.delete(\"hub:join\");\n    this.refs.delete(\"hub:leave\");\n  }\n\n  toggleFreeze() {\n    if (this.frozen) {\n      this.unfreeze();\n    } else {\n      this.freeze();\n    }\n  }\n\n  freeze() {\n    this.frozen = true;\n  }\n\n  unfreeze() {\n    this.frozen = false;\n    this.flushPendingUpdates();\n  }\n\n  flushPendingUpdates() {\n    for (const [networkId, message] of this.frozenUpdates) {\n      const data = this.getPendingData(networkId, message);\n      if (!data) continue;\n\n      // Override the data type on \"um\" messages types, since we extract entity updates from \"um\" messages into\n      // individual frozenUpdates in storeSingleMessage.\n      const dataType = message.dataType === \"um\" ? \"u\" : message.dataType;\n\n      this.nafMessageReceived(null, dataType, data, message.source);\n    }\n    this.frozenUpdates.clear();\n  }\n\n  getPendingData(networkId, message) {\n    if (!message) return null;\n\n    const data = message.dataType === \"um\" ? this.dataForUpdateMultiMessage(networkId, message) : message.data;\n\n    // Ignore messages from users that we may have blocked while frozen.\n    if (data.owner && this._blockedClients.has(data.owner)) return null;\n\n    return data;\n  }\n\n  // Used externally\n  getPendingDataForNetworkId(networkId) {\n    return this.getPendingData(networkId, this.frozenUpdates.get(networkId));\n  }\n\n  handleIncomingNAF = data => {\n    const message = authorizeOrSanitizeMessage(data);\n    const source = \"phx-reliable\";\n    if (!message.dataType) return;\n\n    message.source = source;\n\n    //TODO: Handle frozen\n    if (this.frozen) {\n      this.storeMessage(message);\n    } else {\n      this.nafMessageReceived(null, message.dataType, message.data, message.source);\n    }\n  };\n  handleIncomingNAFR = ({ from_session_id, naf: unparsedData }) => {\n    // Server optimization: server passes through unparsed NAF message, we must now parse it.\n    const data = JSON.parse(unparsedData);\n    data.from_session_id = from_session_id;\n    this.handleIncomingNAF(data);\n  };\n\n  storeMessage(message) {\n    if (message.dataType === \"um\") {\n      // UpdateMulti\n      for (let i = 0, l = message.data.d.length; i < l; i++) {\n        this.storeSingleMessage(message, i);\n      }\n    } else {\n      this.storeSingleMessage(message);\n    }\n  }\n\n  storeSingleMessage(message, index) {\n    const data = index !== undefined ? message.data.d[index] : message.data;\n    const dataType = message.dataType;\n\n    const networkId = data.networkId;\n\n    if (!this.frozenUpdates.has(networkId)) {\n      this.frozenUpdates.set(networkId, message);\n    } else {\n      const storedMessage = this.frozenUpdates.get(networkId);\n      const storedData =\n        storedMessage.dataType === \"um\" ? this.dataForUpdateMultiMessage(networkId, storedMessage) : storedMessage.data;\n\n      // Avoid updating components if the entity data received did not come from the current owner.\n      const isOutdatedMessage = data.lastOwnerTime < storedData.lastOwnerTime;\n      const isContemporaneousMessage = data.lastOwnerTime === storedData.lastOwnerTime;\n      if (isOutdatedMessage || (isContemporaneousMessage && storedData.owner > data.owner)) {\n        return;\n      }\n\n      if (dataType === \"r\") {\n        const createdWhileFrozen = storedData && storedData.isFirstSync;\n        if (createdWhileFrozen) {\n          // If the entity was created and deleted while frozen, don't bother conveying anything to the consumer.\n          this.frozenUpdates.delete(networkId);\n        } else {\n          // Delete messages override any other messages for this entity\n          this.frozenUpdates.set(networkId, message);\n        }\n      } else {\n        // merge in component updates\n        if (storedData.components && data.components) {\n          Object.assign(storedData.components, data.components);\n        }\n      }\n    }\n  }\n  dataForUpdateMultiMessage(networkId, message) {\n    // \"d\" is an array of entity datas, where each item in the array represents a unique entity and contains\n    // metadata for the entity, and an array of components that have been updated on the entity.\n    // This method finds the data corresponding to the given networkId.\n    for (let i = 0, l = message.data.d.length; i < l; i++) {\n      const data = message.data.d[i];\n\n      if (data.networkId === networkId) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  block(clientId) {\n    this._blockedClients.set(clientId, true);\n  }\n\n  unblock(clientId) {\n    this._blockedClients.delete(clientId);\n  }\n}\n\nNAF.adapters.register(\"phoenix\", PhoenixAdapter);\n","import * as mediasoupClient from \"mediasoup-client\";\nimport protooClient from \"protoo-client\";\nimport { debug as newDebug } from \"debug\";\nimport EventEmitter from \"eventemitter3\";\nimport { MediaDevices } from \"./utils/media-devices-utils\";\n\n// Used for VP9 webcam video.\n//const VIDEO_KSVC_ENCODINGS = [{ scalabilityMode: \"S3T3_KEY\" }];\n\n// Used for VP9 desktop sharing.\n//const VIDEO_SVC_ENCODINGS = [{ scalabilityMode: \"S3T3\", dtx: true }];\n\n// TODO\n// - look into requestConsumerKeyframe\n// - look into applyNetworkThrottle\n// SFU todo\n// - remove active speaker stuff\n// - remove score stuff\n\n// Based upon mediasoup-demo RoomClient\n\nconst debug = newDebug(\"naf-dialog-adapter:debug\");\n//const warn = newDebug(\"naf-dialog-adapter:warn\");\nconst error = newDebug(\"naf-dialog-adapter:error\");\nconst info = newDebug(\"naf-dialog-adapter:info\");\n\nconst PC_PROPRIETARY_CONSTRAINTS = {\n  optional: [{ googDscp: true }]\n};\n\nconst WEBCAM_SIMULCAST_ENCODINGS = [\n  { scaleResolutionDownBy: 4, maxBitrate: 500000 },\n  { scaleResolutionDownBy: 2, maxBitrate: 1000000 },\n  { scaleResolutionDownBy: 1, maxBitrate: 5000000 }\n];\n\n// Used for simulcast screen sharing.\nconst SCREEN_SHARING_SIMULCAST_ENCODINGS = [{ dtx: true, maxBitrate: 1500000 }, { dtx: true, maxBitrate: 6000000 }];\n\nexport const DIALOG_CONNECTION_CONNECTED = \"dialog-connection-connected\";\nexport const DIALOG_CONNECTION_ERROR_FATAL = \"dialog-connection-error-fatal\";\n\nexport class DialogAdapter extends EventEmitter {\n  constructor() {\n    super();\n\n    this._micShouldBeEnabled = false;\n    this._micProducer = null;\n    this._cameraProducer = null;\n    this._shareProducer = null;\n    this._localMediaStream = null;\n    this._consumers = new Map();\n    this._pendingMediaRequests = new Map();\n    this._blockedClients = new Map();\n    this._forceTcp = false;\n    this._forceTurn = false;\n    this._iceTransportPolicy = null;\n    this.scene = null;\n    this._serverParams = {};\n    this._consumerStats = {};\n  }\n\n  get consumerStats() {\n    return this._consumerStats;\n  }\n\n  get downlinkBwe() {\n    return this._downlinkBwe;\n  }\n\n  getIceServers(host, port, turn) {\n    const iceServers = [];\n\n    this._serverUrl = `wss://${host}:${port}`;\n\n    if (turn && turn.enabled) {\n      turn.transports.forEach(ts => {\n        // Try both TURN DTLS and TCP/TLS\n        if (!this._forceTcp) {\n          iceServers.push({\n            urls: `turns:${host}:${ts.port}`,\n            username: turn.username,\n            credential: turn.credential\n          });\n        }\n\n        iceServers.push({\n          urls: `turns:${host}:${ts.port}?transport=tcp`,\n          username: turn.username,\n          credential: turn.credential\n        });\n      });\n      iceServers.push({ urls: \"stun:stun1.l.google.com:19302\" });\n    } else {\n      iceServers.push({ urls: \"stun:stun1.l.google.com:19302\" }, { urls: \"stun:stun2.l.google.com:19302\" });\n    }\n\n    return iceServers;\n  }\n\n  /**\n   * Gets transport/consumer/producer stats on the server side.\n   */\n  async getServerStats() {\n    if (!this._protoo.connected) {\n      // Signaling channel not connected, no reason to get remote RTC stats.\n      return;\n    }\n\n    const result = {};\n    try {\n      if (!this._sendTransport?._closed) {\n        const sendTransport = (result[this._sendTransport.id] = {});\n        sendTransport.name = \"Send\";\n        sendTransport.stats = await this._protoo.request(\"getTransportStats\", {\n          transportId: this._sendTransport.id\n        });\n        result[this._sendTransport.id][\"producers\"] = {};\n        for (const producer of this._sendTransport._producers) {\n          const id = producer[0];\n          result[this._sendTransport.id][\"producers\"][id] = await this._protoo.request(\"getProducerStats\", {\n            producerId: id\n          });\n        }\n      }\n      if (!this._recvTransport?._closed) {\n        const recvTransport = (result[this._recvTransport.id] = {});\n        recvTransport.name = \"Receive\";\n        recvTransport.stats = await this._protoo.request(\"getTransportStats\", {\n          transportId: this._recvTransport.id\n        });\n        result[this._recvTransport.id][\"consumers\"] = {};\n        for (const consumer of this._recvTransport._consumers) {\n          const id = consumer[0];\n          result[this._recvTransport.id][\"consumers\"][id] = await this._protoo.request(\"getConsumerStats\", {\n            consumerId: id\n          });\n        }\n      }\n      return result;\n    } catch (e) {\n      this.emitRTCEvent(\"error\", \"Adapter\", () => `Error getting the server status: ${e}`);\n      return { error: `Error getting the server status: ${e}` };\n    }\n  }\n\n  async iceRestart(transport) {\n    // Force an ICE restart to gather new candidates and trigger a reconnection\n    this.emitRTCEvent(\n      \"log\",\n      \"RTC\",\n      () => `Restarting ${transport.id === this._sendTransport.id ? \"send\" : \"receive\"} transport ICE`\n    );\n    const iceParameters = await this._protoo.request(\"restartIce\", { transportId: transport.id });\n    await transport.restartIce({ iceParameters });\n  }\n\n  async recreateSendTransport(iceServers) {\n    this.emitRTCEvent(\"log\", \"RTC\", () => `Recreating send transport ICE`);\n    await this.closeSendTransport();\n    await this.createSendTransport(iceServers);\n  }\n\n  /**\n   * Restart ICE in the underlying send peerconnection.\n   */\n  async restartSendICE() {\n    // Do not restart ICE if Signaling is disconnected.\n    if (!this._protoo || !this._protoo.connected) {\n      return;\n    }\n\n    try {\n      if (!this._sendTransport?._closed) {\n        await this.iceRestart(this._sendTransport);\n      } else {\n        // If the transport is closed but the signaling is connected, we try to recreate\n        const { host, port, turn } = this._serverParams;\n        const iceServers = this.getIceServers(host, port, turn);\n        await this.recreateSendTransport(iceServers);\n      }\n    } catch (err) {\n      this.emitRTCEvent(\"error\", \"RTC\", () => `Send transport [recreate] failed: ${err}`);\n    }\n  }\n\n  /**\n   * Checks the Send Transport ICE status and restarts it in case is in failed state.\n   * This is called by the Send Transport \"connectionstatechange\" event listener.\n   * @param {boolean} connectionState The transport connnection state (ICE connection state)\n   */\n  checkSendIceStatus(connectionState) {\n    // If the ICE connection state is failed, we force an ICE restart\n    if (connectionState === \"failed\") {\n      this.restartSendICE();\n    }\n  }\n\n  async recreateRecvTransport(iceServers) {\n    this.emitRTCEvent(\"log\", \"RTC\", () => `Recreating receive transport ICE`);\n    await this.closeRecvTransport();\n    await this.createRecvTransport(iceServers);\n    await this._protoo.request(\"refreshConsumers\");\n  }\n\n  /**\n   * Restart ICE in the underlying receive peerconnection.\n   * @param {boolean} force Forces the execution of the reconnect.\n   */\n  async restartRecvICE() {\n    if (!this._protoo || !this._protoo.connected) {\n      return;\n    }\n\n    try {\n      if (!this._recvTransport?._closed) {\n        await this.iceRestart(this._recvTransport);\n      } else {\n        // If the transport is closed but the signaling is connected, we try to recreate\n        const { host, port, turn } = this._serverParams;\n        const iceServers = this.getIceServers(host, port, turn);\n        await this.recreateRecvTransport(iceServers);\n      }\n    } catch (err) {\n      this.emitRTCEvent(\"error\", \"RTC\", () => `Receive transport [recreate] failed: ${err}`);\n    }\n  }\n\n  /**\n   * Checks the ReeceiveReeceive Transport ICE status and restarts it in case is in failed state.\n   * This is called by the Reeceive Transport \"connectionstatechange\" event listener.\n   * @param {boolean} connectionState The transport connection state (ICE connection state)\n   */\n  checkRecvIceStatus(connectionState) {\n    // If the ICE connection state is failed, we force an ICE restart\n    if (connectionState === \"failed\") {\n      this.restartRecvICE();\n    }\n  }\n\n  async connect({\n    serverUrl,\n    roomId,\n    joinToken,\n    serverParams,\n    scene,\n    clientId,\n    forceTcp,\n    forceTurn,\n    iceTransportPolicy\n  }) {\n    this._serverUrl = serverUrl;\n    this._roomId = roomId;\n    this._joinToken = joinToken;\n    this._serverParams = serverParams;\n    this._clientId = clientId;\n    this.scene = scene;\n    this._forceTcp = forceTcp;\n    this._forceTurn = forceTurn;\n    this._iceTransportPolicy = iceTransportPolicy;\n\n    const urlWithParams = new URL(this._serverUrl);\n    urlWithParams.searchParams.append(\"roomId\", this._roomId);\n    urlWithParams.searchParams.append(\"peerId\", this._clientId);\n\n    // TODO: Establishing connection could take a very long time.\n    //       Inform the user if we are stuck here.\n    const protooTransport = new protooClient.WebSocketTransport(urlWithParams.toString(), {\n      retry: { retries: 2 }\n    });\n    this._protoo = new protooClient.Peer(protooTransport);\n\n    this._protoo.on(\"disconnected\", () => {\n      this.emitRTCEvent(\"info\", \"Signaling\", () => `Disconnected`);\n      this.cleanUpLocalState();\n    });\n\n    this._protoo.on(\"failed\", attempt => {\n      this.emitRTCEvent(\"error\", \"Signaling\", () => `Failed: ${attempt}, retrying...`);\n    });\n\n    this._protoo.on(\"close\", async () => {\n      // We explicitly disconnect event handlers when closing the socket ourselves,\n      // so if we get into here, we were not the ones closing the connection.\n      this.emitRTCEvent(\"error\", \"Signaling\", () => `Closed`);\n      this._retryConnectWithNewHost();\n    });\n\n    // eslint-disable-next-line no-unused-vars\n    this._protoo.on(\"request\", async (request, accept, reject) => {\n      this.emitRTCEvent(\"info\", \"Signaling\", () => `Request [${request.method}]: ${request.data?.id}`);\n      debug('proto \"request\" event [method:%s, data:%o]', request.method, request.data?.id);\n\n      switch (request.method) {\n        case \"newConsumer\": {\n          const {\n            peerId,\n            producerId,\n            id,\n            kind,\n            rtpParameters,\n            /*type, */ appData /*, producerPaused */\n          } = request.data;\n\n          try {\n            const consumer = await this._recvTransport.consume({\n              id,\n              producerId,\n              kind,\n              rtpParameters,\n              appData: { ...appData, peerId } // Trick.\n            });\n\n            // Store in the map.\n            this._consumers.set(consumer.id, consumer);\n\n            consumer.on(\"transportclose\", () => {\n              this.emitRTCEvent(\"error\", \"RTC\", () => `Consumer transport closed`);\n              this.removeConsumer(consumer.id);\n            });\n\n            if (kind === \"video\") {\n              const { spatialLayers, temporalLayers } = mediasoupClient.parseScalabilityMode(\n                consumer.rtpParameters.encodings[0].scalabilityMode\n              );\n\n              this._consumerStats[consumer.id] = this._consumerStats[consumer.id] || {};\n              this._consumerStats[consumer.id][\"spatialLayers\"] = spatialLayers;\n              this._consumerStats[consumer.id][\"temporalLayers\"] = temporalLayers;\n            }\n\n            // We are ready. Answer the protoo request so the server will\n            // resume this Consumer (which was paused for now if video).\n            accept();\n\n            this.resolvePendingMediaRequestForTrack(peerId, consumer.track);\n\n            // Notify of an stream update event\n            this.emit(\"stream_updated\", peerId, kind);\n          } catch (err) {\n            this.emitRTCEvent(\"error\", \"Adapter\", () => `Error: ${err}`);\n            error('\"newConsumer\" request failed:%o', err);\n\n            throw err;\n          }\n\n          break;\n        }\n      }\n    });\n\n    this._protoo.on(\"notification\", notification => {\n      debug('proto \"notification\" event [method:%s, data:%o]', notification.method, notification.data);\n\n      switch (notification.method) {\n        case \"newPeer\": {\n          break;\n        }\n\n        case \"peerClosed\": {\n          const { peerId } = notification.data;\n          this.closePeer(peerId);\n\n          break;\n        }\n\n        case \"consumerClosed\": {\n          const { consumerId } = notification.data;\n          const consumer = this._consumers.get(consumerId);\n\n          if (!consumer) {\n            info(`consumerClosed event received without related consumer: ${consumerId}`);\n            break;\n          }\n\n          consumer.close();\n          this.removeConsumer(consumer.id);\n\n          break;\n        }\n\n        case \"peerBlocked\": {\n          const { peerId } = notification.data;\n          document.body.dispatchEvent(new CustomEvent(\"blocked\", { detail: { clientId: peerId } }));\n\n          break;\n        }\n\n        case \"peerUnblocked\": {\n          const { peerId } = notification.data;\n          document.body.dispatchEvent(new CustomEvent(\"unblocked\", { detail: { clientId: peerId } }));\n\n          break;\n        }\n\n        case \"downlinkBwe\": {\n          this._downlinkBwe = notification.data;\n          break;\n        }\n\n        case \"consumerLayersChanged\": {\n          const { consumerId, spatialLayer, temporalLayer } = notification.data;\n\n          const consumer = this._consumers.get(consumerId);\n\n          if (!consumer) {\n            info(`consumerLayersChanged event received without related consumer: ${consumerId}`);\n            break;\n          }\n\n          this._consumerStats[consumerId] = this._consumerStats[consumerId] || {};\n          this._consumerStats[consumerId][\"spatialLayer\"] = spatialLayer;\n          this._consumerStats[consumerId][\"temporalLayer\"] = temporalLayer;\n\n          // TODO: If spatialLayer/temporalLayer are null, that's probably because the current downlink\n          // it's not enough forany spatial layer bitrate. In that case the server has paused the consumer.\n          // At this point we it would be nice to give the user some visual cue that this stream is paused.\n          // ie. A grey overlay with some icon or replacing the video stream por a generic person image.\n          break;\n        }\n\n        case \"consumerScore\": {\n          const { consumerId, score } = notification.data;\n\n          const consumer = this._consumers.get(consumerId);\n\n          if (!consumer) {\n            info(`consumerScore event received without related consumer: ${consumerId}`);\n            break;\n          }\n\n          this._consumerStats[consumerId] = this._consumerStats[consumerId] || {};\n          this._consumerStats[consumerId][\"score\"] = score;\n        }\n      }\n    });\n\n    return new Promise((resolve, reject) => {\n      this._protoo.on(\"open\", async () => {\n        this.emitRTCEvent(\"info\", \"Signaling\", () => `Open`);\n\n        try {\n          await this._joinRoom();\n          resolve();\n          this.emit(DIALOG_CONNECTION_CONNECTED);\n        } catch (err) {\n          this.emitRTCEvent(\"warn\", \"Adapter\", () => `Error during connect: ${error}`);\n          reject(err);\n          this.emit(DIALOG_CONNECTION_ERROR_FATAL);\n        }\n      });\n    });\n  }\n\n  async _retryConnectWithNewHost() {\n    this.cleanUpLocalState();\n    this._protoo.removeAllListeners();\n    const serverParams = await APP.hubChannel.getHost();\n    const { host, port } = serverParams;\n    const newServerUrl = `wss://${host}:${port}`;\n    if (this._serverUrl === newServerUrl) {\n      console.error(\"Reconnect to dialog failed.\");\n      this.emit(DIALOG_CONNECTION_ERROR_FATAL);\n      return;\n    }\n    console.log(`The Dialog server has changed to ${newServerUrl}, reconnecting with the new server...`);\n    await this.connect({\n      serverUrl: newServerUrl,\n      roomId: this._roomId,\n      joinToken: APP.hubChannel.token,\n      serverParams,\n      scene: this.scene,\n      clientId: this._clientId,\n      forceTcp: this._forceTcp,\n      forceTurn: this._forceTurn,\n      iceTransportPolicy: this._iceTransportPolicy\n    });\n  }\n\n  closePeer(peerId) {\n    const pendingMediaRequests = this._pendingMediaRequests.get(peerId);\n\n    if (pendingMediaRequests) {\n      const msg = \"The user disconnected before the media stream was resolved.\";\n      info(msg);\n\n      if (pendingMediaRequests.audio) {\n        pendingMediaRequests.audio.resolve(null);\n      }\n\n      if (pendingMediaRequests.video) {\n        pendingMediaRequests.video.resolve(null);\n      }\n\n      this._pendingMediaRequests.delete(peerId);\n    }\n  }\n\n  resolvePendingMediaRequestForTrack(clientId, track) {\n    const requests = this._pendingMediaRequests.get(clientId);\n\n    if (requests && requests[track.kind]) {\n      const resolve = requests[track.kind].resolve;\n      delete requests[track.kind];\n      resolve(new MediaStream([track]));\n    }\n\n    if (requests && Object.keys(requests).length === 0) {\n      this._pendingMediaRequests.delete(clientId);\n    }\n  }\n\n  removeConsumer(consumerId) {\n    this.emitRTCEvent(\"info\", \"RTC\", () => `Consumer removed: ${consumerId}`);\n    this._consumers.delete(consumerId);\n  }\n\n  getMediaStream(clientId, kind = \"audio\") {\n    let track;\n\n    if (this._clientId === clientId) {\n      if (kind === \"audio\" && this._micProducer) {\n        track = this._micProducer.track;\n      } else if (kind === \"video\") {\n        if (this._cameraProducer && !this._cameraProducer.closed) {\n          track = this._cameraProducer.track;\n        } else if (this._shareProducer && !this._shareProducer.closed) {\n          track = this._shareProducer.track;\n        }\n      }\n    } else {\n      this._consumers.forEach(consumer => {\n        if (consumer.appData.peerId === clientId && kind == consumer.track.kind) {\n          track = consumer.track;\n        }\n      });\n    }\n\n    if (track) {\n      debug(`Already had ${kind} for ${clientId}`);\n      return Promise.resolve(new MediaStream([track]));\n    } else {\n      debug(`Waiting on ${kind} for ${clientId}`);\n      if (!this._pendingMediaRequests.has(clientId)) {\n        this._pendingMediaRequests.set(clientId, {});\n      }\n\n      const requests = this._pendingMediaRequests.get(clientId);\n      const promise = new Promise((resolve, reject) => (requests[kind] = { resolve, reject }));\n      requests[kind].promise = promise;\n      promise.catch(e => {\n        this.emitRTCEvent(\"error\", \"Adapter\", () => `getMediaStream error: ${e}`);\n        console.warn(`${clientId} getMediaStream Error`, e);\n      });\n      return promise;\n    }\n  }\n\n  async createSendTransport(iceServers) {\n    // Create mediasoup Transport for sending (unless we don't want to produce).\n    const sendTransportInfo = await this._protoo.request(\"createWebRtcTransport\", {\n      producing: true,\n      consuming: false,\n      sctpCapabilities: undefined\n    });\n\n    this._sendTransport = this._mediasoupDevice.createSendTransport({\n      id: sendTransportInfo.id,\n      iceParameters: sendTransportInfo.iceParameters,\n      iceCandidates: sendTransportInfo.iceCandidates,\n      dtlsParameters: sendTransportInfo.dtlsParameters,\n      sctpParameters: sendTransportInfo.sctpParameters,\n      iceServers,\n      iceTransportPolicy: this._iceTransportPolicy,\n      proprietaryConstraints: PC_PROPRIETARY_CONSTRAINTS\n    });\n\n    this._sendTransport.on(\"connect\", (\n      { dtlsParameters },\n      callback,\n      errback // eslint-disable-line no-shadow\n    ) => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Send transport [connect]`);\n      this._sendTransport.observer.on(\"close\", () => {\n        this.emitRTCEvent(\"info\", \"RTC\", () => `Send transport [close]`);\n      });\n      this._sendTransport.observer.on(\"newproducer\", producer => {\n        this.emitRTCEvent(\"info\", \"RTC\", () => `Send transport [newproducer]: ${producer.id}`);\n      });\n      this._sendTransport.observer.on(\"newconsumer\", consumer => {\n        this.emitRTCEvent(\"info\", \"RTC\", () => `Send transport [newconsumer]: ${consumer.id}`);\n      });\n\n      this._protoo\n        .request(\"connectWebRtcTransport\", {\n          transportId: this._sendTransport.id,\n          dtlsParameters\n        })\n        .then(callback)\n        .catch(errback);\n    });\n\n    this._sendTransport.on(\"connectionstatechange\", connectionState => {\n      let level = \"info\";\n      if (connectionState === \"failed\" || connectionState === \"disconnected\") {\n        level = \"error\";\n      }\n      this.emitRTCEvent(level, \"RTC\", () => `Send transport [connectionstatechange]: ${connectionState}`);\n\n      this.checkSendIceStatus(connectionState);\n    });\n\n    this._sendTransport.on(\"produce\", async ({ kind, rtpParameters, appData }, callback, errback) => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Send transport [produce]: ${kind}`);\n      try {\n        // eslint-disable-next-line no-shadow\n        const { id } = await this._protoo.request(\"produce\", {\n          transportId: this._sendTransport.id,\n          kind,\n          rtpParameters,\n          appData\n        });\n\n        callback({ id });\n      } catch (error) {\n        this.emitRTCEvent(\"error\", \"Signaling\", () => `[produce] error: ${error}`);\n        errback(error);\n      }\n    });\n  }\n\n  async closeSendTransport() {\n    if (this._micProducer) {\n      this._micProducer.close();\n      this._protoo?.connected && this._protoo?.request(\"closeProducer\", { producerId: this._micProducer.id });\n      this._micProducer = null;\n    }\n\n    if (this._videoProducer) {\n      this._videoProducer.close();\n      this._protoo?.connected && this._protoo?.request(\"closeProducer\", { producerId: this._videoProducer.id });\n      this._videoProducer = null;\n    }\n\n    // TODO: If _sendTransport is falsey then return\n    const transportId = this._sendTransport?.id;\n    if (this._sendTransport && !this._sendTransport._closed) {\n      this._sendTransport.close();\n      this._sendTransport = null;\n    }\n\n    if (this._protoo?.connected) {\n      try {\n        await this._protoo.request(\"closeWebRtcTransport\", { transportId });\n      } catch (err) {\n        error(err);\n      }\n    }\n  }\n\n  async createRecvTransport(iceServers) {\n    // Create mediasoup Transport for sending (unless we don't want to consume).\n    const recvTransportInfo = await this._protoo.request(\"createWebRtcTransport\", {\n      producing: false,\n      consuming: true,\n      sctpCapabilities: undefined\n    });\n\n    this._recvTransport = this._mediasoupDevice.createRecvTransport({\n      id: recvTransportInfo.id,\n      iceParameters: recvTransportInfo.iceParameters,\n      iceCandidates: recvTransportInfo.iceCandidates,\n      dtlsParameters: recvTransportInfo.dtlsParameters,\n      sctpParameters: recvTransportInfo.sctpParameters,\n      iceServers,\n      iceTransportPolicy: this._iceTransportPolicy\n    });\n\n    this._recvTransport.on(\"connect\", (\n      { dtlsParameters },\n      callback,\n      errback // eslint-disable-line no-shadow\n    ) => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Receive transport [connect]`);\n      this._recvTransport.observer.on(\"close\", () => {\n        this.emitRTCEvent(\"info\", \"RTC\", () => `Receive transport [close]`);\n      });\n      this._recvTransport.observer.on(\"newproducer\", producer => {\n        this.emitRTCEvent(\"info\", \"RTC\", () => `Receive transport [newproducer]: ${producer.id}`);\n      });\n      this._recvTransport.observer.on(\"newconsumer\", consumer => {\n        this.emitRTCEvent(\"info\", \"RTC\", () => `Receive transport [newconsumer]: ${consumer.id}`);\n      });\n\n      this._protoo\n        .request(\"connectWebRtcTransport\", {\n          transportId: this._recvTransport.id,\n          dtlsParameters\n        })\n        .then(callback)\n        .catch(errback);\n    });\n\n    this._recvTransport.on(\"connectionstatechange\", connectionState => {\n      let level = \"info\";\n      if (connectionState === \"failed\" || connectionState === \"disconnected\") {\n        level = \"error\";\n      }\n      this.emitRTCEvent(level, \"RTC\", () => `Receive transport [connectionstatechange]: ${connectionState}`);\n\n      this.checkRecvIceStatus(connectionState);\n    });\n  }\n\n  async closeRecvTransport() {\n    const transportId = this._recvTransport?.id;\n    if (this._recvTransport && !this._recvTransport._closed) {\n      this._recvTransport.close();\n      this._recvTransport = null;\n    }\n    if (this._protoo?.connected) {\n      try {\n        await this._protoo.request(\"closeWebRtcTransport\", { transportId });\n      } catch (err) {\n        error(err);\n      }\n    }\n  }\n\n  async _joinRoom() {\n    debug(\"_joinRoom()\");\n\n    this._mediasoupDevice = new mediasoupClient.Device({});\n\n    const routerRtpCapabilities = await this._protoo.request(\"getRouterRtpCapabilities\");\n\n    await this._mediasoupDevice.load({ routerRtpCapabilities });\n\n    const { host, port, turn } = this._serverParams;\n    const iceServers = this.getIceServers(host, port, turn);\n\n    await this.createSendTransport(iceServers);\n    await this.createRecvTransport(iceServers);\n\n    await this._protoo.request(\"join\", {\n      displayName: this._clientId,\n      device: this._device,\n      rtpCapabilities: this._mediasoupDevice.rtpCapabilities,\n      sctpCapabilities: this._useDataChannel ? this._mediasoupDevice.sctpCapabilities : undefined,\n      token: this._joinToken\n    });\n\n    if (this._localMediaStream) {\n      // TODO: Refactor to be \"Create producers\"\n      await this.setLocalMediaStream(this._localMediaStream);\n    }\n  }\n\n  async setLocalMediaStream(stream) {\n    if (!this._sendTransport) {\n      console.error(\"Tried to setLocalMediaStream before a _sendTransport existed\");\n      return;\n    }\n    this.emitRTCEvent(\"info\", \"RTC\", () => `Creating missing producers`);\n    let sawAudio = false;\n    let sawVideo = false;\n\n    await Promise.all(\n      stream.getTracks().map(async track => {\n        if (track.kind === \"audio\") {\n          sawAudio = true;\n\n          // TODO multiple audio tracks?\n          if (this._micProducer) {\n            if (this._micProducer.track !== track) {\n              this._micProducer.track.stop();\n              this._micProducer.replaceTrack(track);\n            }\n          } else {\n            // stopTracks = false because otherwise the track will end during a temporary disconnect\n            this._micProducer = await this._sendTransport.produce({\n              track,\n              pause: !this._micShouldBeEnabled,\n              stopTracks: false,\n              codecOptions: { opusStereo: false, opusDtx: true },\n              zeroRtpOnPause: true,\n              disableTrackOnPause: true\n            });\n\n            this._micProducer.on(\"transportclose\", () => {\n              this.emitRTCEvent(\"info\", \"RTC\", () => `Mic transport closed`);\n              this._micProducer = null;\n            });\n\n            this.emit(\"mic-state-changed\", { enabled: this.isMicEnabled });\n          }\n        } else {\n          sawVideo = true;\n\n          if (track._hubs_contentHint === MediaDevices.SCREEN) {\n            await this.disableCamera();\n            await this.enableShare(track);\n          } else if (track._hubs_contentHint === MediaDevices.CAMERA) {\n            await this.disableShare();\n            await this.enableCamera(track);\n          }\n        }\n\n        this.resolvePendingMediaRequestForTrack(this._clientId, track);\n      })\n    );\n\n    if (!sawAudio && this._micProducer) {\n      this._protoo.request(\"closeProducer\", { producerId: this._micProducer.id });\n      this._micProducer.close();\n      this._micProducer = null;\n    }\n    if (!sawVideo) {\n      this.disableCamera();\n      this.disableShare();\n    }\n    this._localMediaStream = stream;\n  }\n\n  async enableCamera(track) {\n    // stopTracks = false because otherwise the track will end during a temporary disconnect\n    this._cameraProducer = await this._sendTransport.produce({\n      track,\n      stopTracks: false,\n      codecOptions: { videoGoogleStartBitrate: 1000 },\n      encodings: WEBCAM_SIMULCAST_ENCODINGS,\n      zeroRtpOnPause: true,\n      disableTrackOnPause: true\n    });\n\n    this._cameraProducer.on(\"transportclose\", () => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Camera transport closed`);\n      this.disableCamera();\n    });\n    this._cameraProducer.observer.on(\"trackended\", () => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Camera track ended`);\n      this.disableCamera();\n    });\n  }\n\n  async disableCamera() {\n    if (!this._cameraProducer) return;\n\n    this._cameraProducer.close();\n\n    try {\n      if (!this._sendTransport.closed) {\n        await this._protoo.request(\"closeProducer\", { producerId: this._cameraProducer.id });\n      }\n    } catch (error) {\n      console.error(`disableCamera(): ${error}`);\n    }\n\n    this._cameraProducer = null;\n  }\n\n  async enableShare(track) {\n    // stopTracks = false because otherwise the track will end during a temporary disconnect\n    this._shareProducer = await this._sendTransport.produce({\n      track,\n      stopTracks: false,\n      codecOptions: { videoGoogleStartBitrate: 1000 },\n      encodings: SCREEN_SHARING_SIMULCAST_ENCODINGS,\n      zeroRtpOnPause: true,\n      disableTrackOnPause: true,\n      appData: {\n        share: true\n      }\n    });\n\n    this._shareProducer.on(\"transportclose\", () => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Desktop Share transport closed`);\n      this.disableShare();\n    });\n    this._shareProducer.observer.on(\"trackended\", () => {\n      this.emitRTCEvent(\"info\", \"RTC\", () => `Desktop Share transport track ended`);\n      this.disableShare();\n    });\n  }\n\n  async disableShare() {\n    if (!this._shareProducer) return;\n\n    this._shareProducer.close();\n\n    try {\n      if (!this._sendTransport.closed) {\n        await this._protoo.request(\"closeProducer\", { producerId: this._shareProducer.id });\n      }\n    } catch (error) {\n      console.error(`disableShare(): ${error}`);\n    }\n\n    this._shareProducer = null;\n  }\n\n  toggleMicrophone() {\n    if (this.isMicEnabled) {\n      this.enableMicrophone(false);\n    } else {\n      this.enableMicrophone(true);\n    }\n  }\n\n  enableMicrophone(enabled) {\n    if (!this._micProducer) {\n      console.error(\"Tried to toggle mic but there's no producer.\");\n      return;\n    }\n\n    if (enabled && !this.isMicEnabled) {\n      this._micProducer.resume();\n      this._protoo.request(\"resumeProducer\", { producerId: this._micProducer.id });\n    } else if (!enabled && this.isMicEnabled) {\n      this._micProducer.pause();\n      this._protoo.request(\"pauseProducer\", { producerId: this._micProducer.id });\n    }\n    this._micShouldBeEnabled = enabled;\n    this.emit(\"mic-state-changed\", { enabled: this.isMicEnabled });\n  }\n\n  get isMicEnabled() {\n    return this._micProducer && !this._micProducer.paused;\n  }\n\n  cleanUpLocalState() {\n    this._sendTransport && this._sendTransport.close();\n    this._sendTransport = null;\n    this._recvTransport && this._recvTransport.close();\n    this._recvTransport = null;\n    this._micProducer = null;\n    this._shareProducer = null;\n    this._cameraProducer = null;\n  }\n\n  disconnect() {\n    debug(\"disconnect()\");\n    this.cleanUpLocalState();\n    if (this._protoo) {\n      this._protoo.removeAllListeners();\n      if (this._protoo.connected) {\n        this._protoo.close();\n        this.emitRTCEvent(\"info\", \"Signaling\", () => `[close]`);\n      }\n    }\n  }\n\n  kick(clientId) {\n    return this._protoo\n      .request(\"kick\", {\n        room_id: this.room,\n        user_id: clientId,\n        token: this._joinToken\n      })\n      .then(() => {\n        document.body.dispatchEvent(new CustomEvent(\"kicked\", { detail: { clientId: clientId } }));\n      });\n  }\n\n  block(clientId) {\n    return this._protoo.request(\"block\", { whom: clientId }).then(() => {\n      this._blockedClients.set(clientId, true);\n      document.body.dispatchEvent(new CustomEvent(\"blocked\", { detail: { clientId: clientId } }));\n    });\n  }\n\n  unblock(clientId) {\n    return this._protoo.request(\"unblock\", { whom: clientId }).then(() => {\n      this._blockedClients.delete(clientId);\n      document.body.dispatchEvent(new CustomEvent(\"unblocked\", { detail: { clientId: clientId } }));\n    });\n  }\n\n  emitRTCEvent(level, tag, msgFunc) {\n    if (!window.APP.store.state.preferences.showRtcDebugPanel) return;\n    const time = new Date().toLocaleTimeString(\"en-US\", {\n      hour12: false,\n      hour: \"numeric\",\n      minute: \"numeric\",\n      second: \"numeric\"\n    });\n    this.scene.emit(\"rtc_event\", { level, tag, time, msg: msgFunc() });\n  }\n}\n","/* global APP*/\nimport { getReticulumFetchUrl, hubUrl } from \"./utils/phoenix-utils\";\nimport { updateEnvironmentForHub, getSceneUrlForHub, updateUIForHub, remountUI } from \"./hub\";\n\nfunction unloadRoomObjects() {\n  document.querySelectorAll(\"[pinnable]\").forEach(el => {\n    if (el.components.pinnable.data.pinned) {\n      el.parentNode.removeChild(el);\n    }\n  });\n\n  // Clean up empty object.gltf nodes\n  document.querySelectorAll(\"#objects-scene .Room_Objects\").forEach(el => {\n    if (!el.children.length) {\n      el.parentNode.parentNode.removeChild(el.parentNode);\n    }\n  });\n}\n\nfunction loadRoomObjects(hubId) {\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hubId}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n  objectsScene.appendChild(objectsEl);\n}\n\nexport async function changeHub(hubId, addToHistory = true) {\n  if (hubId === APP.hub.hub_id) {\n    console.log(\"Change hub called with the current hub id. This is a noop.\");\n    return;\n  }\n  // Suppress on-screen join and leave messages until we receive a sync.\n  APP.hideHubPresenceEvents = true;\n  const scene = AFRAME.scenes[0];\n\n  let data;\n  try {\n    data = await APP.hubChannel.migrateToHub(hubId);\n  } catch (e) {\n    console.warn(`Failed to join hub ${hubId}: ${e.reason}|${e.message}`);\n    APP.messageDispatch.log(\"joinFailed\", { message: e.message });\n    return;\n  }\n\n  const hub = data.hubs[0];\n\n  if (addToHistory) {\n    window.history.pushState(null, null, hubUrl(hubId, {}, hub.slug));\n  }\n\n  APP.hub = hub;\n  updateUIForHub(hub, APP.hubChannel);\n  scene.emit(\"hub_updated\", { hub });\n\n  APP.subscriptions.setSubscribed(data.subscriptions.web_push);\n\n  remountUI({\n    hubIsBound: data.hub_requires_oauth,\n    initialIsFavorited: data.subscriptions.favorites\n  });\n\n  NAF.entities.removeRemoteEntities();\n  await NAF.connection.adapter.disconnect();\n  await APP.dialog.disconnect();\n  unloadRoomObjects();\n  NAF.connection.connectedClients = {};\n  NAF.connection.activeDataChannels = {};\n\n  NAF.room = hub.hub_id;\n\n  if (\n    document.querySelector(\"#environment-scene\").childNodes[0].components[\"gltf-model-plus\"].data.src !==\n    (await getSceneUrlForHub(hub))\n  ) {\n    const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n    fader.fadeOut().then(() => {\n      scene.emit(\"reset_scene\");\n      updateEnvironmentForHub(hub, APP.entryManager);\n    });\n  }\n\n  APP.retChannel.push(\"change_hub\", { hub_id: hub.hub_id });\n\n  await Promise.all([\n    APP.dialog.connect({\n      serverUrl: `wss://${hub.host}:${hub.port}`,\n      roomId: hub.hub_id,\n      joinToken: data.perms_token,\n      serverParams: { host: hub.host, port: hub.port, turn: hub.turn },\n      scene,\n      clientId: APP.dialog._clientId,\n      forceTcp: APP.dialog._forceTcp,\n      forceTurn: APP.dialog._forceTurn,\n      iceTransportPolicy: APP.dialog._iceTransportPolicy\n    }),\n\n    NAF.connection.adapter.connect()\n  ]);\n\n  loadRoomObjects(hubId);\n\n  APP.hubChannel.sendEnteredEvent();\n\n  APP.messageDispatch.receive({\n    type: \"hub_changed\",\n    hubName: hub.name,\n    showLineBreak: true\n  });\n}\nwindow.changeHub = changeHub;\n\n// TODO see if there is a better way to do this with react router\nwindow.addEventListener(\"popstate\", function() {\n  if (!APP.store.state.preferences.fastRoomSwitching) return;\n  const qs = new URLSearchParams(location.search);\n  const newHubId = qs.get(\"hub_id\") || document.location.pathname.substring(1).split(\"/\")[0];\n  if (newHubId !== APP.hub.hub_id) {\n    changeHub(newHubId, false);\n  }\n});\n","import { SOUND_TOGGLE_MIC } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    APP.mediaDevicesManager.toggleMic();\n    if (!this.el.sceneEl.is(\"entered\")) return;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n  },\n\n  onMute: function() {\n    APP.mediaDevicesManager.micEnabled = false;\n  },\n\n  onUnmute: function() {\n    APP.mediaDevicesManager.micEnabled = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\n\nconst HIDDEN_SCALE = 0.00000001;\n\nconst components = [];\nexport class BoneVisibilitySystem {\n  tick() {\n    for (let i = 0; i < components.length; i++) {\n      const cmp = components[i];\n      const obj = cmp.el.object3D;\n      const { visible, scale } = obj;\n      const { updateWhileInvisible } = cmp.data;\n      if (visible !== cmp.lastVisible || updateWhileInvisible) {\n        if (visible && (scale.x !== 1 || scale.y !== 1 || scale.z !== 1)) {\n          scale.setScalar(1);\n          obj.matrixNeedsUpdate = true;\n        } else if (!visible && (scale.x !== HIDDEN_SCALE || scale.y !== HIDDEN_SCALE || scale.z !== HIDDEN_SCALE)) {\n          scale.setScalar(HIDDEN_SCALE);\n          obj.matrixNeedsUpdate = true;\n        }\n\n        // Normally this object being invisible would cause it not to get updated even though the matrixNeedsUpdate flag is set, force it\n        if (updateWhileInvisible && obj.matrixNeedsUpdate) {\n          obj.updateMatrixWorld(true, true);\n        }\n      }\n      cmp.lastVisible = visible;\n    }\n  }\n\n  // Called only from camera-tool.tock() to update the matrices\n  // of objects and their children whose are updated in tick().\n  updateMatrices() {\n    for (let i = 0; i < components.length; i++) {\n      const cmp = components[i];\n      const obj = cmp.el.object3D;\n      if (obj.matrixNeedsUpdate) {\n        obj.updateMatrixWorld();\n      }\n    }\n  }\n}\n\nAFRAME.registerComponent(\"bone-visibility\", {\n  schema: {\n    updateWhileInvisible: { type: \"boolean\", default: false }\n  },\n  play() {\n    components.push(this);\n  },\n  pause() {\n    components.splice(components.indexOf(this), 1);\n  }\n});\n","import { SOUND_SPAWN_PEN } from \"../systems/sound-effects-system\";\n/**\n * HUD panel for muting, freezing, and other controls that don't necessarily have hardware buttons.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.spawn = this.el.querySelector(\".spawn\");\n    this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.inviteBtn = this.el.querySelector(\".invite-btn\");\n    this.background = this.el.querySelector(\".bg\");\n\n    this.onMicStateChanged = () => {\n      this.mic.setAttribute(\"mic-button\", \"active\", APP.dialog.isMicEnabled);\n    };\n    APP.dialog.on(\"mic-state-changed\", this.onMicStateChanged);\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"mic-button\", \"active\", APP.dialog.isMicEnabled);\n      this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n      this.cameraBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"camera\"));\n      if (window.APP.hubChannel) {\n        this.spawn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_and_move_media\"));\n        this.pen.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_drawing\"));\n        this.cameraBtn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_camera\"));\n      }\n    };\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"frozen\" || evt.detail === \"pen\" || evt.detail === \"camera\")) return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      APP.mediaDevicesManager.toggleMic();\n    };\n\n    this.onSpawnClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_and_move_media\")) return;\n      this.el.emit(\"action_spawn\");\n    };\n\n    this.onPenClick = e => {\n      if (!window.APP.hubChannel.can(\"spawn_drawing\")) return;\n      this.el.emit(\"spawn_pen\", { object3D: e.object3D });\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPAWN_PEN);\n    };\n\n    this.onCameraClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_camera\")) return;\n      this.el.emit(\"action_toggle_camera\");\n    };\n\n    this.onInviteClick = () => {\n      this.el.emit(\"action_invite\");\n    };\n\n    this.onHubUpdated = e => {\n      this.inviteBtn.object3D.visible = e.detail.hub.entry_mode !== \"invite\";\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updateButtonStates);\n    this.el.sceneEl.addEventListener(\"hub_updated\", this.onHubUpdated);\n    this.updateButtonStates();\n\n    this.mic.object3D.addEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.addEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.addEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.addEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.addEventListener(\"interact\", this.onInviteClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateButtonStates);\n    this.el.sceneEl.removeEventListener(\"hub_updated\", this.onHubUpdated);\n\n    this.mic.object3D.removeEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.removeEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.removeEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.removeEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.removeEventListener(\"interact\", this.onInviteClick);\n  }\n});\n","/* global performance */\nimport { addMedia } from \"../utils/media-utils\";\nimport { SOUND_SPAWN_EMOJI } from \"../systems/sound-effects-system\";\nimport emoji0Particle from \"../assets/images/emojis/emoji_0.png\";\nimport emoji1Particle from \"../assets/images/emojis/emoji_1.png\";\nimport emoji2Particle from \"../assets/images/emojis/emoji_2.png\";\nimport emoji3Particle from \"../assets/images/emojis/emoji_3.png\";\nimport emoji4Particle from \"../assets/images/emojis/emoji_4.png\";\nimport emoji5Particle from \"../assets/images/emojis/emoji_5.png\";\nimport emoji6Particle from \"../assets/images/emojis/emoji_6.png\";\nimport emoji0Model from \"../assets/models/emojis/emoji_0.glb\";\nimport emoji1Model from \"../assets/models/emojis/emoji_1.glb\";\nimport emoji2Model from \"../assets/models/emojis/emoji_2.glb\";\nimport emoji3Model from \"../assets/models/emojis/emoji_3.glb\";\nimport emoji4Model from \"../assets/models/emojis/emoji_4.glb\";\nimport emoji5Model from \"../assets/models/emojis/emoji_5.glb\";\nimport emoji6Model from \"../assets/models/emojis/emoji_6.glb\";\n\nexport const emojis = [\n  { id: \"smile\", model: emoji0Model, particle: emoji0Particle },\n  { id: \"laugh\", model: emoji1Model, particle: emoji1Particle },\n  { id: \"clap\", model: emoji2Model, particle: emoji2Particle },\n  { id: \"heart\", model: emoji3Model, particle: emoji3Particle },\n  { id: \"wave\", model: emoji4Model, particle: emoji4Particle },\n  { id: \"angry\", model: emoji5Model, particle: emoji5Particle },\n  { id: \"cry\", model: emoji6Model, particle: emoji6Particle }\n].map(({ model, particle, ...rest }) => {\n  return {\n    ...rest,\n    model: new URL(model, window.location).href,\n    particleEmitterConfig: {\n      src: new URL(particle, window.location).href,\n      resolve: false,\n      particleCount: 20,\n      startSize: 0.01,\n      endSize: 0.2,\n      sizeRandomness: 0.05,\n      lifetime: 1,\n      lifetimeRandomness: 0.2,\n      ageRandomness: 1,\n      startVelocity: { x: 0, y: 1, z: 0 },\n      endVelocity: { x: 0, y: 0.25, z: 0 },\n      startOpacity: 1,\n      middleOpacity: 1,\n      endOpacity: 0\n    }\n  };\n});\n\nexport function spawnEmojiInFrontOfUser({ model, particleEmitterConfig }) {\n  const { entity } = addMedia(model, \"#interactable-emoji\");\n  entity.setAttribute(\"offset-relative-to\", {\n    target: \"#avatar-pov-node\",\n    offset: { x: 0, y: 0, z: -1.5 }\n  });\n  entity.addEventListener(\"model-loaded\", () => {\n    entity.querySelector(\".particle-emitter\").setAttribute(\"particle-emitter\", particleEmitterConfig);\n    entity.setAttribute(\"emoji\", { particleEmitterConfig: particleEmitterConfig });\n  });\n}\n\nAFRAME.registerComponent(\"emoji\", {\n  schema: {\n    emitDecayTime: { default: 1.5 },\n    emitFadeTime: { default: 0.5 },\n    emitEndTime: { default: 0 },\n    particleEmitterConfig: {\n      default: null,\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.data.emitEndTime = performance.now() + this.data.emitDecayTime * 1000;\n    this.physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n  },\n\n  play() {\n    const mediaLoader = this.el.components[\"media-loader\"];\n    if (emojis.find(emoji => emoji.model !== mediaLoader.data.src) === -1) {\n      this.el.parentNode.removeChild(this.el);\n      return;\n    }\n\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n      SOUND_SPAWN_EMOJI,\n      this.el.object3D\n    );\n    this.particleEmitter = this.el.querySelector(\".particle-emitter\");\n  },\n\n  update() {\n    if (!this.particleConfig && this.data.particleEmitterConfig) {\n      this.particleConfig = Object.assign({}, this.data.particleEmitterConfig);\n      this.originalParticleCount = this.particleConfig.particleCount;\n    }\n  },\n\n  tick() {\n    const isMine = this.el.components.networked.initialized && this.el.components.networked.isMine();\n\n    if (this.particleConfig && isMine) {\n      const now = performance.now();\n\n      const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n\n      if (isHeld) {\n        this.data.emitEndTime = now + this.data.emitDecayTime * 1000;\n      }\n\n      const emitFadeTime = this.data.emitFadeTime * 1000;\n\n      if (now < this.data.emitEndTime && this.particleConfig.startOpacity < 1) {\n        this.particleConfig.particleCount = this.originalParticleCount;\n        this.particleConfig.startOpacity = 1;\n        this.particleConfig.middleOpacity = 1;\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\n      } else if (now >= this.data.emitEndTime && this.particleConfig.startOpacity > 0.001) {\n        const timeSinceStop = Math.min(now - this.data.emitEndTime, emitFadeTime);\n        const opacity = 1 - timeSinceStop / emitFadeTime;\n        const particleCount = opacity < 0.001 && this.particleConfig.particleCount > 0 ? 0 : this.originalParticleCount;\n        this.particleConfig.particleCount = particleCount;\n        this.particleConfig.startOpacity = opacity;\n        this.particleConfig.middleOpacity = opacity;\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\n      }\n    }\n  }\n});\n","import { TYPE } from \"three-ammo/constants\";\nimport { emojis } from \"./emoji\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nfunction setOffsetVector(i, totalNumEmojis, width, spacing, offsetVector) {\n  const sign = i & 1 ? -1 : 1;\n  offsetVector.y = 0;\n  if (totalNumEmojis % 2 === 0) {\n    offsetVector.x = (spacing / 2 + width / 2 + Math.floor(i / 2) * (width + spacing)) * sign;\n    offsetVector.z = (Math.floor(i / 2) * width) / 2;\n  } else if (i !== 0) {\n    offsetVector.x = (width + spacing) * Math.floor((i + 1) / 2) * -sign;\n    offsetVector.z = (Math.floor((i + 1) / 2) * width) / 2;\n  }\n}\n\nAFRAME.registerComponent(\"emoji-hud\", {\n  schema: {\n    spawnerScale: { default: 0.1 },\n    spawnedScale: { default: 0.5 },\n    camera: { type: \"selector\", default: \"#avatar-pov-node\" },\n    hudAngle: { default: -0.5 },\n    minHudAngle: { default: -0.2 },\n    maxHudAngle: { default: 0.7 },\n    hudDistance: { default: 0.4 },\n    spawnerPlatformWidth: { default: 0.0625 },\n    spawnerPlatformSpacing: { default: 0.021 }\n  },\n\n  init: (() => {\n    const cameraWorldPosition = new THREE.Vector3();\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      this._onFrozen = this._onFrozen.bind(this);\n      this._onThaw = this._onThaw.bind(this);\n\n      const width = this.data.spawnerPlatformWidth;\n      const spacing = this.data.spawnerPlatformSpacing;\n\n      this.spawnerEntities = [];\n\n      for (let i = 0; i < emojis.length; i++) {\n        const spawnerEntity = document.createElement(\"a-entity\");\n        spawnerEntity.setAttribute(\"media-loader\", { src: emojis[i].model });\n        spawnerEntity.setAttribute(\"hoverable-visuals\", \"\");\n        spawnerEntity.setAttribute(\"scale\", {\n          x: this.data.spawnerScale,\n          y: this.data.spawnerScale,\n          z: this.data.spawnerScale\n        });\n        spawnerEntity.setAttribute(\"is-remote-hover-target\", \"\");\n        spawnerEntity.setAttribute(\"tags\", { isHandCollisionTarget: false });\n        spawnerEntity.setAttribute(\"visibility-while-frozen\", {\n          requireHoverOnNonMobile: false,\n          withPermission: \"spawn_emoji\"\n        });\n        spawnerEntity.setAttribute(\"css-class\", \"interactable\");\n        spawnerEntity.setAttribute(\"body-helper\", {\n          mass: 0,\n          type: TYPE.STATIC,\n          collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n        });\n\n        spawnerEntity.addEventListener(\"spawned-entity-created\", e => {\n          if (this.el.sceneEl.is(\"vr-mode\")) {\n            return;\n          }\n          const object3D = e.detail.target.object3D;\n          const cameraObject3D = this.data.camera.object3D;\n          object3D.updateMatrices();\n          cameraObject3D.getWorldPosition(cameraWorldPosition);\n          object3D.lookAt(cameraWorldPosition.x, object3D.position.y, cameraWorldPosition.z);\n          object3D.matrixNeedsUpdate = true;\n        });\n\n        spawnerEntity.addEventListener(\"spawned-entity-loaded\", e => {\n          const particleEmitterConfig = emojis[i].particleEmitterConfig;\n          e.detail.target.querySelector(\".particle-emitter\").setAttribute(\"particle-emitter\", particleEmitterConfig);\n          e.detail.target.setAttribute(\"emoji\", { particleEmitterConfig: particleEmitterConfig });\n        });\n\n        spawnerEntity.setAttribute(\"super-spawner\", {\n          src: emojis[i].model,\n          template: \"#interactable-emoji\",\n          spawnScale: { x: this.data.spawnedScale, y: this.data.spawnedScale, z: this.data.spawnedScale }\n        });\n\n        setOffsetVector(i, emojis.length, width, spacing, offsetVector);\n\n        spawnerEntity.object3D.position.copy(offsetVector);\n        spawnerEntity.object3D.matrixNeedsUpdate = true;\n\n        this.el.appendChild(spawnerEntity);\n\n        this.spawnerEntities.push(spawnerEntity);\n      }\n    };\n  })(),\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this._onFrozen);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._onThaw);\n    this._updateOffset();\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._onFrozen);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._onThaw);\n  },\n\n  _onFrozen(e) {\n    if (e.detail === \"frozen\") {\n      this._updateOffset();\n      for (let i = 0; i < this.spawnerEntities.length; i++) {\n        this.spawnerEntities[i].components.tags.data.isHandCollisionTarget = true;\n      }\n    }\n  },\n\n  _onThaw(e) {\n    if (e.detail === \"frozen\") {\n      for (let i = 0; i < this.spawnerEntities.length; i++) {\n        this.spawnerEntities[i].components.tags.data.isHandCollisionTarget = false;\n      }\n    }\n  },\n\n  _updateOffset: (function() {\n    const targetWorldPos = new THREE.Vector3();\n    const cameraForward = new THREE.Vector3();\n    const projectedCameraForward = new THREE.Vector3();\n    const angledCameraForward = new THREE.Vector3();\n    const defaultRight = new THREE.Vector3(1, 0, 0);\n    return function() {\n      const obj = this.el.object3D;\n      const cameraObject3D = this.data.camera.object3D;\n      cameraObject3D.updateMatrices();\n      cameraForward.set(0, 0, -1);\n      cameraForward.transformDirection(cameraObject3D.matrixWorld);\n      projectedCameraForward.set(0, 0, -1);\n      projectedCameraForward.transformDirection(cameraObject3D.matrixWorld);\n      projectedCameraForward.projectOnPlane(THREE.Object3D.DefaultUp).normalize();\n      const angle =\n        Math.sign(THREE.Object3D.DefaultUp.dot(cameraForward)) * projectedCameraForward.angleTo(cameraForward);\n      const angleOffset = angle - Math.max(this.data.minHudAngle, Math.min(this.data.maxHudAngle, angle));\n      angledCameraForward.set(0, 0, -1);\n      angledCameraForward.applyAxisAngle(defaultRight, this.data.hudAngle - angleOffset);\n      angledCameraForward.multiplyScalar(this.data.hudDistance);\n      cameraObject3D.localToWorld(angledCameraForward);\n      obj.parent.worldToLocal(angledCameraForward);\n      obj.position.copy(angledCameraForward);\n      obj.updateMatrices(true);\n      cameraObject3D.getWorldPosition(targetWorldPos);\n      obj.lookAt(targetWorldPos);\n      obj.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\n\nfunction insertAfter(el, referenceEl) {\n  referenceEl.parentNode.insertBefore(el, referenceEl.nextSibling);\n}\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\n\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    this.leftMock = document.createElement(\"div\");\n    this.leftMock.classList.add(styles.mockJoystick);\n    this.leftMockSmall = document.createElement(\"div\");\n    this.leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    this.leftMock.appendChild(this.leftMockSmall);\n    this.mockJoystickContainer.appendChild(this.leftMock);\n    this.rightMock = document.createElement(\"div\");\n    this.rightMock.classList.add(styles.mockJoystick);\n    this.rightMockSmall = document.createElement(\"div\");\n    this.rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    this.rightMock.appendChild(this.rightMockSmall);\n    this.mockJoystickContainer.appendChild(this.rightMock);\n\n    this.enableLeft = window.APP.store.state.preferences.enableOnScreenJoystickLeft;\n    this.enableRight = window.APP.store.state.preferences.enableOnScreenJoystickRight;\n    if (this.enableLeft || this.enableRight) {\n      // Add the joystick container after the canvas element but before the rest of the UI.\n      insertAfter(this.mockJoystickContainer, this.el.sceneEl.canvas);\n    }\n    if (this.enableLeft) {\n      this.createLeftStick();\n    } else {\n      this.leftMock.classList.add(styles.hidden);\n      this.leftMockSmall.classList.add(styles.hidden);\n    }\n    if (this.enableRight) {\n      this.createRightStick();\n    } else {\n      this.rightMock.classList.add(styles.hidden);\n      this.rightMockSmall.classList.add(styles.hidden);\n    }\n    this.onPreferenceChange = this.onPreferenceChange.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.onPreferenceChange);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.displacement = new THREE.Vector3();\n    this.lookDy = 0;\n    this.lookDx = 0;\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onPreferenceChange() {\n    const newEnableLeft = window.APP.store.state.preferences.enableOnScreenJoystickLeft;\n    const newEnableRight = window.APP.store.state.preferences.enableOnScreenJoystickRight;\n    const isChanged = this.enableLeft !== newEnableLeft || this.enableRight !== newEnableRight;\n    if (!isChanged) {\n      return;\n    }\n    if (!this.enableLeft && newEnableLeft) {\n      this.createLeftStick();\n    } else if (this.enableLeft && !newEnableLeft) {\n      this.leftMock.classList.add(styles.hidden);\n      this.leftMockSmall.classList.add(styles.hidden);\n      this.leftStick.destroy();\n      this.leftTouchZone.parentNode.removeChild(this.leftTouchZone);\n      this.leftStick = null;\n      this.leftTouchZone = null;\n    }\n    if (!this.enableRight && newEnableRight) {\n      this.createRightStick();\n    } else if (this.enableRight && !newEnableRight) {\n      this.rightMock.classList.add(styles.hidden);\n      this.rightMockSmall.classList.add(styles.hidden);\n      this.rightStick.destroy();\n      this.rightTouchZone.parentNode.removeChild(this.rightTouchZone);\n      this.rightStick = null;\n      this.rightTouchZone = null;\n    }\n    this.enableLeft = newEnableLeft;\n    this.enableRight = newEnableRight;\n\n    if (this.enableLeft) {\n      this.leftMock.classList.remove(styles.hidden);\n      this.leftMockSmall.classList.remove(styles.hidden);\n      this.leftStick.on(\"start\", this.onFirstInteraction);\n    }\n    if (this.enableRight) {\n      this.rightMock.classList.remove(styles.hidden);\n      this.rightMockSmall.classList.remove(styles.hidden);\n      this.rightStick.on(\"start\", this.onFirstInteraction);\n    }\n    if ((this.enableLeft || this.enableRight) && !this.mockJoystickContainer.parentNode) {\n      insertAfter(this.mockJoystickContainer, this.el.sceneEl.canvas);\n    }\n    if (!this.enableLeft && !this.enableRight) {\n      this.mockJoystickContainer.parentNode &&\n        this.mockJoystickContainer.parentNode.removeChild(this.mockJoystickContainer);\n    }\n  },\n\n  createRightStick() {\n    this.rightTouchZone = document.createElement(\"div\");\n    this.rightTouchZone.classList.add(styles.touchZone, styles.right);\n    insertAfter(this.rightTouchZone, this.mockJoystickContainer);\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n  },\n\n  createLeftStick() {\n    this.leftTouchZone = document.createElement(\"div\");\n    this.leftTouchZone.classList.add(styles.touchZone, styles.left);\n    insertAfter(this.leftTouchZone, this.mockJoystickContainer);\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n  },\n\n  onFirstInteraction() {\n    if (this.leftStick) this.leftStick.off(\"start\", this.onFirstInteraction);\n    if (this.rightStick) this.rightStick.off(\"start\", this.onFirstInteraction);\n    this.mockJoystickContainer.parentNode &&\n      this.mockJoystickContainer.parentNode.removeChild(this.mockJoystickContainer);\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    if (window.APP.preferenceScreenIsVisible) return;\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    this.displacement.set(Math.cos(angle), 0, -Math.sin(angle)).multiplyScalar(force * 1.85);\n    this.moving = true;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.displacement.set(0, 0, 0);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    if (window.APP.preferenceScreenIsVisible) return;\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.05;\n    this.rotating = true;\n    this.lookDy = -Math.cos(angle) * force * turnStrength;\n    this.lookDx = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.lookDx = 0;\n    this.lookDy = 0;\n    this.el.sceneEl.emit(\"rotateX\", this.lookDx);\n  },\n\n  tick() {\n    if (this.inVr) {\n      return;\n    }\n    if (this.moving) {\n      this.characterController.enqueueRelativeMotion(this.displacement);\n    }\n    if (this.rotating) {\n      this.characterController.enqueueInPlaceRotationAroundWorldUp(this.lookDy);\n      this.el.sceneEl.emit(\"rotateX\", this.lookDx);\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    if (this.leftTouchZone) this.leftTouchZone.style.display = \"none\";\n    if (this.rightTouchZone) this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    if (this.leftTouchZone) this.leftTouchZone.style.display = \"block\";\n    if (this.rightTouchZone) this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    this.mockJoystickContainer.parentNode &&\n      this.mockJoystickContainer.parentNode.removeChild(this.mockJoystickContainer);\n    if (this.leftTouchZone) this.leftTouchZone.parentNode.removeChild(this.leftTouchZone);\n    if (this.rightTouchZone) this.rightTouchZone.parentNode.removeChild(this.rightTouchZone);\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst { Vector3, Quaternion, Matrix4, Euler } = THREE;\n\nfunction quaternionAlmostEquals(epsilon, u, v) {\n  // Note: q and -q represent same rotation\n  return (\n    (Math.abs(u.x - v.x) < epsilon &&\n      Math.abs(u.y - v.y) < epsilon &&\n      Math.abs(u.z - v.z) < epsilon &&\n      Math.abs(u.w - v.w) < epsilon) ||\n    (Math.abs(-u.x - v.x) < epsilon &&\n      Math.abs(-u.y - v.y) < epsilon &&\n      Math.abs(-u.z - v.z) < epsilon &&\n      Math.abs(-u.w - v.w) < epsilon)\n  );\n}\n\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\nconst HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, -Math.PI / 2, 0))\n};\n\nconst angleOnXZPlaneBetweenMatrixRotations = (function() {\n  const XZ_PLANE_NORMAL = new THREE.Vector3(0, -1, 0);\n  const v1 = new THREE.Vector3();\n  const v2 = new THREE.Vector3();\n  return function angleOnXZPlaneBetweenMatrixRotations(matrixA, matrixB) {\n    v1.setFromMatrixColumn(matrixA, 2).projectOnPlane(XZ_PLANE_NORMAL);\n    v2.setFromMatrixColumn(matrixB, 2).projectOnPlane(XZ_PLANE_NORMAL);\n    return v1.angleTo(v2);\n  };\n})();\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    rotationSpeed: { default: 8 },\n    maxLerpAngle: { default: 90 * THREE.Math.DEG2RAD },\n    alwaysUpdate: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.isInView = true;\n    this.hasConvergedHips = false;\n    this.lastCameraTransform = new THREE.Matrix4();\n    waitForDOMContentLoaded().then(() => {\n      this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n    });\n\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"ik\");\n    this.forceIkUpdate = true;\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"ik\");\n  },\n\n  update(oldData) {\n    this.avatar = this.el.object3D;\n\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.copy(this.middleEyeMatrix).invert();\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    root.updateMatrices();\n    const { camera, leftController, rightController } = this.ikRoot;\n\n    camera.object3D.updateMatrix();\n\n    const hasNewCameraTransform = !this.lastCameraTransform.equals(camera.object3D.matrix);\n\n    // Optimization: if the camera hasn't moved and the hips converged to the target orientation on a previous frame,\n    // then the avatar does not need any IK this frame.\n    //\n    // Update in-view avatars every frame, and update out-of-view avatars via frame scheduler.\n    if (\n      this.data.alwaysUpdate ||\n      this.forceIkUpdate ||\n      (this.isInView && (hasNewCameraTransform || !this.hasConvergedHips))\n    ) {\n      if (hasNewCameraTransform) {\n        this.lastCameraTransform.copy(camera.object3D.matrix);\n      }\n\n      const {\n        avatar,\n        head,\n        neck,\n        chest,\n        cameraForward,\n        headTransform,\n        invMiddleEyeToHead,\n        invHipsToHeadVector,\n        flipY,\n        cameraYRotation,\n        cameraYQuaternion,\n        invHipsQuaternion,\n        rootToChest,\n        invRootToChest\n      } = this;\n\n      // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n      cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n      // Compute the head position such that the hmd position would be in line with the middleEye\n      headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n      // Then position the avatar such that the head is aligned with headTransform\n      // (which positions middleEye in line with the hmd)\n      //\n      // Note that we position the avatar itself, *not* the hips, since positioning the\n      // hips will use vertex skinning to do the root displacement, which results in\n      // frustum culling errors since three.js does not take into account skinning when\n      // computing frustum culling sphere bounds.\n      avatar.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n      avatar.matrixNeedsUpdate = true;\n\n      // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n      cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n      cameraYRotation.x = 0;\n      cameraYRotation.z = 0;\n      cameraYQuaternion.setFromEuler(cameraYRotation);\n\n      if (this._hadFirstTick) {\n        camera.object3D.updateMatrices();\n        avatar.updateMatrices();\n        // Note: Camera faces down -Z, avatar faces down +Z\n        const yDelta = Math.PI - angleOnXZPlaneBetweenMatrixRotations(camera.object3D.matrixWorld, avatar.matrixWorld);\n\n        if (yDelta > this.data.maxLerpAngle) {\n          avatar.quaternion.copy(cameraYQuaternion);\n        } else {\n          avatar.quaternion.slerpQuaternions(\n            avatar.quaternion,\n            cameraYQuaternion,\n            (this.data.rotationSpeed * dt) / 1000\n          );\n        }\n      } else {\n        avatar.quaternion.copy(cameraYQuaternion);\n      }\n\n      this.hasConvergedHips = quaternionAlmostEquals(0.0001, cameraYQuaternion, avatar.quaternion);\n\n      // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n      // and apply it to the head\n      invHipsQuaternion.copy(avatar.quaternion).invert();\n      head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n      avatar.updateMatrix();\n      rootToChest.multiplyMatrices(avatar.matrix, chest.matrix);\n      invRootToChest.copy(rootToChest).invert();\n\n      root.matrixNeedsUpdate = true;\n      neck.matrixNeedsUpdate = true;\n      head.matrixNeedsUpdate = true;\n      chest.matrixNeedsUpdate = true;\n    }\n\n    const { leftHand, rightHand } = this;\n\n    if (leftHand) this.updateHand(HAND_ROTATIONS.left, leftHand, leftController.object3D, true, this.isInView);\n    if (rightHand) this.updateHand(HAND_ROTATIONS.right, rightHand, rightController.object3D, false, this.isInView);\n    this.forceIkUpdate = false;\n\n    if (!this._hadFirstTick) {\n      // Ensure the avatar is not shown until we've done our first IK step, to prevent seeing mis-oriented/t-pose pose or our own avatar at the wrong place.\n      this.ikRoot.el.object3D.visible = true;\n      this._hadFirstTick = true;\n      this.el.emit(\"ik-first-tick\");\n    }\n  },\n\n  updateHand(handRotation, handObject3D, controllerObject3D, isLeft, isInView) {\n    const handMatrix = handObject3D.matrix;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = handObject3D.el.components[\"personal-space-invader\"];\n\n    if (spaceInvader) {\n      // If this hand has an invader, defer to it to manage visibility overall but tell it to hide based upon controller state\n      spaceInvader.setAlwaysHidden(!controllerObject3D.visible);\n    } else {\n      handObject3D.visible = controllerObject3D.visible;\n    }\n\n    // Optimization: skip IK update if not in view and not forced by frame scheduler\n    if (controllerObject3D.visible && (isInView || this.forceIkUpdate || this.data.alwaysUpdate)) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      handMatrix.multiply(handRotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _runScheduledWork() {\n    // Every scheduled run, we force an IK update on the next frame (so at most one avatar with forced IK per frame)\n    // and also update the this.isInView bit on the avatar which is used to determine if an IK update should be run\n    // every frame.\n    this.forceIkUpdate = true;\n\n    this._updateIsInView();\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const cameraWorld = new THREE.Vector3();\n    const isInViewOfCamera = (screenCamera, pos) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromProjectionMatrix(frustumMatrix);\n      return frustum.containsPoint(pos);\n    };\n\n    return function() {\n      if (!this.playerCamera) return;\n\n      const camera = this.ikRoot.camera.object3D;\n      camera.getWorldPosition(cameraWorld);\n\n      // Check player camera\n      this.isInView = isInViewOfCamera(this.playerCamera, cameraWorld);\n\n      if (!this.isInView) {\n        // Check in-game camera if rendering to viewfinder and owned\n        const cameraTools = this.el.sceneEl.systems[\"camera-tools\"];\n\n        if (cameraTools) {\n          cameraTools.ifMyCameraRenderingViewfinder(cameraTool => {\n            this.isInView = this.isInView || isInViewOfCamera(cameraTool.camera, cameraWorld);\n          });\n        }\n      }\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  init() {\n    this.pose = POSES.open;\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n  }\n});\n","import { showHoverEffect } from \"../utils/permissions-utils\";\n\n/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.handleLeftVisuals = this.handleLeftVisuals.bind(this);\n    this.handleRightVisuals = this.handleRightVisuals.bind(this);\n    this.hadLeftVisualLastFrame = false;\n    this.hadRightVisualLastFrame = false;\n    this.uniforms = null;\n    this.sweepParams = [0, 1.0];\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    // Push down loops to assist JIT:\n    if (this.data.hand === \"left\") {\n      this.handleLeftVisuals();\n    } else {\n      this.handleRightVisuals();\n    }\n  },\n\n  handleLeftVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const interactingElement = interaction.state.leftHand.held || interaction.state.leftHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadLeftVisualLastFrame) return;\n    this.hadLeftVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorOne.value = !hideVisual;\n      uniform.hubs_InteractorOnePos.value[0] = elements[12];\n      uniform.hubs_InteractorOnePos.value[1] = elements[13];\n      uniform.hubs_InteractorOnePos.value[2] = elements[14];\n    }\n  },\n\n  handleRightVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const interactingElement = interaction.state.rightHand.held || interaction.state.rightHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadRightVisualLastFrame) return;\n    this.hadRightVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorTwo.value = !hideVisual;\n      uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n      uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n      uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    },\n    lookAt: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      if (this.data.on) {\n        this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n      } else {\n        this.updateOffset();\n      }\n    });\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    const targetWorldPos = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      if (this.data.lookAt) {\n        target.getWorldPosition(targetWorldPos);\n        obj.updateMatrices(true);\n        obj.lookAt(targetWorldPos);\n      } else {\n        target.getWorldQuaternion(obj.quaternion);\n      }\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\nimport { registerComponentInstance, deregisterComponentInstance } from \"../utils/component-utils\";\nimport defaultAvatar from \"../assets/models/DefaultAvatar.glb\";\nimport { MediaDevicesEvents } from \"../utils/media-devices-utils\";\nimport { createHeadlessModelForSkinnedMesh } from \"../utils/three-utils\";\nimport { Layers } from \"./layers\";\n\nfunction ensureAvatarNodes(json) {\n  const { nodes } = json;\n  if (!nodes.some(node => node.name === \"Head\")) {\n    // If the avatar model doesn't have a Head node. The user has probably chosen a custom GLB.\n    // So, we need to construct a suitable hierarchy for avatar functionality to work.\n    // We re-parent the original root node to the Head node and set the scene root to a new AvatarRoot.\n\n    // Note: We assume that the first node in the primary scene is the one we care about.\n    const originalRoot = json.scenes[json.scene].nodes[0];\n    nodes.push({ name: \"LeftEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({ name: \"RightEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({\n      name: \"Head\",\n      children: [originalRoot, nodes.length - 1, nodes.length - 2],\n      extensions: { MOZ_hubs_components: { \"scale-audio-feedback\": \"\" } }\n    });\n    nodes.push({ name: \"Neck\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Spine\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Hips\", children: [nodes.length - 1] });\n    nodes.push({ name: \"AvatarRoot\", children: [nodes.length - 1] });\n    json.scenes[json.scene].nodes[0] = nodes.length - 1;\n  }\n  return json;\n}\n\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    avatarSrc: { type: \"string\" },\n    avatarType: { type: \"string\", default: AVATAR_TYPES.SKINNABLE },\n    muted: { default: false },\n    isSharingAvatarCamera: { default: false }\n  },\n  init() {\n    this.applyProperties = this.applyProperties.bind(this);\n    this.handleModelError = this.handleModelError.bind(this);\n    this.handleRemoteModelError = this.handleRemoteModelError.bind(this);\n    this.update = this.update.bind(this);\n    this.onPresenceUpdated = this.onPresenceUpdated.bind(this);\n    this.onMicStateChanged = this.onMicStateChanged.bind(this);\n    this.onAvatarModelLoaded = this.onAvatarModelLoaded.bind(this);\n\n    this.isLocalPlayerInfo = this.el.id === \"avatar-rig\";\n    this.playerSessionId = null;\n\n    if (!this.isLocalPlayerInfo) {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n        this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n        const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n        if (playerPresence) {\n          this.updateFromPresenceMeta(playerPresence.metas[0]);\n        }\n      });\n    }\n\n    registerComponentInstance(this, \"player-info\");\n  },\n\n  remove() {\n    const avatarEl = this.el.querySelector(\"[avatar-audio-source]\");\n    APP.isAudioPaused.delete(avatarEl);\n    deregisterComponentInstance(this, \"player-info\");\n  },\n\n  onAvatarModelLoaded(e) {\n    this.applyProperties(e);\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.isLocalPlayerInfo && e.target === modelEl) {\n      let isSkinnedAvatar = false;\n      modelEl.object3D.traverse(function(o) {\n        if (o.isSkinnedMesh) {\n          const headlessMesh = createHeadlessModelForSkinnedMesh(o);\n          if (headlessMesh) {\n            isSkinnedAvatar = true;\n            o.parent.add(headlessMesh);\n          }\n        }\n      });\n      // This is to support using arbitrary models as avatars.\n      // TODO We can drop support for this when we go full VRM, or at least handle it earlier in the process.\n      if (!isSkinnedAvatar) {\n        modelEl.object3D.traverse(function(o) {\n          if (o.isMesh) o.layers.set(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n        });\n      }\n    }\n  },\n\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.onAvatarModelLoaded);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.onPresenceUpdated);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleModelError);\n    } else {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleRemoteModelError);\n    }\n    window.APP.store.addEventListener(\"statechanged\", this.update);\n\n    this.el.sceneEl.addEventListener(\"stateadded\", this.update);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.update);\n\n    if (this.isLocalPlayerInfo) {\n      APP.dialog.on(\"mic-state-changed\", this.onMicStateChanged);\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.onAvatarModelLoaded);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.onPresenceUpdated);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleModelError);\n    } else {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleRemoteModelError);\n    }\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.update);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.update);\n    window.APP.store.removeEventListener(\"statechanged\", this.update);\n\n    if (this.isLocalPlayerInfo) {\n      APP.dialog.off(\"mic-state-changed\", this.onMicStateChanged);\n    }\n  },\n\n  onPresenceUpdated(e) {\n    this.updateFromPresenceMeta(e.detail);\n  },\n\n  updateFromPresenceMeta(presenceMeta) {\n    if (!this.playerSessionId && this.isLocalPlayerInfo) {\n      this.playerSessionId = NAF.clientId;\n    }\n    if (!this.playerSessionId) return;\n    if (this.playerSessionId !== presenceMeta.sessionId) return;\n\n    this.permissions = presenceMeta.permissions;\n  },\n\n  update(oldData) {\n    if (this.data.muted !== oldData.muted) {\n      this.el.emit(\"remote_mute_updated\", { muted: this.data.muted });\n    }\n    this.applyProperties();\n  },\n\n  can(perm) {\n    return !!this.permissions && this.permissions[perm];\n  },\n\n  applyProperties(e) {\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.components[\"gltf-model-plus\"].jsonPreprocessor = ensureAvatarNodes;\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n    }\n\n    if (!e || e.target === modelEl) {\n      const uniforms = injectCustomShaderChunks(this.el.object3D);\n      this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n        el.components[\"hover-visuals\"].uniforms = uniforms;\n      });\n    }\n\n    const videoTextureTargets = modelEl.querySelectorAll(\"[video-texture-target]\");\n\n    const sessionId = this.isLocalPlayerInfo ? NAF.clientId : this.playerSessionId;\n\n    for (const el of Array.from(videoTextureTargets)) {\n      el.setAttribute(\"video-texture-target\", {\n        src: this.data.isSharingAvatarCamera ? `hubs://clients/${sessionId}/video` : \"\"\n      });\n\n      if (this.isLocalPlayerInfo) {\n        el.setAttribute(\"emit-scene-event-on-remove\", `event:${MediaDevicesEvents.VIDEO_SHARE_ENDED}`);\n      }\n    }\n\n    const avatarEl = this.el.querySelector(\"[avatar-audio-source]\");\n    if (this.data.muted) {\n      APP.isAudioPaused.add(avatarEl);\n    } else {\n      APP.isAudioPaused.delete(avatarEl);\n    }\n  },\n\n  handleModelError() {\n    window.APP.store.resetToRandomDefaultAvatar();\n  },\n\n  handleRemoteModelError() {\n    this.data.avatarSrc = defaultAvatar;\n    this.applyProperties();\n  },\n\n  onMicStateChanged({ enabled }) {\n    this.el.setAttribute(\"player-info\", { muted: !enabled });\n  }\n});\n","import anime from \"animejs\";\nimport MovingAverage from \"moving-average\";\nimport { getThemeColor } from \"../utils/theme\";\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { findAncestorWithComponent } from \"../utils/scene-graph\";\nimport { THREE } from \"aframe\";\nimport nextTick from \"../utils/next-tick\";\nimport { createPlaneBufferGeometry, setMatrixWorld } from \"../utils/three-utils\";\nimport { textureLoader } from \"../utils/media-utils\";\n\nimport handRaisedIconSrc from \"../assets/hud/hand-raised.png\";\n\nconst DEBUG = qsTruthy(\"debug\");\nconst NAMETAG_BACKGROUND_PADDING = 0.05;\nconst NAMETAG_STATUS_BORDER_PADDING = 0.035;\nconst NAMETAG_MIN_WIDTH = 0.6;\nconst NAMETAG_HEIGHT = 0.25;\nconst NAMETAG_OFFSET = 0.2;\nconst TYPING_ANIM_SPEED = 150;\nconst DISPLAY_NAME_LENGTH = 18;\n\nconst ANIM_CONFIG = {\n  duration: 400,\n  easing: \"easeOutQuart\",\n  elasticity: 400,\n  loop: 0,\n  round: false\n};\n\nconst nametagVolumeGeometry = new THREE.PlaneBufferGeometry(1, 0.025);\nconst nametagVolumeMaterial = new THREE.MeshBasicMaterial({ color: \"#7ED320\" });\n\nconst nametagTypingGeometry = new THREE.CircleBufferGeometry(0.01, 6);\n\nconst handRaisedTexture = textureLoader.load(handRaisedIconSrc);\nconst handRaisedGeometry = createPlaneBufferGeometry(0.2, 0.2, 1, 1, handRaisedTexture.flipY);\nconst handRaisedMaterial = new THREE.MeshBasicMaterial({ transparent: true, map: handRaisedTexture });\n\nAFRAME.registerComponent(\"name-tag\", {\n  schema: {},\n  init() {\n    this.store = window.APP.store;\n    this.displayName = null;\n    this.identityName = null;\n    this.isTalking = false;\n    this.isTyping = false;\n    this.isOwner = false;\n    this.isRecording = false;\n    this.isHandRaised = false;\n    this.volumeAvg = new MovingAverage(128);\n    this.shouldBeVisible = true;\n    this.size = new THREE.Vector3();\n    this.avatarAABB = new THREE.Box3();\n    this.avatarAABBSize = new THREE.Vector3();\n    this.avatarAABBCenter = new THREE.Vector3();\n    this.nametagHeight = 0;\n    this.isAvatarReady = false;\n    this.lastUpdateTime = Date.now();\n\n    this.onPresenceUpdated = this.onPresenceUpdated.bind(this);\n    this.onModelLoading = this.onModelLoading.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onModelIkFirstTick = this.onModelIkFirstTick.bind(this);\n    this.onStateChanged = this.onStateChanged.bind(this);\n\n    this.nametag = this.el.object3D;\n    this.nametagIdentityName = this.el.querySelector(\".identityName\").object3D;\n    this.nametagBackground = this.el.querySelector(\".nametag-background\").object3D;\n    this.nametagStatusBorder = this.el.querySelector(\".nametag-status-border\").object3D;\n    this.recordingBadge = this.el.querySelector(\".recordingBadge\").object3D;\n    this.modBadge = this.el.querySelector(\".modBadge\").object3D;\n    this.nametagText = this.el.querySelector(\".nametag-text\").object3D;\n\n    this.handRaised = new THREE.Mesh(handRaisedGeometry, handRaisedMaterial);\n    this.handRaised.position.set(0, -0.3, 0.001);\n    this.el.object3D.add(this.handRaised);\n\n    this.nametagVolume = new THREE.Mesh(nametagVolumeGeometry, nametagVolumeMaterial);\n    this.nametagVolume.position.set(0, -0.075, 0.001);\n    this.nametagVolume.visible = false;\n    this.el.object3D.add(this.nametagVolume);\n\n    // TODO this is horribly inneficient draw call and geometry wise. Replace with custom shader code or at least a uv-croll image\n    this.nametagTyping = new THREE.Group();\n    this.nametagTyping.position.set(0, -0.075, 0.001);\n    for (let i = 0; i < 5; i++) {\n      const dot = new THREE.Mesh(\n        nametagTypingGeometry,\n        new THREE.MeshBasicMaterial({ transparent: true, color: 0xffffff, depthWrite: false })\n      );\n      dot.position.x = i * 0.035 - 0.07;\n      this.nametagTyping.add(dot);\n    }\n    this.el.object3D.add(this.nametagTyping);\n\n    this.updateTheme();\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n      this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n      const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n      if (playerPresence) {\n        this.updateFromPresenceMeta(playerPresence.metas[0]);\n      }\n    });\n\n    if (DEBUG) {\n      this.avatarAABBHelper = new THREE.Box3Helper(this.avatarAABB, 0xffff00);\n      this.el.sceneEl.object3D.add(this.avatarAABBHelper);\n    }\n\n    this.onStateChanged();\n  },\n\n  remove() {\n    if (DEBUG) this.el.sceneEl.object3D.remove(this.avatarAABBHelper);\n  },\n\n  tick: (() => {\n    let typingAnimTime = 0;\n    const worldPos = new THREE.Vector3();\n    const mat = new THREE.Matrix4();\n    return function(t) {\n      if (!this.isAvatarReady) {\n        this.nametag.visible = false;\n        return;\n      }\n      this.wasTalking = this.isTalking;\n      this.isTalking = this.audioAnalyzer.avatarIsTalking;\n\n      if (this.shouldBeVisible) {\n        this.nametag.visible = true;\n        if (this.isTalking !== this.wasTalking) {\n          this.resizeNameTag();\n        }\n        if (this.isTalking) {\n          this.nametagVolume.visible = this.isTalking;\n          this.nametagVolume.scale.setX(this.audioAnalyzer.volume * this.size.x);\n          this.nametagVolume.matrixNeedsUpdate = true;\n          this.nametagTyping.visible = false;\n        } else {\n          if (this.isTyping) {\n            this.nametagTyping.visible = true;\n            typingAnimTime = t;\n            this.nametagTyping.traverse(o => {\n              if (o.material) {\n                o.material.opacity = (Math.sin(typingAnimTime / TYPING_ANIM_SPEED) + 1) / 2;\n                typingAnimTime -= TYPING_ANIM_SPEED;\n              }\n            });\n          } else {\n            this.nametagTyping.visible = false;\n          }\n        }\n        this.nametagStatusBorder.visible = this.isTyping || this.isTalking || this.isHandRaised;\n        this.recordingBadge.visible = this.isRecording;\n        this.modBadge.visible = this.isOwner && !this.isRecording;\n        this.handRaised.visible = this.isHandRaised;\n\n        this.neck.getWorldPosition(worldPos);\n        worldPos.setY(this.nametagElPosY + this.ikRoot.position.y);\n        mat.setPosition(worldPos);\n        setMatrixWorld(this.nametag, mat);\n      } else {\n        this.nametag.visible = false;\n      }\n\n      if (DEBUG) {\n        this.updateAvatarModelAABB();\n        this.avatarAABBHelper.matrixNeedsUpdate = true;\n        this.avatarAABBHelper.updateMatrixWorld(true);\n      }\n    };\n  })(),\n\n  play() {\n    this.el.parentEl.addEventListener(\"model-loading\", this.onModelLoading);\n    this.el.parentEl.addEventListener(\"model-loaded\", this.onModelLoaded);\n    this.el.parentEl.addEventListener(\"ik-first-tick\", this.onModelIkFirstTick);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.onPresenceUpdated);\n    window.APP.store.addEventListener(\"statechanged\", this.onStateChanged);\n    this.el.sceneEl.systems[\"hubs-systems\"].nameTagSystem.register(this);\n  },\n\n  pause() {\n    this.el.parentEl.removeEventListener(\"model-loading\", this.onModelLoading);\n    this.el.parentEl.removeEventListener(\"model-loaded\", this.onModelLoaded);\n    this.el.parentEl.removeEventListener(\"ik-first-tick\", this.onModelIkFirstTick);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.onPresenceUpdated);\n    window.APP.store.removeEventListener(\"statechanged\", this.onStateChanged);\n    this.el.sceneEl.systems[\"hubs-systems\"].nameTagSystem.unregister(this);\n  },\n\n  onPresenceUpdated({ detail: presenceMeta }) {\n    if (presenceMeta.sessionId === this.playerSessionId) {\n      this.updateFromPresenceMeta(presenceMeta);\n    }\n  },\n\n  updateFromPresenceMeta(presenceMeta) {\n    this.displayName = presenceMeta.profile.displayName;\n    this.identityName = presenceMeta.profile.identityName;\n    this.isRecording = !!(presenceMeta.streaming || presenceMeta.recording);\n    this.isOwner = !!(presenceMeta.roles && presenceMeta.roles.owner);\n    this.isTyping = !!presenceMeta.typing;\n    this.isHandRaised = !!presenceMeta.hand_raised;\n    if (this.isAvatarReady) {\n      this.updateDisplayName();\n      this.updateHandRaised();\n      this.resizeNameTag();\n    }\n  },\n\n  updateDisplayName() {\n    if (this.displayName && this.displayName !== this.prevDisplayName) {\n      this.nametagText.el.addEventListener(\n        \"text-updated\",\n        () => {\n          if (this.nametagText.el) {\n            this.nametagText.el.components[\"text\"].getSize(this.size);\n            this.size.x = Math.max(this.size.x, NAMETAG_MIN_WIDTH);\n            this.resizeNameTag();\n          }\n        },\n        { once: true }\n      );\n      if (this.displayName.length > DISPLAY_NAME_LENGTH) {\n        this.displayName = this.displayName.slice(0, DISPLAY_NAME_LENGTH).concat(\"...\");\n      }\n      this.nametagText.el.setAttribute(\"text\", {\n        value: this.displayName\n      });\n      this.prevDisplayName = this.displayName;\n    }\n\n    if (this.identityName) {\n      if (this.identityName.length > DISPLAY_NAME_LENGTH) {\n        this.identityName = this.identityName.slice(0, DISPLAY_NAME_LENGTH).concat(\"...\");\n      }\n      this.nametagIdentityName.el.setAttribute(\"text\", { value: this.identityName });\n    }\n  },\n\n  onModelLoading() {\n    this.model = null;\n    this.isAvatarReady = false;\n  },\n\n  onModelLoaded({ detail: { model } }) {\n    this.model = model;\n  },\n\n  async onModelIkFirstTick() {\n    await nextTick();\n    this.ikRoot = findAncestorWithComponent(this.el, \"ik-root\").object3D;\n    this.neck = this.ikRoot.el.querySelector(\".Neck\").object3D;\n    this.audioAnalyzer = this.ikRoot.el.querySelector(\".AvatarRoot\").components[\"networked-audio-analyser\"];\n\n    this.updateAvatarModelAABB();\n    const tmpVector = new THREE.Vector3();\n    this.nametagHeight =\n      Math.abs(tmpVector.subVectors(this.ikRoot.position, this.avatarAABBCenter).y) +\n      this.avatarAABBSize.y / 2 +\n      NAMETAG_OFFSET;\n    this.nametagElPosY = this.nametagHeight + (this.isHandRaised ? NAMETAG_OFFSET : 0);\n    this.nametagText.el.components[\"text\"].getSize(this.size);\n    this.size.x = Math.max(this.size.x, NAMETAG_MIN_WIDTH);\n    this.isAvatarReady = true;\n\n    this.updateDisplayName();\n    this.updateHandRaised();\n    this.resizeNameTag();\n  },\n\n  updateTheme() {\n    this.nametagStatusBorder.el.setAttribute(\n      \"slice9\",\n      \"color\",\n      getThemeColor(this.isHandRaised ? \"nametag-border-color-raised-hand\" : \"nametag-border-color\")\n    );\n    nametagVolumeMaterial.color.set(getThemeColor(\"nametag-volume-color\"));\n    this.nametagBackground.el.setAttribute(\"slice9\", \"color\", getThemeColor(\"nametag-color\"));\n    this.nametagText.el.setAttribute(\"text\", \"color\", getThemeColor(\"nametag-text-color\"));\n  },\n\n  onStateChanged() {\n    this.updateTheme();\n  },\n\n  resizeNameTag() {\n    this.nametagBackground.el.setAttribute(\"slice9\", {\n      width: this.size.x + NAMETAG_BACKGROUND_PADDING * 2,\n      height: NAMETAG_HEIGHT\n    });\n    this.nametagStatusBorder.el.setAttribute(\"slice9\", {\n      width: this.size.x + NAMETAG_BACKGROUND_PADDING * 2 + NAMETAG_STATUS_BORDER_PADDING,\n      height: NAMETAG_HEIGHT + NAMETAG_STATUS_BORDER_PADDING\n    });\n  },\n\n  updateHandRaised() {\n    this.nametagStatusBorder.el.setAttribute(\n      \"slice9\",\n      \"color\",\n      getThemeColor(this.isHandRaised ? \"nametag-border-color-raised-hand\" : \"nametag-border-color\")\n    );\n    const targetScale = this.isHandRaised ? 1 : 0;\n    anime({\n      ...ANIM_CONFIG,\n      targets: {\n        x: this.handRaised.scale.x,\n        y: this.handRaised.scale.y,\n        z: this.handRaised.scale.z\n      },\n      x: targetScale,\n      y: targetScale,\n      z: targetScale,\n      update: anim => {\n        this.handRaised.scale.set(\n          anim.animatables[0].target.x,\n          anim.animatables[0].target.y,\n          anim.animatables[0].target.z\n        );\n        this.handRaised.matrixNeedsUpdate = true;\n      }\n    });\n    anime({\n      ...ANIM_CONFIG,\n      targets: {\n        y: this.nametagElPosY\n      },\n      y: this.nametagHeight + (this.isHandRaised ? NAMETAG_OFFSET : 0),\n      update: anim => {\n        this.nametagElPosY = anim.animatables[0].target.y;\n      }\n    });\n  },\n\n  updateAvatarModelAABB() {\n    if (!this.model) return;\n    this.avatarAABB.setFromObject(this.model);\n    this.avatarAABB.getSize(this.avatarAABBSize);\n    this.avatarAABB.getCenter(this.avatarAABBCenter);\n  }\n});\n","import { LoopOnce } from \"three/src/constants\";\nimport { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n    this.networkField = `${this.id}_hand_pose`;\n\n    const getNetworkedAvatar = el => {\n      if (!el) {\n        window.setTimeout(() => {\n          getNetworkedAvatar(this.el);\n        }, 1000);\n        return;\n      }\n      const networkedAvatar = el.components && el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[this.networkField] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[this.networkField]]);\n    this.pose = this.networkedAvatar.data[this.networkField];\n  },\n\n  animatePose(prev, curr) {\n    if (this.from) {\n      this.from.stop();\n    }\n    if (this.to) {\n      this.to.stop();\n    }\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n    if (this.from) {\n      this.from.setLoop(LoopOnce, -1);\n      this.from.clampWhenFinished = true;\n      this.from.fadeOut(duration);\n      this.from.play();\n    }\n    if (this.to) {\n      this.to.setLoop(LoopOnce, -1);\n      this.to.clampWhenFinished = true;\n      this.to.fadeIn(duration);\n      this.to.play();\n    }\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","import { CAMERA_MODE_FIRST_PERSON } from \"../systems/camera-system\";\nconst TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 } // yaw degrees at wich the hud should reoirent even if the user is looking up\n  },\n  init() {\n    this.onChildHovered = this.onChildHovered.bind(this);\n    this.removeHoverEvents = this.removeHoverEvents.bind(this);\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n    this.store = window.APP.store;\n    this.hoverableChildren = this.el.querySelectorAll(\"[is-remote-hover-target]\");\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3DMap.camera;\n\n    const { offset, lookCutoff, animRange, yawCutoff } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // HUD is always visible until first hover, to increase discoverability.\n    const forceHudVisible = !this.store.state.activity.hasHoveredInWorldHud;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip or if forced.\n    if (forceHudVisible) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible =\n      (!hudOutOfView || forceHudVisible) &&\n      this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_FIRST_PERSON;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n  },\n\n  play() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.addEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  pause() {\n    this.removeHoverEvents();\n  },\n\n  removeHoverEvents() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.removeEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  onChildHovered() {\n    if (!this.store.state.activity.hasHoveredInWorldHud) {\n      this.store.update({ activity: { hasHoveredInWorldHud: true } });\n      this.removeHoverEvents();\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_FREEZE, SOUND_THAW } from \"../systems/sound-effects-system\";\nimport { CAMERA_MODE_INSPECT } from \"../systems/camera-system\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  tick: function() {\n    const scene = this.el.sceneEl;\n    if (!scene.is(\"entered\")) return;\n    const inspecting = scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT;\n    if (inspecting) {\n      if (this.el.is(\"frozen\")) {\n        this.onToggle();\n      }\n      if (!NAF.connection.adapter.frozen) {\n        NAF.connection.adapter.toggleFreeze();\n      }\n      this.wasInspecting = true;\n    } else if (this.wasInspecting) {\n      if (NAF.connection.adapter.frozen) {\n        NAF.connection.adapter.toggleFreeze();\n      }\n      this.wasInspecting = false;\n    } else {\n      const userinput = scene.systems.userinput;\n      const ensureFrozen = userinput.get(paths.actions.ensureFrozen);\n      const thaw = userinput.get(paths.actions.thaw);\n      const toggleFreeze = userinput.get(paths.actions.toggleFreeze);\n\n      const toggleFreezeDueToInput =\n        (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen) || toggleFreeze;\n\n      if (toggleFreezeDueToInput) {\n        this.onToggle();\n      }\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_FREEZE);\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_THAW);\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true },\n    requireHoverOnNonMobile: { type: \"boolean\", default: true },\n    withPermission: { type: \"string\" },\n    withoutPermission: { type: \"string\" },\n    visibleIfOwned: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n\n    waitForDOMContentLoaded().then(() => {\n      this.cameraEl = document.getElementById(\"viewing-camera\");\n      this.updateVisibility();\n    });\n\n    let hoverableSearch = this.el;\n\n    while (hoverableSearch !== document) {\n      if (hoverableSearch.getAttribute(\"is-remote-hover-target\") !== null) {\n        this.hoverable = hoverableSearch;\n        break;\n      }\n\n      hoverableSearch = hoverableSearch.parentNode;\n    }\n    if (!this.hoverable && this.data.requireHoverOnNonMobile) {\n      console.error(\"Didn't find a remote hover target.\");\n    }\n\n    if (!this.data.visibleIfOwned) {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .then(() => {}); //ignore exception, entity might not be networked\n    }\n\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.object3D.visible;\n    const shouldNotBeVisible = isFrozen === !this.data.visible;\n    if (!isVisible && shouldNotBeVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    if (!this.cameraEl) return;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cameraEl.object3DMap.camera, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const isTransforming = this.el.sceneEl.systems[\"transform-selected-object\"].transforming;\n    const isHoldingAnything = this.el.sceneEl.systems.interaction.isHoldingAnything();\n\n    if (this.data.withPermission && this.data.withoutPermission) {\n      throw new Error(\n        \"only withPermission or withoutPermission can be speciifed on visibility-while-frozen, not both.\"\n      );\n    }\n\n    const allowed = !!(\n      (!this.data.withPermission && !this.data.withoutPermission) ||\n      (this.data.withPermission &&\n        window.APP.hubChannel &&\n        window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission)) ||\n      (this.data.withoutPermission &&\n        window.APP.hubChannel &&\n        !window.APP.hubChannel.canOrWillIfCreator(this.data.withoutPermission))\n    );\n\n    let shouldBeVisible =\n      allowed &&\n      ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) &&\n      isWithinDistance &&\n      !isTransforming &&\n      !isHoldingAnything;\n\n    if (this.data.requireHoverOnNonMobile && !isMobile) {\n      shouldBeVisible =\n        shouldBeVisible &&\n        ((this.hoverable &&\n          (this.el.sceneEl.systems.interaction.state.rightRemote.hovered === this.hoverable ||\n            this.el.sceneEl.systems.interaction.state.leftRemote.hovered === this.hoverable)) ||\n          isVisible);\n    }\n\n    if (!this.data.visibleIfOwned) {\n      shouldBeVisible = shouldBeVisible && this.networkedEl && !NAF.utils.isMine(this.networkedEl);\n    }\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nfunction ThreeStats(renderer) {\n  let _rS = null;\n\n  const _values = {\n    \"renderer.info.memory.geometries\": {\n      caption: \"Geometries\"\n    },\n    \"renderer.info.memory.textures\": {\n      caption: \"Textures\"\n    },\n    \"renderer.info.programs\": {\n      caption: \"Programs\"\n    },\n    \"renderer.info.render.calls\": {\n      caption: \"Calls\"\n    },\n    \"renderer.info.render.triangles\": {\n      caption: \"Triangles\",\n      over: 100000\n    },\n    \"renderer.info.render.points\": {\n      caption: \"Points\"\n    }\n  };\n\n  const _groups = [\n    {\n      caption: \"Three.js - Memory\",\n      values: [\"renderer.info.memory.geometries\", \"renderer.info.programs\", \"renderer.info.memory.textures\"]\n    },\n    {\n      caption: \"Three.js - Render\",\n      values: [\"renderer.info.render.calls\", \"renderer.info.render.triangles\", \"renderer.info.render.points\"]\n    }\n  ];\n\n  const _fractions = [];\n\n  function _update() {\n    _rS(\"renderer.info.memory.geometries\").set(renderer.info.memory.geometries);\n    _rS(\"renderer.info.programs\").set(renderer.info.programs.length);\n    _rS(\"renderer.info.memory.textures\").set(renderer.info.memory.textures);\n    _rS(\"renderer.info.render.calls\").set(renderer.info.render.calls);\n    _rS(\"renderer.info.render.triangles\").set(renderer.info.render.triangles);\n    _rS(\"renderer.info.render.points\").set(renderer.info.render.points);\n  }\n\n  function _start() {}\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions\n  };\n}\n\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\nfunction createStats(scene) {\n  const plugins = scene.isMobile ? [] : [new ThreeStats(scene.renderer)];\n  return new window.rStats({\n    css: [],\n    values: {\n      fps: { caption: \"fps\", below: 30 }\n    },\n    groups: [{ caption: \"Framerate\", values: [\"fps\", \"raf\", \"physics\"] }],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n    // HACK for now in rare case where dom isn't ready, just bail\n    if (!this.statsEl) return;\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n    this.inVR = scene.is(\"vr-mode\");\n    this.showFPSCounter = window.APP.store.state.preferences.showFPSCounter;\n    this.fpsEl.style.display = this.showFPSCounter ? \"block\" : \"none\";\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n\n    this.vrStatsEnabled = qsTruthy(\"vrstats\");\n    if (this.vrStatsEnabled) {\n      this.initVRStats();\n    }\n    this.lastUpdate = 0;\n  },\n  initVRStats() {\n    this.vrPanel = document.createElement(\"a-entity\");\n    this.vrPanel.setAttribute(\"text\", { maxWidth: 0.5, value: \"_\", anchorY: \"bottom\" });\n    this.vrPanel.addEventListener(\n      \"loaded\",\n      () =>\n        this.vrPanel.object3D.traverse(x => {\n          if (x.material) x.material.depthTest = false;\n        }),\n      { once: true }\n    );\n    this.el.append(this.vrPanel);\n    const background = new THREE.Mesh(\n      new THREE.PlaneBufferGeometry(0.1, 0.12),\n      new THREE.MeshBasicMaterial({ color: 0x333333, depthTest: false })\n    );\n    background.position.set(-0.2, 0.055, 0);\n    this.el.object3D.add(background);\n  },\n  toggleVRStats() {\n    if (this.vrStatsEnabled) {\n      this.el.object3D.visible = false;\n      this.vrStatsEnabled = false;\n    } else {\n      if (!this.vrPanel) {\n        this.initVRStats();\n      }\n      this.el.object3D.visible = true;\n      this.vrStatsEnabled = true;\n    }\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick(time) {\n    const stats = this.stats;\n    if (!this.statsEl) return;\n    if (this.showFPSCounter !== window.APP.store.state.preferences.showFPSCounter) {\n      this.showFPSCounter = window.APP.store.state.preferences.showFPSCounter;\n      this.fpsEl.style.display = this.showFPSCounter ? \"block\" : \"none\";\n    }\n    if (!this.showFPSCounter) {\n      return;\n    }\n    if (this.data || this.vrStatsEnabled) {\n      // Update rStats\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n      stats(\"physics\").set(this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem.stepDuration);\n\n      const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n      if (batchManagerSystem.batchingEnabled) {\n        const batchManager = batchManagerSystem.batchManager;\n        stats(\"batchdraws\").set(batchManager.batches.length);\n        stats(\"batchinstances\").set(batchManager.instanceCount);\n        stats(\"batchatlassize\").set(batchManager.atlas.arrayDepth);\n      }\n\n      stats().update();\n    } else if (!this.inVR) {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n    if (this.vrStatsEnabled && time - this.lastUpdate > 100) {\n      this.vrPanel.setAttribute(\n        \"text\",\n        \"value\",\n        [\n          `f ${stats(\"fps\")\n            .value()\n            .toFixed(0)}`,\n          `r ${stats(\"raf\")\n            .value()\n            .toFixed(0)}`,\n          `p ${stats(\"physics\")\n            .value()\n            .toFixed(0)}`,\n          `c ${this.el.sceneEl.renderer.info.render.calls}`,\n          `t ${(this.el.sceneEl.renderer.info.render.triangles / 1000).toFixed(0)}k`\n        ].join(\"\\n\")\n      );\n      this.lastUpdate = time;\n    }\n  },\n  onEnterVr() {\n    this.inVR = true;\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    this.inVR = false;\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","import { cloneMedia, closeExistingMediaMirror } from \"./media-utils\";\nlet mirrorTarget;\nexport function getCurrentMirroredMedia() {\n  mirrorTarget = mirrorTarget || document.querySelector(\"#media-mirror-target\");\n  const mirrorEl = mirrorTarget.firstChild;\n  const linkedEl = mirrorEl && mirrorEl.components[\"media-loader\"] && mirrorEl.components[\"media-loader\"].data.linkedEl;\n  return linkedEl;\n}\nexport async function refreshMediaMirror() {\n  const linkedEl = getCurrentMirroredMedia();\n  if (!linkedEl) {\n    return;\n  }\n  await closeExistingMediaMirror();\n  const { entity } = cloneMedia(\n    linkedEl,\n    \"#linked-media\",\n    linkedEl.components[\"media-loader\"].data.src,\n    false,\n    true,\n    mirrorTarget\n  );\n\n  entity.object3D.scale.set(0.75, 0.75, 0.75);\n  entity.object3D.matrixNeedsUpdate = true;\n\n  const refreshButton = entity.querySelector(\"[refresh-media-button]\");\n  if (refreshButton) {\n    refreshButton.parentNode.removeChild(refreshButton);\n  }\n\n  const localRefreshButton = entity.querySelector(\"[local-refresh-media-button]\");\n  if (localRefreshButton) {\n    localRefreshButton.parentNode.removeChild(localRefreshButton);\n  }\n\n  mirrorTarget.parentEl.components[\"follow-in-fov\"].reset();\n  mirrorTarget.parentEl.object3D.visible = true;\n}\n","import errorImageSrc from \"!!url-loader!../assets/images/media-error.png\";\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nexport const errorTexture = new THREE.Texture(errorImage);\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\n","export function scaleToAspectRatio(el, ratio) {\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.object3DMap.mesh.matrixNeedsUpdate = true;\n}\n","/* global performance THREE AFRAME NAF MediaStream setTimeout */\nimport configs from \"../utils/configs\";\nimport audioIcon from \"../assets/images/audio.png\";\nimport { paths } from \"../systems/userinput/paths\";\nimport HLS from \"hls.js\";\nimport { MediaPlayer } from \"dashjs\";\nimport { addAndArrangeMedia, createVideoOrAudioEl, hasAudioTracks } from \"../utils/media-utils\";\nimport { disposeTexture } from \"../utils/material-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport { buildAbsoluteURL } from \"url-toolkit\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\nimport { refreshMediaMirror, getCurrentMirroredMedia } from \"../utils/mirror-utils\";\nimport { detect } from \"detect-browser\";\nimport semver from \"semver\";\nimport { createPlaneBufferGeometry } from \"../utils/three-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { getCurrentAudioSettings, updateAudioSettings } from \"../update-audio-settings\";\nimport { SourceType, AudioType } from \"./audio-params\";\nimport { errorTexture } from \"../utils/error-texture\";\nimport { scaleToAspectRatio } from \"../utils/scale-to-aspect-ratio\";\nimport { isSafari } from \"../utils/detect-safari\";\nimport { isIOS as detectIOS } from \"../utils/is-mobile\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\n\nconst isIOS = detectIOS();\nconst audioIconTexture = new HubsTextureLoader().load(audioIcon);\n\nexport const VOLUME_LABELS = [];\nfor (let i = 0; i <= 20; i++) {\n  let s = \"[\";\n  for (let j = 1; j <= 20; j++) {\n    s += i >= j ? \"|\" : \" \";\n  }\n  s += \"]\";\n  VOLUME_LABELS[i] = s;\n}\n\nfunction timeFmt(t) {\n  let s = Math.floor(t),\n    h = Math.floor(s / 3600);\n  s -= h * 3600;\n  let m = Math.floor(s / 60);\n  s -= m * 60;\n  if (h < 10) h = `0${h}`;\n  if (m < 10) m = `0${m}`;\n  if (s < 10) s = `0${s}`;\n  return h === \"00\" ? `${m}:${s}` : `${h}:${m}:${s}`;\n}\n\nconst MAX_GAIN_MULTIPLIER = 2;\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    audioSrc: { type: \"string\" }, // set only if audio track is separated from video track (eg. 360 video)\n    contentType: { type: \"string\" },\n    loop: { type: \"boolean\", default: true },\n    hidePlaybackControls: { type: \"boolean\", default: false },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 },\n    linkedVideoTexture: { default: null },\n    linkedAudioSource: { default: null },\n    linkedMediaElementAudioSource: { default: null }\n  },\n\n  init() {\n    APP.gainMultipliers.set(this.el, 1);\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.updateHoverMenu = this.updateHoverMenu.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n    this.ensureOwned = this.ensureOwned.bind(this);\n    this.isMineOrLocal = this.isMineOrLocal.bind(this);\n    this.updateSrc = this.updateSrc.bind(this);\n\n    this.seekForward = this.seekForward.bind(this);\n    this.seekBack = this.seekBack.bind(this);\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.snap = this.snap.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.togglePlaying = this.togglePlaying.bind(this);\n    this.setupAudio = this.setupAudio.bind(this);\n\n    this.audioSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSystem;\n\n    this.lastUpdate = 0;\n    this.videoMutedAt = 0;\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.videoIsLive = null; // value null until we've determined if the video is live or not.\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n    this.hasAudioTracks = false;\n\n    this.el.setAttribute(\"hover-menu__video\", { template: \"#video-hover-menu\", isFlat: true });\n    this.el.components[\"hover-menu__video\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n\n      this.playbackControls = this.el.querySelector(\".video-playback\");\n      this.playPauseButton = this.el.querySelector(\".video-playpause-button\");\n      this.volumeUpButton = this.el.querySelector(\".video-volume-up-button\");\n      this.volumeDownButton = this.el.querySelector(\".video-volume-down-button\");\n      this.seekForwardButton = this.el.querySelector(\".video-seek-forward-button\");\n      this.seekBackButton = this.el.querySelector(\".video-seek-back-button\");\n      this.snapButton = this.el.querySelector(\".video-snap-button\");\n      this.timeLabel = this.el.querySelector(\".video-time-label\");\n      this.volumeLabel = this.el.querySelector(\".video-volume-label\");\n      this.linkButton = this.el.querySelector(\".video-link-button\");\n\n      this.playPauseButton.object3D.addEventListener(\"interact\", this.togglePlaying);\n      this.seekForwardButton.object3D.addEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.addEventListener(\"interact\", this.seekBack);\n      this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n      this.snapButton.object3D.addEventListener(\"interact\", this.snap);\n\n      this.updateVolumeLabel();\n      this.updateHoverMenu();\n      this.updatePlaybackState();\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        applyPersistentSync(this.networkedEl.components.networked.data.networkId);\n        this.updatePlaybackState();\n\n        this.networkedEl.addEventListener(\"pinned\", this.updateHoverMenu);\n        this.networkedEl.addEventListener(\"unpinned\", this.updateHoverMenu);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateHoverMenu);\n\n        // For scene-owned videos, take ownership after a random delay if nobody\n        // else has so there is a timekeeper. Do not due this on iOS because iOS has an\n        // annoying \"auto-pause\" feature that forces one non-autoplaying video to play\n        // at once, which will pause the videos for everyone in the room if owned.\n        if (!isIOS && NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n          setTimeout(() => {\n            if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n              NAF.utils.takeOwnership(this.networkedEl);\n            }\n          }, 2000 + Math.floor(Math.random() * 2000));\n        }\n      })\n      .catch(() => {\n        // Non-networked\n        this.updatePlaybackState();\n      });\n\n    let disableLeftRightPanningPref = APP.store.state.preferences.disableLeftRightPanning;\n    this.onPreferenceChanged = () => {\n      const newPref = APP.store.state.preferences.disableLeftRightPanning;\n      const shouldRecreateAudio = disableLeftRightPanningPref !== newPref && this.audio && this.mediaElementAudioSource;\n      disableLeftRightPanningPref = newPref;\n      if (shouldRecreateAudio) {\n        this.setupAudio();\n      }\n    };\n    APP.store.addEventListener(\"statechanged\", this.onPreferenceChanged);\n    this.el.addEventListener(\"audio_type_changed\", this.setupAudio);\n  },\n\n  play() {\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\n  },\n\n  isMineOrLocal() {\n    return !this.el.components.networked || (this.networkedEl && NAF.utils.isMine(this.networkedEl));\n  },\n\n  ensureOwned() {\n    return (\n      !this.el.components.networked ||\n      ((this.networkedEl && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl))\n    );\n  },\n\n  seekForward() {\n    if (!this.videoIsLive && this.ensureOwned()) {\n      this.video.currentTime += 30;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  seekBack() {\n    if (!this.videoIsLive && this.ensureOwned()) {\n      this.video.currentTime -= 10;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  changeVolumeBy(v) {\n    let gainMultiplier = APP.gainMultipliers.get(this.el);\n    gainMultiplier = THREE.Math.clamp(gainMultiplier + v, 0, MAX_GAIN_MULTIPLIER);\n    APP.gainMultipliers.set(this.el, gainMultiplier);\n    this.updateVolumeLabel();\n    const audio = APP.audios.get(this.el);\n    if (audio) {\n      updateAudioSettings(this.el, audio);\n    }\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.2);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.2);\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    canvas.getContext(\"2d\").drawImage(this.video, 0, 0, canvas.width, canvas.height);\n    const blob = await new Promise(resolve => canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  togglePlaying() {\n    // See onPauseStateChanged for note about iOS\n    if (isIOS && this.video.paused && this.isMineOrLocal()) {\n      this.video.play();\n      return;\n    }\n\n    if (this.ensureOwned()) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  onPauseStateChange() {\n    // iOS Safari will auto-pause other videos if one is manually started (not autoplayed.) So, to keep things\n    // easy to reason about, we *never* broadcast pauses from iOS.\n    //\n    // if an iOS safari user pauses and plays a video they'll pause all the other videos,\n    // which isn't great, but this check will at least ensure they don't pause those videos\n    // for all other users in the room! Of course, if they go and hit play on those videos auto-paused,\n    // they will become the timekeeper, and will seek everyone to where the video was auto-paused.\n    //\n    // This specific case will diverge the network schema and the video player state, so that\n    // this.data.videoPaused is false (so others will keep playing it) but our local player will\n    // have stopped. So we deal with this special case as well when we press the play button.\n    if (isIOS && this.video.paused && this.isMineOrLocal()) {\n      return;\n    }\n\n    // Used in the HACK in hub.js for dealing with auto-pause in Oculus Browser\n    if (this._ignorePauseStateChanges) return;\n\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n    if (this.video.paused) {\n      APP.isAudioPaused.add(this.el);\n    } else {\n      APP.isAudioPaused.delete(this.el);\n    }\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    this.updateHoverMenu();\n\n    // Only update playback position for videos you don't own\n    if (this.video && (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl)))) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n      delete this._playbackStateChangeTimeout;\n    }\n\n    // Update current time if we've determined this video is not a live stream, since otherwise we may\n    // update the video to currentTime = 0\n    if (this.videoIsLive === false && currentTime !== undefined) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.setAttribute(\"icon-button\", \"active\", pause);\n    }\n\n    if (pause) {\n      this.video.pause();\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video.play().catch(() => {\n        if (pause !== this.data.videoPaused) return;\n        this._playbackStateChangeTimeout = setTimeout(() => this.tryUpdateVideoPlaybackState(pause, currentTime), 1000);\n      });\n    }\n  },\n\n  update(oldData) {\n    this.updatePlaybackState();\n\n    const shouldUpdateSrc = this.data.src && this.data.src !== oldData.src;\n    if (shouldUpdateSrc) {\n      this.updateSrc(oldData);\n      return;\n    }\n  },\n\n  setupAudio() {\n    this.removeAudio();\n\n    APP.sourceType.set(this.el, SourceType.MEDIA_VIDEO);\n\n    if (this.data.videoPaused) {\n      APP.isAudioPaused.add(this.el);\n    } else {\n      APP.isAudioPaused.delete(this.el);\n    }\n\n    const { audioType } = getCurrentAudioSettings(this.el);\n    const audioListener = this.el.sceneEl.audioListener;\n    if (audioType === AudioType.PannerNode) {\n      this.audio = new THREE.PositionalAudio(audioListener);\n    } else {\n      this.audio = new THREE.Audio(audioListener);\n    }\n    this.audioSystem.addAudio({ sourceType: SourceType.MEDIA_VIDEO, node: this.audio });\n\n    this.audio.setNodeSource(this.mediaElementAudioSource);\n    this.el.setObject3D(\"sound\", this.audio);\n\n    // Make sure that the audio is initialized to the right place.\n    // Its matrix may not update if this element is not visible.\n    // See https://github.com/mozilla/hubs/issues/2855\n    this.audio.updateMatrixWorld();\n\n    APP.audios.set(this.el, this.audio);\n    updateAudioSettings(this.el, this.audio);\n  },\n\n  async updateSrc(oldData) {\n    const { src, linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource } = this.data;\n\n    this.cleanUp();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture, audioSourceEl;\n    try {\n      if (linkedVideoTexture) {\n        texture = linkedVideoTexture;\n        audioSourceEl = linkedAudioSource;\n      } else {\n        this.el.emit(\"video-loading\");\n        ({ texture, audioSourceEl } = await this.createVideoTextureAudioSourceEl());\n        if (getCurrentMirroredMedia() === this.el) {\n          await refreshMediaMirror();\n        }\n      }\n\n      this.hasAudioTracks = hasAudioTracks(audioSourceEl);\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      this.mediaElementAudioSource = null;\n      if (!src.startsWith(\"hubs://\")) {\n        // iOS video audio is broken on ios safari < 13.1.2, see: https://github.com/mozilla/hubs/issues/1797\n        if (!isIOS || semver.satisfies(detect().version, \">=13.1.2\")) {\n          // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n          this.mediaElementAudioSource =\n            linkedMediaElementAudioSource ||\n            this.el.sceneEl.audioListener.context.createMediaElementSource(audioSourceEl);\n\n          this.hasAudioTracks && this.setupAudio();\n        }\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (texture.hls) {\n        const updateHLSLiveState = () => {\n          if (texture.hls.currentLevel >= 0) {\n            this.videoIsLive = texture.hls.levels[texture.hls.currentLevel].details.live;\n            this.updateHoverMenu();\n          }\n        };\n        texture.hls.on(HLS.Events.LEVEL_LOADED, updateHLSLiveState);\n        texture.hls.on(HLS.Events.LEVEL_SWITCHED, updateHLSLiveState);\n        if (texture.hls.currentLevel >= 0) {\n          updateHLSLiveState();\n        }\n      } else {\n        this.videoIsLive = this.video.duration === Infinity;\n        this.updateHoverMenu();\n      }\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          isFlat: true\n        });\n      }\n\n      this.videoTexture = texture;\n      this.audioSource = audioSourceEl;\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n      this.videoTexture = this.audioSource = null;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n      material.toneMapped = false;\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        const flipY = texture.isVideoTexture ? texture.flipY : audioIconTexture.flipY;\n        geometry = createPlaneBufferGeometry(undefined, undefined, undefined, undefined, flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    if (!texture.isVideoTexture) {\n      this.mesh.material.map = audioIconTexture;\n    } else {\n      this.mesh.material.map = texture;\n      if (projection === \"flat\") {\n        scaleToAspectRatio(\n          this.el,\n          (texture.image.videoHeight || texture.image.height) / (texture.image.videoWidth || texture.image.width)\n        );\n      }\n    }\n    this.mesh.material.needsUpdate = true;\n\n    this.updatePlaybackState(true);\n\n    if (this.video && this.video.muted) {\n      this.videoMutedAt = performance.now();\n    }\n\n    this.el.emit(\"video-loaded\", { projection: projection });\n  },\n\n  async createVideoTextureAudioSourceEl() {\n    const url = this.data.src;\n    const contentType = this.data.contentType;\n    let pollTimeout;\n\n    return new Promise(async (resolve, reject) => {\n      if (this._audioSyncInterval) {\n        clearInterval(this._audioSyncInterval);\n        this._audioSyncInterval = null;\n      }\n\n      let resolved = false;\n      const failLoad = function(e) {\n        if (resolved) return;\n        resolved = true;\n        clearTimeout(pollTimeout);\n        reject(e);\n      };\n\n      const videoEl = createVideoOrAudioEl(\"video\");\n\n      let texture, audioEl, isReady;\n      if (contentType.startsWith(\"audio/\")) {\n        // We want to treat audio almost exactly like video, so we mock a video texture with an image property.\n        texture = new THREE.Texture();\n        texture.image = videoEl;\n        isReady = () => videoEl.readyState > 0;\n      } else {\n        texture = new THREE.VideoTexture(videoEl);\n        texture.minFilter = THREE.LinearFilter;\n        texture.encoding = THREE.sRGBEncoding;\n\n        // Firefox seems to have video play (or decode) performance issue.\n        // Somehow setting RGBA format improves the performance very well.\n        // Some tickets have been opened for the performance issue but\n        // I don't think it will be fixed soon. So we set RGBA format for Firefox\n        // as workaround so far.\n        // See https://github.com/mozilla/hubs/issues/3470\n        if (/firefox/i.test(navigator.userAgent)) {\n          texture.format = THREE.RGBAFormat;\n        }\n\n        isReady = () => {\n          if (texture.hls && texture.hls.streamController.audioOnly) {\n            audioEl = videoEl;\n            const hls = texture.hls;\n            texture = new THREE.Texture();\n            texture.image = videoEl;\n            texture.hls = hls;\n            return true;\n          } else {\n            const ready =\n              (texture.image.videoHeight || texture.image.height) && (texture.image.videoWidth || texture.image.width);\n            return ready;\n          }\n        };\n      }\n\n      // Set src on video to begin loading.\n      if (url.startsWith(\"hubs://\")) {\n        const streamClientId = url.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n        const stream = await APP.dialog.getMediaStream(streamClientId, \"video\");\n        // We subscribe to video stream notifications for this peer to update the video element\n        // This could happen in case there is an ICE failure that requires a transport recreation.\n        if (this._onStreamUpdated) {\n          APP.dialog.off(\"stream_updated\", this._onStreamUpdated);\n        }\n        this._onStreamUpdated = async (peerId, kind) => {\n          if (peerId === streamClientId && kind === \"video\") {\n            // The video stream for this peer has been updated\n            const stream = await APP.dialog.getMediaStream(peerId, \"video\").catch(e => {\n              console.error(`Error getting video stream for ${peerId}`, e);\n            });\n            if (stream) {\n              videoEl.srcObject = new MediaStream(stream);\n            }\n          }\n        };\n        APP.dialog.on(\"stream_updated\", this._onStreamUpdated, this);\n        videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n        // If hls.js is supported we always use it as it gives us better events\n      } else if (contentType.startsWith(\"application/dash\")) {\n        const dashPlayer = MediaPlayer().create();\n        dashPlayer.extend(\"RequestModifier\", function() {\n          return { modifyRequestHeader: xhr => xhr, modifyRequestURL: proxiedUrlFor };\n        });\n        dashPlayer.on(MediaPlayer.events.ERROR, failLoad);\n        dashPlayer.initialize(videoEl, url);\n        dashPlayer.setTextDefaultEnabled(false);\n\n        // TODO this countinously pings to get updated time, unclear if this is actually needed, but this preserves the default behavior\n        dashPlayer.clearDefaultUTCTimingSources();\n        dashPlayer.addUTCTimingSource(\n          \"urn:mpeg:dash:utc:http-xsdate:2014\",\n          proxiedUrlFor(\"https://time.akamai.com/?iso\")\n        );\n        // We can also use our own HEAD request method like we use to sync NAF\n        // dashPlayer.addUTCTimingSource(\"urn:mpeg:dash:utc:http-head:2014\", location.href);\n\n        texture.dash = dashPlayer;\n      } else if (AFRAME.utils.material.isHLS(url, contentType)) {\n        if (HLS.isSupported()) {\n          const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n          const baseUrl = url.startsWith(corsProxyPrefix) ? url.substring(corsProxyPrefix.length) : url;\n          const setupHls = () => {\n            if (texture.hls) {\n              texture.hls.stopLoad();\n              texture.hls.detachMedia();\n              texture.hls.destroy();\n              texture.hls = null;\n            }\n\n            const hls = new HLS({\n              debug: qsTruthy(\"hlsDebug\"),\n              xhrSetup: (xhr, u) => {\n                if (u.startsWith(corsProxyPrefix)) {\n                  u = u.substring(corsProxyPrefix.length);\n                }\n\n                // HACK HLS.js resolves relative urls internally, but our CORS proxying screws it up. Resolve relative to the original unproxied url.\n                // TODO extend HLS.js to allow overriding of its internal resolving instead\n                if (!u.startsWith(\"http\")) {\n                  u = buildAbsoluteURL(baseUrl, u.startsWith(\"/\") ? u : `/${u}`);\n                }\n\n                xhr.open(\"GET\", proxiedUrlFor(u), true);\n              }\n            });\n\n            texture.hls = hls;\n            hls.loadSource(url);\n            hls.attachMedia(videoEl);\n\n            hls.on(HLS.Events.ERROR, function(event, data) {\n              if (data.fatal) {\n                switch (data.type) {\n                  case HLS.ErrorTypes.NETWORK_ERROR:\n                    // try to recover network error\n                    hls.startLoad();\n                    break;\n                  case HLS.ErrorTypes.MEDIA_ERROR:\n                    hls.recoverMediaError();\n                    break;\n                  default:\n                    failLoad(event);\n                    return;\n                }\n              }\n            });\n          };\n\n          setupHls();\n        } else if (videoEl.canPlayType(contentType)) {\n          videoEl.src = url;\n          videoEl.onerror = failLoad;\n        } else {\n          failLoad(\"HLS unsupported\");\n        }\n      } else {\n        videoEl.src = url;\n\n        // Workaround for Safari.\n        // Safari seems to have a bug that it doesn't transfer range property in HTTP request header\n        // for redirects if crossOrigin is set (while other major browsers do).\n        // So Safari can fail to load video if the server responds redirect because\n        // it expects 206 HTTP status code but gets 200.\n        // If we fail to load video on Safari we retry with fetch() and videoEl.srcObject\n        // which may avoid the problem.\n        // Refer to #4516 for the details.\n        if (isSafari()) {\n          // There seems no way to detect whether the error is caused by the problem mentioned above.\n          // So always retrying.\n          videoEl.onerror = async () => {\n            videoEl.onerror = failLoad;\n            try {\n              const res = await fetch(url);\n              videoEl.srcObject = await res.blob();\n            } catch (e) {\n              failLoad(e);\n            }\n          };\n        } else {\n          videoEl.onerror = failLoad;\n        }\n\n        // audioSrc is non-empty only if audio track is separated from video track (eg. 360 video)\n        if (this.data.audioSrc) {\n          // Mute video track just in case\n          videoEl.muted = true;\n\n          // If there's an audio src, create an audio element to play it that we keep in sync\n          // with the video while this component is active.\n          audioEl = createVideoOrAudioEl(\"audio\");\n          audioEl.src = this.data.audioSrc;\n          audioEl.onerror = failLoad;\n\n          this._audioSyncInterval = setInterval(() => {\n            if (Math.abs(audioEl.currentTime - videoEl.currentTime) >= 0.33) {\n              // In Chrome, drift of a few frames seems persistent\n              audioEl.currentTime = videoEl.currentTime;\n            }\n\n            // During pause state change, correct any drift that remains.\n            if (videoEl.paused !== audioEl.paused) {\n              videoEl.paused ? audioEl.pause() : audioEl.play();\n              audioEl.currentTime = videoEl.currentTime;\n            }\n          }, 1000);\n        }\n      }\n\n      // NOTE: We used to use the canplay event here to yield the texture, but that fails to fire on iOS Safari\n      // and also sometimes in Chrome it seems.\n      const poll = () => {\n        if (isReady()) {\n          resolved = true;\n          resolve({ texture, audioSourceEl: audioEl || texture.image });\n        } else {\n          pollTimeout = setTimeout(poll, 500);\n        }\n      };\n\n      poll();\n    });\n  },\n\n  updateHoverMenu() {\n    if (!this.hoverMenu) return;\n\n    const mediaLoader = this.el.components[\"media-loader\"].data;\n    const pinnableElement = mediaLoader.linkedEl || this.el;\n    const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n    this.playbackControls.object3D.visible = !this.data.hidePlaybackControls && !!this.video;\n    this.timeLabel.object3D.visible = !this.data.hidePlaybackControls;\n    this.volumeLabel.object3D.visible = this.volumeUpButton.object3D.visible = this.volumeDownButton.object3D.visible =\n      this.hasAudioTracks && !this.data.hidePlaybackControls && !!this.video;\n\n    this.snapButton.object3D.visible =\n      !!this.video && !this.data.contentType.startsWith(\"audio/\") && window.APP.hubChannel.can(\"spawn_and_move_media\");\n    this.seekForwardButton.object3D.visible = !!this.video && !this.videoIsLive;\n\n    const mayModifyPlayHead =\n      !!this.video && !this.videoIsLive && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n\n    this.playPauseButton.object3D.visible = this.seekForwardButton.object3D.visible = this.seekBackButton.object3D.visible = mayModifyPlayHead;\n\n    this.linkButton.object3D.visible = !!mediaLoader.mediaOptions.href;\n\n    if (this.videoIsLive) {\n      this.timeLabel.setAttribute(\"text\", \"value\", \"LIVE\");\n    }\n  },\n\n  updateVolumeLabel() {\n    const gainMultiplier = APP.gainMultipliers.get(this.el);\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      gainMultiplier === 0 ? \"MUTE\" : VOLUME_LABELS[Math.floor(gainMultiplier / (MAX_GAIN_MULTIPLIER / 20))]\n    );\n  },\n\n  tick: (() => {\n    return function() {\n      if (!this.video) return;\n\n      const userinput = this.el.sceneEl.systems.userinput;\n      const interaction = this.el.sceneEl.systems.interaction;\n      const volumeModRight = userinput.get(paths.actions.cursor.right.mediaVolumeMod);\n      if (interaction.state.rightRemote.hovered === this.el && volumeModRight) {\n        this.changeVolumeBy(volumeModRight);\n      }\n      const volumeModLeft = userinput.get(paths.actions.cursor.left.mediaVolumeMod);\n      if (interaction.state.leftRemote.hovered === this.el && volumeModLeft) {\n        this.changeVolumeBy(volumeModLeft);\n      }\n\n      const isHeld = interaction.isHeld(this.el);\n\n      if (this.wasHeld && !isHeld) {\n        this.localSnapCount = 0;\n      }\n\n      this.wasHeld = isHeld;\n\n      if (this.hoverMenu && this.hoverMenu.object3D.visible && !this.videoIsLive) {\n        this.timeLabel.setAttribute(\n          \"text\",\n          \"value\",\n          `${timeFmt(this.video.currentTime)} / ${timeFmt(this.video.duration)}`\n        );\n      }\n\n      // If a known non-live video is currently playing and we own it, send out time updates\n      if (\n        !this.data.videoPaused &&\n        this.videoIsLive === false &&\n        this.networkedEl &&\n        NAF.utils.isMine(this.networkedEl)\n      ) {\n        const now = performance.now();\n        if (now - this.lastUpdate > this.data.tickRate) {\n          this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n          this.lastUpdate = now;\n        }\n      }\n    };\n  })(),\n\n  cleanUp() {\n    if (this.videoTexture && !this.data.linkedVideoTexture) {\n      disposeTexture(this.videoTexture);\n    }\n  },\n\n  remove() {\n    this.cleanUp();\n\n    APP.isAudioPaused.delete(this.el);\n\n    if (this.mesh) {\n      this.el.removeObject3D(\"mesh\");\n    }\n\n    if (this._audioSyncInterval) {\n      clearInterval(this._audioSyncInterval);\n      this._audioSyncInterval = null;\n    }\n\n    APP.gainMultipliers.delete(this.el);\n    APP.audios.delete(this.el);\n    APP.sourceType.delete(this.el);\n    APP.supplementaryAttenuation.delete(this.el);\n\n    this.removeAudio();\n\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.updateHoverMenu);\n      this.networkedEl.removeEventListener(\"unpinned\", this.updateHoverMenu);\n    }\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateHoverMenu);\n\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n      APP.dialog.off(\"stream_updated\", this._onStreamUpdated);\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.object3D.removeEventListener(\"interact\", this.togglePlaying);\n      this.volumeUpButton.object3D.removeEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.removeEventListener(\"interact\", this.volumeDown);\n      this.seekForwardButton.object3D.removeEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.removeEventListener(\"interact\", this.seekBack);\n      this.snapButton.object3D.removeEventListener(\"interact\", this.snap);\n    }\n\n    window.APP.store.removeEventListener(\"statechanged\", this.onPreferenceChanged);\n    this.el.addEventListener(\"audio_type_changed\", this.setupAudio);\n  },\n\n  removeAudio() {\n    if (this.audio) {\n      this.el.removeObject3D(\"sound\");\n      this.audioSystem.removeAudio({ node: this.audio });\n      delete this.audio;\n    }\n  }\n});\n","import pdfjs from \"pdfjs-dist\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { scaleToAspectRatio } from \"../utils/scale-to-aspect-ratio\";\nimport { errorTexture } from \"../utils/error-texture\";\nimport { createPlaneBufferGeometry } from \"../utils/three-utils\";\nimport { addAndArrangeMedia } from \"../utils/media-utils\";\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\n\n/**\n * Warning! This require statement is fragile!\n *\n * How it works:\n * require -> require the file after all import statements have been called, particularly the configs.js import which modifies __webpack_public_path__\n * !! -> don't run any other loaders\n * file-loader -> make webpack move the file into the dist directory and return the file path\n * outputPath -> where to put the file\n * name -> how to name the file\n * Then the path to the worker script\n */\npdfjs.GlobalWorkerOptions.workerSrc = require(\"!!file-loader?outputPath=assets/js&name=[name]-[hash].js!pdfjs-dist/build/pdf.worker.min.js\");\n\nAFRAME.registerComponent(\"media-pdf\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    index: { default: 0 },\n    batch: { default: false }\n  },\n\n  init() {\n    this.snap = this.snap.bind(this);\n    this.canvas = document.createElement(\"canvas\");\n    this.canvasContext = this.canvas.getContext(\"2d\");\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n    this.texture = new THREE.CanvasTexture(this.canvas);\n\n    this.texture.encoding = THREE.sRGBEncoding;\n    this.texture.minFilter = THREE.LinearFilter;\n\n    this.el.addEventListener(\"pager-snap-clicked\", () => this.snap());\n  },\n\n  play() {\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const blob = await new Promise(resolve => this.canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount, false, 1);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    try {\n      const { src, index } = this.data;\n      if (!src) return;\n\n      if (this.renderTask) {\n        await this.renderTask.promise;\n        if (src !== this.data.src || index !== this.data.index) return;\n      }\n\n      this.el.emit(\"pdf-loading\");\n\n      if (src !== oldData.src) {\n        const loadingSrc = this.data.src;\n        const pdf = await pdfjs.getDocument(src);\n        if (loadingSrc !== this.data.src) return;\n\n        this.pdf = pdf;\n        this.el.setAttribute(\"media-pager\", { maxIndex: this.pdf.numPages - 1 });\n      }\n\n      const page = await this.pdf.getPage(index + 1);\n      if (src !== this.data.src || index !== this.data.index) return;\n\n      const viewport = page.getViewport({ scale: 3 });\n      const pw = viewport.width;\n      const ph = viewport.height;\n      texture = this.texture;\n      ratio = ph / pw;\n\n      this.canvas.width = pw;\n      this.canvas.height = ph;\n\n      this.renderTask = page.render({ canvasContext: this.canvasContext, viewport });\n\n      await this.renderTask.promise;\n\n      this.renderTask = null;\n\n      if (src !== this.data.src || index !== this.data.index) return;\n    } catch (e) {\n      console.error(\"Error loading PDF\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    if (!this.mesh) {\n      const material = new THREE.MeshBasicMaterial();\n      const geometry = createPlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n      material.side = THREE.DoubleSide;\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.transparent = texture == errorTexture;\n    this.mesh.material.map = texture;\n    this.mesh.material.map.needsUpdate = true;\n    this.mesh.material.needsUpdate = true;\n\n    scaleToAspectRatio(this.el, ratio);\n\n    if (texture !== errorTexture && this.data.batch) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.mesh);\n    }\n\n    if (this.el.components[\"media-pager\"] && this.el.components[\"media-pager\"].data.index !== this.data.index) {\n      this.el.setAttribute(\"media-pager\", { index: this.data.index });\n    }\n\n    this.el.emit(\"pdf-loaded\", { src: this.data.src });\n  }\n});\n","import { KTX2Loader } from \"three/examples/jsm/loaders/KTX2Loader\";\nimport { BasisTextureLoader } from \"three/examples/jsm/loaders/BasisTextureLoader\";\nimport { rewriteBasisTranscoderUrls } from \"./media-url-utils\";\nconst loadingManager = new THREE.LoadingManager();\nloadingManager.setURLModifier(rewriteBasisTranscoderUrls);\nlet ktxLoader;\nlet basisLoader;\nexport function createBasisTexture(url) {\n  if (!basisLoader) {\n    basisLoader = new BasisTextureLoader(loadingManager).detectSupport(AFRAME.scenes[0].renderer);\n  }\n  return new Promise((resolve, reject) => {\n    basisLoader.load(\n      url,\n      function(texture) {\n        texture.encoding = THREE.sRGBEncoding;\n        texture.onUpdate = function() {\n          // Delete texture data once it has been uploaded to the GPU\n          texture.mipmaps.length = 0;\n        };\n        // texture.anisotropy = 4;\n        resolve(texture);\n      },\n      undefined,\n      function(error) {\n        console.error(error);\n        reject(new Error(`'${url}' could not be fetched (Error: ${error}`));\n      }\n    );\n  });\n}\n\nexport function createKTX2Texture(url) {\n  if (!ktxLoader) {\n    ktxLoader = new KTX2Loader(loadingManager).detectSupport(AFRAME.scenes[0].renderer);\n  }\n  return new Promise((resolve, reject) => {\n    ktxLoader.load(\n      url,\n      function(texture) {\n        texture.encoding = THREE.sRGBEncoding;\n        texture.onUpdate = function() {\n          // Delete texture data once it has been uploaded to the GPU\n          texture.mipmaps.length = 0;\n        };\n        texture.anisotropy = 4;\n        resolve(texture);\n      },\n      undefined,\n      function(error) {\n        console.error(error);\n        reject(new Error(`'${url}' could not be fetched (Error: ${error}`));\n      }\n    );\n  });\n}\n","import { promisifyWorker } from \"../utils/promisify-worker.js\";\n\nimport GIFWorker from \"../workers/gifparsing.worker.js\";\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nconst parseGIF = promisifyWorker(new GIFWorker());\n\nexport async function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => parseGIF(rawImageData, [rawImageData]))\n      .then(result => {\n        const { frames, delayTimes, disposals } = result;\n        let loadCnt = 0;\n        for (let i = 0; i < frames.length; i++) {\n          const img = new Image();\n          img.onload = e => {\n            loadCnt++;\n            frames[i] = e.target;\n            if (loadCnt === frames.length) {\n              const texture = new GIFTexture(frames, delayTimes, disposals);\n              texture.image.src = url;\n              texture.encoding = THREE.sRGBEncoding;\n              texture.minFilter = THREE.LinearFilter;\n              resolve(texture);\n            }\n          };\n          img.src = frames[i];\n        }\n      })\n      .catch(reject);\n  });\n}\n","import { createImageTexture } from \"../utils/media-utils\";\nimport { createBasisTexture, createKTX2Texture } from \"../utils/create-basis-texture\";\nimport { TextureCache } from \"../utils/texture-cache\";\nimport { errorTexture } from \"../utils/error-texture\";\nimport { createPlaneBufferGeometry } from \"../utils/three-utils\";\nimport { scaleToAspectRatio } from \"../utils/scale-to-aspect-ratio\";\nimport { createGIFTexture } from \"../utils/gif-texture\";\n\nconst textureCache = new TextureCache();\nconst inflightTextures = new Map();\n\nconst errorCacheItem = { texture: errorTexture, ratio: 1400 / 1200 };\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    version: { type: \"number\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    batch: { default: false },\n    alphaMode: { type: \"string\", default: undefined },\n    alphaCutoff: { type: \"number\" }\n  },\n\n  play() {\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n    if (this.currentSrcIsRetained) {\n      textureCache.release(this.data.src, this.data.version);\n      this.currentSrcIsRetained = false;\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n\n    try {\n      const { src, version, contentType } = this.data;\n      if (!src) return;\n\n      this.el.emit(\"image-loading\");\n\n      if (this.mesh && this.mesh.material.map && (src !== oldData.src || version !== oldData.version)) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.material.map !== errorTexture) {\n          textureCache.release(oldData.src, oldData.version);\n          this.currentSrcIsRetained = false;\n        }\n      }\n\n      let cacheItem;\n      if (textureCache.has(src, version)) {\n        if (this.currentSrcIsRetained) {\n          cacheItem = textureCache.get(src, version);\n        } else {\n          cacheItem = textureCache.retain(src, version);\n        }\n      } else {\n        const inflightKey = textureCache.key(src, version);\n\n        if (src === \"error\") {\n          cacheItem = errorCacheItem;\n        } else if (inflightTextures.has(inflightKey)) {\n          await inflightTextures.get(inflightKey);\n          cacheItem = textureCache.retain(src, version);\n        } else {\n          let promise;\n          if (contentType.includes(\"image/gif\")) {\n            promise = createGIFTexture(src);\n          } else if (contentType.includes(\"image/basis\")) {\n            promise = createBasisTexture(src);\n          } else if (contentType.includes(\"image/ktx2\")) {\n            promise = createKTX2Texture(src);\n          } else if (contentType.startsWith(\"image/\")) {\n            promise = createImageTexture(src);\n          } else {\n            throw new Error(`Unknown image content type: ${contentType}`);\n          }\n          inflightTextures.set(inflightKey, promise);\n          texture = await promise;\n          inflightTextures.delete(inflightKey);\n          cacheItem = textureCache.set(src, version, texture);\n        }\n\n        // No way to cancel promises, so if src has changed or this entity was removed while we were creating the texture just throw it away.\n        if (this.data.src !== src || this.data.version !== version || !this.el.parentNode) {\n          textureCache.release(src, version);\n          return;\n        }\n      }\n\n      texture = cacheItem.texture;\n      ratio = cacheItem.ratio;\n\n      this.currentSrcIsRetained = true;\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n      this.currentSrcIsRetained = false;\n    }\n\n    const projection = this.data.projection;\n\n    if (this.mesh && this.data.batch) {\n      // This is a no-op if the mesh was just created.\n      // Otherwise we want to ensure the texture gets updated.\n      batchManagerSystem.removeObject(this.mesh);\n    }\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n      material.toneMapped = false;\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n\n        // Flip uvs on the geometry\n        if (!texture.flipY) {\n          const uvs = geometry.attributes.uv.array;\n\n          for (let i = 1; i < uvs.length; i += 2) {\n            uvs[i] = 1 - uvs[i];\n          }\n        }\n      } else {\n        geometry = createPlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    if (texture == errorTexture) {\n      this.mesh.material.transparent = true;\n    } else {\n      // if transparency setting isnt explicitly defined, default to on for all non batched things, gifs, and basis textures with alpha\n      switch (this.data.alphaMode) {\n        case \"opaque\":\n          this.mesh.material.transparent = false;\n          break;\n        case \"blend\":\n          this.mesh.material.transparent = true;\n          this.mesh.material.alphaTest = 0;\n          break;\n        case \"mask\":\n          this.mesh.material.transparent = false;\n          this.mesh.material.alphaTest = this.data.alphaCutoff;\n          break;\n        default:\n          this.mesh.material.transparent =\n            !this.data.batch ||\n            this.data.contentType.includes(\"image/gif\") ||\n            !!(texture.image && texture.image.hasAlpha);\n          this.mesh.material.alphaTest = 0;\n      }\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, ratio);\n    }\n\n    if (texture !== errorTexture && this.data.batch && !texture.isCompressedTexture) {\n      batchManagerSystem.addObject(this.mesh);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src, projection: projection });\n  }\n});\n","import { disposeTexture } from \"./material-utils\";\n\nexport class TextureCache {\n  cache = new Map();\n\n  key(src, version) {\n    return `${src}_${version}`;\n  }\n\n  set(src, version, texture) {\n    const image = texture.image;\n    this.cache.set(this.key(src, version), {\n      texture,\n      ratio: (image.videoHeight || image.height) / (image.videoWidth || image.width),\n      count: 0\n    });\n    return this.retain(src, version);\n  }\n\n  has(src, version) {\n    return this.cache.has(this.key(src, version));\n  }\n\n  get(src, version) {\n    return this.cache.get(this.key(src, version));\n  }\n\n  retain(src, version) {\n    const cacheItem = this.cache.get(this.key(src, version));\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem;\n  }\n\n  release(src, version) {\n    const cacheItem = this.cache.get(this.key(src, version));\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached texture src ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(this.key(src, version));\n    }\n  }\n}\n","export const MAX_VOLUME_LABELS = 21;\nexport const MAX_GAIN_MULTIPLIER = 8;\nexport const SMALL_GAIN_STEP = 1 / (MAX_VOLUME_LABELS / 2);\nexport const SMALL_LEVEL_STEP = 1 / (MAX_GAIN_MULTIPLIER / 2);\nexport const BIG_GAIN_STEP = (MAX_GAIN_MULTIPLIER - 1) / (MAX_VOLUME_LABELS / 2);\nexport const BIG_LEVEL_STEP = 1;\nexport const DEFAULT_VOLUME_BAR_MULTIPLIER = 1.0;\n\nexport function calcGainStepUp(gainMultiplier) {\n  return gainMultiplier > 1 - SMALL_GAIN_STEP ? BIG_GAIN_STEP : SMALL_GAIN_STEP;\n}\n\nexport function calcGainStepDown(gainMultiplier) {\n  return gainMultiplier > 1 + SMALL_GAIN_STEP ? BIG_GAIN_STEP : SMALL_GAIN_STEP;\n}\n\nexport function calcLevel(gainMultiplier) {\n  return Math.min(\n    MAX_VOLUME_LABELS - 1,\n    gainMultiplier <= 1.001\n      ? Math.floor(gainMultiplier / SMALL_GAIN_STEP)\n      : Math.floor(MAX_VOLUME_LABELS / 2 + (gainMultiplier - 1) / BIG_GAIN_STEP)\n  );\n}\n\nexport function calcGainMultiplier(level) {\n  return Math.min(\n    MAX_GAIN_MULTIPLIER,\n    level <= MAX_VOLUME_LABELS / 2 ? level * SMALL_GAIN_STEP : 1 + (level - MAX_VOLUME_LABELS / 2) * BIG_GAIN_STEP\n  );\n}\n\nexport function updateAvatarVolumesPref(displayName, gainMultiplier, muted) {\n  const avatarVoiceLevels = APP.store.state.preferences.avatarVoiceLevels || {};\n  avatarVoiceLevels[displayName] = {\n    gainMultiplier,\n    muted\n  };\n  APP.store.update({\n    preferences: {\n      avatarVoiceLevels: avatarVoiceLevels\n    }\n  });\n}\n\nexport function getAvatarVolumePref(displayName) {\n  return APP.store.state.preferences.avatarVoiceLevels?.[displayName];\n}\n","import { updateAudioSettings } from \"../update-audio-settings\";\nimport { VOLUME_LABELS } from \"./media-video\";\nimport { findAncestorWithComponent } from \"../utils/scene-graph\";\nimport {\n  calcLevel,\n  calcGainStepDown,\n  calcGainStepUp,\n  DEFAULT_VOLUME_BAR_MULTIPLIER,\n  MAX_GAIN_MULTIPLIER,\n  updateAvatarVolumesPref,\n  getAvatarVolumePref\n} from \"../utils/avatar-volume-utils\";\n\nAFRAME.registerComponent(\"avatar-volume-controls\", {\n  init() {\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.volumeUpButton = this.el.querySelector(\".avatar-volume-up-button\");\n    this.volumeDownButton = this.el.querySelector(\".avatar-volume-down-button\");\n    this.muteButton = this.el.querySelector(\".avatar-mute-button\");\n    this.volumeLabel = this.el.querySelector(\".avatar-volume-label\");\n    this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n    this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n    this.update = this.update.bind(this);\n    this.normalizer = null;\n    window.APP.store.addEventListener(\"statechanged\", this.update);\n    this.audioEl = this.el.parentEl.parentEl.querySelector(\"[avatar-audio-source]\");\n    this.playerInfo = findAncestorWithComponent(this.el, \"player-info\").components[\"player-info\"];\n    this.onRemoteMuteUpdated = this.onRemoteMuteUpdated.bind(this);\n    this.playerInfo.el.addEventListener(\"remote_mute_updated\", this.onRemoteMuteUpdated);\n    this.muteButton.object3D.visible = this.playerInfo.data.muted;\n    const volumePref = getAvatarVolumePref(this.playerInfo.displayName);\n    this.updateGainMultiplier(volumePref === undefined ? DEFAULT_VOLUME_BAR_MULTIPLIER : volumePref.gainMultiplier);\n    this.updateLocalMuted(volumePref === undefined ? false : volumePref.muted);\n  },\n  remove() {\n    APP.gainMultipliers.delete(this.audioEl);\n    window.APP.store.removeEventListener(\"statechanged\", this.update);\n    this.playerInfo.el.removeEventListener(\"remote_mute_updated\", this.onRemoteMuteUpdated);\n  },\n\n  updateGainMultiplier(gainMultiplier, updatePref = false) {\n    APP.gainMultipliers.set(this.audioEl, gainMultiplier);\n    const audio = APP.audios.get(this.audioEl);\n    if (audio) {\n      updateAudioSettings(this.audioEl, audio);\n    }\n    this.updateVolumeLabel();\n    this.el.emit(\"gain_multiplier_updated\", { gainMultiplier });\n    const isLocalMuted = APP.mutedState.has(this.audioEl);\n    updatePref && updateAvatarVolumesPref(this.playerInfo.displayName, gainMultiplier, isLocalMuted);\n  },\n\n  updateLocalMuted(muted, updatePref = false) {\n    if (muted === true) {\n      APP.mutedState.add(this.audioEl);\n    } else {\n      APP.mutedState.delete(this.audioEl);\n    }\n    const audio = APP.audios.get(this.audioEl);\n    if (audio) {\n      updateAudioSettings(this.audioEl, audio);\n    }\n    this.updateVolumeLabel();\n    this.el.emit(\"local_muted_updated\", { muted });\n    const gainMultiplier = APP.gainMultipliers.get(this.audioEl);\n    const isLocalMuted = APP.mutedState.has(this.audioEl);\n    updatePref && updateAvatarVolumesPref(this.playerInfo.displayName, gainMultiplier, isLocalMuted);\n  },\n\n  volumeUp() {\n    let gainMultiplier = APP.gainMultipliers.get(this.audioEl);\n    const step = calcGainStepUp(gainMultiplier);\n    gainMultiplier = THREE.Math.clamp(gainMultiplier + step, 0, MAX_GAIN_MULTIPLIER);\n    this.updateGainMultiplier(gainMultiplier, true);\n  },\n\n  volumeDown() {\n    let gainMultiplier = APP.gainMultipliers.get(this.audioEl);\n    const step = -calcGainStepDown(gainMultiplier);\n    gainMultiplier = THREE.Math.clamp(gainMultiplier + step, 0, MAX_GAIN_MULTIPLIER);\n    this.updateGainMultiplier(gainMultiplier, true);\n  },\n\n  updateVolumeLabel() {\n    const gainMultiplier = APP.gainMultipliers.get(this.audioEl);\n    const isLocalMuted = APP.mutedState.has(this.audioEl);\n    const numBars = calcLevel(gainMultiplier);\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      gainMultiplier === 0 || isLocalMuted ? \"Muted\" : VOLUME_LABELS[numBars]\n    );\n  },\n\n  onRemoteMuteUpdated({ detail: { muted } }) {\n    if (!this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"mute_users\")) return;\n    this.muteButton.object3D.traverse(obj => {\n      obj.visible = !muted;\n    });\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst rotatePitchAndYaw = (function() {\n  const opq = new THREE.Quaternion();\n  const owq = new THREE.Quaternion();\n  const oq = new THREE.Quaternion();\n  const pq = new THREE.Quaternion();\n  const yq = new THREE.Quaternion();\n  const q = new THREE.Quaternion();\n  const right = new THREE.Vector3();\n  const v = new THREE.Vector3();\n  const UP = new THREE.Vector3(0, 1, 0);\n\n  return function rotatePitchAndYaw(o, p, y) {\n    o.parent.updateMatrices();\n    o.updateMatrices();\n    o.parent.getWorldQuaternion(opq);\n    o.getWorldQuaternion(owq);\n    oq.copy(o.quaternion);\n    v.set(0, 1, 0).applyQuaternion(oq);\n    const initialUpDot = v.dot(UP);\n    v.set(0, 0, 1).applyQuaternion(oq);\n    const initialForwardDotUp = Math.abs(v.dot(UP));\n    right.set(1, 0, 0).applyQuaternion(owq);\n    pq.setFromAxisAngle(right, p);\n    yq.setFromAxisAngle(UP, y);\n\n    q.copy(owq)\n      .premultiply(pq)\n      .premultiply(yq)\n      .premultiply(opq.invert());\n    v.set(0, 1, 0).applyQuaternion(q);\n    const newUpDot = v.dot(UP);\n    v.set(0, 0, 1).applyQuaternion(q);\n    const newForwardDotUp = Math.abs(v.dot(UP));\n    // Ensure our pitch is in an accepted range and our head would not be flipped upside down\n    if ((newForwardDotUp > 0.9 && newForwardDotUp > initialForwardDotUp) || (newUpDot < 0 && newUpDot < initialUpDot)) {\n      // TODO: Apply a partial rotation that does not exceed the bounds for nicer UX\n      return;\n    } else {\n      o.quaternion.copy(q);\n      o.matrixNeedsUpdate = true;\n      o.updateMatrices();\n    }\n  };\n})();\n\nlet uiRoot;\nlet scenePreviewNode;\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  init() {\n    this.pendingXRotation = 0;\n    this.el.sceneEl.addEventListener(\"rotateX\", e => {\n      this.pendingXRotation += e.detail;\n    });\n    this.on = true;\n  },\n\n  tick() {\n    if (this.on) {\n      const scene = AFRAME.scenes[0];\n      const userinput = scene.systems.userinput;\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      scenePreviewNode = scenePreviewNode || document.getElementById(\"scene-preview-node\");\n      const lobby = !scene.is(\"entered\");\n      const isGhost = lobby && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      const cameraDelta = userinput.get(lobby ? paths.actions.lobbyCameraDelta : paths.actions.cameraDelta);\n      if (cameraDelta) {\n        rotatePitchAndYaw(\n          lobby && !isGhost ? scenePreviewNode.object3D : this.el.object3D,\n          this.pendingXRotation + cameraDelta[1],\n          cameraDelta[0]\n        );\n      } else if (this.pendingXRotation) {\n        rotatePitchAndYaw(lobby && !isGhost ? scenePreviewNode.object3D : this.el.object3D, this.pendingXRotation, 0);\n      }\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","import { computeLocalBoundingBox } from \"../utils/auto-box-collider.js\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\n\nconst MIN_SCALE = 0.05;\nconst MAX_SCALE = 4;\nconst ROTATE_Y = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 1, 0), Math.PI);\n\nconst updateFromLocalBB = (function() {\n  const currentPosition = new THREE.Vector3();\n  const currentScale = new THREE.Vector3();\n  return function updateFromLocalBB(object3D, localBox, center, halfExtents, offsetToCenter) {\n    object3D.updateMatrices();\n    const min = localBox.min;\n    const max = localBox.max;\n    center\n      .addVectors(min, max)\n      .multiplyScalar(0.5)\n      .applyMatrix4(object3D.matrixWorld);\n    currentScale.setFromMatrixScale(object3D.matrixWorld);\n    halfExtents\n      .subVectors(max, min)\n      .multiplyScalar(0.5)\n      .multiply(currentScale);\n    currentPosition.setFromMatrixPosition(object3D.matrixWorld);\n    offsetToCenter.subVectors(center, currentPosition);\n  };\n})();\n\nconst updateTargetRotationFromCamera = (function() {\n  const right = new THREE.Vector3();\n  const up = new THREE.Vector3();\n  const back = new THREE.Vector3();\n  const forward = new THREE.Vector3();\n  const rotation = new THREE.Matrix4();\n  return function updateTargetRotationFromCamera(\n    cameraPosition,\n    cameraRotation,\n    isVR,\n    vrFocalPoint,\n    desiredTargetQuaternion\n  ) {\n    if (!isVR) {\n      back\n        .set(0, 0, 1)\n        .applyMatrix4(cameraRotation)\n        .normalize();\n    } else {\n      back.subVectors(cameraPosition, vrFocalPoint).normalize();\n    }\n    up.set(0, 1, 0);\n    forward.copy(back).multiplyScalar(-1);\n    right.crossVectors(forward, up).normalize();\n    up.crossVectors(right, forward);\n    rotation.makeBasis(right, up, back);\n    desiredTargetQuaternion.setFromRotationMatrix(rotation);\n  };\n})();\n\nconst positionAtBorderComponents = [];\nAFRAME.registerComponent(\"position-at-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    isFlat: { default: false },\n    animate: { default: true },\n    scale: { default: true }\n  },\n\n  init() {\n    this.ready = false;\n    this.didInit = false;\n    this.tick2 = this.tick2.bind(this);\n    this.doInit = this.doInit.bind(this);\n    positionAtBorderComponents.push(this);\n  },\n\n  doInit() {\n    this.didInit = true;\n    this.cam = document.getElementById(\"viewing-camera\").object3DMap.camera;\n    if (!this.data.target) {\n      console.error(\"No target for position-at-border on element:\", this.el);\n      return;\n    }\n    const targetEl = this.el.querySelector(this.data.target);\n    if (!targetEl) {\n      console.error(`Could not find ${this.data.target} underneath element:`, this.el);\n      return;\n    }\n    if (this.data.animate) {\n      this.didRegisterWithAnimationSystem = true;\n      this.el.sceneEl.systems[\"hubs-systems\"].menuAnimationSystem.register(this, targetEl, this.data.scale);\n    }\n    this.target = targetEl.object3D;\n    this.wasVisible = false;\n    this.previousMesh = null;\n    this.meshLocalBoundingBox = new THREE.Box3();\n    this.meshCenter = new THREE.Vector3();\n    this.meshHalfExtents = new THREE.Vector3();\n    this.meshOffsetToCenter = new THREE.Vector3();\n    this.isTargetBoundingBoxDirty = true;\n    this.targetLocalBoundingBox = new THREE.Box3();\n    this.targetCenter = new THREE.Vector3();\n    this.targetHalfExtents = new THREE.Vector3();\n    this.targetOffsetToCenter = new THREE.Vector3();\n    this.ready = true;\n  },\n\n  remove() {\n    if (this.didRegisterWithAnimationSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].menuAnimationSystem.unregister(this);\n    }\n    positionAtBorderComponents.splice(positionAtBorderComponents.indexOf(this), 1);\n  },\n\n  markDirty() {\n    this.isTargetBoundingBoxDirty = true;\n  },\n\n  tick2: (function() {\n    const cameraPosition = new THREE.Vector3();\n    const cameraRotation = new THREE.Matrix4();\n    const centerToCamera = new THREE.Vector3();\n    const intersectionToCam = new THREE.Vector3();\n    const desiredCenterPoint = new THREE.Vector3();\n    const desiredTargetPosition = new THREE.Vector3();\n    const desiredTargetQuaternion = new THREE.Quaternion();\n    const currentTargetScale = new THREE.Vector3();\n    const desiredTargetScale = new THREE.Vector3();\n    const desiredTargetTransform = new THREE.Matrix4();\n    const centerToBorder = new THREE.Vector3();\n    const currentMeshRotation = new THREE.Matrix4();\n    const currentMeshScale = new THREE.Vector3();\n    const meshForward = new THREE.Vector3();\n    const boxCorners = new THREE.Vector3();\n    return function tick2() {\n      if (!this.didInit) {\n        this.doInit();\n      }\n      if (!this.ready) {\n        return;\n      }\n      const currentMesh = this.el.getObject3D(\"mesh\");\n      if (!currentMesh) {\n        return;\n      }\n      const isVisible = this.target.visible;\n      const isOpening = isVisible && !this.wasVisible;\n      this.wasVisible = isVisible;\n      if (!isOpening) {\n        return;\n      }\n      if (this.isTargetBoundingBoxDirty) {\n        computeLocalBoundingBox(this.target, this.targetLocalBoundingBox, true);\n        if (this.targetLocalBoundingBox.min.x === Infinity) {\n          // May be no visible elements in the target. Nothing to do in this case\n          return;\n        }\n        this.isTargetBoundingBoxDirty = false;\n      }\n      updateFromLocalBB(\n        this.target,\n        this.targetLocalBoundingBox,\n        this.targetCenter,\n        this.targetHalfExtents,\n        this.targetOffsetToCenter\n      );\n      const isMeshChanged = currentMesh !== this.previousMesh;\n      if (isMeshChanged) {\n        computeLocalBoundingBox(currentMesh, this.meshLocalBoundingBox, true);\n        this.previousMesh = currentMesh;\n      }\n      updateFromLocalBB(\n        currentMesh,\n        this.meshLocalBoundingBox,\n        this.meshCenter,\n        this.meshHalfExtents,\n        this.meshOffsetToCenter\n      );\n      currentMeshRotation.extractRotation(currentMesh.matrixWorld);\n      meshForward.set(0, 0, -1).applyMatrix4(currentMeshRotation);\n      this.cam.updateMatrices();\n      cameraPosition.setFromMatrixPosition(this.cam.matrixWorld);\n      cameraRotation.extractRotation(this.cam.matrixWorld);\n      centerToCamera.subVectors(cameraPosition, this.meshCenter);\n      const needsYRotate = this.data.isFlat && meshForward.dot(centerToCamera) > 0;\n      const intersection = this.el.sceneEl.systems.interaction.getActiveIntersection();\n      const meshSphereRadius =\n        boxCorners\n          .subVectors(this.meshLocalBoundingBox.max, this.meshLocalBoundingBox.min)\n          .multiply(currentMeshScale.setFromMatrixScale(currentMesh.matrixWorld))\n          .length() * 0.5;\n      if (this.data.isFlat) {\n        // Put in front of the flat media, on the side where the user is\n        desiredCenterPoint.copy(this.meshCenter).add(\n          centerToBorder\n            .set(0, 0, this.meshHalfExtents.z + this.targetHalfExtents.z + 0.02)\n            .multiplyScalar(needsYRotate ? -1 : 1)\n            .applyMatrix4(currentMeshRotation)\n        );\n      } else if (meshSphereRadius + 2 > centerToCamera.length()) {\n        // Inside the bounding sphere, put it close to the intersection, or close to the camera if there is no intersection\n        desiredCenterPoint.lerpVectors(\n          cameraPosition,\n          intersection ? intersection.point : this.meshCenter,\n          intersection ? 0.8 : 0.25\n        );\n      } else if (intersection) {\n        // Put it in the line towards the intersection, outside the bounding sphere\n        const distanceToSphere = centerToCamera.length() - meshSphereRadius;\n        intersectionToCam.subVectors(intersection.point, cameraPosition);\n        desiredCenterPoint.copy(cameraPosition).add(intersectionToCam.normalize().multiplyScalar(distanceToSphere));\n      } else {\n        // Put it on the bounding sphere\n        centerToCamera.normalize().multiplyScalar(meshSphereRadius);\n        desiredCenterPoint.copy(this.meshCenter).add(centerToCamera);\n      }\n      if (this.data.scale) {\n        const distanceToCenter = centerToCamera.subVectors(cameraPosition, desiredCenterPoint).length();\n        desiredTargetScale.setScalar(THREE.Math.clamp(0.45 * distanceToCenter, MIN_SCALE, MAX_SCALE));\n      } else {\n        desiredTargetScale.setFromMatrixScale(this.target.matrixWorld);\n      }\n      if (this.data.scale) {\n        desiredTargetPosition\n          .copy(desiredCenterPoint)\n          .sub(\n            this.targetOffsetToCenter\n              .divide(currentTargetScale.setFromMatrixScale(this.target.matrixWorld))\n              .multiply(desiredTargetScale)\n          );\n      } else {\n        desiredTargetPosition.copy(this.meshCenter).add(\n          centerToBorder\n            .set(0, 0, this.meshHalfExtents.z + this.targetHalfExtents.z + 0.02)\n            .multiplyScalar(needsYRotate ? -1 : 1)\n            .applyMatrix4(currentMeshRotation)\n        );\n      }\n      if (this.data.isFlat) {\n        desiredTargetQuaternion.setFromRotationMatrix(currentMeshRotation);\n        if (needsYRotate) {\n          desiredTargetQuaternion.multiply(ROTATE_Y);\n        }\n      } else {\n        updateTargetRotationFromCamera(\n          cameraPosition,\n          cameraRotation,\n          this.el.sceneEl.is(\"vr-mode\"),\n          desiredTargetPosition,\n          desiredTargetQuaternion\n        );\n      }\n      desiredTargetTransform.compose(\n        desiredTargetPosition,\n        desiredTargetQuaternion,\n        desiredTargetScale\n      );\n      setMatrixWorld(this.target, desiredTargetTransform);\n    };\n  })()\n});\n\nexport class PositionAtBorderSystem {\n  constructor() {}\n  tick() {\n    for (let i = 0; i < positionAtBorderComponents.length; i++) {\n      positionAtBorderComponents[i].tick2();\n    }\n  }\n}\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\nimport { SOUND_PIN } from \"../systems/sound-effects-system\";\nimport { applyThemeToTextButton } from \"../utils/theme\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label informing users about Discord bridging of pins.\n    tipSelector: { type: \"string\" },\n\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.tipEl = this.el.parentNode.querySelector(this.data.tipSelector);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onHovered = () => {\n      this.hovering = true;\n      this._updateUI();\n    };\n\n    this.onUnhovered = () => {\n      this.hovering = false;\n      this._updateUI();\n    };\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      window.APP.pinningHelper.setPinned(this.targetEl, !wasPinned);\n      if (!wasPinned) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PIN);\n      }\n    };\n\n    APP.store.addEventListener(\"themechanged\", this._updateUI);\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n    this.el.object3D.addEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.addEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n    this.el.object3D.removeEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _discordBridges() {\n    return window.APP.hubChannel.discordBridges();\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin =\n      window.APP.hubChannel.can(\"pin_objects\") && !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.object3D.visible = canPin;\n    this.labelEl.object3D.visible = canPin;\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n    const discordBridges = this._discordBridges();\n    this.tipEl.object3D.visible = !!(canPin && !isPinned && this.hovering && discordBridges.length > 0);\n\n    if (!canPin) return;\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    applyThemeToTextButton(this.el, isPinned);\n  }\n});\n","import { cloneMedia } from \"../utils/media-utils\";\nimport { closeExistingMediaMirror } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"mirror-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = async () => {\n      const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n      await closeExistingMediaMirror();\n\n      const { entity } = cloneMedia(this.targetEl, \"#linked-media\", this.src, false, true, mirrorTarget);\n\n      entity.object3D.scale.set(0.75, 0.75, 0.75);\n      entity.object3D.matrixNeedsUpdate = true;\n\n      mirrorTarget.parentEl.components[\"follow-in-fov\"].reset();\n      mirrorTarget.parentEl.object3D.visible = true;\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { closeExistingMediaMirror } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"close-mirrored-media-button\", {\n  init() {\n    this.onClick = async () => {\n      this.el.object3D.visible = false; // Hide button immediately on click\n      await closeExistingMediaMirror();\n      this.el.object3D.visible = true;\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","export function removeNetworkedObject(scene, targetEl) {\n  if (!NAF.utils.isMine(targetEl) && !NAF.utils.takeOwnership(targetEl)) return;\n\n  targetEl.setAttribute(\"animation__remove\", {\n    property: \"scale\",\n    dur: 200,\n    to: { x: 0.01, y: 0.01, z: 0.01 },\n    easing: \"easeInQuad\"\n  });\n\n  targetEl.addEventListener(\"animationcomplete\", () => {\n    scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n    NAF.utils.takeOwnership(targetEl);\n    targetEl.parentNode.removeChild(targetEl);\n  });\n}\n","import { removeNetworkedObject } from \"../utils/removeNetworkedObject\";\n\nAFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      removeNetworkedObject(this.el.sceneEl, this.targetEl);\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { findComponentsInNearestAncestor } from \"../utils/scene-graph\";\nAFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false },\n    selector: { default: null }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      if (this.data.selector) {\n        this.targetEl = networkedEl.querySelector(this.data.selector);\n      } else {\n        this.targetEl = networkedEl;\n      }\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n\n    this.menuPlacementRoots = findComponentsInNearestAncestor(this.el, \"position-at-border\");\n  },\n\n  tick() {\n    const isVisible = this.el.object3D.visible;\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n      for (let i = 0; i < this.menuPlacementRoots.length; i++) {\n        this.menuPlacementRoots[i].markDirty();\n      }\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video || !mediaVideo.videoMutedAt) return;\n\n      // iOS initially plays the sound and *then* mutes it, and sometimes a second video playing\n      // can break all sound in the app. (Likely a Safari bug.) Adding a delay before the unmute\n      // occurs seems to help with reducing this.\n      if (performance.now() - mediaVideo.videoMutedAt < 3000) {\n        return;\n      }\n\n      if (mediaVideo.video.muted) {\n        mediaVideo.video.muted = false;\n        this.el.setAttribute(\"visible\", false);\n      }\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        if (!this.el.components.networked || NAF.utils.isMine(this.el)) {\n          this.el.parentNode.removeChild(this.el);\n        }\n      }\n    };\n  })()\n});\n","import { addAndArrangeMedia } from \"../utils/media-utils\";\nimport { createImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, SOUND_CAMERA_TOOL_COUNTDOWN } from \"../systems/sound-effects-system\";\nimport { cloneObject3D } from \"../utils/three-utils\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\nimport anime from \"animejs\";\nimport { Layers } from \"./layers\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\nconst isFirefox = browser.name === \"firefox\";\n\nconst cameraModelPromise = waitForDOMContentLoaded().then(() => loadModel(cameraModelSrc));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  \"right-cursor\": {\n    takeSnapshot: paths.actions.cursor.right.takeSnapshot\n  },\n  \"left-cursor\": {\n    takeSnapshot: paths.actions.cursor.left.takeSnapshot\n  }\n};\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst VIEWFINDER_FPS = 6;\nconst VIDEO_FPS = 25;\n// Prefer h264 if available due to faster decoding speec on most platforms\nconst videoCodec = [\"h264\", \"vp9,opus\", \"vp8,opus\", \"vp9\", \"vp8\"].find(\n  codec => window.MediaRecorder && MediaRecorder.isTypeSupported(`video/webm; codecs=${codec}`)\n);\nconst videoMimeType = videoCodec ? `video/webm; codecs=${videoCodec}` : null;\nconst hasWebGL2 = !!document.createElement(\"canvas\").getContext(\"webgl2\");\nconst allowVideo = !!videoMimeType && hasWebGL2;\n\nconst isOculusBrowser = navigator.userAgent.match(/Oculus/);\nconst CAPTURE_WIDTH = isMobileVR && !isOculusBrowser ? 640 : 1280;\nconst CAPTURE_HEIGHT = isMobileVR && !isOculusBrowser ? 360 : 720;\nconst RENDER_WIDTH = 1280;\nconst RENDER_HEIGHT = 720;\nconst CAPTURE_DURATIONS = [3, 7, 15, 30, 60, Infinity];\nconst DEFAULT_CAPTURE_DURATION = 7;\nconst COUNTDOWN_DURATION = 3;\nconst VIDEO_LOOPS = 3; // Number of times to loop the videos we spawn before stopping them (for perf)\nconst MAX_DURATION_TO_LIMIT_LOOPS = 31; // Max duration for which we limit loops (eg GIFs vs long form videos)\n\nconst snapCanvas = document.createElement(\"canvas\");\n\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\nfunction blitFramebuffer(renderer, src, srcX0, srcY0, srcX1, srcY1, dest, dstX0, dstY0, dstX1, dstY1) {\n  const gl = renderer.getContext();\n\n  // Copies from one framebuffer to another. Note that at the end of this function, you need to restore\n  // the original framebuffer via setRenderTarget\n  const srcFramebuffer = renderer.properties.get(src).__webglFramebuffer;\n  const destFramebuffer = renderer.properties.get(dest).__webglFramebuffer;\n\n  if (srcFramebuffer && destFramebuffer) {\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, srcFramebuffer);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, destFramebuffer);\n\n    if (gl.checkFramebufferStatus(gl.READ_FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      gl.blitFramebuffer(srcX0, srcY0, srcX1, srcY1, dstX0, dstY0, dstX1, dstY1, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n    }\n  }\n}\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    captureDuration: { default: DEFAULT_CAPTURE_DURATION },\n    captureAudio: { default: false },\n    isSnapping: { default: false },\n    isRecording: { default: false },\n    label: { default: \"\" }\n  },\n\n  init() {\n    this.el.object3D.visible = false; // Make invisible until model ready\n    this.lastUpdate = performance.now();\n    this.localSnapCount = 0; // Counter that is used to arrange photos/videos\n\n    this.showCameraViewfinder = !isMobileVR;\n\n    this.renderTarget = new THREE.WebGLRenderTarget(RENDER_WIDTH, RENDER_HEIGHT, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.GammaEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, RENDER_WIDTH / RENDER_HEIGHT, 0.1, 30000);\n    this.camera.layers.enable(Layers.CAMERA_LAYER_VIDEO_TEXTURE_TARGET);\n    this.camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.camera.position.set(0, 0, 0.05);\n    this.camera.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n    material.toneMapped = false;\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (this.showCameraViewfinder) {\n        this.viewfinderInViewThisFrame = true;\n      }\n    };\n\n    this.el.sceneEl.addEventListener(\"stateadded\", () => this.updateUI());\n    this.el.sceneEl.addEventListener(\"stateremoved\", () => this.updateUI());\n\n    cameraModelPromise.then(model => {\n      const mesh = cloneObject3D(model.scene);\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      this.el.object3D.visible = true;\n      this.el.object3D.scale.set(0.5, 0.5, 0.5);\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      const obj = this.el.object3D;\n\n      const step = (function() {\n        const lastValue = {};\n        return function(anim) {\n          const value = anim.animatables[0].target;\n\n          value.x = Math.max(Number.MIN_VALUE, value.x);\n          value.y = Math.max(Number.MIN_VALUE, value.y);\n          value.z = Math.max(Number.MIN_VALUE, value.z);\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          obj.scale.set(value.x, value.y, value.z);\n          obj.matrixNeedsUpdate = true;\n        };\n      })();\n\n      const config = {\n        duration: 200,\n        easing: \"easeOutQuad\",\n        elasticity: 400,\n        loop: 0,\n        round: false,\n        x: 1,\n        y: 1,\n        z: 1,\n        targets: [{ x: 0.5, y: 0.5, z: 0.5 }],\n        update: anim => step(anim),\n        complete: anim => step(anim)\n      };\n\n      anime(config);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneBufferGeometry(width, width / this.camera.aspect);\n\n      this.screen = new THREE.Mesh(geometry, material);\n      this.screen.rotation.set(0, Math.PI, 0);\n      this.screen.position.set(0, 0, -0.042);\n      this.screen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"screen\", this.screen);\n\n      this.selfieScreen = new THREE.Mesh(geometry, material);\n      this.selfieScreen.position.set(0, 0.4, 0);\n      this.selfieScreen.scale.set(-2, 2, 2);\n      this.selfieScreen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"selfieScreen\", this.selfieScreen);\n\n      this.label = this.el.querySelector(\".label\");\n      this.labelActionBackground = this.el.querySelector(\".label-action-background\");\n      this.labelBackground = this.el.querySelector(\".label-background\");\n      this.durationLabel = this.el.querySelector(\".duration\");\n\n      this.recordIcon = this.el.querySelector(\".record-icon\");\n      this.recordAlphaIcon = this.el.querySelector(\".record-alpha-icon\");\n\n      this.label.object3D.visible = false;\n      this.durationLabel.object3D.visible = false;\n\n      this.snapMenu = this.el.querySelector(\".camera-snap-menu\");\n      this.snapButton = this.el.querySelector(\".snap-button\");\n      this.recordButton = this.el.querySelector(\".record-button\");\n\n      this.cancelButton = this.el.querySelector(\".cancel-button\");\n      this.nextDurationButton = this.el.querySelector(\".next-duration\");\n      this.prevDurationButton = this.el.querySelector(\".prev-duration\");\n      this.snapButton.object3D.addEventListener(\"interact\", () => this.snapClicked(true));\n      this.recordButton.object3D.addEventListener(\"interact\", () => this.snapClicked(false));\n      this.cancelButton.object3D.addEventListener(\"interact\", () => this.cancelSnapping());\n      this.nextDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(1));\n      this.prevDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(-1));\n      this.stopButton = this.el.querySelector(\".stop-button\");\n      this.stopButton.object3D.addEventListener(\"interact\", () => this.stopRecording());\n      this.captureAudioButton = this.el.querySelector(\".capture-audio\");\n      this.captureAudioIcon = this.el.querySelector(\".capture-audio-icon\");\n      this.captureAudioButton.object3D.addEventListener(\"interact\", () =>\n        this.el.setAttribute(\"camera-tool\", \"captureAudio\", !this.data.captureAudio)\n      );\n\n      this.updateUI();\n\n      this.updateRenderTargetNextTick = true;\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n\n      waitForDOMContentLoaded().then(() => {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      });\n    });\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.stopRecording();\n  },\n\n  updateViewfinder() {\n    this.updateRenderTargetNextTick = true;\n  },\n\n  changeDuration(delta) {\n    const idx = CAPTURE_DURATIONS.findIndex(d => this.data.captureDuration == d);\n    const newIdx = idx === 0 && delta === -1 ? CAPTURE_DURATIONS.length - 1 : (idx + delta) % CAPTURE_DURATIONS.length;\n    this.el.setAttribute(\"camera-tool\", \"captureDuration\", CAPTURE_DURATIONS[newIdx]);\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  snapClicked(isPhoto) {\n    if (this.data.isSnapping) return;\n    if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) return;\n\n    this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n\n    this.snapCountdown = COUNTDOWN_DURATION;\n    this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n\n    this.countdownInterval = setInterval(async () => {\n      if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n        return;\n      }\n\n      this.snapCountdown--;\n\n      if (this.snapCountdown === 0) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n\n        if (isPhoto) {\n          this.el.setAttribute(\"camera-tool\", { label: \"\", isSnapping: false });\n          this.takeSnapshotNextTick = true;\n        } else {\n          this.beginRecording(this.data.captureDuration);\n        }\n      } else {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n        this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n      }\n    }, 1000);\n  },\n\n  cancelSnapping() {\n    clearInterval(this.countdownInterval);\n    this.stopRecording(true);\n    this.updateUI();\n  },\n\n  update() {\n    this.updateUI();\n  },\n\n  updateUI() {\n    if (!this.label) return;\n\n    const label = this.data.label;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hasDuration = this.data.captureDuration !== Infinity;\n\n    const isRecordingUnbound = !hasDuration && this.data.isRecording && this.videoRecorder;\n    this.label.object3D.visible = !!label && !isRecordingUnbound;\n    const showActionLabelBackground = this.label.object3D.visible && this.data.isRecording && !isRecordingUnbound;\n\n    this.label.setAttribute(\"text\", { value: label, color: showActionLabelBackground ? \"#fafafa\" : \"#ff3464\" });\n\n    this.labelActionBackground.object3D.visible = showActionLabelBackground;\n    this.labelBackground.object3D.visible = this.label.object3D.visible && !showActionLabelBackground;\n\n    this.stopButton.object3D.visible = isRecordingUnbound;\n\n    if (hasDuration) {\n      this.durationLabel.setAttribute(\"text\", \"value\", `${this.data.captureDuration}`);\n    }\n\n    this.durationLabel.object3D.visible = hasDuration && !this.data.isSnapping && !isFrozen && allowVideo;\n    this.recordIcon.object3D.visible = !hasDuration && !isFrozen && allowVideo;\n    this.recordAlphaIcon.object3D.visible = hasDuration && !isFrozen && allowVideo;\n    this.snapButton.object3D.visible = !this.data.isSnapping && !isFrozen;\n    this.recordButton.object3D.visible = !this.data.isSnapping && !isFrozen && allowVideo;\n    this.cancelButton.object3D.visible = this.data.isSnapping && !isFrozen;\n    this.prevDurationButton.object3D.visible = this.nextDurationButton.object3D.visible =\n      !this.data.isSnapping && allowVideo && !isFrozen && allowVideo;\n\n    this.captureAudioIcon.setAttribute(\"icon-button\", \"active\", this.data.captureAudio);\n  },\n\n  async beginRecording(duration) {\n    if (!this.videoContext) {\n      this.videoCanvas = document.createElement(\"canvas\");\n      this.videoCanvas.width = CAPTURE_WIDTH;\n      this.videoCanvas.height = CAPTURE_HEIGHT;\n      this.videoContext = this.videoCanvas.getContext(\"2d\");\n      this.videoImageData = this.videoContext.createImageData(CAPTURE_WIDTH, CAPTURE_HEIGHT);\n      this.videoPixels = new Uint8Array(CAPTURE_WIDTH * CAPTURE_HEIGHT * 4);\n      this.videoImageData.data.set(this.videoPixels);\n    }\n\n    const stream = new MediaStream();\n    const track = this.videoCanvas.captureStream(VIDEO_FPS).getVideoTracks()[0];\n\n    // This adds hacks for current browser issues with media recordings when audio tracks are muted or missing.\n    const attachBlankAudio = () => {\n      // Chrome has issues when the audio tracks are silent so we only do this for FF.\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=1223382\n      if (isFirefox) {\n        // FF 73+ seems to fail to decode videos with no audio track, so we always include a silent track.\n        const context = THREE.AudioContext.getContext();\n        const oscillator = context.createOscillator();\n        const gain = context.createGain();\n        const destination = context.createMediaStreamDestination();\n        gain.gain.setValueAtTime(0.0001, context.currentTime);\n        oscillator.connect(destination);\n        gain.connect(destination);\n        stream.addTrack(destination.stream.getAudioTracks()[0]);\n      }\n    };\n\n    if (this.data.captureAudio) {\n      const selfAudio = await APP.dialog.getMediaStream(NAF.clientId, \"audio\");\n\n      // NOTE: if we don't have a self audio track, we can end up generating an empty video (browser bug?)\n      // if no audio comes through on the listener source. (Eg the room is otherwise silent.)\n      // So for now, if we don't have a track, just disable audio capture.\n      if (selfAudio && selfAudio.getAudioTracks().length > 0) {\n        const context = THREE.AudioContext.getContext();\n        const destination = context.createMediaStreamDestination();\n\n        const listener = this.el.sceneEl.audioListener;\n        if (listener) {\n          // NOTE audio is not captured from camera vantage point for now.\n          listener.getInput().connect(destination);\n        }\n        context.createMediaStreamSource(selfAudio).connect(destination);\n\n        const audio = destination.stream.getAudioTracks()[0];\n        stream.addTrack(audio);\n      } else {\n        attachBlankAudio();\n      }\n    } else {\n      attachBlankAudio();\n    }\n\n    stream.addTrack(track);\n    this.videoRecorder = new MediaRecorder(stream, { mimeType: videoMimeType });\n    const chunks = [];\n    const recordingStartTime = performance.now();\n\n    this.videoRecorder.ondataavailable = e => chunks.push(e.data);\n\n    this.updateRenderTargetNextTick = true;\n\n    this.videoRecorder.start();\n    this.el.setAttribute(\"camera-tool\", { isRecording: true, label: \" \" });\n    this.el.sceneEl.emit(\"action_camera_recording_started\");\n\n    if (duration !== Infinity) {\n      this.videoCountdown = this.data.captureDuration;\n      this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n\n      this.videoCountdownInterval = setInterval(() => {\n        this.videoCountdown--;\n\n        if (this.videoCountdown === 0) {\n          this.stopRecording();\n          this.videoCountdownInterval = null;\n        } else {\n          this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n        }\n      }, 1000);\n    }\n\n    this.videoRecorder._free = () => (chunks.length = 0); // Used for cancelling\n    this.videoRecorder.onstop = async () => {\n      this.el.sceneEl.emit(\"action_camera_recording_ended\");\n\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const recordingDuration = performance.now() - recordingStartTime;\n      const blob = new Blob(chunks, { type: mimeType });\n\n      chunks.length = 0;\n\n      const { entity, orientation } = addAndArrangeMedia(\n        this.el,\n        new File([blob], \"capture\", { type: mimeType.split(\";\")[0] }), // Drop codec\n        \"video-camera\",\n        this.localSnapCount,\n        !!this.playerIsBehindCamera\n      );\n\n      entity.addEventListener(\n        \"video-loaded\",\n        () => {\n          // If we were recording audio, then pause the video immediately after starting.\n          //\n          // Or, to limit the # of concurrent videos playing, if it was a short clip, let it loop\n          // a few times and then pause it.\n          if (this.data.captureAudio || recordingDuration <= MAX_DURATION_TO_LIMIT_LOOPS * 1000) {\n            setTimeout(() => {\n              if (!NAF.utils.isMine(entity) && !NAF.utils.takeOwnership(entity)) return;\n              entity.components[\"media-video\"].tryUpdateVideoPlaybackState(true);\n            }, this.data.captureAudio ? 0 : recordingDuration * VIDEO_LOOPS + 100);\n          }\n        },\n        { once: true }\n      );\n\n      this.localSnapCount++;\n\n      orientation.then(() => this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA }));\n    };\n  },\n\n  stopRecording(cancel) {\n    if (this.videoRecorder) {\n      if (cancel) {\n        this.videoRecorder.onstop = () => {};\n        this.videoRecorder._free();\n        this.el.sceneEl.emit(\"action_camera_recording_ended\");\n      }\n\n      this.videoRecorder.stop();\n      this.videoRecorder = null;\n\n      if (!cancel) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n      }\n    }\n    clearInterval(this.videoCountdownInterval);\n\n    this.videoCountdownInterval = null;\n\n    this.el.setAttribute(\"camera-tool\", { label: \" \", isRecording: false, isSnapping: false });\n  },\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n\n    const heldThisFrame =\n      (heldLeftHand && userinput.get(interaction.options.leftHand.grabPath)) ||\n      (heldRightHand && userinput.get(interaction.options.rightHand.grabPath)) ||\n      (heldRightRemote && userinput.get(interaction.options.rightRemote.grabPath));\n\n    const isHolding = heldLeftHand || heldRightHand || heldRightRemote;\n\n    this.updateSnapMenuOrientation();\n\n    if (heldThisFrame) {\n      this.localSnapCount = 0;\n    }\n\n    this.showCameraViewfinder = isHolding || !isMobileVR || this.data.isSnapping || this.videoRecorder;\n\n    if (this.screen && this.selfieScreen) {\n      this.screen.visible = this.selfieScreen.visible = !!this.showCameraViewfinder;\n    }\n\n    // Always draw held, snapping, or recording camera viewfinders with a decent framerate\n    if (\n      (isHolding || this.data.isSnapping || this.videoRecorder) &&\n      performance.now() - this.lastUpdate >= 1000 / (this.videoRecorder ? VIDEO_FPS : VIEWFINDER_FPS)\n    ) {\n      this.updateRenderTargetNextTick = true;\n    }\n\n    const isHoldingTrigger = this.isHoldingSnapshotTrigger();\n    const isPermittedToUse = window.APP.hubChannel.can(\"spawn_camera\");\n\n    if (isPermittedToUse) {\n      // If the user lets go of the trigger before 500ms, take a picture, otherwise record until they let go.\n      if (isHoldingTrigger && !this.data.isSnapping && !this.snapTriggerTimeout) {\n        this.snapTriggerTimeout = setTimeout(() => {\n          if (this.isHoldingSnapshotTrigger()) {\n            this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n            this.beginRecording(Infinity);\n\n            const releaseInterval = setInterval(() => {\n              if (this.isHoldingSnapshotTrigger()) return;\n              this.stopRecording();\n              clearInterval(releaseInterval);\n            }, 500);\n          }\n\n          this.snapTriggerTimeout = null;\n        }, 500);\n      } else if (!isHoldingTrigger && !this.data.isSnapping && this.snapTriggerTimeout) {\n        clearTimeout(this.snapTriggerTimeout);\n        this.snapTriggerTimeout = null;\n        this.takeSnapshotNextTick = true;\n      }\n    }\n  },\n\n  tock: (function() {\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n          // scene.autoUpdate will be false so explicitly update the world matrices\n          this.object3D.updateMatrixWorld();\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (\n        this.takeSnapshotNextTick ||\n        (this.updateRenderTargetNextTick && (this.viewfinderInViewThisFrame || this.videoRecorder))\n      ) {\n        let playerHudWasVisible = false;\n\n        if (this.playerHud) {\n          playerHudWasVisible = this.playerHud.visible;\n          this.playerHud.visible = false;\n          if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n            for (const mesh of Object.values(this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.meshes)) {\n              mesh.visible = false;\n            }\n          }\n        }\n\n        const bubbleSystem = this.el.sceneEl.systems[\"personal-space-bubble\"];\n        const boneVisibilitySystem = this.el.sceneEl.systems[\"hubs-systems\"].boneVisibilitySystem;\n\n        if (bubbleSystem) {\n          for (let i = 0, l = bubbleSystem.invaders.length; i < l; i++) {\n            bubbleSystem.invaders[i].disable();\n          }\n          // HACK, bone visibility typically takes a tick to update, but since we want to be able\n          // to have enable() and disable() be reflected this frame, we need to do it immediately.\n          boneVisibilitySystem.tick();\n          // scene.autoUpdate will be false so explicitly update the world matrices\n          boneVisibilitySystem.updateMatrices();\n        }\n\n        const tmpVRFlag = renderer.xr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        const tmpAutoUpdate = sceneEl.object3D.autoUpdate;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.xr.enabled = false;\n\n        // The entire scene graph matrices should already be updated\n        // in tick(). They don't need to be recomputed again in tock().\n        sceneEl.object3D.autoUpdate = false;\n\n        if (allowVideo && this.videoRecorder && !this.videoRenderTarget) {\n          // Create a separate render target for video because we need to flip and (sometimes) downscale it before\n          // encoding it to video.\n          this.videoRenderTarget = new THREE.WebGLRenderTarget(CAPTURE_WIDTH, CAPTURE_HEIGHT, {\n            format: THREE.RGBAFormat,\n            minFilter: THREE.LinearFilter,\n            magFilter: THREE.NearestFilter,\n            encoding: THREE.sRGBEncoding,\n            depth: false,\n            stencil: false\n          });\n\n          // Used to set up framebuffer in three.js as a side effect\n          renderer.setRenderTarget(this.videoRenderTarget);\n        }\n\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(sceneEl.object3D, this.camera);\n        renderer.setRenderTarget(null);\n\n        renderer.xr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        sceneEl.object3D.autoUpdate = tmpAutoUpdate;\n\n        if (this.playerHud) {\n          this.playerHud.visible = playerHudWasVisible;\n          if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n            for (const mesh of Object.values(this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.meshes)) {\n              mesh.visible = true;\n            }\n          }\n        }\n\n        if (bubbleSystem) {\n          for (let i = 0, l = bubbleSystem.invaders.length; i < l; i++) {\n            bubbleSystem.invaders[i].enable();\n          }\n          // HACK, bone visibility typically takes a tick to update, but since we want to be able\n          // to have enable() and disable() be reflected this frame, we need to do it immediately.\n          boneVisibilitySystem.tick();\n          boneVisibilitySystem.updateMatrices();\n        }\n\n        this.lastUpdate = now;\n\n        if (this.videoRecorder) {\n          // https://chromium.googlesource.com/chromium/src/gpu/+/master/command_buffer/service/gles2_cmd_decoder.cc#8899\n          // We avoid using blitting and flip the render target pixels for OB.\n          if (!isOculusBrowser) {\n            // This blit operation will (if necessary) scale/resample the view finder render target and, importantly,\n            // flip the texture on Y\n            blitFramebuffer(\n              renderer,\n              this.renderTarget,\n              0,\n              0,\n              RENDER_WIDTH,\n              RENDER_HEIGHT,\n              this.videoRenderTarget,\n              0,\n              CAPTURE_HEIGHT,\n              CAPTURE_WIDTH,\n              0\n            );\n          }\n          renderer.readRenderTargetPixels(\n            !isOculusBrowser ? this.videoRenderTarget : this.renderTarget,\n            0,\n            0,\n            CAPTURE_WIDTH,\n            CAPTURE_HEIGHT,\n            this.videoPixels\n          );\n          if (isOculusBrowser) {\n            this.flipPixelsY(this.videoPixels, CAPTURE_WIDTH, CAPTURE_HEIGHT);\n          }\n          this.videoImageData.data.set(this.videoPixels);\n          this.videoContext.putImageData(this.videoImageData, 0, 0);\n        }\n\n        this.updateRenderTargetNextTick = false;\n        this.viewfinderInViewThisFrame = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(RENDER_WIDTH * RENDER_HEIGHT * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, RENDER_WIDTH, RENDER_HEIGHT, this.snapPixels);\n\n        pixelsToPNG(this.snapPixels, RENDER_WIDTH, RENDER_HEIGHT).then(file => {\n          const { orientation } = addAndArrangeMedia(\n            this.el,\n            file,\n            \"photo-camera\",\n            this.localSnapCount,\n            !!this.playerIsBehindCamera\n          );\n\n          orientation.then(() => {\n            this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n        this.takeSnapshotNextTick = false;\n        this.localSnapCount++;\n      }\n    };\n  })(),\n\n  flipPixelsY(pixels, width, height) {\n    const halfHeight = (height / 2) | 0;\n    const bytesPerRow = width * 4;\n\n    const temp = new Uint8Array(width * 4);\n    for (let y = 0; y < halfHeight; ++y) {\n      const topOffset = y * bytesPerRow;\n      const bottomOffset = (height - y - 1) * bytesPerRow;\n      temp.set(pixels.subarray(topOffset, topOffset + bytesPerRow));\n      pixels.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n      pixels.set(temp, bottomOffset);\n    }\n  },\n\n  isHoldingSnapshotTrigger: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n    const heldLeftRemote = interaction.state.leftRemote.held === this.el;\n\n    let grabberId;\n    if (heldRightHand) {\n      grabberId = \"player-right-controller\";\n    } else if (heldLeftHand) {\n      grabberId = \"player-left-controller\";\n    } else if (heldRightRemote) {\n      grabberId = \"right-cursor\";\n    } else if (heldLeftRemote) {\n      grabberId = \"left-cursor\";\n    }\n\n    if (grabberId) {\n      const grabberPaths = pathsMap[grabberId];\n      if (userinput.get(grabberPaths.takeSnapshot)) {\n        return true;\n      }\n    }\n\n    return !!userinput.get(paths.actions.takeSnapshot);\n  },\n\n  updateSnapMenuOrientation: (function() {\n    const playerWorld = new THREE.Vector3();\n    const cameraWorld = new THREE.Vector3();\n    const playerToCamera = new THREE.Vector3();\n    const cameraForwardPoint = new THREE.Vector3();\n    const cameraForwardWorld = new THREE.Vector3();\n    return function() {\n      if (!this.playerCamera) return;\n      this.el.object3D.getWorldPosition(cameraWorld);\n      this.playerCamera.getWorldPosition(playerWorld);\n      playerToCamera.subVectors(playerWorld, cameraWorld);\n      cameraForwardPoint.set(0, 0, 1);\n      this.el.object3D.localToWorld(cameraForwardPoint);\n      cameraForwardWorld.subVectors(cameraForwardPoint, cameraWorld);\n      cameraForwardWorld.normalize();\n      playerToCamera.normalize();\n\n      const playerIsBehindCamera = cameraForwardWorld.dot(playerToCamera) < 0;\n\n      if (this.playerIsBehindCamera !== playerIsBehindCamera) {\n        this.playerIsBehindCamera = playerIsBehindCamera;\n        this.snapMenu.object3D.rotation.set(0, this.playerIsBehindCamera ? Math.PI : 0, 0);\n        this.snapMenu.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })()\n});\n","import { cloneMedia } from \"../utils/media-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      this.el.object3D.visible = !!visible;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = () => {\n      const { entity } = cloneMedia(this.targetEl, \"#interactable-media\", this.src);\n\n      entity.object3D.scale.copy(this.targetEl.object3D.scale);\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#avatar-pov-node\",\n        offset: { x: 0, y: 0, z: -1.5 * this.targetEl.object3D.scale.z }\n      });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { willRequireUserGesture, showFullScreenIfAvailable } from \"./fullscreen\";\nimport screenfull from \"screenfull\";\n\nlet _isIn2DInterstitial = false;\nlet _exitAction = null;\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst getUserGesture = () => {\n  return new Promise(resolve => {\n    const scene = document.querySelector(\"a-scene\");\n    scene.addEventListener(\"2d-interstitial-gesture-complete\", resolve, { once: true });\n    scene.emit(\"2d-interstitial-gesture-required\");\n  });\n};\n\nexport async function handleExitTo2DInterstitial(isLower, exitAction, nonFullscreen) {\n  const scene = document.querySelector(\"a-scene\");\n  if (!scene.is(\"vr-mode\")) {\n    if (isMobileVR && willRequireUserGesture()) {\n      await getUserGesture();\n      await showFullScreenIfAvailable();\n    }\n\n    return;\n  }\n\n  _isIn2DInterstitial = true;\n  _exitAction = exitAction;\n\n  if (isMobileVR) {\n    await scene.exitVR();\n\n    if (!nonFullscreen) {\n      await getUserGesture();\n      await showFullScreenIfAvailable();\n    }\n  } else {\n    // Non-immersive browser, show notice\n    const vrNotice = document.querySelector(\".vr-notice\");\n    vrNotice.object3D.visible = true;\n    vrNotice.setAttribute(\"follow-in-fov\", {\n      angle: isLower ? 39 : -15\n    });\n  }\n}\n\nexport async function exit2DInterstitialAndEnterVR(force) {\n  if (!force && !_isIn2DInterstitial) {\n    return;\n  }\n\n  _isIn2DInterstitial = false;\n\n  document.querySelector(\".vr-notice\").object3D.visible = false;\n\n  const scene = document.querySelector(\"a-scene\");\n\n  if (isMobileVR) {\n    if (screenfull.isFullscreen) {\n      await screenfull.exit();\n      await getUserGesture();\n      await scene.enterVR();\n    } else {\n      await scene.enterVR();\n    }\n  } else {\n    if (!scene.is(\"vr-mode\")) {\n      await scene.enterVR();\n    }\n  }\n}\n\nexport function isIn2DInterstitial() {\n  return _isIn2DInterstitial;\n}\n\nexport async function forceExitFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n\n  if (_exitAction) {\n    _exitAction();\n    _exitAction = null;\n  }\n\n  await exit2DInterstitialAndEnterVR();\n}\n","import { isLocalHubsUrl, isLocalHubsSceneUrl, isHubsRoomUrl, isLocalHubsAvatarUrl } from \"../utils/media-url-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\nimport { handleExitTo2DInterstitial } from \"../utils/vr-interstitial\";\nimport { changeHub } from \"../change-hub\";\n\nAFRAME.registerComponent(\"open-media-button\", {\n  schema: {\n    onlyOpenLink: { type: \"boolean\" }\n  },\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = async () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      const mediaLoader = this.targetEl.components[\"media-loader\"].data;\n      const src = (this.src = (mediaLoader.mediaOptions && mediaLoader.mediaOptions.href) || mediaLoader.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      this.el.object3D.visible = !!visible;\n\n      if (visible) {\n        let label = \"open link\";\n        if (!this.data.onlyOpenLink) {\n          let hubId;\n          if (await isLocalHubsAvatarUrl(src)) {\n            label = \"use avatar\";\n          } else if ((await isLocalHubsSceneUrl(src)) && mayChangeScene) {\n            label = \"use scene\";\n          } else if ((hubId = await isHubsRoomUrl(src))) {\n            const url = new URL(src);\n            if (url.hash && window.APP.hub.hub_id === hubId) {\n              label = \"go to\";\n            } else {\n              label = \"visit room\";\n            }\n          }\n        }\n        this.label.setAttribute(\"text\", \"value\", label);\n      }\n    };\n\n    this.onClick = async () => {\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      const exitImmersive = async () => await handleExitTo2DInterstitial(false, () => {}, true);\n\n      let hubId;\n      if (this.data.onlyOpenLink) {\n        await exitImmersive();\n        window.open(this.src);\n      } else if (await isLocalHubsAvatarUrl(this.src)) {\n        const avatarId = new URL(this.src).pathname.split(\"/\").pop();\n        window.APP.store.update({ profile: { avatarId } });\n        this.el.sceneEl.emit(\"avatar_updated\");\n      } else if ((await isLocalHubsSceneUrl(this.src)) && mayChangeScene) {\n        this.el.sceneEl.emit(\"scene_media_selected\", this.src);\n      } else if ((hubId = await isHubsRoomUrl(this.src))) {\n        const url = new URL(this.src);\n        if (url.hash && window.APP.hub.hub_id === hubId) {\n          // move to waypoint w/o writing to history\n          window.history.replaceState(null, null, window.location.href.split(\"#\")[0] + url.hash);\n        } else if (APP.store.state.preferences.fastRoomSwitching && isLocalHubsUrl(this.src)) {\n          // move to new room without page load or entry flow\n          changeHub(hubId);\n        } else {\n          await exitImmersive();\n          location.href = this.src;\n        }\n      } else {\n        await exitImmersive();\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { SOUND_MEDIA_LOADING } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"local-refresh-media-button\", {\n  init() {\n    this.onClick = async () => {\n      if (this.targetEl) {\n        const c = this.targetEl.components;\n        // If an HLS stream is loaded, refresh directly with HLS.js\n        if (c[\"media-video\"] && c[\"media-video\"].videoTexture && c[\"media-video\"].videoTexture.hls) {\n          c[\"media-video\"].videoTexture.hls.recoverMediaError();\n        } else if (c[\"media-loader\"]) {\n          // Otherwise fall back to hard resolve-level refresh which should work for any media\n          c[\"media-loader\"].update(c[\"media-loader\"].data, true);\n        }\n      }\n    };\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => (this.targetEl = networkedEl))\n      .catch(() => this.el.parentNode.removeChild(this.el));\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n\nAFRAME.registerComponent(\"refresh-media-button\", {\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    this.onClick = async () => {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n\n      if (this.targetEl) {\n        this.targetEl.components[\"media-loader\"].refresh();\n\n        // Hide button + do the sound effect here, so only the person who clicked hears it, not everyone.\n        this.el.object3D.visible = false;\n        const loadingSoundEffect = sfx.playPositionalSoundFollowing(SOUND_MEDIA_LOADING, this.targetEl.object3D, true);\n\n        this.targetEl.addEventListener(\n          \"media_refreshed\",\n          () => {\n            sfx.stopPositionalAudio(loadingSoundEffect);\n            this.el.object3D.visible = true;\n            this.updateVisibility();\n          },\n          { once: true }\n        );\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n\n      if (this.targetEl) {\n        this.targetEl.addEventListener(\"pinned\", this.updateVisibility);\n        this.targetEl.addEventListener(\"unpinned\", this.updateVisibility);\n      }\n\n      this.updateVisibility();\n    });\n  },\n\n  updateVisibility() {\n    if (!this.targetEl) return;\n\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n    this.el.object3D.visible =\n      (!isPinned && window.APP.hubChannel.can(\"spawn_and_move_media\")) || window.APP.hubChannel.can(\"pin_objects\");\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this.updateVisibility);\n      this.targetEl.removeEventListener(\"unpinned\", this.updateVisibility);\n    }\n  }\n});\n","import configs from \"../utils/configs\";\n\nAFRAME.registerComponent(\"tweet-media-button\", {\n  init() {\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.targetEl = networkedEl;\n      })\n      .catch(() => {\n        // Non-networked, do not handle for now, and hide button.\n        this.el.object3D.visible = false;\n      });\n\n    this.onClick = () => {\n      const initialTweet = `Taken in ${location.hostname} `;\n\n      const { src, contentSubtype } = this.targetEl.components[\"media-loader\"].data;\n      this.el.sceneEl.emit(\"action_media_tweet\", { mediaUrl: src, contentSubtype, initialTweet });\n    };\n  },\n\n  play() {\n    if (!configs.integration(\"twitter\")) {\n      this.el.object3D.visible = false;\n      return;\n    }\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { idForAvatarUrl } from \"../utils/media-url-utils\";\nimport { fetchAvatar, remixAvatar } from \"../utils/avatar-utils\";\n\nconst REMIX_LABEL = \"save avatar\";\nAFRAME.registerComponent(\"remix-avatar-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n    this.label.setAttribute(\"text\", \"value\", REMIX_LABEL);\n    this.updateSrc = async () => {\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n      try {\n        this.avatar = await fetchAvatar(idForAvatarUrl(this.src));\n        this.el.object3D.visible = this.avatar && this.avatar.allow_remixing && this.avatar.type === \"avatar_listing\";\n      } catch (e) {\n        console.error(e);\n        this.el.object3D.visible = false;\n      }\n    };\n\n    this.onClick = async () => {\n      if (this.copying || !this.avatar) return;\n\n      try {\n        this.copying = true;\n        this.label.setAttribute(\"text\", \"value\", \"Saving...\");\n\n        await remixAvatar(this.avatar.avatar_id, this.avatar.name);\n\n        this.label.setAttribute(\"text\", \"value\", \"Saved!\");\n      } catch (e) {\n        this.label.setAttribute(\"text\", \"value\", \"Error\");\n      }\n\n      setTimeout(() => {\n        this.label.setAttribute(\"text\", \"value\", REMIX_LABEL);\n        this.copying = false;\n      }, 2000);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst AMMO_BODY_ATTRIBUTES = { type: \"kinematic\", collisionFilterMask: COLLISION_LAYERS.HANDS };\n\nexport const TRANSFORM_MODE = {\n  AXIS: \"axis\",\n  PUPPET: \"puppet\",\n  CURSOR: \"cursor\",\n  ALIGN: \"align\",\n  SCALE: \"scale\"\n};\n\nconst STEP_LENGTH = Math.PI / 10;\nconst CAMERA_WORLD_QUATERNION = new THREE.Quaternion();\nconst CAMERA_WORLD_POSITION = new THREE.Vector3();\nconst TARGET_WORLD_QUATERNION = new THREE.Quaternion();\nconst v = new THREE.Vector3();\nconst v2 = new THREE.Vector3();\nconst q = new THREE.Quaternion();\nconst q2 = new THREE.Quaternion();\n\nconst eps = 0.001;\nfunction qAlmostEquals(a, b) {\n  return (\n    Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps && Math.abs(a.w - b.w) < eps\n  );\n}\n\nAFRAME.registerComponent(\"transform-button\", {\n  schema: {\n    mode: {\n      type: \"string\",\n      oneof: Object.values(TRANSFORM_MODE),\n      default: TRANSFORM_MODE.CURSOR\n    },\n    axis: { type: \"vec3\", default: null }\n  },\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n    let leftHand, rightHand;\n\n    waitForDOMContentLoaded().then(() => {\n      leftHand = document.getElementById(\"player-left-controller\");\n      rightHand = document.getElementById(\"player-right-controller\");\n    });\n    this.onGrabStart = e => {\n      if (!leftHand || !rightHand) return;\n\n      if (!this.targetEl) {\n        return;\n      }\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) {\n        return;\n      }\n      if (this.targetEl.body) {\n        this.targetEl.setAttribute(\"body-helper\", AMMO_BODY_ATTRIBUTES);\n      }\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.startTransform(\n        this.targetEl.object3D,\n        e.object3D.el.id === \"right-cursor\"\n          ? rightHand.object3D\n          : e.object3D.el.id === \"left-cursor\"\n            ? leftHand.object3D\n            : e.object3D,\n        this.data\n      );\n    };\n    this.onGrabEnd = () => {\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.stopTransform();\n    };\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.onGrabEnd);\n  },\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-up\", this.onGrabEnd);\n  }\n});\n\nAFRAME.registerSystem(\"transform-selected-object\", {\n  init() {\n    this.target = null;\n    this.mode = null;\n    this.transforming = false;\n    this.axis = new THREE.Vector3();\n    this.store = window.APP.store;\n    this.startQ = new THREE.Quaternion();\n\n    this.dxStore = 0;\n    this.dxApplied = 0;\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.raycasters = {};\n\n    this.puppet = {\n      initialControllerOrientation: new THREE.Quaternion(),\n      initialControllerOrientation_inverse: new THREE.Quaternion(),\n      initialObjectOrientation: new THREE.Quaternion(),\n      currentControllerOrientation: new THREE.Quaternion(),\n      controllerOrientationDelta: new THREE.Quaternion()\n    };\n\n    this.planarInfo = {\n      plane: new THREE.Mesh(\n        new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n        new THREE.MeshBasicMaterial({\n          visible: false,\n          wireframe: true,\n          side: THREE.DoubleSide,\n          transparent: true,\n          opacity: 0.3\n        })\n      ),\n      normal: new THREE.Vector3(),\n      intersections: [],\n      previousPointOnPlane: new THREE.Vector3(),\n      currentPointOnPlane: new THREE.Vector3(),\n      deltaOnPlane: new THREE.Vector3(),\n      finalProjectedVec: new THREE.Vector3()\n    };\n    this.el.object3D.add(this.planarInfo.plane);\n  },\n\n  stopTransform: (function() {\n    const q = new THREE.Quaternion();\n    const PI_AROUND_Y = new THREE.Quaternion(0, 1, 0, 0);\n    const pInv = new THREE.Quaternion();\n    return function stopTransform() {\n      this.transforming = false;\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(q);\n        if (qAlmostEquals(q, this.startQ)) {\n          q.multiply(PI_AROUND_Y);\n          this.target.parent.getWorldQuaternion(pInv);\n          pInv.invert();\n          this.target.quaternion.copy(pInv).multiply(q);\n          this.target.matrixNeedsUpdate = true;\n        }\n      }\n    };\n  })(),\n\n  startPlaneCasting() {\n    const { plane, intersections, previousPointOnPlane } = this.planarInfo;\n\n    this.el.camera.getWorldQuaternion(CAMERA_WORLD_QUATERNION);\n    plane.quaternion.copy(CAMERA_WORLD_QUATERNION);\n    this.target.getWorldPosition(plane.position);\n    plane.matrixNeedsUpdate = true;\n    plane.updateMatrixWorld(true);\n\n    intersections.length = 0;\n    this.raycasters.right =\n      this.raycasters.right ||\n      document.getElementById(\"right-cursor-controller\").components[\"cursor-controller\"].raycaster;\n    this.raycasters.left =\n      this.raycasters.left ||\n      document.getElementById(\"left-cursor-controller\").components[\"cursor-controller\"].raycaster;\n    const raycaster = this.hand.el.id === \"player-left-controller\" ? this.raycasters.left : this.raycasters.right;\n    const far = raycaster.far;\n    raycaster.far = 1000;\n    plane.raycast(raycaster, intersections);\n    raycaster.far = far;\n    this.transforming = !!intersections[0];\n    if (!this.transforming) {\n      return;\n    }\n\n    previousPointOnPlane.copy(intersections[0].point);\n\n    this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n\n    v.set(0, 0, -1).applyQuaternion(CAMERA_WORLD_QUATERNION);\n    v2.set(0, 0, -1).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign = v.dot(v2) > 0 ? 1 : -1;\n\n    v.set(0, 1, 0); //.applyQuaternion(this.CAMERA_WORLD_QUATERNION);\n    v2.set(0, 1, 0).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign2 = v.dot(v2) > 0 ? 1 : -1;\n\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.dxAll = 0;\n    this.dxStore = 0;\n    this.dxApplied = 0;\n  },\n\n  startTransform(target, hand, data) {\n    this.target = target;\n    this.hand = hand;\n    this.mode = data.mode;\n    this.transforming = true;\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.store.update({ activity: { hasRecentered: true } });\n      return;\n    } else {\n      this.store.update({ activity: { hasRotated: true } });\n    }\n\n    if (this.mode === TRANSFORM_MODE.CURSOR) {\n      this.target.getWorldQuaternion(this.startQ);\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.target.getWorldQuaternion(this.puppet.initialObjectOrientation);\n      this.hand.getWorldQuaternion(this.puppet.initialControllerOrientation);\n      this.puppet.initialControllerOrientation_inverse.copy(this.puppet.initialControllerOrientation).invert();\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.axis.copy(data.axis);\n    }\n\n    this.startPlaneCasting();\n  },\n\n  puppetingTick() {\n    const {\n      currentControllerOrientation,\n      controllerOrientationDelta,\n      initialControllerOrientation_inverse,\n      initialObjectOrientation\n    } = this.puppet;\n    this.hand.getWorldQuaternion(currentControllerOrientation);\n    controllerOrientationDelta.copy(initialControllerOrientation_inverse).premultiply(currentControllerOrientation);\n    this.target.quaternion\n      .copy(initialObjectOrientation)\n      .premultiply(controllerOrientationDelta)\n      .premultiply(controllerOrientationDelta);\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  cursorAxisOrScaleTick() {\n    const {\n      plane,\n      normal,\n      intersections,\n      previousPointOnPlane,\n      currentPointOnPlane,\n      deltaOnPlane,\n      finalProjectedVec\n    } = this.planarInfo;\n    this.target.getWorldPosition(plane.position);\n    //    this.el.camera.getWorldQuaternion(plane.quaternion);\n    this.el.camera.getWorldPosition(v);\n    plane.matrixNeedsUpdate = true;\n    const cameraToPlaneDistance = v.sub(plane.position).length();\n\n    intersections.length = 0;\n    const raycaster = this.hand.el.id === \"player-left-controller\" ? this.raycasters.left : this.raycasters.right;\n    const far = raycaster.far;\n    raycaster.far = 1000;\n    plane.raycast(raycaster, intersections);\n    raycaster.far = far;\n    const intersection = intersections[0];\n    if (!intersection) return;\n\n    normal.set(0, 0, -1).applyQuaternion(plane.quaternion);\n\n    currentPointOnPlane.copy(intersection.point);\n    deltaOnPlane.copy(currentPointOnPlane).sub(previousPointOnPlane);\n    const SENSITIVITY = 10;\n    finalProjectedVec\n      .copy(deltaOnPlane)\n      .projectOnPlane(normal)\n      .applyQuaternion(q.copy(plane.quaternion).invert())\n      .multiplyScalar(SENSITIVITY / cameraToPlaneDistance);\n    if (this.mode === TRANSFORM_MODE.CURSOR) {\n      const modify = AFRAME.scenes[0].systems.userinput.get(paths.actions.transformModifier);\n\n      this.dyAll = this.dyStore + finalProjectedVec.y;\n      this.dyApplied = modify ? this.dyAll : Math.round(this.dyAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dyStore = this.dyAll - this.dyApplied;\n\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = modify ? this.dxAll : Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n        v.set(1, 0, 0).applyQuaternion(modify ? CAMERA_WORLD_QUATERNION : TARGET_WORLD_QUATERNION);\n        q.setFromAxisAngle(v, modify ? -this.dyApplied : this.sign2 * this.sign * -this.dyApplied);\n\n        if (modify) {\n          v.set(0, 1, 0).applyQuaternion(CAMERA_WORLD_QUATERNION);\n        } else {\n          v.set(0, 1, 0);\n        }\n        q2.setFromAxisAngle(v, this.dxApplied);\n\n        this.target.quaternion.premultiply(q).premultiply(q2);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    } else if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      this.target.quaternion.multiply(q.setFromAxisAngle(this.axis, -this.sign * this.dxApplied));\n      this.target.matrixNeedsUpdate = true;\n    }\n\n    previousPointOnPlane.copy(currentPointOnPlane);\n  },\n\n  tick() {\n    if (!this.transforming) {\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.SCALE) {\n      return; // Taken care of by scale-button\n    }\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.el.camera.getWorldPosition(CAMERA_WORLD_POSITION);\n      this.target.lookAt(CAMERA_WORLD_POSITION);\n      this.transforming = false;\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.puppetingTick();\n      return;\n    }\n    this.cursorAxisOrScaleTick();\n  }\n});\n\nAFRAME.registerComponent(\"transform-button-selector\", {\n  tick() {\n    this.userinput = this.userinput || this.el.sceneEl.systems.userinput;\n    const hasHand = this.userinput.get(paths.actions.rightHand.pose) || this.userinput.get(paths.actions.leftHand.pose);\n    if (!hasHand) {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.CURSOR) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.CURSOR);\n      }\n    } else {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.PUPPET) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.PUPPET);\n      }\n    }\n  }\n});\n\nconst FORWARD = new THREE.Vector3(0, 0, 1);\nconst TWO_PI = 2 * Math.PI;\nAFRAME.registerComponent(\"visible-if-transforming\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {},\n  tick(t) {\n    const shouldBeVisible =\n      AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming &&\n      AFRAME.scenes[0].systems[\"transform-selected-object\"].hand.el.id.indexOf(this.data.hand) !== -1;\n    const visibleNeedsUpdate = this.el.getAttribute(\"visible\") !== shouldBeVisible;\n    if (visibleNeedsUpdate) {\n      this.el.setAttribute(\"visible\", AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming);\n    }\n\n    if (shouldBeVisible) {\n      this.el.object3D.quaternion.setFromAxisAngle(FORWARD, TWO_PI * Math.sin(t / 1000.0));\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { TRANSFORM_MODE } from \"./transform-object-button\";\n\nconst calculatePlaneMatrix = (function() {\n  const planeMatrix = new THREE.Matrix4();\n  const planeUp = new THREE.Vector3();\n  const planeForward = new THREE.Vector3();\n  const planeRight = new THREE.Vector3();\n  const planePosition = new THREE.Vector3();\n  const camPosition = new THREE.Vector3();\n\n  return function calculatePlaneMatrix(camera, button) {\n    camera.updateMatrices();\n    camPosition.setFromMatrixPosition(camera.matrixWorld);\n    button.updateMatrices();\n    planePosition.setFromMatrixPosition(button.matrixWorld);\n    planeForward.subVectors(planePosition, camPosition);\n    planeForward.y = 0;\n    planeForward.normalize();\n    planeUp.set(0, 1, 0);\n    planeRight.crossVectors(planeForward, planeUp);\n    planeMatrix.makeBasis(planeRight, planeUp, planeForward.multiplyScalar(-1));\n    planeMatrix.elements[12] = planePosition.x;\n    planeMatrix.elements[13] = planePosition.y;\n    planeMatrix.elements[14] = planePosition.z;\n    return planeMatrix;\n  };\n})();\n\nconst planeForLeftCursor = new THREE.Mesh(\n  new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n  new THREE.MeshBasicMaterial({\n    visible: true,\n    wireframe: false,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: 0.3\n  })\n);\nconst planeForRightCursor = new THREE.Mesh(\n  new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n  new THREE.MeshBasicMaterial({\n    visible: true,\n    wireframe: false,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: 0.3\n  })\n);\n\nAFRAME.registerComponent(\"scale-button\", {\n  init() {\n    this.isScaling = false;\n    this.planeRotation = new THREE.Matrix4();\n    this.planeUp = new THREE.Vector3();\n    this.planeRight = new THREE.Vector3();\n    this.intersections = [];\n    this.initialIntersectionPoint = new THREE.Vector3();\n    this.intersectionPoint = new THREE.Vector3();\n    this.initialObjectScale = new THREE.Vector3();\n    this.desiredObjectScale = new THREE.Vector3();\n    this.deltaScale = new THREE.Vector3();\n    this.objectMatrix = new THREE.Matrix4();\n    this.dragVector = new THREE.Vector3();\n    this.currentObjectScale = new THREE.Vector3();\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n      this.objectToScale = networkedEl.object3D;\n    });\n    const camPosition = new THREE.Vector3();\n    const objectPosition = new THREE.Vector3();\n    const objectToCam = new THREE.Vector3();\n    this.startScaling = e => {\n      if (this.isScaling || !this.objectToScale) {\n        return;\n      }\n\n      if (!(NAF.utils.isMine(this.networkedEl) || NAF.utils.takeOwnership(this.networkedEl))) {\n        return;\n      }\n\n      if (!this.didGetObjectReferences) {\n        this.didGetObjectReferences = true;\n        this.leftEventer = document.getElementById(\"left-cursor\").object3D;\n        this.leftCursorController = document.getElementById(\"left-cursor-controller\");\n        this.leftRaycaster = this.leftCursorController.components[\"cursor-controller\"].raycaster;\n        this.rightCursorController = document.getElementById(\"right-cursor-controller\");\n        this.rightRaycaster = this.rightCursorController.components[\"cursor-controller\"].raycaster;\n        this.viewingCamera = document.getElementById(\"viewing-camera\").object3DMap.camera;\n      }\n      this.plane = e.object3D === this.leftEventer ? planeForLeftCursor : planeForRightCursor;\n      setMatrixWorld(this.plane, calculatePlaneMatrix(this.viewingCamera, this.el.object3D));\n      this.planeRotation.extractRotation(this.plane.matrixWorld);\n      this.planeUp.set(0, 1, 0).applyMatrix4(this.planeRotation);\n      this.planeRight.set(1, 0, 0).applyMatrix4(this.planeRotation);\n      this.raycaster = e.object3D === this.leftEventer ? this.leftRaycaster : this.rightRaycaster;\n      const intersection = this.raycastOnPlane();\n      if (!intersection) return;\n      this.isScaling = true;\n      this.initialIntersectionPoint.copy(intersection.point);\n      this.objectToScale.updateMatrices();\n      this.initialObjectScale.setFromMatrixScale(this.objectToScale.matrixWorld);\n      this.initialDistanceToObject = objectToCam\n        .subVectors(\n          camPosition.setFromMatrixPosition(this.viewingCamera.matrixWorld),\n          objectPosition.setFromMatrixPosition(this.el.object3D.matrixWorld)\n        )\n        .length();\n      window.APP.store.update({ activity: { hasScaled: true } });\n\n      // TODO: Refactor transform-selected-object system so this isn't so awkward\n      this.transformSelectedObjectSystem =\n        this.transformSelectedObjectSystem || this.el.sceneEl.systems[\"transform-selected-object\"];\n      this.transformSelectedObjectSystem.transforming = true;\n      this.transformSelectedObjectSystem.mode = TRANSFORM_MODE.SCALE;\n      this.transformSelectedObjectSystem.target = this.objectToScale;\n      this.transformSelectedObjectSystem.hand =\n        e.object3D === this.leftEventer ? this.leftCursorController.object3D : this.rightCursorController.object3D;\n    };\n    this.endScaling = e => {\n      if (!this.isScaling) {\n        return;\n      }\n      if (\n        (e.object3D === this.leftEventer && this.raycaster === this.leftRaycaster) ||\n        (e.object3D !== this.leftEventer && this.raycaster === this.rightRaycaster)\n      ) {\n        this.isScaling = false;\n        this.transformSelectedObjectSystem =\n          this.transformSelectedObjectSystem || this.el.sceneEl.systems[\"transform-selected-object\"];\n        this.transformSelectedObjectSystem.transforming = false;\n      }\n    };\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.startScaling);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.endScaling);\n  },\n  raycastOnPlane() {\n    this.intersections.length = 0;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    this.plane.raycast(this.raycaster, this.intersections);\n    this.raycaster.far = far;\n    return this.intersections[0];\n  },\n  tick() {\n    if (!this.isScaling) return;\n    const intersection = this.raycastOnPlane();\n    if (!intersection) return;\n    this.intersectionPoint.copy(intersection.point);\n    this.dragVector.subVectors(this.intersectionPoint, this.initialIntersectionPoint);\n    const dotFactor =\n      (this.dragVector.dot(this.planeUp) + this.dragVector.dot(this.planeRight)) / this.initialDistanceToObject;\n\n    let scaleFactor = 1;\n    if (dotFactor > 0) {\n      scaleFactor = 1 + dotFactor;\n    } else if (dotFactor < 0) {\n      scaleFactor = 1 / (1 + Math.abs(dotFactor));\n    }\n    this.desiredObjectScale.copy(this.initialObjectScale).multiplyScalar(scaleFactor);\n    this.objectToScale.updateMatrices();\n    this.currentObjectScale.setFromMatrixScale(this.objectToScale.matrixWorld);\n    this.deltaScale.set(\n      this.desiredObjectScale.x / this.currentObjectScale.x,\n      this.desiredObjectScale.y / this.currentObjectScale.y,\n      this.desiredObjectScale.z / this.currentObjectScale.z\n    );\n    this.objectMatrix.copy(this.objectToScale.matrixWorld);\n    this.objectMatrix.scale(this.deltaScale);\n    setMatrixWorld(this.objectToScale, this.objectMatrix);\n  }\n});\n","export function getMeshes(collisionEntities) {\n  return collisionEntities\n    .map(function(entity) {\n      return entity.getObject3D(\"mesh\");\n    })\n    .filter(function(n) {\n      return n;\n    });\n}\n","import { cylinderTextureSrc } from \"./cylinder-texture\";\nimport { SOUND_TELEPORT_START, SOUND_TELEPORT_END } from \"../systems/sound-effects-system\";\nimport { getMeshes } from \"../utils/aframe-utils\";\n\nimport { textureLoader } from \"../utils/media-utils\";\n\nconst CYLINDER_TEXTURE = textureLoader.load(cylinderTextureSrc);\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nfunction easeOutIn(t) {\n  if (t < 0.5) return 0.5 * ((t = t * 2 - 1) * t * t + 1);\n  return 0.5 * (t = t * 2 - 1) * t * t + 0.5;\n}\n\nconst UP = new THREE.Vector3(0, 1, 0);\n\nclass RayCurve extends THREE.Mesh {\n  constructor(numPoints, width) {\n    super(\n      new THREE.BufferGeometry(),\n      new THREE.MeshBasicMaterial({\n        side: THREE.DoubleSide,\n        toneMapped: false,\n        transparent: true\n      })\n    );\n\n    this.vertices = new Float32Array(numPoints * 3 * 6);\n    this.width = width;\n\n    this.geometry.setAttribute(\n      \"position\",\n      new THREE.BufferAttribute(this.vertices, 3).setUsage(THREE.DynamicDrawUsage)\n    );\n\n    this.frustumCulled = false;\n\n    this.direction = new THREE.Vector3();\n    this.numPoints = numPoints;\n  }\n\n  setDirection(direction) {\n    this.direction\n      .copy(direction)\n      .cross(UP)\n      .normalize()\n      .multiplyScalar(this.width / 2);\n  }\n\n  setWidth(width) {\n    this.width = width;\n  }\n\n  setPoint = (function() {\n    const A = new THREE.Vector3();\n    const B = new THREE.Vector3();\n    const C = new THREE.Vector3();\n    const D = new THREE.Vector3();\n\n    return function(i, P) {\n      let idx = 3 * 6 * i;\n\n      A.copy(P).add(this.direction);\n      B.copy(P).sub(this.direction);\n      C.set(\n        // Previous A\n        i === 0 ? A.x : this.vertices[idx - 3],\n        i === 0 ? A.y : this.vertices[idx - 2],\n        i === 0 ? A.z : this.vertices[idx - 1]\n      );\n      D.set(\n        // Previous B\n        i === 0 ? B.x : this.vertices[idx - 6],\n        i === 0 ? B.y : this.vertices[idx - 5],\n        i === 0 ? B.z : this.vertices[idx - 4]\n      );\n\n      //   A---P---B\n      //   | \\     |\n      //   |  \\    |\n      //   |   \\   |\n      //   |    \\  |\n      //   |     \\ |\n      //   |      \\|\n      //   C-------D\n      //   A'--P'--B' Previous P\n      //   | \\     |\n\n      this.vertices[idx++] = A.x;\n      this.vertices[idx++] = A.y;\n      this.vertices[idx++] = A.z;\n\n      this.vertices[idx++] = C.x;\n      this.vertices[idx++] = C.y;\n      this.vertices[idx++] = C.z;\n\n      this.vertices[idx++] = D.x;\n      this.vertices[idx++] = D.y;\n      this.vertices[idx++] = D.z;\n\n      this.vertices[idx++] = D.x;\n      this.vertices[idx++] = D.y;\n      this.vertices[idx++] = D.z;\n\n      this.vertices[idx++] = B.x;\n      this.vertices[idx++] = B.y;\n      this.vertices[idx++] = B.z;\n\n      this.vertices[idx++] = A.x;\n      this.vertices[idx++] = A.y;\n      this.vertices[idx++] = A.z;\n\n      this.geometry.attributes.position.needsUpdate = true;\n    };\n  })();\n}\n\nfunction parabolicCurve(p0, v0, t, out) {\n  out.x = p0.x + v0.x * t;\n  out.y = p0.y + v0.y * t - 4.9 * t * t;\n  out.z = p0.z + v0.z * t;\n  return out;\n}\n\nfunction isValidNormalsAngle(collisionNormal, referenceNormal, landingMaxAngle) {\n  const angleNormals = referenceNormal.angleTo(collisionNormal);\n  return THREE.Math.RAD2DEG * angleNormals <= landingMaxAngle;\n}\n\nconst checkLineIntersection = (function() {\n  const direction = new THREE.Vector3();\n  return function checkLineIntersection(start, end, meshes, raycaster, referenceNormal, landingMaxAngle, hitPoint) {\n    direction.copy(end).sub(start);\n    const distance = direction.length();\n    raycaster.far = distance;\n    raycaster.set(start, direction.normalize());\n    const intersects = raycaster.intersectObjects(meshes, true);\n    if (intersects.length > 0 && isValidNormalsAngle(intersects[0].face.normal, referenceNormal, landingMaxAngle)) {\n      hitPoint.copy(intersects[0].point);\n      return true;\n    }\n    return false;\n  };\n})();\n\nconst MISS_OPACITY = 0.1;\nconst HIT_OPACITY = 0.3;\nconst MISS_COLOR = 0xff0000;\nconst HIT_COLOR = 0x99ff99;\nconst FORWARD = new THREE.Vector3(0, 0, -1);\nconst LANDING_NORMAL = new THREE.Vector3(0, 1, 0);\nconst MAX_LANDING_ANGLE = 45;\nconst DRAW_TIME_MS = 400;\nconst q = new THREE.Quaternion();\nconst vecHelper = new THREE.Vector3();\nconst v = new THREE.Vector3();\n\nlet uiRoot;\nAFRAME.registerComponent(\"teleporter\", {\n  schema: {\n    start: { type: \"string\" },\n    confirm: { type: \"string\" },\n    speed: { default: 12 },\n    collisionEntities: { default: \"\" },\n    hitCylinderColor: { type: \"color\", default: \"#99ff99\" },\n    hitCylinderRadius: { default: 0.25, min: 0 },\n    outerRadius: { default: 0.6, min: 0 },\n    hitCylinderHeight: { default: 0.3, min: 0 }\n  },\n\n  init() {\n    this.characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\n    this.isTeleporting = false;\n    this.rayCurve = new RayCurve(20, 0.025);\n    this.rayCurve.visible = false;\n    this.el.sceneEl.object3D.add(this.rayCurve);\n\n    this.p0 = new THREE.Vector3();\n    this.v0 = new THREE.Vector3();\n    this.parabola = Array.from(new Array(this.rayCurve.numPoints), () => new THREE.Vector3());\n    this.hit = false;\n    this.hitPoint = new THREE.Vector3();\n    this.meshes = [];\n    this.raycaster = new THREE.Raycaster();\n    this.rigWorldPosition = new THREE.Vector3();\n    this.newRigWorldPosition = new THREE.Vector3();\n    this.teleportOriginWorldPosition = new THREE.Vector3();\n\n    this.teleportEventDetail = {\n      oldPosition: this.rigWorldPosition,\n      newPosition: this.newRigWorldPosition,\n      hitPoint: this.hitPoint\n    };\n    this.prevHitHeight = 0;\n    this.direction = new THREE.Vector3();\n    this.hitEntity = this.createHitEntity();\n    this.hitEntity.visible = false;\n    this.el.sceneEl.object3D.add(this.hitEntity);\n    this.queryCollisionEntities();\n  },\n\n  queryCollisionEntities: function() {\n    this.collisionEntities = [].slice.call(this.el.sceneEl.querySelectorAll(this.data.collisionEntities));\n    this.meshes = getMeshes(this.collisionEntities);\n  },\n\n  remove() {\n    this.stopPlayingTeleportSound();\n  },\n\n  stopPlayingTeleportSound() {\n    if (this.teleportingSound) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      sfx.stopSoundNode(this.teleportingSound.source);\n      this.teleportingSound = null;\n    }\n  },\n\n  tick(t, dt) {\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const entered = this.el.sceneEl.is(\"entered\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n    if (!entered && !isGhost) return;\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const { start, confirm, speed } = this.data;\n    const object3D = this.el.object3D;\n\n    if (\n      !this.isTeleporting &&\n      userinput.get(start) &&\n      !this.characterController.isTeleportingDisabled &&\n      !window.APP.store.state.preferences.disableTeleporter\n    ) {\n      this.isTeleporting = true;\n      this.timeTeleporting = 0;\n      this.hit = false;\n      this.rayCurve.visible = true;\n      this.rayCurve.updateMatrixWorld();\n      this.rayCurve.material.opacity = MISS_OPACITY;\n      this.rayCurve.material.color.set(MISS_COLOR);\n      this.rayCurve.material.needsUpdate = true;\n      this.teleportingSound = sfx.playSoundLoopedWithGain(SOUND_TELEPORT_START);\n      if (this.teleportingSound) {\n        this.teleportingSound.gain.gain.value = 0.005;\n      }\n    }\n\n    if (!this.isTeleporting) {\n      return;\n    }\n    if (this.teleportingSound) {\n      this.teleportingSound.gain.gain.value = Math.min(0.025, this.teleportingSound.gain.gain.value + 0.00002 * dt);\n    }\n\n    if (userinput.get(confirm)) {\n      this.hitEntity.visible = false;\n      this.isTeleporting = false;\n      this.rayCurve.visible = false;\n\n      if (this.teleportingSound) {\n        this.stopPlayingTeleportSound();\n      }\n\n      if (!this.hit || this.timeTeleporting < DRAW_TIME_MS) {\n        return;\n      }\n\n      this.characterController.teleportTo(this.hitPoint);\n\n      sfx.playSoundOneShot(SOUND_TELEPORT_END);\n      return;\n    }\n\n    this.timeTeleporting += dt;\n    object3D.updateMatrixWorld();\n    object3D.matrixWorld.decompose(this.p0, q, vecHelper);\n    this.direction\n      .copy(FORWARD)\n      .applyQuaternion(q)\n      .normalize();\n    this.rayCurve.setDirection(this.direction);\n    this.el.object3D.updateMatrices();\n    const playerScale = v.setFromMatrixColumn(this.characterController.avatarPOV.object3D.matrixWorld, 1).length();\n    this.v0.copy(this.direction).multiplyScalar(speed * Math.sqrt(playerScale));\n\n    let collidedIndex = this.rayCurve.numPoints - 1;\n\n    this.hit = false;\n    this.parabola[0].copy(this.p0);\n    const timeSegment = 1 / (this.rayCurve.numPoints - 1);\n    for (let i = 1; i < this.rayCurve.numPoints; i++) {\n      const t = i * timeSegment;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.parabola[i].copy(vecHelper);\n\n      if (\n        checkLineIntersection(\n          this.parabola[i - 1],\n          this.parabola[i],\n          this.meshes,\n          this.raycaster,\n          LANDING_NORMAL,\n          MAX_LANDING_ANGLE,\n          this.hitPoint\n        )\n      ) {\n        this.hit = true;\n        collidedIndex = i;\n        break;\n      }\n    }\n    if (this.characterController.isTeleportingDisabled) {\n      this.hit = false;\n    }\n\n    const percentToDraw = this.timeTeleporting > DRAW_TIME_MS ? 1 : this.timeTeleporting / DRAW_TIME_MS;\n    const percentRaycasted = collidedIndex / (this.rayCurve.numPoints - 1);\n    const segmentT = (percentToDraw * percentRaycasted) / (this.rayCurve.numPoints - 1);\n\n    for (let i = 0; i < this.rayCurve.numPoints; i++) {\n      const t = i * segmentT;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.rayCurve.setPoint(i, vecHelper);\n    }\n\n    const color = this.hit ? HIT_COLOR : MISS_COLOR;\n    const opacity = this.hit && this.timeTeleporting >= DRAW_TIME_MS ? HIT_OPACITY : MISS_OPACITY;\n    this.rayCurve.material.color.set(color);\n    this.rayCurve.material.opacity = opacity;\n\n    this.hitEntity.visible = this.hit;\n    if (this.hit) {\n      this.hitEntity.position.copy(this.hitPoint);\n      this.hitEntity.matrixNeedsUpdate = true;\n\n      const dRadii = this.data.outerRadius - this.data.hitCylinderRadius;\n      const outerScale = (this.data.outerRadius - easeIn(percentToDraw) * dRadii) / this.data.outerRadius;\n      this.outerTorus.scale.set(outerScale, outerScale, 1);\n      this.outerTorus.matrixNeedsUpdate = true;\n\n      const hitEntityOpacity = HIT_OPACITY * easeOutIn(percentToDraw);\n      this.torus.material.opacity = hitEntityOpacity;\n      this.cylinder.material.opacity = hitEntityOpacity;\n    }\n  },\n\n  // TODO the use of toruses here is a bit wasteful.\n  createHitEntity() {\n    const data = this.data;\n\n    // Parent.\n    const hitEntity = new THREE.Group();\n\n    // Torus.\n    this.torus = new THREE.Mesh(\n      new THREE.TorusBufferGeometry(data.hitCylinderRadius, 0.01, 16, 18, 360 * THREE.Math.DEG2RAD),\n      new THREE.MeshBasicMaterial({\n        color: data.hitCylinderColor,\n        side: THREE.DoubleSide,\n        transparent: true,\n        toneMapped: false,\n        depthTest: false\n      })\n    );\n    this.torus.rotation.x = 90 * THREE.Math.DEG2RAD;\n    hitEntity.add(this.torus);\n\n    // Cylinder.\n    this.cylinder = new THREE.Mesh(\n      new THREE.CylinderBufferGeometry(\n        data.hitCylinderRadius,\n        data.hitCylinderRadius,\n        data.hitCylinderHeight,\n        16,\n        1,\n        true\n      ),\n      new THREE.MeshBasicMaterial({\n        color: data.hitCylinderColor,\n        side: THREE.DoubleSide,\n        map: CYLINDER_TEXTURE,\n        toneMapped: false,\n        transparent: true,\n        depthTest: false\n      })\n    );\n    this.cylinder.position.y = data.hitCylinderHeight / 2;\n    // UV's for THREE Geometries assume flipY\n    if (!CYLINDER_TEXTURE.flipY) {\n      this.cylinder.rotation.z = 180 * THREE.Math.DEG2RAD;\n    }\n    hitEntity.add(this.cylinder);\n\n    // create another torus for animating when the hit destination is ready to go\n    this.outerTorus = new THREE.Mesh(\n      new THREE.TorusBufferGeometry(data.outerRadius, 0.01, 16, 18, 360 * THREE.Math.DEG2RAD),\n      new THREE.MeshBasicMaterial({\n        color: data.hitCylinderColor,\n        side: THREE.DoubleSide,\n        opacity: HIT_OPACITY,\n        transparent: true,\n        depthTest: false\n      })\n    );\n    this.outerTorus.rotation.x = 90 * THREE.Math.DEG2RAD;\n    hitEntity.add(this.outerTorus);\n\n    return hitEntity;\n  }\n});\n","export const cylinderTextureSrc =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQCAYAAADXnxW3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADJJREFUeNpEx7ENgDAAAzArK0JA6f8X9oewlcWStU1wBGdwB08wgjeYm79jc2nbYH0DAC/+CORJxO5fAAAAAElFTkSuQmCC\";\n","import { setMatrixWorld, affixToWorldUp } from \"../utils/three-utils\";\nconst rotate = new THREE.Matrix4().makeRotationY(Math.PI);\nconst translate = new THREE.Matrix4().makeTranslation(0, -0.25, 0);\nconst m = new THREE.Matrix4();\n\nAFRAME.registerComponent(\"inspect-pivot-offset-from-camera\", {\n  tick() {\n    const parent = this.el.object3D.parent;\n    parent.updateMatrices();\n    setMatrixWorld(\n      this.el.object3D,\n      affixToWorldUp(parent.matrixWorld, m)\n        .multiply(translate)\n        .multiply(rotate)\n    );\n  }\n});\n","import { SourceType, AudioType } from \"./audio-params\";\nimport { getCurrentAudioSettings, updateAudioSettings } from \"../update-audio-settings\";\nconst INFO_INIT_FAILED = \"Failed to initialize avatar-audio-source.\";\nconst INFO_NO_NETWORKED_EL = \"Could not find networked el.\";\nconst INFO_NO_OWNER = \"Networked component has no owner.\";\n\n// Chrome seems to require a MediaStream be attached to an AudioElement before AudioNodes work correctly\n// We don't want to do this in other browsers, particularly in Safari, which actually plays the audio despite\n// setting the volume to 0.\nconst SHOULD_CREATE_SILENT_AUDIO_ELS = /chrome/i.test(navigator.userAgent);\nfunction createSilentAudioEl(stream) {\n  const audioEl = new Audio();\n  audioEl.setAttribute(\"autoplay\", \"autoplay\");\n  audioEl.setAttribute(\"playsinline\", \"playsinline\");\n  audioEl.srcObject = stream;\n  audioEl.volume = 0; // we don't actually want to hear audio from this element\n  return audioEl;\n}\n\nasync function getOwnerId(el) {\n  const networkedEl = await NAF.utils.getNetworkedEntity(el).catch(e => {\n    console.error(INFO_INIT_FAILED, INFO_NO_NETWORKED_EL, e);\n  });\n  if (!networkedEl) {\n    return null;\n  }\n  return networkedEl.components.networked.data.owner;\n}\n\nasync function getMediaStream(el) {\n  const peerId = await getOwnerId(el);\n  if (!peerId) {\n    console.error(INFO_INIT_FAILED, INFO_NO_OWNER);\n    return null;\n  }\n  const stream = await APP.dialog.getMediaStream(peerId).catch(e => {\n    console.error(INFO_INIT_FAILED, `Error getting media stream for ${peerId}`, e);\n  });\n  if (!stream) {\n    return null;\n  }\n  return stream;\n}\n\nAFRAME.registerComponent(\"avatar-audio-source\", {\n  createAudio: async function() {\n    this.removeAudio();\n\n    this.isCreatingAudio = true;\n    const stream = await getMediaStream(this.el);\n    this.isCreatingAudio = false;\n    const isRemoved = !this.el.parentNode;\n    if (!stream || isRemoved) return;\n\n    APP.sourceType.set(this.el, SourceType.AVATAR_AUDIO_SOURCE);\n    const { audioType } = getCurrentAudioSettings(this.el);\n    const audioListener = this.el.sceneEl.audioListener;\n    let audio = this.el.getObject3D(this.attrName);\n    if (audioType === AudioType.PannerNode) {\n      audio = new THREE.PositionalAudio(audioListener);\n    } else {\n      audio = new THREE.Audio(audioListener);\n    }\n    this.audioSystem.addAudio({ sourceType: SourceType.AVATAR_AUDIO_SOURCE, node: audio });\n\n    if (SHOULD_CREATE_SILENT_AUDIO_ELS) {\n      createSilentAudioEl(stream); // TODO: Do the audio els need to get cleaned up?\n    }\n\n    this.destination = audio.context.createMediaStreamDestination();\n    this.mediaStreamSource = audio.context.createMediaStreamSource(stream);\n    const destinationSource = audio.context.createMediaStreamSource(this.destination.stream);\n    this.mediaStreamSource.connect(this.destination);\n    audio.setNodeSource(destinationSource);\n    this.el.setObject3D(this.attrName, audio);\n    this.el.emit(\"sound-source-set\", { soundSource: destinationSource });\n\n    APP.audios.set(this.el, audio);\n    updateAudioSettings(this.el, audio);\n  },\n\n  removeAudio() {\n    const audio = this.el.getObject3D(this.attrName);\n    if (audio) {\n      this.audioSystem.removeAudio({ node: audio });\n      this.el.removeObject3D(this.attrName);\n    }\n  },\n\n  init() {\n    this.createAudio = this.createAudio.bind(this);\n\n    this.audioSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSystem;\n    // We subscribe to audio stream notifications for this peer to update the audio source\n    // This could happen in case there is an ICE failure that requires a transport recreation.\n    APP.dialog.on(\"stream_updated\", this._onStreamUpdated, this);\n    this.createAudio();\n\n    let disableLeftRightPanningPref = APP.store.state.preferences.disableLeftRightPanning;\n    this.onPreferenceChanged = () => {\n      const newPref = APP.store.state.preferences.disableLeftRightPanning;\n      const shouldRecreateAudio = disableLeftRightPanningPref !== newPref && !this.isCreatingAudio;\n      disableLeftRightPanningPref = newPref;\n      if (shouldRecreateAudio) {\n        this.createAudio();\n      }\n    };\n    APP.store.addEventListener(\"statechanged\", this.onPreferenceChanged);\n    this.el.addEventListener(\"audio_type_changed\", this.createAudio);\n  },\n\n  async _onStreamUpdated(peerId, kind) {\n    const audio = this.el.getObject3D(this.attrName);\n    if (!audio) return;\n    const stream = audio.source.mediaStream;\n    if (!stream) return;\n\n    getOwnerId(this.el).then(async ownerId => {\n      if (ownerId === peerId && kind === \"audio\") {\n        // The audio stream for this peer has been updated\n        const newStream = await APP.dialog.getMediaStream(peerId, \"audio\").catch(e => {\n          console.error(INFO_INIT_FAILED, `Error getting media stream for ${peerId}`, e);\n        });\n\n        if (newStream) {\n          this.mediaStreamSource.disconnect();\n          this.mediaStreamSource = audio.context.createMediaStreamSource(newStream);\n          this.mediaStreamSource.connect(this.destination);\n        }\n      }\n    });\n  },\n\n  remove: function() {\n    APP.dialog.off(\"stream_updated\", this._onStreamUpdated);\n\n    window.APP.store.removeEventListener(\"statechanged\", this.onPreferenceChanged);\n    this.el.removeEventListener(\"audio_type_changed\", this.createAudio);\n\n    APP.audios.delete(this.el);\n    APP.sourceType.delete(this.el);\n    APP.supplementaryAttenuation.delete(this.el);\n\n    this.removeAudio();\n  }\n});\n\nfunction createWhiteNoise(audioContext, gain) {\n  const bufferSize = 2 * audioContext.sampleRate,\n    noiseBuffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate),\n    gainFilter = noiseBuffer.getChannelData(0);\n  for (let i = 0; i < bufferSize; i++) {\n    gainFilter[i] = (Math.random() * 2 - 1) * gain;\n  }\n\n  const whiteNoise = audioContext.createBufferSource();\n  whiteNoise.buffer = noiseBuffer;\n  whiteNoise.loop = true;\n  whiteNoise.start(0);\n  return whiteNoise;\n}\n\nconst tmpWorldPos = new THREE.Vector3();\n\n/**\n * @component zone-audio-source\n * This component looks for audio sources that get near it, keeping track\n * of them and making them available to other components. It currently only\n * supports avatars via the avatar-audio-source component, and only a single\n * source at a time, but this can easily be expanded in the future.\n */\nAFRAME.registerComponent(\"zone-audio-source\", {\n  schema: {\n    onlyMods: { default: true },\n    muteSelf: { default: true },\n\n    debug: { default: false }\n  },\n\n  init() {\n    const audioListener = this.el.sceneEl.audioListener;\n    const ctx = audioListener.context;\n    this.gainFilter = ctx.createGain();\n    if (this.data.debug) {\n      this.whiteNoise = createWhiteNoise(ctx, 0.01);\n      this.setInput(this.whiteNoise);\n    }\n\n    // TODO this should probably be using bounds similar to media-frames and trigger-volume.\n    // Doing the simple thing for now since we only support avatar audio sources currently\n    this.el.object3D.updateMatrixWorld();\n    const radius = this.el.object3D.matrixWorld.getMaxScaleOnAxis();\n    this.boundingRadiusSquared = radius * radius;\n\n    if (this.data.debug) {\n      this.el.setObject3D(\n        \"debug\",\n        new THREE.LineSegments(new THREE.WireframeGeometry(new THREE.SphereBufferGeometry(1, 10, 10)))\n      );\n    }\n  },\n\n  setInput(newInput) {\n    if (this.input) {\n      this.input.disconnect(this.gainFilter);\n      this.input = null;\n    }\n\n    if (newInput) {\n      newInput.connect(this.gainFilter);\n      this.input = newInput;\n    }\n  },\n\n  getGainFilter() {\n    return this.gainFilter;\n  },\n\n  tick() {\n    this.el.object3D.getWorldPosition(tmpWorldPos);\n    if (this.trackingEl) {\n      const distanceSquared = this.trackingEl.object3D.position.distanceToSquared(tmpWorldPos);\n      if (distanceSquared > this.boundingRadiusSquared) {\n        this.trackingEl = null;\n        this.setInput(this.whiteNoise);\n      }\n    } else {\n      const playerInfos = window.APP.componentRegistry[\"player-info\"];\n      for (let i = 0; i < playerInfos.length; i++) {\n        const playerInfo = playerInfos[i];\n        const avatar = playerInfo.el;\n\n        if (this.data.onlyMods && !playerInfo.can(\"amplify_audio\")) continue;\n\n        const distanceSquared = avatar.object3D.position.distanceToSquared(tmpWorldPos);\n        if (distanceSquared < this.boundingRadiusSquared) {\n          this.trackingEl = avatar;\n          if (this.data.muteSelf && this.trackingEl.id === \"avatar-rig\") {\n            // Don't emit your own audio\n            this.setInput(null);\n          } else {\n            getMediaStream(this.trackingEl).then(stream => {\n              const audioListener = this.el.sceneEl.audioListener;\n              const ctx = audioListener.context;\n              const node = ctx.createMediaStreamSource(stream);\n              this.setInput(node);\n            });\n          }\n        }\n      }\n    }\n  }\n});\n\n/**\n * @component audio-target\n * This component pulls audio from a \"source\" component and re-emits it.\n * Currently the audio can come from a zone-audio-source. A gain as well\n * as a random delay can be applied in addition to the standard positional\n * audio properties, to better simulate a real world speaker setup.\n */\nAFRAME.registerComponent(\"audio-target\", {\n  schema: {\n    minDelay: { default: 0.01 },\n    maxDelay: { default: 0.13 },\n    srcEl: { type: \"selector\" },\n    debug: { default: false }\n  },\n\n  init() {\n    this.audioSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSystem;\n    this.createAudio();\n    // TODO this is to ensure targets and sources loaded at the same time don't have\n    // an order depndancy but this should be done in a more robust way\n    setTimeout(() => {\n      this.connectAudio();\n    }, 0);\n    this.el.setAttribute(\"audio-zone-source\");\n\n    this.createAudio = this.createAudio.bind(this);\n    this.el.addEventListener(\"audio_type_changed\", this.createAudio);\n  },\n\n  remove: function() {\n    APP.supplementaryAttenuation.delete(this.el);\n    APP.audios.delete(this.el);\n    APP.sourceType.delete(this.el);\n\n    this.removeAudio();\n\n    this.el.removeAttribute(\"audio-zone-source\");\n    this.el.removeEventListener(\"audio_type_changed\", this.createAudio);\n  },\n\n  createAudio: function() {\n    this.removeAudio();\n\n    APP.sourceType.set(this.el, SourceType.AUDIO_TARGET);\n    const audioListener = this.el.sceneEl.audioListener;\n    const { audioType } = getCurrentAudioSettings(this.el);\n    let audio = this.el.getObject3D(this.attrName);\n    if (audioType === AudioType.PannerNode) {\n      audio = new THREE.PositionalAudio(audioListener);\n    } else {\n      audio = new THREE.Audio(audioListener);\n    }\n    this.audioSystem.addAudio({ sourceType: SourceType.AVATAR_AUDIO_SOURCE, node: audio });\n\n    if (this.data.maxDelay > 0) {\n      const delayNode = audio.context.createDelay(this.data.maxDelay);\n      delayNode.delayTime.value = THREE.Math.randFloat(this.data.minDelay, this.data.maxDelay);\n      audio.setFilters([delayNode]);\n    }\n\n    this.el.setObject3D(this.attrName, audio);\n    audio.matrixNeedsUpdate = true;\n    audio.updateMatrixWorld();\n\n    audio.updateMatrixWorld();\n    APP.audios.set(this.el, audio);\n    updateAudioSettings(this.el, audio);\n  },\n\n  connectAudio() {\n    const srcEl = this.data.srcEl;\n    const srcZone = srcEl && srcEl.components[\"zone-audio-source\"];\n    const node = srcZone && srcZone.getGainFilter();\n    if (node) {\n      const audio = this.el.getObject3D(this.attrName);\n      if (audio) {\n        audio.setNodeSource(node);\n      }\n    } else {\n      console.warn(`Failed to get audio from source for ${this.el.className}`, srcEl);\n    }\n  },\n\n  removeAudio() {\n    const audio = this.el.getObject3D(this.attrName);\n    if (audio) {\n      this.audioSystem.removeAudio({ node: this.audio });\n      this.el.removeObject3D(this.attrName);\n    }\n  }\n});\n","import { disposeTexture } from \"../utils/material-utils\";\nimport { createVideoOrAudioEl } from \"../utils/media-utils\";\nimport { findNode } from \"../utils/three-utils\";\nimport { Layers } from \"./layers\";\n\n/**\n * @component video-texture-source\n * This component is intended to be used on entities with a Camera Object3D as a child.\n * That camera is used to render the scene to a WebGLRenderTarget of the specified resolution\n * at a maximum of the specified frame rate. It will only render a frame if something sets\n * its textureNeedsUpdate property to true. Currently video-texture-target does this\n * whenever its material is used during the primary camera render (as in, it's in view).\n */\nAFRAME.registerComponent(\"video-texture-source\", {\n  schema: {\n    resolution: { type: \"vec2\", default: [1280, 720] },\n    fps: { default: 15 }\n  },\n\n  init() {\n    this.camera = findNode(this.el.object3D, n => n.isCamera);\n\n    this.camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n\n    if (!this.camera) {\n      console.warn(\"video-texture-source added to an entity without a camera\");\n      return;\n    }\n\n    this.camera.aspect = this.data.resolution[0] / this.data.resolution[1];\n\n    // TODO currently if a video-texture-source tries to render itself it will fail with a warning.\n    // If we want to support this we will need 2 render targets to swap back and forth.\n    this.renderTarget = new THREE.WebGLRenderTarget(this.data.resolution[0], this.data.resolution[1], {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.GammaEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    const texture = this.renderTarget.texture;\n\n    // Since we are rendering directly to a texture we need to flip it vertically\n    // See https://github.com/mozilla/hubs/pull/4126#discussion_r610120237\n    texture.matrixAutoUpdate = false;\n    texture.matrix.scale(1, -1);\n    texture.matrix.translate(0, 1);\n\n    this.textureNeedsUpdate = false;\n  },\n\n  remove() {\n    disposeTexture(this.renderTarget.texture);\n    this.renderTarget.dispose();\n  },\n\n  tock(time) {\n    if (!this.renderTarget || !this.textureNeedsUpdate) return;\n\n    if (time < this.lastRenderTime + 1000 / this.data.fps) return;\n\n    // TODO handle hiding UI and showing first person head\n    // Once thats done also rework camrea-tool to use this to do its actual rendering\n\n    const sceneEl = this.el.sceneEl;\n    const renderer = this.renderer || sceneEl.renderer;\n\n    const tmpXRFlag = renderer.xr.enabled;\n    const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n    delete sceneEl.object3D.onAfterRender;\n    renderer.xr.enabled = false;\n\n    // The entire scene graph matrices should already be updated\n    // in tick(). They don't need to be recomputed again in tock().\n    const tmpAutoUpdate = sceneEl.object3D.autoUpdate;\n    sceneEl.object3D.autoUpdate = false;\n\n    renderer.setRenderTarget(this.renderTarget);\n    renderer.render(sceneEl.object3D, this.camera);\n    renderer.setRenderTarget(null);\n\n    sceneEl.object3D.autoUpdate = tmpAutoUpdate;\n\n    renderer.xr.enabled = tmpXRFlag;\n    sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n\n    this.lastRenderTime = time;\n    this.textureNeedsUpdate = false;\n  }\n});\n\n/**\n * @component video-texture-target\n * This component is intended to be used on entities with a mesh/skinned mesh Object3D\n * The component swaps the base color map on the mesh's material with a video texture\n * Currently the video texture can come from a webcam stream or a camera entity with\n * a video-texture-src component on it.\n */\nAFRAME.registerComponent(\"video-texture-target\", {\n  schema: {\n    src: { type: \"string\" },\n    // only used when `src` === \"el\"\n    srcEl: { type: \"selector\" },\n    targetBaseColorMap: { type: \"boolean\", default: true },\n    targetEmissiveMap: { type: \"boolean\", default: false }\n  },\n\n  getMaterial() {\n    return (\n      (this.el.object3DMap.skinnedmesh && this.el.object3DMap.skinnedmesh.material) ||\n      (this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) ||\n      this.el.object3D.material\n    );\n  },\n\n  init() {\n    // Make video-texture-target objects inivisible before rendering to the frame buffer\n    // Chromium checks for loops when drawing to a framebuffer so if we don't exclude the objects\n    // that are using that rendertarget's texture we get an error. Firefox does not check.\n    // https://chromium.googlesource.com/chromium/src/+/460cac969e2e9ac38a2611be1a32db0361d88bfb/gpu/command_buffer/service/gles2_cmd_decoder.cc#9516\n    this.el.object3D.traverse(o => {\n      o.layers.mask1 = o.layers.mask;\n      o.layers.set(Layers.CAMERA_LAYER_VIDEO_TEXTURE_TARGET);\n    });\n\n    const material = this.getMaterial();\n\n    if (!material) {\n      console.warn(\"video-texture-target added to an entity without a material\");\n    }\n\n    this.originalMap = material && material.map;\n    this.originalEmissiveMap = material && material.emissiveMap;\n  },\n\n  update(prevData) {\n    const material = this.getMaterial();\n\n    if (!material) {\n      return;\n    }\n\n    const src = this.data.src;\n\n    // TODO it's pretty ugly to have these 2 unrelated code paths, it should probably be reworked such that both paths look more like the first branch\n    if (src === \"el\") {\n      if (prevData.srcEl === this.data.srcEl) return;\n\n      if (this.data.srcEl) {\n        const videoTextureSource = this.data.srcEl.components[\"video-texture-source\"];\n        const texture = videoTextureSource.renderTarget.texture;\n        this.applyTexture(texture);\n\n        // Bit of a hack here to only update the renderTarget when the screens are in view\n        material.map.isVideoTexture = true;\n        material.map.update = () => {\n          videoTextureSource.textureNeedsUpdate = true;\n        };\n      } else {\n        material.map = this.originalMap;\n        material.emissiveMap = this.originalEmissiveMap;\n        material.needsUpdate = true;\n      }\n    } else {\n      if (src && src.startsWith(\"hubs://\")) {\n        if (prevData.src === src) {\n          return;\n        }\n\n        const streamClientId = src.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n\n        APP.dialog.getMediaStream(streamClientId, \"video\").then(stream => {\n          if (src !== this.data.src) {\n            // Prevent creating and loading video texture if the src changed while we were fetching the video stream.\n            return;\n          }\n\n          const video = createVideoOrAudioEl(\"video\");\n          video.srcObject = stream;\n\n          const texture = new THREE.VideoTexture(video);\n          texture.flipY = false;\n          texture.minFilter = THREE.LinearFilter;\n          texture.encoding = THREE.sRGBEncoding;\n\n          this.applyTexture(texture);\n        });\n      } else {\n        if (material.map && material.map !== this.originalMap) {\n          disposeTexture(material.map);\n        }\n\n        if (material.emissiveMap && material.emissiveMap !== this.originalEmissiveMap) {\n          disposeTexture(material.emissiveMap);\n        }\n\n        material.map = this.originalMap;\n        material.emissiveMap = this.originalEmissiveMap;\n\n        material.needsUpdate = true;\n      }\n    }\n  },\n\n  applyTexture(texture) {\n    const material = this.getMaterial();\n\n    // Copy texture settings from the original texture so that things like texture wrap settings are applied\n    const originalTexture = this.originalMap || this.originalEmissiveMap;\n\n    if (originalTexture) {\n      texture.wrapS = originalTexture.wrapS;\n      texture.wrapT = originalTexture.wrapT;\n    }\n\n    if (this.data.targetBaseColorMap) {\n      material.map = texture;\n    }\n\n    if (this.data.targetEmissiveMap) {\n      material.emissiveMap = texture;\n    }\n\n    material.needsUpdate = true;\n  },\n\n  remove() {\n    this.el.object3D.traverse(o => {\n      if (o.layers.mask1) {\n        o.layers.mask = o.layers.mask1;\n        delete o.layers.mask1;\n      }\n    });\n\n    // element sources can be shared and are expected to manage their own resources\n    if (this.data.src === \"el\") return;\n\n    const material = this.getMaterial();\n\n    if (material && material.map && material.map !== this.originalMap) {\n      disposeTexture(material.map);\n    }\n\n    if (material.emissiveMap && material.emissiveMap !== this.originalEmissiveMap) {\n      disposeTexture(material.emissiveMap);\n    }\n  }\n});\n","import { THREE } from \"aframe\";\nimport { Reflector } from \"three/examples/jsm/objects/Reflector\";\n\nconst DEFAULT_MIRROR_GEOMETRY = new THREE.PlaneBufferGeometry();\nconst DEFAULT_TEXTURE_WIDTH = window.innerWidth * window.devicePixelRatio;\nconst DEFAULT_TEXTURE_HEIGHT = window.innerHeight * window.devicePixelRatio;\n\nimport { Layers } from \"./layers\";\n\n/**\n * Should need to entity that has geometry primitive\n *\n * @example\n * ```html\n * <a-plane mirror scale=\"5 5 5\" position=\"0 3 0\"></a-plane>\n * <a-circle mirror=\"color: #7f7f7f\" scale=\"5 5 5\" position=\"0 3 0\"></a-circle>\n * ```\n */\nAFRAME.registerComponent(\"mirror\", {\n  schema: {\n    color: { type: \"color\", default: \"#7f7f7f\" }\n  },\n\n  init() {\n    const geometry = this.el.object3DMap?.mesh?.geometry || DEFAULT_MIRROR_GEOMETRY;\n    const reflector = new Reflector(geometry, {\n      color: this.data.color,\n      textureWidth: DEFAULT_TEXTURE_WIDTH,\n      textureHeight: DEFAULT_TEXTURE_HEIGHT\n    });\n    this.el.setObject3D(\"mesh\", reflector);\n\n    // HACK the first time we render this, add the appropriate camera layers to the virtual camera\n    const originalOnBeforeRender = reflector.onBeforeRender;\n    reflector.onBeforeRender = function(renderer, scene, camera) {\n      const originalRender = renderer.render;\n      renderer.render = function(scene, camera) {\n        camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n        camera.layers.enable(Layers.CAMERA_LAYER_VIDEO_TEXTURE_TARGET);\n        reflector.onBeforeRender = originalOnBeforeRender;\n        originalRender.call(renderer, scene, camera);\n      };\n      originalOnBeforeRender(renderer, scene, camera);\n      renderer.render = originalRender;\n    };\n  }\n});\n","import { isIOS } from \"./is-mobile\";\n\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Disallowed list of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DISALLOWED_DEVICES = [/cardboard/i];\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n  const isWebXRCapableBrowser = window.hasNativeWebXRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const isCardboardCapableBrowser = !!(isMobile && !isIDevice && browser.name === \"chrome\" && !isSamsungBrowser);\n\n  let displays = [];\n  try {\n    // Skip getVRDisplays on desktop Chrome since the API is in a broken state there.\n    // See https://github.com/mozilla/hubs/issues/892\n    if (browser.name !== \"chrome\" || isMobile) {\n      // We pull the displays on non-WebVR capable mobile browsers so we can pick up cardboard.\n      displays = isWebVRCapableBrowser || isCardboardCapableBrowser ? await navigator.getVRDisplays() : [];\n    }\n  } catch (e) {\n    console.warn(\"navigator.getVRDisplays() failed\", e);\n  }\n\n  const isOculusBrowser = /Oculus/.test(ua);\n\n  const screen = isMobileVR\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. Without this check if you have FF on Mac/Linux you'll get the confusing flow of having a\n  // VR button but then being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic = isMobile || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isMobileVR ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  cardboard =\n    isCardboardCapableBrowser && displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for allowed devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DISALLOWED_DEVICES.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  if (isWebXRCapableBrowser) {\n    generic = true;\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, safari };\n}\n\nexport const ONLY_SCREEN_AVAILABLE = {\n  screen: VR_DEVICE_AVAILABILITY.yes,\n  generic: VR_DEVICE_AVAILABILITY.no,\n  gearvr: VR_DEVICE_AVAILABILITY.no,\n  daydream: VR_DEVICE_AVAILABILITY.no,\n  cardboard: VR_DEVICE_AVAILABILITY.no,\n  safari: VR_DEVICE_AVAILABILITY.no\n};\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\nexport function canShare() {\n  // TODO, fix up when OB/FxR support sharing\n  return navigator.share && !isMobileVR;\n}\n\n/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (canShare()) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router\";\n\n/**\n * A react-router Route that looks for a key/value pair in the state to render something.\n */\nclass StateRoute extends React.Component {\n  static propTypes = {\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  render() {\n    const { history, stateKey, stateValue, ...routeProps } = this.props;\n\n    if (\n      (!history.location.state && !stateValue) ||\n      (history.location.state &&\n        (history.location.state[stateKey] === stateValue || (!history.location.state[stateKey] && !stateValue)))\n    ) {\n      return <Route path=\"/\" {...routeProps} />;\n    }\n\n    return null;\n  }\n}\n\nexport default StateRoute;\n","const MIC_PRESENCE_VOLUME_THRESHOLD = 0.00001;\n\nexport const getMicrophonePresences = (() => {\n  const microphonePresences = new Map();\n  const sessionIds = [];\n  const currentSessionIds = [];\n  return function() {\n    if (!window.APP || !window.APP.componentRegistry) {\n      return null;\n    }\n\n    const sceneEl = AFRAME.scenes[0];\n\n    currentSessionIds.length = 0;\n\n    const playerInfos = window.APP.componentRegistry[\"player-info\"];\n    if (playerInfos) {\n      for (let i = 0; i < playerInfos.length; i++) {\n        const playerInfo = playerInfos[i];\n        const playerSessionId = playerInfo.playerSessionId;\n        let talking = false;\n        if (playerInfo.isLocalPlayerInfo) {\n          talking = sceneEl.systems[\"local-audio-analyser\"].volume > MIC_PRESENCE_VOLUME_THRESHOLD;\n        }\n        if (sessionIds.indexOf(playerSessionId) === -1) {\n          sessionIds.push(playerSessionId);\n        }\n        currentSessionIds.push(playerSessionId);\n        if (microphonePresences.has(playerSessionId)) {\n          const presence = microphonePresences.get(playerSessionId);\n          presence.muted = playerInfo.data.muted;\n          presence.talking = talking;\n        } else {\n          microphonePresences.set(playerSessionId, { muted: playerInfo.data.muted, talking });\n        }\n      }\n    }\n\n    const networkedAudioAnalysers = window.APP.componentRegistry[\"networked-audio-analyser\"];\n    if (networkedAudioAnalysers) {\n      for (let i = 0; i < networkedAudioAnalysers.length; i++) {\n        const networkedAudioAnalyser = networkedAudioAnalysers[i];\n        if (\n          microphonePresences.has(networkedAudioAnalyser.playerSessionId) &&\n          networkedAudioAnalyser.volume > MIC_PRESENCE_VOLUME_THRESHOLD\n        ) {\n          microphonePresences.get(networkedAudioAnalyser.playerSessionId).talking = true;\n        }\n      }\n    }\n\n    for (let i = sessionIds.length - 1; i >= 0; i--) {\n      const sessionId = sessionIds[i];\n      if (currentSessionIds.indexOf(sessionId) === -1) {\n        microphonePresences.delete(sessionId);\n        sessionIds.splice(i, 1);\n      }\n    }\n\n    return microphonePresences;\n  };\n})();\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Sidebar.scss\";\n\nexport function Sidebar({\n  title,\n  beforeTitle,\n  afterTitle,\n  children,\n  contentClassName,\n  className,\n  disableOverflowScroll\n}) {\n  return (\n    <div className={classNames(styles.sidebar, className)}>\n      {(title || beforeTitle || afterTitle) && (\n        <div className={styles.header}>\n          <div className={styles.beforeTitle}>{beforeTitle}</div>\n          <h5>{title}</h5>\n          <div className={styles.afterTitle}>{afterTitle}</div>\n        </div>\n      )}\n      <div className={classNames(styles.content, disableOverflowScroll ? \"\" : styles.overflowY, contentClassName)}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nSidebar.propTypes = {\n  title: PropTypes.node,\n  beforeTitle: PropTypes.node,\n  afterTitle: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  contentClassName: PropTypes.string,\n  disableOverflowScroll: PropTypes.bool\n};\n\nSidebar.defaultProps = {\n  disableOverflowScroll: false\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChevronBack(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14 3l-7 7 7 7\",\n    stroke: props.color,\n    strokeWidth: 2.25,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgChevronBack.defaultProps = {\n  color: \"#000\",\n  title: \"Chevron Back\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0NoZXZyb25CYWNrLWQ1NTQwMDQzMTIxMjFjYzE3YmFhZGJmMDZmMDhjNmJkLnN2ZyI7\";\nexport { SvgChevronBack as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./BackButton.scss\";\nimport { IconButton } from \"../input/IconButton\";\nimport { ReactComponent as ChevronBackIcon } from \"../icons/ChevronBack.svg\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function BackButton({ className, ...rest }) {\n  return (\n    <IconButton className={classNames(styles.backButton, className)} {...rest}>\n      <ChevronBackIcon />\n      <span>\n        <FormattedMessage id=\"back-button\" defaultMessage=\"Back\" />\n      </span>\n    </IconButton>\n  );\n}\n\nBackButton.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, AcceptButton } from \"../input/Button\";\nimport styles from \"./AvatarSettingsContent.scss\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function AvatarSettingsContent({\n  displayName,\n  displayNameInputRef,\n  disableDisplayNameInput,\n  onChangeDisplayName,\n  avatarPreview,\n  displayNamePattern,\n  onChangeAvatar,\n  ...rest\n}) {\n  return (\n    <Column as=\"form\" className={styles.content} {...rest}>\n      <TextInputField\n        disabled={disableDisplayNameInput}\n        label={<FormattedMessage id=\"avatar-settings-content.display-name-label\" defaultMessage=\"Display Name\" />}\n        value={displayName}\n        pattern={displayNamePattern}\n        spellCheck=\"false\"\n        required\n        onChange={onChangeDisplayName}\n        description={\n          <FormattedMessage\n            id=\"avatar-settings-content.display-name-description\"\n            defaultMessage=\"Alphanumerics, hyphens, underscores, and tildes. At least 3 characters, no more than 32\"\n          />\n        }\n        ref={displayNameInputRef}\n      />\n      <div className={styles.avatarPreviewContainer}>\n        {avatarPreview || <div />}\n        <Button type=\"button\" preset=\"basic\" onClick={onChangeAvatar}>\n          <FormattedMessage id=\"avatar-settings-content.change-avatar-button\" defaultMessage=\"Change Avatar\" />\n        </Button>\n      </div>\n      <AcceptButton preset=\"accept\" type=\"submit\" />\n    </Column>\n  );\n}\n\nAvatarSettingsContent.propTypes = {\n  className: PropTypes.string,\n  displayName: PropTypes.string,\n  displayNameInputRef: PropTypes.func,\n  disableDisplayNameInput: PropTypes.bool,\n  displayNamePattern: PropTypes.string,\n  onChangeDisplayName: PropTypes.func,\n  avatarPreview: PropTypes.node,\n  onChangeAvatar: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { BackButton } from \"../input/BackButton\";\nimport { AvatarSettingsContent } from \"./AvatarSettingsContent\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function AvatarSettingsSidebar({ className, showBackButton, onBack, onClose, ...rest }) {\n  return (\n    <Sidebar\n      title={<FormattedMessage id=\"avatar-settings-sidebar.title\" defaultMessage=\"Avatar Settings\" />}\n      beforeTitle={showBackButton ? <BackButton onClick={onBack} /> : <CloseButton onClick={onClose} />}\n      className={className}\n    >\n      <AvatarSettingsContent {...rest} />\n    </Sidebar>\n  );\n}\n\nAvatarSettingsSidebar.propTypes = {\n  showBackButton: PropTypes.bool,\n  className: PropTypes.string,\n  onBack: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { BackButton } from \"../input/BackButton\";\nimport { AvatarSettingsContent } from \"./AvatarSettingsContent\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function AvatarSetupModal({ className, onBack, ...rest }) {\n  return (\n    <Modal\n      title={<FormattedMessage id=\"avatar-setup-sidebar.title\" defaultMessage=\"Avatar Setup\" />}\n      beforeTitle={<BackButton onClick={onBack} />}\n      className={className}\n    >\n      <AvatarSettingsContent {...rest} />\n    </Modal>\n  );\n}\n\nAvatarSetupModal.propTypes = {\n  className: PropTypes.string,\n  onBack: PropTypes.func\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { fetchAvatar } from \"../utils/avatar-utils\";\nimport { replaceHistoryState } from \"../utils/history\";\nimport { AvatarSettingsSidebar } from \"./room/AvatarSettingsSidebar\";\nimport { AvatarSetupModal } from \"./room/AvatarSetupModal\";\nimport AvatarPreview from \"./avatar-preview\";\n\nexport default class ProfileEntryPanel extends Component {\n  static propTypes = {\n    containerType: PropTypes.oneOf([\"sidebar\", \"modal\"]),\n    displayNameOverride: PropTypes.string,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    history: PropTypes.object,\n    avatarId: PropTypes.string,\n    onClose: PropTypes.func,\n    onBack: PropTypes.func,\n    showBackButton: PropTypes.bool\n  };\n\n  static defaultProps = {\n    containerType: \"modal\"\n  };\n\n  state = {\n    avatarId: null,\n    displayName: null,\n    avatar: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStateFromProfile();\n    if (props.avatarId) {\n      this.state.avatarId = props.avatarId;\n    }\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.scene = document.querySelector(\"a-scene\");\n  }\n\n  getStateFromProfile = () => {\n    const { displayName, avatarId } = this.props.store.state.profile;\n    return { displayName, avatarId };\n  };\n\n  storeUpdated = () => this.setState(this.getStateFromProfile());\n\n  saveStateAndFinish = e => {\n    e && e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously,\n        hasAcceptedProfile: true\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n    this.scene.emit(\"avatar_updated\");\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarFromMediaResult = ({ detail: { entry, selectAction } }) => {\n    if ((entry.type !== \"avatar\" && entry.type !== \"avatar_listing\") || selectAction !== \"use\") return;\n\n    this.setState({ avatarId: entry.id });\n    // Replace history state with the current avatar id since this component gets destroyed when we open the\n    // avatar editor and we want the back button to work. We read the history state back via the avatarId prop.\n    // We read the current state key from history since it could be \"overlay\" or \"entry_step\".\n    replaceHistoryState(this.props.history, this.props.history.location.state.key, \"profile\", { avatarId: entry.id });\n  };\n\n  componentDidMount() {\n    if (this.nameInput) {\n      // stop propagation so that avatar doesn't move when wasd'ing during text input.\n      this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.addEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    // This handles editing avatars in the entry_step, since this component remains mounted with the same avatarId\n    this.scene.addEventListener(\"action_avatar_saved\", this.refetchAvatar);\n\n    this.refetchAvatar();\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.avatarId !== this.state.avatarId) {\n      this.refetchAvatar();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    if (this.nameInput) {\n      this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.removeEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    this.scene.removeEventListener(\"action_avatar_saved\", this.refetchAvatar);\n  }\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.state.avatarId);\n    if (this.state.avatarId !== avatar.avatar_id) return; // This is an old result, ignore it\n    this.setState({ avatar });\n  };\n\n  render() {\n    const avatarSettingsProps = {\n      displayNameInputRef: inp => (this.nameInput = inp),\n      disableDisplayNameInput: !!this.props.displayNameOverride,\n      displayName: this.props.displayNameOverride ? this.props.displayNameOverride : this.state.displayName,\n      displayNamePattern: this.props.store.schema.definitions.profile.properties.displayName.pattern,\n      onChangeDisplayName: e => this.setState({ displayName: e.target.value }),\n      avatarPreview: <AvatarPreview avatarGltfUrl={this.state.avatar && this.state.avatar.gltf_url} />,\n      onChangeAvatar: e => {\n        e.preventDefault();\n        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\");\n      },\n      onSubmit: this.saveStateAndFinish,\n      onClose: this.props.onClose,\n      onBack: this.props.onBack\n    };\n\n    if (this.props.containerType === \"sidebar\") {\n      return <AvatarSettingsSidebar {...avatarSettingsProps} showBackButton={this.props.showBackButton} />;\n    }\n\n    return <AvatarSetupModal {...avatarSettingsProps} />;\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { useForm } from \"react-hook-form\";\nimport { ApplyButton } from \"../input/Button\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Column } from \"../layout/Column\";\n\nexport function AvatarUrlModal({ onSubmit, onClose }) {\n  const { handleSubmit, register } = useForm();\n  return (\n    <Modal title=\"Custom Avatar URL\" beforeTitle={<CloseButton onClick={onClose} />}>\n      <Column as=\"form\" padding center onSubmit={handleSubmit(onSubmit)}>\n        <TextInputField\n          name=\"url\"\n          label={<FormattedMessage id=\"avatar-url-modal.avatar-url-label\" defaultMessage=\"Avatar GLB URL\" />}\n          placeholder=\"https://example.com/avatar.glb\"\n          type=\"url\"\n          required\n          ref={register}\n          description={\n            <a href=\"https://hubs.mozilla.com/docs/intro-avatars.html\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <FormattedMessage\n                id=\"avatar-url-modal.custom-avatar-docs-link\"\n                defaultMessage=\"Learn more about custom avatars\"\n              />\n            </a>\n          }\n        />\n        <ApplyButton type=\"submit\" />\n      </Column>\n    </Modal>\n  );\n}\n\nAvatarUrlModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { AvatarUrlModal } from \"./AvatarUrlModal\";\n\nexport function AvatarUrlModalContainer({ store, scene, onClose }) {\n  const onSubmit = useCallback(\n    ({ url }) => {\n      store.update({ profile: { ...store.state.profile, ...{ avatarId: url } } });\n      scene.emit(\"avatar_updated\");\n      onClose();\n    },\n    [store, scene, onClose]\n  );\n\n  return <AvatarUrlModal onSubmit={onSubmit} onClose={onClose} />;\n}\n\nAvatarUrlModalContainer.propTypes = {\n  store: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { useForm } from \"react-hook-form\";\nimport { Button } from \"../input/Button\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Column } from \"../layout/Column\";\n\nexport function SceneUrlModal({ enableSpoke, editorName, onValidateUrl, onSubmit, onClose }) {\n  const { isSubmitting, handleSubmit, register, errors } = useForm();\n  return (\n    <Modal\n      title={<FormattedMessage id=\"scene-url-modal.title\" defaultMessage=\"Custom Scene URL\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column as=\"form\" padding center onSubmit={handleSubmit(onSubmit)}>\n        <p>\n          {enableSpoke ? (\n            <FormattedMessage\n              id=\"scene-url-modal.message-with-spoke\"\n              defaultMessage=\"Paste a URL to a {editorName} scene or a URL to a <glblink>GLB</glblink>.\"\n              values={{\n                editorName: (\n                  <a href=\"/spoke\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    {editorName}\n                  </a>\n                ),\n                // eslint-disable-next-line react/display-name\n                glblink: chunks => (\n                  <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    {chunks}\n                  </a>\n                )\n              }}\n            />\n          ) : (\n            <FormattedMessage\n              id=\"scene-url-modal.message\"\n              defaultMessage=\"Paste a URL to a scene or a URL to a <glblink>GLB</glblink>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                glblink: chunks => (\n                  <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    {chunks}\n                  </a>\n                )\n              }}\n            />\n          )}\n        </p>\n        <TextInputField\n          name=\"url\"\n          label={<FormattedMessage id=\"scene-url-modal.url-input\" defaultMessage=\"Scene URL\" />}\n          placeholder=\"https://example.com/scene.glb\"\n          type=\"url\"\n          required\n          ref={register({ validate: onValidateUrl })}\n          error={errors.url && errors.url.message}\n        />\n        <Button type=\"submit\" preset=\"accept\" disabled={isSubmitting}>\n          <FormattedMessage id=\"scene-url-modal.change-scene-button\" defaultMessage=\"Change Scene\" />\n        </Button>\n        {enableSpoke && (\n          <>\n            <p>\n              <FormattedMessage\n                id=\"scene-url-modal.create-in-spoke\"\n                defaultMessage=\"Or, create a new scene using {editorName}.\"\n                values={{ editorName }}\n              />\n            </p>\n            <Button as=\"a\" preset=\"primary\" href=\"/spoke/new\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <FormattedMessage\n                id=\"scene-url-modal.new-spoke-project-button\"\n                defaultMessage=\"Launch {editorName}\"\n                values={{ editorName }}\n              />\n            </Button>\n          </>\n        )}\n      </Column>\n    </Modal>\n  );\n}\n\nSceneUrlModal.propTypes = {\n  enableSpoke: PropTypes.bool,\n  editorName: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onClose: PropTypes.func,\n  onValidateUrl: PropTypes.isRequired\n};\n","import { isLocalHubsSceneUrl, proxiedUrlFor } from \"../utils/media-url-utils\";\n\nexport async function isValidGLB(url) {\n  return fetch(url).then(async r => {\n    const reader = r.body.getReader();\n    let header = \"\";\n    function readChunk({ done, value }) {\n      header += String.fromCharCode.apply(null, value.slice(0, 4));\n      if (!done && header.length < 4) {\n        return reader.read().then(readChunk);\n      } else {\n        reader.cancel();\n      }\n    }\n    await reader.read().then(readChunk);\n    return header.startsWith(\"glTF\");\n  });\n}\n\nexport async function isValidSceneUrl(url) {\n  if (url.trim() === \"\") return false;\n  if (!url.startsWith(\"http\")) return false;\n  if (await isLocalHubsSceneUrl(url)) {\n    return true;\n  } else {\n    return isValidGLB(proxiedUrlFor(url));\n  }\n}\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SceneUrlModal } from \"./SceneUrlModal\";\nimport configs from \"../../utils/configs\";\nimport { isValidSceneUrl } from \"../../utils/scene-url-utils\";\nimport { useIntl } from \"react-intl\";\n\nexport function SceneUrlModalContainer({ hubChannel, onClose }) {\n  const intl = useIntl();\n\n  const onValidateUrl = useCallback(\n    async url => {\n      const valid = await isValidSceneUrl(url.trim());\n      return valid || intl.formatMessage(\"scene-url-modal.invalid-scene-url\");\n    },\n    [intl]\n  );\n\n  const onSubmit = useCallback(\n    ({ url }) => {\n      hubChannel.updateScene(url);\n      onClose();\n    },\n    [hubChannel, onClose]\n  );\n\n  return (\n    <SceneUrlModal\n      enableSpoke={configs.feature(\"enable_spoke\")}\n      editorName={configs.translation(\"editor-name\")}\n      onValidateUrl={onValidateUrl}\n      onSubmit={onSubmit}\n      onClose={onClose}\n    />\n  );\n}\n\nSceneUrlModalContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAttach(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.44 7.5v5.62a1.565 1.565 0 003.131 0l.005-7.366A2.656 2.656 0 007.9 3.274a2.654 2.654 0 00-1.631 2.48v7.415a3.73 3.73 0 107.46 0V6.24\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }));\n}\n\nSvgAttach.defaultProps = {\n  color: \"#000\",\n  title: \"Attach\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0F0dGFjaC01ZjBiNTE0ZDZhOTU4YjU3OWU3YjgzOTc4MWNjY2ZkMy5zdmciOw==\";\nexport { SvgAttach as ReactComponent };","import React, { useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { useForm } from \"react-hook-form\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport { IconButton } from \"../input/IconButton\";\nimport { ReactComponent as AttachIcon } from \"../icons/Attach.svg\";\nimport styles from \"./ObjectUrlModal.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function ObjectUrlModal({ showModelCollectionLink, modelCollectionUrl, onSubmit, onClose }) {\n  const { handleSubmit, register, watch, setValue } = useForm();\n\n  useEffect(\n    () => {\n      register(\"url\");\n    },\n    [register]\n  );\n\n  const file = watch(\"file\");\n  const hasFile = file && file.length > 0;\n  const fileName = hasFile ? file[0].name : undefined;\n\n  const onClear = useCallback(\n    () => {\n      if (hasFile) {\n        setValue(\"file\", undefined);\n      } else {\n        setValue(\"url\", \"\");\n      }\n    },\n    [hasFile, setValue]\n  );\n\n  const onChange = useCallback(\n    e => {\n      if (hasFile) {\n        return;\n      }\n\n      setValue(\"url\", e.target.value);\n    },\n    [hasFile, setValue]\n  );\n\n  const url = watch(\"url\", \"\");\n\n  const showCloseButton = hasFile || url.length > 0;\n\n  return (\n    <Modal\n      title={<FormattedMessage id=\"object-url-modal.title\" defaultMessage=\"Custom Object\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column as=\"form\" padding center onSubmit={handleSubmit(onSubmit)}>\n        <p>\n          {showModelCollectionLink ? (\n            <FormattedMessage\n              id=\"object-url-modal.message-with-collection\"\n              defaultMessage=\"Upload or paste a URL to an image, video, model, or scene. Models can be found on <sketchfablink>Sketchfab</sketchfablink> or our <collectionlink>collection</collectionlink>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                sketchfablink: chunks => (\n                  <a\n                    href=\"https://sketchfab.com/search?features=downloadable&type=models\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {chunks}\n                  </a>\n                ),\n                // eslint-disable-next-line react/display-name\n                collectionlink: chunks => (\n                  <a href={modelCollectionUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                    {chunks}\n                  </a>\n                )\n              }}\n            />\n          ) : (\n            <FormattedMessage\n              id=\"object-url-modal.message\"\n              defaultMessage=\"Upload or paste a URL to an image, video, model, or scene. Models can be found on <sketchfablink>Sketchfab</sketchfablink>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                sketchfablink: chunks => (\n                  <a\n                    href=\"https://sketchfab.com/search?features=downloadable&type=models\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {chunks}\n                  </a>\n                )\n              }}\n            />\n          )}\n        </p>\n        <TextInputField\n          name=\"url\"\n          label={<FormattedMessage id=\"object-url-modal.url-field-label\" defaultMessage=\"Object URL or File\" />}\n          placeholder=\"https://example.com/avatar.glb\"\n          type={hasFile ? \"text\" : \"url\"}\n          value={fileName || url || \"\"}\n          onChange={onChange}\n          afterInput={\n            <>\n              {showCloseButton && <CloseButton onClick={onClear} />}\n              <IconButton\n                as=\"label\"\n                className={classNames({ [styles.hidden]: showCloseButton }, styles.urlInput)}\n                htmlFor=\"file\"\n              >\n                <AttachIcon />\n                <input id=\"file\" className={styles.hidden} name=\"file\" type=\"file\" ref={register} />\n              </IconButton>\n            </>\n          }\n          description={\n            <FormattedMessage\n              id=\"object-url-modal.url-field-description\"\n              defaultMessage=\"Accepts glb, png, jpg, gif, mp4, and mp3 files\"\n            />\n          }\n        />\n        <Button type=\"submit\" preset=\"accept\">\n          <FormattedMessage id=\"object-url-modal.create-object-button\" defaultMessage=\"Create Object\" />\n        </Button>\n      </Column>\n    </Modal>\n  );\n}\n\nObjectUrlModal.propTypes = {\n  isMobile: PropTypes.bool,\n  showModelCollectionLink: PropTypes.bool,\n  modelCollectionUrl: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ObjectUrlModal } from \"./ObjectUrlModal\";\nimport configs from \"../../utils/configs\";\nimport ducky from \"../../assets/models/DuckyMesh.glb\";\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport function ObjectUrlModalContainer({ scene, onClose }) {\n  const onSubmit = useCallback(\n    ({ file, url }) => {\n      scene.emit(\"add_media\", (file && file.length > 0 && file[0]) || url || ducky);\n      onClose();\n    },\n    [scene, onClose]\n  );\n\n  return (\n    <ObjectUrlModal\n      isMobile={isMobile}\n      showModelCollectionLink={configs.feature(\"show_model_collection_link\")}\n      modelCollectionUrl={configs.link(\"model_collection\", \"https://sketchfab.com/mozillareality\")}\n      onSubmit={onSubmit}\n      onClose={onClose}\n    />\n  );\n}\n\nObjectUrlModalContainer.propTypes = {\n  scene: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowForward(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.469 4.375L16.094 10l-5.625 5.625\",\n    stroke: props.color,\n    strokeWidth: 2.25,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.313 10H3.905\",\n    stroke: props.color,\n    strokeWidth: 2.25,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgArrowForward.defaultProps = {\n  color: \"#000\",\n  title: \"Arrow Forward\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Fycm93Rm9yd2FyZC01MTZjN2E4MmM5N2FhNGI1YTZkYjEyOGJlOTQ3NTQ1MS5zdmciOw==\";\nexport { SvgArrowForward as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowBack(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.531 15.625L3.906 10l5.625-5.625\",\n    stroke: props.color,\n    strokeWidth: 2.25,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.688 10h11.406\",\n    stroke: props.color,\n    strokeWidth: 2.25,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgArrowBack.defaultProps = {\n  color: \"#000\",\n  title: \"Arrow Back\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Fycm93QmFjay00NjgzNWU1MDVmZTVjZGU3OGY3NjY1NWU2ZGYyMzI0ZC5zdmciOw==\";\nexport { SvgArrowBack as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./FullscreenLayout.scss\";\n\nexport function FullscreenLayout({ className, headerLeft, headerCenter, headerRight, contentClassName, children }) {\n  return (\n    <div className={classNames(styles.fullscreenLayout, className)}>\n      <div className={styles.header}>\n        <div className={styles.headerLeft}>{headerLeft}</div>\n        <div className={styles.headerCenter}>{headerCenter}</div>\n        <div className={styles.headerRight}>{headerRight}</div>\n      </div>\n      <div className={classNames(styles.content, contentClassName)}>{children}</div>\n    </div>\n  );\n}\n\nFullscreenLayout.propTypes = {\n  className: PropTypes.string,\n  headerLeft: PropTypes.node,\n  headerCenter: PropTypes.node,\n  headerRight: PropTypes.node,\n  contentClassName: PropTypes.string,\n  children: PropTypes.node\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./MediaBrowser.scss\";\nimport { ReactComponent as SearchIcon } from \"../icons/Search.svg\";\nimport { ReactComponent as StarIcon } from \"../icons/Star.svg\";\nimport { ReactComponent as CloseIcon } from \"../icons/Close.svg\";\nimport { ReactComponent as ArrowForwardIcon } from \"../icons/ArrowForward.svg\";\nimport { ReactComponent as ArrowBackIcon } from \"../icons/ArrowBack.svg\";\nimport { FormattedMessage, defineMessages, useIntl } from \"react-intl\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { IconButton } from \"../input/IconButton\";\nimport { FullscreenLayout } from \"../layout/FullscreenLayout\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport { MediaGrid } from \"./MediaGrid\";\n\nconst navTitleMessages = defineMessages({\n  youtube: { id: \"media-browser.nav_title.youtube\", defaultMessage: \"YouTube\" },\n  videos: { id: \"media-browser.nav_title.videos\", defaultMessage: \"Videos\" },\n  images: { id: \"media-browser.nav_title.images\", defaultMessage: \"Images\" },\n  gifs: { id: \"media-browser.nav_title.gifs\", defaultMessage: \"GIFs\" },\n  scenes: { id: \"media-browser.nav_title.scenes\", defaultMessage: \"Scenes\" },\n  avatars: { id: \"media-browser.nav_title.avatars\", defaultMessage: \"Avatars\" },\n  sketchfab: { id: \"media-browser.nav_title.sketchfab\", defaultMessage: \"Sketchfab\" },\n  twitch: { id: \"media-browser.nav_title.twitch\", defaultMessage: \"Twitch\" }\n});\n\nexport function MediaBrowser({\n  onClose,\n  browserRef,\n  searchInputRef,\n  autoFocusSearch,\n  searchPlaceholder,\n  searchDescription,\n  onSearchKeyDown,\n  onClearSearch,\n  mediaSources,\n  selectedSource,\n  onSelectSource,\n  activeFilter,\n  facets,\n  onSelectFacet,\n  query,\n  onChangeQuery,\n  headerRight,\n  hasNext,\n  hasPrevious,\n  onNextPage,\n  onPreviousPage,\n  noResultsMessage,\n  children\n}) {\n  const intl = useIntl();\n\n  return (\n    <FullscreenLayout\n      headerLeft={\n        <IconButton onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      }\n      headerCenter={\n        <>\n          {selectedSource === \"favorites\" ? (\n            <>\n              <StarIcon className={styles.favoriteIcon} />\n              <h3>\n                <FormattedMessage id=\"media-browser.favorites-header\" defaultMessage=\"Favorite Rooms\" />\n              </h3>\n            </>\n          ) : (\n            <TextInputField\n              value={query}\n              onChange={onChangeQuery}\n              autoFocus={autoFocusSearch}\n              ref={searchInputRef}\n              placeholder={searchPlaceholder}\n              onKeyDown={onSearchKeyDown}\n              beforeInput={<SearchIcon className={styles.searchIcon} />}\n              afterInput={\n                <IconButton onClick={onClearSearch}>\n                  <CloseIcon height={16} width={16} />\n                </IconButton>\n              }\n              description={searchDescription}\n            />\n          )}\n        </>\n      }\n      headerRight={headerRight}\n    >\n      {mediaSources && (\n        <div className={styles.buttonNav}>\n          {mediaSources.map(source => (\n            <Button\n              sm\n              key={source}\n              preset={selectedSource === source ? \"primary\" : \"transparent\"}\n              onClick={() => onSelectSource(source)}\n            >\n              {intl.formatMessage(navTitleMessages[source])}\n            </Button>\n          ))}\n        </div>\n      )}\n      {facets && (\n        <div className={classNames(styles.buttonNav, styles.facetsNav)}>\n          {facets.map((facet, i) => (\n            <Button\n              sm\n              key={i}\n              preset={activeFilter === facet.params.filter ? \"primary\" : \"transparent\"}\n              onClick={() => onSelectFacet(facet)}\n            >\n              {facet.text}\n            </Button>\n          ))}\n        </div>\n      )}\n      <div className={styles.content}>\n        <Column grow ref={browserRef}>\n          {children ? (\n            <MediaGrid\n              isVariableWidth={selectedSource === \"gifs\" || selectedSource === \"images\"}\n              sm={selectedSource === \"avatars\"}\n            >\n              {children}\n            </MediaGrid>\n          ) : (\n            <div className={styles.noResults}>{noResultsMessage}</div>\n          )}\n          {(hasNext || hasPrevious) && (\n            <div className={styles.pager}>\n              <button type=\"button\" className={styles.pagerButton} disabled={!hasPrevious} onClick={onPreviousPage}>\n                <ArrowBackIcon />\n              </button>\n              <button type=\"button\" className={styles.pagerButton} disabled={!hasNext} onClick={onNextPage}>\n                <ArrowForwardIcon />\n              </button>\n            </div>\n          )}\n        </Column>\n      </div>\n    </FullscreenLayout>\n  );\n}\n\nMediaBrowser.propTypes = {\n  onClose: PropTypes.func,\n  browserRef: PropTypes.any,\n  searchInputRef: PropTypes.any,\n  autoFocusSearch: PropTypes.bool,\n  searchPlaceholder: PropTypes.string,\n  searchDescription: PropTypes.node,\n  onSearchKeyDown: PropTypes.func,\n  onClearSearch: PropTypes.func,\n  mediaSources: PropTypes.array,\n  selectedSource: PropTypes.string,\n  onSelectSource: PropTypes.func,\n  activeFilter: PropTypes.string,\n  facets: PropTypes.array,\n  onSelectFacet: PropTypes.func,\n  query: PropTypes.string,\n  onChangeQuery: PropTypes.func,\n  headerRight: PropTypes.node,\n  hasNext: PropTypes.bool,\n  hasPrevious: PropTypes.bool,\n  onNextPage: PropTypes.func,\n  onPreviousPage: PropTypes.func,\n  noResultsMessage: PropTypes.node,\n  children: PropTypes.node\n};\n\nMediaBrowser.defaultProps = {\n  noResultsMessage: \"No Results\"\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.5 14.367h2.969c2.148 0 3.906-1.14 3.906-3.265s-2.07-3.183-3.75-3.266C15.278 4.514 12.852 2.492 10 2.492c-2.695 0-4.431 1.79-5 3.563C2.656 6.278.625 7.769.625 10.21c0 2.442 2.11 4.156 4.688 4.156H7.5\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.5 9.992l-2.5-2.5-2.5 2.5\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 17.509V8.117\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"Upload_svg__clip0\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: 20,\n  height: 20,\n  fill: \"#fff\"\n})));\n\nfunction SvgUpload(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#Upload_svg__clip0)\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, _ref2, _ref3, _ref4), _ref5);\n}\n\nSvgUpload.defaultProps = {\n  color: \"#000\",\n  title: \"Upload\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1VwbG9hZC1lN2U2MmJjNjIxOGRmNTZjYjIyZjg3ZDZkODJjNjAwMy5zdmciOw==\";\nexport { SvgUpload as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLink(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M4.851 11.038a2.906 2.906 0 104.11 4.11l1.768-1.768a.844.844 0 011.194 1.193l-1.768 1.768a4.594 4.594 0 11-6.497-6.496l1.768-1.768A.844.844 0 016.619 9.27l-1.768 1.768zm3.227-4.42a.844.844 0 010-1.193l1.767-1.767a4.594 4.594 0 016.497 6.496l-1.768 1.768a.844.844 0 11-1.193-1.193l1.768-1.768a2.906 2.906 0 00-4.11-4.11L9.27 6.619a.844.844 0 01-1.193 0zm-1.236 5.345a.844.844 0 001.194 1.193l5.176-5.176a.844.844 0 00-1.193-1.194l-5.177 5.177z\",\n    fill: props.color\n  }));\n}\n\nSvgLink.defaultProps = {\n  color: \"#000\",\n  title: \"Link\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0xpbmstNzBlYjAzMWY3ZGFmMWI0ZmNiYWFmNTI2ZDRlMzgzYTQuc3ZnIjs=\";\nexport { SvgLink as ReactComponent };","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage, defineMessages } from \"react-intl\";\nimport configs from \"../utils/configs\";\nimport { pushHistoryPath, pushHistoryState, sluglessPath } from \"../utils/history\";\nimport { SOURCES } from \"../storage/media-search-store\";\nimport { showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { AvatarUrlModalContainer } from \"./room/AvatarUrlModalContainer\";\nimport { SceneUrlModalContainer } from \"./room/SceneUrlModalContainer\";\nimport { ObjectUrlModalContainer } from \"./room/ObjectUrlModalContainer\";\nimport { MediaBrowser } from \"./room/MediaBrowser\";\nimport { IconButton } from \"./input/IconButton\";\nimport { ReactComponent as UploadIcon } from \"./icons/Upload.svg\";\nimport { ReactComponent as LinkIcon } from \"./icons/Link.svg\";\nimport { remixAvatar } from \"../utils/avatar-utils\";\nimport { fetchReticulumAuthenticated, getReticulumFetchUrl } from \"../utils/phoenix-utils\";\nimport { proxiedUrlFor, scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { CreateTile, MediaTile } from \"./room/MediaTiles\";\nimport { SignInMessages } from \"./auth/SignInModal\";\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst PRIVACY_POLICY_LINKS = {\n  videos: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  images: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  gifs: \"https://tenor.com/legal-privacy\",\n  sketchfab: \"https://sketchfab.com/privacy\",\n  youtube: \"https://policies.google.com/privacy\",\n  twitch: \"https://www.twitch.tv/p/legal/privacy-policy/\"\n};\n\nconst DEFAULT_FACETS = {\n  sketchfab: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"Animals\", params: { filter: \"animals-pets\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art-abstract\" } },\n    { text: \"Vehicles\", params: { filter: \"cars-vehicles\" } },\n    { text: \"Characters\", params: { filter: \"characters-creatures\" } },\n    { text: \"Culture\", params: { filter: \"cultural-heritage-history\" } },\n    { text: \"Gadgets\", params: { filter: \"electronics-gadgets\" } },\n    { text: \"Fashion\", params: { filter: \"fashion-style\" } },\n    { text: \"Food\", params: { filter: \"food-drink\" } },\n    { text: \"Furniture\", params: { filter: \"furniture-home\" } },\n    { text: \"Music\", params: { filter: \"music\" } },\n    { text: \"Nature\", params: { filter: \"nature-plants\" } },\n    { text: \"News\", params: { filter: \"news-politics\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Places\", params: { filter: \"places-travel\" } },\n    { text: \"Science\", params: { filter: \"science-technology\" } },\n    { text: \"Sports\", params: { filter: \"sports-fitness\" } },\n    { text: \"Weapons\", params: { filter: \"weapons-military\" } }\n  ],\n  avatars: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"My Avatars\", params: { filter: \"my-avatars\" } },\n    { text: \"Newest\", params: { filter: \"\" } }\n  ],\n  favorites: [],\n  scenes: [{ text: \"Featured\", params: { filter: \"featured\" } }, { text: \"My Scenes\", params: { filter: \"my-scenes\" } }]\n};\n\nconst poweredByMessages = defineMessages({\n  images: {\n    id: \"media-browser.powered_by.images\",\n    defaultMessage: \"Search by Bing\"\n  },\n  videos: {\n    id: \"media-browser.powered_by.videos\",\n    defaultMessage: \"Search by Bing\"\n  },\n  youtube: {\n    id: \"media-browser.powered_by.youtube\",\n    defaultMessage: \"Search by Google\"\n  },\n  gifs: {\n    id: \"media-browser.powered_by.gifs\",\n    defaultMessage: \"Search by Tenor\"\n  },\n  sketchfab: {\n    id: \"media-browser.powered_by.sketchfab\",\n    defaultMessage: \"Search by Sketchfab\"\n  },\n  twitch: {\n    id: \"media-browser.powered_by.twitch\",\n    defaultMessage: \"Search by Twitch\"\n  },\n  scenes: {\n    id: \"media-browser.powered_by.scenes\",\n    defaultMessage: \"Made with {editorName}\"\n  }\n});\n\nconst customObjectMessages = defineMessages({\n  object: {\n    id: \"media-browser.add_custom_object\",\n    defaultMessage: \"Custom URL or File\"\n  },\n  scene: {\n    id: \"media-browser.add_custom_scene\",\n    defaultMessage: \"Custom Scene\"\n  },\n  avatar: {\n    id: \"media-browser.add_custom_avatar\",\n    defaultMessage: \"Avatar GLB URL\"\n  }\n});\n\nconst searchPlaceholderMessages = defineMessages({\n  scenes: { id: \"media-browser.search-placeholder.scenes\", defaultMessage: \"Search Scenes...\" },\n  avatars: { id: \"media-browser.search-placeholder.avatars\", defaultMessage: \"Search Avatars...\" },\n  videos: { id: \"media-browser.search-placeholder.videos\", defaultMessage: \"Search for Videos...\" },\n  images: { id: \"media-browser.search-placeholder.images\", defaultMessage: \"Search for Images...\" },\n  youtube: { id: \"media-browser.search-placeholder.youtube\", defaultMessage: \"Search for Youtube videos...\" },\n  gifs: { id: \"media-browser.search-placeholder.gifs\", defaultMessage: \"Search for GIFs...\" },\n  twitch: { id: \"media-browser.search-placeholder.twitch\", defaultMessage: \"Search for Twitch streams...\" },\n  sketchfab: { id: \"media-browser.search-placeholder.sketchfab\", defaultMessage: \"Search Sketchfab Models...\" },\n  default: { id: \"media-browser.search-placeholder.default\", defaultMessage: \"Search...\" }\n});\n\nconst emptyMessages = defineMessages({\n  favorites: {\n    id: \"media-browser.empty.favorites\",\n    defaultMessage: \"You don't have any favorites. Click a ⭐ to add to your favorites.\"\n  },\n  default: {\n    id: \"media-browser.empty.default\",\n    defaultMessage: \"No results. Try entering a new search above.\"\n  }\n});\n\n// TODO: Migrate to use MediaGrid and media specific components like RoomTile\nclass MediaBrowserContainer extends Component {\n  static propTypes = {\n    mediaSearchStore: PropTypes.object,\n    history: PropTypes.object,\n    intl: PropTypes.object,\n    hubChannel: PropTypes.object,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func.isRequired,\n    scene: PropTypes.object.isRequired,\n    store: PropTypes.object.isRequired\n  };\n\n  state = { query: \"\", facets: [], showNav: true, selectNextResult: false, clearStashedQueryOnClose: false };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStoreAndHistoryState(props);\n    this.props.mediaSearchStore.addEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.addEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  componentDidMount() {}\n\n  componentWillUnmount() {\n    this.props.mediaSearchStore.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.removeEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  storeUpdated = () => {\n    const newState = this.getStoreAndHistoryState(this.props);\n    this.setState(newState);\n\n    if (this.state.selectNextResult) {\n      if (newState.result && newState.result.entries.length > 0) {\n        this.selectEntry(newState.result.entries[0]);\n      } else {\n        this.close();\n      }\n    }\n  };\n\n  sourceChanged = () => {\n    if (this.inputRef && !isMobile && !isMobileVR) {\n      this.inputRef.focus();\n    }\n  };\n\n  getUrlSource = searchParams =>\n    searchParams.get(\"media_source\") || sluglessPath(this.props.history.location).substring(7);\n\n  getStoreAndHistoryState = props => {\n    const searchParams = new URLSearchParams(props.history.location.search);\n    const result = props.mediaSearchStore.result;\n\n    const newState = { result, query: this.state.query || searchParams.get(\"q\") || \"\" };\n    const urlSource = this.getUrlSource(searchParams);\n    newState.showNav = !!(searchParams.get(\"media_nav\") !== \"false\");\n    newState.selectAction = searchParams.get(\"selectAction\") || \"spawn\";\n\n    if (result && result.suggestions && result.suggestions.length > 0) {\n      newState.facets = result.suggestions.map(s => {\n        return { text: s, params: { q: s } };\n      });\n    } else {\n      newState.facets = DEFAULT_FACETS[urlSource] || [];\n    }\n\n    return newState;\n  };\n\n  handleQueryUpdated = (query, forceNow) => {\n    this.setState({ result: null });\n\n    if (this._sendQueryTimeout) {\n      clearTimeout(this._sendQueryTimeout);\n      this._sendQueryTimeout = null;\n    }\n\n    if (forceNow) {\n      this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n    } else {\n      // Don't update search on every keystroke, but buffer for some ms.\n      this._sendQueryTimeout = setTimeout(() => {\n        // Drop filter for now, so entering text drops into \"search all\" mode\n        this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n        this._sendQueryTimeout = null;\n      }, 500);\n    }\n\n    this.setState({ query });\n  };\n\n  handleEntryClicked = (evt, entry) => {\n    evt.preventDefault();\n\n    if (!entry.lucky_query) {\n      this.selectEntry(entry);\n    } else {\n      // Entry has a pointer to another \"i'm feeling lucky\" query -- used for trending videos\n      //\n      // Also, mark the browser to clear the stashed query on close, since this is a temporary\n      // query we are running to get the result we want.\n      this.setState({ clearStashedQueryOnClose: true });\n      this.handleQueryUpdated(entry.lucky_query, true);\n    }\n  };\n\n  onShowSimilar = (id, name) => {\n    this.handleFacetClicked({ params: { similar_to: id, similar_name: name } });\n  };\n\n  selectEntry = entry => {\n    if (!this.props.onMediaSearchResultEntrySelected) return;\n    this.props.onMediaSearchResultEntrySelected(entry, this.state.selectAction);\n    this.close();\n  };\n\n  handleSourceClicked = source => {\n    this.props.mediaSearchStore.sourceNavigate(source);\n  };\n\n  handleFacetClicked = facet => {\n    this.setState({ query: \"\" }, () => {\n      const searchParams = this.getSearchClearedSearchParams(true, true, true);\n\n      for (const [k, v] of Object.entries(facet.params)) {\n        searchParams.set(k, v);\n      }\n\n      pushHistoryPath(this.props.history, this.props.history.location.pathname, searchParams.toString());\n    });\n  };\n\n  getSearchClearedSearchParams = (keepSource, keepNav, keepSelectAction) => {\n    return this.props.mediaSearchStore.getSearchClearedSearchParams(\n      this.props.history.location,\n      keepSource,\n      keepNav,\n      keepSelectAction\n    );\n  };\n\n  pushExitMediaBrowserHistory = (stashLastSearchParams = true) => {\n    this.props.mediaSearchStore.pushExitMediaBrowserHistory(this.props.history, stashLastSearchParams);\n  };\n\n  showCustomMediaDialog = source => {\n    const { scene, store, hubChannel } = this.props;\n    const isAvatarApiType = source === \"avatars\";\n    this.pushExitMediaBrowserHistory(!isAvatarApiType);\n\n    if (source === \"scenes\") {\n      this.props.showNonHistoriedDialog(SceneUrlModalContainer, { hubChannel });\n    } else if (isAvatarApiType) {\n      this.props.showNonHistoriedDialog(AvatarUrlModalContainer, { scene, store });\n    } else {\n      this.props.showNonHistoriedDialog(ObjectUrlModalContainer, { scene });\n    }\n  };\n\n  close = () => {\n    showFullScreenIfWasFullScreen();\n    const urlSource = this.getUrlSource(new URLSearchParams(this.props.history.location.search));\n    this.pushExitMediaBrowserHistory(urlSource !== \"avatars\" && urlSource !== \"favorites\");\n    if (this.state.clearStashedQueryOnClose) {\n      this.props.mediaSearchStore.clearStashedQuery();\n    }\n  };\n\n  handlePager = delta => {\n    this.setState({ result: null });\n    this.props.mediaSearchStore.pageNavigate(delta);\n    this.browserDiv.scrollTop = 0;\n  };\n\n  handleCopyAvatar = (e, entry) => {\n    e.preventDefault();\n\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      async () => {\n        await remixAvatar(entry.id, entry.name);\n        this.handleFacetClicked({ params: { filter: \"my-avatars\" } });\n      },\n      SignInMessages.remixAvatar\n    );\n  };\n\n  handleCopyScene = async (e, entry) => {\n    e.preventDefault();\n\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      async () => {\n        await fetchReticulumAuthenticated(\"/api/v1/scenes\", \"POST\", {\n          parent_scene_id: entry.id\n        });\n        this.handleFacetClicked({ params: { filter: \"my-scenes\" } });\n      },\n      SignInMessages.remixScene\n    );\n  };\n\n  onCreateAvatar = () => {\n    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\n  };\n\n  processThumbnailUrl = (entry, thumbnailWidth, thumbnailHeight) => {\n    if (entry.images.preview.type === \"mp4\") {\n      return proxiedUrlFor(entry.images.preview.url);\n    } else {\n      return scaledThumbnailUrlFor(entry.images.preview.url, thumbnailWidth, thumbnailHeight);\n    }\n  };\n\n  render() {\n    const intl = this.props.intl;\n    const searchParams = new URLSearchParams(this.props.history.location.search);\n    const urlSource = this.getUrlSource(searchParams);\n    const isSceneApiType = urlSource === \"scenes\";\n    const isFavorites = urlSource === \"favorites\";\n    const showCustomOption =\n      !isFavorites && (!isSceneApiType || this.props.hubChannel.canOrWillIfCreator(\"update_hub\"));\n    const entries = (this.state.result && this.state.result.entries) || [];\n    const hideSearch = urlSource === \"favorites\";\n    const showEmptyStringOnNoResult = urlSource !== \"avatars\" && urlSource !== \"scenes\";\n\n    const facets = this.state.facets && this.state.facets.length > 0 ? this.state.facets : undefined;\n\n    // Don't render anything if we just did a feeling lucky query and are waiting on result.\n    if (this.state.selectNextResult) return <div />;\n    const handleCustomClicked = urlSource => {\n      const isAvatarApiType = urlSource === \"avatars\";\n      if (isAvatarApiType) {\n        this.showCustomMediaDialog(urlSource);\n      } else {\n        this.props.performConditionalSignIn(\n          () => !isSceneApiType || this.props.hubChannel.can(\"update_hub\"),\n          () => this.showCustomMediaDialog(urlSource),\n          SignInMessages.changeScene\n        );\n      }\n    };\n\n    const activeFilter =\n      searchParams.get(\"filter\") || (searchParams.get(\"similar_to\") && \"similar\") || (!searchParams.get(\"q\") && \"\");\n\n    const meta = this.state.result && this.state.result.meta;\n    const hasNext = !!(meta && meta.next_cursor);\n    const hasPrevious = !!searchParams.get(\"cursor\");\n\n    const customObjectType =\n      this.state.result && isSceneApiType ? \"scene\" : urlSource === \"avatars\" ? \"avatar\" : \"object\";\n\n    let searchDescription;\n\n    if (!hideSearch && urlSource !== \"scenes\" && urlSource !== \"avatars\" && urlSource !== \"favorites\") {\n      searchDescription = (\n        <>\n          {poweredByMessages[urlSource] ? intl.formatMessage(poweredByMessages[urlSource]) : \"\"}\n          {poweredByMessages[urlSource] && PRIVACY_POLICY_LINKS[urlSource] ? \" | \" : \"\"}\n          {PRIVACY_POLICY_LINKS[urlSource] && (\n            <a href={PRIVACY_POLICY_LINKS[urlSource]} target=\"_blank\" rel=\"noreferrer noopener\">\n              <FormattedMessage id=\"media-browser.privacy_policy\" defaultMessage=\"Privacy Policy\" />\n            </a>\n          )}\n        </>\n      );\n    } else if (urlSource === \"scenes\") {\n      searchDescription = (\n        <>\n          {configs.feature(\"enable_spoke\") && (\n            <>\n              {intl.formatMessage(poweredByMessages.scenes, {\n                editorName: (\n                  <a href=\"/spoke\" target=\"_blank\" rel=\"noreferrer noopener\">\n                    {configs.translation(\"editor-name\")}\n                  </a>\n                )\n              })}\n            </>\n          )}\n          {configs.feature(\"enable_spoke\") && configs.feature(\"show_issue_report_link\") && \" | \"}\n          {configs.feature(\"show_issue_report_link\") && (\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href={configs.link(\"issue_report\", \"https://hubs.mozilla.com/docs/help.html\")}\n            >\n              <FormattedMessage id=\"media-browser.report-issue\" defaultMessage=\"Report Issue\" />\n            </a>\n          )}\n        </>\n      );\n    }\n\n    return (\n      <MediaBrowser\n        browserRef={r => (this.browserDiv = r)}\n        onClose={this.close}\n        searchInputRef={r => (this.inputRef = r)}\n        autoFocusSearch={!isMobile && !isMobileVR}\n        query={this.state.query}\n        onChangeQuery={e => this.handleQueryUpdated(e.target.value)}\n        onSearchKeyDown={e => {\n          if (e.key === \"Enter\" && e.ctrlKey) {\n            if (entries.length > 0 && !this._sendQueryTimeout) {\n              this.handleEntryClicked(e, entries[0]);\n            } else if (this.state.query.trim() !== \"\") {\n              this.handleQueryUpdated(this.state.query, true);\n              this.setState({ selectNextResult: true });\n            } else {\n              this.close();\n            }\n          } else if (e.key === \"Escape\" || (e.key === \"Enter\" && isMobile)) {\n            e.target.blur();\n          }\n        }}\n        onClearSearch={() => this.handleQueryUpdated(\"\", true)}\n        mediaSources={urlSource === \"favorites\" ? undefined : SOURCES}\n        selectedSource={urlSource}\n        onSelectSource={this.handleSourceClicked}\n        activeFilter={activeFilter}\n        facets={facets}\n        onSelectFacet={this.handleFacetClicked}\n        searchPlaceholder={\n          searchPlaceholderMessages[urlSource]\n            ? intl.formatMessage(searchPlaceholderMessages[urlSource])\n            : intl.formatMessage(searchPlaceholderMessages.default)\n        }\n        searchDescription={searchDescription}\n        headerRight={\n          showCustomOption && (\n            <IconButton lg onClick={() => handleCustomClicked(urlSource)}>\n              {[\"scenes\", \"avatars\"].includes(urlSource) ? <LinkIcon /> : <UploadIcon />}\n              <p>{intl.formatMessage(customObjectMessages[customObjectType])}</p>\n            </IconButton>\n          )\n        }\n        hasNext={hasNext}\n        hasPrevious={hasPrevious}\n        onNextPage={() => this.handlePager(1)}\n        onPreviousPage={() => this.handlePager(-1)}\n        noResultsMessage={\n          emptyMessages[urlSource]\n            ? intl.formatMessage(emptyMessages[urlSource])\n            : intl.formatMessage(emptyMessages.default)\n        }\n      >\n        {this.props.mediaSearchStore.isFetching ||\n        this._sendQueryTimeout ||\n        entries.length > 0 ||\n        !showEmptyStringOnNoResult ? (\n          <>\n            {urlSource === \"avatars\" && (\n              <CreateTile\n                type=\"avatar\"\n                onClick={this.onCreateAvatar}\n                label={<FormattedMessage id=\"media-browser.create-avatar\" defaultMessage=\"Create Avatar\" />}\n              />\n            )}\n            {urlSource === \"scenes\" &&\n              configs.feature(\"enable_spoke\") && (\n                <CreateTile\n                  as=\"a\"\n                  href=\"/spoke/new\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  type=\"scene\"\n                  label={\n                    <FormattedMessage\n                      id=\"media-browser.create-scene\"\n                      defaultMessage=\"Create Scene with {editorName}\"\n                      values={{ editorName: configs.translation(\"editor-name\") }}\n                    />\n                  }\n                />\n              )}\n            {entries.map((entry, idx) => {\n              const isAvatar = entry.type === \"avatar\" || entry.type === \"avatar_listing\";\n              const isScene = entry.type === \"scene\" || entry.type === \"scene_listing\";\n              const onShowSimilar =\n                entry.type === \"avatar_listing\"\n                  ? e => {\n                      e.preventDefault();\n                      this.onShowSimilar(entry.id, entry.name);\n                    }\n                  : undefined;\n\n              let onEdit;\n\n              if (entry.type === \"avatar\") {\n                onEdit = e => {\n                  e.preventDefault();\n                  pushHistoryState(this.props.history, \"overlay\", \"avatar-editor\", { avatarId: entry.id });\n                };\n              } else if (entry.type === \"scene\") {\n                onEdit = e => {\n                  e.preventDefault();\n                  const spokeProjectUrl = getReticulumFetchUrl(`/spoke/projects/${entry.project_id}`);\n                  window.open(spokeProjectUrl);\n                };\n              }\n\n              let onCopy;\n\n              if (isAvatar) {\n                onCopy = e => this.handleCopyAvatar(e, entry);\n              } else if (isScene) {\n                onCopy = e => this.handleCopyScene(e, entry);\n              }\n\n              return (\n                <MediaTile\n                  key={`${entry.id}_${idx}`}\n                  entry={entry}\n                  processThumbnailUrl={this.processThumbnailUrl}\n                  onClick={e => this.handleEntryClicked(e, entry)}\n                  onEdit={onEdit}\n                  onShowSimilar={onShowSimilar}\n                  onCopy={onCopy}\n                />\n              );\n            })}\n          </>\n        ) : null}\n      </MediaBrowser>\n    );\n  }\n}\n\nexport default injectIntl(MediaBrowserContainer);\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// this component is currently just being used for its componentDidMount\n// TODO migrate render from ui-root.js renderEntryStartPanel()\nexport default class EntryStartPanel extends Component {\n  static propTypes = {\n    entering: PropTypes.bool,\n    onEnteringCanceled: PropTypes.func\n  };\n\n  componentDidMount() {\n    if (this.props.entering) {\n      this.props.onEnteringCanceled();\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { defineMessage, FormattedMessage, injectIntl } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { upload } from \"../utils/media-utils\";\nimport { ensureAvatarMaterial } from \"../utils/avatar-utils\";\n\nimport AvatarPreview from \"./avatar-preview\";\nimport styles from \"../assets/stylesheets/avatar-editor.scss\";\n\nconst delistAvatarInfoMessage = defineMessage({\n  id: \"avatar-editor.delist-avatar-info\",\n  defaultMessage:\n    \"Other users already using this avatar will still be able to use it, but it will be removed from 'My Avatars' and search results.\"\n});\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nconst defaultEditors = [\n  {\n    name: \"Quilt\",\n    url: \"https://tryquilt.io/?gltf=$AVATAR_GLTF\"\n  }\n];\nconst useAllowedEditors = true;\nconst allowedEditors = [\n  ...defaultEditors,\n  {\n    name: \"Skindex Editor\",\n    url: \"https://www.minecraftskins.com/skin-editor\"\n  },\n  {\n    name: \"MinecraftSkins.net Editor\",\n    url: \"https://www.minecraftskins.net/skineditor\"\n  }\n];\n\nconst fetchAvatar = async avatarId => {\n  const { avatars } = await fetchReticulumAuthenticated(`${AVATARS_API}/${avatarId}`);\n  return avatars[0];\n};\n\n// GLTFLoader plugin for splitting glTF and bin from glb.\nclass GLTFBinarySplitterPlugin {\n  constructor(parser) {\n    this.parser = parser;\n    this.gltf = null;\n    this.bin = null;\n  }\n\n  beforeRoot() {\n    const parser = this.parser;\n    const { body } = parser.extensions.KHR_binary_glTF;\n    const content = JSON.stringify(ensureAvatarMaterial(parser.json));\n\n    this.gltf = new File([content], \"file.gltf\", {\n      type: \"model/gltf\"\n    });\n    this.bin = new File([body], \"file.bin\", {\n      type: \"application/octet-stream\"\n    });\n\n    // This plugin just wants to split gltf and bin from glb and\n    // doesn't want to start the parse. But glTF loader plugin API\n    // doesn't have an ability to cancel the parse. So overriding\n    // parser.json with very light glTF data as workaround.\n    parser.json = { asset: { version: \"2.0\" } };\n  }\n\n  afterRoot(result) {\n    result.files = result.files || {};\n    result.files.gltf = this.gltf;\n    result.files.bin = this.bin;\n  }\n}\n\nclass AvatarEditor extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    onSave: PropTypes.func,\n    onClose: PropTypes.func,\n    hideDelete: PropTypes.bool,\n    debug: PropTypes.bool,\n    className: PropTypes.string,\n    intl: PropTypes.object.isRequired\n  };\n\n  state = {\n    baseAvatarResults: [],\n    editorLinks: defaultEditors,\n    previewGltfUrl: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.inputFiles = {};\n  }\n\n  componentDidMount = async () => {\n    if (this.props.avatarId) {\n      const avatar = await fetchAvatar(this.props.avatarId);\n      avatar.creatorAttribution = (avatar.attributions && avatar.attributions.creator) || \"\";\n      Object.assign(this.inputFiles, avatar.files);\n      this.setState({ avatar, previewGltfUrl: avatar.base_gltf_url });\n    } else {\n      const { entries } = await fetchReticulumAuthenticated(`/api/v1/media/search?filter=base&source=avatar_listings`);\n      const baseAvatarResults = entries.map(e => ({ id: e.id, name: e.name, gltfs: e.gltfs, images: e.images }));\n      if (baseAvatarResults.length) {\n        const randomAvatarResult = baseAvatarResults[Math.floor(Math.random() * baseAvatarResults.length)];\n        this.setState({\n          baseAvatarResults,\n          avatar: {\n            name: \"My Avatar\",\n            files: {},\n            base_gltf_url: randomAvatarResult.gltfs.base,\n            parent_avatar_listing_id: randomAvatarResult.id\n          },\n          previewGltfUrl: randomAvatarResult.gltfs.avatar\n        });\n      } else {\n        this.setState({\n          avatar: {\n            name: \"My Avatar\",\n            files: {}\n          }\n        });\n      }\n    }\n  };\n\n  createOrUpdateAvatar = avatar => {\n    return fetchReticulumAuthenticated(\n      avatar.avatar_id ? `${AVATARS_API}/${avatar.avatar_id}` : AVATARS_API,\n      avatar.avatar_id ? \"PUT\" : \"POST\",\n      { avatar }\n    ).then(({ avatars }) => avatars[0]);\n  };\n\n  uploadAvatar = async e => {\n    e.preventDefault();\n\n    if (this.inputFiles.glb && this.inputFiles.glb instanceof File) {\n      const gltfLoader = new THREE.GLTFLoader().register(parser => new GLTFBinarySplitterPlugin(parser));\n      const gltfUrl = URL.createObjectURL(this.inputFiles.glb);\n      const onProgress = console.log;\n\n      await new Promise((resolve, reject) => {\n        // GLTFBinarySplitterPlugin saves gltf and bin in gltf.files\n        gltfLoader.load(\n          gltfUrl,\n          result => {\n            this.inputFiles.gltf = result.files.gltf;\n            this.inputFiles.bin = result.files.bin;\n            resolve(result);\n          },\n          onProgress,\n          reject\n        );\n      });\n\n      URL.revokeObjectURL(gltfUrl);\n    }\n\n    this.inputFiles.thumbnail = new File([await this.preview.snapshot()], \"thumbnail.png\", {\n      type: \"image/png\"\n    });\n\n    const filesToUpload = [\"gltf\", \"bin\", \"base_map\", \"emissive_map\", \"normal_map\", \"orm_map\", \"thumbnail\"].filter(\n      k => this.inputFiles[k] === null || this.inputFiles[k] instanceof File\n    );\n\n    this.setState({ uploading: true });\n\n    const fileUploads = await Promise.all(filesToUpload.map(f => this.inputFiles[f] && upload(this.inputFiles[f])));\n    const avatar = {\n      ...this.state.avatar,\n      attributions: {\n        creator: this.state.avatar.creatorAttribution\n      },\n      files: fileUploads\n        .map((resp, i) => [filesToUpload[i], resp && [resp.file_id, resp.meta.access_token, resp.meta.promotion_token]])\n        .reduce((o, [k, v]) => ({ ...o, [k]: v }), {})\n    };\n\n    await this.createOrUpdateAvatar(avatar);\n\n    this.setState({ uploading: false });\n\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  deleteAvatar = async e => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(`${AVATARS_API}/${this.state.avatar.avatar_id}`, \"DELETE\");\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  fileField = (name, label, accept, disabled = false, title) => (\n    <div className={classNames(\"file-input-row\", { disabled })} key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\" />\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.previewGltfUrl);\n          const previewGltfUrl = URL.createObjectURL(this.inputFiles.glb);\n          this.setState({\n            previewGltfUrl,\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState(\n              {\n                avatar: {\n                  ...this.state.avatar,\n                  files: {\n                    ...this.state.avatar.files,\n                    [name]: null\n                  }\n                }\n              },\n              () => this.setState({ previewGltfUrl: this.getPreviewUrl() })\n            );\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  mapField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\">\n          {this.state.avatar.files[name] ? (\n            <img src={this.state.avatar.files[name]} />\n          ) : (\n            <FontAwesomeIcon icon={faCloudUploadAlt} />\n          )}\n        </div>\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.avatar.files[name]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState({\n              avatar: {\n                ...this.state.avatar,\n                files: {\n                  ...this.state.avatar.files,\n                  [name]: null\n                }\n              }\n            });\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  textField = (name, placeholder, disabled, required) => (\n    <div className=\"text-field-container\">\n      <label htmlFor={`#avatar-${name}`}>{placeholder}</label>\n      <input\n        id={`avatar-${name}`}\n        type=\"text\"\n        disabled={disabled}\n        required={required}\n        placeholder={placeholder}\n        className=\"text-field\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  // Return the gltf for the selected base avatar, the locally modified glb, or the avatar's base_gltf_url\n  getPreviewUrl = baseSid => {\n    if (baseSid) {\n      const avatarResult = this.state.baseAvatarResults.find(a => a.id === baseSid);\n      if (avatarResult) return avatarResult.gltfs.avatar;\n    }\n\n    return this.inputFiles.glb ? URL.createObjectURL(this.inputFiles.glb) : this.state.avatar.base_gltf_url;\n  };\n\n  selectListingField = (propName, placeholder) => (\n    <div className=\"select-container\">\n      <label htmlFor={`#avatar-${propName}`}>{placeholder}</label>\n      <select\n        id={`avatar-${propName}`}\n        value={this.state.avatar[propName] || \"\"}\n        onChange={async e => {\n          const sid = e.target.value;\n          this.setState({ avatar: { ...this.state.avatar, [propName]: sid }, previewGltfUrl: this.getPreviewUrl(sid) });\n        }}\n        placeholder={placeholder}\n        className=\"select\"\n      >\n        {this.state.baseAvatarResults.map(a => (\n          <option key={a.id} value={a.id}>\n            {a.name}\n          </option>\n        ))}\n        <option value=\"\">\n          <FormattedMessage id=\"avatar-editor.custom-avatar-option\" defaultMessage=\"Custom GLB...\" />\n        </option>\n      </select>\n      <img\n        className=\"arrow\"\n        src=\"../assets/images/dropdown_arrow.png\"\n        srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n      />\n    </div>\n  );\n\n  selectListingGrid = (propName, placeholder) => (\n    <div className=\"select-grid-container\">\n      <label htmlFor={`#avatar-${propName}`}>{placeholder}</label>\n      <div className=\"select-grid\">\n        {this.state.baseAvatarResults.map(a => (\n          <div\n            onClick={() =>\n              this.setState({\n                avatar: { ...this.state.avatar, [propName]: a.id },\n                previewGltfUrl: this.getPreviewUrl(a.id)\n              })\n            }\n            key={a.id}\n            className={classNames(\"item\", { selected: a.id === this.state.avatar[propName] })}\n            style={{ paddingBottom: `${(a.images.preview.width / a.images.preview.height) * 100}%` }}\n          >\n            <img src={a.images.preview.url} />\n          </div>\n        ))}\n      </div>\n      <input\n        id=\"avatar-file_glb\"\n        type=\"file\"\n        accept=\"model/gltf+binary,.glb\"\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[\"glb\"] = file;\n          URL.revokeObjectURL(this.state.avatar.files[\"glb\"]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              [propName]: \"\",\n              files: {\n                ...this.state.avatar.files,\n                glb: URL.createObjectURL(file)\n              }\n            },\n            previewGltfUrl: this.getPreviewUrl(\"\")\n          });\n        }}\n      />\n      <label\n        htmlFor=\"avatar-file_glb\"\n        className={classNames(\"item\", \"custom\", { selected: \"\" === this.state.avatar[propName] })}\n      >\n        <FormattedMessage\n          id=\"avatar-editor.upload-custom-avatar-button\"\n          defaultMessage=\"{icon} Custom GLB\"\n          values={{ icon: <FontAwesomeIcon icon={faCloudUploadAlt} /> }}\n        />\n      </label>\n    </div>\n  );\n\n  textarea = (name, placeholder, disabled) => (\n    <div>\n      <textarea\n        id={`avatar-${name}`}\n        disabled={disabled}\n        placeholder={placeholder}\n        className=\"textarea\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  checkbox = (name, title, children, disabled) => (\n    <div className=\"checkbox-container\" title={title}>\n      <input\n        id={`avatar-${name}`}\n        type=\"checkbox\"\n        className=\"checkbox\"\n        disabled={disabled}\n        checked={!!this.state.avatar[name]}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.checked } })}\n      />\n      <label htmlFor={`#avatar-${name}`}>{children}</label>\n    </div>\n  );\n\n  handleGltfLoaded = gltf => {\n    const ext = gltf.parser.json.extensions && gltf.parser.json.extensions[\"MOZ_hubs_avatar\"];\n    let editorLinks = (ext && ext.editors) || defaultEditors;\n    if (useAllowedEditors) {\n      editorLinks = editorLinks.filter(e => allowedEditors.some(w => w.name === e.name && w.url === e.url));\n    }\n    this.setState({ editorLinks });\n  };\n\n  render() {\n    const { debug, intl } = this.props;\n    const { avatar } = this.state;\n\n    return (\n      <div className={classNames(styles.avatarEditor, this.props.className)}>\n        {this.props.onClose && (\n          <a className=\"close-button\" onClick={this.props.onClose}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        )}\n        {!this.state.avatar ? (\n          <div className=\"loader\">\n            <div className=\"loader-center\" />\n          </div>\n        ) : (\n          <form onSubmit={this.uploadAvatar} className=\"center\">\n            {this.textField(\"name\", \"Name\", false, true)}\n            <div className=\"split\">\n              <div className=\"form-body\">\n                {debug &&\n                  this.textField(\n                    \"avatar_id\",\n                    intl.formatMessage({ id: \"avatar-editor.field.avatar-id\", defaultMessage: \"Avatar ID\" }),\n                    true\n                  )}\n                {debug &&\n                  this.textField(\n                    \"parent_avatar_id\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.parent-avatar-id\",\n                      defaultMessage: \"Parent Avatar ID\"\n                    })\n                  )}\n                {debug &&\n                  this.textField(\n                    \"parent_avatar_listing_id\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.parent-avatar-listing-id\",\n                      defaultMessage: \"Parent Avatar Listing ID\"\n                    })\n                  )}\n                {debug &&\n                  this.textarea(\n                    \"description\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.description\",\n                      defaultMessage: \"Description\"\n                    })\n                  )}\n                {!this.props.avatarId &&\n                  this.selectListingGrid(\n                    \"parent_avatar_listing_id\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.model\",\n                      defaultMessage: \"Model\"\n                    })\n                  )}\n\n                <label>\n                  <FormattedMessage id=\"avatar-editor.skin-section\" defaultMessage=\"Skin\" />\n                </label>\n                {this.mapField(\n                  \"base_map\",\n                  intl.formatMessage({\n                    id: \"avatar-editor.field.base-map\",\n                    defaultMessage: \"Base Map\"\n                  }),\n                  \"image/*\"\n                )}\n                <details>\n                  <summary>\n                    <FormattedMessage id=\"avatar-editor.advanced-section\" defaultMessage=\"Advanced\" />\n                  </summary>\n                  {this.mapField(\n                    \"emissive_map\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.emissive-map\",\n                      defaultMessage: \"Emissive Map\"\n                    }),\n                    \"image/*\"\n                  )}\n                  {this.mapField(\n                    \"normal_map\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.normal-map\",\n                      defaultMessage: \"Normal Map\"\n                    }),\n                    \"image/*\"\n                  )}\n                  {this.mapField(\n                    \"orm_map\",\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.orm-map\",\n                      defaultMessage: \"ORM Map\"\n                    }),\n                    \"image/*\",\n                    false,\n                    intl.formatMessage({\n                      id: \"avatar-editor.field.orm-map-info\",\n                      defaultMessage: \"Occlussion (r), Roughness (g), Metallic (b)\"\n                    })\n                  )}\n                </details>\n\n                <label>\n                  <FormattedMessage id=\"avatar-editor.share-settings\" defaultMessage=\"Share Settings\" />\n                </label>\n                {this.checkbox(\n                  \"allow_promotion\",\n                  intl.formatMessage(\n                    {\n                      id: \"avatar-editor.field.allow-promotion\",\n                      defaultMessage: \"Allow {companyName} to promote your avatar, and show it in search results.\"\n                    },\n                    { companyName: configs.translation(\"company-name\") }\n                  ),\n                  <span>\n                    <FormattedMessage\n                      id=\"avatar-editor.field.allow-promotion-checkbox\"\n                      defaultMessage=\"Allow <a>Promotion</a>\"\n                      values={{\n                        a: chunks => (\n                          <a\n                            href={configs.link(\"promotion\", \"https://github.com/mozilla/hubs/blob/master/PROMOTION.md\")}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                          >\n                            {chunks}\n                          </a>\n                        )\n                      }}\n                    />\n                  </span>\n                )}\n                {this.checkbox(\n                  \"allow_remixing\",\n                  intl.formatMessage({\n                    id: \"avatar-editor.field.allow-remixing\",\n                    defaultMessage: \"Allow others to edit and re-publish your avatar as long as they give you credit.\"\n                  }),\n                  <span>\n                    <FormattedMessage\n                      id=\"avatar-editor.field.allow-remixing-checkbox\"\n                      defaultMessage=\"Allow <a>Remixing</a> <license>(under <licenselink>CC-BY 3.0</licenselink>)</license>\"\n                      values={{\n                        a: chunks => (\n                          <a\n                            href={configs.link(\"remixing\", \"https://github.com/mozilla/hubs/blob/master/REMIXING.md\")}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                          >\n                            {chunks}\n                          </a>\n                        ),\n                        license: chunks => <span className=\"license\">{chunks}</span>,\n                        licenselink: chunks => (\n                          <a\n                            href=\"https://creativecommons.org/licenses/by/3.0/\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                          >\n                            {chunks}\n                          </a>\n                        )\n                      }}\n                    />\n                  </span>\n                )}\n                {this.textField(\n                  \"creatorAttribution\",\n                  intl.formatMessage({\n                    id: \"avatar-editor.field.creator-attribution\",\n                    defaultMessage: \"Attribution (optional)\"\n                  }),\n                  false,\n                  false\n                )}\n                {/* {this.mapField(\"ao_map\", \"AO Map\", \"images/\\*\", true)} */}\n                {/* {this.mapField(\"metallic_map\", \"Metallic Map\", \"image/\\*\", true)} */}\n                {/* {this.mapField(\"roughness_map\", \"Roughness Map\", \"image/\\*\", true)} */}\n              </div>\n              <AvatarPreview\n                className=\"preview\"\n                avatarGltfUrl={this.state.previewGltfUrl}\n                onGltfLoaded={this.handleGltfLoaded}\n                {...this.inputFiles}\n                ref={p => (this.preview = p)}\n              />\n            </div>\n            <div className=\"info\">\n              <IfFeature name=\"show_avatar_editor_link\">\n                <p>\n                  <FormattedMessage\n                    id=\"avatar-editor.external-editor-info\"\n                    defaultMessage=\"Create a custom skin for this avatar:\"\n                  />{\" \"}\n                  {this.state.editorLinks.map(({ name, url }) => (\n                    <a\n                      key={name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href={url.replace(\"$AVATAR_GLTF\", encodeURIComponent(this.state.previewGltfUrl))}\n                    >\n                      {name}\n                    </a>\n                  ))}\n                </p>\n              </IfFeature>\n              <IfFeature name=\"show_avatar_pipelines_link\">\n                <p>\n                  <FormattedMessage\n                    id=\"avatar-editor.info\"\n                    defaultMessage=\"Find more custom avatar resources <a>here</a>\"\n                    values={{\n                      a: chunks => (\n                        <a\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          href=\"https://github.com/MozillaReality/hubs-avatar-pipelines\"\n                        >\n                          {chunks}\n                        </a>\n                      )\n                    }}\n                  />\n                </p>\n              </IfFeature>\n            </div>\n            <div>\n              <button disabled={this.state.uploading} className=\"form-submit\" type=\"submit\">\n                {this.state.uploading ? (\n                  <FormattedMessage id=\"avatar-editor.submit-button.uploading\" defaultMessage=\"Uploading...\" />\n                ) : (\n                  <FormattedMessage id=\"avatar-editor.submit-button.save\" defaultMessage=\"Save\" />\n                )}\n              </button>\n            </div>\n            {!this.props.hideDelete && (\n              <div className=\"delete-avatar\">\n                {this.state.confirmDelete ? (\n                  <span>\n                    <FormattedMessage\n                      id=\"avatar-editor.delete-avatar.confirmation-prompt\"\n                      defaultMessage=\"Are you sure?\"\n                    />{\" \"}\n                    <a onClick={this.deleteAvatar}>\n                      <FormattedMessage id=\"avatar-editor.delete-avatar.confirm\" defaultMessage=\"yes\" />\n                    </a>{\" \"}\n                    /{\" \"}\n                    <a onClick={() => this.setState({ confirmDelete: false })}>\n                      <FormattedMessage id=\"avatar-editor.delete-avatar.cancel\" defaultMessage=\"no\" />\n                    </a>\n                  </span>\n                ) : (\n                  <a\n                    onClick={() => this.setState({ confirmDelete: true })}\n                    title={avatar.has_listings ? intl.formatMessage(delistAvatarInfoMessage) : \"\"}\n                  >\n                    {avatar.has_listings ? (\n                      <FormattedMessage id=\"avatar-editor.delist-avatar-button\" defaultMessage=\"Delist Avatar\" />\n                    ) : (\n                      <FormattedMessage id=\"avatar-editor.delete-avatar-button\" defaultMessage=\"Delete Avatar\" />\n                    )}\n                  </a>\n                )}\n              </div>\n            )}\n          </form>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarEditor);\n","import { EventEmitter } from \"eventemitter3\";\nimport { MediaDevicesEvents, PermissionStatus, MediaDevices, NO_DEVICE_ID } from \"./media-devices-utils\";\nimport { detectOS, detect } from \"detect-browser\";\nimport { isIOS as detectIOS } from \"./is-mobile\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isIOS = detectIOS();\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nconst audioOutputSelectEnabled = \"sinkId\" in HTMLMediaElement.prototype;\n\n// Subsequest calls to getUserMedia throw an exception and return a muted track so we disable mic selection for the moment.\n// Safari 15+\nconst detectedOS = detectOS(navigator.userAgent);\nconst browser = detect();\nconst audioInputSelectEnabled = !([\"iOS\", \"Mac OS\"].includes(detectedOS) && [\"safari\", \"ios\"].includes(browser.name));\n\nexport default class MediaDevicesManager extends EventEmitter {\n  constructor(scene, store, audioSystem) {\n    super();\n\n    this._scene = scene;\n    this._store = store;\n    this._micDevices = [];\n    this._videoDevices = [];\n    this._outputDevices = [];\n    this._deviceId = null;\n    this._audioTrack = null;\n    this.audioSystem = audioSystem;\n    this._mediaStream = audioSystem.outboundStream;\n    this._permissionsStatus = {\n      [MediaDevices.MICROPHONE]: PermissionStatus.PROMPT,\n      [MediaDevices.SPEAKERS]: PermissionStatus.PROMPT,\n      [MediaDevices.CAMERA]: PermissionStatus.PROMPT,\n      [MediaDevices.SCREEN]: PermissionStatus.PROMPT\n    };\n\n    this.onDeviceChange = this.onDeviceChange.bind(this);\n    navigator.mediaDevices.addEventListener(\"devicechange\", this.onDeviceChange);\n  }\n\n  static get isAudioOutputSelectEnabled() {\n    return audioOutputSelectEnabled;\n  }\n\n  static get isAudioInputSelectEnabled() {\n    return audioInputSelectEnabled;\n  }\n\n  get deviceId() {\n    return this._deviceId;\n  }\n\n  set deviceId(deviceId) {\n    this._deviceId = deviceId;\n  }\n\n  get audioTrack() {\n    return this._audioTrack;\n  }\n\n  set audioTrack(audioTrack) {\n    this._audioTrack = audioTrack;\n  }\n\n  get defaultInputDeviceId() {\n    return this._micDevices.length > 0 ? this._micDevices[0].value : NO_DEVICE_ID;\n  }\n\n  get defaultOutputDeviceId() {\n    return this._outputDevices.length > 0 ? this._outputDevices[0].value : NO_DEVICE_ID;\n  }\n\n  get defaultVideoDeviceId() {\n    return this._videoDevices.length > 0 ? this._videoDevices[0].value : NO_DEVICE_ID;\n  }\n\n  get micDevicesOptions() {\n    return this._micDevices.length > 0 ? this._micDevices : [{ value: NO_DEVICE_ID, label: \"None\" }];\n  }\n\n  get videoDevicesOptions() {\n    return this._videoDevices.length > 0 ? this._videoDevices : [{ value: NO_DEVICE_ID, label: \"None\" }];\n  }\n\n  get outputDevicesOptions() {\n    return this._outputDevices.length > 0 ? this._outputDevices : [{ value: NO_DEVICE_ID, label: \"None\" }];\n  }\n\n  get mediaStream() {\n    return this._mediaStream;\n  }\n\n  set mediaStream(mediaStream) {\n    this._mediaStream = mediaStream;\n  }\n\n  get selectedMicLabel() {\n    return this.micLabelForAudioTrack(this.audioTrack);\n  }\n\n  get selectedMicDeviceId() {\n    return MediaDevicesManager.isAudioInputSelectEnabled &&\n      this._permissionsStatus[MediaDevices.MICROPHONE] !== PermissionStatus.GRANTED\n      ? NO_DEVICE_ID\n      : this.deviceIdForMicDeviceLabel(this.selectedMicLabel);\n  }\n\n  get selectedSpeakersDeviceId() {\n    const { preferredSpeakers } = this._store.state.preferences;\n    const exists = this._outputDevices.some(device => {\n      return device.value === preferredSpeakers;\n    });\n    return exists ? preferredSpeakers : this.defaultOutputDeviceId;\n  }\n\n  get isMicShared() {\n    return this.audioTrack !== null && this.getPermissionsStatus(MediaDevices.MICROPHONE) === PermissionStatus.GRANTED;\n  }\n\n  get isVideoShared() {\n    return this._mediaStream?.getVideoTracks().length > 0;\n  }\n\n  get isWebcamShared() {\n    return this._mediaStream.getVideoTracks().some(track => {\n      track[\"_hubs_contentHint\"] === MediaDevices.CAMERA;\n    });\n  }\n\n  get isScreenShared() {\n    return this._mediaStream.getVideoTracks().some(track => {\n      track[\"_hubs_contentHint\"] === MediaDevices.SCREEN;\n    });\n  }\n\n  set micEnabled(enabled) {\n    APP.dialog.enableMicrophone(enabled);\n  }\n\n  get isMicEnabled() {\n    return APP.dialog.isMicEnabled;\n  }\n\n  toggleMic() {\n    APP.dialog.toggleMicrophone();\n  }\n\n  getPermissionsStatus(type) {\n    return this._permissionsStatus[type];\n  }\n\n  onDeviceChange = () => {\n    this.fetchMediaDevices().then(() => {\n      this.changeAudioOutput(this.selectedSpeakersDeviceId);\n      this.emit(MediaDevicesEvents.DEVICE_CHANGE, null);\n    });\n  };\n\n  updatePermissions() {\n    const micStatus = this._micDevices.length === 0 ? PermissionStatus.PROMPT : PermissionStatus.GRANTED;\n    this._permissionsStatus[MediaDevices.MICROPHONE] = micStatus;\n    this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, {\n      mediaDevice: MediaDevices.MICROPHONE,\n      status: micStatus\n    });\n    const videoStatus = this._videoDevices.length === 0 ? PermissionStatus.PROMPT : PermissionStatus.GRANTED;\n    this._permissionsStatus[MediaDevices.CAMERA] = videoStatus;\n    this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, {\n      mediaDevice: MediaDevices.CAMERA,\n      status: videoStatus\n    });\n    const speakersStatus = this._micDevices.length === 0 ? PermissionStatus.PROMPT : PermissionStatus.GRANTED;\n    this._permissionsStatus[MediaDevices.SPEAKERS] = speakersStatus;\n    this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, {\n      mediaDevice: MediaDevices.SPEAKERS,\n      status: speakersStatus\n    });\n  }\n\n  async fetchMediaDevices() {\n    console.log(\"Fetching media devices\");\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        mediaDevices = mediaDevices.filter(d => d.label !== \"\");\n        this._micDevices = mediaDevices\n          .filter(d => d.deviceId !== \"default\" && d.kind === \"audioinput\")\n          .map(d => ({ value: d.deviceId, label: d.label || `Mic Device (${d.deviceId.substring(0, 9)})` }));\n        this._videoDevices = mediaDevices\n          .filter(d => d.deviceId !== \"default\" && d.kind === \"videoinput\")\n          .map(d => ({ value: d.deviceId, label: d.label || `Camera Device (${d.deviceId.substring(0, 9)})` }));\n        if (MediaDevicesManager.isAudioOutputSelectEnabled) {\n          this._outputDevices = mediaDevices\n            .filter(d => d.deviceId !== \"default\" && d.kind === \"audiooutput\")\n            .map(d => ({ value: d.deviceId, label: d.label || `Audio Output (${d.deviceId.substring(0, 9)})` }));\n        }\n        this.updatePermissions();\n        resolve();\n      });\n    });\n  }\n\n  changeAudioOutput(deviceId) {\n    this._store.update({ preferences: { preferredSpeakers: deviceId } });\n  }\n\n  async startMicShare({ deviceId, unmute, updatePrefs = true }) {\n    if (this.isMicShared && this.selectedMicDeviceId === deviceId) return;\n    console.log(\"Starting microphone sharing\");\n\n    if (!deviceId) {\n      const { preferredMic } = this._store.state.preferences;\n      deviceId = preferredMic !== NO_DEVICE_ID ? preferredMic : undefined;\n    }\n    let constraints = { audio: {} };\n    if (deviceId) {\n      constraints = { audio: { deviceId: { ideal: [deviceId] } } };\n    }\n\n    const result = await this._startMicShare(constraints);\n\n    await this.fetchMediaDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.audioTrack) {\n      const micDeviceId = this.deviceIdForMicDeviceLabel(this.micLabelForAudioTrack(this.audioTrack));\n      if (micDeviceId) {\n        if (updatePrefs) {\n          this._store.update({\n            preferences: {\n              preferredMic: micDeviceId,\n              preferredSpeakers: this.selectedSpeakersDeviceId\n            }\n          });\n        }\n        console.log(`Selected input device: ${this.micLabelForDeviceId(micDeviceId)}`);\n      }\n    } else {\n      console.log(\"No available audio tracks\");\n    }\n\n    await APP.dialog.setLocalMediaStream(this._mediaStream);\n\n    if (unmute) {\n      APP.dialog.enableMicrophone(true);\n    }\n\n    if (result) {\n      this._permissionsStatus[MediaDevices.MICROPHONE] = PermissionStatus.GRANTED;\n      this._scene.emit(MediaDevicesEvents.MIC_SHARE_STARTED);\n      this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, {\n        mediaDevice: MediaDevices.MICROPHONE,\n        status: PermissionStatus.GRANTED\n      });\n    } else {\n      this._permissionsStatus[MediaDevices.MICROPHONE] = PermissionStatus.DENIED;\n      this._scene.emit(MediaDevicesEvents.MIC_SHARE_ENDED);\n      this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, {\n        mediaDevice: MediaDevices.MICROPHONE,\n        status: PermissionStatus.DENIED\n      });\n    }\n\n    return result;\n  }\n\n  async _startMicShare(constraints = { audio: {} }) {\n    if (this.audioTrack) {\n      this.audioTrack.stop();\n    }\n\n    constraints.audio.echoCancellation = !this._store.state.preferences.disableEchoCancellation;\n    constraints.audio.noiseSuppression = !this._store.state.preferences.disableNoiseSuppression;\n    constraints.audio.autoGainControl = !this._store.state.preferences.disableAutoGainControl;\n\n    try {\n      console.log(\"Adding microphone media stream\");\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      this.audioSystem.addStreamToOutboundAudio(\"microphone\", newStream);\n      this.audioTrack = newStream.getAudioTracks()[0];\n      this.audioTrack.addEventListener(\"ended\", async () => {\n        this._scene.emit(MediaDevicesEvents.MIC_SHARE_ENDED);\n        this.startMicShare({ unmute: this.isMicEnabled });\n      });\n\n      if (/Oculus/.test(navigator.userAgent)) {\n        // HACK Oculus Browser 6 seems to randomly end the microphone audio stream. This re-creates it.\n        // Note the ended event will only fire if some external event ends the stream, not if we call stop().\n        const recreateAudioStream = async () => {\n          console.warn(\n            \"Oculus Browser 6 bug hit: Audio stream track ended without calling stop. Recreating audio stream.\"\n          );\n\n          const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n          this.audioTrack = newStream.getAudioTracks()[0];\n\n          this.audioSystem.addStreamToOutboundAudio(\"microphone\", newStream);\n\n          this._scene.emit(MediaDevicesEvents.MIC_SHARE_STARTED);\n\n          this.audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n        };\n\n        this.audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n      }\n\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      console.error(\"Error during getUserMedia: \", e);\n      this.audioTrack = null;\n      return false;\n    }\n  }\n\n  async stopMicShare() {\n    this.audioSystem.removeStreamFromOutboundAudio(\"microphone\");\n\n    this.audioTrack?.stop();\n    this.audioTrack = null;\n\n    await APP.dialog.setLocalMediaStream(this._mediaStream);\n    APP.dialog.enableMicrophone(false);\n  }\n\n  async startVideoShare({ isDisplayMedia, target, success, error }) {\n    let newStream;\n    let videoTrackAdded = false;\n\n    try {\n      if (isDisplayMedia) {\n        newStream = await navigator.mediaDevices.getDisplayMedia({\n          video: {\n            // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n            // other than your current monitor that has a different aspect ratio.\n            width: 720 * (screen.width / screen.height),\n            height: 720,\n            frameRate: 30\n          },\n          audio: {\n            echoCancellation: window.APP.store.state.preferences.disableEchoCancellation === true ? false : true,\n            noiseSuppression: window.APP.store.state.preferences.disableNoiseSuppression === true ? false : true,\n            autoGainControl: window.APP.store.state.preferences.disableAutoGainControl === true ? false : true\n          }\n        });\n      } else {\n        newStream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: isIOS ? { max: 1280 } : { max: 1280, ideal: 720 },\n            frameRate: 30\n          }\n          //TODO: Capture audio from camera?\n        });\n      }\n\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n      if (videoTracks.length > 0) {\n        videoTrackAdded = true;\n\n        newStream.getVideoTracks().forEach(track => {\n          // Ideally we would use track.contentHint but it seems to be read-only in Chrome so we just add a custom property\n          track[\"_hubs_contentHint\"] = isDisplayMedia ? MediaDevices.SCREEN : MediaDevices.CAMERA;\n          track.addEventListener(\"ended\", async () => {\n            this._scene.emit(MediaDevicesEvents.VIDEO_SHARE_ENDED);\n          });\n          this._mediaStream.addTrack(track);\n        });\n\n        if (newStream && newStream.getAudioTracks().length > 0) {\n          this.audioSystem.addStreamToOutboundAudio(\"screenshare\", newStream);\n        }\n\n        await APP.dialog.setLocalMediaStream(this._mediaStream);\n\n        const mediaDevice = isDisplayMedia ? MediaDevices.SCREEN : MediaDevices.CAMERA;\n        this._permissionsStatus[mediaDevice] = PermissionStatus.GRANTED;\n        this._scene.emit(MediaDevicesEvents.VIDEO_SHARE_STARTED);\n        this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, { mediaDevice, status: PermissionStatus.GRANTED });\n      }\n    } catch (e) {\n      error(e);\n      const mediaDevice = isDisplayMedia ? MediaDevices.SCREEN : MediaDevices.CAMERA;\n      this._permissionsStatus[mediaDevice] = PermissionStatus.DENIED;\n      this._scene.emit(MediaDevicesEvents.VIDEO_SHARE_ENDED);\n      this.emit(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, { mediaDevice, status: PermissionStatus.DENIED });\n      return;\n    }\n\n    success(isDisplayMedia, videoTrackAdded, target);\n  }\n\n  async stopVideoShare() {\n    if (!this._mediaStream) return;\n\n    for (const track of this._mediaStream.getVideoTracks()) {\n      track.stop(); // Stop video track to remove the \"Stop screen sharing\" bar right away.\n      this._mediaStream.removeTrack(track);\n    }\n\n    this.audioSystem.removeStreamFromOutboundAudio(\"screenshare\");\n\n    await APP.dialog.setLocalMediaStream(this._mediaStream);\n  }\n\n  async shouldShowHmdMicWarning() {\n    if (isMobile || AFRAME.utils.device.isMobileVR()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel.match(r));\n  }\n\n  micLabelForAudioTrack(audioTrack) {\n    const label = (audioTrack && audioTrack.label) || \"\";\n    if (label.indexOf(\"Default - \") < 0) {\n      return label;\n    } else {\n      return label.substring(10);\n    }\n  }\n\n  deviceIdForMicDeviceLabel(label) {\n    return this._micDevices.filter(d => d.label === label).map(d => d.value)[0] || this.defaultInputDeviceId;\n  }\n\n  deviceIdForSpeakersDeviceLabel(label) {\n    return this._outputDevices.filter(d => d.label === label).map(d => d.value)[0] || this.defaultOutputDeviceId;\n  }\n\n  micLabelForDeviceId(deviceId) {\n    return this._micDevices.filter(d => d.value === deviceId).map(d => d.label)[0];\n  }\n\n  speakersLabelForDeviceId(deviceId) {\n    return this._outputDevices.filter(d => d.value === deviceId).map(d => d.label)[0];\n  }\n\n  hasHmdMicrophone() {\n    return !!this.state._micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  }\n\n  videoDeviceIdForMicLabel(label) {\n    return this._videoDevices.filter(d => d.label === label).map(d => d.value)[0];\n  }\n\n  videoLabelForDeviceId(deviceId) {\n    return this._videoDevices.filter(d => d.value === deviceId).map(d => d.label)[0];\n  }\n}\n","import React, { memo, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Slider.scss\";\nimport { trackColor } from \"./Slider.scss\";\n\nfunction getLinearGradientCSS(ratio, leftColor, rightColor) {\n  return [\n    \"-webkit-gradient(\",\n    \"linear, \",\n    \"left top, \",\n    \"right top, \",\n    \"color-stop(\" + ratio + \", \" + leftColor + \"), \",\n    \"color-stop(\" + ratio + \", \" + rightColor + \")\",\n    \")\"\n  ].join(\"\");\n}\n\nfunction updateGradient(el, min, max) {\n  if (el) {\n    const ratio = ((parseFloat(el.value) - min) / (max - min)).toFixed(2);\n    el.style.backgroundImage = getLinearGradientCSS(ratio, trackColor, \"transparent\");\n  }\n}\n\nexport const Slider = memo(({ min, max, step, value, onChange, disabled, className, ...rest }) => {\n  const inputRef = useRef();\n\n  useEffect(() => {\n    updateGradient(inputRef.current, min, max);\n  });\n\n  return (\n    <div className={classNames(styles.numberWithRange, className)}>\n      <div className={classNames(styles.rangeSlider)} disabled={disabled}>\n        <input\n          ref={inputRef}\n          type=\"range\"\n          step={step}\n          min={min}\n          max={max}\n          value={value}\n          disabled={disabled}\n          onChange={e => {\n            value === undefined && updateGradient(inputRef.current, min, max);\n            if (onChange) {\n              onChange(parseFloat(e.target.value));\n            }\n          }}\n          {...rest}\n        />\n      </div>\n    </div>\n  );\n});\n\nSlider.propTypes = {\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  value: PropTypes.number,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func,\n  className: PropTypes.string\n};\n\nSlider.defaultProps = {\n  min: 0,\n  max: 100,\n  step: 1,\n  disabled: false\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\";\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons/faExclamationTriangle\";\nimport { FormattedMessage, injectIntl, useIntl, defineMessages } from \"react-intl\";\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\nimport { AVAILABLE_LOCALES } from \"../assets/locales/locale_config\";\nimport { themes } from \"./styles/theme\";\nimport MediaDevicesManager from \"../utils/media-devices-manager\";\nimport { MediaDevicesEvents } from \"../utils/media-devices-utils\";\nimport { Slider } from \"./input/Slider\";\n\nexport const CLIPPING_THRESHOLD_MIN = 0.0;\nexport const CLIPPING_THRESHOLD_MAX = 0.1;\nexport const CLIPPING_THRESHOLD_STEP = 0.001;\nexport const GLOBAL_VOLUME_MIN = 0;\nexport const GLOBAL_VOLUME_MAX = 200;\nexport const GLOBAL_VOLUME_STEP = 5;\n\nfunction WarnIcon() {\n  return (\n    <i className={styles.flex}>\n      <FontAwesomeIcon className={styles.warnIcon} icon={faExclamationTriangle} />\n    </i>\n  );\n}\n\nfunction ResetToDefaultButton({ onClick }) {\n  const intl = useIntl();\n  const title = intl.formatMessage({\n    id: \"preferences-screen.reset-to-default\",\n    defaultMessage: \"Reset preference to default\"\n  });\n\n  return (\n    <button className={styles.noDefaultButtonStyle} title={title} aria-label={title} onClick={onClick}>\n      <i className={styles.flex}>\n        <FontAwesomeIcon className={classNames(styles.resetToDefaultButton)} icon={faUndo} />\n      </i>\n    </button>\n  );\n}\nResetToDefaultButton.propTypes = {\n  onClick: PropTypes.func\n};\nfunction ResetToDefaultButtonPlaceholder() {\n  return <div className={styles.resetToDefaultButtonPlaceholder} />;\n}\n\nfunction sanitize(s) {\n  s = s.replace(/[^0-9.]/g, \"\");\n  const split = s.split(\".\");\n  if (split.length > 1) {\n    return `${split.shift()}.${split.join(\"\")}`;\n  } else {\n    return s;\n  }\n}\nfunction countDigits(s) {\n  const split = s.split(\".\"); // Assume input is sanitized.\n  return (split.length > 1 && split[1].length) || 0;\n}\n\nexport class NumberRangeSelector extends Component {\n  // TODO: Simplify this component.\n  //       This component got a bit complicated when I tried to make sure that the number of digits\n  //       shown to the user was correct in all cases. The cases I have in mind are:\n  //         - User drags slider. Should use step and digits props.\n  //         - User clicks \"reset to default\" button. Should use step and digits props again.\n  //         - User enters text in the text box. Should display however many digits they type. (Maybe it shouldn't?)\n  //       We also take into account the difference between stored value and displayed value. The display string\n  //       may not match the stored value due to rounding-when-presenting or when nothing is stored (and the default value is displayed).\n  static propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: PropTypes.number,\n    digits: PropTypes.number,\n    store: PropTypes.object,\n    storeKey: PropTypes.string,\n    setValue: PropTypes.func\n  };\n  state = {\n    isFocused: false,\n    displayValue: \"\",\n    digitsFromUser: 0\n  };\n  constructor(props) {\n    super(props);\n    this.storeUpdated = this.storeUpdated.bind(this);\n  }\n\n  storeUpdated() {\n    if (!this.state.isFocused) {\n      const digits = Math.max(this.state.digitsFromUser, this.props.digits);\n      this.setState({ displayValue: this.props.store.state.preferences[this.props.storeKey].toFixed(digits) });\n    }\n    this.forceUpdate();\n  }\n\n  componentDidMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.setState({ displayValue: this.props.store.state.preferences[this.props.storeKey].toFixed(this.props.digits) });\n  }\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  render() {\n    return (\n      <div className={classNames(styles.numberWithRange)}>\n        <div className={classNames(styles.numberInNumberWithRange)}>\n          <input\n            type=\"text\"\n            value={this.state.displayValue}\n            onClick={e => {\n              e.target.focus();\n              e.target.select();\n            }}\n            onBlur={e => {\n              const sanitizedInput = sanitize(e.target.value);\n              const numberOrReset = isNaN(parseFloat(sanitizedInput)) ? undefined : parseFloat(sanitizedInput);\n              this.setState({\n                displayValue:\n                  numberOrReset === undefined\n                    ? this.props.store.state.preferences[this.props.storeKey].toFixed(this.props.digits)\n                    : Math.min(Math.max(this.props.min, numberOrReset), this.props.max).toFixed(this.props.digits),\n                isFocused: false\n              });\n            }}\n            onFocus={() => {\n              this.setState({ isFocused: true });\n            }}\n            onChange={e => {\n              const sanitizedInput = sanitize(e.target.value);\n              const numberOrReset = isNaN(parseFloat(sanitizedInput)) ? undefined : parseFloat(sanitizedInput);\n              const finalValue = Math.min(Math.max(this.props.min, numberOrReset), this.props.max);\n              this.setState({\n                displayValue: numberOrReset === undefined ? \"\" : finalValue,\n                digitsFromUser: countDigits(sanitizedInput)\n              });\n              this.props.setValue(\n                numberOrReset === undefined\n                  ? parseFloat(this.props.store.state.preferences[this.props.storeKey])\n                  : finalValue\n              );\n            }}\n          />\n        </div>\n        <Slider\n          step={this.props.step}\n          min={this.props.min}\n          max={this.props.max}\n          value={this.props.store.state.preferences[this.props.storeKey]}\n          onChange={value => {\n            const num = value.toFixed(this.props.digits);\n            this.setState({ displayValue: num, digitsFromUser: 0 });\n            this.props.setValue(parseFloat(num));\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nfunction CheckboxPlaceholder() {\n  return <div className={styles.checkboxPlaceholder} />;\n}\nfunction BooleanPreference({ store, storeKey, setValue }) {\n  const value = store.state.preferences[storeKey];\n  return (\n    <input\n      tabIndex=\"0\"\n      type=\"checkbox\"\n      checked={value}\n      onChange={() => {\n        setValue(!value);\n      }}\n    />\n  );\n}\nBooleanPreference.propTypes = {\n  store: PropTypes.object,\n  storeKey: PropTypes.string,\n  setValue: PropTypes.func\n};\n\nfunction MapCountPreference({ store, storeKey, defaultValue, text }) {\n  const storedPref = store.state.preferences[storeKey];\n  const value = storedPref ? Object.keys(storedPref).length : defaultValue;\n  return (\n    <span className={styles.preferenceLabel}>\n      {value} {text}\n    </span>\n  );\n}\nMapCountPreference.propTypes = {\n  store: PropTypes.object,\n  storeKey: PropTypes.string,\n  defaultValue: PropTypes.number,\n  text: PropTypes.string\n};\n\nclass Select extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    value: PropTypes.string,\n    onChange: PropTypes.func\n  };\n\n  render() {\n    return (\n      <div className={styles.dropdown}>\n        <select value={this.props.value} tabIndex=\"0\" onChange={this.props.onChange}>\n          {this.props.children}\n        </select>\n        <img\n          className={styles.dropdownArrow}\n          src=\"../assets/images/dropdown_arrow.png\"\n          srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n        />\n      </div>\n    );\n  }\n}\n\nclass PreferenceSelect extends React.Component {\n  static propTypes = {\n    options: PropTypes.array,\n    store: PropTypes.object,\n    storeKey: PropTypes.string,\n    setValue: PropTypes.func,\n    onChanged: PropTypes.func\n  };\n  constructor() {\n    super();\n  }\n  render() {\n    const options = this.props.options.map(({ text, value }, i) => {\n      return (\n        <option key={`option_${this.props.storeKey}_${i}`} value={value}>\n          {text}\n        </option>\n      );\n    });\n    return (\n      <Select\n        value={this.props.store.state.preferences[this.props.storeKey]}\n        onChange={e => {\n          this.props.setValue(e.target.value);\n          this.props.onChanged && this.props.onChanged(e.target.value);\n        }}\n      >\n        {options}\n      </Select>\n    );\n  }\n}\n\nexport const PREFERENCE_LIST_ITEM_TYPE = {\n  CHECK_BOX: 1,\n  SELECT: 2,\n  NUMBER_WITH_RANGE: 3,\n  MAX_RESOLUTION: 4,\n  MAP_COUNT: 5\n};\n\nexport class MaxResolutionPreferenceItem extends Component {\n  static propTypes = {\n    store: PropTypes.object\n  };\n  render() {\n    const onChange = () => {\n      const numWidth = parseInt(document.getElementById(\"maxResolutionWidth\").value);\n      const numHeight = parseInt(document.getElementById(\"maxResolutionHeight\").value);\n      this.props.store.update({\n        preferences: {\n          maxResolutionWidth: numWidth ? numWidth : 0,\n          maxResolutionHeight: numHeight ? numHeight : 0\n        }\n      });\n    };\n    return (\n      <div className={classNames(styles.maxResolutionPreferenceItem)}>\n        <input\n          id=\"maxResolutionWidth\"\n          tabIndex=\"0\"\n          type=\"number\"\n          step=\"1\"\n          min=\"0\"\n          value={\n            this.props.store.state.preferences.maxResolutionWidth === undefined\n              ? window.screen.width\n              : this.props.store.state.preferences.maxResolutionWidth\n          }\n          onClick={e => {\n            e.preventDefault();\n            e.target.focus();\n            e.target.select();\n          }}\n          onChange={onChange}\n        />\n        &nbsp;{\"x\"}&nbsp;\n        <input\n          id=\"maxResolutionHeight\"\n          tabIndex=\"0\"\n          type=\"number\"\n          step=\"1\"\n          min=\"0\"\n          value={\n            this.props.store.state.preferences.maxResolutionHeight === undefined\n              ? window.screen.height\n              : this.props.store.state.preferences.maxResolutionHeight\n          }\n          onClick={e => {\n            e.preventDefault();\n            e.target.focus();\n            e.target.select();\n          }}\n          onChange={onChange}\n        />\n      </div>\n    );\n  }\n}\nfunction ListItem({ children, disabled, indent }) {\n  return <div className={classNames(styles.listItem, { disabled, indent })}>{children}</div>;\n}\nListItem.propTypes = {\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool,\n  indent: PropTypes.bool\n};\n\nconst preferenceLabels = defineMessages({\n  preferredCamera: {\n    id: \"preferences-screen.preference.preferred-camera\",\n    defaultMessage: \"Preferred camera\"\n  },\n  preferredMic: {\n    id: \"preferences-screen.preference.preferred-mic\",\n    defaultMessage: \"Preferred mic\"\n  },\n  preferredSpeakers: {\n    id: \"preferences-screen.preference.preferred-speakers\",\n    defaultMessage: \"Preferred speakers\"\n  },\n  globalVoiceVolume: {\n    id: \"preferences-screen.preference.global-voice-volume\",\n    defaultMessage: \"Incoming Voice Volume\"\n  },\n  globalMediaVolume: {\n    id: \"preferences-screen.preference.global-media-volume\",\n    defaultMessage: \"Media Volume\"\n  },\n  globalSFXVolume: {\n    id: \"preferences-screen.preference.global-sfx-volume\",\n    defaultMessage: \"SFX Volume\"\n  },\n  avatarVoiceLevels: {\n    id: \"preferences-screen.preference.avatar-volumes\",\n    defaultMessage: \"Stored avatar volumes\"\n  },\n  disableSoundEffects: {\n    id: \"preferences-screen.preference.disable-sound-effects\",\n    defaultMessage: \"Disable Sound Effects\"\n  },\n  disableEchoCancellation: {\n    id: \"preferences-screen.preference.disable-echo-cancellation\",\n    defaultMessage: \"Disable microphone echo cancellation\"\n  },\n  disableNoiseSuppression: {\n    id: \"preferences-screen.preference.disable-noise-suppression\",\n    defaultMessage: \"Disable microphone noise supression\"\n  },\n  disableAutoGainControl: {\n    id: \"preferences-screen.preference.disable-auto-gain-control\",\n    defaultMessage: \"Disable microphone automatic gain control\"\n  },\n  snapRotationDegrees: {\n    id: \"preferences-screen.preference.snap-rotation-degrees\",\n    defaultMessage: \"Rotation per snap (in degrees)\"\n  },\n  disableMovement: {\n    id: \"preferences-screen.preference.disable-movement\",\n    defaultMessage: \"Disable movement\"\n  },\n  disableBackwardsMovement: {\n    id: \"preferences-screen.preference.disable-backwards-movement\",\n    defaultMessage: \"Disable backwards movement\"\n  },\n  disableStrafing: {\n    id: \"preferences-screen.preference.disable-strafing\",\n    defaultMessage: \"Disable strafing\"\n  },\n  disableTeleporter: {\n    id: \"preferences-screen.preference.disable-teleporter\",\n    defaultMessage: \"Disable teleporter\"\n  },\n  movementSpeedModifier: {\n    id: \"preferences-screen.preference.movement-speed-modifier\",\n    defaultMessage: \"Movement speed modifier\"\n  },\n  enableOnScreenJoystickLeft: {\n    id: \"preferences-screen.preference.enable-on-screen-joystick-left\",\n    defaultMessage: \"Enable left on-screen joystick for moving around\"\n  },\n  enableOnScreenJoystickRight: {\n    id: \"preferences-screen.preference.enable-on-screen-joystick-right\",\n    defaultMessage: \"Enable right on-screen joystick for looking around\"\n  },\n  enableGyro: {\n    id: \"preferences-screen.preference.enable-gyro\",\n    defaultMessage: \"Enable gyroscope (when supported by browser/device)\"\n  },\n  invertTouchscreenCameraMove: {\n    id: \"preferences-screen.preference.invert-touchscreen-camera-move\",\n    defaultMessage: \"Invert direction of camera movement for touchscreens\"\n  },\n  locale: {\n    id: \"preferences-screen.preference.locale\",\n    defaultMessage: \"Language\"\n  },\n  animateWaypointTransitions: {\n    id: \"preferences-screen.preference.animate-waypoint-transitions\",\n    defaultMessage: \"Animate waypoint transitions\"\n  },\n  showFPSCounter: {\n    id: \"preferences-screen.preference.show-fps-counter\",\n    defaultMessage: \"Show FPS Counter\"\n  },\n  maxResolution: {\n    id: \"preferences-screen.preference.max-resolution\",\n    defaultMessage: \"Max Resolution\"\n  },\n  materialQualitySetting: {\n    id: \"preferences-screen.preference.material-quality-setting\",\n    defaultMessage: \"Material quality\"\n  },\n  enableDynamicShadows: {\n    id: \"preferences-screen.preference.enable-dynamic-shadows\",\n    defaultMessage: \"Enable Real-time Shadows\"\n  },\n  disableAutoPixelRatio: {\n    id: \"preferences-screen.preference.disable-auto-pixel-ratio\",\n    defaultMessage: \"Disable automatic pixel ratio adjustments\"\n  },\n  allowMultipleHubsInstances: {\n    id: \"preferences-screen.preference.allow-multiple-hubs-instances\",\n    defaultMessage: \"Disable auto-exit when multiple hubs instances are open\"\n  },\n  disableIdleDetection: {\n    id: \"preferences-screen.preference.disable-idle-detection\",\n    defaultMessage: \"Disable auto-exit when idle or backgrounded\"\n  },\n  preferMobileObjectInfoPanel: {\n    id: \"preferences-screen.preference.prefer-mobile-object-info-panel\",\n    defaultMessage: \"Prefer Mobile Object Info Panel\"\n  },\n  showRtcDebugPanel: {\n    id: \"preferences-screen.preference.show-rtc-debug-panel\",\n    defaultMessage: \"Show RTC Panel\"\n  },\n  showAudioDebugPanel: {\n    id: \"preferences-screen.preference.show-audio-debug-panel\",\n    defaultMessage: \"Show Audio Debug Panel\"\n  },\n  enableAudioClipping: {\n    id: \"preferences-screen.preference.enable-audio-clipping\",\n    defaultMessage: \"Enable Audio Clipping\"\n  },\n  audioClippingThreshold: {\n    id: \"preferences-screen.preference.audio-clipping-threshold\",\n    defaultMessage: \"Audio Clipping Threshold\"\n  },\n  theme: {\n    id: \"preferences-screen.preference.theme\",\n    defaultMessage: \"Theme\"\n  },\n  fastRoomSwitching: {\n    id: \"preferences-screen.preference.fast-room-switching\",\n    defaultMessage: \"Enable Fast Room Switching\"\n  },\n  lazyLoadSceneMedia: {\n    id: \"preferences-screen.preference.lazy-load-scene-media\",\n    defaultMessage: \"Enable Scene Media Lazy Loading\"\n  },\n  disableLeftRightPanning: {\n    id: \"preferences-screen.preference.disable-panning\",\n    defaultMessage: \"Disable audio left/right panning\"\n  },\n  cursorSize: {\n    id: \"preferences-screen.preference.cursor-size\",\n    defaultMessage: \"Cursor Size\"\n  },\n  nametagVisibility: {\n    id: \"preferences-screen.preference.nametag-visibility\",\n    defaultMessage: \"Show Nametag\"\n  },\n  nametagVisibilityDistance: {\n    id: \"preferences-screen.preference.nametag-visibility-distance\",\n    defaultMessage: \"Nametag visibility distance\"\n  }\n});\n\nclass PreferenceListItem extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    store: PropTypes.object,\n    storeKey: PropTypes.string,\n    setValue: PropTypes.func,\n    itemProps: PropTypes.object\n  };\n  componentDidMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    window.addEventListener(\"locale-updated\", this.storeUpdated);\n  }\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    window.removeEventListener(\"locale-updated\", this.storeUpdated);\n  }\n\n  storeUpdated = () => {\n    this.forceUpdate();\n  };\n\n  render() {\n    const intl = this.props.intl;\n    const isCheckbox = this.props.itemProps.prefType === PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX;\n    const isSmallScreen = window.innerWidth < 600;\n    const label = (\n      <span className={styles.preferenceLabel}>{intl.formatMessage(preferenceLabels[this.props.storeKey])}</span>\n    );\n    const prefSchema = this.props.store.schema.definitions.preferences.properties;\n    const hasPref =\n      this.props.itemProps.prefType === PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION\n        ? this.props.store.state.preferences.maxResolutionWidth !== undefined ||\n          this.props.store.state.preferences.maxResolutionHeight !== undefined\n        : this.props.store.state.preferences[this.props.storeKey] !== prefSchema[this.props.storeKey].default;\n    const resetToDefault = hasPref ? (\n      <ResetToDefaultButton\n        onClick={() => {\n          switch (this.props.itemProps.prefType) {\n            case PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION:\n              this.props.store.update({\n                preferences: {\n                  maxResolutionWidth: undefined,\n                  maxResolutionHeight: undefined\n                }\n              });\n              break;\n            default:\n              this.props.setValue(prefSchema[this.props.storeKey].default);\n              break;\n          }\n          this.forceUpdate();\n        }}\n      />\n    ) : (\n      <ResetToDefaultButtonPlaceholder />\n    );\n\n    const disabled =\n      (this.props.itemProps.disableIfTrue && this.props.store.state.preferences[this.props.itemProps.disableIfTrue]) ||\n      (this.props.itemProps.disableIfFalse && !this.props.store.state.preferences[this.props.itemProps.disableIfFalse]);\n    const indent = this.props.itemProps.disableIfTrue || this.props.itemProps.disableIfFalse;\n\n    if (isCheckbox) {\n      return (\n        <ListItem disabled={disabled} indent={indent}>\n          <div className={styles.row}>\n            <Control itemProps={this.props.itemProps} store={this.props.store} setValue={this.props.setValue} />\n            {label}\n            <div className={styles.rowRight}>{resetToDefault}</div>\n          </div>\n        </ListItem>\n      );\n    } else if (isSmallScreen) {\n      return (\n        <ListItem disabled={disabled} indent={indent}>\n          <div className={styles.column}>\n            <div className={styles.row}>\n              {<CheckboxPlaceholder />}\n              {label}\n            </div>\n            <div className={styles.row}>\n              <div className={styles.rowCenter}>\n                <Control itemProps={this.props.itemProps} store={this.props.store} setValue={this.props.setValue} />\n              </div>\n              <div className={styles.rowRight}>{resetToDefault}</div>\n            </div>\n          </div>\n        </ListItem>\n      );\n    }\n    return (\n      <ListItem disabled={disabled} indent={indent}>\n        <div className={styles.row}>\n          {<CheckboxPlaceholder />}\n          {label}\n          <div className={styles.rowRight}>\n            <Control itemProps={this.props.itemProps} store={this.props.store} setValue={this.props.setValue} />\n          </div>\n          <div className={styles.rowRight}>{resetToDefault}</div>\n        </div>\n      </ListItem>\n    );\n  }\n}\n\nconst IntlPreferenceListItem = injectIntl(PreferenceListItem);\n\nconst CATEGORY_AUDIO = 0;\nconst CATEGORY_CONTROLS = 1;\nconst CATEGORY_MISC = 2;\nconst CATEGORY_MOVEMENT = 3;\nconst CATEGORY_TOUCHSCREEN = 4;\nconst CATEGORY_ACCESSIBILITY = 5;\nconst TOP_LEVEL_CATEGORIES = [CATEGORY_AUDIO, CATEGORY_CONTROLS, CATEGORY_MISC];\nconst categoryNames = defineMessages({\n  [CATEGORY_AUDIO]: { id: \"preferences-screen.category.audio\", defaultMessage: \"Audio\" },\n  [CATEGORY_CONTROLS]: { id: \"preferences-screen.category.controls\", defaultMessage: \"Controls\" },\n  [CATEGORY_MISC]: { id: \"preferences-screen.category.misc\", defaultMessage: \"Misc\" },\n  [CATEGORY_MOVEMENT]: { id: \"preferences-screen.category.movement\", defaultMessage: \"Movement\" },\n  [CATEGORY_TOUCHSCREEN]: { id: \"preferences-screen.category.touchscreen\", defaultMessage: \"Touchscreen\" },\n  [CATEGORY_ACCESSIBILITY]: { id: \"preferences-screen.category.accessibility\", defaultMessage: \"Accessibility\" }\n});\n\nfunction NavItem({ ariaLabel, title, onClick, selected }) {\n  return (\n    <button\n      aria-label={ariaLabel}\n      className={classNames(styles.navItem, { [styles.selected]: selected })}\n      onClick={onClick}\n    >\n      {title}\n    </button>\n  );\n}\nNavItem.propTypes = {\n  ariaLabel: PropTypes.string,\n  title: PropTypes.string,\n  onClick: PropTypes.func,\n  selected: PropTypes.bool\n};\nfunction CloseButton({ onClick }) {\n  const intl = useIntl();\n  return (\n    <button\n      autoFocus\n      aria-label={intl.formatMessage({\n        id: \"preferences-screen.close-button\",\n        defaultMessage: \"Close Preferences Menu\"\n      })}\n      className={classNames(styles.closeButton)}\n      onClick={onClick}\n    >\n      <i className={styles.flex}>\n        <FontAwesomeIcon className={styles.icon} icon={faTimes} />\n      </i>\n    </button>\n  );\n}\nCloseButton.propTypes = {\n  onClick: PropTypes.func\n};\n\nconst controlType = new Map([\n  [PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, BooleanPreference],\n  [PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION, MaxResolutionPreferenceItem],\n  [PREFERENCE_LIST_ITEM_TYPE.SELECT, PreferenceSelect],\n  [PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE, NumberRangeSelector],\n  [PREFERENCE_LIST_ITEM_TYPE.MAP_COUNT, MapCountPreference]\n]);\n\nfunction Control({ itemProps, store, setValue }) {\n  const ControlType = controlType.get(itemProps.prefType);\n  return <ControlType {...{ store, storeKey: itemProps.key, setValue, ...itemProps }} />;\n}\nControl.propTypes = {\n  itemProps: PropTypes.object,\n  store: PropTypes.object,\n  setValue: PropTypes.func\n};\n\nfunction createItem(itemProps, store) {\n  const setValue = v => {\n    if (itemProps.promptForRefresh) {\n      store.update({ preferences: { [itemProps.key]: v, shouldPromptForRefresh: true } });\n    } else {\n      store.update({ preferences: { [itemProps.key]: v } });\n    }\n  };\n  return (\n    <IntlPreferenceListItem\n      key={itemProps.key}\n      itemProps={itemProps}\n      store={store}\n      storeKey={itemProps.key}\n      setValue={setValue}\n      onChanged={itemProps.onChanged}\n    />\n  );\n}\n\nfunction Section({ name, items }, i) {\n  return (\n    <div key={`section-${i}`} className={styles.section}>\n      {name && <div className={styles.sectionTitle}>{name}</div>}\n      {items}\n    </div>\n  );\n}\nSection.propTypes = {\n  name: PropTypes.string,\n  items: PropTypes.node.isRequired\n};\n\nclass Nav extends Component {\n  render() {\n    const { children } = this.props;\n    return (\n      <div className={styles.navContainer}>\n        <div className={classNames(styles.nav)}>{children}</div>\n      </div>\n    );\n  }\n}\nNav.propTypes = {\n  children: PropTypes.node.isRequired,\n  selected: PropTypes.number\n};\n\nclass RefreshPrompt extends React.Component {\n  static propTypes = {\n    reportHeight: PropTypes.func\n  };\n  constructor() {\n    super();\n    this.ref = React.createRef();\n  }\n  componentDidMount() {\n    this.props.reportHeight(window.getComputedStyle(this.ref.current).height);\n  }\n\n  render() {\n    return (\n      <div ref={this.ref} className={styles.toast}>\n        <div className={styles.row}>\n          <WarnIcon />\n          <div className={styles.refreshPrompt}>\n            <FormattedMessage\n              id=\"preferences-screen.prompt-for-refresh\"\n              defaultMessage=\"Your preferences are saved, but some of your changes will not take effect until you refresh the page.\"\n            />\n          </div>\n          <div className={styles.warnIconPlaceholder} />\n        </div>\n        <button\n          className={styles.refreshNowButton}\n          onClick={() => {\n            const href = location.href;\n            location.href = href;\n          }}\n        >\n          <FormattedMessage id=\"preferences-screen.refresh-now\" defaultMessage=\"Refresh Now\" />\n        </button>\n      </div>\n    );\n  }\n}\n\nclass PreferencesScreen extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    onClose: PropTypes.func,\n    store: PropTypes.object,\n    scene: PropTypes.object\n  };\n\n  constructor() {\n    // TODO: When this component is recreated it clears its state.\n    // This happens several times as the page is loading.\n    // We should either avoid remounting or persist the category somewhere besides state.\n    super();\n\n    this.storeUpdated = this.storeUpdated.bind(this);\n\n    this.mediaDevicesManager = APP.mediaDevicesManager;\n\n    this.state = {\n      category: CATEGORY_AUDIO,\n      toastHeight: \"150px\",\n      preferredMic: {\n        key: \"preferredMic\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n        options: [{ value: \"none\", text: \"None\" }]\n      },\n      preferredCamera: {\n        key: \"preferredCamera\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n        options: [{ value: \"none\", text: \"None\" }]\n      },\n      ...(MediaDevicesManager.isAudioOutputSelectEnabled && {\n        preferredSpeakers: {\n          key: \"preferredSpeakers\",\n          prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n          options: [{ value: \"none\", text: \"None\" }]\n        }\n      })\n    };\n  }\n\n  onMediaDevicesUpdated = () => {\n    const currentSpeakers = this.mediaDevicesManager.selectedSpeakersDeviceId;\n    if (this.props.store.state.preferences.preferredSpeakers !== currentSpeakers) {\n      this.props.store.update({\n        preferences: { preferredSpeakers: currentSpeakers }\n      });\n    }\n    this.updateMediaDevices();\n  };\n\n  updateMediaDevices = () => {\n    // Audio devices update\n    const micOptions = this.mediaDevicesManager.micDevicesOptions.map(device => ({\n      value: device.value,\n      text: device.label\n    }));\n    const preferredMic = { ...this.state.preferredMic };\n    preferredMic.options = micOptions;\n\n    const speakersOptions = this.mediaDevicesManager.outputDevicesOptions.map(device => ({\n      value: device.value,\n      text: device.label\n    }));\n    const preferredSpeakers = { ...this.state.preferredSpeakers };\n    preferredSpeakers.options = speakersOptions?.length > 0 ? speakersOptions : [{ value: \"none\", text: \"None\" }];\n\n    // Video devices update\n    const videoOptions = this.mediaDevicesManager.videoDevicesOptions.map(device => ({\n      value: device.value,\n      text: device.label\n    }));\n    const preferredCamera = { ...this.state.preferredCamera };\n    preferredCamera.options = [\n      {\n        value: \"user\",\n        text: this.props.intl.formatMessage({\n          id: \"preferences-screen.preferred-camera.user-facing\",\n          defaultMessage: \"User-Facing\"\n        })\n      },\n      {\n        value: \"environment\",\n        text: this.props.intl.formatMessage({\n          id: \"preferences-screen.preferred-camera.environment\",\n          defaultMessage: \"Environment\"\n        })\n      },\n      {\n        value: \"default\",\n        text: this.props.intl.formatMessage({\n          id: \"preferences-screen.preferred-camera.default\",\n          defaultMessage: \"Default\"\n        })\n      }\n    ];\n    preferredCamera.options.push(...videoOptions);\n\n    // Update media devices state\n    this.setState({\n      preferredMic,\n      preferredSpeakers,\n      preferredCamera\n    });\n  };\n\n  componentDidMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.mediaDevicesManager.on(MediaDevicesEvents.DEVICE_CHANGE, this.onMediaDevicesUpdated);\n\n    this.mediaDevicesManager.fetchMediaDevices().then(this.updateMediaDevices);\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.mediaDevicesManager.off(MediaDevicesEvents.DEVICE_CHANGE, this.onMediaDevicesUpdated);\n  }\n\n  storeUpdated() {\n    const { preferredMic } = this.props.store.state.preferences;\n    if (preferredMic !== this.mediaDevicesManager.selectedMicDeviceId) {\n      this.mediaDevicesManager.startMicShare({ updatePrefs: false }).then(this.updateMediaDevices);\n    }\n  }\n\n  createSections() {\n    const intl = this.props.intl;\n\n    const browserDefault = intl.formatMessage({\n      id: \"preferences-screen.browser-default\",\n      defaultMessage: \"Browser Default\"\n    });\n\n    const availableLocales = [\n      {\n        value: \"browser\",\n        text: browserDefault\n      }\n    ];\n\n    for (const locale in AVAILABLE_LOCALES) {\n      availableLocales.push({ value: locale, text: AVAILABLE_LOCALES[locale] });\n    }\n\n    const availableThemes = [\n      {\n        value: null,\n        text: browserDefault\n      }\n    ];\n\n    for (const { id, name } of themes) {\n      availableThemes.push({\n        value: id,\n        text: name\n      });\n    }\n\n    const DEFINITIONS = new Map([\n      [\n        CATEGORY_TOUCHSCREEN,\n        [\n          {\n            key: \"enableOnScreenJoystickLeft\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"enableOnScreenJoystickRight\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"enableGyro\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"invertTouchscreenCameraMove\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          }\n        ]\n      ],\n      [\n        CATEGORY_MOVEMENT,\n        [\n          {\n            key: \"snapRotationDegrees\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: 0,\n            max: 90,\n            step: 5,\n            digits: 0\n          },\n          {\n            key: \"disableMovement\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"disableBackwardsMovement\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"disableStrafing\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"disableTeleporter\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"movementSpeedModifier\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: 0,\n            max: 2,\n            step: 0.1,\n            digits: 1\n          }\n        ]\n      ],\n      [\n        CATEGORY_AUDIO,\n        [\n          ...(MediaDevicesManager.isAudioInputSelectEnabled ? [this.state.preferredMic] : []),\n          ...(MediaDevicesManager.isAudioOutputSelectEnabled ? [this.state.preferredSpeakers] : []),\n          {\n            key: \"globalVoiceVolume\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: GLOBAL_VOLUME_MIN,\n            max: GLOBAL_VOLUME_MAX,\n            step: GLOBAL_VOLUME_STEP,\n            digits: 0\n          },\n          {\n            key: \"globalMediaVolume\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: GLOBAL_VOLUME_MIN,\n            max: GLOBAL_VOLUME_MAX,\n            step: GLOBAL_VOLUME_STEP,\n            digits: 0\n          },\n          {\n            key: \"globalSFXVolume\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: 0,\n            max: 200,\n            step: 5,\n            digits: 0\n          },\n          {\n            key: \"avatarVoiceLevels\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.MAP_COUNT,\n            defaultValue: 0,\n            text: intl.formatMessage({\n              id: \"preferences-screen.preference.avatar-volumes.entries\",\n              defaultMessage: \"Entries\"\n            })\n          },\n          {\n            key: \"disableSoundEffects\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"disableEchoCancellation\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX,\n            promptForRefresh: true\n          },\n          {\n            key: \"disableNoiseSuppression\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX,\n            promptForRefresh: true\n          },\n          {\n            key: \"disableAutoGainControl\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX,\n            promptForRefresh: true\n          },\n          {\n            key: \"enableAudioClipping\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"audioClippingThreshold\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: CLIPPING_THRESHOLD_MIN,\n            max: CLIPPING_THRESHOLD_MAX,\n            step: CLIPPING_THRESHOLD_STEP,\n            digits: 3\n          },\n          {\n            key: \"showAudioDebugPanel\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          }\n        ]\n      ],\n      [\n        CATEGORY_MISC,\n        [\n          {\n            key: \"locale\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n            options: availableLocales\n          },\n          {\n            key: \"theme\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n            options: availableThemes\n          },\n          { key: \"maxResolution\", prefType: PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION },\n          {\n            key: \"nametagVisibility\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n            options: [\n              {\n                value: \"showAll\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.nametag-visibility.show-all\",\n                  defaultMessage: \"Always\"\n                })\n              },\n              {\n                value: \"showNone\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.nametag-visibility.show-none\",\n                  defaultMessage: \"Never\"\n                })\n              },\n              {\n                value: \"showFrozen\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.nametag-visibility.show-frozen\",\n                  defaultMessage: \"Only in Frozen state\"\n                })\n              },\n              {\n                value: \"showSpeaking\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.nametag-visibility.show-speaking\",\n                  defaultMessage: \"Only speaking\"\n                })\n              },\n              {\n                value: \"showClose\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.nametag-visibility.show-close\",\n                  defaultMessage: \"Close to me\"\n                })\n              }\n            ]\n          },\n          {\n            key: \"nametagVisibilityDistance\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: 1,\n            max: 20,\n            step: 1,\n            digits: 2\n          },\n          this.state.preferredCamera,\n          {\n            key: \"materialQualitySetting\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n            options: [\n              {\n                value: \"low\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.material-quality-setting.low\",\n                  defaultMessage: \"Low\"\n                })\n              },\n              {\n                value: \"medium\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.material-quality-setting.medium\",\n                  defaultMessage: \"Medium\"\n                })\n              },\n              {\n                value: \"high\",\n                text: intl.formatMessage({\n                  id: \"preferences-screen.material-quality-setting.high\",\n                  defaultMessage: \"High\"\n                })\n              }\n            ],\n            promptForRefresh: true\n          },\n          {\n            key: \"enableDynamicShadows\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX,\n            defaultBool: false\n          },\n          {\n            key: \"disableAutoPixelRatio\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"allowMultipleHubsInstances\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"disableIdleDetection\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"fastRoomSwitching\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"lazyLoadSceneMedia\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"preferMobileObjectInfoPanel\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"animateWaypointTransitions\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"showFPSCounter\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"showRtcDebugPanel\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          },\n          {\n            key: \"cursorSize\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n            min: 1,\n            max: 5,\n            step: 0.5,\n            digits: 1\n          }\n        ]\n      ],\n      [\n        CATEGORY_ACCESSIBILITY,\n        [\n          {\n            key: \"disableLeftRightPanning\",\n            prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX\n          }\n        ]\n      ]\n    ]);\n\n    const toItem = itemProps => createItem(itemProps, this.props.store);\n\n    const items = new Map();\n\n    for (const [category, definitions] of DEFINITIONS) {\n      items.set(category, definitions.map(toItem));\n    }\n\n    return new Map([\n      [\n        CATEGORY_AUDIO,\n        [\n          { items: items.get(CATEGORY_AUDIO) },\n          {\n            name: intl.formatMessage(categoryNames[CATEGORY_ACCESSIBILITY]),\n            items: items.get(CATEGORY_ACCESSIBILITY)\n          }\n        ]\n      ],\n      [\n        CATEGORY_CONTROLS,\n        [\n          {\n            name: intl.formatMessage(categoryNames[CATEGORY_MOVEMENT]),\n            items: items.get(CATEGORY_MOVEMENT)\n          },\n          {\n            name: intl.formatMessage(categoryNames[CATEGORY_TOUCHSCREEN]),\n            items: items.get(CATEGORY_TOUCHSCREEN)\n          }\n        ]\n      ],\n      [CATEGORY_MISC, [{ items: items.get(CATEGORY_MISC) }]]\n    ]);\n  }\n\n  render() {\n    const intl = this.props.intl;\n    const shouldPromptForRefresh = this.props.store.state.preferences.shouldPromptForRefresh;\n\n    return (\n      <div className={classNames(styles.preferencesPanel)}>\n        {shouldPromptForRefresh && (\n          <RefreshPrompt\n            reportHeight={toastHeight => {\n              this.setState({ toastHeight });\n            }}\n          />\n        )}\n        <CloseButton onClick={this.props.onClose} />\n        <Nav selected={this.state.category}>\n          {TOP_LEVEL_CATEGORIES.map(category => (\n            <NavItem\n              key={`category-${category}-header`}\n              title={intl.formatMessage(categoryNames[category])}\n              onClick={() => {\n                this.setState({ category });\n              }}\n              ariaLabel={intl.formatMessage(\n                { id: \"preferences-screen.select-category \", defaultMessage: \"Select category {categoryName}\" },\n                {\n                  categoryName: intl.formatMessage(categoryNames[category])\n                }\n              )}\n              selected={category === this.state.category}\n            />\n          ))}\n        </Nav>\n        <div className={styles.contentContainer}>\n          <div className={styles.scrollingContent}>\n            {this.createSections()\n              .get(this.state.category)\n              .map(Section)}\n            {shouldPromptForRefresh && (\n              <div\n                style={{\n                  width: \"100%\",\n                  minHeight: `${this.state.toastHeight}`\n                }}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(PreferencesScreen);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWand(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.838 5.213L5.213 7.838l3.052 3.052 2.625-2.625-3.053-3.052z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.774 9.149l-2.625 2.625 6.945 6.976 2.656-2.656-6.976-6.945z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.375 6.875H1.25v1.25h3.125v-1.25z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.525 2.642l-.883.884 2.21 2.21.883-.884-2.21-2.21z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.125 1.25h-1.25v3.125h1.25V1.25z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.48 2.643l-2.21 2.21.884.883 2.21-2.21-.884-.883z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.851 9.27l-2.21 2.21.884.884 2.21-2.21-.884-.883z\",\n    fill: props.color\n  }));\n}\n\nSvgWand.defaultProps = {\n  color: \"#000\",\n  title: \"Wand\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1dhbmQtZmRiYTUxZjAxN2IwNjNlODVhNDk4YTUxMjg0NDIyYWQuc3ZnIjs=\";\nexport { SvgWand as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChat(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.418 14.844c.046-.171-.057-.409-.155-.58-.03-.052-.063-.101-.099-.149a7.805 7.805 0 01-1.289-4.297c-.014-4.385 3.622-7.943 8.118-7.943 3.921 0 7.194 2.717 7.96 6.323.114.534.172 1.08.172 1.626 0 4.391-3.496 8.005-7.992 8.005-.715 0-1.68-.18-2.206-.327a14.835 14.835 0 01-1.187-.395 1.215 1.215 0 00-.906.014l-2.65.957a.623.623 0 01-.182.047.373.373 0 01-.374-.38.618.618 0 01.023-.129l.767-2.772z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }));\n}\n\nSvgChat.defaultProps = {\n  color: \"#000\",\n  title: \"Chat\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0NoYXQtYWJjY2MxM2U4NmQwZTFmNzlkOTZhYmUyY2YwMDUwNzguc3ZnIjs=\";\nexport { SvgChat as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSend(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.617 8.871l-.007-.003-16.682-6.92a.92.92 0 00-.868.085.963.963 0 00-.435.804v4.426a.937.937 0 00.762.92l9.1 1.683a.157.157 0 010 .307l-9.1 1.682a.937.937 0 00-.762.92v4.426a.921.921 0 00.414.77.936.936 0 00.888.08l16.682-6.88.008-.003a1.25 1.25 0 000-2.297z\",\n    fill: props.color\n  }));\n}\n\nSvgSend.defaultProps = {\n  color: \"#000\",\n  title: \"Send\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1NlbmQtMmVhMzg1MmNkOTlhMDExMzU5M2NiNjNkN2FiNmJkYWQuc3ZnIjs=\";\nexport { SvgSend as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgReaction(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.188 10a.937.937 0 100-1.875.937.937 0 000 1.875z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.002 15.001c-1.774 0-3.266-1.153-3.739-2.728a.312.312 0 01.306-.397h6.863a.314.314 0 01.311.254.311.311 0 01-.006.143c-.468 1.575-1.96 2.728-3.735 2.728z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.813 10a.937.937 0 100-1.875.937.937 0 000 1.875z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 18.125a8.125 8.125 0 100-16.25 8.125 8.125 0 000 16.25z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }));\n}\n\nSvgReaction.defaultProps = {\n  color: \"#000\",\n  title: \"Reaction\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1JlYWN0aW9uLTVhNzRjMjY2NTY1MWQ0ZTdmMTBmMGY4YjFhYmZlMDIzLnN2ZyI7\";\nexport { SvgReaction as ReactComponent };","import React, { forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { TextInput } from \"./TextInput\";\nimport styles from \"./TextAreaInput.scss\";\n\nexport const TextAreaInput = forwardRef(({ className, ...rest }, ref) => (\n  <TextInput className={classNames(styles.textarea, className)} {...rest} as={TextareaAutosize} ref={ref} />\n));\n\nTextAreaInput.propTypes = {\n  className: PropTypes.string\n};\n","import React, { forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./ToolbarButton.scss\";\n\nexport const presets = [\n  \"basic\",\n  \"transparent\",\n  \"accept\",\n  \"cancel\",\n  \"accent1\",\n  \"accent2\",\n  \"accent3\",\n  \"accent4\",\n  \"accent5\"\n];\n\nexport const types = [\"none\", \"left\", \"middle\", \"right\"];\n\nexport const statusColors = [\"recording\", \"unread\", \"enabled\", \"disabled\"];\n\nexport const ToolbarButton = forwardRef(\n  (\n    { preset, className, iconContainerClassName, children, icon, label, selected, large, statusColor, type, ...rest },\n    ref\n  ) => {\n    return (\n      <button\n        ref={ref}\n        className={classNames(\n          styles.toolbarButton,\n          styles[preset],\n          styles[type],\n          { [styles.selected]: selected, [styles.large]: large },\n          className\n        )}\n        {...rest}\n      >\n        <div className={classNames(styles.iconContainer, iconContainerClassName)} aria-hidden=\"true\">\n          {icon}\n          {statusColor && <div className={classNames(styles.statusIndicator, styles[\"status-\" + statusColor])} />}\n          {children}\n        </div>\n        {label && <label>{label}</label>}\n      </button>\n    );\n  }\n);\n\nToolbarButton.propTypes = {\n  icon: PropTypes.node,\n  label: PropTypes.node,\n  selected: PropTypes.bool,\n  preset: PropTypes.oneOf(presets),\n  statusColor: PropTypes.oneOf(statusColors),\n  large: PropTypes.bool,\n  className: PropTypes.string,\n  iconContainerClassName: PropTypes.string,\n  children: PropTypes.node,\n  type: PropTypes.oneOf(types)\n};\n\nToolbarButton.defaultProps = {\n  preset: \"basic\"\n};\n","import React, { useState, useCallback, useEffect } from \"react\";\n// Note react-popper-2 is just an alias to react-popper@2.2.3 because storybook is depending on an old version.\n// https://github.com/storybookjs/storybook/issues/10982\nimport { usePopper } from \"react-popper-2\";\nimport styles from \"./Popover.scss\";\nimport { createPortal } from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport { useCssBreakpoints } from \"react-use-css-breakpoints\";\nimport classNames from \"classnames\";\nimport { CloseButton } from \"../input/CloseButton\";\n\nfunction PopoverArrow({ arrowClass }) {\n  return (\n    <svg width=\"25\" height=\"11\" viewBox=\"0 0 25 11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M1 1L11.1176 9.51209C11.8908 10.1626 13.1092 10.1626 13.8824 9.51209L24 1\"\n        strokeWidth=\"2\"\n        className={classNames(styles.arrowBg, arrowClass)}\n      />\n      <path\n        d=\"M11.1176 9.51209L1 1H24L13.8824 9.51209C13.1092 10.1626 11.8908 10.1626 11.1176 9.51209Z\"\n        className={classNames(styles.arrowBorder, arrowClass)}\n      />\n      <path d=\"M0 1H25\" strokeWidth=\"2\" className={classNames(styles.arrowBg, arrowClass)} />\n    </svg>\n  );\n}\n\nPopoverArrow.propTypes = {\n  arrowClass: PropTypes.string\n};\n\nexport function Popover({\n  content: Content,\n  children,\n  title,\n  showHeader,\n  placement,\n  offsetSkidding,\n  offsetDistance,\n  initiallyVisible,\n  disableFullscreen,\n  isVisible,\n  onChangeVisible,\n  popoverApiRef,\n  popoverClass,\n  arrowClass\n}) {\n  const [_visible, _setVisible] = useState(initiallyVisible);\n  const visible = isVisible === undefined ? _visible : isVisible;\n  const setVisible = onChangeVisible || _setVisible;\n  const [referenceElement, setReferenceElement] = useState(null);\n  const [popperElement, setPopperElement] = useState(null);\n  const [arrowElement, setArrowElement] = useState(null);\n  const {\n    styles: { popper: popperStyles, arrow: arrowStyles },\n    attributes\n  } = usePopper(referenceElement, popperElement, {\n    placement,\n    modifiers: [\n      { name: \"arrow\", options: { element: arrowElement } }, // https://popper.js.org/docs/v2/modifiers/arrow/\n      { name: \"offset\", options: { offset: [offsetSkidding, offsetDistance] } } // https://popper.js.org/docs/v2/modifiers/offset/\n    ]\n  });\n  const breakpoint = useCssBreakpoints();\n  const fullscreen = !disableFullscreen && (breakpoint === \"sm\" || breakpoint === \"md\");\n  const openPopover = useCallback(() => setVisible(true), [setVisible]);\n  const closePopover = useCallback(() => setVisible(false), [setVisible]);\n  const togglePopover = useCallback(() => setVisible(visible => !visible), [setVisible]);\n\n  useEffect(\n    () => {\n      if (!popoverApiRef) {\n        return;\n      }\n\n      popoverApiRef.current = {\n        openPopover,\n        closePopover,\n        togglePopover\n      };\n    },\n    [popoverApiRef, openPopover, closePopover, togglePopover]\n  );\n\n  useEffect(\n    () => {\n      const onClick = e => {\n        if (\n          (referenceElement && referenceElement.contains(e.target)) ||\n          (popperElement && popperElement.contains(e.target))\n        ) {\n          return;\n        }\n\n        setVisible(false);\n      };\n\n      const onKeyDown = e => {\n        if (e.key === \"Escape\") {\n          setVisible(false);\n        }\n      };\n\n      if (visible) {\n        window.addEventListener(\"mousedown\", onClick);\n        window.addEventListener(\"keydown\", onKeyDown);\n      }\n\n      return () => {\n        window.removeEventListener(\"mousedown\", onClick);\n        window.removeEventListener(\"keydown\", onKeyDown);\n      };\n    },\n    [visible, popperElement, referenceElement, setVisible]\n  );\n\n  useEffect(\n    () => {\n      if (visible && fullscreen) {\n        document.body.classList.add(styles.fullscreenBody);\n      } else {\n        document.body.classList.remove(styles.fullscreenBody);\n      }\n\n      return () => {\n        document.body.classList.remove(styles.fullscreenBody);\n      };\n    },\n    [fullscreen, visible]\n  );\n\n  return (\n    <>\n      {children({\n        togglePopover,\n        openPopover,\n        closePopover,\n        popoverVisible: visible,\n        triggerRef: setReferenceElement\n      })}\n      {visible &&\n        createPortal(\n          <div\n            ref={setPopperElement}\n            className={classNames(styles.popover, { [styles.fullscreen]: fullscreen }, popoverClass)}\n            style={fullscreen ? undefined : popperStyles}\n            {...attributes.popper}\n          >\n            {showHeader && (\n              <div className={styles.header}>\n                <CloseButton onClick={closePopover} />\n                <h5>{title}</h5>\n              </div>\n            )}\n            <div className={styles.content}>\n              {typeof Content === \"function\" ? (\n                <Content fullscreen={fullscreen} closePopover={closePopover} />\n              ) : (\n                Content\n              )}\n            </div>\n            {!fullscreen && (\n              <div ref={setArrowElement} className={styles.arrow} style={arrowStyles}>\n                <PopoverArrow arrowClass={arrowClass} />\n              </div>\n            )}\n          </div>,\n          document.body\n        )}\n    </>\n  );\n}\n\nPopover.propTypes = {\n  initiallyVisible: PropTypes.bool,\n  placement: PropTypes.string,\n  title: PropTypes.node.isRequired,\n  children: PropTypes.func.isRequired,\n  content: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  disableFullscreen: PropTypes.bool,\n  popoverApiRef: PropTypes.object,\n  popoverClass: PropTypes.string\n};\n\nPopover.defaultProps = {\n  initiallyVisible: false,\n  placement: \"auto\",\n  offsetSkidding: 0,\n  offsetDistance: 8,\n  showHeader: true\n};\n","import React from \"react\";\nimport { Picker } from \"emoji-mart\";\n// Twitter emoji sheets downloaded from unpkg.com provided by https://github.com/missive/emoji-mart\nimport emojiIcons16 from \"../../assets/images/emoji-picker-16.png\";\nimport emojiIcons20 from \"../../assets/images/emoji-picker-20.png\";\nimport emojiIcons32 from \"../../assets/images/emoji-picker-32.png\";\nimport emojiIcons64 from \"../../assets/images/emoji-picker-64.png\";\n\nimport \"./EmojiPicker.scss\";\n\nconst iconSheet = {\n  16: emojiIcons16,\n  20: emojiIcons20,\n  32: emojiIcons32,\n  64: emojiIcons64\n};\n\nexport function EmojiPicker(props) {\n  return (\n    <Picker\n      title=\"Pick an emoji!\"\n      color=\"var(--tab-highlight-color)\"\n      // eslint-disable-next-line no-unused-vars\n      backgroundImageFn={(set, sheetSize) => iconSheet[sheetSize]}\n      {...props}\n    />\n  );\n}\n","import React from \"react\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\n\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\n\nexport const MAX_MESSAGE_LENGTH = 750;\n\nexport function formatMessageBody(body, { emojiClassName } = {}) {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const bodyLength = body.length >= MAX_MESSAGE_LENGTH ? MAX_MESSAGE_LENGTH : body.length;\n  const monospace = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const cleanedBody = (monospace ? body.substring(1, bodyLength - 1) : body.substring(0, bodyLength)).trim();\n\n  const messages = cleanedBody.split(\"\\n\").map((message, i) => (\n    <p key={i}>\n      <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>\n        {toEmojis(message, { className: emojiClassName })}\n      </Linkify>\n    </p>\n  ));\n\n  const multiline = messages.length > 1;\n\n  let emoji = false;\n\n  if (messages.length === 1) {\n    const emojiComponents = toEmojis(cleanedBody);\n\n    emoji =\n      emojiComponents.length === 1 &&\n      emojiComponents[0].props &&\n      emojiComponents[0].props.children.match &&\n      emojiComponents[0].props.children.match(emojiRegex);\n  }\n\n  return {\n    formattedBody: <>{messages}</>,\n    multiline,\n    monospace,\n    emoji\n  };\n}\n","import React, { useEffect, useRef, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { ReactComponent as WandIcon } from \"../icons/Wand.svg\";\nimport { ReactComponent as AttachIcon } from \"../icons/Attach.svg\";\nimport { ReactComponent as ChatIcon } from \"../icons/Chat.svg\";\nimport { ReactComponent as SendIcon } from \"../icons/Send.svg\";\nimport { ReactComponent as ReactionIcon } from \"../icons/Reaction.svg\";\nimport { IconButton } from \"../input/IconButton\";\nimport { TextAreaInput } from \"../input/TextAreaInput\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { Popover } from \"../popover/Popover\";\nimport { EmojiPicker } from \"./EmojiPicker\";\nimport styles from \"./ChatSidebar.scss\";\nimport { formatMessageBody } from \"../../utils/chat-message\";\nimport { FormattedMessage, useIntl, defineMessages, FormattedRelativeTime } from \"react-intl\";\n\nexport function SpawnMessageButton(props) {\n  return (\n    <IconButton className={styles.chatInputIcon} {...props}>\n      <WandIcon />\n    </IconButton>\n  );\n}\n\nexport function SendMessageButton(props) {\n  return (\n    <IconButton className={styles.chatInputIcon} {...props}>\n      <SendIcon />\n    </IconButton>\n  );\n}\n\n// Memoize EmojiPickerPopoverButton since we don't want it re-rendering\n// the EmojiPicker unnecessarily.\nexport const EmojiPickerPopoverButton = React.memo(({ onSelectEmoji }) => {\n  // We're using a ref here, since we don't want to re-render anything, but we\n  // do want to know if the Shift key is down when an emoji is selected.\n  const shiftKeyDown = useRef(false);\n\n  useEffect(() => {\n    const onKeyDown = e => {\n      if (e.key === \"Shift\") shiftKeyDown.current = true;\n    };\n    const onKeyUp = e => {\n      if (e.key === \"Shift\") shiftKeyDown.current = false;\n    };\n\n    window.addEventListener(\"keydown\", onKeyDown);\n    window.addEventListener(\"keyup\", onKeyUp);\n\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n      window.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, []);\n\n  return (\n    <Popover\n      title=\"\"\n      content={({ closePopover }) => (\n        <EmojiPicker\n          onSelect={emoji => {\n            const keepPickerOpen = shiftKeyDown.current;\n            onSelectEmoji({ emoji, pickerRemainedOpen: keepPickerOpen });\n            // Keep the picker open if the Shift key was held down to allow\n            // for multiple emoji selections.\n            if (!keepPickerOpen) closePopover();\n          }}\n        />\n      )}\n      placement=\"top\"\n      offsetDistance={28}\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <IconButton ref={triggerRef} className={styles.chatInputIcon} selected={popoverVisible} onClick={togglePopover}>\n          <ReactionIcon />\n        </IconButton>\n      )}\n    </Popover>\n  );\n});\n\nEmojiPickerPopoverButton.propTypes = {\n  onSelectEmoji: PropTypes.func.isRequired\n};\n\nexport function MessageAttachmentButton(props) {\n  return (\n    <>\n      <IconButton as=\"label\" className={styles.chatInputIcon}>\n        <AttachIcon />\n        <input type=\"file\" {...props} />\n      </IconButton>\n    </>\n  );\n}\n\nexport function ChatLengthWarning({ messageLength, maxLength }) {\n  return (\n    <p\n      className={classNames(styles.chatInputWarning, {\n        [styles.warningTextColor]: messageLength > maxLength\n      })}\n    >\n      <FormattedMessage id=\"chat-message-input.warning-max-characters\" defaultMessage=\"Max characters\" />\n      {` (${messageLength}/${maxLength})`}\n    </p>\n  );\n}\n\nChatLengthWarning.propTypes = {\n  messageLength: PropTypes.number,\n  maxLength: PropTypes.number\n};\n\nexport const ChatInput = forwardRef(({ warning, isOverMaxLength, ...props }, ref) => {\n  const intl = useIntl();\n\n  return (\n    <div className={styles.chatInputContainer}>\n      <TextAreaInput\n        ref={ref}\n        textInputStyles={styles.chatInputTextAreaStyles}\n        className={classNames({ [styles.warningBorder]: isOverMaxLength })}\n        placeholder={intl.formatMessage({ id: \"chat-sidebar.input.placeholder\", defaultMessage: \"Message...\" })}\n        {...props}\n      />\n      {warning}\n    </div>\n  );\n});\n\nChatInput.propTypes = {\n  onSpawn: PropTypes.func,\n  warning: PropTypes.node,\n  isOverMaxLength: PropTypes.bool\n};\n\nconst enteredMessages = defineMessages({\n  room: { id: \"chat-sidebar.system-message.entered-room\", defaultMessage: \"{name} entered the room.\" },\n  lobby: { id: \"chat-sidebar.system-message.entered-lobby\", defaultMessage: \"{name} entered the lobby.\" }\n});\n\nconst joinedMessages = defineMessages({\n  lobby: { id: \"chat-sidebar.system-message.joined-lobby\", defaultMessage: \"{name} joined the lobby.\" },\n  room: { id: \"chat-sidebar.system-message.joined-room\", defaultMessage: \"{name} joined the room.\" }\n});\n\nexport const LogMessageType = {\n  roomEntryRequired: \"roomEntryRequired\",\n  flyModeDisabled: \"flyModeDisabled\",\n  flyModeEnabled: \"flyModeEnabled\",\n  unauthorizedSceneChange: \"unauthorizedSceneChange\",\n  invalidSceneUrl: \"invalidSceneUrl\",\n  unauthorizedRoomRename: \"unauthorizedRoomRename\",\n  captureUnavailable: \"captureUnavailable\",\n  captureStopped: \"captureStopped\",\n  captureStarted: \"captureStarted\",\n  captureAlreadyStopped: \"captureAlreadyStopped\",\n  captureAlreadyRunning: \"captureAlreadyRunning\",\n  positionalAudioEnabled: \"positionalAudioEnabled\",\n  positionalAudioDisabled: \"positionalAudioDisabled\",\n  setAudioNormalizationFactor: \"setAudioNormalizationFactor\",\n  audioNormalizationDisabled: \"audioNormalizationDisabled\",\n  audioNormalizationNaN: \"audioNormalizationNaN\",\n  invalidAudioNormalizationRange: \"invalidAudioNormalizationRange\",\n  audioSuspended: \"audioSuspended\",\n  audioResumed: \"audioResumed\",\n  joinFailed: \"joinFailed\",\n  avatarChanged: \"avatarChanged\"\n};\n\nconst logMessages = defineMessages({\n  [LogMessageType.roomEntryRequired]: {\n    id: \"chat-sidebar.log-message.room-entry-required\",\n    defaultMessage: \"You must enter the room to use this command.\"\n  },\n  [LogMessageType.flyModeDisabled]: {\n    id: \"chat-sidebar.log-message.fly-mode-disabled\",\n    defaultMessage: \"Fly mode disabled.\"\n  },\n  [LogMessageType.flyModeEnabled]: {\n    id: \"chat-sidebar.log-message.fly-mode-enabled\",\n    defaultMessage: \"Fly mode enabled.\"\n  },\n  [LogMessageType.unauthorizedSceneChange]: {\n    id: \"chat-sidebar.log-message.unauthorized-scene-change\",\n    defaultMessage: \"You do not have permission to change the scene.\"\n  },\n  [LogMessageType.invalidSceneUrl]: {\n    id: \"chat-sidebar.log-message.invalid-scene-url\",\n    defaultMessage: \"This URL does not point to a scene or valid GLB.\"\n  },\n  [LogMessageType.unauthorizedRoomRename]: {\n    id: \"chat-sidebar.log-message.unauthorized-room-rename\",\n    defaultMessage: \"You do not have permission to rename this room.\"\n  },\n  [LogMessageType.captureUnavailable]: {\n    id: \"chat-sidebar.log-message.capture-unavailable\",\n    defaultMessage: \"Capture unavailable.\"\n  },\n  [LogMessageType.captureStopped]: {\n    id: \"chat-sidebar.log-message.capture-stopped\",\n    defaultMessage: \"Capture stopped.\"\n  },\n  [LogMessageType.captureStarted]: {\n    id: \"chat-sidebar.log-message.capture-started\",\n    defaultMessage: \"Capture started.\"\n  },\n  [LogMessageType.captureAlreadyStopped]: {\n    id: \"chat-sidebar.log-message.capture-already-stopped\",\n    defaultMessage: \"Capture already stopped.\"\n  },\n  [LogMessageType.captureAlreadyRunning]: {\n    id: \"chat-sidebar.log-message.capture-already-running\",\n    defaultMessage: \"Capture already running.\"\n  },\n  [LogMessageType.positionalAudioEnabled]: {\n    id: \"chat-sidebar.log-message.positional-audio-enabled\",\n    defaultMessage: \"Positional audio enabled.\"\n  },\n  [LogMessageType.positionalAudioDisabled]: {\n    id: \"chat-sidebar.log-message.positional-audio-disabled\",\n    defaultMessage: \"Positional audio disabled.\"\n  },\n  [LogMessageType.setAudioNormalizationFactor]: {\n    id: \"chat-sidebar.log-message.set-audio-normalization-factor\",\n    defaultMessage: \"audioNormalization factor is set to {factor}.\"\n  },\n  [LogMessageType.audioNormalizationDisabled]: {\n    id: \"chat-sidebar.log-message.audio-normalization-disabled\",\n    defaultMessage: \"audioNormalization is disabled.\"\n  },\n  [LogMessageType.audioNormalizationNaN]: {\n    id: \"chat-sidebar.log-message.audio-normalization-nan\",\n    defaultMessage: \"audioNormalization command needs a valid number parameter.\"\n  },\n  [LogMessageType.invalidAudioNormalizationRange]: {\n    id: \"chat-sidebar.log-message.invalid-audio-normalization-range\",\n    defaultMessage:\n      \"audioNormalization command needs a base volume number between 0 [no normalization] and 255. Default is 0. The recommended value is 4, if you would like to enable normalization.\"\n  },\n  [LogMessageType.audioSuspended]: {\n    id: \"chat-sidebar.log-message.audio-suspended\",\n    defaultMessage: \"Audio has been suspended, click somewhere in the room to resume the audio.\"\n  },\n  [LogMessageType.audioResumed]: {\n    id: \"chat-sidebar.log-message.audio-resumed\",\n    defaultMessage: \"Audio has been resumed.\"\n  },\n  [LogMessageType.joinFailed]: {\n    id: \"chat-sidebar.log-message.join-failed\",\n    defaultMessage: \"Failed to join room: {message}\"\n  },\n  [LogMessageType.avatarChanged]: {\n    id: \"chat-sidebar.log-message.avatar-changed\",\n    defaultMessage: \"Your avatar has been changed.\"\n  }\n});\n\n// TODO: use react-intl's defineMessages to get proper extraction\nexport function formatSystemMessage(entry, intl) {\n  switch (entry.type) {\n    case \"join\":\n      return intl.formatMessage(joinedMessages[entry.presence], { name: <b>{entry.name}</b> });\n    case \"entered\":\n      return intl.formatMessage(enteredMessages[entry.presence], { name: <b>{entry.name}</b> });\n    case \"leave\":\n      return (\n        <FormattedMessage\n          id=\"chat-sidebar.system-message.leave\"\n          defaultMessage=\"{name} left.\"\n          values={{ name: <b>{entry.name}</b> }}\n        />\n      );\n    case \"display_name_changed\":\n      return (\n        <FormattedMessage\n          id=\"chat-sidebar.system-message.name-change\"\n          defaultMessage=\"{oldName} is now known as {newName}\"\n          values={{ oldName: <b>{entry.oldName}</b>, newName: <b>{entry.newName}</b> }}\n        />\n      );\n    case \"scene_changed\":\n      return (\n        <FormattedMessage\n          id=\"chat-sidebar.system-message.scene-change\"\n          defaultMessage=\"{name} changed the scene to {sceneName}\"\n          values={{ name: <b>{entry.name}</b>, sceneName: <b>{entry.sceneName}</b> }}\n        />\n      );\n    case \"hub_name_changed\":\n      return (\n        <FormattedMessage\n          id=\"chat-sidebar.system-message.hub-name-change\"\n          defaultMessage=\"{name} changed the name of the room to {hubName}\"\n          values={{ name: <b>{entry.name}</b>, hubName: <b>{entry.hubName}</b> }}\n        />\n      );\n    case \"hub_changed\":\n      return (\n        <FormattedMessage\n          id=\"chat-sidebar.system-message.hub-change\"\n          defaultMessage=\"You are now in {hubName}\"\n          values={{ hubName: <b>{entry.hubName}</b> }}\n        />\n      );\n    case \"log\":\n      return intl.formatMessage(logMessages[entry.messageType], entry.props);\n    default:\n      return null;\n  }\n}\n\nexport function SystemMessage(props) {\n  const intl = useIntl();\n\n  return (\n    <li className={classNames(styles.messageGroup, styles.systemMessage)}>\n      {props.showLineBreak && <hr />}\n      <p className={styles.messageGroupLabel}>\n        <i>{formatSystemMessage(props, intl)}</i>\n        <span>\n          <FormattedRelativeTime updateIntervalInSeconds={10} value={(props.timestamp - Date.now()) / 1000} />\n        </span>\n      </p>\n    </li>\n  );\n}\n\nSystemMessage.propTypes = {\n  timestamp: PropTypes.any,\n  showLineBreak: PropTypes.bool\n};\n\nfunction MessageBubble({ media, monospace, emoji, children }) {\n  return (\n    <div\n      className={classNames(styles.messageBubble, {\n        [styles.media]: media,\n        [styles.emoji]: emoji,\n        [styles.monospace]: monospace\n      })}\n    >\n      {children}\n    </div>\n  );\n}\n\nMessageBubble.propTypes = {\n  media: PropTypes.bool,\n  monospace: PropTypes.bool,\n  emoji: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n  children: PropTypes.node\n};\n\nfunction getMessageComponent(message) {\n  switch (message.type) {\n    case \"chat\": {\n      const { formattedBody, monospace, emoji } = formatMessageBody(message.body);\n      return (\n        <MessageBubble key={message.id} monospace={monospace} emoji={emoji}>\n          {formattedBody}\n        </MessageBubble>\n      );\n    }\n    case \"video\":\n      return (\n        <MessageBubble key={message.id} media>\n          <video controls src={message.body.src} />\n        </MessageBubble>\n      );\n    case \"image\":\n    case \"photo\":\n      return (\n        <MessageBubble key={message.id} media>\n          <img src={message.body.src} />\n        </MessageBubble>\n      );\n    default:\n      return null;\n  }\n}\n\nexport function ChatMessageGroup({ sent, sender, timestamp, messages }) {\n  return (\n    <li className={classNames(styles.messageGroup, { [styles.sent]: sent })}>\n      <p className={styles.messageGroupLabel}>\n        {sender} | <FormattedRelativeTime updateIntervalInSeconds={10} value={(timestamp - Date.now()) / 1000} />\n      </p>\n      <ul className={styles.messageGroupMessages}>{messages.map(message => getMessageComponent(message))}</ul>\n    </li>\n  );\n}\n\nChatMessageGroup.propTypes = {\n  sent: PropTypes.bool,\n  sender: PropTypes.string,\n  timestamp: PropTypes.any,\n  messages: PropTypes.array\n};\n\nexport const ChatMessageList = forwardRef(({ children, ...rest }, ref) => (\n  <ul {...rest} className={styles.messageList} ref={ref}>\n    {children}\n  </ul>\n));\n\nChatMessageList.propTypes = {\n  children: PropTypes.node\n};\n\nexport function ChatSidebar({ onClose, children, ...rest }) {\n  return (\n    <Sidebar\n      title={<FormattedMessage id=\"chat-sidebar.title\" defaultMessage=\"Chat\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n      contentClassName={styles.content}\n      disableOverflowScroll\n      {...rest}\n    >\n      {children}\n    </Sidebar>\n  );\n}\n\nChatSidebar.propTypes = {\n  onClose: PropTypes.func,\n  onScrollList: PropTypes.func,\n  children: PropTypes.node,\n  listRef: PropTypes.func\n};\n\nexport function ChatToolbarButton(props) {\n  return (\n    <ToolbarButton\n      {...props}\n      icon={<ChatIcon />}\n      preset=\"accent4\"\n      label={<FormattedMessage id=\"chat-toolbar-button\" defaultMessage=\"Chat\" />}\n    />\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport html2canvas from \"html2canvas\";\nimport { coerceToUrl } from \"../utils/media-utils\";\nimport { formatMessageBody } from \"../utils/chat-message\";\nimport { createPlaneBufferGeometry } from \"../utils/three-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\n\nconst textureLoader = new HubsTextureLoader();\n\nconst CHAT_MESSAGE_TEXTURE_SIZE = 1024;\n\nconst messageBodyDom = (body, from, fromSessionId, onViewProfile, emojiClassName) => {\n  const { formattedBody, multiline, monospace, emoji } = formatMessageBody(body, { emojiClassName });\n  const wrapStyle = multiline ? styles.messageWrapMulti : styles.messageWrap;\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiline,\n    [styles.messageBodyMono]: monospace\n  };\n  const includeClientLink = onViewProfile && fromSessionId && history && NAF.clientId !== fromSessionId;\n  const onFromClick = includeClientLink ? () => onViewProfile(fromSessionId) : () => {};\n\n  const content = (\n    <div className={wrapStyle}>\n      {from && (\n        <div\n          onClick={onFromClick}\n          className={classNames({ [styles.messageSource]: true, [styles.messageSourceLink]: includeClientLink })}\n        >\n          {from}:\n        </div>\n      )}\n      <div className={classNames(messageBodyClasses)}>{formattedBody}</div>\n    </div>\n  );\n\n  return { content, multiline, emoji };\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender) {\n  const { content, emoji, multiline } = messageBodyDom(body, from, null, null, styles.emoji);\n  const isEmoji = allowEmojiRender && emoji;\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && !multiline,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {content}\n    </div>\n  );\n\n  return new Promise((resolve, reject) => {\n    ReactDOM.render(entryDom, el, () => {\n      const width = el.offsetWidth;\n      const height = el.offsetHeight;\n      const ratio = height / width;\n      const scale = (CHAT_MESSAGE_TEXTURE_SIZE * Math.min(1.0, 1.0 / ratio)) / el.offsetWidth;\n      html2canvas(el, { backgroundColor: null, scale, logging: false })\n        .then(canvas => {\n          canvas.toBlob(blob => resolve([blob, width, height]), \"image/png\");\n          el.remove();\n        })\n        .catch(reject);\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const [blob, width, height] = await renderChatMessage(body, name, false);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"class\", \"ui\");\n  entity.setAttribute(\"is-remote-hover-target\", {});\n  entity.setAttribute(\"follow-in-fov\", {\n    target: \"#avatar-pov-node\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = createPlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 400;\n    meshEntity.object3DMap.mesh.scale.set(width / scaleFactor, height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  try {\n    const url = new URL(coerceToUrl(body));\n    if (url.host) {\n      document.querySelector(\"a-scene\").emit(\"add_media\", body);\n      return;\n    }\n  } catch (e) {\n    // Ignore parse error\n  }\n\n  // If not a URL, spawn as a text bubble\n\n  const [blob] = await renderChatMessage(body, from, true);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  const { content } = messageBodyDom(props.body, props.name, props.sessionId, props.onViewProfile);\n\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {content}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  sessionId: PropTypes.string,\n  className: PropTypes.string,\n  onViewProfile: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport configs from \"../utils/configs\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const intl = useIntl();\n\n  const landingPageUrl = getLandingPageForPhoto(url);\n\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: intl.formatMessage(\n      {\n        id: \"photo-message.default-tweet\",\n        defaultMessage: \"Taken in {shareHashtag}\"\n      },\n      {\n        shareHashtag: configs.translation(\"share-hashtag\"),\n        url: `https://${configs.SHORTLINK_DOMAIN}/${hubId}`\n      }\n    )\n  });\n\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <FormattedMessage\n          id=\"photo-message.body\"\n          defaultMessage=\"{name} took a <a>photo</a>.\"\n          values={{\n            name: <b>{name}</b>,\n            // eslint-disable-next-line react/display-name\n            a: chunks => (\n              <b>\n                <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {chunks}\n                </a>\n              </b>\n            )\n          }}\n        />\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../utils/configs\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nimport { share } from \"../utils/share\";\n\nexport default function VideoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const intl = useIntl();\n\n  const onShareClicked = share.bind(null, {\n    url: url,\n    title: intl.formatMessage(\n      {\n        id: \"video-message.default-tweet\",\n        defaultMessage: \"Taken in {shareHashtag}\"\n      },\n      {\n        shareHashtag: configs.translation(\"share-hashtag\"),\n        url: `https://${configs.SHORTLINK_DOMAIN}/${hubId}`\n      }\n    )\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <FormattedMessage\n          id=\"video-message.body\"\n          defaultMessage=\"{name} took a <a>video</a>.\"\n          values={{\n            name: <b>{name}</b>,\n            // eslint-disable-next-line react/display-name\n            a: chunks => (\n              <b>\n                <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {chunks}\n                </a>\n              </b>\n            )\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nVideoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nfunction spawnImage(url) {\n  document.querySelector(\"a-scene\").emit(\"add_media\", url);\n}\n\nexport default function ImageMessage({ name, body: { src: url }, className, maySpawn }) {\n  return (\n    <div className={className}>\n      {maySpawn && (\n        <button className={classNames(styles.iconButton, styles.spawnMessage)} onClick={() => spawnImage(url)} />\n      )}\n      <div className={styles.mediaBody}>{name && <div className={styles.messageSource}>{name}:</div>}</div>\n      <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={proxiedUrlFor(url)} />\n      </a>\n    </div>\n  );\n}\n\nImageMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { injectIntl } from \"react-intl\";\nimport { formatSystemMessage } from \"./room/ChatSidebar\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\nimport VideoMessage from \"./video-message\";\nimport ImageMessage from \"./image-message\";\nimport { getPresenceContextForSession } from \"../utils/phoenix-utils\";\n\nclass PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string,\n    history: PropTypes.object,\n    presences: PropTypes.object,\n    onViewProfile: PropTypes.func,\n    intl: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: (e.type === \"chat\" || e.type === \"image\") && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    const presenceContext = e.sessionId ? getPresenceContextForSession(this.props.presences, e.sessionId) : {};\n    const isBot = !!presenceContext.discord;\n\n    switch (e.type) {\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            sessionId={e.sessionId}\n            includeFromLink={this.props.inRoom && !isBot}\n            history={this.props.history}\n            onViewProfile={this.props.onViewProfile}\n          />\n        );\n      case \"image\":\n        return (\n          <ImageMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"photo\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"video\":\n        return (\n          <VideoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      default: {\n        const systemMessage = formatSystemMessage(e, this.props.intl);\n\n        return (\n          systemMessage && (\n            <div key={e.key} className={classNames(entryClasses)}>\n              <div>{systemMessage}</div>\n            </div>\n          )\n        );\n      }\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n\nexport default injectIntl(PresenceLog);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport styles from \"../assets/stylesheets/preload-overlay.scss\";\nimport { Button } from \"./input/Button\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nexport default class PreloadOverlay extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    baseUrl: PropTypes.string,\n    onLoadClicked: PropTypes.func\n  };\n\n  render() {\n    const loadButtonText = <FormattedMessage id=\"preload-overlay.load-button\" defaultMessage=\"Load Room\" />;\n\n    return (\n      <div className={styles.treatment}>\n        <div className={styles.screenshot}>\n          {this.props.hubScene && <img className={styles.screenshot} src={this.props.hubScene.screenshot_url} />}\n        </div>\n        <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.logo}>\n          <img\n            src={configs.image(\"logo\")}\n            alt={<FormattedMessage id=\"preload-overlay.logo-alt\" defaultMessage=\"Logo\" />}\n          />\n        </a>\n        <div className={styles.mainPanel}>\n          <div className={styles.hubName}>{this.props.hubName}</div>\n          {this.props.onLoadClicked &&\n            (!isMobile ? (\n              <Button preset=\"primary\" onClick={this.props.onLoadClicked}>\n                {loadButtonText}\n              </Button>\n            ) : (\n              <Button preset=\"primary\" as=\"a\" href={this.props.baseUrl} target=\"_blank\" rel=\"noreferrer noopener\">\n                {loadButtonText}\n              </Button>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst useCanvas = (draw, color, xData, yData, options = {}) => {\n  const canvasRef = React.useRef(null);\n\n  useEffect(\n    () => {\n      const canvas = canvasRef.current;\n      const context = canvas.getContext(options.context || \"2d\");\n      let animationFrameId;\n      const render = () => {\n        draw(context, xData, yData, color);\n        animationFrameId = window.requestAnimationFrame(render);\n      };\n      render();\n      return () => {\n        window.cancelAnimationFrame(animationFrameId);\n      };\n    },\n    [options.context, xData, yData, color, draw]\n  );\n  return canvasRef;\n};\n\nfunction drawFunc(ctx, xData, yData, color) {\n  const xSum = xData.reduce((a, b) => a + b, 0);\n  const xRatio = ctx.canvas.width / xSum;\n\n  const yMax = Math.max.apply(Math, yData);\n  const yRatio = ctx.canvas.height / yMax;\n\n  xData = xData.map(x => x * xRatio);\n  yData = yData.map(y => y * yRatio);\n\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.fillStyle = color;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 1;\n  let x0 = 0;\n  for (let i = 0; i < xData.length; i++) {\n    const x1 = x0 + xData[i];\n    const y0 = ctx.canvas.height - yData[i];\n    const y1 = ctx.canvas.height - (i === 0 ? yData[i] : i === yData.length - 1 ? yData[i] : yData[i + 1]);\n    ctx.beginPath();\n    ctx.moveTo(x0, y0);\n    ctx.lineTo(x1, y1);\n    ctx.lineTo(x1, ctx.canvas.height);\n    ctx.lineTo(x0, ctx.canvas.height);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n    x0 = x1;\n  }\n}\n\nexport const DataGraph = props => {\n  const { options, data, color, xAxis, yAxis, ...rest } = props;\n  const { context } = options;\n\n  const xData = data.map(d => d[xAxis]);\n  const yData = data.map(d => d[yAxis]);\n  const canvasRef = useCanvas(drawFunc, color, xData, yData, { context });\n\n  return <canvas ref={canvasRef} {...rest} />;\n};\n\nDataGraph.propTypes = {\n  options: PropTypes.object,\n  data: PropTypes.array,\n  xAxis: PropTypes.string,\n  yAxis: PropTypes.string,\n  color: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Prop.scss\";\n\nexport function CreatePropsFromData(data) {\n  const props = [];\n  for (const property in data) {\n    let value = data[property];\n    if (typeof value === \"number\" && !!(value % 1)) {\n      value = value.toFixed(2);\n      props.push(<Prop key={property} propKey={property} propValue={value} />);\n    } else if (typeof value === \"object\") {\n      props.push(<Prop key={property} propKey={property} propValue={\"-\"} />);\n      props.push(CreatePropsFromData(value));\n    } else {\n      props.push(<Prop key={property} propKey={property} propValue={value} />);\n    }\n  }\n\n  return props;\n}\n\nexport function Prop({ propKey, propValue }) {\n  return (\n    (propKey !== undefined &&\n      propValue !== undefined && (\n        <p className={classNames(styles.rtcTileText)}>\n          {`${propKey}: `}\n          <span className={classNames(styles.rtcValueText)}>{`${propValue}`}</span>\n        </p>\n      )) ||\n    null\n  );\n}\n\nProp.propTypes = {\n  propKey: PropTypes.string,\n  propValue: PropTypes.any\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { DataGraph } from \"./DataGraph.js\";\nimport { Prop, CreatePropsFromData } from \"./Prop.js\";\nimport styles from \"./DataPanel.scss\";\n\nexport function DataPanel({\n  graphData,\n  speed,\n  width,\n  height,\n  data,\n  xAxis,\n  yAxis,\n  title,\n  children,\n  color,\n  backgroundColor\n}) {\n  return (\n    <div className={classNames(styles.dataTile)} style={{ backgroundColor: backgroundColor }}>\n      <p className={classNames(styles.dataTileTitle)}>{title}</p>\n      {graphData && (\n        <div\n          style={{\n            position: \"relative\",\n            width: width || \"auto\",\n            height: height || \"auto\",\n            alignSelf: \"center\",\n            flex: \"0 0 auto\"\n          }}\n        >\n          <DataGraph\n            width={width || \"auto\"}\n            height={height || \"auto\"}\n            options={{ context: \"2d\" }}\n            data={graphData}\n            color={color || \"rgb(0, 0, 255)\"}\n            xAxis={xAxis}\n            yAxis={yAxis}\n          />\n        </div>\n      )}\n      {speed && <Prop propKey={`speed`} propValue={`${speed} Kb/sec`} />}\n      {CreatePropsFromData(data)}\n      {children}\n    </div>\n  );\n}\n\nDataPanel.propTypes = {\n  graphData: PropTypes.array,\n  speed: PropTypes.string,\n  data: PropTypes.object,\n  xAxis: PropTypes.string,\n  yAxis: PropTypes.string,\n  title: PropTypes.node,\n  children: PropTypes.node,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  color: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { CreatePropsFromData } from \"./Prop.js\";\nimport styles from \"./CollapsiblePanel.scss\";\n\nfunction collapse(evt) {\n  evt.target.classList.toggle(\"collapsed\");\n  evt.target.parentElement?.nextSibling?.classList.toggle(\"collapsed\");\n  return evt.target.parentElement?.nextSibling?.classList.contains(\"collapsed\");\n}\n\nfunction openLink(url) {\n  const win = window.open(url, \"_blank\");\n  win.focus();\n}\n\nexport function CollapsiblePanel({\n  title,\n  border,\n  row,\n  wrap,\n  grow,\n  url,\n  isRoot,\n  children,\n  data,\n  collapsed,\n  onCollapse,\n  backgroundColor,\n  clear,\n  download\n}) {\n  const rootClassName = classNames(border ? styles.borderTile : styles.borderlessTile);\n  const rootStyle = {\n    flexGrow: grow ? 1 : 0,\n    backgroundColor\n  };\n  const contentClassName = classNames(\n    isRoot\n      ? `${styles.collapsibleContentRoot} ${(!!collapsed && \"collapsed\") || \"\"}`\n      : `${styles.collapsibleContent} ${(!!collapsed && \"collapsed\") || \"\"}`\n  );\n  const buttonClassName = classNames(`${styles.collapseButton} ${(!!collapsed && \"collapsed\") || \"\"}`);\n  const contentStyle = {\n    flexFlow: (row ? \"row \" : \"column \") + (wrap ? \"wrap\" : \"nowrap\")\n  };\n  return (\n    <div className={rootClassName} style={rootStyle}>\n      <div className={styles.collapsibleHeader}>\n        {title && (\n          <button\n            className={classNames(buttonClassName)}\n            onClick={evt => {\n              const isCollapsed = collapse(evt);\n              onCollapse && onCollapse(title, isCollapsed);\n            }}\n          >\n            {title}\n          </button>\n        )}\n        {url && (\n          <button className={classNames(styles.logButton)} onClick={() => openLink(url)}>\n            ?\n          </button>\n        )}\n        {(clear || download) && (\n          <div className={styles.collapsibleRightButtons}>\n            {download && (\n              <button className={classNames(styles.logButton)} onClick={download}>\n                &#x2193;\n              </button>\n            )}\n            {clear && (\n              <button className={classNames(styles.logButton)} onClick={clear}>\n                &#xd7;\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n      <div className={contentClassName} style={contentStyle}>\n        {CreatePropsFromData(data)}\n        {children}\n      </div>\n    </div>\n  );\n}\n\nCollapsiblePanel.propTypes = {\n  children: PropTypes.node,\n  title: PropTypes.node,\n  border: PropTypes.bool,\n  row: PropTypes.bool,\n  grow: PropTypes.bool,\n  wrap: PropTypes.bool,\n  url: PropTypes.string,\n  isRoot: PropTypes.bool,\n  data: PropTypes.object,\n  collapsed: PropTypes.bool,\n  onCollapse: PropTypes.func,\n  backgroundColor: PropTypes.string,\n  clear: PropTypes.func,\n  download: PropTypes.func\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCaretDown(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.828 7.424l5.46 6.372a.938.938 0 001.424 0l5.46-6.372a.938.938 0 00-.712-1.548H4.538c-.8 0-1.233.94-.71 1.548z\",\n    fill: props.color\n  }));\n}\n\nSvgCaretDown.defaultProps = {\n  color: \"#000\",\n  title: \"Caret Down\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0NhcmV0RG93bi0yMmFmMDNhNGUxZWY3MjIzZWNhM2FkNDEyYzMwOTkyNC5zdmciOw==\";\nexport { SvgCaretDown as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { InputField } from \"./InputField\";\nimport classNames from \"classnames\";\nimport styles from \"./SelectInputField.scss\";\nimport { ReactComponent as CaretDownIcon } from \"../icons/CaretDown.svg\";\nimport { useSelect } from \"downshift\";\nimport { FormattedMessage } from \"react-intl\";\n\nfunction getItemValue(item) {\n  return typeof item === \"object\" ? item.value : item;\n}\n\nfunction getSelectedItem(value, options) {\n  const selectedItemValue = getItemValue(value);\n\n  if (options.length > 0 && typeof options[0] === \"object\") {\n    return options.find(item => item.value === selectedItemValue);\n  }\n\n  return selectedItemValue;\n}\n\nfunction getItemLabel(item) {\n  return typeof item === \"object\" ? item.label || item.value : item;\n}\n\nexport function SelectInputField({\n  className,\n  error,\n  description,\n  inputClassName,\n  buttonClassName,\n  label,\n  onChange,\n  value,\n  options,\n  fullWidth,\n  ...rest\n}) {\n  const {\n    isOpen,\n    selectedItem,\n    getToggleButtonProps,\n    getMenuProps,\n    getLabelProps,\n    highlightedIndex,\n    getItemProps\n  } = useSelect({\n    items: options,\n    selectedItem: getSelectedItem(value, options),\n    ...rest,\n    onSelectedItemChange: ({ selectedItem }) => {\n      if (onChange) {\n        onChange(getItemValue(selectedItem));\n      }\n    }\n  });\n\n  const selectedItemLabel = getItemLabel(selectedItem);\n\n  return (\n    <InputField\n      {...getLabelProps()}\n      className={className}\n      label={label}\n      error={error}\n      description={description}\n      fullWidth={fullWidth}\n    >\n      <div className={classNames(styles.selectInput, { [styles.open]: isOpen }, inputClassName)}>\n        <button\n          className={classNames(styles.dropdownButton, buttonClassName)}\n          type=\"button\"\n          {...getToggleButtonProps()}\n        >\n          <span>\n            {selectedItemLabel !== undefined ? (\n              selectedItemLabel\n            ) : (\n              <FormattedMessage id=\"select-input-field.placeholder\" defaultMessage=\"Select...\" />\n            )}\n          </span>\n          <CaretDownIcon />\n        </button>\n        {options.length > 0 && (\n          <ul {...getMenuProps()} className={styles.dropdown}>\n            {isOpen &&\n              options.map((item, index) => (\n                <li\n                  className={classNames(styles.dropdownItem, { [styles.highlightedItem]: highlightedIndex === index })}\n                  key={getItemValue(item)}\n                  {...getItemProps({ item, index })}\n                >\n                  {getItemLabel(item)}\n                </li>\n              ))}\n          </ul>\n        )}\n      </div>\n    </InputField>\n  );\n}\n\nSelectInputField.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.node,\n  error: PropTypes.node,\n  description: PropTypes.node,\n  labelClassName: PropTypes.string,\n  inputClassName: PropTypes.string,\n  buttonClassName: PropTypes.string,\n  value: PropTypes.any,\n  options: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n      PropTypes.shape({\n        // id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        value: PropTypes.any.isRequired\n      })\n    ])\n  ).isRequired,\n  onChange: PropTypes.func,\n  fullWidth: PropTypes.bool\n};\n\nSelectInputField.defaultProps = {\n  options: []\n};\n","import React, { useCallback, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport styles from \"./AudioDebugPanel.scss\";\nimport { CollapsiblePanel } from \".//CollapsiblePanel\";\nimport classNames from \"classnames\";\nimport {\n  CLIPPING_THRESHOLD_MIN,\n  CLIPPING_THRESHOLD_MAX,\n  CLIPPING_THRESHOLD_STEP,\n  GLOBAL_VOLUME_MIN,\n  GLOBAL_VOLUME_MAX,\n  GLOBAL_VOLUME_STEP\n} from \"../../react-components/preferences-screen\";\nimport { SelectInputField } from \"../input/SelectInputField\";\nimport { DISTANCE_MODEL_OPTIONS, DistanceModelType, SourceType } from \"../../components/audio-params\";\nimport { getCurrentAudioSettingsForSourceType, updateAudioSettings } from \"../../update-audio-settings\";\n\nconst ROLLOFF_MIN = 0.0;\nconst ROLLOFF_MAX = 20.0;\nconst ROLLOFF_STEP = 0.5;\nconst ROLLOFF_LIN_MIN = 0.0;\nconst ROLLOFF_LIN_MAX = 1.0;\nconst ROLLOFF_LIN_STEP = 0.01;\nconst DISTANCE_MIN = 1.0;\nconst DISTANCE_MAX = 100.0;\nconst DISTANCE_STEP = 1.0;\nconst ANGLE_MIN = 0.0;\nconst ANGLE_MAX = 360.0;\nconst ANGLE_STEP = 1.0;\nconst GAIN_MIN = 0.0;\nconst GAIN_MAX = 1.0;\nconst GAIN_STEP = 0.1;\n\nfunction SelectProperty({ defaultValue, options, onChange, children }) {\n  const [value, setValue] = useState(defaultValue);\n  return (\n    <div className={classNames(styles.audioDebugRow)}>\n      <span style={{ flex: \"none\", padEnd: \"10px\" }}>{children}</span>\n      <SelectInputField\n        value={value}\n        options={options}\n        onChange={newValue => {\n          setValue(newValue);\n          onChange(newValue);\n        }}\n      />\n    </div>\n  );\n}\n\nSelectProperty.propTypes = {\n  defaultValue: PropTypes.string,\n  options: PropTypes.array,\n  onChange: PropTypes.func,\n  children: PropTypes.node\n};\n\nfunction SliderProperty({ defaultValue, step, min, max, onChange, children }) {\n  return (\n    <div className={classNames(styles.audioDebugRow)}>\n      <span style={{ flex: \"none\", padEnd: \"10px\" }}>{children}</span>\n      <input\n        type=\"range\"\n        step={step}\n        min={min}\n        max={max}\n        value={defaultValue}\n        onChange={e => {\n          const parsedValue = parseFloat(e.target.value);\n          onChange(parsedValue);\n        }}\n      />\n      <span className={classNames(styles.valueText)}>{defaultValue}</span>\n    </div>\n  );\n}\n\nSliderProperty.propTypes = {\n  defaultValue: PropTypes.number,\n  step: PropTypes.number,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  onChange: PropTypes.func,\n  children: PropTypes.node\n};\n\nfunction getPrefs() {\n  return {\n    enableAudioClipping: APP.store.state.preferences.enableAudioClipping,\n    audioClippingThreshold: APP.store.state.preferences.audioClippingThreshold,\n    globalVoiceVolume: APP.store.state.preferences.globalVoiceVolume,\n    globalMediaVolume: APP.store.state.preferences.globalMediaVolume,\n    globalSFXVolume: APP.store.state.preferences.globalSFXVolume\n  };\n}\n\nexport function AudioDebugPanel({ isNarrow, collapsed, onCollapsed }) {\n  const [mediaSettings, setMediaSettings] = useState(getCurrentAudioSettingsForSourceType(SourceType.MEDIA_VIDEO));\n  const [avatarSettings, setAvatarSettings] = useState(\n    getCurrentAudioSettingsForSourceType(SourceType.AVATAR_AUDIO_SOURCE)\n  );\n\n  const onSettingChange = (sourceType, newSetting) => {\n    const settings = Object.assign({}, APP.audioDebugPanelOverrides.get(sourceType), newSetting);\n    APP.audioDebugPanelOverrides.set(sourceType, settings);\n    if (sourceType === SourceType.MEDIA_VIDEO) {\n      setMediaSettings(getCurrentAudioSettingsForSourceType(SourceType.MEDIA_VIDEO));\n    } else {\n      setAvatarSettings(getCurrentAudioSettingsForSourceType(SourceType.AVATAR_AUDIO_SOURCE));\n    }\n    for (const [el, audio] of APP.audios.entries()) {\n      updateAudioSettings(el, audio);\n    }\n  };\n\n  const [preferences, setPreferences] = useState(getPrefs());\n  const onPreferencesUpdated = useCallback(\n    () => {\n      setPreferences(getPrefs());\n    },\n    [setPreferences]\n  );\n  useEffect(\n    () => {\n      onPreferencesUpdated();\n      APP.store.addEventListener(\"statechanged\", onPreferencesUpdated);\n      return () => {\n        APP.store.removeEventListener(\"statechanged\", onPreferencesUpdated);\n        APP.audioDebugPanelOverrides.delete(SourceType.MEDIA_VIDEO);\n        APP.audioDebugPanelOverrides.delete(SourceType.AVATAR_AUDIO_SOURCE);\n        for (const [el, audio] of APP.audios.entries()) {\n          updateAudioSettings(el, audio);\n        }\n      };\n    },\n    [onPreferencesUpdated]\n  );\n\n  return (\n    <div\n      className={classNames(styles.audioDebugContainer)}\n      style={{\n        height: isNarrow && !collapsed && \"80%\",\n        maxHeight: isNarrow && !collapsed && \"80%\"\n      }}\n    >\n      <CollapsiblePanel\n        title={<FormattedMessage id=\"audio-debug-panel.audio-debug-title\" defaultMessage=\"Audio Debug\" />}\n        isRoot\n        border\n        collapsed={collapsed}\n        onCollapse={onCollapsed}\n      >\n        <CollapsiblePanel\n          title={<FormattedMessage id=\"audio-debug-panel.audio-debug-global-title\" defaultMessage=\"Globals\" />}\n          border\n          grow\n        >\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\n            <input\n              tabIndex=\"0\"\n              type=\"checkbox\"\n              checked={preferences.enableAudioClipping}\n              onChange={() => {\n                APP.store.update({\n                  preferences: {\n                    enableAudioClipping: !preferences.enableAudioClipping\n                  }\n                });\n              }}\n              style={{ marginLeft: \"10px\" }}\n            />\n            <SliderProperty\n              defaultValue={preferences.audioClippingThreshold}\n              step={CLIPPING_THRESHOLD_STEP}\n              min={CLIPPING_THRESHOLD_MIN}\n              max={CLIPPING_THRESHOLD_MAX}\n              onChange={value => {\n                APP.store.update({\n                  preferences: {\n                    audioClippingThreshold: value\n                  }\n                });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.global.clippingThreshold\" defaultMessage=\"Clipping\" />\n              </p>\n            </SliderProperty>\n          </div>\n          <SliderProperty\n            defaultValue={preferences.globalVoiceVolume}\n            step={GLOBAL_VOLUME_STEP}\n            min={GLOBAL_VOLUME_MIN}\n            max={GLOBAL_VOLUME_MAX}\n            onChange={value => {\n              APP.store.update({\n                preferences: {\n                  globalVoiceVolume: value\n                }\n              });\n            }}\n          >\n            <p className={classNames(styles.propText)}>\n              <FormattedMessage id=\"audio-debug-view.global.voiceVolume\" defaultMessage=\"Voice Volume\" />\n            </p>\n          </SliderProperty>\n          <SliderProperty\n            defaultValue={preferences.globalMediaVolume}\n            step={GLOBAL_VOLUME_STEP}\n            min={GLOBAL_VOLUME_MIN}\n            max={GLOBAL_VOLUME_MAX}\n            onChange={value => {\n              APP.store.update({\n                preferences: {\n                  globalMediaVolume: value\n                }\n              });\n            }}\n          >\n            <p className={classNames(styles.propText)}>\n              <FormattedMessage id=\"audio-debug-view.global.mediaVolume\" defaultMessage=\"Media Volume\" />\n            </p>\n          </SliderProperty>\n          <SliderProperty\n            defaultValue={preferences.globalSFXVolume}\n            step={GLOBAL_VOLUME_STEP}\n            min={GLOBAL_VOLUME_MIN}\n            max={GLOBAL_VOLUME_MAX}\n            onChange={value => {\n              APP.store.update({\n                preferences: {\n                  globalSFXVolume: value\n                }\n              });\n            }}\n          >\n            <p className={classNames(styles.propText)}>\n              <FormattedMessage id=\"audio-debug-view.global.sfxVolume\" defaultMessage=\"SFX Volume\" />\n            </p>\n          </SliderProperty>\n        </CollapsiblePanel>\n        <div style={{ display: \"flex\" }}>\n          <CollapsiblePanel\n            title={<FormattedMessage id=\"audio-debug-panel.audio-debug-avatar-title\" defaultMessage=\"Avatar\" />}\n            border\n            grow\n          >\n            <SelectProperty\n              defaultValue={avatarSettings.distanceModel}\n              options={DISTANCE_MODEL_OPTIONS}\n              onChange={value => {\n                const newSetting = { distanceModel: value };\n                if (value === DistanceModelType.Linear && avatarSettings.rolloffFactor > 1.0) {\n                  newSetting.rolloffFactor = 1.0;\n                }\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, newSetting);\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.distanceModel\" defaultMessage=\"Distance Model\" />\n              </p>\n            </SelectProperty>\n            <SliderProperty\n              defaultValue={avatarSettings.rolloffFactor}\n              step={avatarSettings.distanceModel === DistanceModelType.Linear ? ROLLOFF_LIN_STEP : ROLLOFF_STEP}\n              min={avatarSettings.distanceModel === DistanceModelType.Linear ? ROLLOFF_LIN_MIN : ROLLOFF_MIN}\n              max={avatarSettings.distanceModel === DistanceModelType.Linear ? ROLLOFF_LIN_MAX : ROLLOFF_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, { rolloffFactor: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.rolloffFactor\" defaultMessage=\"Rolloff\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={avatarSettings.refDistance}\n              step={DISTANCE_STEP}\n              min={DISTANCE_MIN}\n              max={DISTANCE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, { refDistance: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.refDistance\" defaultMessage=\"Ref Distance\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={avatarSettings.maxDistance}\n              step={DISTANCE_STEP}\n              min={DISTANCE_MIN}\n              max={DISTANCE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, { maxDistance: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.maxDistance\" defaultMessage=\"Max Distance\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={avatarSettings.coneInnerAngle}\n              step={ANGLE_STEP}\n              min={ANGLE_MIN}\n              max={ANGLE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, { coneInnerAngle: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.innerAngle\" defaultMessage=\"Inner Angle\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={avatarSettings.coneOuterAngle}\n              step={ANGLE_STEP}\n              min={ANGLE_MIN}\n              max={ANGLE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, { coneOuterAngle: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.outerAngle\" defaultMessage=\"Outer Angle\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={avatarSettings.coneOuterGain}\n              step={GAIN_STEP}\n              min={GAIN_MIN}\n              max={GAIN_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.AVATAR_AUDIO_SOURCE, { coneOuterGain: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.avatar.outerGain\" defaultMessage=\"Outer Gain\" />\n              </p>\n            </SliderProperty>\n          </CollapsiblePanel>\n          <CollapsiblePanel\n            title={<FormattedMessage id=\"audio-debug-panel.audio-debug-media-title\" defaultMessage=\"Media\" />}\n            border\n            grow\n          >\n            <SelectProperty\n              defaultValue={mediaSettings.distanceModel}\n              options={DISTANCE_MODEL_OPTIONS}\n              onChange={value => {\n                const newSetting = { distanceModel: value };\n                if (value === DistanceModelType.Linear && mediaSettings.rolloffFactor > 1.0) {\n                  newSetting.rolloffFactor = 1.0;\n                }\n                onSettingChange(SourceType.MEDIA_VIDEO, newSetting);\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.distanceModel\" defaultMessage=\"Distance Model\" />\n              </p>\n            </SelectProperty>\n            <SliderProperty\n              defaultValue={mediaSettings.rolloffFactor}\n              step={mediaSettings.distanceModel === DistanceModelType.Linear ? ROLLOFF_LIN_STEP : ROLLOFF_STEP}\n              min={mediaSettings.distanceModel === DistanceModelType.Linear ? ROLLOFF_LIN_MIN : ROLLOFF_MIN}\n              max={mediaSettings.distanceModel === DistanceModelType.Linear ? ROLLOFF_LIN_MAX : ROLLOFF_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.MEDIA_VIDEO, { rolloffFactor: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.rolloffFactor\" defaultMessage=\"Rolloff\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={mediaSettings.refDistance}\n              step={DISTANCE_STEP}\n              min={DISTANCE_MIN}\n              max={DISTANCE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.MEDIA_VIDEO, { refDistance: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.refDistance\" defaultMessage=\"Ref Distance\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={mediaSettings.maxDistance}\n              step={DISTANCE_STEP}\n              min={DISTANCE_MIN}\n              max={DISTANCE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.MEDIA_VIDEO, { maxDistance: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.maxDistance\" defaultMessage=\"Max Distance\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={mediaSettings.coneInnerAngle}\n              step={ANGLE_STEP}\n              min={ANGLE_MIN}\n              max={ANGLE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.MEDIA_VIDEO, { coneInnerAngle: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.innerAngle\" defaultMessage=\"Inner Angle\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={mediaSettings.coneOuterAngle}\n              step={ANGLE_STEP}\n              min={ANGLE_MIN}\n              max={ANGLE_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.MEDIA_VIDEO, { coneOuterAngle: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.outerAngle\" defaultMessage=\"Outer Angle\" />\n              </p>\n            </SliderProperty>\n            <SliderProperty\n              defaultValue={mediaSettings.coneOuterGain}\n              step={GAIN_STEP}\n              min={GAIN_MIN}\n              max={GAIN_MAX}\n              onChange={value => {\n                onSettingChange(SourceType.MEDIA_VIDEO, { coneOuterGain: value });\n              }}\n            >\n              <p className={classNames(styles.propText)}>\n                <FormattedMessage id=\"audio-debug-view.media.outerGain\" defaultMessage=\"Outer Gain\" />\n              </p>\n            </SliderProperty>\n          </CollapsiblePanel>\n        </div>\n      </CollapsiblePanel>\n    </div>\n  );\n}\n\nAudioDebugPanel.propTypes = {\n  isNarrow: PropTypes.bool,\n  collapsed: PropTypes.bool,\n  onCollapsed: PropTypes.func,\n  children: PropTypes.node\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { DataPanel } from \"./DataPanel.js\";\nimport { CollapsiblePanel } from \"./CollapsiblePanel.js\";\nimport { Button } from \"../input/Button.js\";\nimport styles from \"./RtcDebugPanel.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { AudioDebugPanel } from \"./AudioDebugPanel\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nconst TransportType = {\n  SEND: \"send_transport\",\n  RECEIVE: \"receive_transport\"\n};\n\nconst StatsType = {\n  INBOUND_RTP: \"inbound-rtp\",\n  OUTBOUND_RTP: \"outbound-rtp\",\n  LOCAL_CANDIDATE: \"local-candidate\",\n  REMOTE_CANDIDATE: \"remote-candidate\",\n  CANDIDATE_PAIR: \"candidate-pair\",\n  TRANSPORT: \"transport\"\n};\n\nconst ERROR_COLOR = \"#8b1c00\";\nconst STATS_REFRESH_TIME = 2000;\nconst PRODUCERS_KEY = \"producers\";\nconst CONSUMERS_KEY = \"consumers\";\nconst MEDIASOUP_DOC_BASE_URL = \"https://mediasoup.org/documentation/v3/libmediasoupclient/api/\";\nconst MDN_DOC_BASE_URL = \"https://developer.mozilla.org/en-US/docs/Web/API/\";\n\nconst MessageButtonStyle = {\n  width: \"auto\",\n  alignSelf: \"center\",\n  margin: \"5px\",\n  padding: \"4px 18px\",\n  fontSize: \"12px\",\n  minWidth: \"120px\"\n};\n\nconst isFirefox = navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n\nfunction capitalize(str) {\n  return str ? str.replace(/\\b\\w/g, c => c.toUpperCase()) : \"\";\n}\n\nfunction download(filename, text) {\n  const element = document.createElement(\"a\");\n  element.setAttribute(\"href\", \"data:text/plain;charset=utf-8,\" + encodeURIComponent(text));\n  element.setAttribute(\"download\", filename);\n\n  element.style.display = \"none\";\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}\n\nexport function PanelMessageButton({ children, ...rest }) {\n  return (\n    <Button {...rest} style={MessageButtonStyle}>\n      {children}\n    </Button>\n  );\n}\n\nPanelMessageButton.propTypes = {\n  children: PropTypes.node\n};\n\nfunction TrackStatsPanel({ title, data, xAxis, yAxis, stats }) {\n  const props = {\n    id: data.id,\n    opened: data.opened,\n    paused: data.paused,\n    kind: data.kind,\n    codec: data.codec\n  };\n  if (data.kind === \"video\") {\n    (data.spatialLayer !== undefined || data.temporalLayer !== undefined) &&\n      (props[\"currentLayers\"] = `S[${data.spatialLayer}] T[${data.temporalLayer}]`);\n    data.score != undefined &&\n      (props[\"score\"] = `S[${data.score?.score}] P[${data.score?.producerScore}][${data.score?.producerScores}]`);\n    data.frameRate != undefined && (props[\"frameRate\"] = `${data.frameRate}`);\n    data.width != undefined && (props[\"width\"] = `${data.width}`);\n    data.height != undefined && (props[\"height\"] = `${data.height}`);\n  }\n\n  const backgroundColor = !data.opened || !stats?.speed ? ERROR_COLOR : null;\n  return (\n    <DataPanel title={title} data={props} backgroundColor={backgroundColor}>\n      {data?.track && (\n        <DataPanel\n          key={data.id}\n          data={data.track}\n          title={<FormattedMessage id=\"rtc-debug-panel.track-panel-title\" defaultMessage=\"Track\" />}\n        />\n      )}\n      {stats && (\n        <DataPanel\n          key={stats.rtpStats?.id}\n          graphData={stats.graph.slice()}\n          width={\"120px\"}\n          height={\"50px\"}\n          color={\"green\"}\n          speed={stats.speed}\n          data={stats.rtpStats}\n          xAxis={xAxis}\n          yAxis={yAxis}\n          title={<FormattedMessage id=\"rtc-debug-panel.stats-panel-title\" defaultMessage=\"Stats\" />}\n        />\n      )}\n    </DataPanel>\n  );\n}\n\nTrackStatsPanel.propTypes = {\n  title: PropTypes.node,\n  data: PropTypes.object,\n  xAxis: PropTypes.string,\n  yAxis: PropTypes.string,\n  stats: PropTypes.object,\n  backgroundColor: PropTypes.string\n};\n\nfunction TransportPanel({ title, data, candidates, producers, consumers, isButtonEnabled, onRestart }) {\n  const error = producers?.some(producer => {\n    return !producer.props?.data?.opened || !producer.props?.stats?.speed;\n  });\n  const backgroundColor = error ? ERROR_COLOR : null;\n  return (\n    <CollapsiblePanel key={title} title={title} border url={`${MEDIASOUP_DOC_BASE_URL}#Transport`} data={data}>\n      <PanelMessageButton onClick={onRestart} disabled={!isButtonEnabled} preset=\"accept\">\n        <FormattedMessage id=\"rtc-debug-panel.restart-ice-button\" defaultMessage=\"Restart ICE\" />\n      </PanelMessageButton>\n      <CollapsiblePanel\n        key={`Candidates`}\n        title={<FormattedMessage id=\"rtc-debug-panel.local-candidates-panel-title\" defaultMessage=\"Candidates\" />}\n        row\n        url={`${MDN_DOC_BASE_URL}RTCIceCandidate`}\n        border\n        backgroundColor={candidates?.length === 0 && data?.state === \"connected\" && data?.opened ? ERROR_COLOR : null}\n      >\n        {(candidates?.length && candidates) || (\n          <p className={classNames(styles.rtcLogMsg)}>\n            <FormattedMessage id=\"rtc-debug-panel.local-no-candidates-message\" defaultMessage=\"No Candidates\" />\n          </p>\n        )}\n      </CollapsiblePanel>\n      {(producers?.length && (\n        <CollapsiblePanel\n          key={`Local producers`}\n          title={<FormattedMessage id=\"rtc-debug-panel.local-producers-panel-title\" defaultMessage=\"Local Producers\" />}\n          row\n          url={`${MEDIASOUP_DOC_BASE_URL}#Producer`}\n          border\n          collapsed\n          backgroundColor={backgroundColor}\n        >\n          {producers}\n        </CollapsiblePanel>\n      )) ||\n        null}\n      {consumers || null}\n    </CollapsiblePanel>\n  );\n}\n\nTransportPanel.propTypes = {\n  candidates: PropTypes.array,\n  producers: PropTypes.array,\n  consumers: PropTypes.array,\n  data: PropTypes.object,\n  onRestart: PropTypes.func,\n  title: PropTypes.node,\n  isButtonEnabled: PropTypes.bool\n};\n\nfunction SignalingPanel({ data, onConnect, onDisconnect }) {\n  return (\n    <CollapsiblePanel\n      title={<FormattedMessage id=\"rtc-debug-panel.signaling-panel-title\" defaultMessage=\"Signaling\" />}\n      border\n      data={data}\n    >\n      <PanelMessageButton\n        onClick={() => {\n          if (data.connected) {\n            onDisconnect();\n          } else {\n            onConnect();\n          }\n        }}\n        disabled={false}\n        preset=\"accept\"\n      >\n        {data.connected ? (\n          <FormattedMessage id=\"rtc-debug-panel.disconnect-signaling-button\" defaultMessage=\"Disconnect\" />\n        ) : (\n          <FormattedMessage id=\"rtc-debug-panel.connect-signaling-button\" defaultMessage=\"Connect\" />\n        )}\n      </PanelMessageButton>\n    </CollapsiblePanel>\n  );\n}\n\nSignalingPanel.propTypes = {\n  data: PropTypes.object,\n  onConnect: PropTypes.func,\n  onDisconnect: PropTypes.func\n};\n\nexport default class RtcDebugPanel extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    store: PropTypes.object,\n    scene: PropTypes.object,\n    intl: PropTypes.object,\n    presences: PropTypes.object,\n    history: PropTypes.object,\n    sessionId: PropTypes.string,\n    showRtcDebug: PropTypes.bool,\n    showAudioDebug: PropTypes.bool\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      log: [],\n      collapsed: { Local: false, Log: isMobile, Remote: true, Audio: true }\n    };\n  }\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"rtc_event\", this.logEvent);\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.runStats(true);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"rtc_event\", this.logEvent);\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.runStats(false);\n  }\n\n  logEvent = e => {\n    const currentLog = this.state.log.slice(-200) || [];\n    currentLog.push(e.detail);\n    this.setState({\n      log: currentLog\n    });\n  };\n\n  storeUpdated = () => {\n    const showPanel = this.props.store.state.preferences.showRtcDebugPanel;\n    this.setState({ showPanel: showPanel });\n  };\n\n  getDeviceData() {\n    let result = {};\n    const device = APP.dialog._mediasoupDevice;\n    if (device) {\n      result[\"loaded\"] = !device._closed ? true : false;\n      result[\"codecs\"] = device._recvRtpCapabilities?.codecs.map(\n        codec => \"[\" + codec.mimeType + \"/\" + codec.clockRate + \"]\"\n      );\n      result = {\n        ...result,\n        ...APP.dialog.downlinkBwe\n      };\n    }\n    return result;\n  }\n\n  async getCandidatesData(peer) {\n    const result = {};\n    const stats = await peer.getStats();\n    let selectedCandidatePairId = null;\n    if (!isFirefox) {\n      for (const data of stats.values()) {\n        if (data[\"type\"] === StatsType.TRANSPORT) {\n          selectedCandidatePairId = data[\"selectedCandidatePairId\"];\n        }\n      }\n    }\n    for (const data of stats.values()) {\n      if (data[\"type\"] === StatsType.CANDIDATE_PAIR) {\n        const candidatePair = data;\n        let isCandidate = false;\n        if (isFirefox) {\n          isCandidate = candidatePair && candidatePair[\"selected\"] && candidatePair[\"state\"] === \"succeeded\";\n        } else {\n          isCandidate = candidatePair[\"id\"] === selectedCandidatePairId;\n        }\n        if (isCandidate) {\n          for (const values of stats.values()) {\n            if (candidatePair[\"localCandidateId\"] === values[\"id\"]) {\n              result[StatsType.LOCAL_CANDIDATE] = values;\n            } else if (candidatePair[\"remoteCandidateId\"] === values[\"id\"]) {\n              result[StatsType.REMOTE_CANDIDATE] = values;\n            }\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  async getTransportData(type) {\n    const result = {};\n    let transport;\n    if (type === TransportType.SEND) {\n      transport = APP.dialog._sendTransport;\n    } else if (type === TransportType.RECEIVE) {\n      transport = APP.dialog._recvTransport;\n    }\n    const opened = (transport && !transport._closed && true) || false;\n    result[\"opened\"] = opened;\n    if (transport) {\n      result[\"state\"] = opened ? transport._connectionState : \"closed\";\n      result[\"id\"] = transport._id;\n      result[PRODUCERS_KEY] = [];\n      result[CONSUMERS_KEY] = [];\n      transport._producers.forEach(producer => {\n        result[PRODUCERS_KEY].push(this.getProducerConsumerData(producer));\n      });\n      transport._consumers.forEach(consumer => {\n        result[CONSUMERS_KEY].push(this.getProducerConsumerData(consumer));\n      });\n      opened && (result[\"candidates\"] = await this.getCandidatesData(transport));\n    }\n    return result;\n  }\n\n  profileFromPresence([, data]) {\n    const meta = data.metas[data.metas.length - 1];\n    return meta.profile;\n  }\n\n  profileFromConsumer(consumer) {\n    return Object.entries(this.props.presences || {})\n      .filter(([k]) => k === consumer._appData.peerId)\n      .map(this.profileFromPresence)\n      .shift();\n  }\n\n  getProducerConsumerData(peer) {\n    const result = {};\n    result[\"opened\"] = !peer._closed;\n    if (peer) {\n      const profile = Object.entries(this.props.presences || {})\n        .filter(([k]) => k === peer._appData.peerId)\n        .map(this.profileFromPresence)\n        .shift();\n      result[\"id\"] = peer._id;\n      result[\"paused\"] = peer._paused;\n      result[\"track\"] = this.getTrackData(peer);\n      result[\"kind\"] = peer._kind || result[\"track\"].kind;\n      result[\"codec\"] = peer.rtpParameters.codecs[0].mimeType.split(\"/\")[1];\n      result[\"name\"] = profile ? profile.displayName : \"N/A\";\n      result[\"peerId\"] = peer._appData.peerId;\n\n      const stats = APP.dialog.consumerStats[peer._id];\n      if (result[\"kind\"] === \"video\" && stats) {\n        result[\"spatialLayer\"] = stats[\"spatialLayer\"];\n        result[\"temporalLayer\"] = stats[\"temporalLayer\"];\n        result[\"score\"] = stats[\"score\"];\n      }\n    }\n    return result;\n  }\n\n  getTrackData(owner) {\n    const result = {};\n    result[\"id\"] = owner._track.id;\n    result[\"enabled\"] = (owner._track !== null && owner._track.enabled && true) || false;\n    result[\"kind\"] = owner._track.kind;\n    result[\"muted\"] = owner._track.muted;\n    result[\"state\"] = owner._track.readyState;\n    return result;\n  }\n\n  getSignalingData() {\n    return { connected: APP.dialog._protoo && APP.dialog._protoo.connected };\n  }\n\n  async getServerData() {\n    return await APP.dialog.getServerStats();\n  }\n\n  async getRtpStatsData(peer, type) {\n    const result = {};\n    const stats = await peer.getStats();\n    for (const data of stats.values()) {\n      if (data[\"type\"] === type) {\n        return data;\n      }\n    }\n    return result;\n  }\n\n  getGraphData(id, stats) {\n    let lastStats = this.state.statsData?.[id]?.last;\n    const bytesSent = stats?.bytesSent || 0;\n    const bytesReceived = stats?.bytesReceived || 0;\n    const packetsSent = stats?.packetsSent || 0;\n    const packetsReceived = stats?.packetsReceived || 0;\n    const timestamp = stats?.timestamp || 0;\n    const bytesSentDelta = bytesSent - lastStats?.bytesSent || 0;\n    const bytesReceivedDelta = bytesReceived - lastStats?.bytesReceived || 0;\n    const packetsSentDelta = packetsSent - lastStats?.packetsSent || 0;\n    const packetsReceivedDelta = packetsReceived - lastStats?.packetsReceived || 0;\n    const timeDelta = timestamp - lastStats?.timestamp || 0;\n    let graphData = this.state.statsData?.[id]?.graph;\n    if (!graphData) {\n      const data = new Array(20);\n      data.fill({\n        bytesSent: 0,\n        bytesReceived: 0,\n        packetsSent: 0,\n        packetsReceived: 0,\n        timeDelta: 0\n      });\n      graphData = data;\n    }\n    graphData.shift();\n    graphData.push({\n      bytesSent: bytesSentDelta,\n      bytesReceived: bytesReceivedDelta,\n      packetsSent: packetsSentDelta,\n      packetsReceived: packetsReceivedDelta,\n      timeDelta: timeDelta\n    });\n    lastStats = {\n      bytesSent,\n      bytesReceived,\n      packetsSent,\n      packetsReceived,\n      timestamp\n    };\n    return {\n      lastStats: lastStats,\n      graphData: graphData\n    };\n  }\n\n  /**\n   * @param {string} id Peer id.\n   * @param {string} key Stats key to use for generating the speed value.\n   */\n  getPeerSpeed(id, key) {\n    let speed = \"0.00\";\n    const graphData = this.state.statsData?.[id]?.graph;\n    if (graphData) {\n      const lastData = graphData[graphData.length - 1];\n      if (lastData) {\n        speed = ((lastData[key] / 1024) * (1 / (lastData.timeDelta / 1000)) || 0).toFixed(2);\n      }\n    }\n\n    return speed;\n  }\n\n  /**\n   * Starts/stops the execution of a perioding data updating task. Every time this is executed all the debugging panel data is\n   * gathered and the component state is updated to reflect the new data.\n   * @param {bool} running Sets the running state for this task, true starts the tas, false stops it.\n   */\n  async runStats(running) {\n    if (running && this.state) {\n      const taskId = setInterval(() => {\n        (async () => {\n          try {\n            const deviceData = this.getDeviceData();\n            const serverData = this.state.collapsed.Remote ? {} : await this.getServerData();\n            const signalingData = this.getSignalingData();\n\n            // Tranports data\n            const transportsData = {};\n            transportsData[TransportType.SEND] = await this.getTransportData(TransportType.SEND);\n            transportsData[TransportType.RECEIVE] = await this.getTransportData(TransportType.RECEIVE);\n\n            // Populate graph, speed and stats data\n            const statsData = {};\n            if (APP.dialog._micProducer) {\n              const id = APP.dialog._micProducer.id;\n              const peer = APP.dialog._micProducer;\n              const speedData = this.getPeerSpeed(id, \"bytesSent\");\n              const rtpStatsData = await this.getRtpStatsData(peer, StatsType.OUTBOUND_RTP);\n              const { lastStats, graphData } = this.getGraphData(id, rtpStatsData);\n              statsData[id] = {};\n              statsData[id][\"speed\"] = speedData;\n              statsData[id][\"graph\"] = graphData;\n              statsData[id][\"last\"] = lastStats;\n              statsData[id][\"rtpStats\"] = rtpStatsData;\n            }\n            if (APP.dialog._cameraProducer) {\n              const id = APP.dialog._cameraProducer.id;\n              const peer = APP.dialog._cameraProducer;\n              const speedData = this.getPeerSpeed(id, \"bytesSent\");\n              const rtpStatsData = await this.getRtpStatsData(peer, StatsType.OUTBOUND_RTP);\n              const { lastStats, graphData } = this.getGraphData(id, rtpStatsData);\n              statsData[id] = {};\n              statsData[id][\"speed\"] = speedData;\n              statsData[id][\"graph\"] = graphData;\n              statsData[id][\"last\"] = lastStats;\n              statsData[id][\"rtpStats\"] = rtpStatsData;\n            }\n            if (APP.dialog._shareProducer) {\n              const id = APP.dialog._shareProducer.id;\n              const peer = APP.dialog._shareProducer;\n              const speedData = this.getPeerSpeed(id, \"bytesSent\");\n              const rtpStatsData = await this.getRtpStatsData(peer, StatsType.OUTBOUND_RTP);\n              const { lastStats, graphData } = this.getGraphData(id, rtpStatsData);\n              statsData[id] = {};\n              statsData[id][\"speed\"] = speedData;\n              statsData[id][\"graph\"] = graphData;\n              statsData[id][\"last\"] = lastStats;\n              statsData[id][\"rtpStats\"] = rtpStatsData;\n            }\n            for (const consumer of APP.dialog._consumers) {\n              const id = consumer[0];\n              const peer = consumer[1];\n              const speedData = this.getPeerSpeed(id, \"bytesReceived\");\n              const rtpStatsData = await this.getRtpStatsData(peer, StatsType.INBOUND_RTP);\n              const { lastStats, graphData } = this.getGraphData(id, rtpStatsData);\n              statsData[id] = {};\n              statsData[id][\"speed\"] = speedData;\n              statsData[id][\"graph\"] = graphData;\n              statsData[id][\"last\"] = lastStats;\n              statsData[id][\"rtpStats\"] = rtpStatsData;\n            }\n\n            // Update state\n            this.setState({\n              signalingData,\n              serverData,\n              deviceData,\n              statsData,\n              transportsData\n            });\n          } catch (e) {\n            console.log(`Run Stats error: ${e}`);\n          }\n        })();\n      }, STATS_REFRESH_TIME);\n      this.setState({ taskId: taskId });\n    } else {\n      clearInterval(this.state.taskId);\n    }\n  }\n\n  restartSendICE = () => {\n    APP.dialog.restartSendICE();\n  };\n\n  restartRecvICE = () => {\n    APP.dialog.restartRecvICE();\n  };\n\n  connectSignaling = () => {\n    APP.dialog.connect({\n      serverUrl: APP.dialog._serverUrl,\n      roomId: APP.dialog._roomId,\n      joinToken: APP.hubChannel.token,\n      serverParams: APP.dialog._serverParams,\n      scene: APP.dialog.scene,\n      clientId: APP.dialog._clientId,\n      forceTcp: APP.dialog._forceTcp,\n      forceTurn: APP.dialog._forceTurn,\n      iceTransportPolicy: APP.dialog._iceTransportPolicy\n    });\n  };\n\n  disconnectSignaling = () => {\n    APP.dialog.disconnect();\n  };\n\n  colorForLevel = level => {\n    switch (level) {\n      case \"error\":\n        return \"red\";\n      case \"warn\":\n        return \"orange\";\n      default:\n        return \"white\";\n    }\n  };\n\n  createLogMsgs = () => {\n    const logLines = [];\n    this.state.log\n      ?.slice()\n      .reverse()\n      .forEach((log, index) => {\n        logLines.push(<span key={index << 2} className={classNames(styles.rtcLogTime)}>{`[${log.time}] `}</span>);\n        logLines.push(\n          <span key={(index << 2) | 0x01} className={classNames(styles.rtcLogTag)}>{`[${log.tag}] `}</span>\n        );\n        logLines.push(\n          <span\n            key={(index << 2) | 0x02}\n            className={classNames(styles.rtcLogMsg)}\n            style={{ color: this.colorForLevel(log.level) }}\n          >\n            {log.msg}\n          </span>\n        );\n        logLines.push(<br key={(index << 2) | 0x03} />);\n      });\n    return logLines;\n  };\n\n  createLog = () => {\n    const logLines = [];\n    this.state.log\n      ?.slice()\n      .reverse()\n      .forEach(log => {\n        logLines.push(`[${log.time}] [${log.tag}] ${log.msg}`);\n      });\n    return logLines.join(\"\\r\");\n  };\n\n  createCandidates(candidates) {\n    const components = [];\n    if (candidates) {\n      candidates[StatsType.LOCAL_CANDIDATE] &&\n        components.push(\n          <DataPanel\n            key={StatsType.LOCAL_CANDIDATE}\n            data={candidates[StatsType.LOCAL_CANDIDATE]}\n            title={\n              <FormattedMessage id=\"rtc-debug-panel.local-candidate-panel-title\" defaultMessage=\"Local Candidate\" />\n            }\n          />\n        );\n      candidates[StatsType.REMOTE_CANDIDATE] &&\n        components.push(\n          <DataPanel\n            key={StatsType.REMOTE_CANDIDATE}\n            data={candidates[StatsType.REMOTE_CANDIDATE]}\n            title={\n              <FormattedMessage id=\"rtc-debug-panel.remote-candidate-panel-title\" defaultMessage=\"Remote Candidate\" />\n            }\n          />\n        );\n    }\n    return components;\n  }\n\n  createProducers(producers = [], stats) {\n    return producers.map(producer => {\n      return (\n        <TrackStatsPanel\n          key={producer.id}\n          title={\n            <FormattedMessage\n              id=\"rtc-debug-panel.producer-panel-title\"\n              defaultMessage=\"{kind} Producer\"\n              values={{ kind: capitalize(producer?.kind) }}\n            />\n          }\n          data={producer}\n          xAxis={\"timeDelta\"}\n          yAxis={\"bytesSent\"}\n          stats={stats[producer.id]}\n        />\n      );\n    });\n  }\n\n  createConsumers(consumers, stats) {\n    const reducedConsumers =\n      consumers?.reduce((map, consumer) => {\n        map[consumer.peerId] = map[consumer.peerId] || {};\n        map[consumer.peerId][\"name\"] = consumer.name;\n        map[consumer.peerId][\"peerId\"] = consumer.peerId;\n        map[consumer.peerId][\"consumers\"] = map[consumer.peerId][\"consumers\"] || [];\n        map[consumer.peerId][\"consumers\"].push(consumer);\n        return map;\n      }, []) || [];\n    const components = [];\n    for (const [, reducedConsumer] of Object.entries(reducedConsumers)) {\n      const consumerPanels = reducedConsumer.consumers.map(consumer => {\n        return (\n          <TrackStatsPanel\n            key={consumer.id}\n            title={\n              <FormattedMessage\n                id=\"rtc-debug-panel.consumer-panel-title\"\n                defaultMessage=\"{kind} Consumer\"\n                values={{ kind: capitalize(consumer?.kind) }}\n              />\n            }\n            data={consumer}\n            xAxis={\"timeDelta\"}\n            yAxis={\"bytesReceived\"}\n            stats={stats[consumer.id]}\n          />\n        );\n      });\n      const error = reducedConsumer?.consumers?.some(consumer => {\n        return !consumer.opened || !stats[consumer.id]?.speed;\n      });\n      const backgroundColor = error ? ERROR_COLOR : null;\n      components.push(\n        <CollapsiblePanel\n          key={reducedConsumer.name}\n          title={reducedConsumer.name}\n          url={`${MEDIASOUP_DOC_BASE_URL}#Consumer`}\n          data={{ peerId: reducedConsumer.peerId }}\n          border\n          collapsed\n          backgroundColor={backgroundColor}\n        >\n          <CollapsiblePanel row>{consumerPanels}</CollapsiblePanel>\n        </CollapsiblePanel>\n      );\n    }\n    return components;\n  }\n\n  createRemoteTransports(data) {\n    const transports = [];\n    if (data) {\n      for (const transportId in data) {\n        const transport = data[transportId];\n        const producers = [];\n        if (transport?.producers) {\n          for (const producerId in transport.producers) {\n            const stats = transport.producers[producerId];\n            stats.forEach((stat, index) => {\n              producers.push(\n                <DataPanel\n                  key={`${producerId}${index}`}\n                  data={stat}\n                  title={\n                    <FormattedMessage\n                      id=\"rtc-debug-panel.producer-transport-stats-title\"\n                      defaultMessage=\"{kind} Stats\"\n                      values={{ kind: capitalize(stat.kind) }}\n                    />\n                  }\n                />\n              );\n            });\n          }\n        }\n        const consumers = [];\n        if (transport?.consumers) {\n          for (const consumerId in transport.consumers) {\n            const stats = transport.consumers[consumerId];\n            stats.forEach((stat, index) => {\n              consumers.push(\n                <DataPanel\n                  key={`${consumerId}${index}`}\n                  data={stat}\n                  title={\n                    <FormattedMessage\n                      id=\"rtc-debug-panel.consumer-transport-stats-title\"\n                      defaultMessage=\"{kind} Stats\"\n                      values={{ kind: capitalize(stat.kind) }}\n                    />\n                  }\n                />\n              );\n            });\n          }\n        }\n        transports.push(\n          <CollapsiblePanel\n            key={transportId}\n            title={`${transport.name} Transport`}\n            url={`${MDN_DOC_BASE_URL}RTCStatsReport`}\n            data={{ id: transportId }}\n            border\n          >\n            {(producers?.length && (\n              <CollapsiblePanel\n                key={`producers`}\n                title={\n                  <FormattedMessage\n                    id=\"rtc-debug-panel.producer-transport-stats-panel-title\"\n                    defaultMessage=\"Producer Stats\"\n                  />\n                }\n                row\n                wrap\n                url={`${MDN_DOC_BASE_URL}RTCStatsReport`}\n                border\n              >\n                {producers}\n              </CollapsiblePanel>\n            )) ||\n              null}\n            {(consumers?.length && (\n              <CollapsiblePanel\n                key={`consumers`}\n                title={\n                  <FormattedMessage\n                    id=\"rtc-debug-panel.consumer-transport-stats-panel-title\"\n                    defaultMessage=\"Consumer Stats\"\n                  />\n                }\n                row\n                wrap\n                url={`${MDN_DOC_BASE_URL}RTCStatsReport`}\n                border\n              >\n                {consumers}\n              </CollapsiblePanel>\n            )) ||\n              null}\n          </CollapsiblePanel>\n        );\n      }\n    }\n    return transports;\n  }\n\n  onCollapse = (id, isCollapsed) => {\n    const title = id?.props[\"defaultMessage\"];\n    const collapsed = { ...this.state.collapsed };\n    if (isMobile || window.innerWidth < 500) {\n      for (const key of Object.keys(collapsed)) {\n        if (title === key) {\n          collapsed[key] = isCollapsed;\n        } else {\n          if (!isCollapsed) {\n            collapsed[key] = true;\n          }\n        }\n      }\n    } else {\n      collapsed[title] = isCollapsed;\n    }\n    this.setState({\n      collapsed\n    });\n  };\n\n  render() {\n    const { signalingData, serverData, statsData, deviceData, transportsData, collapsed } = this.state;\n    const isNarrow = isMobile || window.innerWidth < 500;\n    return (\n      <div>\n        <div className={classNames(styles.rtcDebugPanelRoot)}>\n          <div\n            className={classNames(styles.rtcStatusContainerLeft)}\n            style={{\n              height: isNarrow && !collapsed.Local && \"80%\",\n              maxHeight: isNarrow && !collapsed.Local && \"80%\"\n            }}\n          >\n            {this.props.showRtcDebug && (\n              <CollapsiblePanel\n                title={<FormattedMessage id=\"rtc-debug-panel.local-panel-title\" defaultMessage=\"Local\" />}\n                isRoot\n                border\n                grow\n                collapsed={collapsed.Local}\n                onCollapse={this.onCollapse}\n              >\n                {deviceData && (\n                  <CollapsiblePanel\n                    title={<FormattedMessage id=\"rtc-debug-panel.device-panel-title\" defaultMessage=\"Device\" />}\n                    border\n                    url={`${MEDIASOUP_DOC_BASE_URL}#Device`}\n                    data={deviceData}\n                  />\n                )}\n                {signalingData && (\n                  <SignalingPanel\n                    data={signalingData}\n                    onConnect={this.connectSignaling}\n                    onDisconnect={this.disconnectSignaling}\n                  />\n                )}\n                <div style={{ display: \"flex\", flexFlow: \"column\" }}>\n                  <TransportPanel\n                    title={\n                      <FormattedMessage\n                        id=\"rtc-debug-panel.send-transport-panel-title\"\n                        defaultMessage=\"Send Transport\"\n                      />\n                    }\n                    data={{\n                      id: transportsData?.[TransportType.SEND]?.id,\n                      opened: transportsData?.[TransportType.SEND]?.opened,\n                      state: transportsData?.[TransportType.SEND]?.state\n                    }}\n                    candidates={this.createCandidates(transportsData?.[TransportType.SEND]?.candidates)}\n                    producers={this.createProducers(transportsData?.[TransportType.SEND]?.producers, statsData)}\n                    onRestart={this.restartSendICE}\n                    isButtonEnabled={transportsData?.[TransportType.SEND]?.opened}\n                  />\n                </div>\n                <div style={{ display: \"flex\", flexFlow: \"column\" }}>\n                  <TransportPanel\n                    title={\n                      <FormattedMessage\n                        id=\"rtc-debug-panel.receive-transport-panel-title\"\n                        defaultMessage=\"Receive Transport\"\n                      />\n                    }\n                    data={{\n                      id: transportsData?.[TransportType.RECEIVE]?.id,\n                      opened: transportsData?.[TransportType.RECEIVE]?.opened,\n                      state: transportsData?.[TransportType.RECEIVE]?.state\n                    }}\n                    candidates={this.createCandidates(transportsData?.[TransportType.RECEIVE]?.candidates)}\n                    consumers={this.createConsumers(transportsData?.[TransportType.RECEIVE]?.consumers, statsData)}\n                    onRestart={this.restartRecvICE}\n                    isButtonEnabled={transportsData?.[TransportType.RECEIVE]?.opened}\n                  />\n                </div>\n              </CollapsiblePanel>\n            )}\n          </div>\n          <div className={classNames(styles.statusContainerMiddle)}>\n            {this.props.showAudioDebug && (\n              <AudioDebugPanel isNarrow collapsed={collapsed.Audio} onCollapsed={this.onCollapse} />\n            )}\n            {this.props.showRtcDebug && (\n              <div\n                className={classNames(styles.rtcLogContainer)}\n                style={{\n                  height: isNarrow && !collapsed.Log && \"80%\",\n                  maxHeight: isNarrow && !collapsed.Log && \"80%\"\n                }}\n              >\n                <CollapsiblePanel\n                  title={<FormattedMessage id=\"rtc-debug-panel.log-panel-title\" defaultMessage=\"Log\" />}\n                  isRoot\n                  border\n                  grow\n                  collapsed={collapsed.Log}\n                  onCollapse={this.onCollapse}\n                  clear={() => {\n                    this.setState({\n                      log: []\n                    });\n                  }}\n                  download={() => {\n                    download(\"rtc_log.txt\", this.createLog());\n                  }}\n                >\n                  <p className={classNames(styles.rtcLogMsgContainer)}>{this.createLogMsgs()}</p>\n                </CollapsiblePanel>\n              </div>\n            )}\n          </div>\n          <div\n            className={classNames(styles.rtcStatusContainerRight)}\n            style={{\n              height: isNarrow && !collapsed.Remote && \"80%\",\n              maxHeight: isNarrow && !collapsed.Remote && \"80%\"\n            }}\n          >\n            {this.props.showRtcDebug && (\n              <CollapsiblePanel\n                title={<FormattedMessage id=\"rtc-debug-panel.remote-panel-title\" defaultMessage=\"Remote\" />}\n                isRoot\n                border\n                grow\n                collapsed={collapsed.Remote}\n                onCollapse={this.onCollapse}\n              >\n                {this.createRemoteTransports(serverData)}\n              </CollapsiblePanel>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./LoadingScreenLayout.scss\";\nimport { Column } from \"../layout/Column\";\nimport { AppLogo } from \"../misc/AppLogo\";\n\nexport function LoadingScreenLayout({ center, bottom }) {\n  return (\n    <div className={styles.loadingScreenLayout}>\n      <Column center padding gap=\"lg\" className={styles.center}>\n        <AppLogo className={styles.logo} />\n        {center}\n      </Column>\n      {bottom && (\n        <Column center className={styles.bottom}>\n          {bottom}\n        </Column>\n      )}\n    </div>\n  );\n}\n\nLoadingScreenLayout.propTypes = {\n  center: PropTypes.node,\n  bottom: PropTypes.node\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { LoadingScreenLayout } from \"../layout/LoadingScreenLayout\";\nimport { Spinner } from \"../misc/Spinner\";\nimport { useRandomMessageTransition } from \"./useRandomMessageTransition\";\nexport function LoadingScreen({ message, infoMessages }) {\n  const infoMessage = useRandomMessageTransition(infoMessages);\n  return (\n    <LoadingScreenLayout\n      center={\n        <>\n          <Spinner />\n          <p>{message}</p>\n        </>\n      }\n      bottom={\n        <>\n          <h3>{infoMessage.heading}</h3>\n          <p>{infoMessage.message}</p>\n        </>\n      }\n    />\n  );\n}\n\nLoadingScreen.propTypes = {\n  message: PropTypes.node,\n  infoMessages: PropTypes.arrayOf(\n    PropTypes.shape({\n      heading: PropTypes.node.isRequired,\n      message: PropTypes.node.isRequired\n    })\n  )\n};\n\nLoadingScreen.defaultProps = {\n  infoMessages: []\n};\n","import { useEffect, useState, useRef, useCallback } from \"react\";\n\nexport function useRandomMessageTransition(messages, transitionDelay = 5000) {\n  const messageTimeoutRef = useRef();\n  const [index, setIndex] = useState(Math.round(Math.random() * (messages.length - 1)));\n\n  const queueNextMessage = useCallback(\n    () => {\n      messageTimeoutRef.current = setTimeout(() => {\n        setIndex(currentIndex => (currentIndex + 1) % messages.length);\n        queueNextMessage();\n      }, transitionDelay);\n    },\n    [setIndex, messages, transitionDelay]\n  );\n\n  useEffect(\n    () => {\n      queueNextMessage();\n\n      return () => {\n        clearTimeout(messageTimeoutRef.current);\n      };\n    },\n    [queueNextMessage]\n  );\n\n  return messages[index];\n}\n","import { useEffect, useReducer, useRef, useCallback } from \"react\";\nimport { useIntl, defineMessages } from \"react-intl\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"object-loading\":\n      return { ...state, objectCount: state.objectCount + 1, messageKey: \"loadingObjects\" };\n    case \"object-loaded\":\n      return { ...state, loadedCount: state.loadedCount + 1 };\n    case \"all-objects-loaded\":\n      return {\n        ...state,\n        allObjectsLoaded: true,\n        loading: !(state.environmentLoaded && state.networkConnected),\n        messageKey: state.environmentLoaded ? \"enteringRoom\" : \"loadingObjects\"\n      };\n    case \"environment-loaded\": {\n      const loaded = state.lazyLoadMedia\n        ? state.networkConnected && state.dialogConnected\n        : state.allObjectsLoaded && state.networkConnected && state.dialogConnected;\n      return {\n        ...state,\n        environmentLoaded: true,\n        loading: !loaded,\n        messageKey: state.lazyLoadMedia\n          ? loaded\n            ? \"enteringRoom\"\n            : \"connectingScene\"\n          : loaded\n            ? \"enteringRoom\"\n            : \"loadingObjects\"\n      };\n    }\n    case \"network-connected\":\n      return {\n        ...state,\n        networkConnected: true,\n        loading: state.lazyLoadMedia\n          ? !(state.environmentLoaded && state.dialogConnected)\n          : !(state.environmentLoaded && state.allObjectsLoaded && state.dialogConnected)\n      };\n    case \"dialog-connected\":\n      return {\n        ...state,\n        dialogConnected: true,\n        loading: state.lazyLoadMedia\n          ? !(state.environmentLoaded && state.networkConnected)\n          : !(state.environmentLoaded && state.allObjectsLoaded && state.networkConnected)\n      };\n  }\n}\n\n// defineMessages informs babel-plugin-react-intl what i18n data can be stripped/embedded when bundling.\nconst messages = defineMessages({\n  default: {\n    id: \"loading-screen.default\",\n    description: \"The scene has started loading.\",\n    defaultMessage: \"Loading scene...\"\n  },\n  loadingObjects: {\n    id: \"loading-screen.loading-objects\",\n    description: \"The loading progress. How many objects have finished loading?\",\n    defaultMessage: \"Loading objects {loadedCount}/{objectCount}\"\n  },\n  connectingScene: {\n    id: \"loading-screen.connecting\",\n    description: \"The scene is loaded, we are waiting for the networked scene to be connected to enter.\",\n    defaultMessage: \"Connecting to the scene...\"\n  },\n  enteringRoom: {\n    id: \"loading-screen.entering-room\",\n    description:\n      \"Once the scene has finished loading, this message tells uses that they will be entering the room shortly.\",\n    defaultMessage: \"Entering room...\"\n  }\n});\n\nexport function useRoomLoadingState(sceneEl) {\n  // Holds the id of the current\n  const loadingTimeoutRef = useRef();\n  const lazyLoadMedia = APP.store.state.preferences.lazyLoadSceneMedia;\n\n  const [{ loading, messageKey, objectCount, loadedCount }, dispatch] = useReducer(reducer, {\n    loading: !sceneEl.is(\"loaded\"),\n    messageKey: \"default\",\n    objectCount: 0,\n    loadedCount: 0,\n    allObjectsLoaded: false,\n    environmentLoaded: false,\n    networkConnected: false,\n    dialogConnected: false,\n    lazyLoadMedia\n  });\n\n  const onObjectLoading = useCallback(\n    () => {\n      clearTimeout(loadingTimeoutRef.current);\n      dispatch({ type: \"object-loading\" });\n    },\n    [dispatch]\n  );\n\n  const onObjectLoaded = useCallback(\n    () => {\n      clearTimeout(loadingTimeoutRef.current);\n\n      dispatch({ type: \"object-loaded\" });\n\n      // Objects can start loading as a result of loading another object. Wait 1.5 seconds before calling\n      // all-objects-loaded to try to catch loading all objects.\n      // TODO: Determine a better way to ensure the object dependency chain has resolved, or switch to a\n      // progressive loading model where all objects don't have to be loaded to enter the room.\n      loadingTimeoutRef.current = setTimeout(() => {\n        dispatch({ type: \"all-objects-loaded\" });\n      }, 1500);\n    },\n    [dispatch]\n  );\n\n  const onEnvironmentLoaded = useCallback(\n    () => {\n      dispatch({ type: \"environment-loaded\" });\n    },\n    [dispatch]\n  );\n\n  const onNetworkConnected = useCallback(\n    () => {\n      dispatch({ type: \"network-connected\" });\n    },\n    [dispatch]\n  );\n\n  const onDialogConnected = useCallback(\n    () => {\n      dispatch({ type: \"dialog-connected\" });\n    },\n    [dispatch]\n  );\n\n  useEffect(\n    () => {\n      // Once the scene has loaded the dependencies to this hook will change,\n      // the event listeners will be removed, and we can prevent adding them again.\n      if (loading) {\n        if (!lazyLoadMedia) {\n          sceneEl.addEventListener(\"model-loading\", onObjectLoading);\n          sceneEl.addEventListener(\"image-loading\", onObjectLoading);\n          sceneEl.addEventListener(\"pdf-loading\", onObjectLoading);\n          sceneEl.addEventListener(\"video-loading\", onObjectLoading);\n          sceneEl.addEventListener(\"model-loaded\", onObjectLoaded);\n          sceneEl.addEventListener(\"image-loaded\", onObjectLoaded);\n          sceneEl.addEventListener(\"pdf-loaded\", onObjectLoaded);\n          sceneEl.addEventListener(\"video-loaded\", onObjectLoaded);\n          sceneEl.addEventListener(\"model-error\", onObjectLoaded);\n        }\n        sceneEl.addEventListener(\"environment-scene-loaded\", onEnvironmentLoaded);\n        sceneEl.addEventListener(\"didConnectToNetworkedScene\", onNetworkConnected);\n        sceneEl.addEventListener(\"didConnectToDialog\", onDialogConnected);\n      }\n\n      return () => {\n        if (!lazyLoadMedia) {\n          sceneEl.removeEventListener(\"model-loading\", onObjectLoading);\n          sceneEl.removeEventListener(\"image-loading\", onObjectLoading);\n          sceneEl.removeEventListener(\"pdf-loading\", onObjectLoading);\n          sceneEl.removeEventListener(\"video-loading\", onObjectLoading);\n          sceneEl.removeEventListener(\"model-loaded\", onObjectLoaded);\n          sceneEl.removeEventListener(\"image-loaded\", onObjectLoaded);\n          sceneEl.removeEventListener(\"pdf-loaded\", onObjectLoaded);\n          sceneEl.removeEventListener(\"video-loaded\", onObjectLoaded);\n          sceneEl.removeEventListener(\"model-error\", onObjectLoaded);\n        }\n        sceneEl.removeEventListener(\"environment-scene-loaded\", onEnvironmentLoaded);\n        sceneEl.removeEventListener(\"didConnectToNetworkedScene\", onNetworkConnected);\n        sceneEl.removeEventListener(\"didConnectToDialog\", onDialogConnected);\n      };\n    },\n    [\n      sceneEl,\n      loading,\n      onObjectLoaded,\n      onObjectLoading,\n      onEnvironmentLoaded,\n      onNetworkConnected,\n      onDialogConnected,\n      lazyLoadMedia\n    ]\n  );\n\n  const intl = useIntl();\n\n  const message = intl.formatMessage(messages[messageKey], {\n    // Never show a loaded count that's greater than the object count\n    loadedCount: Math.min(loadedCount, objectCount),\n    objectCount\n  });\n\n  useEffect(\n    () => {\n      if (!loading) {\n        // The loaded state on the scene signifies that the loading screen is no longer visible,\n        // the initial scene was loaded, and the network connection is established.\n        sceneEl.addState(\"loaded\");\n      }\n    },\n    [sceneEl, loading]\n  );\n\n  // Ensure timeout is cleared on unmount.\n  useEffect(() => {\n    () => {\n      clearTimeout(loadingTimeoutRef.current);\n    };\n  }, []);\n\n  return { loading, message };\n}\n","import React, { useEffect, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useIntl } from \"react-intl\";\nimport { LoadingScreen } from \"./LoadingScreen\";\nimport { useRoomLoadingState } from \"./useRoomLoadingState\";\n\nexport function LoadingScreenContainer({ onLoaded, scene }) {\n  const intl = useIntl();\n\n  const { loading, message } = useRoomLoadingState(scene);\n\n  useEffect(\n    () => {\n      if (!loading) {\n        onLoaded();\n      }\n    },\n    [loading, onLoaded]\n  );\n\n  //TODO: Make these configurable\n  const infoMessages = useMemo(\n    () => [\n      {\n        heading: intl.formatMessage({ id: \"loading-screen.heading.tip\", defaultMessage: \"Tip:\" }),\n        message: intl.formatMessage({\n          id: \"loading-screen.message.keyboard-controls\",\n          defaultMessage: \"Press the Q & E keys to turn left and right.\"\n        })\n      },\n      {\n        heading: intl.formatMessage({ id: \"loading-screen.heading.whats-new\", defaultMessage: \"What's New?\" }),\n        message: intl.formatMessage(\n          {\n            id: \"loading-screen.message.whats-new\",\n            defaultMessage: \"You can now set the default locale in your preferences. <a>Read More</a>\"\n          },\n          {\n            // eslint-disable-next-line react/display-name\n            a: chunks => (\n              <a href=\"/whats-new\" target=\"_blank\">\n                {chunks}\n              </a>\n            )\n          }\n        )\n      }\n    ],\n    [intl]\n  );\n\n  return <LoadingScreen message={message} infoMessages={infoMessages} />;\n}\n\nLoadingScreenContainer.propTypes = {\n  scene: PropTypes.object.isRequired,\n  onLoaded: PropTypes.func.isRequired\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Toolbar.scss\";\nimport styleUtils from \"../styles/style-utils.scss\";\n\nexport function Toolbar({ className, left, center, right, ...rest }) {\n  return (\n    <div className={classNames(styles.toolbar, className)} {...rest}>\n      <div className={classNames(styles.content, styles.leftContent, styleUtils.showLg)}>{left}</div>\n      <div className={classNames(styles.content, styles.centerContent)}>{center}</div>\n      <div className={classNames(styles.content, styles.rightContent, styleUtils.showLg)}>{right}</div>\n    </div>\n  );\n}\n\nToolbar.propTypes = {\n  className: PropTypes.string,\n  left: PropTypes.node,\n  center: PropTypes.node,\n  right: PropTypes.node,\n  hideLeft: PropTypes.string,\n  hideRight: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./RoomLayout.scss\";\nimport { Toolbar } from \"./Toolbar\";\n\nexport function RoomLayout({\n  className,\n  viewportClassName,\n  sidebar,\n  sidebarClassName,\n  toolbarLeft,\n  toolbarCenter,\n  toolbarRight,\n  toolbarClassName,\n  modal,\n  viewport,\n  objectFocused,\n  streaming,\n  viewportRef,\n  ...rest\n}) {\n  return (\n    <div className={classNames(styles.roomLayout, { [styles.objectFocused]: objectFocused }, className)} {...rest}>\n      {sidebar && <div className={classNames(styles.sidebar, sidebarClassName)}>{sidebar}</div>}\n      <div className={classNames(styles.modalContainer, styles.viewport)}>{modal}</div>\n      {(toolbarLeft || toolbarCenter || toolbarRight) && (\n        <Toolbar\n          className={classNames(styles.main, styles.toolbar, toolbarClassName)}\n          left={toolbarLeft}\n          center={toolbarCenter}\n          right={toolbarRight}\n        />\n      )}\n      <div\n        className={classNames(styles.main, styles.viewport, { [styles.streaming]: streaming }, viewportClassName)}\n        ref={viewportRef}\n      >\n        {viewport}\n      </div>\n    </div>\n  );\n}\n\nRoomLayout.propTypes = {\n  className: PropTypes.string,\n  viewportClassName: PropTypes.string,\n  sidebar: PropTypes.node,\n  sidebarClassName: PropTypes.string,\n  toolbarLeft: PropTypes.node,\n  toolbarCenter: PropTypes.node,\n  toolbarRight: PropTypes.node,\n  toolbarClassName: PropTypes.string,\n  modal: PropTypes.node,\n  viewport: PropTypes.node,\n  objectFocused: PropTypes.bool,\n  streaming: PropTypes.bool,\n  viewportRef: PropTypes.any\n};\n","import React, { useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { RoomLayout } from \"../layout/RoomLayout\";\nimport { useResizeViewport } from \"./useResizeViewport\";\n\nexport function RoomLayoutContainer({ store, scene, ...rest }) {\n  const viewportRef = useRef();\n\n  useResizeViewport(viewportRef, store, scene);\n\n  return <RoomLayout viewportRef={viewportRef} {...rest} />;\n}\n\nRoomLayoutContainer.propTypes = {\n  store: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEnter(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.875 6.875V5.312A1.563 1.563 0 018.438 3.75h8.124a1.563 1.563 0 011.563 1.562v9.375a1.562 1.562 0 01-1.563 1.563H8.438a1.562 1.562 0 01-1.562-1.563v-1.562\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.625 13.125L13.75 10l-3.125-3.125\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.875 10h11.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgEnter.defaultProps = {\n  color: \"#000\",\n  title: \"Enter\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0VudGVyLTQxYzQ4MWFlODc3NWE3ZDU4OTdlN2UxYzdmNjU1MTk5LnN2ZyI7\";\nexport { SvgEnter as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVr(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.714 4H2.033C1.466 4 1 4.466 1 5.033v9.506c0 .567.466 1.032 1.033 1.032h4.464c.557 0 1.043-.354 1.215-.88l1.063-3.18c.395-1.173 2.045-1.173 2.44 0l1.063 3.18c.172.526.668.88 1.225.88h4.464c.567 0 1.033-.465 1.033-1.032V5.286C19 4.577 18.423 4 17.714 4zM6.477 11.471c-1.782.891-3.553-.87-2.663-2.662.152-.314.405-.567.72-.719 1.781-.89 3.553.87 2.662 2.662a1.643 1.643 0 01-.72.72zm9 0c-1.782.891-3.553-.87-2.663-2.662.152-.314.405-.567.72-.719 1.781-.89 3.553.87 2.662 2.662a1.643 1.643 0 01-.72.72z\",\n    fill: props.color\n  }));\n}\n\nSvgVr.defaultProps = {\n  color: \"#000\",\n  title: \"Vr\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1ZSLTliMjU2ZTY2M2QyZTc3YTQ0MzFmYjk2N2M4NjI0ZTFhLnN2ZyI7\";\nexport { SvgVr as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgShow(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.987 4.375c-3.045 0-6.168 1.762-8.626 5.286a.625.625 0 00-.011.695c1.89 2.957 4.97 5.27 8.637 5.27 3.626 0 6.77-2.32 8.663-5.284a.63.63 0 000-.683c-1.896-2.93-5.064-5.284-8.663-5.284z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 13.125a3.125 3.125 0 100-6.25 3.125 3.125 0 000 6.25z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }));\n}\n\nSvgShow.defaultProps = {\n  color: \"#000\",\n  title: \"Show\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1Nob3ctZDA2MGM2YTMwY2QxMzU1OWY2Njg1Nzg4ZTRiNGNmNmEuc3ZnIjs=\";\nexport { SvgShow as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSettings(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.84 9.464L16.823 9.3a.313.313 0 01-.258-.267c-.02-.125-.039-.25-.066-.371a.315.315 0 01.152-.337l.902-.5a.314.314 0 00.152-.388l-.156-.43a.31.31 0 00-.367-.195l-1.012.195a.313.313 0 01-.335-.16 7.177 7.177 0 00-.188-.329.319.319 0 01.028-.372l.675-.779a.313.313 0 00.012-.415l-.293-.351a.308.308 0 00-.41-.06l-.886.533a.312.312 0 01-.367-.035 8.649 8.649 0 00-.289-.243.312.312 0 01-.098-.356l.367-.966a.312.312 0 00-.126-.397l-.399-.23a.312.312 0 00-.406.086l-.65.814a.28.28 0 01-.332.097s-.218-.09-.383-.145a.312.312 0 01-.213-.3l.015-1.034a.315.315 0 00-.257-.329l-.453-.078a.315.315 0 00-.356.22l-.336.978a.312.312 0 01-.304.211h-.383a.315.315 0 01-.304-.211l-.336-.978a.315.315 0 00-.355-.22l-.453.078a.315.315 0 00-.258.33l.016 1.033a.312.312 0 01-.215.3c-.09.036-.285.11-.379.146-.109.039-.238.007-.343-.114l-.645-.795a.313.313 0 00-.406-.084l-.399.23a.31.31 0 00-.129.395l.368.967a.315.315 0 01-.098.355c-.098.079-.195.16-.29.243a.312.312 0 01-.366.035l-.873-.54a.312.312 0 00-.41.059l-.293.351a.313.313 0 00.012.415l.675.78a.312.312 0 01.027.371 3.948 3.948 0 00-.187.329.317.317 0 01-.336.16l-1.011-.195a.312.312 0 00-.367.195l-.156.43a.314.314 0 00.152.387l.9.501a.31.31 0 01.153.337c-.023.125-.047.247-.066.372a.316.316 0 01-.258.266l-1.019.164a.316.316 0 00-.277.31v.457a.307.307 0 00.277.31l1.019.164a.312.312 0 01.258.266c.02.125.039.25.066.372a.315.315 0 01-.152.336l-.902.502a.314.314 0 00-.153.387l.157.43a.31.31 0 00.367.195l1.011-.195a.313.313 0 01.336.16c.058.11.12.22.187.33a.319.319 0 01-.027.371l-.676.78a.313.313 0 00-.011.415l.292.351a.308.308 0 00.41.06l.887-.533a.313.313 0 01.367.035c.093.082.191.164.289.243a.313.313 0 01.097.356l-.367.966a.312.312 0 00.13.396l.398.23a.313.313 0 00.405-.086l.656-.806c.082-.101.215-.144.32-.101.133.054.223.085.387.14a.313.313 0 01.215.302l-.016 1.033a.315.315 0 00.258.329l.453.078a.316.316 0 00.355-.22l.336-.976a.313.313 0 01.304-.211h.383a.315.315 0 01.304.211l.336.977a.316.316 0 00.356.219l.453-.078a.315.315 0 00.257-.33l-.015-1.032a.312.312 0 01.214-.302c.164-.055.274-.098.375-.137.102-.039.227-.039.325.082l.663.818a.312.312 0 00.408.086l.398-.231a.31.31 0 00.13-.396l-.368-.966a.315.315 0 01.098-.357c.097-.078.195-.16.289-.242a.312.312 0 01.367-.035l.883.534a.312.312 0 00.41-.06l.293-.35a.312.312 0 00-.012-.416l-.676-.779a.312.312 0 01-.027-.372c.066-.105.129-.214.188-.328a.318.318 0 01.335-.16l1.012.195a.312.312 0 00.367-.196l.156-.43a.315.315 0 00-.152-.387l-.902-.5a.31.31 0 01-.153-.337c.024-.125.047-.247.067-.372a.315.315 0 01.257-.266l1.02-.164a.316.316 0 00.277-.31v-.458a.323.323 0 00-.284-.302zM10 4.375A5.618 5.618 0 0115.446 8.6a.626.626 0 01-.606.776h-4.111a.625.625 0 01-.544-.316L8.15 5.477a.625.625 0 01.385-.914 5.74 5.74 0 011.467-.188zM4.377 10A5.625 5.625 0 016.08 5.96a.625.625 0 01.983.136l2.04 3.592a.625.625 0 010 .62L7.048 13.89a.625.625 0 01-.983.13A5.624 5.624 0 014.376 10zM10 15.625a5.744 5.744 0 01-1.492-.193.626.626 0 01-.381-.916l2.054-3.576a.625.625 0 01.542-.313h4.117a.625.625 0 01.606.777A5.62 5.62 0 0110 15.625z\",\n    fill: props.color\n  }));\n}\n\nSvgSettings.defaultProps = {\n  color: \"#000\",\n  title: \"Settings\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1NldHRpbmdzLTJjMjFiNmNjOGZmNjA1MzgzOTk3NGY3OWQwMDk3ZjM1LnN2ZyI7\";\nexport { SvgSettings as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { Modal } from \"../modal/Modal\";\nimport { Button } from \"../input/Button\";\nimport { ReactComponent as EnterIcon } from \"../icons/Enter.svg\";\nimport { ReactComponent as VRIcon } from \"../icons/VR.svg\";\nimport { ReactComponent as ShowIcon } from \"../icons/Show.svg\";\nimport { ReactComponent as SettingsIcon } from \"../icons/Settings.svg\";\nimport styles from \"./RoomEntryModal.scss\";\nimport styleUtils from \"../styles/style-utils.scss\";\nimport { useCssBreakpoints } from \"react-use-css-breakpoints\";\nimport { Column } from \"../layout/Column\";\nimport { AppLogo } from \"../misc/AppLogo\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function RoomEntryModal({\n  className,\n  roomName,\n  showJoinRoom,\n  onJoinRoom,\n  showEnterOnDevice,\n  onEnterOnDevice,\n  showSpectate,\n  onSpectate,\n  showOptions,\n  onOptions,\n  ...rest\n}) {\n  const breakpoint = useCssBreakpoints();\n  return (\n    <Modal className={classNames(styles.roomEntryModal, className)} disableFullscreen {...rest}>\n      <Column center className={styles.content}>\n        {breakpoint !== \"sm\" &&\n          breakpoint !== \"md\" && (\n            <div className={styles.logoContainer}>\n              <AppLogo />\n            </div>\n          )}\n        <div className={styles.roomName}>\n          <h5>\n            <FormattedMessage id=\"room-entry-modal.room-name-label\" defaultMessage=\"Room Name\" />\n          </h5>\n          <p>{roomName}</p>\n        </div>\n        <Column center className={styles.buttons}>\n          {showJoinRoom && (\n            <Button preset=\"accent4\" onClick={onJoinRoom}>\n              <EnterIcon />\n              <span>\n                <FormattedMessage id=\"room-entry-modal.join-room-button\" defaultMessage=\"Join Room\" />\n              </span>\n            </Button>\n          )}\n          {showEnterOnDevice && (\n            <Button preset=\"accent5\" onClick={onEnterOnDevice}>\n              <VRIcon />\n              <span>\n                <FormattedMessage id=\"room-entry-modal.enter-on-device-button\" defaultMessage=\"Enter On Device\" />\n              </span>\n            </Button>\n          )}\n          {showSpectate && (\n            <Button preset=\"accent2\" onClick={onSpectate}>\n              <ShowIcon />\n              <span>\n                <FormattedMessage id=\"room-entry-modal.spectate-button\" defaultMessage=\"Observe\" />\n              </span>\n            </Button>\n          )}\n          {showOptions &&\n            breakpoint !== \"sm\" && (\n              <>\n                <hr className={styleUtils.showLg} />\n                <Button preset=\"transparent\" className={styleUtils.showLg} onClick={onOptions}>\n                  <SettingsIcon />\n                  <span>\n                    <FormattedMessage id=\"room-entry-modal.options-button\" defaultMessage=\"Options\" />\n                  </span>\n                </Button>\n              </>\n            )}\n        </Column>\n      </Column>\n    </Modal>\n  );\n}\n\nRoomEntryModal.propTypes = {\n  className: PropTypes.string,\n  roomName: PropTypes.string.isRequired,\n  showJoinRoom: PropTypes.bool,\n  onJoinRoom: PropTypes.func,\n  showEnterOnDevice: PropTypes.bool,\n  onEnterOnDevice: PropTypes.func,\n  showSpectate: PropTypes.bool,\n  onSpectate: PropTypes.func,\n  showOptions: PropTypes.bool,\n  onOptions: PropTypes.func\n};\n\nRoomEntryModal.defaultProps = {\n  showJoinRoom: true,\n  showEnterOnDevice: true,\n  showSpectate: true,\n  showOptions: true\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { Button } from \"../input/Button\";\nimport { ReactComponent as VRIcon } from \"../icons/VR.svg\";\nimport styles from \"./EnterOnDeviceModal.scss\";\nimport { BackButton } from \"../input/BackButton\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nexport function EnterOnDeviceModal({\n  className,\n  shortUrl,\n  loadingCode,\n  code,\n  headsetConnected,\n  unsupportedBrowser,\n  onEnterOnConnectedHeadset,\n  onBack,\n  ...rest\n}) {\n  const intl = useIntl();\n\n  return (\n    <Modal\n      title={<FormattedMessage id=\"enter-on-device-modal.title\" defaultMessage=\"Enter on Device\" />}\n      beforeTitle={<BackButton onClick={onBack} />}\n      className={className}\n      {...rest}\n    >\n      <Column center={loadingCode ? \"both\" : true} padding grow>\n        {loadingCode ? (\n          <b>\n            <FormattedMessage id=\"enter-on-device-modal.generating-code\" defaultMessage=\"Generating join code...\" />\n          </b>\n        ) : (\n          <>\n            <b>\n              <FormattedMessage id=\"enter-on-device-modal.heading\" defaultMessage=\"Enter on Wireless Headset / Phone\" />\n            </b>\n            <small>\n              <FormattedMessage\n                id=\"enter-on-device-modal.short-url-directions\"\n                defaultMessage=\"In your device's web browser, go to:\"\n              />\n            </small>\n            <div className={styles.shortUrlContainer}>{shortUrl}</div>\n            <small>\n              <FormattedMessage\n                id=\"enter-on-device-modal.code-directions\"\n                defaultMessage=\"Then, enter this one-time code:\"\n              />\n            </small>\n            <div className={styles.codeContainer}>\n              {code.split(\"\").map((char, i) => (\n                <div key={i} className={styles.codeLetter}>\n                  {char}\n                </div>\n              ))}\n            </div>\n            <strong>\n              <FormattedMessage\n                id=\"enter-on-device-modal.data-transfer\"\n                defaultMessage=\"Your account and avatar will be transferred to the device.\"\n              />\n            </strong>\n            <strong>\n              <FormattedMessage\n                id=\"enter-on-device-modal.keep-page-open\"\n                defaultMessage=\"Keep this page open to use this code.\"\n              />\n            </strong>\n            {headsetConnected && (\n              <>\n                <hr\n                  data-or-text={intl.formatMessage({ id: \"enter-on-device-modal.divider-label\", defaultMessage: \"or\" })}\n                />\n                <b>\n                  <FormattedMessage\n                    id=\"enter-on-device-modal.headset-connected-heading\"\n                    defaultMessage=\"Enter on Connected Headset\"\n                  />\n                </b>\n                {unsupportedBrowser ? (\n                  <>\n                    <small>\n                      <FormattedMessage\n                        id=\"enter-on-device-modal.unsupported-browser\"\n                        defaultMessage=\"WebVR isn't supported in this browser, to enter with Oculus or SteamVR, use Firefox.\"\n                      />\n                    </small>\n                    <Button\n                      as=\"a\"\n                      preset=\"accent2\"\n                      href=\"https://www.mozilla.org/firefox/\"\n                      target=\"_blank\"\n                      rel=\"noreferrer noopener\"\n                    >\n                      <span>\n                        <FormattedMessage\n                          id=\"enter-on-device-modal.download-firefox-button\"\n                          defaultMessage=\"Download Firefox\"\n                        />\n                      </span>\n                    </Button>\n                  </>\n                ) : (\n                  <>\n                    <small>\n                      <FormattedMessage\n                        id=\"enter-on-device-modal.headset-connected-message\"\n                        defaultMessage=\"You have a VR headset connected to this device.\"\n                      />\n                    </small>\n                    <Button preset=\"accent5\" onClick={onEnterOnConnectedHeadset}>\n                      <VRIcon />\n                      <span>\n                        <FormattedMessage id=\"enter-on-device-modal.enter-in-vr-button\" defaultMessage=\"Enter in VR\" />\n                      </span>\n                    </Button>\n                  </>\n                )}\n              </>\n            )}\n          </>\n        )}\n      </Column>\n    </Modal>\n  );\n}\n\nEnterOnDeviceModal.propTypes = {\n  className: PropTypes.string,\n  shortUrl: PropTypes.string.isRequired,\n  loadingCode: PropTypes.bool,\n  code: PropTypes.string,\n  headsetConnected: PropTypes.bool,\n  unsupportedBrowser: PropTypes.bool,\n  onEnterOnConnectedHeadset: PropTypes.func,\n  onBack: PropTypes.func\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 8,\n  y: 8.7,\n  width: 4,\n  height: 0,\n  fill: \"#7ED320\"\n});\n\nfunction SvgMicrophone(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.5 17.5h5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), _ref2, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 8.126v1.25c0 2.75-2.25 5-5 5s-5-2.25-5-5v-1.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 14.376v3.125\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 2.5A2.487 2.487 0 007.5 5v4.336c0 1.375 1.133 2.54 2.5 2.54s2.5-1.133 2.5-2.54V5c0-1.406-1.094-2.5-2.5-2.5z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgMicrophone.defaultProps = {\n  color: \"#000\",\n  title: \"Microphone\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL01pY3JvcGhvbmUtNDIzNDk0ODNlN2YwMTkxMTc2ZGFlNmNmZDA2YWU4ZTIuc3ZnIjs=\";\nexport { SvgMicrophone as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 8,\n  y: 8.7,\n  width: 4,\n  height: 0,\n  fill: \"#7ED320\"\n});\n\nfunction SvgMicrophoneMuted(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.5 17.5h5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), _ref2, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 8.126v1.25c0 2.75-2.25 5-5 5s-5-2.25-5-5v-1.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 14.376v3.125\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 2.5A2.487 2.487 0 007.5 5v4.336c0 1.375 1.133 2.54 2.5 2.54s2.5-1.133 2.5-2.54V5c0-1.406-1.094-2.5-2.5-2.5z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.875 15.625L3.75 2.5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }));\n}\n\nSvgMicrophoneMuted.defaultProps = {\n  color: \"#000\",\n  title: \"Microphone Muted\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL01pY3JvcGhvbmVNdXRlZC0yZjU5NTM1NTI3N2Q0YjE2MTE5OTdhNGZkNTJlMGQzYS5zdmciOw==\";\nexport { SvgMicrophoneMuted as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVolumeOff(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.283 7.498h-2.72a.313.313 0 00-.313.313v4.375a.312.312 0 00.312.312h2.721c.144 0 .284.05.396.142l3.573 2.93a.312.312 0 00.498-.253V4.68a.313.313 0 00-.498-.252L9.68 7.357a.625.625 0 01-.396.141z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgVolumeOff.defaultProps = {\n  color: \"#000\",\n  title: \"Volume Off\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1ZvbHVtZU9mZi04MmI3MWJkZmQ1MGU3YzA0NjNhM2E1MDliZDUxMjg0MS5zdmciOw==\";\nexport { SvgVolumeOff as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgInfo(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.688 2.502a7.188 7.188 0 100 14.376 7.188 7.188 0 000-14.376z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.594 8.594h1.25v4.532\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.125 13.281h3.437\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.687 5.08a1.016 1.016 0 100 2.03 1.016 1.016 0 000-2.03z\",\n    fill: props.color\n  }));\n}\n\nSvgInfo.defaultProps = {\n  color: \"#000\",\n  title: \"Info\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0luZm8tYTYzMzViYzZmNjFhYzRhNWE4NDBkMGZiNDZiNjkyOWEuc3ZnIjs=\";\nexport { SvgInfo as ReactComponent };","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./ToggleInput.scss\";\n\nexport const ToggleInput = memo(\n  forwardRef(({ className, label, description, disabled, ...rest }, ref) => {\n    return (\n      <label className={classNames(styles.toggleInput, { [styles.disabled]: disabled }, className)}>\n        <input type=\"checkbox\" disabled={disabled} ref={ref} {...rest} />\n        <div className={classNames(styles.track)}>\n          <div className={styles.button} />\n        </div>\n        {label && (\n          <div className={styles.labelContainer}>\n            <p className={styles.label}>{label}</p>\n            {description && <p className={styles.description}>{description}</p>}\n          </div>\n        )}\n      </label>\n    );\n  })\n);\n\nToggleInput.propTypes = {\n  label: PropTypes.node,\n  description: PropTypes.node,\n  checked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  className: PropTypes.string\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./LevelBar.scss\";\n\nexport function LevelBar({ className, level }) {\n  const ref = useCallback(\n    node => {\n      if (node) {\n        const pct = level * 100;\n        if (node.clientWidth > node.clientHeight) {\n          node.style.clipPath = `polygon(0% 100%, ${pct}% 100%, ${pct}% 0%, 0% 0%)`;\n        } else {\n          node.style.clipPath = `polygon(0% 100%, 100% 100%, 100% ${100 - pct}%, 0% ${100 - pct}%)`;\n        }\n      }\n    },\n    [level]\n  );\n\n  return (\n    <div className={classNames(styles.levelBarContainer, className)}>\n      <div className={styles.levelBarBorder} />\n      <div ref={ref} className={styles.levelBar} />\n    </div>\n  );\n}\n\nLevelBar.propTypes = {\n  className: PropTypes.string,\n  level: PropTypes.number\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { Button } from \"../input/Button\";\nimport { ReactComponent as MicrophoneIcon } from \"../icons/Microphone.svg\";\nimport { ReactComponent as MicrophoneMutedIcon } from \"../icons/MicrophoneMuted.svg\";\nimport { ReactComponent as VolumeOffIcon } from \"../icons/VolumeOff.svg\";\nimport { ReactComponent as InfoIcon } from \"../icons/Info.svg\";\nimport styles from \"./MicSetupModal.scss\";\nimport { BackButton } from \"../input/BackButton\";\nimport { SelectInputField } from \"../input/SelectInputField\";\nimport { ToggleInput } from \"../input/ToggleInput\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage } from \"react-intl\";\nimport { LevelBar } from \"../misc/LevelBar\";\nimport { Popover } from \"../popover/Popover\";\nimport { PermissionStatus } from \"../../utils/media-devices-utils\";\nimport { Spinner } from \"../misc/Spinner\";\nimport MediaDevicesManager from \"../../utils/media-devices-manager\";\n\nexport function MicSetupModal({\n  className,\n  microphoneOptions,\n  onChangeMicrophone,\n  speakerOptions,\n  onChangeSpeaker,\n  isMicrophoneEnabled,\n  micLevel,\n  speakerLevel,\n  onPlaySound,\n  isMicrophoneMuted,\n  onChangeMicrophoneMuted,\n  onEnterRoom,\n  onBack,\n  permissionStatus,\n  ...rest\n}) {\n  const iconStyle = isMicrophoneEnabled ? styles.iconEnabled : styles.iconDisabled;\n  return (\n    <Modal\n      title={<FormattedMessage id=\"mic-setup-modal.title\" defaultMessage=\"Microphone Setup\" />}\n      beforeTitle={<BackButton onClick={onBack} />}\n      className={className}\n      {...rest}\n    >\n      <Column center padding grow className={styles.content}>\n        <p>\n          <FormattedMessage\n            id=\"mic-setup-modal.check-mic\"\n            defaultMessage=\"Check your microphone and audio before entering.\"\n          />\n        </p>\n        <div className={styles.audioCheckContainer}>\n          <div className={styles.audioIoContainer}>\n            <div className={styles.iconContainer}>\n              <div>\n                {permissionStatus === PermissionStatus.PROMPT && (\n                  <div className={styles.spinnerContainer}>\n                    <Spinner />\n                  </div>\n                )}\n                {permissionStatus === PermissionStatus.GRANTED && !isMicrophoneMuted ? (\n                  <MicrophoneIcon className={iconStyle} />\n                ) : (\n                  <MicrophoneMutedIcon className={iconStyle} />\n                )}\n              </div>\n              {permissionStatus === PermissionStatus.GRANTED && (\n                <LevelBar\n                  className={styles.levelBar}\n                  level={!isMicrophoneEnabled || isMicrophoneMuted ? 0 : micLevel}\n                />\n              )}\n            </div>\n            <div className={styles.actionContainer}>\n              {permissionStatus === PermissionStatus.GRANTED ? (\n                <>\n                  <ToggleInput\n                    label={<FormattedMessage id=\"mic-setup-modal.mute-mic-toggle-v2\" defaultMessage=\"Mute\" />}\n                    checked={isMicrophoneMuted}\n                    onChange={onChangeMicrophoneMuted}\n                  />\n                  <Popover\n                    title=\"Info\"\n                    content={\n                      <Column className={styles.popoverContent}>\n                        <FormattedMessage\n                          id=\"mic-setup-modal.mute-mic-info\"\n                          defaultMessage=\"You can mute anytime after you enter the room\"\n                        />\n                      </Column>\n                    }\n                    placement=\"top\"\n                    showHeader={false}\n                    disableFullscreen\n                    popoverClass={styles.popover}\n                    arrowClass={styles.popoverArrow}\n                  >\n                    {({ openPopover, closePopover, triggerRef }) => (\n                      <div ref={triggerRef}>\n                        <InfoIcon className={styles.infoIcon} onMouseEnter={openPopover} onMouseLeave={closePopover} />\n                      </div>\n                    )}\n                  </Popover>\n                </>\n              ) : (\n                (permissionStatus === PermissionStatus.PROMPT && (\n                  <p>\n                    <FormattedMessage\n                      id=\"mic-setup-modal.mic-permission-prompt\"\n                      defaultMessage=\"Requesting access to your microphone...\"\n                    />\n                  </p>\n                )) ||\n                (permissionStatus === PermissionStatus.DENIED && (\n                  <p>\n                    <span className={styles.errorTitle}>\n                      <FormattedMessage\n                        id=\"mic-setup-modal.error-title\"\n                        defaultMessage=\"Microphone access was blocked.\"\n                        className={styles.errorTitle}\n                      />\n                    </span>{\" \"}\n                    <FormattedMessage\n                      id=\"mic-setup-modal.error-description\"\n                      defaultMessage=\"To talk in Hubs you will need to allow microphone access.\"\n                    />\n                  </p>\n                ))\n              )}\n            </div>\n            {permissionStatus === PermissionStatus.GRANTED &&\n              MediaDevicesManager.isAudioInputSelectEnabled && (\n                <div className={styles.selectionContainer}>\n                  <p style={{ alignSelf: \"start\" }}>\n                    <FormattedMessage id=\"mic-setup-modal.microphone-text\" defaultMessage=\"Microphone\" />\n                  </p>\n                  <SelectInputField\n                    className={styles.selectionInput}\n                    buttonClassName={styles.selectionInput}\n                    onChange={onChangeMicrophone}\n                    {...microphoneOptions}\n                  />\n                </div>\n              )}\n          </div>\n          <div className={styles.audioIoContainer}>\n            <div className={styles.iconContainer}>\n              <VolumeOffIcon className={styles.iconEnabled} style={{ marginRight: \"5px\" }} />\n              <LevelBar className={styles.levelBar} level={speakerLevel} />\n            </div>\n            <div className={styles.actionContainer}>\n              <Button preset=\"basic\" onClick={onPlaySound} sm>\n                <FormattedMessage id=\"mic-setup-modal.test-audio-button\" defaultMessage=\"Test Audio\" />\n              </Button>\n            </div>\n            {permissionStatus === PermissionStatus.GRANTED &&\n              MediaDevicesManager.isAudioOutputSelectEnabled && (\n                <div className={styles.selectionContainer}>\n                  <p style={{ alignSelf: \"start\" }}>\n                    <FormattedMessage id=\"mic-setup-modal.speakers-text\" defaultMessage=\"Speakers\" />\n                  </p>\n                  <SelectInputField\n                    onChange={onChangeSpeaker}\n                    className={styles.selectionInput}\n                    buttonClassName={styles.selectionInput}\n                    {...speakerOptions}\n                  />\n                </div>\n              )}\n          </div>\n        </div>\n        <Button preset=\"primary\" onClick={onEnterRoom}>\n          <FormattedMessage id=\"mic-setup-modal.enter-room-button\" defaultMessage=\"Enter Room\" />\n        </Button>\n      </Column>\n    </Modal>\n  );\n}\n\nMicSetupModal.propTypes = {\n  className: PropTypes.string,\n  onPlaySound: PropTypes.func,\n  micLevel: PropTypes.number,\n  speakerLevel: PropTypes.number,\n  isMicrophoneEnabled: PropTypes.bool,\n  isMicrophoneMuted: PropTypes.bool,\n  onChangeMicrophoneMuted: PropTypes.func,\n  microphoneOptions: PropTypes.object,\n  onChangeMicrophone: PropTypes.func,\n  speakerOptions: PropTypes.object,\n  onChangeSpeaker: PropTypes.func,\n  onEnterRoom: PropTypes.func,\n  onBack: PropTypes.func,\n  permissionStatus: PropTypes.string\n};\n\nMicSetupModal.defaultProps = {\n  micLevel: 0,\n  speakerLevel: 0,\n  permissionStatus: PermissionStatus.PROMPT\n};\n","import { useState, useEffect, useCallback } from \"react\";\nimport { MediaDevices, MediaDevicesEvents } from \"../../utils/media-devices-utils\";\n\nexport function useMicrophoneStatus(scene) {\n  const mediaDevicesManager = APP.mediaDevicesManager;\n  const [isMicMuted, setIsMicMuted] = useState(!mediaDevicesManager.isMicEnabled);\n  const [isMicEnabled, setIsMicEnabled] = useState(APP.mediaDevicesManager.isMicShared);\n  const [permissionStatus, setPermissionsStatus] = useState(\n    mediaDevicesManager.getPermissionsStatus(MediaDevices.MICROPHONE)\n  );\n\n  useEffect(\n    () => {\n      const onMicMutedStateChanged = ({ enabled }) => {\n        setIsMicMuted(!enabled);\n      };\n      APP.dialog.on(\"mic-state-changed\", onMicMutedStateChanged);\n\n      const onMicEnabled = () => {\n        setIsMicEnabled(true);\n      };\n      const onMicDisabled = () => {\n        setIsMicEnabled(false);\n      };\n      scene.addEventListener(MediaDevicesEvents.MIC_SHARE_ENDED, onMicDisabled);\n      scene.addEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, onMicEnabled);\n\n      const onPermissionsChanged = ({ mediaDevice, status }) => {\n        if (mediaDevice === MediaDevices.MICROPHONE) {\n          setPermissionsStatus(status);\n        }\n      };\n      mediaDevicesManager.on(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, onPermissionsChanged);\n\n      return () => {\n        APP.dialog.off(\"mic-state-changed\", onMicMutedStateChanged);\n        scene.removeEventListener(MediaDevicesEvents.MIC_SHARE_ENDED, onMicDisabled);\n        scene.removeEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, onMicEnabled);\n        mediaDevicesManager.off(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, onPermissionsChanged);\n      };\n    },\n    [setIsMicMuted, setIsMicEnabled, setPermissionsStatus, scene, mediaDevicesManager]\n  );\n\n  const toggleMute = useCallback(\n    () => {\n      if (mediaDevicesManager.isMicShared) {\n        mediaDevicesManager.toggleMic();\n      } else {\n        mediaDevicesManager.startMicShare({ unmute: true });\n      }\n    },\n    [mediaDevicesManager]\n  );\n\n  return {\n    isMicMuted,\n    toggleMute,\n    isMicEnabled,\n    permissionStatus\n  };\n}\n","import { useState, useEffect, useCallback } from \"react\";\nimport { MediaDevices, MediaDevicesEvents } from \"../../utils/media-devices-utils\";\n\nexport function useMicrophone(scene) {\n  const mediaDevicesManager = APP.mediaDevicesManager;\n  const [micDevices, setMicDevices] = useState({\n    value: mediaDevicesManager.selectedMicDeviceId,\n    options: mediaDevicesManager.micDevicesOptions\n  });\n\n  useEffect(\n    () => {\n      const onMicEnabled = () => {\n        setMicDevices({\n          value: mediaDevicesManager.selectedMicDeviceId,\n          options: mediaDevicesManager.micDevicesOptions\n        });\n      };\n      const onMicDisabled = () => {\n        setMicDevices({\n          value: mediaDevicesManager.selectedMicDeviceId,\n          options: mediaDevicesManager.micDevicesOptions\n        });\n      };\n      scene.addEventListener(MediaDevicesEvents.MIC_SHARE_ENDED, onMicDisabled);\n      scene.addEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, onMicEnabled);\n\n      const onPermissionsChanged = ({ mediaDevice }) => {\n        if (mediaDevice === MediaDevices.MICROPHONE) {\n          setMicDevices({\n            value: mediaDevicesManager.selectedMicDeviceId,\n            options: mediaDevicesManager.micDevicesOptions\n          });\n        }\n      };\n      mediaDevicesManager.on(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, onPermissionsChanged);\n\n      const onDeviceChange = () => {\n        setMicDevices({\n          value: mediaDevicesManager.selectedMicDeviceId,\n          options: mediaDevicesManager.micDevicesOptions\n        });\n      };\n      mediaDevicesManager.on(MediaDevicesEvents.DEVICE_CHANGE, onDeviceChange);\n\n      setMicDevices({\n        value: mediaDevicesManager.selectedMicDeviceId,\n        options: mediaDevicesManager.micDevicesOptions\n      });\n\n      return () => {\n        scene.removeEventListener(MediaDevicesEvents.MIC_SHARE_ENDED, onMicDisabled);\n        scene.removeEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, onMicEnabled);\n        mediaDevicesManager.off(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, onPermissionsChanged);\n        mediaDevicesManager.off(MediaDevicesEvents.DEVICE_CHANGE, onDeviceChange);\n      };\n    },\n    [setMicDevices, scene, mediaDevicesManager]\n  );\n\n  const micDeviceChanged = useCallback(\n    deviceId => {\n      setMicDevices({\n        value: mediaDevicesManager.selectedMicDeviceId,\n        options: mediaDevicesManager.micDevicesOptions\n      });\n      mediaDevicesManager.startMicShare({ deviceId });\n    },\n    [mediaDevicesManager]\n  );\n\n  return {\n    micDeviceChanged,\n    micDevices\n  };\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport MovingAverage from \"moving-average\";\n\nconst MIN_VOLUME_THRESHOLD = 0.08;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume;\n};\n\nfunction updateVolume(analyser, meter) {\n  const newRawVolume = calculateVolume(analyser, meter.levels);\n\n  const newPerceivedVolume = Math.log(THREE.Math.mapLinear(newRawVolume, 0, 1, 1, Math.E));\n\n  meter.volume = newPerceivedVolume < MIN_VOLUME_THRESHOLD ? 0 : newPerceivedVolume;\n\n  const s = meter.volume > meter.prevVolume ? 0.35 : 0.3;\n  meter.volume = s * meter.volume + (1 - s) * meter.prevVolume;\n  meter.prevVolume = meter.volume;\n}\n\nexport function useVolumeMeter({ analyser, updateRate = 50 }) {\n  const movingAvgRef = useRef();\n  const meterRef = useRef({ levels: [], volume: 0, prevVolume: 0, max: 0 });\n  const [volume, setVolume] = useState(0);\n\n  useEffect(\n    () => {\n      if (!movingAvgRef.current) {\n        movingAvgRef.current = MovingAverage(updateRate * 2);\n      }\n\n      analyser.fftSize = 32;\n      meterRef.current.levels = new Uint8Array(analyser.fftSize);\n\n      const timout = setInterval(() => {\n        updateVolume(analyser, meterRef.current);\n\n        meterRef.current.max = Math.max(meterRef.current.volume, meterRef.current.max);\n\n        // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n        // the css renderer to keep up.\n        movingAvgRef.current.push(Date.now(), meterRef.current.volume);\n        const average = movingAvgRef.current.movingAverage();\n        const nextVolume = meterRef.current.max === 0 ? 0 : average / meterRef.current.max;\n\n        setVolume(prevVolume => Math.max(Math.abs(prevVolume - nextVolume) > 0.05 ? nextVolume : prevVolume, 0.1));\n      }, updateRate);\n\n      return () => {\n        clearInterval(timout);\n      };\n    },\n    [analyser, updateRate]\n  );\n\n  return { volume };\n}\n","import { useRef, useCallback } from \"react\";\nimport { useVolumeMeter } from \"../misc/useVolumeMeter\";\n\nexport function useSound({ scene, updateRate = 50, sound }) {\n  const sfxSystem = scene.systems[\"hubs-systems\"].soundEffectsSystem;\n  const analyserRef = useRef(scene.systems[\"hubs-systems\"].audioSystem.mixerAnalyser);\n  const { volume } = useVolumeMeter({ analyser: analyserRef.current, updateRate });\n\n  const playSound = useCallback(\n    () => {\n      sfxSystem.playSoundOneShot(sound).connect(analyserRef.current);\n    },\n    [sound, sfxSystem]\n  );\n\n  return { playSound, soundVolume: volume };\n}\n","import { useState, useEffect, useCallback } from \"react\";\nimport { MediaDevices, MediaDevicesEvents } from \"../../utils/media-devices-utils\";\n\nexport function useSpeakers() {\n  const mediaDevicesManager = APP.mediaDevicesManager;\n  const [speakerDevices, setSpeakerDevices] = useState({\n    value: mediaDevicesManager.selectedSpeakersDeviceId,\n    options: mediaDevicesManager.outputDevicesOptions\n  });\n\n  useEffect(\n    () => {\n      const onPermissionsChanged = ({ mediaDevice }) => {\n        if (mediaDevice === MediaDevices.MICROPHONE) {\n          setSpeakerDevices({\n            value: mediaDevicesManager.selectedSpeakersDeviceId,\n            options: mediaDevicesManager.outputDevicesOptions\n          });\n        }\n      };\n      mediaDevicesManager.on(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, onPermissionsChanged);\n\n      const onDeviceChange = () => {\n        setSpeakerDevices({\n          value: mediaDevicesManager.selectedSpeakersDeviceId,\n          options: mediaDevicesManager.outputDevicesOptions\n        });\n      };\n      mediaDevicesManager.on(MediaDevicesEvents.DEVICE_CHANGE, onDeviceChange);\n\n      setSpeakerDevices({\n        value: mediaDevicesManager.selectedSpeakersDeviceId,\n        options: mediaDevicesManager.outputDevicesOptions\n      });\n\n      return () => {\n        mediaDevicesManager.off(MediaDevicesEvents.PERMISSIONS_STATUS_CHANGED, onPermissionsChanged);\n        mediaDevicesManager.off(MediaDevicesEvents.DEVICE_CHANGE, onDeviceChange);\n      };\n    },\n    [setSpeakerDevices, mediaDevicesManager]\n  );\n\n  const speakerDeviceChanged = useCallback(\n    deviceId => {\n      mediaDevicesManager.changeAudioOutput(deviceId);\n      setSpeakerDevices({\n        value: mediaDevicesManager.selectedSpeakersDeviceId,\n        options: mediaDevicesManager.outputDevicesOptions\n      });\n    },\n    [mediaDevicesManager]\n  );\n\n  return {\n    speakerDeviceChanged,\n    speakerDevices\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { MicSetupModal } from \"./MicSetupModal\";\nimport { useMicrophoneStatus } from \"./useMicrophoneStatus\";\nimport { useMicrophone } from \"./useMicrophone\";\nimport { useSound } from \"./useSound\";\nimport { SOUND_SPEAKER_TONE } from \"../../systems/sound-effects-system\";\nimport { useSpeakers } from \"./useSpeakers\";\nimport { useCallback } from \"react\";\nimport { useVolumeMeter } from \"../misc/useVolumeMeter\";\nimport { useState } from \"react\";\n\nexport function MicSetupModalContainer({ scene, ...rest }) {\n  const { volume: micVolume } = useVolumeMeter({\n    analyser: scene.systems[\"hubs-systems\"].audioSystem.outboundAnalyser\n  });\n  const { isMicEnabled, permissionStatus } = useMicrophoneStatus(scene);\n  const { micDeviceChanged, micDevices } = useMicrophone(scene);\n  const { speakerDeviceChanged, speakerDevices } = useSpeakers();\n  const { playSound, soundVolume } = useSound({\n    scene,\n    sound: SOUND_SPEAKER_TONE\n  });\n  const [isMicMutedOnEntry, setIsMicMutedOnEntry] = useState(APP.store.state.preferences[\"muteMicOnEntry\"]);\n  const onChangeMicrophoneMuted = useCallback(({ target: { checked: muted } }) => {\n    setIsMicMutedOnEntry(muted);\n    APP.store.update({\n      preferences: { muteMicOnEntry: muted }\n    });\n  }, []);\n\n  return (\n    <MicSetupModal\n      micLevel={micVolume}\n      speakerLevel={soundVolume}\n      onPlaySound={playSound}\n      isMicrophoneEnabled={isMicEnabled}\n      isMicrophoneMuted={isMicMutedOnEntry}\n      permissionStatus={permissionStatus}\n      microphoneOptions={micDevices}\n      speakerOptions={speakerDevices}\n      onChangeMicrophone={micDeviceChanged}\n      onChangeSpeaker={speakerDeviceChanged}\n      onChangeMicrophoneMuted={onChangeMicrophoneMuted}\n      {...rest}\n    />\n  );\n}\n\nMicSetupModalContainer.propTypes = {\n  scene: PropTypes.object.isRequired\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useClipboard } from \"use-clipboard-copy\";\nimport { TextInputField } from \"./TextInputField\";\nimport { Button } from \"./Button\";\nimport styles from \"./CopyableTextInputField.scss\";\nimport { defineMessage, useIntl } from \"react-intl\";\n\nconst copyLabelMessage = defineMessage({\n  id: \"copyable-text-input-field.copy-label\",\n  defaultMessage: \"Copy\"\n});\n\nconst copiedLabelMessage = defineMessage({\n  id: \"copyable-text-input-field.copied-label\",\n  defaultMessage: \"Copied\"\n});\n\nexport function CopyableTextInputField({ buttonPreset, ...rest }) {\n  const clipboard = useClipboard({\n    copiedTimeout: 600\n  });\n\n  const intl = useIntl();\n\n  const copyLabel = intl.formatMessage(copyLabelMessage);\n  const copiedLabel = intl.formatMessage(copiedLabelMessage);\n\n  // Use a dynamic width based on the content to account for i18n\n  const maxLabelLength = Math.max(copyLabel.length, copiedLabel.length);\n\n  return (\n    <TextInputField\n      ref={clipboard.target}\n      afterInput={\n        clipboard.isSupported() ? (\n          <Button\n            preset={buttonPreset}\n            onClick={clipboard.copy}\n            className={styles.copyButton}\n            style={{ width: `${maxLabelLength}ch` }} // ch is a unit representing the width of the 0 character\n          >\n            {clipboard.copied ? copiedLabel : copyLabel}\n          </Button>\n        ) : (\n          undefined\n        )\n      }\n      {...rest}\n    />\n  );\n}\n\nCopyableTextInputField.propTypes = {\n  buttonPreset: PropTypes.string\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgInvite(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.563 3.751H3.438c-.863 0-1.563.7-1.563 1.562v9.375c0 .863.7 1.563 1.563 1.563h13.124c.863 0 1.563-.7 1.563-1.563V5.313c0-.862-.7-1.562-1.563-1.562z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.375 6.251L10 10.626l5.625-4.375\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgInvite.defaultProps = {\n  color: \"#000\",\n  title: \"Invite\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0ludml0ZS1jNzEyNmRlODk4ZGVmZDg4OWRiNjQwNTkzMDFmNThkZS5zdmciOw==\";\nexport { SvgInvite as ReactComponent };","import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./RoomSettingsSidebar.scss\";\nimport { IconButton } from \"../input/IconButton\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\nimport { CopyableTextInputField } from \"../input/CopyableTextInputField\";\n\nexport function InviteLinkInputField({ fetchingInvite, inviteUrl, onRevokeInvite }) {\n  const intl = useIntl();\n\n  const [showRevokeConfirmation, setShowRevokeConfirmation] = useState(false);\n\n  const revokeInvite = useCallback(() => {\n    setShowRevokeConfirmation(true);\n  }, []);\n\n  const cancelConfirmRevokeInvite = useCallback(() => {\n    setShowRevokeConfirmation(false);\n  }, []);\n\n  const confirmRevokeInvite = useCallback(\n    () => {\n      onRevokeInvite();\n      setShowRevokeConfirmation(false);\n    },\n    [onRevokeInvite]\n  );\n\n  return (\n    <CopyableTextInputField\n      label={<FormattedMessage id=\"invite-link-input-field.label\" defaultMessage=\"Invite link\" />}\n      disabled={fetchingInvite}\n      value={\n        fetchingInvite\n          ? intl.formatMessage({\n              id: \"invite-link-input-field.generating-invite\",\n              defaultMessage: \"Generating invite...\"\n            })\n          : inviteUrl\n      }\n      buttonPreset=\"primary\"\n      description={\n        !fetchingInvite &&\n        (showRevokeConfirmation ? (\n          <>\n            <FormattedMessage id=\"invite-link-input-field.revoke-confirm\" defaultMessage=\"are you sure?\" />{\" \"}\n            <IconButton className={styles.confirmRevokeButton} onClick={confirmRevokeInvite}>\n              <FormattedMessage id=\"invite-link-input-field.revoke-confirm-yes\" defaultMessage=\"yes\" />\n            </IconButton>{\" \"}\n            /{\" \"}\n            <IconButton className={styles.confirmRevokeButton} onClick={cancelConfirmRevokeInvite}>\n              <FormattedMessage id=\"invite-link-input-field.revoke-confirm-no\" defaultMessage=\"no\" />\n            </IconButton>\n          </>\n        ) : (\n          <IconButton className={styles.confirmRevokeButton} onClick={revokeInvite}>\n            <FormattedMessage id=\"invite-link-input-field.revoke\" defaultMessage=\"revoke\" />\n          </IconButton>\n        ))\n      }\n      fullWidth\n    />\n  );\n}\n\nInviteLinkInputField.propTypes = {\n  fetchingInvite: PropTypes.bool,\n  inviteUrl: PropTypes.string,\n  onRevokeInvite: PropTypes.func.isRequired\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./InvitePopover.scss\";\nimport { CopyableTextInputField } from \"../input/CopyableTextInputField\";\nimport { Popover } from \"../popover/Popover\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as InviteIcon } from \"../icons/Invite.svg\";\nimport { Column } from \"../layout/Column\";\nimport { InviteLinkInputField } from \"./InviteLinkInputField\";\nimport { FormattedMessage, defineMessage, useIntl } from \"react-intl\";\n\nfunction InvitePopoverContent({ url, embed, inviteRequired, fetchingInvite, inviteUrl, revokeInvite }) {\n  return (\n    <Column center padding grow gap=\"lg\" className={styles.invitePopover}>\n      {inviteRequired ? (\n        <>\n          <InviteLinkInputField fetchingInvite={fetchingInvite} inviteUrl={inviteUrl} onRevokeInvite={revokeInvite} />\n        </>\n      ) : (\n        <>\n          <CopyableTextInputField\n            label={<FormattedMessage id=\"invite-popover.room-link\" defaultMessage=\"Room Link\" />}\n            value={url}\n            buttonPreset=\"accent3\"\n          />\n          <CopyableTextInputField\n            label={<FormattedMessage id=\"invite-popover.embed-code\" defaultMessage=\"Embed Code\" />}\n            value={embed}\n            buttonPreset=\"accent5\"\n          />\n        </>\n      )}\n    </Column>\n  );\n}\n\nInvitePopoverContent.propTypes = {\n  url: PropTypes.string.isRequired,\n  embed: PropTypes.string.isRequired,\n  inviteRequired: PropTypes.bool,\n  fetchingInvite: PropTypes.bool,\n  inviteUrl: PropTypes.string,\n  revokeInvite: PropTypes.func\n};\n\nconst invitePopoverTitle = defineMessage({\n  id: \"invite-popover.title\",\n  defaultMessage: \"Invite\"\n});\n\nexport function InvitePopoverButton({\n  url,\n  embed,\n  initiallyVisible,\n  popoverApiRef,\n  inviteRequired,\n  fetchingInvite,\n  inviteUrl,\n  revokeInvite,\n  ...rest\n}) {\n  const intl = useIntl();\n  const title = intl.formatMessage(invitePopoverTitle);\n\n  return (\n    <Popover\n      title={title}\n      content={() => (\n        <InvitePopoverContent\n          url={url}\n          embed={embed}\n          inviteRequired={inviteRequired}\n          fetchingInvite={fetchingInvite}\n          inviteUrl={inviteUrl}\n          revokeInvite={revokeInvite}\n        />\n      )}\n      placement=\"top-start\"\n      offsetDistance={28}\n      initiallyVisible={initiallyVisible}\n      popoverApiRef={popoverApiRef}\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <ToolbarButton\n          ref={triggerRef}\n          icon={<InviteIcon />}\n          selected={popoverVisible}\n          onClick={togglePopover}\n          label={title}\n          {...rest}\n        />\n      )}\n    </Popover>\n  );\n}\n\nInvitePopoverButton.propTypes = {\n  initiallyVisible: PropTypes.bool,\n  popoverApiRef: PropTypes.object,\n  ...InvitePopoverContent.propTypes\n};\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { hubUrl } from \"../../utils/phoenix-utils\";\n\nexport function useInviteUrl(hubChannel, disabled = false) {\n  const [inviteId, setInviteId] = useState();\n\n  useEffect(\n    () => {\n      setInviteId(undefined);\n\n      if (disabled) {\n        return;\n      }\n\n      hubChannel\n        .fetchInvite()\n        .then(({ hub_invite_id }) => {\n          if (disabled) {\n            return;\n          }\n\n          setInviteId(hub_invite_id);\n        })\n        .catch(error => {\n          console.error(\"Error fetching invite\", error);\n        });\n    },\n    [hubChannel, disabled]\n  );\n\n  const revokeInvite = useCallback(\n    () => {\n      setInviteId(undefined);\n\n      if (disabled) {\n        return;\n      }\n\n      hubChannel\n        .revokeInvite(inviteId)\n        .then(({ hub_invite_id }) => {\n          if (disabled) {\n            return;\n          }\n\n          setInviteId(hub_invite_id);\n        })\n        .catch(error => {\n          console.error(\"Error revoking invite\", error);\n        });\n    },\n    [inviteId, hubChannel, disabled]\n  );\n\n  const inviteUrl = useMemo(\n    () => {\n      if (inviteId && !disabled) {\n        const url = hubUrl();\n        url.searchParams.set(\"hub_invite_id\", inviteId);\n        return url.toString();\n      }\n\n      return undefined;\n    },\n    [inviteId, disabled]\n  );\n\n  const fetchingInvite = !inviteId && !disabled;\n\n  return { fetchingInvite, inviteUrl, revokeInvite };\n}\n","import React, { useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../../utils/configs\";\nimport { hubUrl } from \"../../utils/phoenix-utils\";\nimport { InvitePopoverButton } from \"./InvitePopover\";\nimport { handleExitTo2DInterstitial } from \"../../utils/vr-interstitial\";\nimport { useInviteUrl } from \"./useInviteUrl\";\n\nexport function InvitePopoverContainer({ hub, hubChannel, scene, ...rest }) {\n  // TODO: Move to Hub class\n  const shortUrl = `https://${configs.SHORTLINK_DOMAIN}`;\n  const url = `${shortUrl}/${hub.hub_id}`;\n  const embedUrl = hubUrl(hub.hub_id, { embed_token: hub.embed_token });\n  const embedText = `<iframe src=\"${embedUrl}\" style=\"width: 1024px; height: 768px;\" allow=\"microphone; camera; vr; speaker;\"></iframe>`;\n  const popoverApiRef = useRef();\n\n  // Handle clicking on the invite button while in VR.\n  useEffect(\n    () => {\n      function onInviteButtonClicked() {\n        handleExitTo2DInterstitial(true, () => {}).then(() => {\n          popoverApiRef.current.openPopover();\n        });\n      }\n\n      scene.addEventListener(\"action_invite\", onInviteButtonClicked);\n\n      return () => {\n        scene.removeEventListener(\"action_invite\", onInviteButtonClicked);\n      };\n    },\n    [scene, popoverApiRef]\n  );\n\n  const inviteRequired = hub.entry_mode === \"invite\";\n  const canGenerateInviteUrl = hubChannel.can(\"update_hub\");\n\n  const { fetchingInvite, inviteUrl, revokeInvite } = useInviteUrl(\n    hubChannel,\n    !inviteRequired || !canGenerateInviteUrl\n  );\n\n  if (inviteRequired && !canGenerateInviteUrl) {\n    return null;\n  }\n\n  return (\n    <InvitePopoverButton\n      inviteRequired={inviteRequired}\n      fetchingInvite={fetchingInvite}\n      inviteUrl={inviteUrl}\n      revokeInvite={revokeInvite}\n      url={url}\n      embed={embedText}\n      popoverApiRef={popoverApiRef}\n      {...rest}\n    />\n  );\n}\n\nInvitePopoverContainer.propTypes = {\n  hub: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  hubChannel: PropTypes.object.isRequired\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMore(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 12.25a2 2 0 100-4 2 2 0 000 4z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 18.5a2 2 0 100-4 2 2 0 000 4z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 6a2 2 0 100-4 2 2 0 000 4z\",\n    fill: props.color\n  }));\n}\n\nSvgMore.defaultProps = {\n  color: \"#000\",\n  title: \"More\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL01vcmUtNTdkNTZkZjUyOTc0YWMxMGQwZjQwMzgwMmNjYzdmNWQuc3ZnIjs=\";\nexport { SvgMore as ReactComponent };","import React, { createContext, useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./MoreMenuPopover.scss\";\nimport { Popover } from \"../popover/Popover\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as MoreIcon } from \"../icons/More.svg\";\nimport { useIntl, defineMessage } from \"react-intl\";\n\nfunction MoreMenuItem({ item, closePopover }) {\n  const Icon = item.icon;\n\n  return (\n    <li onClick={closePopover}>\n      {item.href ? (\n        <a\n          className={styles.moreMenuItemTarget}\n          href={item.href}\n          target={item.target || \"_blank\"}\n          rel=\"noopener noreferrer\"\n        >\n          <Icon />\n          <span>{item.label}</span>\n        </a>\n      ) : (\n        <button className={styles.moreMenuItemTarget} onClick={event => item.onClick(item, event)}>\n          <Icon />\n          <span>{item.label}</span>\n        </button>\n      )}\n    </li>\n  );\n}\n\nMoreMenuItem.propTypes = {\n  item: PropTypes.shape({\n    href: PropTypes.string,\n    target: PropTypes.string,\n    icon: PropTypes.elementType.isRequired,\n    label: PropTypes.node.isRequired,\n    onClick: PropTypes.func\n  }).isRequired,\n  closePopover: PropTypes.func.isRequired\n};\n\nfunction MoreMenuGroup({ group, closePopover }) {\n  return (\n    <li>\n      <h1 className={styles.moreMenuGroupLabel}>{group.label}</h1>\n      <ul className={styles.moreMenuItemList}>\n        {group.items.map(item => <MoreMenuItem key={item.id} item={item} closePopover={closePopover} />)}\n      </ul>\n    </li>\n  );\n}\n\nMoreMenuGroup.propTypes = {\n  group: PropTypes.object.isRequired,\n  closePopover: PropTypes.func.isRequired\n};\n\nfunction MoreMenuPopoverContent({ menu, closePopover }) {\n  return (\n    <div className={styles.moreMenuPopover}>\n      <ul>{menu.map(group => <MoreMenuGroup key={group.id} group={group} closePopover={closePopover} />)}</ul>\n    </div>\n  );\n}\n\nMoreMenuPopoverContent.propTypes = {\n  menu: PropTypes.array.isRequired,\n  closePopover: PropTypes.func.isRequired\n};\n\n// The MoreMenuContext allows us to control the more menu popover visibility from the MoreMenuPopoverButton\n// and CompactMoreMenuButton.\nconst MoreMenuContext = createContext([false, () => {}]);\n\nexport function MoreMenuContextProvider({ initiallyVisible, children }) {\n  const context = useState(initiallyVisible || false);\n  return <MoreMenuContext.Provider value={context}>{children}</MoreMenuContext.Provider>;\n}\n\nMoreMenuContextProvider.propTypes = {\n  initiallyVisible: PropTypes.bool,\n  children: PropTypes.node\n};\n\nconst moreMenuTitle = defineMessage({\n  id: \"more-menu-popover.title\",\n  defaultMessage: \"More\"\n});\n\nexport function MoreMenuPopoverButton({ menu }) {\n  const intl = useIntl();\n  const [visible, setVisible] = useContext(MoreMenuContext);\n  const title = intl.formatMessage(moreMenuTitle);\n\n  return (\n    <Popover\n      title={title}\n      content={props => <MoreMenuPopoverContent menu={menu} {...props} />}\n      placement=\"top-end\"\n      offsetDistance={28}\n      isVisible={visible}\n      onChangeVisible={setVisible}\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <ToolbarButton\n          ref={triggerRef}\n          icon={<MoreIcon />}\n          selected={popoverVisible}\n          onClick={togglePopover}\n          label={title}\n        />\n      )}\n    </Popover>\n  );\n}\n\nMoreMenuPopoverButton.propTypes = {\n  menu: PropTypes.array.isRequired\n};\n\n// The CompactMoreMenuButton is only shown in the small breakpoint.\n// We actually render the popover in the MoreMenuPopoverButton so that when resizing the window,\n// the popover positions itself relative to the correct element.\nexport function CompactMoreMenuButton({ className, ...rest }) {\n  const intl = useIntl();\n  const [, setVisible] = useContext(MoreMenuContext);\n\n  return (\n    <button\n      className={classNames(styles.compactButton, className)}\n      aria-label={intl.formatMessage(moreMenuTitle)}\n      onClick={e => {\n        // Stop event bubbling so we don't immediately close the popover by clicking outside it.\n        e.stopPropagation();\n        setVisible(true);\n      }}\n      {...rest}\n    >\n      <MoreIcon />\n    </button>\n  );\n}\n\nCompactMoreMenuButton.propTypes = {\n  className: PropTypes.string\n};\n","import React, { createContext, useCallback, useContext, useEffect, useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  ChatSidebar,\n  ChatMessageGroup,\n  SystemMessage,\n  ChatMessageList,\n  ChatInput,\n  MessageAttachmentButton,\n  SpawnMessageButton,\n  ChatToolbarButton,\n  SendMessageButton,\n  EmojiPickerPopoverButton,\n  ChatLengthWarning\n} from \"./ChatSidebar\";\nimport { useMaintainScrollPosition } from \"../misc/useMaintainScrollPosition\";\nimport { spawnChatMessage } from \"../chat-message\";\nimport { discordBridgesForPresences } from \"../../utils/phoenix-utils\";\nimport { useIntl } from \"react-intl\";\nimport { MAX_MESSAGE_LENGTH } from \"../../utils/chat-message\";\n\nconst ChatContext = createContext({ messageGroups: [], sendMessage: () => {} });\n\nlet uniqueMessageId = 0;\n\nconst NEW_MESSAGE_GROUP_TIMEOUT = 1000 * 60;\n\nfunction shouldCreateNewMessageGroup(messageGroups, newMessage, now) {\n  if (messageGroups.length === 0) {\n    return true;\n  }\n\n  const lastMessageGroup = messageGroups[messageGroups.length - 1];\n\n  if (lastMessageGroup.senderSessionId !== newMessage.sessionId) {\n    return true;\n  }\n\n  const lastMessage = lastMessageGroup.messages[lastMessageGroup.messages.length - 1];\n\n  return now - lastMessage.timestamp > NEW_MESSAGE_GROUP_TIMEOUT;\n}\n\nfunction processChatMessage(messageGroups, newMessage) {\n  const now = Date.now();\n  const { name, sent, sessionId, ...messageProps } = newMessage;\n\n  if (shouldCreateNewMessageGroup(messageGroups, newMessage, now)) {\n    return [\n      ...messageGroups,\n      {\n        id: uniqueMessageId++,\n        timestamp: now,\n        sent,\n        sender: name,\n        senderSessionId: sessionId,\n        messages: [{ id: uniqueMessageId++, timestamp: now, ...messageProps }]\n      }\n    ];\n  }\n\n  const lastMessageGroup = messageGroups.pop();\n  lastMessageGroup.messages = [\n    ...lastMessageGroup.messages,\n    { id: uniqueMessageId++, timestamp: now, ...messageProps }\n  ];\n\n  return [...messageGroups, { ...lastMessageGroup }];\n}\n\n// Returns the new message groups array when we receive a message.\n// If the message is ignored, we return the original message group array.\nfunction updateMessageGroups(messageGroups, newMessage) {\n  switch (newMessage.type) {\n    case \"join\":\n    case \"entered\":\n    case \"leave\":\n    case \"display_name_changed\":\n    case \"scene_changed\":\n    case \"hub_name_changed\":\n    case \"hub_changed\":\n    case \"log\":\n      return [\n        ...messageGroups,\n        {\n          id: uniqueMessageId++,\n          systemMessage: true,\n          timestamp: Date.now(),\n          ...newMessage\n        }\n      ];\n    case \"chat\":\n    case \"image\":\n    case \"photo\":\n    case \"video\":\n      return processChatMessage(messageGroups, newMessage);\n    default:\n      return messageGroups;\n  }\n}\n\nexport function ChatContextProvider({ messageDispatch, children }) {\n  const [messageGroups, setMessageGroups] = useState([]);\n  const [unreadMessages, setUnreadMessages] = useState(false);\n\n  useEffect(\n    () => {\n      function onReceiveMessage(event) {\n        const newMessage = event.detail;\n        setMessageGroups(messages => updateMessageGroups(messages, newMessage));\n\n        if (\n          newMessage.type === \"chat\" ||\n          newMessage.type === \"image\" ||\n          newMessage.type === \"photo\" ||\n          newMessage.type === \"video\"\n        ) {\n          setUnreadMessages(true);\n        }\n      }\n\n      if (messageDispatch) {\n        messageDispatch.addEventListener(\"message\", onReceiveMessage);\n      }\n\n      return () => {\n        if (messageDispatch) {\n          messageDispatch.removeEventListener(\"message\", onReceiveMessage);\n        }\n      };\n    },\n    [messageDispatch, setMessageGroups, setUnreadMessages]\n  );\n\n  const sendMessage = useCallback(\n    message => {\n      if (messageDispatch) {\n        messageDispatch.dispatch(message);\n      }\n    },\n    [messageDispatch]\n  );\n\n  const setMessagesRead = useCallback(\n    () => {\n      setUnreadMessages(false);\n    },\n    [setUnreadMessages]\n  );\n\n  return (\n    <ChatContext.Provider value={{ messageGroups, unreadMessages, sendMessage, setMessagesRead }}>\n      {children}\n    </ChatContext.Provider>\n  );\n}\n\nChatContextProvider.propTypes = {\n  children: PropTypes.node,\n  messageDispatch: PropTypes.object\n};\n\nexport function ChatSidebarContainer({ scene, canSpawnMessages, presences, occupantCount, inputEffect, onClose }) {\n  const { messageGroups, sendMessage, setMessagesRead } = useContext(ChatContext);\n  const [onScrollList, listRef, scrolledToBottom] = useMaintainScrollPosition(messageGroups);\n  const [message, setMessage] = useState(\"\");\n  const typingTimeoutRef = useRef();\n  const intl = useIntl();\n  const inputRef = useRef();\n\n  const onKeyDown = useCallback(\n    e => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        if (e.target.value.length <= MAX_MESSAGE_LENGTH) {\n          sendMessage(e.target.value);\n          setMessage(\"\");\n          // intentionally only doing this on \"enter\" press and not clicking of send button\n          if (e.target.value.startsWith(\"/\")) {\n            onClose();\n          }\n        }\n      } else if (e.key === \"Escape\") {\n        onClose();\n      }\n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = setTimeout(() => window.APP.hubChannel.endTyping(), 500);\n      window.APP.hubChannel.beginTyping();\n    },\n    [sendMessage, setMessage, onClose]\n  );\n\n  const onSendMessage = useCallback(\n    () => {\n      sendMessage(message.substring(0, MAX_MESSAGE_LENGTH));\n      setMessage(\"\");\n    },\n    [message, sendMessage, setMessage]\n  );\n\n  const onSpawnMessage = () => {\n    spawnChatMessage(message);\n    setMessage(\"\");\n  };\n\n  const onUploadAttachments = useCallback(\n    e => {\n      // TODO: Right now there's no way to upload files to the chat only.\n      // When we add the place menu whcih will have an explicit button for uploading files,\n      // should we make this attach button only upload to chat?\n      for (const file of e.target.files) {\n        scene.emit(\"add_media\", file);\n      }\n    },\n    [scene]\n  );\n\n  const onSelectEmoji = useCallback(\n    ({ emoji, pickerRemainedOpen }) => {\n      setMessage(message => message + emoji.native);\n      // If the picker remained open, avoid selecting the input so that the\n      // user can keep picking emojis.\n      if (!pickerRemainedOpen) inputRef.current.select();\n    },\n    [setMessage, inputRef]\n  );\n\n  useEffect(() => inputEffect(inputRef.current), [inputEffect, inputRef]);\n\n  useEffect(\n    () => {\n      if (scrolledToBottom) {\n        setMessagesRead();\n      }\n    },\n    [messageGroups, scrolledToBottom, setMessagesRead]\n  );\n\n  const discordBridges = discordBridgesForPresences(presences);\n  const discordSnippet = discordBridges.map(ch => \"#\" + ch).join(\", \");\n  let placeholder;\n\n  if (occupantCount <= 1) {\n    if (discordBridges.length === 0) {\n      placeholder = intl.formatMessage({\n        id: \"chat-sidebar-container.input-placeholder.empty-room\",\n        defaultMessage: \"Nobody is here yet...\"\n      });\n    } else {\n      placeholder = intl.formatMessage(\n        {\n          id: \"chat-sidebar-container.input-placeholder.empty-room-bot\",\n          defaultMessage: \"Send message to {discordChannels}\"\n        },\n        { discordChannels: discordSnippet }\n      );\n    }\n  } else {\n    if (discordBridges.length === 0) {\n      placeholder = intl.formatMessage(\n        {\n          id: \"chat-sidebar-container.input-placeholder.occupants\",\n          defaultMessage:\n            \"{occupantCount, plural, one {Send message to one other...} other {Send message to {occupantCount} others...} }\"\n        },\n        { discordChannels: discordSnippet, occupantCount: occupantCount - 1 }\n      );\n    } else {\n      placeholder = intl.formatMessage(\n        {\n          id: \"chat-sidebar-container.input-placeholder.occupants-and-bot\",\n          defaultMessage:\n            \"{occupantCount, plural, one {Send message to one other and {discordChannels}...} other {Send message to {occupantCount} others and {discordChannels}...} }\"\n        },\n        { discordChannels: discordSnippet, occupantCount: occupantCount - 1 }\n      );\n    }\n  }\n\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isOverMaxLength = message.length > MAX_MESSAGE_LENGTH;\n  return (\n    <ChatSidebar onClose={onClose}>\n      <ChatMessageList ref={listRef} onScroll={onScrollList}>\n        {messageGroups.map(({ id, systemMessage, ...rest }) => {\n          if (systemMessage) {\n            return <SystemMessage key={id} {...rest} />;\n          } else {\n            return <ChatMessageGroup key={id} {...rest} />;\n          }\n        })}\n      </ChatMessageList>\n      <ChatInput\n        id=\"chat-input\"\n        ref={inputRef}\n        onKeyDown={onKeyDown}\n        onChange={e => setMessage(e.target.value)}\n        placeholder={placeholder}\n        value={message}\n        isOverMaxLength={isOverMaxLength}\n        warning={\n          <>\n            {message.length + 50 > MAX_MESSAGE_LENGTH && (\n              <ChatLengthWarning messageLength={message.length} maxLength={MAX_MESSAGE_LENGTH} />\n            )}\n          </>\n        }\n        afterInput={\n          <>\n            {!isMobile && <EmojiPickerPopoverButton onSelectEmoji={onSelectEmoji} />}\n            {message.length === 0 && canSpawnMessages ? (\n              <MessageAttachmentButton onChange={onUploadAttachments} />\n            ) : (\n              <SendMessageButton onClick={onSendMessage} disabled={message.length === 0 || isOverMaxLength} />\n            )}\n            {canSpawnMessages && (\n              <SpawnMessageButton disabled={message.length === 0 || isOverMaxLength} onClick={onSpawnMessage} />\n            )}\n          </>\n        }\n      />\n    </ChatSidebar>\n  );\n}\n\nChatSidebarContainer.propTypes = {\n  canSpawnMessages: PropTypes.bool,\n  presences: PropTypes.object.isRequired,\n  occupantCount: PropTypes.number.isRequired,\n  scene: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  inputEffect: PropTypes.func.isRequired\n};\n\nexport function ChatToolbarButtonContainer(props) {\n  const { unreadMessages } = useContext(ChatContext);\n  return <ChatToolbarButton {...props} statusColor={unreadMessages ? \"unread\" : undefined} />;\n}\n","import { useRef, useEffect, useCallback, useState } from \"react\";\n\nexport function useMaintainScrollPosition(items) {\n  const listRef = useRef();\n  const [scrolledToBottom, setScrolledToBottom] = useState(true);\n\n  const onScrollList = useCallback(\n    e => {\n      const el = e.target;\n      setScrolledToBottom(el.scrollHeight - el.scrollTop === el.clientHeight);\n    },\n    [setScrolledToBottom]\n  );\n\n  useEffect(\n    () => {\n      if (scrolledToBottom) {\n        const el = listRef.current;\n\n        if (el.scrollTop !== el.scrollHeight) {\n          el.scrollTop = el.scrollHeight;\n        }\n      }\n    },\n    [items, scrolledToBottom]\n  );\n\n  return [onScrollList, listRef, scrolledToBottom];\n}\n","// eslint-disable-next-line no-unused-vars\nimport React, { Children } from \"react\";\n\nexport function joinChildren(children, renderSeparator) {\n  const result = Children.toArray(children).reduce(\n    (acc, child) =>\n      acc === null ? (\n        child\n      ) : (\n        <>\n          {acc}\n          {renderSeparator()}\n          {child}\n        </>\n      ),\n    null\n  );\n\n  return result;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgObjects(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M9.152 1.791a1.466 1.466 0 011.449 0l3.424 1.948c.163.093.298.226.393.386.094.16.143.341.144.526v3.76c0 .037-.003.075-.007.113.17.028.334.086.485.171l3.423 1.948c.163.093.299.226.393.386.094.16.144.341.144.526v3.76c0 .184-.05.366-.144.526-.094.16-.229.293-.392.386l-3.424 1.948a1.468 1.468 0 01-1.449 0l-3.424-1.948A1.086 1.086 0 0110 16.11a1.083 1.083 0 01-.166.117L6.41 18.175a1.468 1.468 0 01-1.45 0l-3.423-1.948a1.07 1.07 0 01-.393-.386A1.038 1.038 0 011 15.315v-3.76c0-.185.05-.366.144-.526.094-.16.23-.293.393-.386L4.96 8.695c.079-.044.161-.082.246-.111a1.033 1.033 0 01-.014-.173V4.65c0-.185.05-.366.144-.526.094-.16.23-.293.393-.386L9.152 1.79zm.364 8.672L6.41 8.695a1.462 1.462 0 00-.477-.17.345.345 0 01-.02-.115V4.837l3.604 2.072v3.554zm4.265-1.859c-.065.026-.13.056-.19.091l-3.354 1.908V6.91l3.604-2.072V8.41a.347.347 0 01-.06.194zm-8.206.613a.73.73 0 00-.252.087L2.097 11.14l3.588 2.063 3.414-1.963-3.37-1.917a1.082 1.082 0 01-.154-.106zm5.204 1.953l3.536 2.033 3.589-2.063-3.227-1.836a.732.732 0 00-.506-.08c-.045.036-.094.07-.146.099l-3.246 1.847zm-.903-8.866a.732.732 0 00-.362.096L6.288 4.235 9.877 6.3l3.588-2.064L10.238 2.4a.732.732 0 00-.362-.096zm-.246 13.01v-3.562l-3.585 2.061v3.754h.002l3.423-1.948a.356.356 0 00.165-.206 1.034 1.034 0 01-.005-.098zm.769.176a.35.35 0 01-.034-.077c.003-.033.005-.066.005-.098v-3.563l3.585 2.061v3.754h-.002l-3.423-1.948a.357.357 0 01-.131-.129zm-5.074-1.677L1.72 11.741v3.574a.346.346 0 00.178.304l3.424 1.947.002.001v-3.754zm9.35 3.754h.002l3.424-1.948a.356.356 0 00.178-.304V11.74l-3.603 2.072v3.754z\",\n    fill: props.color\n  }));\n}\n\nSvgObjects.defaultProps = {\n  color: \"#000\",\n  title: \"Objects\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL09iamVjdHMtYTJkNmQ2YzE0NjMzODlkZjc4NTM5MzkzOGVkNzQ4NDYuc3ZnIjs=\";\nexport { SvgObjects as ReactComponent };","import React from \"react\";\nimport className from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { joinChildren } from \"../misc/joinChildren\";\nimport styles from \"./ContentMenu.scss\";\nimport { ReactComponent as ObjectsIcon } from \"../icons/Objects.svg\";\nimport { ReactComponent as PeopleIcon } from \"../icons/People.svg\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function ContentMenuButton({ active, children, ...props }) {\n  return (\n    <button className={className(styles.contentMenuButton, { [styles.active]: active })} {...props}>\n      {children}\n    </button>\n  );\n}\n\nContentMenuButton.propTypes = {\n  children: PropTypes.node,\n  active: PropTypes.bool\n};\n\nexport function ObjectsMenuButton(props) {\n  return (\n    <ContentMenuButton {...props}>\n      <ObjectsIcon />\n      <span>\n        <FormattedMessage id=\"content-menu.objects-menu-button\" defaultMessage=\"Objects\" />\n      </span>\n    </ContentMenuButton>\n  );\n}\n\nexport function PeopleMenuButton(props) {\n  return (\n    <ContentMenuButton {...props}>\n      <PeopleIcon />\n      <span>\n        <FormattedMessage\n          id=\"content-menu.people-menu-button\"\n          defaultMessage=\"People ({presenceCount})\"\n          values={{ presenceCount: props.presencecount }}\n        />\n      </span>\n    </ContentMenuButton>\n  );\n}\nPeopleMenuButton.propTypes = {\n  presencecount: PropTypes.number\n};\n\nexport function ContentMenu({ children }) {\n  return <div className={styles.contentMenu}>{joinChildren(children, () => <div className={styles.separator} />)}</div>;\n}\n\nContentMenu.propTypes = {\n  children: PropTypes.node\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCamera(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.693 5.807l-1.04-1.643a1.126 1.126 0 00-.856-.414H8.203c-.337 0-.637.159-.856.414l-1.04 1.643c-.22.256-.502.443-.838.443H3.125a1.25 1.25 0 00-1.25 1.25V15a1.25 1.25 0 001.25 1.25h13.75a1.25 1.25 0 001.25-1.25V7.5a1.25 1.25 0 00-1.25-1.25H14.57c-.338 0-.658-.187-.877-.443z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 13.75a3.125 3.125 0 100-6.25 3.125 3.125 0 000 6.25z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.844 6.171v-.86h-.938v.86\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgCamera.defaultProps = {\n  color: \"#000\",\n  title: \"Camera\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0NhbWVyYS1hYWViMTA2ODk0NmI2OTQ4MjJkZGJiYWFiOTAxMzM5YS5zdmciOw==\";\nexport { SvgCamera as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.688 3.75a1.563 1.563 0 100-3.126 1.563 1.563 0 000 3.125z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.785 11.547l-1.187 6.727a.937.937 0 001.46.93.928.928 0 00.38-.606l.82-4.683v.007s.203-1.27.683-1.27h.121c.489 0 .684 1.27.684 1.27v-.004l.82 4.684a.935.935 0 001.84-.328l-1.187-6.727-.192-1.16c-.113-.707-.164-1.86.02-2.332.156-.406.552-.555.906-.555h3.61a.937.937 0 000-1.875H3.438a.937.937 0 100 1.875H7.05c.36 0 .75.149.906.555.184.473.133 1.625.02 2.332l-.192 1.16z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"Avatar_svg__clip0\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: 20,\n  height: 20,\n  fill: \"#fff\"\n})));\n\nfunction SvgAvatar(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#Avatar_svg__clip0)\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }, _ref2, _ref3), _ref4);\n}\n\nSvgAvatar.defaultProps = {\n  color: \"#000\",\n  title: \"Avatar\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0F2YXRhci1iYzk1YzU1NjM1ZjJiMGE5ZDgxZGQwZDlhZTA0OTdkYS5zdmciOw==\";\nexport { SvgAvatar as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDelete(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.375 4.375l.781 12.5c.037.723.563 1.25 1.25 1.25h7.188c.69 0 1.206-.527 1.25-1.25l.781-12.5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.125 4.375h13.75\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.5 4.375V2.813a.935.935 0 01.938-.938h3.124a.935.935 0 01.938.938v1.562\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 6.876v8.75\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.188 6.876l.312 8.75\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.813 6.876l-.313 8.75\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgDelete.defaultProps = {\n  color: \"#000\",\n  title: \"Delete\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0RlbGV0ZS0zNDU5NDE5OWJlMDRlMDliNjQ4ZmQ4NmI4ZTdhMGE5OC5zdmciOw==\";\nexport { SvgDelete as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFavorites(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.188 5.2h10.78\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.188 10.2h10.78\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.188 15.2h10.78\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.516 6.562a.127.127 0 01-.074-.023l-1.005-.715-1.005.715a.127.127 0 01-.192-.062.12.12 0 010-.077l.393-1.14-1.016-.683a.123.123 0 01-.049-.138.123.123 0 01.045-.062.127.127 0 01.074-.024H2.94l.378-1.143a.123.123 0 01.046-.062.127.127 0 01.192.062l.378 1.143h1.253c.027 0 .053.008.075.024a.123.123 0 01.044.14.123.123 0 01-.048.06l-1.016.684.392 1.14a.12.12 0 01-.061.148.127.127 0 01-.057.013z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.516 11.562a.126.126 0 01-.074-.023l-1.005-.715-1.005.715a.126.126 0 01-.192-.062.12.12 0 010-.077l.393-1.14-1.016-.683a.123.123 0 01-.049-.138.123.123 0 01.045-.062.127.127 0 01.074-.024H2.94l.378-1.143a.123.123 0 01.046-.062.127.127 0 01.192.062l.378 1.143h1.253c.027 0 .053.008.075.024a.123.123 0 01.044.14.123.123 0 01-.048.06l-1.016.684.392 1.14a.12.12 0 01-.061.148.127.127 0 01-.057.013z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.516 16.562a.126.126 0 01-.074-.023l-1.005-.715-1.005.715a.126.126 0 01-.192-.062.12.12 0 010-.077l.393-1.14-1.016-.683a.12.12 0 01-.004-.2.127.127 0 01.074-.024H2.94l.378-1.143a.126.126 0 01.238 0l.378 1.143h1.253c.027 0 .053.008.075.024a.12.12 0 01-.003.2l-1.017.684.392 1.14a.12.12 0 01-.061.148.127.127 0 01-.057.013z\",\n    fill: props.color\n  }));\n}\n\nSvgFavorites.defaultProps = {\n  color: \"#000\",\n  title: \"Favorites\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Zhdm9yaXRlcy02YjhlNGMxYTFiZDUyMTVhNzRlNjE4M2E2NzhiNmRhYi5zdmciOw==\";\nexport { SvgFavorites as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgStarOutline(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.75 8.125h-6.719L10 1.875l-2.031 6.25H1.25l5.469 3.75-2.11 6.25L10 14.219l5.39 3.906-2.109-6.25 5.469-3.75z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgStarOutline.defaultProps = {\n  color: \"#000\",\n  title: \"Star Outline\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1N0YXJPdXRsaW5lLWFiMzA2ZjVlYjU1YmIwMTMzNTY3ZDVlZjBkMTI0NWQyLnN2ZyI7\";\nexport { SvgStarOutline as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWarningCircle(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.5 10c0-4.14-3.36-7.5-7.5-7.5-4.14 0-7.5 3.36-7.5 7.5 0 4.14 3.36 7.5 7.5 7.5 4.14 0 7.5-3.36 7.5-7.5z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.776 6.487L10 11.25l.224-4.763a.223.223 0 00-.226-.235v0a.224.224 0 00-.222.235v0z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 14.371a.782.782 0 110-1.563.782.782 0 010 1.563z\",\n    fill: props.color\n  }));\n}\n\nSvgWarningCircle.defaultProps = {\n  color: \"#000\",\n  title: \"Warning Circle\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1dhcm5pbmdDaXJjbGUtNGFjM2VlYzZhYmFiMWVmMzNiZWNlYzA5YzQyOTg4ODguc3ZnIjs=\";\nexport { SvgWarningCircle as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgHome(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.125 8.28v9.22a.625.625 0 00.625.625H7.5v-5.313a.937.937 0 01.938-.937h3.124a.938.938 0 01.938.937v5.313h3.75a.625.625 0 00.625-.625V8.28\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.75 10l-8.325-7.968c-.195-.206-.652-.209-.85 0L1.25 10\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.625 6.992V2.5H13.75v2.695\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgHome.defaultProps = {\n  color: \"#000\",\n  title: \"Home\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0hvbWUtMDIxOWU1NWM2MDJjMWZhOTc3ODkwYjE3NGNjMDI5MDMuc3ZnIjs=\";\nexport { SvgHome as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTextDocument(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.25 8.643v7.608a1.875 1.875 0 01-1.875 1.875h-8.75A1.875 1.875 0 013.75 16.25V3.75a1.875 1.875 0 011.875-1.875h3.857c.332 0 .65.131.884.366l5.518 5.518c.234.234.366.552.366.883z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 2.188v4.688a1.25 1.25 0 001.25 1.25h4.688\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.875 11.25h6.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.875 14.376h6.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgTextDocument.defaultProps = {\n  color: \"#000\",\n  title: \"Text Document\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1RleHREb2N1bWVudC1lYTM3M2ViMDQ1ZGQzMTRjMGIwZTI2MGRjZjk0MDY3NS5zdmciOw==\";\nexport { SvgTextDocument as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSupport(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 18.125a8.125 8.125 0 100-16.25 8.125 8.125 0 000 16.25z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 13.125a3.125 3.125 0 100-6.25 3.125 3.125 0 000 6.25z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.125 2.11l.313 5.156\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.563 7.266l.312-5.157\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.125 17.892l.313-5.157\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.563 12.735l.312 5.157\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.89 8.125l-5.156.313\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.734 11.562l5.157.313\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.11 8.125l5.156.313\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.266 11.562l-5.157.313\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgSupport.defaultProps = {\n  color: \"#000\",\n  title: \"Support\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1N1cHBvcnQtODRmMWE2NTE5ZGU0ZmJmZTczYTViNzNiNWY3YmY3ZmYuc3ZnIjs=\";\nexport { SvgSupport as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgShield(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.09 4.39C14.597 3.763 13.153 3.3 10 1.875 6.847 3.3 5.403 3.763 1.91 4.39 1.277 14.42 9.398 17.883 10 18.125c.602-.242 8.723-3.706 8.09-13.735z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgShield.defaultProps = {\n  color: \"#000\",\n  title: \"Shield\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1NoaWVsZC01NDEwNzEzYzFkYzA0NzU4Mzg3NjJmNDg1ZDQzMzhlMS5zdmciOw==\";\nexport { SvgShield as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDiscord(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.246 8.55c-.513 0-.918.45-.918 1 0 .549.414.999.918.999.513 0 .918-.45.918-1 .01-.548-.405-.998-.918-.998zm3.285 0c-.513 0-.918.45-.918 1 0 .549.414.999.918.999.513 0 .918-.45.918-1 0-.548-.405-.998-.918-.998z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.905 1H3.845A1.85 1.85 0 002 2.854v12.168a1.85 1.85 0 001.845 1.854h10.206l-.477-1.665 1.152 1.071 1.089 1.008L17.75 19V2.854A1.85 1.85 0 0015.905 1zm-3.474 11.754s-.324-.387-.594-.729c1.179-.333 1.629-1.071 1.629-1.071a5.15 5.15 0 01-1.035.531c-.45.189-.882.315-1.305.387a6.305 6.305 0 01-2.331-.009 7.555 7.555 0 01-1.323-.387 5.274 5.274 0 01-.657-.306c-.027-.018-.054-.027-.081-.045-.018-.009-.027-.018-.036-.027-.162-.09-.252-.153-.252-.153s.432.72 1.575 1.062c-.27.342-.603.747-.603.747-1.989-.063-2.745-1.368-2.745-1.368 0-2.898 1.296-5.247 1.296-5.247 1.296-.972 2.529-.945 2.529-.945l.09.108c-1.62.468-2.367 1.179-2.367 1.179s.198-.108.531-.261c.963-.423 1.728-.54 2.043-.567.054-.009.099-.018.153-.018a7.336 7.336 0 014.527.846s-.711-.675-2.241-1.143l.126-.144s1.233-.027 2.529.945c0 0 1.296 2.349 1.296 5.247 0 0-.765 1.305-2.754 1.368z\",\n    fill: props.color\n  }));\n}\n\nSvgDiscord.defaultProps = {\n  color: \"#000\",\n  title: \"Discord\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Rpc2NvcmQtY2Q2NmUwMmM1MzczODY4ZmEzMDlmYzgxMzJjNjJlZTkuc3ZnIjs=\";\nexport { SvgDiscord as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLeave(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.5 6.875V5.312a1.563 1.563 0 00-1.563-1.562h-7.5a1.562 1.562 0 00-1.562 1.562v9.375a1.562 1.562 0 001.563 1.563h7.5a1.562 1.562 0 001.562-1.563v-1.562\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 6.875L19.125 10 16 13.125\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.46 10h10.665\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgLeave.defaultProps = {\n  color: \"#000\",\n  title: \"Leave\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0xlYXZlLWRlM2JiMmYwODdlYmU2ZGE4MGMyZTUyODdkZjcwNTZmLnN2ZyI7\";\nexport { SvgLeave as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDesktop(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.122 3H2.979C2.328 3 1.8 3.528 1.8 4.179v9.428c0 .651.528 1.179 1.179 1.179h14.143c.65 0 1.178-.528 1.178-1.179V4.18C18.3 3.528 17.772 3 17.122 3z\",\n    stroke: props.color,\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.818 17.142l-.295-2.357H8.577l-.295 2.357h3.536z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.175 17.142h-8.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.8 11.839v1.768a1.182 1.182 0 001.179 1.178h14.143a1.182 1.182 0 001.178-1.178v-1.768H1.8zm8.25 2.357a.59.59 0 110-1.18.59.59 0 010 1.18z\",\n    fill: props.color\n  }));\n}\n\nSvgDesktop.defaultProps = {\n  color: \"#000\",\n  title: \"Desktop\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Rlc2t0b3AtYjkyODdhNGExY2ExMDVkODY4NTFkMGIxYmEyYTJmODUuc3ZnIjs=\";\nexport { SvgDesktop as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.125.625h-6.25C5.839.625 5 1.465 5 2.5v15c0 1.035.84 1.875 1.875 1.875h6.25c1.036 0 1.875-.84 1.875-1.875v-15c0-1.036-.84-1.875-1.875-1.875z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.875.625h.938a.312.312 0 01.312.312.625.625 0 00.625.625h2.5a.625.625 0 00.625-.625.312.312 0 01.313-.312h.937\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"Phone_svg__clip0\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: 20,\n  height: 20,\n  fill: \"#fff\"\n})));\n\nfunction SvgPhone(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#Phone_svg__clip0)\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, _ref2, _ref3), _ref4);\n}\n\nSvgPhone.defaultProps = {\n  color: \"#000\",\n  title: \"Phone\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1Bob25lLTQ3NWQ0NmY5MGVjNGE1ZWUxMTkxZGNlOTM5NzhhOTZjLnN2ZyI7\";\nexport { SvgPhone as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVolumeHigh(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.922 7.501H2.188a.312.312 0 00-.313.313v4.375a.313.313 0 00.313.312h2.72a.623.623 0 01.396.138l3.573 2.926a.313.313 0 00.498-.251V4.689a.313.313 0 00-.498-.252L5.304 7.363a.586.586 0 01-.382.138z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.5 12.5c.38-.758.625-1.596.625-2.5 0-.918-.234-1.736-.625-2.5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.375 14.374c.76-1.325 1.25-2.502 1.25-4.375 0-1.872-.469-3.036-1.25-4.375\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.25 16.248c1.172-1.797 1.875-3.571 1.875-6.25 0-2.678-.703-4.414-1.875-6.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgVolumeHigh.defaultProps = {\n  color: \"#000\",\n  title: \"Volume High\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1ZvbHVtZUhpZ2gtNDEyOGVhODQ0MzQ3OTRmN2QzNDg5NjMyZDEwNmE2NDAuc3ZnIjs=\";\nexport { SvgVolumeHigh as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVolumeMuted(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.25 16.876L2.5 3.126\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.75 5.349v1.32c0 .041.017.08.046.11l.937.938a.156.156 0 00.267-.11V4.71a.958.958 0 00-.495-.849.934.934 0 00-1.024.092L7.234 4.974a.156.156 0 00-.012.232l.666.666a.156.156 0 00.21.01l.652-.533z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.75 14.652L5.7 12.155a1.25 1.25 0 00-.792-.28H2.5v-3.75h1.981a.156.156 0 00.11-.267l-.937-.937a.156.156 0 00-.11-.046H2.187a.937.937 0 00-.937.938v4.375a.937.937 0 00.938.937h2.724l3.57 2.922a.934.934 0 001.392-.27.957.957 0 00.126-.486v-1.96a.156.156 0 00-.046-.11l-.937-.937a.157.157 0 00-.24.023.157.157 0 00-.027.087v2.258z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.75 10c0-.959-.227-1.87-.693-2.783a.625.625 0 00-1.114.567c.375.734.557 1.46.557 2.217 0 .104-.004.21-.012.317a.312.312 0 00.09.244l.768.769a.156.156 0 00.264-.079c.093-.41.14-.83.14-1.252z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.25 10.001c0-2-.511-3.277-1.335-4.69a.625.625 0 00-1.08.63C14.573 7.206 15 8.276 15 10c0 .93-.129 1.675-.366 2.37a.313.313 0 00.074.322l.655.655a.156.156 0 00.255-.05c.4-.958.632-1.972.632-3.297z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.75 10c0-2.9-.789-4.73-1.973-6.586a.625.625 0 10-1.055.673C16.79 5.757 17.5 7.403 17.5 10c0 1.854-.348 3.208-.922 4.414a.156.156 0 00.03.178l.697.697a.157.157 0 00.25-.039c.839-1.647 1.195-3.258 1.195-5.25z\",\n    fill: props.color\n  }));\n}\n\nSvgVolumeMuted.defaultProps = {\n  color: \"#000\",\n  title: \"Volume Muted\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1ZvbHVtZU11dGVkLTEwOGZiYzU3YzhjZWFjNmIwZDkzZWMxZTAzMzY4OTFhLnN2ZyI7\";\nexport { SvgVolumeMuted as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\",\n  id: \"style869\"\n}, \".HandRaised_svg__st0{fill:#ffd3b6}\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"HandRaised_svg__st0\",\n  d: \"M220.8 196.584\",\n  id: \"HandRaised_svg__path871\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\",\n  id: \"style1042\"\n}, \".HandRaised_svg__st0{fill:#ffd3b6}\");\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"HandRaised_svg__g1059\",\n  transform: \"matrix(.05125 0 0 .05125 -14.217 -12.843)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"HandRaised_svg__st0\",\n  d: \"M288.372 256.007\",\n  id: \"HandRaised_svg__path1044\",\n  strokeWidth: 0.039\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M294.69 257.645c-.424-.378-1.361-.899-3.287.953-.358.342-.572.467-.844.762v-9.134c0-.591-.467-1.074-1.062-1.074-.596 0-1.078.483-1.078 1.074v5.419c0 .506-.654.549-.767.132v-6.465c0-.592-.466-1.074-1.062-1.074-.595 0-1.077.478-1.077 1.074v6.485c-.082.397-.665.381-.708-.047v-5.664a1.06 1.06 0 00-1.062-1.07c-.596 0-1.078.478-1.078 1.07v5.575c-.004.007-.004.02-.004.039 0 .486-.626.529-.74.136v-3.992a1.06 1.06 0 00-1.061-1.07c-.595 0-1.078.479-1.078 1.07v9.392a4.768 4.768 0 002.739 4.314v1.525c0 .591.482 1.074 1.074 1.074h4.295c.591 0 1.073-.483 1.073-1.074v-1.081a2.517 2.517 0 001.755-1.031.313.313 0 00.031-.047c.035-.039.078-.109.128-.21.028-.047.051-.093.074-.144.494-1 1.623-3.708 3.646-5.458.416-.417.517-1.082.093-1.46z\",\n  id: \"HandRaised_svg__path1046\",\n  strokeWidth: 0.039,\n  fill: \"#ffd469\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M288.726 266.013H285.4l.007-.007h-.871a4.774 4.774 0 01-2.027-.451v1.361c.194.102.38.168.54.168h5.373c.156 0 .339-.051.53-.133v-.949l-.226.012z\",\n  id: \"HandRaised_svg__path1048\",\n  strokeWidth: 0.039,\n  fill: \"#ffb636\"\n}));\n\nfunction SvgHandRaised(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"HandRaised_svg__Layer_1\",\n    x: 0,\n    y: 0,\n    viewBox: \"0 0 1.025 0.782\",\n    xmlSpace: \"preserve\",\n    width: 20,\n    height: 20,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nSvgHandRaised.defaultProps = {\n  color: \"#000\",\n  title: \"Hand Raised\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0hhbmRSYWlzZWQtZjIyM2Y2OGU4YjY2ZWE2YTQ4YjhkMjI5OWQzNjEyM2Uuc3ZnIjs=\";\nexport { SvgHandRaised as ReactComponent };","import React, { forwardRef } from \"react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./List.scss\";\n\nexport const List = forwardRef(({ className, children, ...rest }, ref) => {\n  return (\n    <ul {...rest} className={classNames(styles.list, className)} ref={ref}>\n      {children}\n    </ul>\n  );\n});\n\nList.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n\nexport function ListItem({ className, children, ...rest }) {\n  return (\n    <li {...rest} className={classNames(styles.listItem, styles.listItemContent, className)}>\n      {children}\n    </li>\n  );\n}\n\nListItem.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n\nexport function ButtonListItem({ className, children, ...rest }) {\n  return (\n    <li className={styles.listItem}>\n      <button {...rest} className={classNames(styles.listItemContent, styles.buttonListItem, className)}>\n        {children}\n      </button>\n    </li>\n  );\n}\n\nButtonListItem.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./PeopleSidebar.scss\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { IconButton } from \"../input/IconButton\";\nimport { ReactComponent as StarIcon } from \"../icons/Star.svg\";\nimport { ReactComponent as DesktopIcon } from \"../icons/Desktop.svg\";\nimport { ReactComponent as DiscordIcon } from \"../icons/Discord.svg\";\nimport { ReactComponent as PhoneIcon } from \"../icons/Phone.svg\";\nimport { ReactComponent as VRIcon } from \"../icons/VR.svg\";\nimport { ReactComponent as VolumeOffIcon } from \"../icons/VolumeOff.svg\";\nimport { ReactComponent as VolumeHighIcon } from \"../icons/VolumeHigh.svg\";\nimport { ReactComponent as VolumeMutedIcon } from \"../icons/VolumeMuted.svg\";\nimport { ReactComponent as HandRaisedIcon } from \"../icons/HandRaised.svg\";\nimport { List, ButtonListItem } from \"../layout/List\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nfunction getDeviceLabel(ctx, intl) {\n  if (ctx) {\n    if (ctx.hmd) {\n      return intl.formatMessage({ id: \"people-sidebar.device-label.vr\", defaultMessage: \"VR\" });\n    } else if (ctx.discord) {\n      return intl.formatMessage({ id: \"people-sidebar.device-label.discord\", defaultMessage: \"Discord Bot\" });\n    } else if (ctx.mobile) {\n      return intl.formatMessage({ id: \"people-sidebar.device-label.mobile\", defaultMessage: \"Mobile\" });\n    }\n  }\n\n  return intl.formatMessage({ id: \"people-sidebar.device-label.desktop\", defaultMessage: \"Desktop\" });\n}\n\nfunction getDeviceIconComponent(ctx) {\n  if (ctx) {\n    if (ctx.hmd) {\n      return VRIcon;\n    } else if (ctx.discord) {\n      return DiscordIcon;\n    } else if (ctx.mobile) {\n      return PhoneIcon;\n    }\n  }\n\n  return DesktopIcon;\n}\n\nfunction getVoiceLabel(micPresence, intl) {\n  if (micPresence) {\n    if (micPresence.talking) {\n      return intl.formatMessage({ id: \"people-sidebar.voice-label.talking\", defaultMessage: \"Talking\" });\n    } else if (micPresence.muted) {\n      return intl.formatMessage({ id: \"people-sidebar.voice-label.muted\", defaultMessage: \"Muted\" });\n    }\n  }\n\n  return intl.formatMessage({ id: \"people-sidebar.voice-label.not-talking\", defaultMessage: \"Not Talking\" });\n}\n\nfunction getVoiceIconComponent(micPresence) {\n  if (micPresence) {\n    if (micPresence.muted) {\n      return VolumeMutedIcon;\n    } else if (micPresence.talking) {\n      return VolumeHighIcon;\n    }\n  }\n\n  return VolumeOffIcon;\n}\n\nfunction getPresenceMessage(presence, intl) {\n  switch (presence) {\n    case \"lobby\":\n      return intl.formatMessage({ id: \"people-sidebar.presence.in-lobby\", defaultMessage: \"In Lobby\" });\n    case \"room\":\n      return intl.formatMessage({ id: \"people-sidebar.presence.in-room\", defaultMessage: \"In Room\" });\n    case \"entering\":\n      return intl.formatMessage({ id: \"people-sidebar.presence.entering\", defaultMessage: \"Entering Room\" });\n    default:\n      return undefined;\n  }\n}\n\nfunction getPersonName(person, intl) {\n  const you = intl.formatMessage({\n    id: \"people-sidebar.person-name.you\",\n    defaultMessage: \"You\"\n  });\n\n  return person.profile.displayName + (person.isMe ? ` (${you})` : \"\");\n}\n\nexport function PeopleSidebar({ people, onSelectPerson, onClose, showMuteAll, onMuteAll }) {\n  const intl = useIntl();\n\n  return (\n    <Sidebar\n      title={\n        <FormattedMessage\n          id=\"people-sidebar.title\"\n          defaultMessage=\"People ({numPeople})\"\n          values={{ numPeople: people.length }}\n        />\n      }\n      beforeTitle={<CloseButton onClick={onClose} />}\n      afterTitle={\n        showMuteAll ? (\n          <IconButton onClick={onMuteAll}>\n            <FormattedMessage id=\"people-sidebar.mute-all-button\" defaultMessage=\"Mute All\" />\n          </IconButton>\n        ) : (\n          undefined\n        )\n      }\n    >\n      <List>\n        {people.map(person => {\n          const DeviceIcon = getDeviceIconComponent(person.context);\n          const VoiceIcon = getVoiceIconComponent(person.micPresence);\n\n          return (\n            <ButtonListItem\n              className={styles.person}\n              key={person.id}\n              type=\"button\"\n              onClick={e => onSelectPerson(person, e)}\n            >\n              {person.hand_raised && <HandRaisedIcon />}\n              {<DeviceIcon title={getDeviceLabel(person.context, intl)} />}\n              {!person.context.discord && VoiceIcon && <VoiceIcon title={getVoiceLabel(person.micPresence, intl)} />}\n              <p>{getPersonName(person, intl)}</p>\n              {person.roles.owner && (\n                <StarIcon\n                  title={intl.formatMessage({ id: \"people-sidebar.moderator-label\", defaultMessage: \"Moderator\" })}\n                  className={styles.moderatorIcon}\n                  width={12}\n                  height={12}\n                />\n              )}\n              <p className={styles.presence}>{getPresenceMessage(person.presence, intl)}</p>\n            </ButtonListItem>\n          );\n        })}\n      </List>\n    </Sidebar>\n  );\n}\n\nPeopleSidebar.propTypes = {\n  people: PropTypes.array,\n  onSelectPerson: PropTypes.func,\n  showMuteAll: PropTypes.bool,\n  onMuteAll: PropTypes.func,\n  onClose: PropTypes.func\n};\n\nPeopleSidebar.defaultProps = {\n  people: [],\n  onSelectPerson: () => {}\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Modal } from \"../modal/Modal\";\nimport { Button, CancelButton } from \"../input/Button\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Column } from \"../layout/Column\";\n\nexport function PromoteClientModal({ onClose, onConfirm, displayName }) {\n  return (\n    <Modal title=\"Promote User\" beforeTitle={<CloseButton onClick={onClose} />}>\n      <Column center padding>\n        <p>\n          <FormattedMessage\n            id=\"promote-client-modal.message\"\n            defaultMessage=\"Promoting a user will grant full access to room settings and moderation tools.{linebreak}Are you sure?\"\n            values={{ linebreak: <br /> }}\n          />\n        </p>\n        <Button preset=\"accept\" onClick={onConfirm}>\n          <FormattedMessage\n            id=\"promote-client-modal.confirm-prefix\"\n            defaultMessage=\"Yes, promote {name}\"\n            values={{ name: displayName }}\n          />\n        </Button>\n        <CancelButton preset=\"cancel\" onClick={onClose} />\n      </Column>\n    </Modal>\n  );\n}\n\nPromoteClientModal.propTypes = {\n  displayName: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { BackButton } from \"../input/BackButton\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport styles from \"./UserProfileSidebar.scss\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\nimport { Slider } from \"../input/Slider\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as VolumeHigh } from \"../icons/VolumeHigh.svg\";\nimport { ReactComponent as VolumeMuted } from \"../icons/VolumeMuted.svg\";\nimport useAvatarVolume from \"./useAvatarVolume\";\nimport { calcLevel, calcGainMultiplier, MAX_VOLUME_LABELS } from \"../../utils/avatar-volume-utils\";\n\nconst MIN = 0;\nconst MAX = MAX_VOLUME_LABELS - 1;\n\nexport function UserProfileSidebar({\n  className,\n  userId,\n  displayName,\n  identityName,\n  avatarPreview,\n  hasMicPresence,\n  isSignedIn,\n  canPromote,\n  onPromote,\n  canDemote,\n  onDemote,\n  isHidden,\n  onToggleHidden,\n  canMute,\n  isNetworkMuted,\n  onMute,\n  canKick,\n  onKick,\n  showBackButton,\n  onBack,\n  onClose,\n  ...rest\n}) {\n  const intl = useIntl();\n  const [multiplier, updateMultiplier, isMuted, updateMuted] = useAvatarVolume(userId);\n  const onLevelChanged = useCallback(\n    level => {\n      updateMultiplier(calcGainMultiplier(level));\n    },\n    [updateMultiplier]\n  );\n  const newLevel = calcLevel(multiplier);\n  return (\n    <Sidebar\n      title={identityName ? `${displayName} (${identityName})` : displayName}\n      beforeTitle={showBackButton ? <BackButton onClick={onBack} /> : <CloseButton onClick={onClose} />}\n      className={className}\n      {...rest}\n    >\n      <Column center padding>\n        <div className={styles.avatarPreviewContainer}>{avatarPreview || <div />}</div>\n        {hasMicPresence && (\n          <div className={styles.sliderContainer}>\n            <ToolbarButton\n              icon={isNetworkMuted || isMuted ? <VolumeMuted /> : <VolumeHigh />}\n              selected={isNetworkMuted || isMuted}\n              preset=\"accent4\"\n              style={{ display: \"block\" }}\n              onClick={() => {\n                updateMuted(!isMuted);\n              }}\n              disabled={isNetworkMuted}\n            />\n            <Slider\n              min={MIN}\n              max={MAX}\n              step={1}\n              value={newLevel}\n              onChange={onLevelChanged}\n              className={styles.sliderInputContainer}\n              disabled={isNetworkMuted || isMuted}\n            />\n          </div>\n        )}\n        {canPromote && (\n          <Button\n            preset=\"accept\"\n            disabled={!isSignedIn}\n            title={\n              isSignedIn\n                ? intl.formatMessage({ id: \"user-profile-sidebar.promote-button\", defaultMessage: \"Promote\" })\n                : intl.formatMessage(\n                    {\n                      id: \"user-profile-sidebar.promote-button-disabled-label\",\n                      defaultMessage: \"{displayName} is signed out.\"\n                    },\n                    { displayName }\n                  )\n            }\n            onClick={onPromote}\n          >\n            <FormattedMessage id=\"user-profile-sidebar.promote-button\" defaultMessage=\"Promote\" />\n          </Button>\n        )}\n        {canDemote && (\n          <Button\n            preset=\"cancel\"\n            disabled={!isSignedIn}\n            title={\n              isSignedIn\n                ? intl.formatMessage({ id: \"user-profile-sidebar.demote-button\", defaultMessage: \"Demote\" })\n                : intl.formatMessage(\n                    {\n                      id: \"user-profile-sidebar.demote-button-disabled-label\",\n                      defaultMessage: \"{displayName} is signed out.\"\n                    },\n                    { displayName }\n                  )\n            }\n            onClick={onDemote}\n          >\n            <FormattedMessage id=\"user-profile-sidebar.demote-button\" defaultMessage=\"Demote\" />\n          </Button>\n        )}\n        <Button onClick={onToggleHidden}>\n          {isHidden ? (\n            <FormattedMessage id=\"user-profile-sidebar.unhide-button\" defaultMessage=\"Unhide\" />\n          ) : (\n            <FormattedMessage id=\"user-profile-sidebar.hide-button\" defaultMessage=\"Hide\" />\n          )}\n        </Button>\n        {canMute && (\n          <Button preset=\"cancel\" onClick={onMute}>\n            <FormattedMessage id=\"user-profile-sidebar.mute-button\" defaultMessage=\"Mute\" />\n          </Button>\n        )}\n        {canKick && (\n          <Button preset=\"cancel\" onClick={onKick}>\n            <FormattedMessage id=\"user-profile-sidebar.kick-button\" defaultMessage=\"Kick\" />\n          </Button>\n        )}\n      </Column>\n    </Sidebar>\n  );\n}\n\nUserProfileSidebar.propTypes = {\n  className: PropTypes.string,\n  userId: PropTypes.string,\n  displayName: PropTypes.string,\n  identityName: PropTypes.string,\n  avatarPreview: PropTypes.node,\n  hasMicPresence: PropTypes.bool,\n  isSignedIn: PropTypes.bool,\n  canPromote: PropTypes.bool,\n  onPromote: PropTypes.func,\n  canDemote: PropTypes.bool,\n  onDemote: PropTypes.func,\n  isHidden: PropTypes.bool,\n  onToggleHidden: PropTypes.func,\n  canMute: PropTypes.bool,\n  isNetworkMuted: PropTypes.bool,\n  onMute: PropTypes.func,\n  canKick: PropTypes.bool,\n  onKick: PropTypes.func,\n  showBackButton: PropTypes.bool,\n  onBack: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import { useCallback, useEffect, useState } from \"react\";\nimport { getPlayerInfo } from \"../../utils/component-utils\";\n\nexport default function useAvatarVolume(sessionId, onMultiplierChanged) {\n  const playerInfo = getPlayerInfo(sessionId);\n  const controlsEl = playerInfo?.el.querySelector(\"[avatar-volume-controls]\");\n  const controls = controlsEl?.components[\"avatar-volume-controls\"];\n  const [multiplier, setMultiplier] = useState(0);\n  const [isMuted, setIsMuted] = useState(false);\n\n  const onMultiplierUpdated = useCallback(\n    ({ detail: { gainMultiplier } }) => {\n      setMultiplier(gainMultiplier);\n      onMultiplierChanged && onMultiplierChanged(gainMultiplier);\n    },\n    [onMultiplierChanged]\n  );\n\n  const updateMultiplier = useCallback(\n    gainMultiplier => {\n      if (!controls) return;\n      setMultiplier(gainMultiplier);\n      controls.updateGainMultiplier(gainMultiplier, true);\n    },\n    [controls]\n  );\n\n  const onLocalMutedUpdated = useCallback(({ detail: { muted } }) => {\n    setIsMuted(muted);\n  }, []);\n\n  const updateMuted = useCallback(\n    muted => {\n      if (!controls) return;\n      setIsMuted(!!muted);\n      controls.updateLocalMuted(!!muted, true);\n    },\n    [controls]\n  );\n\n  useEffect(\n    () => {\n      if (!controlsEl) return;\n      controlsEl.addEventListener(\"gain_multiplier_updated\", onMultiplierUpdated);\n      controlsEl.addEventListener(\"local_muted_updated\", onLocalMutedUpdated);\n\n      const gainMultiplier = APP.gainMultipliers.get(controls.audioEl);\n      onMultiplierUpdated({ detail: { gainMultiplier } });\n      const isLocalMuted = APP.mutedState.has(controls.audioEl);\n      setIsMuted(isLocalMuted);\n\n      return () => {\n        controlsEl.removeEventListener(\"gain_multiplier_updated\", onMultiplierUpdated);\n        controlsEl.removeEventListener(\"local_muted_updated\", onLocalMutedUpdated);\n      };\n    },\n    [controls, controlsEl, onMultiplierUpdated, onLocalMutedUpdated]\n  );\n\n  return [multiplier, updateMultiplier, isMuted, updateMuted];\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { PromoteClientModal } from \"./PromoteClientModal\";\nimport { getAvatarThumbnailUrl } from \"../../utils/avatar-utils\";\nimport { UserProfileSidebar } from \"./UserProfileSidebar.js\";\nimport { SignInMessages } from \"../auth/SignInModal\";\n\nexport function UserProfileSidebarContainer({\n  user,\n  hubChannel,\n  performConditionalSignIn,\n  showBackButton,\n  onBack,\n  onClose,\n  onCloseDialog,\n  showNonHistoriedDialog\n}) {\n  const [avatarThumbnailUrl, setAvatarThumbnailUrl] = useState();\n\n  const {\n    id: userId,\n    profile: { displayName, identityName, avatarId },\n    roles\n  } = user;\n  const mayKick = hubChannel.canOrWillIfCreator(\"kick_users\");\n  const hasMicPresence = !!user.micPresence;\n  const isNetworkMuted = user.micPresence?.muted;\n  const mayMute = !isNetworkMuted && hubChannel.canOrWillIfCreator(\"mute_users\");\n  const [isOwner, setIsOwner] = useState(!!roles.owner);\n  const isCreator = !!roles.creator;\n  const isSignedIn = !!roles.signed_in;\n  const mayAddOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && !isOwner && !isCreator;\n  const mayRemoveOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && isOwner && !isCreator;\n  const [isHidden, setIsHidden] = useState(hubChannel.isHidden(user.id));\n\n  useEffect(\n    () => {\n      if (avatarId) {\n        getAvatarThumbnailUrl(avatarId).then(avatarThumbnailUrl => setAvatarThumbnailUrl(avatarThumbnailUrl));\n      }\n    },\n    [avatarId, setAvatarThumbnailUrl, user]\n  );\n\n  const addOwner = useCallback(\n    () => {\n      performConditionalSignIn(\n        () => hubChannel.can(\"update_roles\"),\n        async () => {\n          showNonHistoriedDialog(PromoteClientModal, {\n            displayName,\n            onConfirm: async () => {\n              setIsOwner(true);\n              await hubChannel.addOwner(userId);\n              onCloseDialog();\n            }\n          });\n        },\n        SignInMessages.addOwner\n      );\n    },\n    [performConditionalSignIn, hubChannel, showNonHistoriedDialog, userId, onCloseDialog, displayName]\n  );\n\n  const removeOwner = useCallback(\n    () => {\n      performConditionalSignIn(\n        () => hubChannel.can(\"update_roles\"),\n        async () => {\n          setIsOwner(false);\n          await hubChannel.removeOwner(userId);\n        },\n        SignInMessages.removeOwner\n      );\n    },\n    [performConditionalSignIn, hubChannel, userId]\n  );\n\n  const toggleHidden = useCallback(\n    () => {\n      if (isHidden) {\n        hubChannel.unhide(userId);\n      } else {\n        hubChannel.hide(userId);\n      }\n\n      setIsHidden(!isHidden);\n    },\n    [isHidden, userId, hubChannel]\n  );\n\n  const mute = useCallback(\n    () => {\n      performConditionalSignIn(\n        () => hubChannel.can(\"mute_users\"),\n        async () => await hubChannel.mute(userId),\n        SignInMessages.muteUser\n      );\n    },\n    [performConditionalSignIn, hubChannel, userId]\n  );\n\n  const kick = useCallback(\n    () => {\n      performConditionalSignIn(\n        () => hubChannel.can(\"kick_users\"),\n        async () => await hubChannel.kick(userId),\n        SignInMessages.kickUser\n      );\n\n      if (onClose) {\n        onClose();\n      } else if (onBack) {\n        onBack();\n      }\n    },\n    [performConditionalSignIn, hubChannel, userId, onClose, onBack]\n  );\n\n  return (\n    <UserProfileSidebar\n      userId={user.id}\n      displayName={displayName}\n      identityName={identityName}\n      avatarPreview={<img src={avatarThumbnailUrl} />}\n      isSignedIn={isSignedIn}\n      canPromote={mayAddOwner}\n      onPromote={addOwner}\n      canDemote={mayRemoveOwner}\n      onDemote={removeOwner}\n      isHidden={isHidden}\n      onToggleHidden={toggleHidden}\n      canMute={mayMute}\n      isNetworkMuted={isNetworkMuted}\n      onMute={mute}\n      canKick={mayKick}\n      onKick={kick}\n      showBackButton={showBackButton}\n      onClose={onClose}\n      onBack={onBack}\n      hasMicPresence={hasMicPresence}\n    />\n  );\n}\n\nUserProfileSidebarContainer.propTypes = {\n  user: PropTypes.object.isRequired,\n  hubChannel: PropTypes.object,\n  performConditionalSignIn: PropTypes.func,\n  showBackButton: PropTypes.bool,\n  onBack: PropTypes.func,\n  onClose: PropTypes.func,\n  onCloseDialog: PropTypes.func.isRequired,\n  showNonHistoriedDialog: PropTypes.func\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { PeopleSidebar } from \"./PeopleSidebar\";\nimport { getMicrophonePresences } from \"../../utils/microphone-presence\";\nimport ProfileEntryPanel from \"../profile-entry-panel\";\nimport { UserProfileSidebarContainer } from \"./UserProfileSidebarContainer\";\n\nexport function userFromPresence(sessionId, presence, micPresences, mySessionId) {\n  const meta = presence.metas[presence.metas.length - 1];\n  const micPresence = micPresences.get(sessionId);\n  return { id: sessionId, isMe: mySessionId === sessionId, micPresence, ...meta };\n}\n\nfunction usePeopleList(presences, mySessionId, micUpdateFrequency = 500) {\n  const [people, setPeople] = useState([]);\n\n  useEffect(\n    () => {\n      let timeout;\n\n      function updateMicrophoneState() {\n        const micPresences = getMicrophonePresences();\n\n        setPeople(\n          Object.entries(presences).map(([id, presence]) => {\n            return userFromPresence(id, presence, micPresences, mySessionId);\n          })\n        );\n\n        timeout = setTimeout(updateMicrophoneState, micUpdateFrequency);\n      }\n\n      updateMicrophoneState();\n\n      return () => {\n        clearTimeout(timeout);\n      };\n    },\n    [presences, micUpdateFrequency, setPeople, mySessionId]\n  );\n\n  return people;\n}\n\nfunction PeopleListContainer({ hubChannel, people, onSelectPerson, onClose }) {\n  const onMuteAll = useCallback(\n    () => {\n      for (const person of people) {\n        if (person.presence === \"room\" && person.permissions && !person.permissions.mute_users) {\n          hubChannel.mute(person.id);\n        }\n      }\n    },\n    [people, hubChannel]\n  );\n\n  return (\n    <PeopleSidebar\n      people={people}\n      onSelectPerson={onSelectPerson}\n      onClose={onClose}\n      onMuteAll={onMuteAll}\n      showMuteAll={hubChannel.can(\"mute_users\")}\n    />\n  );\n}\n\nPeopleListContainer.propTypes = {\n  onSelectPerson: PropTypes.func.isRequired,\n  hubChannel: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  people: PropTypes.array.isRequired\n};\n\nexport function PeopleSidebarContainer({\n  hubChannel,\n  presences,\n  mySessionId,\n  displayNameOverride,\n  store,\n  mediaSearchStore,\n  performConditionalSignIn,\n  onCloseDialog,\n  showNonHistoriedDialog,\n  onClose\n}) {\n  const people = usePeopleList(presences, mySessionId);\n  const [selectedPersonId, setSelectedPersonId] = useState(null);\n  const selectedPerson = people.find(person => person.id === selectedPersonId);\n  const setSelectedPerson = useCallback(\n    person => {\n      setSelectedPersonId(person.id);\n    },\n    [setSelectedPersonId]\n  );\n\n  if (selectedPerson) {\n    if (selectedPerson.id === mySessionId) {\n      return (\n        <ProfileEntryPanel\n          containerType=\"sidebar\"\n          displayNameOverride={displayNameOverride}\n          store={store}\n          mediaSearchStore={mediaSearchStore}\n          finished={() => setSelectedPersonId(null)}\n          history={history}\n          showBackButton\n          onBack={() => setSelectedPersonId(null)}\n        />\n      );\n    } else {\n      return (\n        <UserProfileSidebarContainer\n          user={selectedPerson}\n          hubChannel={hubChannel}\n          performConditionalSignIn={performConditionalSignIn}\n          showBackButton\n          onBack={() => setSelectedPersonId(null)}\n          onCloseDialog={onCloseDialog}\n          showNonHistoriedDialog={showNonHistoriedDialog}\n        />\n      );\n    }\n  }\n\n  return (\n    <PeopleListContainer onSelectPerson={setSelectedPerson} onClose={onClose} hubChannel={hubChannel} people={people} />\n  );\n}\n\nPeopleSidebarContainer.propTypes = {\n  displayNameOverride: PropTypes.string,\n  store: PropTypes.object.isRequired,\n  mediaSearchStore: PropTypes.object.isRequired,\n  hubChannel: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  mySessionId: PropTypes.string.isRequired,\n  presences: PropTypes.object.isRequired,\n  performConditionalSignIn: PropTypes.func.isRequired,\n  onCloseDialog: PropTypes.func.isRequired,\n  showNonHistoriedDialog: PropTypes.func.isRequired\n};\n","import { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { faMusic } from \"@fortawesome/free-solid-svg-icons/faMusic\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faNewspaper } from \"@fortawesome/free-solid-svg-icons/faNewspaper\";\nimport { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\";\nimport { faCube } from \"@fortawesome/free-solid-svg-icons/faCube\";\n\nexport const SORT_ORDER_VIDEO = 0;\nexport const SORT_ORDER_AUDIO = 1;\nexport const SORT_ORDER_IMAGE = 2;\nexport const SORT_ORDER_PDF = 3;\nexport const SORT_ORDER_MODEL = 4;\nexport const SORT_ORDER_UNIDENTIFIED = 5;\n\nexport function mediaSortOrder(el) {\n  if (el.components[\"media-video\"] && el.components[\"media-video\"].data.contentType.startsWith(\"audio/\")) {\n    return SORT_ORDER_AUDIO;\n  }\n  if (el.components[\"media-video\"]) return SORT_ORDER_VIDEO;\n  if (el.components[\"media-image\"]) return SORT_ORDER_IMAGE;\n  if (el.components[\"media-pdf\"]) return SORT_ORDER_PDF;\n  if (el.components[\"gltf-model-plus\"]) return SORT_ORDER_MODEL;\n  return SORT_ORDER_UNIDENTIFIED;\n}\n\nexport function mediaSort(el1, el2) {\n  return mediaSortOrder(el1) - mediaSortOrder(el2);\n}\n\nexport const DISPLAY_IMAGE = new Map([\n  [SORT_ORDER_VIDEO, faVideo],\n  [SORT_ORDER_AUDIO, faMusic],\n  [SORT_ORDER_IMAGE, faImage],\n  [SORT_ORDER_PDF, faNewspaper],\n  [SORT_ORDER_UNIDENTIFIED, faQuestion],\n  [SORT_ORDER_MODEL, faCube]\n]);\n\nconst SORT_ORDER_TO_TYPE = {\n  [SORT_ORDER_VIDEO]: \"video\",\n  [SORT_ORDER_AUDIO]: \"audio\",\n  [SORT_ORDER_IMAGE]: \"image\",\n  [SORT_ORDER_PDF]: \"pdf\",\n  [SORT_ORDER_MODEL]: \"model\"\n};\n\nexport function getMediaType(el) {\n  const order = mediaSortOrder(el);\n  return SORT_ORDER_TO_TYPE[order];\n}\n","import React, { useState, useEffect, useContext, createContext, useCallback, Children, cloneElement } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { mediaSort, getMediaType } from \"../../utils/media-sorting.js\";\n\nfunction getDisplayString(el) {\n  // Having a listed-media component does not guarantee the existence of a media-loader component,\n  // so don't crash if there isn't one.\n  const url = (el.components[\"media-loader\"] && el.components[\"media-loader\"].data.src) || \"\";\n  const split = url.split(\"/\");\n  const resourceName = split[split.length - 1].split(\"?\")[0];\n  let httpIndex = -1;\n  for (let i = 0; i < split.length; i++) {\n    if (split[i].indexOf(\"http\") !== -1) {\n      httpIndex = i;\n    }\n  }\n\n  let host = \"\";\n  let lessHost = \"\";\n  if (httpIndex !== -1 && split.length > httpIndex + 3) {\n    host = split[httpIndex + 2];\n    const hostSplit = host.split(\".\");\n    if (hostSplit.length > 1) {\n      lessHost = `${hostSplit[hostSplit.length - 2]}.${hostSplit[hostSplit.length - 1]}`;\n    }\n  }\n\n  const firstPart =\n    url.indexOf(\"sketchfab.com\") !== -1 ? \"Sketchfab\" : url.indexOf(\"youtube.com\") !== -1 ? \"YouTube\" : lessHost;\n\n  return `${firstPart} ... ${resourceName.substr(0, 4)}`;\n}\n\nconst ObjectListContext = createContext({\n  objects: [],\n  focusedObject: null,\n  selectedObject: null,\n  focusObject: () => {},\n  unfocusObject: () => {},\n  inspectObject: () => {},\n  uninspectObject: () => {}\n});\n\nfunction handleInspect(scene, object, callback) {\n  const cameraSystem = scene.systems[\"hubs-systems\"].cameraSystem;\n\n  callback(object);\n\n  if (object.el.object3D !== cameraSystem.inspectable) {\n    if (cameraSystem.inspectable) {\n      cameraSystem.uninspect(false);\n    }\n\n    cameraSystem.inspect(object.el, 1.5, false);\n  }\n}\n\nfunction handleDeselect(scene, object, callback) {\n  const cameraSystem = scene.systems[\"hubs-systems\"].cameraSystem;\n\n  callback(null);\n\n  cameraSystem.uninspect(false);\n\n  if (object) {\n    cameraSystem.inspect(object.el, 1.5, false);\n  }\n}\n\nexport function ObjectListProvider({ scene, children }) {\n  const [objects, setObjects] = useState([]);\n  const [focusedObject, setFocusedObject] = useState(null); // The object currently shown in the viewport\n  const [selectedObject, setSelectedObject] = useState(null); // The object currently selected in the object list\n  const cameraSystem = scene.systems[\"hubs-systems\"].cameraSystem;\n  const [lightsEnabled, setLightsEnabled] = useState(cameraSystem.lightsEnabled);\n\n  useEffect(\n    () => {\n      function updateMediaEntities() {\n        const objects = scene.systems[\"listed-media\"].els.sort(mediaSort).map(el => ({\n          id: el.object3D.id,\n          name: getDisplayString(el),\n          type: getMediaType(el),\n          el\n        }));\n\n        setObjects(objects);\n      }\n\n      let timeout;\n\n      function onListedMediaChanged() {\n        // HACK: The listed-media component exists before the media-loader component does, in cases where an entity is created from a network template because of an incoming message, so don't updateMediaEntities right away.\n        // Sorry in advance for the day this comment is out of date.\n        timeout = setTimeout(() => updateMediaEntities(), 0);\n      }\n\n      scene.addEventListener(\"listed_media_changed\", onListedMediaChanged);\n\n      updateMediaEntities();\n\n      return () => {\n        scene.removeEventListener(\"listed_media_changed\", updateMediaEntities);\n        clearTimeout(timeout);\n      };\n    },\n    [scene, setObjects]\n  );\n\n  useEffect(\n    () => {\n      function onInspectTargetChanged() {\n        const cameraSystem = scene.systems[\"hubs-systems\"].cameraSystem;\n\n        const inspectedEl = cameraSystem.inspectable && cameraSystem.inspectable.el;\n\n        if (inspectedEl) {\n          const object = objects.find(o => o.el === inspectedEl);\n\n          if (object) {\n            setSelectedObject(object);\n          } else {\n            setSelectedObject({\n              id: inspectedEl.object3D.id,\n              name: getDisplayString(inspectedEl),\n              type: getMediaType(inspectedEl),\n              el: inspectedEl\n            });\n          }\n        } else {\n          setSelectedObject(null);\n        }\n      }\n\n      scene.addEventListener(\"inspect-target-changed\", onInspectTargetChanged);\n\n      return () => {\n        scene.removeEventListener(\"inspect-target-changed\", onInspectTargetChanged);\n      };\n    },\n    [scene, setSelectedObject, objects]\n  );\n\n  useEffect(\n    () => {\n      function onLightsChanged() {\n        const cameraSystem = scene.systems[\"hubs-systems\"].cameraSystem;\n        setLightsEnabled(cameraSystem.lightsEnabled);\n      }\n\n      scene.addEventListener(\"inspect-lights-changed\", onLightsChanged);\n\n      return () => {\n        scene.removeEventListener(\"inspect-lights-changed\", onLightsChanged);\n      };\n    },\n    [scene]\n  );\n\n  const selectObject = useCallback(object => handleInspect(scene, object, setSelectedObject), [\n    scene,\n    setSelectedObject\n  ]);\n\n  const deselectObject = useCallback(() => handleDeselect(scene, focusedObject, setSelectedObject), [\n    scene,\n    setSelectedObject,\n    focusedObject\n  ]);\n\n  const focusObject = useCallback(object => handleInspect(scene, object, setFocusedObject), [scene, setFocusedObject]);\n\n  const unfocusObject = useCallback(() => handleDeselect(scene, selectedObject, setFocusedObject), [\n    scene,\n    setFocusedObject,\n    selectedObject\n  ]);\n\n  const selectNextObject = useCallback(\n    () => {\n      const curObjIdx = objects.indexOf(selectedObject);\n\n      if (curObjIdx !== -1) {\n        const nextObjIdx = (curObjIdx + 1) % objects.length;\n        selectObject(objects[nextObjIdx]);\n      }\n    },\n    [selectObject, objects, selectedObject]\n  );\n\n  const selectPrevObject = useCallback(\n    () => {\n      const curObjIdx = objects.indexOf(selectedObject);\n\n      if (curObjIdx !== -1) {\n        const nextObjIdx = curObjIdx === 0 ? objects.length - 1 : curObjIdx - 1;\n        selectObject(objects[nextObjIdx]);\n      }\n    },\n    [selectObject, objects, selectedObject]\n  );\n\n  const toggleLights = useCallback(\n    () => {\n      const cameraSystem = scene.systems[\"hubs-systems\"].cameraSystem;\n      cameraSystem.toggleLights();\n    },\n    [scene]\n  );\n\n  const context = {\n    objects,\n    activeObject: focusedObject || selectedObject,\n    focusedObject,\n    selectedObject,\n    focusObject,\n    unfocusObject,\n    selectObject,\n    deselectObject,\n    selectPrevObject,\n    selectNextObject,\n    toggleLights,\n    lightsEnabled\n  };\n\n  // Note: If we move ui-root to a functional component and use hooks,\n  // we can use the useObjectList hook instead of cloneElement.\n\n  return (\n    <ObjectListContext.Provider value={context}>\n      {Children.map(children, child => cloneElement(child, { ...context }))}\n    </ObjectListContext.Provider>\n  );\n}\n\nObjectListProvider.propTypes = {\n  scene: PropTypes.object.isRequired,\n  children: PropTypes.node\n};\n\nexport function useObjectList() {\n  return useContext(ObjectListContext);\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgObject(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.5 13.336v-6.67a1.25 1.25 0 00-.62-1.079l-5.938-3.455a1.873 1.873 0 00-1.885 0L3.121 5.587A1.25 1.25 0 002.5 6.666v6.67a1.25 1.25 0 00.62 1.08l5.938 3.455a1.875 1.875 0 001.885 0l5.937-3.456a1.249 1.249 0 00.62-1.079z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.695 6.016L10 10.313l7.305-4.297\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 18.125v-7.812\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgObject.defaultProps = {\n  color: \"#000\",\n  title: \"Object\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL09iamVjdC02ZjUzMmUzNmZhZDY4YjIzYTQ1ZGVmM2E1YTBhNzVlNC5zdmciOw==\";\nexport { SvgObject as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgImage(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.25 3.125H3.75c-1.035 0-1.875.84-1.875 1.875v10c0 1.036.84 1.875 1.875 1.875h12.5c1.036 0 1.875-.839 1.875-1.874V5c0-1.036-.84-1.876-1.875-1.876z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.125 8.125a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.875 13.116L8.334 9.581a1.25 1.25 0 00-1.714-.05l-4.745 4.218\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.75 16.875l4.818-4.818a1.25 1.25 0 011.684-.078l2.873 2.396\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgImage.defaultProps = {\n  color: \"#000\",\n  title: \"Image\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0ltYWdlLWVhMzhjNTkxOGFlMTZhNTY4MTg3YjFkNmViMTYwZjA0LnN2ZyI7\";\nexport { SvgImage as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVideo(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.64 12.061l3.231 2.275a.625.625 0 00.879-.572v-7.53a.625.625 0 00-.879-.57l-3.23 2.274a.625.625 0 00-.266.51v3.102a.624.624 0 00.265.511z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.469 14.998H3.28a2.037 2.037 0 01-2.031-2.03V7.03a2.037 2.037 0 012.031-2.031h7.207A2.019 2.019 0 0112.5 7.01v5.956a2.037 2.037 0 01-2.031 2.031z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }));\n}\n\nSvgVideo.defaultProps = {\n  color: \"#000\",\n  title: \"Video\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1ZpZGVvLWQwMDEzZDA0OTViNzBjYWUyMDI2ZDhiYzJlMzc0MmRhLnN2ZyI7\";\nexport { SvgVideo as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAudio(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.5 8.516V8.28c0-.58.39-1.054.947-1.195l6.82-1.823a.782.782 0 01.983.753v.86\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.25 11.559v3.125c0 .543-.349 1-.86 1.171l-.859.313c-1.011.34-2.031-.407-2.031-1.484a1.304 1.304 0 01.898-1.25l1.993-.71c.51-.171.859-.622.859-1.165zm0 0V2.264a.392.392 0 00-.492-.375l-7.79 2.094a.644.644 0 00-.468.625v8.828c0 .543-.349 1-.86 1.172l-2.03.703c-.543.183-.86.672-.86 1.25 0 1.077 1.036 1.818 2.031 1.484l.86-.312c.51-.172.859-.628.859-1.172v-3.125\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgAudio.defaultProps = {\n  color: \"#000\",\n  title: \"Audio\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0F1ZGlvLTY3NmE3ODFkYjJkNTllZjc1N2I4N2NlNjZhODRjYzNhLnN2ZyI7\";\nexport { SvgAudio as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./ObjectsSidebar.scss\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { ButtonListItem } from \"../layout/List\";\nimport listStyles from \"../layout/List.scss\";\nimport { ReactComponent as ObjectIcon } from \"../icons/Object.svg\";\nimport { ReactComponent as ImageIcon } from \"../icons/Image.svg\";\nimport { ReactComponent as VideoIcon } from \"../icons/Video.svg\";\nimport { ReactComponent as AudioIcon } from \"../icons/Audio.svg\";\nimport { ReactComponent as TextDocumentIcon } from \"../icons/TextDocument.svg\";\nimport { defineMessages, FormattedMessage, useIntl } from \"react-intl\";\n\nfunction getObjectIcon(type) {\n  switch (type) {\n    case \"video\":\n      return VideoIcon;\n    case \"audio\":\n      return AudioIcon;\n    case \"image\":\n      return ImageIcon;\n    case \"pdf\":\n      return TextDocumentIcon;\n    case \"model\":\n    default:\n      return ObjectIcon;\n  }\n}\n\nconst objectTypeNames = defineMessages({\n  video: { id: \"objects-sidebar.object-type.video\", defaultMessage: \"Video\" },\n  audio: { id: \"objects-sidebar.object-type.audio\", defaultMessage: \"Audio\" },\n  image: { id: \"objects-sidebar.object-type.image\", defaultMessage: \"Image\" },\n  pdf: { id: \"objects-sidebar.object-type.pdf\", defaultMessage: \"PDF\" },\n  model: { id: \"objects-sidebar.object-type.model\", defaultMessage: \"Model\" },\n  default: { id: \"objects-sidebar.object-type.default\", defaultMessage: \"Object\" }\n});\n\nexport function ObjectsSidebarItem({ selected, object, ...rest }) {\n  const intl = useIntl();\n  const ObjectTypeIcon = getObjectIcon(object.type);\n\n  return (\n    <ButtonListItem\n      {...rest}\n      className={classNames(styles.object, { [listStyles.selected]: selected })}\n      type=\"button\"\n      aria-label={intl.formatMessage(\n        { id: \"objects-sidebar.object-label\", defaultMessage: \"{objectType}: {objectName}\" },\n        {\n          objectType: intl.formatMessage(objectTypeNames[object.type] || objectTypeNames.default),\n          objectName: object.name\n        }\n      )}\n    >\n      <ObjectTypeIcon />\n      <p>{object.name}</p>\n    </ButtonListItem>\n  );\n}\n\nObjectsSidebarItem.propTypes = {\n  selected: PropTypes.bool,\n  object: PropTypes.shape({\n    id: PropTypes.any.isRequired,\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string\n  })\n};\n\nexport function NoObjects({ canAddObjects }) {\n  return (\n    <li className={styles.noObjects}>\n      <p>\n        <FormattedMessage id=\"objects-sidebar.no-objects\" defaultMessage=\"There are no objects in the room.\" />\n      </p>\n      {canAddObjects && (\n        <p>\n          <FormattedMessage id=\"objects-sidebar.place-menu-tip\" defaultMessage=\"Use the place menu to add objects.\" />\n        </p>\n      )}\n    </li>\n  );\n}\n\nNoObjects.propTypes = {\n  canAddObjects: PropTypes.bool\n};\n\nexport function ObjectsSidebar({ children, objectCount, onClose }) {\n  return (\n    <Sidebar\n      title={\n        <FormattedMessage\n          id=\"objects-sidebar.title\"\n          defaultMessage=\"Objects ({objectCount})\"\n          values={{ objectCount }}\n        />\n      }\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <ul>{children}</ul>\n    </Sidebar>\n  );\n}\n\nObjectsSidebar.propTypes = {\n  objectCount: PropTypes.number.isRequired,\n  children: PropTypes.node,\n  onClose: PropTypes.func\n};\n\nObjectsSidebar.defaultProps = {\n  objectCount: 0\n};\n","import React, { useCallback, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { NoObjects, ObjectsSidebar, ObjectsSidebarItem } from \"./ObjectsSidebar\";\nimport { List } from \"../layout/List\";\nimport { useObjectList } from \"./useObjectList\";\n\nexport function ObjectsSidebarContainer({ onClose, hubChannel }) {\n  const listRef = useRef();\n  const { objects, selectedObject, selectObject, unfocusObject, focusObject } = useObjectList();\n\n  const onUnfocusListItem = useCallback(\n    e => {\n      if (e.relatedTarget === listRef.current || !listRef.current.contains(e.relatedTarget)) {\n        unfocusObject();\n      }\n    },\n    [unfocusObject, listRef]\n  );\n\n  return (\n    <ObjectsSidebar objectCount={objects.length} onClose={onClose}>\n      {objects.length > 0 ? (\n        <List ref={listRef}>\n          {objects.map(object => (\n            <ObjectsSidebarItem\n              selected={selectedObject === object}\n              object={object}\n              key={object.id}\n              onClick={() => selectObject(object)}\n              onMouseOver={() => focusObject(object)}\n              onFocus={() => focusObject(object)}\n              onMouseOut={onUnfocusListItem}\n              onBlur={onUnfocusListItem}\n            />\n          ))}\n        </List>\n      ) : (\n        <NoObjects canAddObjects={hubChannel.can(\"spawn_and_move_media\")} />\n      )}\n    </ObjectsSidebar>\n  );\n}\n\nObjectsSidebarContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLightbulb(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.25 18.125h-2.5a.625.625 0 100 1.25h2.5a.625.625 0 000-1.25z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.875 16.25h-3.75a.625.625 0 000 1.25h3.75a.625.625 0 100-1.25z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.43 2.449A6.214 6.214 0 0010 .625a6.235 6.235 0 00-6.25 6.25c0 1.821.698 3.525 1.914 4.674l.17.16c.704.657 1.666 1.558 1.666 2.354V15a.625.625 0 00.625.625h.938a.313.313 0 00.312-.312v-4.578a.313.313 0 00-.2-.291 5.104 5.104 0 01-1.022-.561.625.625 0 11.726-1.016c.289.205.845.508 1.121.508s.832-.304 1.122-.508a.625.625 0 01.725 1.016 5.102 5.102 0 01-1.022.56.313.313 0 00-.2.291v4.579a.313.313 0 00.313.312h.937A.625.625 0 0012.5 15v-.937c0-.777.952-1.677 1.646-2.335l.192-.182c1.251-1.194 1.912-2.811 1.912-4.67a6.216 6.216 0 00-1.82-4.427z\",\n    fill: props.color\n  }));\n}\n\nSvgLightbulb.defaultProps = {\n  color: \"#000\",\n  title: \"Lightbulb\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0xpZ2h0YnVsYi04MTQ1MjUzYzk0OGE2ZDdlMGJkZWE5OTE2YWIwZmZhYS5zdmciOw==\";\nexport { SvgLightbulb as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLightbulbOutline(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.875 15v-.937c0-1.133 1.232-2.204 2.031-2.969 1.127-1.077 1.719-2.523 1.719-4.218A5.595 5.595 0 0010 1.25a5.61 5.61 0 00-5.625 5.625c0 1.634.618 3.179 1.719 4.218.795.75 2.031 1.825 2.031 2.97V15\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.75 18.75h2.5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.125 16.875h3.75\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 15v-5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.484 9.375S10.644 10 10 10s-1.484-.625-1.484-.625\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgLightbulbOutline.defaultProps = {\n  color: \"#000\",\n  title: \"Lightbulb Outline\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0xpZ2h0YnVsYk91dGxpbmUtMzQwNWY3MTVhNzczNzk3OWI3Njg3YzkzNWQyYmQ2ODkuc3ZnIjs=\";\nexport { SvgLightbulbOutline as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { joinChildren } from \"../misc/joinChildren\";\nimport styles from \"./ObjectMenu.scss\";\nimport { IconButton } from \"../input/IconButton\";\nimport { ReactComponent as CloseIcon } from \"../icons/Close.svg\";\nimport { ReactComponent as ChevronBackIcon } from \"../icons/ChevronBack.svg\";\nimport { ReactComponent as ArrowBackIcon } from \"../icons/ArrowBack.svg\";\nimport { ReactComponent as ArrowForwardIcon } from \"../icons/ArrowForward.svg\";\nimport { ReactComponent as LightbulbIcon } from \"../icons/Lightbulb.svg\";\nimport { ReactComponent as LightbulbOutlineIcon } from \"../icons/LightbulbOutline.svg\";\n\nexport function ObjectMenuButton({ children, className, ...rest }) {\n  return (\n    <IconButton compactSm className={classNames(styles.objectMenuButton, className)} {...rest}>\n      {children}\n    </IconButton>\n  );\n}\n\nObjectMenuButton.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n\nexport function ObjectMenu({\n  children,\n  title,\n  onClose,\n  onBack,\n  onPrevObject,\n  onNextObject,\n  currentObjectIndex,\n  objectCount,\n  onToggleLights,\n  lightsEnabled\n}) {\n  return (\n    <>\n      <IconButton className={styles.backButton} onClick={onBack}>\n        <ChevronBackIcon width={24} height={24} />\n      </IconButton>\n      <IconButton className={styles.lightsButton} onClick={onToggleLights}>\n        {lightsEnabled ? (\n          <LightbulbOutlineIcon title=\"Turn Lights Off\" width={24} height={24} />\n        ) : (\n          <LightbulbIcon title=\"Turn Lights On\" width={24} height={24} />\n        )}\n      </IconButton>\n      <div className={styles.objectMenuContainer}>\n        <div className={styles.objectMenu}>\n          <div className={styles.header}>\n            <IconButton className={styles.closeButton} onClick={onClose}>\n              <CloseIcon width={16} height={16} />\n            </IconButton>\n            <h5>{title}</h5>\n            <IconButton className={styles.lightsHeaderButton} onClick={onToggleLights}>\n              {lightsEnabled ? (\n                <LightbulbOutlineIcon title=\"Turn Lights Off\" width={16} height={16} />\n              ) : (\n                <LightbulbIcon title=\"Turn Lights On\" width={16} height={16} />\n              )}\n            </IconButton>\n          </div>\n          <div className={styles.menu}>{joinChildren(children, () => <div className={styles.separator} />)}</div>\n        </div>\n        <div className={styles.pagination}>\n          <IconButton onClick={onPrevObject}>\n            <ArrowBackIcon width={24} height={24} />\n          </IconButton>\n          <p>\n            {currentObjectIndex + 1}/{objectCount}\n          </p>\n          <IconButton onClick={onNextObject}>\n            <ArrowForwardIcon width={24} height={24} />\n          </IconButton>\n        </div>\n      </div>\n    </>\n  );\n}\n\nObjectMenu.propTypes = {\n  currentObjectIndex: PropTypes.number.isRequired,\n  objectCount: PropTypes.number.isRequired,\n  onPrevObject: PropTypes.func,\n  onNextObject: PropTypes.func,\n  children: PropTypes.node,\n  title: PropTypes.node,\n  onClose: PropTypes.func,\n  onBack: PropTypes.func,\n  onToggleLights: PropTypes.func,\n  lightsEnabled: PropTypes.bool\n};\n","import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { removeNetworkedObject } from \"../../utils/removeNetworkedObject\";\nimport { rotateInPlaceAroundWorldUp, affixToWorldUp } from \"../../utils/three-utils\";\nimport { getPromotionTokenForFile } from \"../../utils/media-utils\";\n\nfunction getPinnedState(el) {\n  return !!(el.components.pinnable && el.components.pinnable.data.pinned);\n}\n\nfunction hasIsStaticTag(el) {\n  return !!(el.components.tags && el.components.tags.data.isStatic);\n}\n\nexport function isMe(object) {\n  return object.el.id === \"avatar-rig\";\n}\n\nexport function isPlayer(object) {\n  return !!object.el.components[\"networked-avatar\"];\n}\n\nexport function getObjectUrl(object) {\n  const mediaLoader = object.el.components[\"media-loader\"];\n\n  const url =\n    mediaLoader && ((mediaLoader.data.mediaOptions && mediaLoader.data.mediaOptions.href) || mediaLoader.data.src);\n\n  if (url && !url.startsWith(\"hubs://\")) {\n    return url;\n  }\n\n  return null;\n}\n\nexport function usePinObject(hubChannel, scene, object) {\n  const [isPinned, setIsPinned] = useState(getPinnedState(object.el));\n\n  const pinObject = useCallback(\n    () => {\n      const el = object.el;\n      if (!NAF.utils.isMine(el) && !NAF.utils.takeOwnership(el)) return;\n      window.APP.pinningHelper.setPinned(el, true);\n    },\n    [object]\n  );\n\n  const unpinObject = useCallback(\n    () => {\n      const el = object.el;\n      if (!NAF.utils.isMine(el) && !NAF.utils.takeOwnership(el)) return;\n      window.APP.pinningHelper.setPinned(el, false);\n    },\n    [object]\n  );\n\n  const togglePinned = useCallback(\n    () => {\n      if (isPinned) {\n        unpinObject();\n      } else {\n        pinObject();\n      }\n    },\n    [isPinned, pinObject, unpinObject]\n  );\n\n  useEffect(\n    () => {\n      const el = object.el;\n\n      function onPinStateChanged() {\n        setIsPinned(getPinnedState(el));\n      }\n      el.addEventListener(\"pinned\", onPinStateChanged);\n      el.addEventListener(\"unpinned\", onPinStateChanged);\n      setIsPinned(getPinnedState(el));\n      return () => {\n        el.removeEventListener(\"pinned\", onPinStateChanged);\n        el.removeEventListener(\"unpinned\", onPinStateChanged);\n      };\n    },\n    [object]\n  );\n\n  const el = object.el;\n\n  let userOwnsFile = false;\n\n  if (el.components[\"media-loader\"]) {\n    const { fileIsOwned, fileId } = el.components[\"media-loader\"].data;\n    userOwnsFile = fileIsOwned || (fileId && getPromotionTokenForFile(fileId));\n  }\n\n  const canPin = !!(\n    scene.is(\"entered\") &&\n    !isPlayer(object) &&\n    !hasIsStaticTag(el) &&\n    hubChannel.can(\"pin_objects\") &&\n    userOwnsFile\n  );\n\n  return { canPin, isPinned, togglePinned, pinObject, unpinObject };\n}\n\nexport function useGoToSelectedObject(scene, object) {\n  const goToSelectedObject = useCallback(\n    () => {\n      const viewingCamera = document.getElementById(\"viewing-camera\");\n      const targetMatrix = new THREE.Matrix4();\n      const translation = new THREE.Matrix4();\n      viewingCamera.object3DMap.camera.updateMatrices();\n      targetMatrix.copy(viewingCamera.object3DMap.camera.matrixWorld);\n      affixToWorldUp(targetMatrix, targetMatrix);\n      translation.makeTranslation(0, -1.6, 0.15);\n      targetMatrix.multiply(translation);\n      rotateInPlaceAroundWorldUp(targetMatrix, Math.PI, targetMatrix);\n\n      scene.systems[\"hubs-systems\"].characterController.enqueueWaypointTravelTo(targetMatrix, true, {\n        willDisableMotion: false,\n        willDisableTeleporting: false,\n        snapToNavMesh: false,\n        willMaintainInitialOrientation: false\n      });\n    },\n    [scene]\n  );\n\n  const uiRoot = useMemo(() => document.getElementById(\"ui-root\"), []);\n  const isSpectating = uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n  const canGoTo = !isSpectating && !isPlayer(object);\n\n  return { canGoTo, goToSelectedObject };\n}\n\nexport function useRemoveObject(hubChannel, scene, object) {\n  const removeObject = useCallback(\n    () => {\n      removeNetworkedObject(scene, object.el);\n    },\n    [scene, object]\n  );\n\n  const el = object.el;\n\n  const canRemoveObject = !!(\n    scene.is(\"entered\") &&\n    !isPlayer(object) &&\n    !getPinnedState(el) &&\n    !hasIsStaticTag(el) &&\n    hubChannel.can(\"spawn_and_move_media\")\n  );\n\n  return { removeObject, canRemoveObject };\n}\n\nexport function useHideAvatar(hubChannel, avatarEl) {\n  const hideAvatar = useCallback(\n    () => {\n      if (avatarEl.components.networked) {\n        const clientId = avatarEl.components.networked.data.owner;\n\n        if (clientId && clientId !== NAF.clientId) {\n          hubChannel.hide(clientId);\n        }\n      }\n    },\n    [hubChannel, avatarEl]\n  );\n\n  return hideAvatar;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPin(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 22,\n    height: 22,\n    viewBox: \"0 0 22 22\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M10.463 12.668a.751.751 0 01-.07.08l-5.08 5.081a.75.75 0 11-1.061-1.06l5.08-5.081a.758.758 0 01.081-.07l-.386-.386-2.536-2.537a1.12 1.12 0 01-.331-.8c0-.266.092-.542.285-.753a4.598 4.598 0 013.593-1.516h.193a2.74 2.74 0 002.739-2.739v-.67c0-.304.119-.589.33-.8a1.143 1.143 0 011.608 0l5.68 5.68c.211.21.33.495.33.799 0 .625-.514 1.14-1.13 1.14h-.67a2.74 2.74 0 00-2.74 2.738V11.986a4.995 4.995 0 01-1.47 3.528 1.143 1.143 0 01-1.608 0l-2.536-2.546-.3-.3zm-.486-5.544l.03.002h.224a4.24 4.24 0 004.233-4.032L18.91 7.54a4.24 4.24 0 00-4.031 4.234V11.986c0 .798-.28 1.574-.787 2.197l-2.266-2.273-.001-.002-1.737-1.737-2.276-2.275a3.098 3.098 0 012.165-.772z\",\n    fill: props.color\n  }));\n}\n\nSvgPin.defaultProps = {\n  color: \"#000\",\n  title: \"Pin\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1Bpbi1lYzc2MWNhN2UxYTBiNDBkZDdmZmUzZjA1NjJkMTkxMi5zdmciOw==\";\nexport { SvgPin as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGoTo(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.274 18.84l-2.218-4.482-1.753-2.242a2.844 2.844 0 01-.396-1.447V5.624h.612a1.57 1.57 0 011.572 1.571v7.163\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.996 11.446v-2.91s1.456-2.912 2.911-2.912\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.457 10.719l-2.582-1.696\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.661 18.684l2.09-3.06\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.09 4.169a1.455 1.455 0 100-2.911 1.455 1.455 0 000 2.91z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgGoTo.defaultProps = {\n  color: \"#000\",\n  title: \"Go To\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0dvVG8tMDg1NzM4NjhiYjE3YWYzNjE5MzQzZTJlNGMzYjA4Zjcuc3ZnIjs=\";\nexport { SvgGoTo as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgHide(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.875 17.5a.623.623 0 01-.442-.183L2.683 3.567a.625.625 0 01.884-.883l13.75 13.75a.624.624 0 01-.442 1.066z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.987 15c-1.62 0-3.184-.48-4.646-1.426-1.33-.859-2.528-2.09-3.464-3.554v-.003c.779-1.116 1.632-2.06 2.548-2.821a.078.078 0 00.006-.115l-.779-.777a.078.078 0 00-.105-.005C2.573 7.12 1.67 8.126.848 9.304a1.247 1.247 0 00-.025 1.388c1.032 1.615 2.36 2.975 3.84 3.932 1.665 1.08 3.458 1.626 5.324 1.626a9.34 9.34 0 002.96-.491.079.079 0 00.05-.096.079.079 0 00-.02-.034l-.842-.842a.156.156 0 00-.15-.04A8 8 0 019.987 15z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.173 9.32C18.14 7.722 16.8 6.364 15.296 5.393c-1.663-1.075-3.5-1.643-5.31-1.643a8.88 8.88 0 00-2.925.5.078.078 0 00-.03.13l.843.842a.156.156 0 00.151.039A7.532 7.532 0 019.987 5c1.59 0 3.147.485 4.63 1.445 1.356.875 2.569 2.105 3.507 3.555a.005.005 0 010 .006 12.136 12.136 0 01-2.505 2.84.078.078 0 00-.023.089c.004.01.01.02.017.027l.777.777a.078.078 0 00.106.005 13.42 13.42 0 002.681-3.066 1.258 1.258 0 00-.004-1.358z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 6.25c-.281 0-.561.03-.835.093a.078.078 0 00-.039.132l4.398 4.397a.078.078 0 00.132-.039A3.75 3.75 0 0010 6.249z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.476 9.128a.078.078 0 00-.132.039 3.75 3.75 0 004.492 4.492.077.077 0 00.059-.054.078.078 0 00-.02-.078l-4.4-4.4z\",\n    fill: props.color\n  }));\n}\n\nSvgHide.defaultProps = {\n  color: \"#000\",\n  title: \"Hide\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0hpZGUtNWE4ZmQ4YzMzYTk1Njk3OTcyYjBlNDYyZjNkYmU0ZDYuc3ZnIjs=\";\nexport { SvgHide as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ObjectMenu, ObjectMenuButton } from \"./ObjectMenu\";\nimport { useObjectList } from \"./useObjectList\";\nimport {\n  usePinObject,\n  useRemoveObject,\n  useGoToSelectedObject,\n  getObjectUrl,\n  isPlayer,\n  isMe,\n  useHideAvatar\n} from \"./object-hooks\";\nimport { ReactComponent as PinIcon } from \"../icons/Pin.svg\";\nimport { ReactComponent as LinkIcon } from \"../icons/Link.svg\";\nimport { ReactComponent as GoToIcon } from \"../icons/GoTo.svg\";\nimport { ReactComponent as DeleteIcon } from \"../icons/Delete.svg\";\nimport { ReactComponent as AvatarIcon } from \"../icons/Avatar.svg\";\nimport { ReactComponent as HideIcon } from \"../icons/Hide.svg\";\nimport { FormattedMessage } from \"react-intl\";\n\nfunction MyMenuItems({ onOpenProfile }) {\n  return (\n    <ObjectMenuButton onClick={onOpenProfile}>\n      <AvatarIcon />\n      <span>\n        <FormattedMessage id=\"object-menu.edit-avatar-button\" defaultMessage=\"Edit Avatar\" />\n      </span>\n    </ObjectMenuButton>\n  );\n}\n\nMyMenuItems.propTypes = {\n  onOpenProfile: PropTypes.func.isRequired\n};\n\nfunction PlayerMenuItems({ hubChannel, activeObject, deselectObject }) {\n  const hideAvatar = useHideAvatar(hubChannel, activeObject.el);\n\n  return (\n    <ObjectMenuButton\n      onClick={() => {\n        deselectObject();\n        hideAvatar();\n      }}\n    >\n      <HideIcon />\n      <span>\n        <FormattedMessage id=\"object-menu.hide-avatar-button\" defaultMessage=\"Hide\" />\n      </span>\n    </ObjectMenuButton>\n  );\n}\n\nPlayerMenuItems.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  activeObject: PropTypes.object.isRequired,\n  deselectObject: PropTypes.func.isRequired\n};\n\nfunction ObjectMenuItems({ hubChannel, scene, activeObject, deselectObject, onGoToObject }) {\n  const { canPin, isPinned, togglePinned } = usePinObject(hubChannel, scene, activeObject);\n  const { canRemoveObject, removeObject } = useRemoveObject(hubChannel, scene, activeObject);\n  const { canGoTo, goToSelectedObject } = useGoToSelectedObject(scene, activeObject);\n  const url = getObjectUrl(activeObject);\n\n  return (\n    <>\n      <ObjectMenuButton disabled={!canPin} onClick={togglePinned}>\n        <PinIcon />\n        <span>\n          {isPinned ? (\n            <FormattedMessage id=\"object-menu.unpin-object-button\" defaultMessage=\"Unpin\" />\n          ) : (\n            <FormattedMessage id=\"object-menu.pin-object-button\" defaultMessage=\"Pin\" />\n          )}\n        </span>\n      </ObjectMenuButton>\n      {url && (\n        <ObjectMenuButton as=\"a\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <LinkIcon />\n          <span>\n            <FormattedMessage id=\"object-menu.object-link-button\" defaultMessage=\"Link\" />\n          </span>\n        </ObjectMenuButton>\n      )}\n      <ObjectMenuButton\n        disabled={!canGoTo}\n        onClick={() => {\n          goToSelectedObject();\n          deselectObject();\n          onGoToObject();\n        }}\n      >\n        <GoToIcon />\n        <span>\n          <FormattedMessage id=\"object-menu.view-object-button\" defaultMessage=\"View\" />\n        </span>\n      </ObjectMenuButton>\n      <ObjectMenuButton\n        disabled={!canRemoveObject}\n        onClick={() => {\n          removeObject();\n          deselectObject();\n        }}\n      >\n        <DeleteIcon />\n        <span>\n          <FormattedMessage id=\"object-menu.delete-object-button\" defaultMessage=\"Delete\" />\n        </span>\n      </ObjectMenuButton>\n    </>\n  );\n}\n\nObjectMenuItems.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  activeObject: PropTypes.object.isRequired,\n  deselectObject: PropTypes.func.isRequired,\n  onGoToObject: PropTypes.func.isRequired\n};\n\nexport function ObjectMenuContainer({ hubChannel, scene, onOpenProfile, onGoToObject }) {\n  const {\n    objects,\n    activeObject,\n    deselectObject,\n    selectNextObject,\n    selectPrevObject,\n    toggleLights,\n    lightsEnabled\n  } = useObjectList();\n\n  let menuItems;\n\n  if (isMe(activeObject)) {\n    menuItems = <MyMenuItems onOpenProfile={onOpenProfile} />;\n  } else if (isPlayer(activeObject)) {\n    menuItems = <PlayerMenuItems hubChannel={hubChannel} activeObject={activeObject} deselectObject={deselectObject} />;\n  } else {\n    menuItems = (\n      <ObjectMenuItems\n        hubChannel={hubChannel}\n        scene={scene}\n        activeObject={activeObject}\n        deselectObject={deselectObject}\n        onGoToObject={onGoToObject}\n      />\n    );\n  }\n\n  return (\n    <ObjectMenu\n      title={<FormattedMessage id=\"object-menu.title\" defaultMessage=\"Object\" />}\n      currentObjectIndex={objects.indexOf(activeObject)}\n      objectCount={objects.length}\n      onClose={deselectObject}\n      onBack={deselectObject}\n      onNextObject={selectNextObject}\n      onPrevObject={selectPrevObject}\n      onToggleLights={toggleLights}\n      lightsEnabled={lightsEnabled}\n    >\n      {menuItems}\n    </ObjectMenu>\n  );\n}\n\nObjectMenuContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  onOpenProfile: PropTypes.func.isRequired,\n  onGoToObject: PropTypes.func.isRequired\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGif(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M3.25 15.375a1.125 1.125 0 01-1.125-1.125v-9c0-.621.504-1.125 1.125-1.125h13.5c.621 0 1.125.504 1.125 1.125v9c0 .621-.504 1.125-1.125 1.125H3.25zM1 14.25a2.25 2.25 0 002.25 2.25h13.5A2.25 2.25 0 0019 14.25v-9A2.25 2.25 0 0016.75 3H3.25A2.25 2.25 0 001 5.25v9zm7.958-2.558c-.204.244-.492.434-.865.57-.373.133-.786.2-1.239.2-.476 0-.894-.103-1.254-.31a2.105 2.105 0 01-.83-.906c-.194-.395-.294-.86-.299-1.393v-.374c0-.55.092-1.024.276-1.424.186-.403.453-.71.8-.922.35-.214.76-.32 1.228-.32.652 0 1.162.156 1.53.468.367.31.585.761.653 1.356H7.855c-.05-.315-.162-.546-.336-.692-.171-.146-.408-.219-.71-.219-.385 0-.679.145-.88.435-.201.29-.303.72-.306 1.291v.352c0 .576.11 1.012.329 1.306.219.295.54.442.963.442.425 0 .729-.09.91-.272v-.948H6.794v-.834h2.164v2.194zm2.126.695H9.951V6.888h1.133v5.499zm2.187-2.247h2.175v-.914H13.27v-1.42h2.447v-.918h-3.58v5.499h1.133V10.14z\",\n    fill: props.color\n  }));\n}\n\nSvgGif.defaultProps = {\n  color: \"#000\",\n  title: \"Gif\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0dJRi03YmI2YTY0ODA3NjM1NDYyZjk1ZmFjYjM3ZGQwYzliMS5zdmciOw==\";\nexport { SvgGif as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgScene(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 1.874a8.125 8.125 0 100 16.25 8.125 8.125 0 000-16.25z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 1.874C7.73 1.874 5.599 5.512 5.599 10s2.132 8.125 4.4 8.125c2.27 0 4.402-3.638 4.402-8.125S12.268 1.874 10 1.874z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.583 4.583C6.077 5.643 7.958 6.276 10 6.276c2.043 0 3.923-.633 5.417-1.693\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.417 15.417c-1.494-1.06-3.374-1.693-5.417-1.693-2.042 0-3.923.633-5.417 1.693\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 1.874v16.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.125 9.999H1.875\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }));\n}\n\nSvgScene.defaultProps = {\n  color: \"#000\",\n  title: \"Scene\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1NjZW5lLTJkNDVmNGM2OTYyMDM5ZTQzYjA4MWZlYmQ5N2JkMDhmLnN2ZyI7\";\nexport { SvgScene as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport styles from \"./ButtonGridPopover.scss\";\n\nexport function ButtonGridPopover({ fullscreen, items, closePopover }) {\n  return (\n    <div className={classNames(styles.buttonGridPopover, { [styles.fullscreen]: fullscreen })}>\n      {items.map(item => {\n        const Icon = item.icon;\n        return (\n          <ToolbarButton\n            key={item.id}\n            icon={<Icon />}\n            preset={item.color}\n            onClick={() => {\n              if (item.onSelect) {\n                item.onSelect(item);\n              }\n\n              closePopover();\n            }}\n            label={item.label}\n            selected={item.selected}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nButtonGridPopover.propTypes = {\n  fullscreen: PropTypes.bool,\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      icon: PropTypes.elementType.isRequired,\n      color: PropTypes.string,\n      label: PropTypes.element.isRequired,\n      onSelect: PropTypes.func\n    })\n  ).isRequired,\n  closePopover: PropTypes.func.isRequired\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ButtonGridPopover } from \"../popover/ButtonGridPopover\";\nimport { Popover } from \"../popover/Popover\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as ObjectIcon } from \"../icons/Object.svg\";\nimport { defineMessage, useIntl } from \"react-intl\";\n\nconst placePopoverTitle = defineMessage({\n  id: \"place-popover.title\",\n  defaultMessage: \"Place\"\n});\n\nexport function PlacePopoverButton({ items }) {\n  const intl = useIntl();\n  const filteredItems = items.filter(item => !!item);\n\n  // The button is removed if you can't place anything.\n  if (filteredItems.length === 0) {\n    return null;\n  }\n\n  const title = intl.formatMessage(placePopoverTitle);\n\n  return (\n    <Popover\n      title={title}\n      content={props => <ButtonGridPopover items={filteredItems} {...props} />}\n      placement=\"top\"\n      offsetDistance={28}\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <ToolbarButton\n          ref={triggerRef}\n          icon={<ObjectIcon />}\n          selected={popoverVisible}\n          onClick={togglePopover}\n          label={title}\n          preset=\"accent3\"\n        />\n      )}\n    </Popover>\n  );\n}\n\nPlacePopoverButton.propTypes = {\n  items: PropTypes.array.isRequired\n};\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ReactComponent as PenIcon } from \"../icons/Pen.svg\";\nimport { ReactComponent as CameraIcon } from \"../icons/Camera.svg\";\n// import { ReactComponent as TextIcon } from \"../icons/Text.svg\";\n// import { ReactComponent as LinkIcon } from \"../icons/Link.svg\";\nimport { ReactComponent as GIFIcon } from \"../icons/GIF.svg\";\nimport { ReactComponent as ObjectIcon } from \"../icons/Object.svg\";\nimport { ReactComponent as AvatarIcon } from \"../icons/Avatar.svg\";\nimport { ReactComponent as SceneIcon } from \"../icons/Scene.svg\";\nimport { ReactComponent as UploadIcon } from \"../icons/Upload.svg\";\nimport { PlacePopoverButton } from \"./PlacePopover\";\nimport { ObjectUrlModalContainer } from \"./ObjectUrlModalContainer\";\nimport configs from \"../../utils/configs\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function PlacePopoverContainer({ scene, mediaSearchStore, showNonHistoriedDialog, hubChannel }) {\n  const [items, setItems] = useState([]);\n\n  useEffect(\n    () => {\n      function updateItems() {\n        const hasActiveCamera = !!scene.systems[\"camera-tools\"].getMyCamera();\n        const hasActivePen = !!scene.systems[\"pen-tools\"].getMyPen();\n\n        let nextItems = [\n          hubChannel.can(\"spawn_drawing\") && {\n            id: \"pen\",\n            icon: PenIcon,\n            color: \"accent5\",\n            label: <FormattedMessage id=\"place-popover.item-type.pen\" defaultMessage=\"Pen\" />,\n            onSelect: () => scene.emit(\"penButtonPressed\"),\n            selected: hasActivePen\n          },\n          hubChannel.can(\"spawn_camera\") && {\n            id: \"camera\",\n            icon: CameraIcon,\n            color: \"accent5\",\n            label: <FormattedMessage id=\"place-popover.item-type.camera\" defaultMessage=\"Camera\" />,\n            onSelect: () => scene.emit(\"action_toggle_camera\"),\n            selected: hasActiveCamera\n          }\n        ];\n\n        if (hubChannel.can(\"spawn_and_move_media\")) {\n          nextItems = [\n            ...nextItems,\n            // TODO: Create text/link dialog\n            // { id: \"text\", icon: TextIcon, color: \"blue\", label: \"Text\" },\n            // { id: \"link\", icon: LinkIcon, color: \"blue\", label: \"Link\" },\n            configs.integration(\"tenor\") && {\n              id: \"gif\",\n              icon: GIFIcon,\n              color: \"accent2\",\n              label: <FormattedMessage id=\"place-popover.item-type.gif\" defaultMessage=\"GIF\" />,\n              onSelect: () => mediaSearchStore.sourceNavigate(\"gifs\")\n            },\n            configs.integration(\"sketchfab\") && {\n              id: \"model\",\n              icon: ObjectIcon,\n              color: \"accent2\",\n              label: <FormattedMessage id=\"place-popover.item-type.model\" defaultMessage=\"3D Model\" />,\n              onSelect: () => mediaSearchStore.sourceNavigate(\"sketchfab\")\n            },\n            {\n              id: \"avatar\",\n              icon: AvatarIcon,\n              color: \"accent1\",\n              label: <FormattedMessage id=\"place-popover.item-type.avatar\" defaultMessage=\"Avatar\" />,\n              onSelect: () => mediaSearchStore.sourceNavigate(\"avatars\")\n            },\n            {\n              id: \"scene\",\n              icon: SceneIcon,\n              color: \"accent1\",\n              label: <FormattedMessage id=\"place-popover.item-type.scene\" defaultMessage=\"Scene\" />,\n              onSelect: () => mediaSearchStore.sourceNavigate(\"scenes\")\n            },\n            // TODO: Launch system file prompt directly\n            {\n              id: \"upload\",\n              icon: UploadIcon,\n              color: \"accent3\",\n              label: <FormattedMessage id=\"place-popover.item-type.upload\" defaultMessage=\"Upload\" />,\n              onSelect: () => showNonHistoriedDialog(ObjectUrlModalContainer, { scene })\n            }\n          ];\n        }\n\n        setItems(nextItems);\n      }\n\n      hubChannel.addEventListener(\"permissions_updated\", updateItems);\n\n      updateItems();\n\n      function onSceneStateChange(event) {\n        if (event.detail === \"camera\" || event.detail === \"pen\") {\n          updateItems();\n        }\n      }\n\n      scene.addEventListener(\"stateadded\", onSceneStateChange);\n      scene.addEventListener(\"stateremoved\", onSceneStateChange);\n\n      return () => {\n        hubChannel.removeEventListener(\"permissions_updated\", updateItems);\n        scene.removeEventListener(\"stateadded\", onSceneStateChange);\n        scene.removeEventListener(\"stateremoved\", onSceneStateChange);\n      };\n    },\n    [hubChannel, mediaSearchStore, showNonHistoriedDialog, scene]\n  );\n\n  return <PlacePopoverButton items={items} />;\n}\n\nPlacePopoverContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  mediaSearchStore: PropTypes.object.isRequired,\n  showNonHistoriedDialog: PropTypes.func.isRequired\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgShare(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.545 4H2.555C1.863 4 1.3 4.562 1.3 5.255v8.114c0 .694.562 1.256 1.256 1.256h14.989c.693 0 1.255-.562 1.255-1.255V5.255C18.8 4.562 18.238 4 17.545 4z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.05 16.502h10\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.697 9.325L10.123 6.75 7.55 9.325\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.123 11.415V6.752\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgShare.defaultProps = {\n  color: \"#000\",\n  title: \"Share\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1NoYXJlLTQ5ZmFjYWVhMmU1Yjg0MWIzMWQ3MTQ2MThlOTdkODJjLnN2ZyI7\";\nexport { SvgShare as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ButtonGridPopover } from \"../popover/ButtonGridPopover\";\nimport { Popover } from \"../popover/Popover\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as ShareIcon } from \"../icons/Share.svg\";\nimport { defineMessage, useIntl } from \"react-intl\";\n\nconst sharePopoverTitle = defineMessage({\n  id: \"share-popover.title\",\n  defaultMessage: \"Share\"\n});\n\nexport function SharePopoverButton({ items }) {\n  const intl = useIntl();\n  const title = intl.formatMessage(sharePopoverTitle);\n\n  const filteredItems = items.filter(item => !!item);\n\n  // The button is removed if you can't share anything.\n  if (filteredItems.length === 0) {\n    return null;\n  }\n\n  const activeItem = filteredItems.find(item => item.active);\n\n  // If there's one item to share (your smartphone camera), or an item is active (recording), then only show that button.\n  if (filteredItems.length === 1 || activeItem) {\n    const item = filteredItems[0];\n    const Icon = item.icon;\n    return (\n      <ToolbarButton\n        icon={<Icon />}\n        onClick={() => {\n          if (item.onSelect) {\n            item.onSelect(item);\n          }\n        }}\n        label={title}\n        preset=\"accent5\"\n        statusColor={activeItem && \"recording\"}\n      />\n    );\n  }\n\n  return (\n    <Popover\n      title={title}\n      content={props => <ButtonGridPopover items={filteredItems} {...props} />}\n      placement=\"top\"\n      offsetDistance={28}\n      disableFullscreen\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <ToolbarButton\n          ref={triggerRef}\n          icon={<ShareIcon />}\n          selected={popoverVisible}\n          onClick={togglePopover}\n          label={title}\n          preset=\"accent5\"\n        />\n      )}\n    </Popover>\n  );\n}\n\nSharePopoverButton.propTypes = {\n  items: PropTypes.array.isRequired\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ReactComponent as VideoIcon } from \"../icons/Video.svg\";\nimport { ReactComponent as DesktopIcon } from \"../icons/Desktop.svg\";\nimport { ReactComponent as AvatarIcon } from \"../icons/Avatar.svg\";\nimport { SharePopoverButton } from \"./SharePopover\";\nimport { FormattedMessage } from \"react-intl\";\nimport useAvatar from \"./useAvatar\";\nimport { MediaDevicesEvents, MediaDevices } from \"../../utils/media-devices-utils\";\n\nfunction useShare(scene, hubChannel) {\n  const mediaDevicesManager = APP.mediaDevicesManager;\n  const [sharingSource, setSharingSource] = useState(null);\n  const [canShareCamera, setCanShareCamera] = useState(false);\n  const [canShareScreen, setCanShareScreen] = useState(false);\n  const [canShareCameraToAvatar, setCanShareCameraToAvatar] = useState(false);\n  const { hasVideoTextureTarget } = useAvatar();\n\n  useEffect(\n    () => {\n      function onShareVideoEnabled(event) {\n        setSharingSource(event.detail.source);\n      }\n\n      function onShareVideoDisabled() {\n        setSharingSource(null);\n      }\n\n      function onPermissionsUpdated() {\n        const canShareMedia = hubChannel.can(\"spawn_and_move_media\");\n\n        if (canShareMedia) {\n          navigator.mediaDevices\n            .enumerateDevices()\n            .then(devices => {\n              const hasCamera = devices.some(device => device.kind === \"videoinput\");\n              setCanShareCamera(hasCamera);\n              setCanShareCameraToAvatar(hasCamera && hasVideoTextureTarget);\n            })\n            .catch(() => {\n              setCanShareCamera(false);\n              setCanShareCameraToAvatar(false);\n            });\n\n          setCanShareScreen(!!navigator.mediaDevices.getDisplayMedia);\n        } else {\n          setCanShareScreen(false);\n          setCanShareCamera(false);\n          setCanShareCameraToAvatar(false);\n        }\n      }\n\n      scene.addEventListener(\"share_video_enabled\", onShareVideoEnabled);\n      scene.addEventListener(\"share_video_disabled\", onShareVideoDisabled);\n      // TODO: Show share error dialog\n      scene.addEventListener(\"share_video_failed\", onShareVideoDisabled);\n      hubChannel.addEventListener(\"permissions_updated\", onPermissionsUpdated);\n\n      onPermissionsUpdated();\n\n      // We currently only support sharing one video stream at the same time\n      setSharingSource(\n        mediaDevicesManager.isVideoShared\n          ? mediaDevicesManager.isWebcamShared\n            ? MediaDevices.CAMERA\n            : MediaDevices.SCREEN\n          : null\n      );\n\n      return () => {\n        scene.removeEventListener(\"share_video_enabled\", onShareVideoEnabled);\n        scene.removeEventListener(\"share_video_disabled\", onShareVideoDisabled);\n        scene.removeEventListener(\"share_video_failed\", onShareVideoDisabled);\n        hubChannel.removeEventListener(\"permissions_updated\", onPermissionsUpdated);\n      };\n    },\n    [scene, hubChannel, hasVideoTextureTarget, mediaDevicesManager]\n  );\n\n  const toggleShareCamera = useCallback(\n    () => {\n      if (sharingSource) {\n        scene.emit(MediaDevicesEvents.VIDEO_SHARE_ENDED);\n      } else {\n        scene.emit(\"action_share_camera\");\n      }\n    },\n    [scene, sharingSource]\n  );\n\n  const toggleShareScreen = useCallback(\n    () => {\n      if (sharingSource) {\n        scene.emit(MediaDevicesEvents.V);\n      } else {\n        scene.emit(\"action_share_screen\");\n      }\n    },\n    [scene, sharingSource]\n  );\n\n  const toggleShareCameraToAvatar = useCallback(\n    () => {\n      if (sharingSource) {\n        scene.emit(MediaDevicesEvents.VIDEO_SHARE_ENDED);\n      } else {\n        scene.emit(\"action_share_camera\", { target: \"avatar\" });\n      }\n    },\n    [scene, sharingSource]\n  );\n\n  return {\n    sharingSource,\n    canShareCamera,\n    canShareCameraToAvatar,\n    canShareScreen,\n    toggleShareCamera,\n    toggleShareCameraToAvatar,\n    toggleShareScreen\n  };\n}\n\nexport function SharePopoverContainer({ scene, hubChannel }) {\n  const {\n    sharingSource,\n    canShareCamera,\n    toggleShareCamera,\n    canShareScreen,\n    toggleShareScreen,\n    canShareCameraToAvatar,\n    toggleShareCameraToAvatar\n  } = useShare(scene, hubChannel);\n\n  const items = [\n    canShareCamera && {\n      id: \"camera\",\n      icon: VideoIcon,\n      color: \"accent5\",\n      label: <FormattedMessage id=\"share-popover.source.camera\" defaultMessage=\"Camera\" />,\n      onSelect: toggleShareCamera,\n      active: sharingSource === MediaDevices.CAMERA\n    },\n    canShareScreen && {\n      id: \"screen\",\n      icon: DesktopIcon,\n      color: \"accent5\",\n      label: <FormattedMessage id=\"share-popover.source.screen\" defaultMessage=\"Screen\" />,\n      onSelect: toggleShareScreen,\n      active: sharingSource === MediaDevices.SCREEN\n    },\n    canShareCameraToAvatar && {\n      id: \"camera-to-avatar\",\n      icon: AvatarIcon,\n      color: \"accent5\",\n      label: <FormattedMessage id=\"share-popover.source.avatar-camera\" defaultMessage=\"Avatar Camera\" />,\n      onSelect: toggleShareCameraToAvatar,\n      active: sharingSource === \"camera-to-avatar\"\n    }\n  ];\n\n  return <SharePopoverButton items={items} />;\n}\n\nSharePopoverContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired\n};\n","import { useState, useEffect } from \"react\";\n\nexport default function useAvatar() {\n  const [state, setState] = useState({ hasVideoTextureTarget: false });\n\n  useEffect(() => {\n    const avatarModelEl = document.querySelector(\"#avatar-rig .model\");\n\n    function onAvatarModelLoaded() {\n      const hasVideoTextureTarget = !!avatarModelEl.querySelector(\"[video-texture-target]\");\n      setState({ hasVideoTextureTarget });\n    }\n\n    onAvatarModelLoaded();\n\n    avatarModelEl.addEventListener(\"model-loaded\", onAvatarModelLoaded);\n\n    return () => {\n      avatarModelEl.removeEventListener(\"model-loaded\", onAvatarModelLoaded);\n    };\n  }, []);\n\n  return state;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Row.scss\";\nimport styleUtils from \"../styles/style-utils.scss\";\nimport classNames from \"classnames\";\n\nexport const Row = ({\n  children,\n  padding,\n  gap,\n  spaceBetween,\n  breakpointColumn,\n  topMargin,\n  flexClassName,\n  flexBasis,\n  noWrap = false,\n  childrenMarginR,\n  className\n}) => {\n  const paddingClass = padding === true ? styleUtils.lgPadding : styleUtils[`${padding}Padding`];\n  const gapClass = gap === true ? styleUtils.mdGap : styleUtils[`${gap}Gap`];\n  const breakpointColumnClass = breakpointColumn === true ? \"\" : styles[`${breakpointColumn}BreakpointColumn`];\n  const topMarginClass = topMargin ? styleUtils[`${topMargin}WrapMargin`] : \"\";\n  const flexBasisClass = flexBasis ? styleUtils[`flexBasis${flexBasis}`] : \"\";\n  const childrenMarginRClass = childrenMarginR ? styles[`${childrenMarginR}ChildrenMarginR`] : \"\";\n\n  return (\n    <div className={classNames(paddingClass, gapClass, className)}>\n      <div\n        className={classNames(\n          styles.flexRow,\n          breakpointColumnClass,\n          topMarginClass,\n          childrenMarginRClass,\n          {\n            [styles.spaceBetween]: spaceBetween,\n            [styles.noFlexWrap]: noWrap\n          },\n          flexClassName,\n          flexBasisClass\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\n\nRow.propTypes = {\n  children: PropTypes.node,\n  padding: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  gap: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  topMargin: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  breakpointColumn: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  childrenMarginR: PropTypes.string,\n  spaceBetween: PropTypes.bool,\n  className: PropTypes.string,\n  flexClassName: PropTypes.string,\n  flexBasis: PropTypes.oneOf([10, 20, 30, 40, 50, 60, 70, 80, 90]),\n  noWrap: PropTypes.bool\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Divider.scss\";\nimport styleUtils from \"../styles/style-utils.scss\";\nimport classNames from \"classnames\";\n\nexport const Divider = ({ margin = false }) => {\n  const marginClass = margin === false ? \"\" : styleUtils[`${margin}MarginY`];\n  return <div className={classNames(styles.divider, marginClass)} />;\n};\n\nDivider.propTypes = {\n  margin: PropTypes.oneOf([\"xs\", \"sm\", \"md\", \"lg\", \"xl\"])\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./AudioPopover.scss\";\nimport { ReactComponent as MicrophoneIcon } from \"../icons/Microphone.svg\";\nimport { ReactComponent as MicrophoneMutedIcon } from \"../icons/MicrophoneMuted.svg\";\nimport { ReactComponent as VolumeOff } from \"../icons/VolumeOff.svg\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage } from \"react-intl\";\nimport { SelectInputField } from \"../input/SelectInputField\";\nimport { Row } from \"../layout/Row\";\nimport { LevelBar } from \"../misc/LevelBar\";\nimport { ToggleInput } from \"../input/ToggleInput\";\nimport { Divider } from \"../layout/Divider\";\nimport { Button } from \"../input/Button\";\nimport MediaDevicesManager from \"../../utils/media-devices-manager\";\n\nexport const AudioPopoverContent = ({\n  micLevel,\n  microphoneOptions,\n  onChangeMicrophone,\n  isMicrophoneEnabled,\n  isMicrophoneMuted,\n  onChangeMicrophoneMuted,\n  speakerOptions,\n  onChangeSpeaker,\n  speakerLevel,\n  onPlaySound\n}) => {\n  const iconStyle = isMicrophoneEnabled ? styles.iconEnabled : styles.iconDisabled;\n  return (\n    <Column padding grow gap=\"lg\" className={styles.audioToolbarPopover}>\n      <p style={{ alignSelf: \"start\" }}>\n        <FormattedMessage id=\"mic-setup-modal.microphone-text\" defaultMessage=\"Microphone\" />\n      </p>\n      {MediaDevicesManager.isAudioInputSelectEnabled && (\n        <SelectInputField\n          className={styles.selectionInput}\n          buttonClassName={styles.selectionInput}\n          onChange={onChangeMicrophone}\n          {...microphoneOptions}\n        />\n      )}\n      <Row noWrap>\n        {isMicrophoneEnabled && !isMicrophoneMuted ? (\n          <MicrophoneIcon className={iconStyle} style={{ marginRight: \"12px\" }} />\n        ) : (\n          <MicrophoneMutedIcon className={iconStyle} style={{ marginRight: \"12px\" }} />\n        )}\n        <LevelBar className={styles.levelBar} level={!isMicrophoneEnabled || isMicrophoneMuted ? 0 : micLevel} />\n      </Row>\n      <Row nowrap>\n        <ToggleInput\n          label={<FormattedMessage id=\"mic-setup-modal.mute-mic-toggle-v2\" defaultMessage=\"Mute\" />}\n          checked={isMicrophoneMuted}\n          onChange={onChangeMicrophoneMuted}\n        />\n      </Row>\n      <Divider />\n      <p style={{ alignSelf: \"start\" }}>\n        <FormattedMessage id=\"mic-setup-modal.speakers-text\" defaultMessage=\"Speakers\" />\n      </p>\n      {MediaDevicesManager.isAudioOutputSelectEnabled && (\n        <SelectInputField\n          className={styles.selectionInput}\n          buttonClassName={styles.selectionInput}\n          onChange={onChangeSpeaker}\n          {...speakerOptions}\n        />\n      )}\n      <Row noWrap>\n        <VolumeOff className={iconStyle} style={{ marginRight: \"12px\" }} />\n        <LevelBar className={styles.levelBar} level={speakerLevel} />\n      </Row>\n      <Button preset=\"basic\" onClick={onPlaySound} sm>\n        <FormattedMessage id=\"mic-setup-modal.test-audio-button\" defaultMessage=\"Test Audio\" />\n      </Button>\n    </Column>\n  );\n};\n\nAudioPopoverContent.propTypes = {\n  isSoundPlaying: PropTypes.bool,\n  onPlaySound: PropTypes.func,\n  micLevel: PropTypes.number,\n  speakerLevel: PropTypes.number,\n  isMicrophoneEnabled: PropTypes.bool,\n  isMicrophoneMuted: PropTypes.bool,\n  onChangeMicrophoneMuted: PropTypes.func,\n  microphoneOptions: PropTypes.object,\n  onChangeMicrophone: PropTypes.func,\n  speakerOptions: PropTypes.object,\n  onChangeSpeaker: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { AudioPopoverContent } from \"./AudioPopoverContent\";\nimport { useMicrophone } from \"./useMicrophone\";\nimport { useSpeakers } from \"./useSpeakers\";\nimport { useSound } from \"./useSound\";\nimport { SOUND_SPEAKER_TONE } from \"../../systems/sound-effects-system\";\nimport { useVolumeMeter } from \"../misc/useVolumeMeter\";\nimport { useMicrophoneStatus } from \"./useMicrophoneStatus\";\n\nexport const AudioPopoverContentContainer = ({ scene }) => {\n  const { isMicMuted, toggleMute, isMicEnabled } = useMicrophoneStatus(scene);\n  const { micDeviceChanged, micDevices } = useMicrophone(scene);\n  const { volume: micVolume } = useVolumeMeter({\n    analyser: scene.systems[\"hubs-systems\"].audioSystem.outboundAnalyser\n  });\n  const { speakerDeviceChanged, speakerDevices } = useSpeakers();\n  const { playSound, soundVolume } = useSound({\n    scene,\n    sound: SOUND_SPEAKER_TONE\n  });\n  return (\n    <AudioPopoverContent\n      micLevel={micVolume}\n      microphoneOptions={micDevices}\n      onChangeMicrophone={micDeviceChanged}\n      isMicrophoneEnabled={isMicEnabled}\n      isMicrophoneMuted={isMicMuted}\n      onChangeMicrophoneMuted={toggleMute}\n      speakerOptions={speakerDevices}\n      onChangeSpeaker={speakerDeviceChanged}\n      speakerLevel={soundVolume}\n      onPlaySound={playSound}\n    />\n  );\n};\n\nAudioPopoverContentContainer.propTypes = {\n  scene: PropTypes.object.isRequired\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrow(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 10,\n    viewBox: \"0 0 16 10\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.25 8.375L8 1.625l6.75 6.75\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgArrow.defaultProps = {\n  color: \"#000\",\n  title: \"Arrow\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Fycm93LTA4M2Y0YWE4OTQ1ZjMxMDFlOGU2MTgyMjEyYjE1OGRmLnN2ZyI7\";\nexport { SvgArrow as ReactComponent };","import React, { useCallback, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./AudioPopover.scss\";\nimport { Popover } from \"../popover/Popover\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as ArrowIcon } from \"../icons/Arrow.svg\";\nimport { ReactComponent as MicrophoneIcon } from \"../icons/Microphone.svg\";\nimport { ReactComponent as MicrophoneMutedIcon } from \"../icons/MicrophoneMuted.svg\";\nimport { defineMessage, FormattedMessage, useIntl } from \"react-intl\";\n\nconst invitePopoverTitle = defineMessage({\n  id: \"audio-toolbar-popover.title\",\n  defaultMessage: \"Audio Settings\"\n});\n\nexport const AudioPopoverButton = ({\n  initiallyVisible,\n  content,\n  isMicrophoneMuted,\n  isMicrophoneEnabled,\n  micLevel,\n  onChangeMicrophoneMuted\n}) => {\n  const intl = useIntl();\n  const title = intl.formatMessage(invitePopoverTitle);\n  const popoverApiRef = useRef();\n  const micButtonRef = useCallback(\n    node => {\n      if (node !== null) {\n        const rect = node.querySelector(\"rect\");\n        if (micLevel <= 0.1) {\n          rect.setAttribute(\"height\", 0);\n        } else if (micLevel < 0.3) {\n          rect.setAttribute(\"y\", 8);\n          rect.setAttribute(\"height\", 4);\n        } else {\n          rect.setAttribute(\"y\", 4);\n          rect.setAttribute(\"height\", 8);\n        }\n      }\n    },\n    [micLevel]\n  );\n\n  return (\n    <Popover\n      title={title}\n      content={content}\n      placement=\"top-start\"\n      offsetDistance={28}\n      initiallyVisible={initiallyVisible}\n      popoverApiRef={popoverApiRef}\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <div className={styles.buttonsContainer}>\n          <ToolbarButton\n            ref={triggerRef}\n            icon={<ArrowIcon />}\n            preset=\"basic\"\n            selected={popoverVisible}\n            onClick={togglePopover}\n            type={\"left\"}\n            className={popoverVisible ? styles.arrowButton : styles.arrowButtonSelected}\n            title={\"Audio Settings\"}\n          />\n          <ToolbarButton\n            ref={micButtonRef}\n            icon={isMicrophoneMuted || !isMicrophoneEnabled ? <MicrophoneMutedIcon /> : <MicrophoneIcon />}\n            label={<FormattedMessage id=\"voice-button-container.label\" defaultMessage=\"Voice\" />}\n            preset=\"basic\"\n            onClick={onChangeMicrophoneMuted}\n            statusColor={isMicrophoneMuted || !isMicrophoneEnabled ? \"disabled\" : \"enabled\"}\n            type={\"right\"}\n          />\n        </div>\n      )}\n    </Popover>\n  );\n};\n\nAudioPopoverButton.propTypes = {\n  initiallyVisible: PropTypes.bool,\n  isMicrophoneMuted: PropTypes.bool,\n  isMicrophoneEnabled: PropTypes.bool,\n  micLevel: PropTypes.number,\n  onChangeMicrophoneMuted: PropTypes.func,\n  content: PropTypes.element\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { AudioPopoverButton } from \"./AudioPopoverButton\";\nimport { useMicrophoneStatus } from \"./useMicrophoneStatus\";\nimport { useVolumeMeter } from \"../misc/useVolumeMeter\";\n\nexport const AudioPopoverButtonContainer = ({ scene, initiallyVisible, content }) => {\n  const { isMicMuted, toggleMute, isMicEnabled } = useMicrophoneStatus(scene);\n  const { volume } = useVolumeMeter({\n    analyser: scene.systems[\"hubs-systems\"].audioSystem.outboundAnalyser\n  });\n  return (\n    <AudioPopoverButton\n      initiallyVisible={initiallyVisible}\n      content={content}\n      isMicrophoneMuted={isMicMuted}\n      isMicrophoneEnabled={isMicEnabled}\n      micLevel={volume}\n      onChangeMicrophoneMuted={toggleMute}\n    />\n  );\n};\n\nAudioPopoverButtonContainer.propTypes = {\n  scene: PropTypes.object.isRequired,\n  initiallyVisible: PropTypes.bool,\n  content: PropTypes.element\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { AudioPopoverContentContainer } from \"./AudioPopoverContentContainer\";\nimport { AudioPopoverButtonContainer } from \"./AudioPopoverButtonContainer\";\n\nexport const AudioPopoverContainer = ({ scene }) => {\n  return <AudioPopoverButtonContainer scene={scene} content={<AudioPopoverContentContainer scene={scene} />} />;\n};\n\nAudioPopoverContainer.propTypes = {\n  scene: PropTypes.object.isRequired\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./ImageGridPopover.scss\";\n\nexport function ImageGridPopover({ fullscreen, items, closePopover }) {\n  return (\n    <div className={classNames(styles.imageGridPopover, { [styles.fullscreen]: fullscreen })}>\n      {items.map(item => {\n        return (\n          <img\n            key={item.id}\n            // crossOrigin: \"anonymous\" is a workaround for CORS error on Chrome. See #4400\n            crossOrigin=\"anonymous\"\n            src={item.src}\n            alt={item.label}\n            onClick={() => {\n              if (item.onSelect) {\n                item.onSelect(item);\n              }\n\n              closePopover();\n            }}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nImageGridPopover.propTypes = {\n  fullscreen: PropTypes.bool,\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      src: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n      onSelect: PropTypes.func\n    })\n  ).isRequired,\n  closePopover: PropTypes.func.isRequired\n};\n","import React from \"react\";\nimport className from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./ReactionButton.scss\";\nimport { ReactComponent as HandRaisedIcon } from \"../icons/HandRaised.svg\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function ReactionButton({ active, children, ...props }) {\n  return (\n    <button className={className(styles.reactionButton, { [styles.active]: active })} {...props}>\n      {children}\n    </button>\n  );\n}\n\nReactionButton.propTypes = {\n  children: PropTypes.node,\n  active: PropTypes.bool\n};\n\nexport function HandRaisedButton({ active, ...props }) {\n  return (\n    <ReactionButton active={active} {...props}>\n      <HandRaisedIcon width=\"42px\" height=\"42px\" />\n      <p>\n        {active ? (\n          <FormattedMessage id=\"reaction-popover.lower-hand\" defaultMessage=\"Lower Hand\" />\n        ) : (\n          <FormattedMessage id=\"reaction-popover.raise-hand\" defaultMessage=\"Raise Hand\" />\n        )}\n      </p>\n    </ReactionButton>\n  );\n}\n\nHandRaisedButton.propTypes = {\n  active: PropTypes.bool\n};\n","import React, { useCallback, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ImageGridPopover } from \"../popover/ImageGridPopover\";\nimport { Popover } from \"../popover/Popover\";\nimport { ToolbarButton } from \"../input/ToolbarButton\";\nimport { ReactComponent as ReactionIcon } from \"../icons/Reaction.svg\";\nimport { ReactComponent as HandRaisedIcon } from \"../icons/HandRaised.svg\";\nimport { defineMessage, FormattedMessage, useIntl } from \"react-intl\";\nimport { Column } from \"../layout/Column\";\nimport { Row } from \"../layout/Row\";\nimport { HandRaisedButton } from \"./ReactionButton\";\nimport styles from \"./ReactionPopover.scss\";\nimport { Button } from \"../input/Button\";\n\nconst reactionPopoverTitle = defineMessage({\n  id: \"reaction-popover.title\",\n  defaultMessage: \"React\"\n});\n\nfunction ReactionPopoverContent({ items, presence, onToggleHandRaised, ...rest }) {\n  return (\n    <Column padding=\"sm\" grow gap=\"sm\">\n      <Row noWrap>\n        <ImageGridPopover items={items} {...rest} />\n      </Row>\n      <Row>\n        <label className={styles.label}>\n          <FormattedMessage id=\"reaction-popover.action\" defaultMessage=\"Actions\" />\n        </label>\n      </Row>\n      <Row nowrap>\n        <HandRaisedButton active={presence.hand_raised} onClick={onToggleHandRaised} />\n      </Row>\n    </Column>\n  );\n}\n\nReactionPopoverContent.propTypes = {\n  items: PropTypes.array.isRequired,\n  presence: PropTypes.object,\n  onToggleHandRaised: PropTypes.func\n};\n\nfunction TooltipPopoverContent({ onToggleHandRaised }) {\n  return (\n    <Row nowrap className={styles.popover}>\n      <Column padding=\"xs\" grow gap=\"xs\">\n        <FormattedMessage id=\"reaction-popover.hand-raised-warning\" defaultMessage=\"Your hand is raised\" />\n      </Column>\n      <Column padding=\"xs\" grow gap=\"xs\">\n        <Button sm thin preset={\"primary\"} onClick={onToggleHandRaised}>\n          <FormattedMessage id=\"reaction-popover.lower-hand\" defaultMessage=\"Lower Hand\" />\n        </Button>\n      </Column>\n    </Row>\n  );\n}\n\nTooltipPopoverContent.propTypes = {\n  onToggleHandRaised: PropTypes.func\n};\n\nexport function ReactionPopoverButton({ items, presence, onToggleHandRaised }) {\n  const [isReactionsVisible, setIsReactionsVisible] = useState(false);\n  const [isTooltipVisible, setIsTooltipVisible] = useState(false);\n  const intl = useIntl();\n  const title = intl.formatMessage(reactionPopoverTitle);\n  const popoverApiRef = useRef();\n\n  const onTooltipHandLowered = useCallback(\n    () => {\n      setIsTooltipVisible(false);\n      onToggleHandRaised();\n    },\n    [onToggleHandRaised]\n  );\n\n  return (\n    <Popover\n      title={title}\n      content={props => {\n        return isTooltipVisible ? (\n          <TooltipPopoverContent onToggleHandRaised={onTooltipHandLowered} />\n        ) : (\n          <ReactionPopoverContent\n            items={items}\n            presence={presence}\n            onToggleHandRaised={onToggleHandRaised}\n            {...props}\n          />\n        );\n      }}\n      placement=\"top\"\n      offsetDistance={28}\n      popoverApiRef={popoverApiRef}\n      showHeader={!isTooltipVisible}\n      isVisible={isReactionsVisible || isTooltipVisible}\n      onChangeVisible={visible => {\n        if (!visible) {\n          setIsReactionsVisible(false);\n          setIsTooltipVisible(presence.hand_raised);\n        }\n      }}\n      disableFullscreen={isTooltipVisible}\n    >\n      {({ togglePopover, popoverVisible, triggerRef }) => (\n        <ToolbarButton\n          ref={triggerRef}\n          icon={\n            presence.hand_raised ? (\n              <HandRaisedIcon width=\"32px\" height=\"32px\" style={{ marginLeft: \"5px\" }} />\n            ) : (\n              <ReactionIcon />\n            )\n          }\n          selected={popoverVisible}\n          onClick={() => {\n            setIsReactionsVisible(!isReactionsVisible);\n            if (presence.hand_raised) {\n              setIsTooltipVisible(!isTooltipVisible);\n            } else {\n              setIsTooltipVisible(false);\n              togglePopover();\n            }\n          }}\n          label={title}\n          preset=\"accent2\"\n        />\n      )}\n    </Popover>\n  );\n}\n\nReactionPopoverButton.propTypes = {\n  items: PropTypes.array.isRequired,\n  presence: PropTypes.object,\n  onToggleHandRaised: PropTypes.func\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useState, useEffect } from \"react\";\nimport { ReactionPopoverButton } from \"./ReactionPopover\";\nimport { spawnEmojiInFrontOfUser, emojis } from \"../../components/emoji\";\nimport { defineMessages, useIntl } from \"react-intl\";\n\nconst emojiLabels = defineMessages({\n  smile: { id: \"reaction-popover.emoji-label.smile\", defaultMessage: \"Smile\" },\n  laugh: { id: \"reaction-popover.emoji-label.laugh\", defaultMessage: \"Laugh\" },\n  clap: { id: \"reaction-popover.emoji-label.clap\", defaultMessage: \"Clap\" },\n  heart: { id: \"reaction-popover.emoji-label.heart\", defaultMessage: \"Heart\" },\n  wave: { id: \"reaction-popover.emoji-label.wave\", defaultMessage: \"Wave\" },\n  angry: { id: \"reaction-popover.emoji-label.angry\", defaultMessage: \"Angry\" },\n  cry: { id: \"reaction-popover.emoji-label.cry\", defaultMessage: \"Cry\" }\n});\n\nfunction usePresence(scene, initialPresence) {\n  const [presence, setPresence] = useState(initialPresence);\n\n  const onPresenceUpdate = ({ detail: presence }) => {\n    if (presence.sessionId === NAF.clientId) setPresence(presence);\n  };\n  useEffect(\n    () => {\n      scene.addEventListener(\"presence_updated\", onPresenceUpdate);\n      return () => scene.removeEventListener(\"presence_updated\", onPresenceUpdate);\n    },\n    [scene]\n  );\n\n  return presence;\n}\n\nexport function ReactionPopoverContainer({ scene, initialPresence }) {\n  const intl = useIntl();\n  const presence = usePresence(scene, initialPresence);\n\n  const items = emojis.map(emoji => ({\n    src: emoji.particleEmitterConfig.src,\n    onSelect: spawnEmojiInFrontOfUser,\n    label: intl.formatMessage(emojiLabels[emoji.id]),\n    ...emoji\n  }));\n\n  const onToggleHandRaised = useCallback(\n    () => {\n      if (presence.hand_raised) {\n        window.APP.hubChannel.lowerHand();\n      } else {\n        window.APP.hubChannel.raiseHand();\n      }\n    },\n    [presence]\n  );\n\n  return <ReactionPopoverButton items={items} presence={presence} onToggleHandRaised={onToggleHandRaised} />;\n}\n\nReactionPopoverContainer.propTypes = {\n  scene: PropTypes.object,\n  initialPresence: PropTypes.object\n};\n","import React from \"react\";\nimport { Modal } from \"../modal/Modal\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function SafariMicModal() {\n  return (\n    <Modal title={<FormattedMessage id=\"safari-mic-modal.title\" defaultMessage=\"Microphone Access Required\" />}>\n      <Column center padding>\n        <FormattedMessage\n          id=\"safari-mic-modal.message\"\n          defaultMessage=\"<p>Hubs requires microphone permissions in Safari.</p><p>Please reload and allow microphone access to continue.</p>\"\n          values={{\n            // eslint-disable-next-line react/display-name\n            p: chunks => <p>{chunks}</p>\n          }}\n        />\n        <Button preset=\"accept\" onClick={() => location.reload()}>\n          <FormattedMessage id=\"safari-mic-modal.reload-button\" defaultMessage=\"Reload\" />\n        </Button>\n      </Column>\n    </Modal>\n  );\n}\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../../utils/configs\";\nimport { SignInModal, SignInStep, SubmitEmail, WaitForVerification, SignInComplete } from \"./SignInModal\";\n\n// TODO: Migrate to use AuthContext\nexport function RoomSignInModalContainer({ onClose, step, onSubmitEmail, message, onContinue }) {\n  const [cachedEmail, setCachedEmail] = useState();\n\n  return (\n    <SignInModal onClose={onClose} closeable>\n      {step === SignInStep.submit && (\n        <SubmitEmail\n          onSubmitEmail={email => {\n            setCachedEmail(email);\n            onSubmitEmail(email);\n          }}\n          initialEmail={cachedEmail}\n          termsUrl={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n          showTerms={configs.feature(\"show_terms\")}\n          privacyUrl={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n          showPrivacy={configs.feature(\"show_privacy\")}\n          message={message}\n        />\n      )}\n      {step === SignInStep.waitForVerification && (\n        <WaitForVerification\n          onCancel={onClose}\n          email={cachedEmail}\n          showNewsletterSignup={configs.feature(\"show_newsletter_signup\")}\n        />\n      )}\n      {step === SignInStep.complete && <SignInComplete message={message} onContinue={onContinue} />}\n    </SignInModal>\n  );\n}\n\nRoomSignInModalContainer.propTypes = {\n  onClose: PropTypes.func,\n  onSubmitEmail: PropTypes.func,\n  step: PropTypes.string,\n  message: PropTypes.string,\n  onContinue: PropTypes.func\n};\n","import React from \"react\";\nimport { useIntl, defineMessages, FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\n\nexport const LeaveReason = {\n  leaveRoom: \"leaveRoom\",\n  joinRoom: \"joinRoom\",\n  createRoom: \"createRoom\"\n};\n\nconst reasonMessages = defineMessages({\n  [LeaveReason.leaveRoom]: {\n    id: \"leave-room-modal.leave-room.message\",\n    defaultMessage: \"Are you sure you want to leave the room?\"\n  },\n  [LeaveReason.joinRoom]: {\n    id: \"leave-room-modal.join-room.message\",\n    defaultMessage: \"Joining a new room will leave this one. Are you sure?\"\n  },\n  [LeaveReason.createRoom]: {\n    id: \"leave-room-modal.create-room.message\",\n    defaultMessage: \"Creating a new room will leave this one. Are you sure?\"\n  }\n});\n\nconst confirmationMessages = defineMessages({\n  [LeaveReason.leaveRoom]: {\n    id: \"leave-room-modal.leave-room.confirm\",\n    defaultMessage: \"Leave Room\"\n  },\n  [LeaveReason.joinRoom]: {\n    id: \"leave-room-modal.join-room.confirm\",\n    defaultMessage: \"Join Room\"\n  },\n  [LeaveReason.createRoom]: {\n    id: \"leave-room-modal.create-room.confirm\",\n    defaultMessage: \"Leave and Create Room\"\n  }\n});\n\nexport function LeaveRoomModal({ reason, destinationUrl, onClose }) {\n  const intl = useIntl();\n\n  return (\n    <Modal\n      title={<FormattedMessage id=\"leave-room-modal.title\" defaultMessage=\"Leave Room\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column padding center centerMd=\"both\" grow>\n        <p>{intl.formatMessage(reasonMessages[reason])}</p>\n        <Button as=\"a\" preset=\"cancel\" href={destinationUrl} rel=\"noopener noreferrer\">\n          {intl.formatMessage(confirmationMessages[reason])}\n        </Button>\n      </Column>\n    </Modal>\n  );\n}\n\nLeaveRoomModal.propTypes = {\n  reason: PropTypes.string,\n  destinationUrl: PropTypes.string,\n  onClose: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./RoomSidebar.scss\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { InputField } from \"../input/InputField\";\nimport { IconButton } from \"../input/IconButton\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nfunction SceneAttribution({ attribution }) {\n  const intl = useIntl();\n\n  const unknown = intl.formatMessage({ id: \"room-sidebar.unknown\", defaultMessage: \"unknown\" });\n\n  const name = attribution.name || attribution.title || unknown;\n  const author = attribution.author || unknown;\n\n  if (attribution.url) {\n    const source = attribution.url.includes(\"sketchfab.com\") ? \"Sketchfab\" : null;\n\n    return (\n      <li className={styles.attribution}>\n        <div className={styles.attributionName}>\n          <a href={attribution.url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {name}\n          </a>\n        </div>\n        <div className={styles.attributionAuthor}>\n          {source ? (\n            <FormattedMessage\n              id=\"room-sidebar.scene-attribution-with-source\"\n              defaultMessage=\"by {author} on {source}\"\n              values={{\n                author,\n                source\n              }}\n            />\n          ) : (\n            <FormattedMessage\n              id=\"room-sidebar.scene-attribution\"\n              defaultMessage=\"by {author}\"\n              values={{\n                author\n              }}\n            />\n          )}\n        </div>\n      </li>\n    );\n  } else if (attribution.author) {\n    return (\n      <li className={styles.attribution}>\n        <div className={styles.attributionName}>{name}</div>\n        <div className={styles.attributionAuthor}>\n          <FormattedMessage\n            id=\"room-sidebar.scene-attribution\"\n            defaultMessage=\"by {author}\"\n            values={{\n              author\n            }}\n          />\n        </div>\n      </li>\n    );\n  } else {\n    return null;\n  }\n}\n\n// To assist with content control, we avoid displaying scene links to users who are not the scene\n// creator, unless the scene is remixable or promotable.\nfunction allowDisplayOfSceneLink(accountId, scene) {\n  return scene && ((accountId && scene.account_id === accountId) || scene.allow_promotion || scene.allow_remixing);\n}\n\nexport function SceneInfo({ accountId, scene, showAttributions, canChangeScene, onChangeScene }) {\n  const changeSceneButton = canChangeScene && (\n    <Button preset=\"primary\" onClick={onChangeScene}>\n      <FormattedMessage id=\"room-sidebar.scene-info.change-scene-button\" defaultMessage=\"Change Scene\" />\n    </Button>\n  );\n  if (!scene) return changeSceneButton;\n  const showSceneLink = allowDisplayOfSceneLink(accountId, scene);\n  const attributions = (scene.attributions && scene.attributions.content) || [];\n  const creator = scene.attributions && scene.attributions.creator;\n\n  const filteredAttributionElements = attributions\n    .filter(a => a.url || a.author)\n    .map((attribution, i) => <SceneAttribution attribution={attribution} key={i} />);\n\n  return (\n    <>\n      <h2 className={styles.sectionTitle}>\n        <FormattedMessage id=\"room-sidebar.scene-info.title\" defaultMessage=\"Scene\" />\n      </h2>\n      <div className={styles.sceneScreenshotContainer}>\n        {showSceneLink ? (\n          <a href={scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n            <img className={styles.sceneScreenshotImage} src={scene.screenshot_url} />\n          </a>\n        ) : (\n          <img className={styles.sceneScreenshotImage} src={scene.screenshot_url} />\n        )}\n      </div>\n      <div className={styles.sceneInfo}>\n        {showSceneLink ? (\n          <b className={styles.sceneName}>\n            <a href={scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              {scene.name}\n            </a>\n          </b>\n        ) : (\n          <b className={styles.sceneName}>{scene.name}</b>\n        )}\n        <div className={styles.sceneCreator}>\n          <FormattedMessage\n            id=\"room-sidebar.scene-info.scene-creator\"\n            defaultMessage=\"by {creator}\"\n            values={{ creator }}\n          />\n        </div>\n      </div>\n      {showAttributions &&\n        filteredAttributionElements.length > 0 && (\n          <InputField\n            label={<FormattedMessage id=\"room-sidebar.scene-info.attributions\" defaultMessage=\"Attributions\" />}\n          >\n            <ul className={styles.attributions}>{filteredAttributionElements}</ul>\n          </InputField>\n        )}\n      {changeSceneButton}\n    </>\n  );\n}\n\nexport function RoomSidebar({ room, accountId, onClose, canEdit, onEdit, onChangeScene }) {\n  return (\n    <Sidebar\n      title={<FormattedMessage id=\"room-sidebar.title\" defaultMessage=\"Room\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n      afterTitle={\n        canEdit && (\n          <IconButton onClick={onEdit}>\n            <FormattedMessage id=\"room-sidebar.edit-button\" defaultMessage=\"Edit\" />\n          </IconButton>\n        )\n      }\n    >\n      <Column padding>\n        <InputField label={<FormattedMessage id=\"room-sidebar.room-name\" defaultMessage=\"Name\" />}>\n          {room.name}\n        </InputField>\n        {room.description && (\n          <InputField label={<FormattedMessage id=\"room-sidebar.room-description\" defaultMessage=\"Description\" />}>\n            {room.description}\n          </InputField>\n        )}\n        <SceneInfo\n          accountId={accountId}\n          scene={room.scene}\n          showAttributions\n          canChangeScene={canEdit}\n          onChangeScene={onChangeScene}\n        />\n      </Column>\n    </Sidebar>\n  );\n}\n\nRoomSidebar.propTypes = {\n  accountId: PropTypes.string,\n  room: PropTypes.object.isRequired,\n  onClose: PropTypes.func,\n  canEdit: PropTypes.bool,\n  onEdit: PropTypes.func,\n  onChangeScene: PropTypes.func\n};\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { InputField } from \"./InputField\";\nimport { useId } from \"./useId\";\nimport { TextAreaInput } from \"./TextAreaInput\";\n\nexport const TextAreaInputField = memo(\n  forwardRef(({ className, error, description, inputClassName, label, fullWidth, ...rest }, ref) => {\n    const id = useId();\n    const labelId = useId();\n\n    return (\n      <InputField\n        id={labelId}\n        htmlFor={id}\n        className={className}\n        label={label}\n        error={error}\n        description={description}\n        fullWidth={fullWidth}\n      >\n        <TextAreaInput id={id} ref={ref} className={inputClassName} {...rest} />\n      </InputField>\n    );\n  })\n);\n\nTextAreaInputField.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.node,\n  error: PropTypes.node,\n  description: PropTypes.node,\n  labelClassName: PropTypes.string,\n  inputClassName: PropTypes.string,\n  fullWidth: PropTypes.bool\n};\n","import React, { forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./RadioInput.scss\";\n\nexport function RadioInputContainer({ className, children, ...rest }) {\n  return (\n    <div className={classNames(styles.radioInput, className)} {...rest}>\n      {children}\n    </div>\n  );\n}\n\nRadioInputContainer.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n\nexport const RadioInputOption = forwardRef(({ label, description, className, labelClassName, ...rest }, ref) => (\n  <label className={classNames(styles.option, className)}>\n    <input className={styles.input} type=\"radio\" ref={ref} {...rest} />\n    <div className={classNames(styles.content, labelClassName)}>\n      <span className={styles.label}>{label}</span>\n      {description && <span className={styles.description}>{description}</span>}\n    </div>\n  </label>\n));\n\nRadioInputOption.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.node.isRequired,\n  description: PropTypes.node,\n  labelClassName: PropTypes.string\n};\n","import React, { memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { InputField } from \"./InputField\";\nimport { RadioInputContainer, RadioInputOption as _RadioInputOption } from \"./RadioInput\";\n\nexport const RadioInputField = memo(\n  ({ className, error, description, inputClassName, label, children, fullWidth, ...rest }) => {\n    return (\n      <InputField className={className} label={label} error={error} description={description} fullWidth={fullWidth}>\n        <RadioInputContainer className={inputClassName} {...rest}>\n          {children}\n        </RadioInputContainer>\n      </InputField>\n    );\n  }\n);\n\nRadioInputField.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.node,\n  error: PropTypes.node,\n  description: PropTypes.node,\n  labelClassName: PropTypes.string,\n  inputClassName: PropTypes.string,\n  children: PropTypes.node,\n  fullWidth: PropTypes.bool\n};\n\nexport const RadioInputOption = _RadioInputOption;\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./NumericInput.scss\";\nimport { TextInput } from \"./TextInput\";\n\nexport const NumericInput = memo(\n  forwardRef(({ className, afterInput, ...rest }, ref) => {\n    return (\n      <TextInput\n        inputMode=\"numeric\"\n        {...rest}\n        type=\"number\"\n        className={classNames(styles.numericInput, className)}\n        ref={ref}\n        afterInput={afterInput}\n      />\n    );\n  })\n);\n\nNumericInput.propTypes = {\n  afterInput: PropTypes.node,\n  className: PropTypes.string\n};\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { InputField } from \"./InputField\";\nimport { useId } from \"./useId\";\nimport { NumericInput } from \"./NumericInput\";\n\nexport const NumericInputField = memo(\n  forwardRef(({ className, error, description, inputClassName, label, fullWidth, ...rest }, ref) => {\n    const id = useId();\n    const labelId = useId();\n\n    return (\n      <InputField\n        id={labelId}\n        htmlFor={id}\n        className={className}\n        label={label}\n        error={error}\n        description={description}\n        fullWidth={fullWidth}\n      >\n        <NumericInput id={id} ref={ref} className={inputClassName} {...rest} />\n      </InputField>\n    );\n  })\n);\n\nNumericInputField.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.node,\n  error: PropTypes.node,\n  description: PropTypes.node,\n  labelClassName: PropTypes.string,\n  inputClassName: PropTypes.string,\n  fullWidth: PropTypes.bool\n};\n","import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useForm } from \"react-hook-form\";\nimport styles from \"./RoomSettingsSidebar.scss\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { InputField } from \"../input/InputField\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\nimport { ApplyButton } from \"../input/Button\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { TextAreaInputField } from \"../input/TextAreaInputField\";\nimport { ToggleInput } from \"../input/ToggleInput\";\nimport { RadioInputField, RadioInputOption } from \"../input/RadioInputField\";\nimport { NumericInputField } from \"../input/NumericInputField\";\nimport { BackButton } from \"../input/BackButton\";\nimport { SceneInfo } from \"./RoomSidebar\";\nimport { Column } from \"../layout/Column\";\nimport { InviteLinkInputField } from \"./InviteLinkInputField\";\n\nexport function RoomSettingsSidebar({\n  showBackButton,\n  accountId,\n  room,\n  fetchingInvite,\n  inviteUrl,\n  onRevokeInvite,\n  maxRoomSize,\n  showPublicRoomSetting,\n  onSubmit,\n  onClose,\n  canChangeScene,\n  onChangeScene\n}) {\n  const intl = useIntl();\n  const { handleSubmit, register, watch, errors, setValue } = useForm({\n    defaultValues: room\n  });\n\n  const entryMode = watch(\"entry_mode\");\n  const spawnAndMoveMedia = watch(\"member_permissions.spawn_and_move_media\");\n\n  useEffect(\n    () => {\n      if (!spawnAndMoveMedia) {\n        setValue(\"member_permissions.spawn_camera\", false, { shouldDirty: true });\n        setValue(\"member_permissions.pin_objects\", false, { shouldDirty: true });\n      }\n    },\n    [spawnAndMoveMedia, setValue]\n  );\n\n  return (\n    <Sidebar\n      title={<FormattedMessage id=\"room-settings-sidebar.title\" defaultMessage=\"Room Settings\" />}\n      beforeTitle={showBackButton ? <BackButton onClick={onClose} /> : <CloseButton onClick={onClose} />}\n    >\n      <Column padding as=\"form\" onSubmit={handleSubmit(onSubmit)}>\n        <SceneInfo\n          accountId={accountId}\n          scene={room.scene}\n          canChangeScene={canChangeScene}\n          onChangeScene={onChangeScene}\n        />\n        <TextInputField\n          name=\"name\"\n          type=\"text\"\n          required\n          autoComplete=\"off\"\n          placeholder={intl.formatMessage({\n            id: \"room-settings-sidebar.name-placeholder\",\n            defaultMessage: \"Room name\"\n          })}\n          minLength={1}\n          maxLength={64}\n          label={<FormattedMessage id=\"room-settings-sidebar.name\" defaultMessage=\"Room Name\" />}\n          ref={register}\n          error={errors.name}\n          fullWidth\n        />\n        <TextAreaInputField\n          name=\"description\"\n          autoComplete=\"off\"\n          placeholder={intl.formatMessage({\n            id: \"room-settings-sidebar.description-placeholder\",\n            defaultMessage: \"Room Description\"\n          })}\n          label={<FormattedMessage id=\"room-settings-sidebar.description\" defaultMessage=\"Room Description\" />}\n          minRows={3}\n          ref={register}\n          error={errors.description}\n          fullWidth\n        />\n        <NumericInputField\n          name=\"room_size\"\n          required\n          min={0}\n          max={maxRoomSize}\n          placeholder={intl.formatMessage({\n            id: \"room-settings-sidebar.room-size-placeholder\",\n            defaultMessage: \"Member Limit\"\n          })}\n          label={<FormattedMessage id=\"room-settings-sidebar.room-size\" defaultMessage=\"Room Size\" />}\n          ref={register}\n          error={errors.room_size}\n          fullWidth\n        />\n        <RadioInputField\n          label={<FormattedMessage id=\"room-settings-sidebar.room-access\" defaultMessage=\"Room Access\" />}\n          fullWidth\n        >\n          <RadioInputOption\n            name=\"entry_mode\"\n            value=\"allow\"\n            label={<FormattedMessage id=\"room-settings-sidebar.access-shared-link\" defaultMessage=\"Shared link\" />}\n            description={\n              <FormattedMessage\n                id=\"room-settings-sidebar.access-shared-link-description\"\n                defaultMessage=\"Only those with the link can join\"\n              />\n            }\n            ref={register}\n            error={errors.entry_mode}\n          />\n          <RadioInputOption\n            name=\"entry_mode\"\n            value=\"invite\"\n            label={<FormattedMessage id=\"room-settings-sidebar.access-invite\" defaultMessage=\"Invite only\" />}\n            description={\n              <FormattedMessage\n                id=\"room-settings-sidebar.access-invite-description\"\n                defaultMessage=\"Invite people with a link that can be revoked\"\n              />\n            }\n            ref={register}\n            error={errors.entry_mode}\n          />\n        </RadioInputField>\n        {entryMode === \"invite\" && (\n          <InviteLinkInputField fetchingInvite={fetchingInvite} inviteUrl={inviteUrl} onRevokeInvite={onRevokeInvite} />\n        )}\n        {showPublicRoomSetting && (\n          <ToggleInput\n            name=\"allow_promotion\"\n            label={<FormattedMessage id=\"room-settings-sidebar.access-public\" defaultMessage=\"Public\" />}\n            description={\n              <FormattedMessage\n                id=\"room-settings-sidebar.access-public-description\"\n                defaultMessage=\"Listed on the homepage\"\n              />\n            }\n            ref={register}\n          />\n        )}\n        <InputField\n          label={<FormattedMessage id=\"room-settings-sidebar.permissions\" defaultMessage=\"Room Member Permissions\" />}\n          fullWidth\n        >\n          <div className={styles.roomPermissions}>\n            <ToggleInput\n              name=\"member_permissions.spawn_and_move_media\"\n              label={\n                <FormattedMessage\n                  id=\"room-settings-sidebar.spawn-and-move-media\"\n                  defaultMessage=\"Create and move objects\"\n                />\n              }\n              ref={register}\n            />\n            <div className={styles.permissionsGroup}>\n              <ToggleInput\n                name=\"member_permissions.spawn_camera\"\n                label={<FormattedMessage id=\"room-settings-sidebar.spawn-camera\" defaultMessage=\"Create cameras\" />}\n                ref={register}\n                disabled={!spawnAndMoveMedia}\n              />\n              <ToggleInput\n                name=\"member_permissions.pin_objects\"\n                label={<FormattedMessage id=\"room-settings-sidebar.pin-objects\" defaultMessage=\"Pin objects\" />}\n                ref={register}\n                disabled={!spawnAndMoveMedia}\n              />\n            </div>\n            <ToggleInput\n              name=\"member_permissions.spawn_drawing\"\n              label={<FormattedMessage id=\"room-settings-sidebar.spawn-drawing\" defaultMessage=\"Create drawings\" />}\n              ref={register}\n            />\n            <ToggleInput\n              name=\"member_permissions.spawn_emoji\"\n              label={<FormattedMessage id=\"room-settings-sidebar.spawn-emoji\" defaultMessage=\"Create emoji\" />}\n              ref={register}\n            />\n            <ToggleInput\n              name=\"member_permissions.fly\"\n              label={<FormattedMessage id=\"room-settings-sidebar.fly\" defaultMessage=\"Allow flying\" />}\n              ref={register}\n            />\n          </div>\n        </InputField>\n        <ApplyButton type=\"submit\" />\n      </Column>\n    </Sidebar>\n  );\n}\n\nRoomSettingsSidebar.propTypes = {\n  accountId: PropTypes.string,\n  showBackButton: PropTypes.bool,\n  room: PropTypes.object.isRequired,\n  fetchingInvite: PropTypes.bool,\n  inviteUrl: PropTypes.string,\n  onRevokeInvite: PropTypes.func,\n  roomSize: PropTypes.number,\n  maxRoomSize: PropTypes.number,\n  showPublicRoomSetting: PropTypes.bool,\n  onSubmit: PropTypes.func,\n  onClose: PropTypes.func,\n  canChangeScene: PropTypes.bool,\n  onChangeScene: PropTypes.func\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { RoomSettingsSidebar } from \"./RoomSettingsSidebar\";\nimport configs from \"../../utils/configs\";\nimport { useInviteUrl } from \"./useInviteUrl\";\n\nexport function RoomSettingsSidebarContainer({ showBackButton, room, hubChannel, onChangeScene, onClose }) {\n  const maxRoomSize = configs.feature(\"max_room_size\");\n\n  const { fetchingInvite, inviteUrl, revokeInvite } = useInviteUrl(hubChannel);\n\n  const applyChanges = useCallback(\n    settings => {\n      hubChannel.updateHub(settings);\n      onClose();\n    },\n    [hubChannel, onClose]\n  );\n\n  return (\n    <RoomSettingsSidebar\n      showBackButton={showBackButton}\n      room={room}\n      fetchingInvite={fetchingInvite}\n      inviteUrl={inviteUrl}\n      onRevokeInvite={revokeInvite}\n      maxRoomSize={maxRoomSize}\n      showPublicRoomSetting={hubChannel.can(\"update_hub_promotion\")}\n      onSubmit={applyChanges}\n      canChangeScene\n      onChangeScene={onChangeScene}\n      onClose={onClose}\n    />\n  );\n}\n\nRoomSettingsSidebarContainer.propTypes = {\n  showBackButton: PropTypes.bool,\n  room: PropTypes.object.isRequired,\n  hubChannel: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onChangeScene: PropTypes.func\n};\n","import React from \"react\";\nimport { FormattedMessage, defineMessages, useIntl } from \"react-intl\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CancelButton } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\n\nexport const AutoExitReason = {\n  concurrentSession: \"concurrentSession\",\n  idle: \"idle\"\n};\n\nconst messages = defineMessages({\n  [AutoExitReason.concurrentSession]: {\n    id: \"auto-exit-warning-modal.reason.concurrent-session\",\n    defaultMessage: \"You have started another session.\"\n  },\n  [AutoExitReason.idle]: {\n    id: \"auto-exit-warning-modal.reason.idle\",\n    defaultMessage: \"You have been idle for too long.\"\n  }\n});\n\nexport function AutoExitWarningModal({ onCancel, reason, secondsRemaining }) {\n  const intl = useIntl();\n\n  return (\n    <Modal title=\"Warning\">\n      <Column padding center>\n        <b>\n          <FormattedMessage\n            id=\"auto-exit-warning-modal.message\"\n            defaultMessage=\"Auto-ending session in {secondsRemaining} seconds\"\n            values={{ secondsRemaining }}\n          />\n        </b>\n        <p>{intl.formatMessage(messages[reason])}</p>\n        <CancelButton onClick={onCancel} />\n      </Column>\n    </Modal>\n  );\n}\n\nAutoExitWarningModal.propTypes = {\n  reason: PropTypes.string.isRequired,\n  secondsRemaining: PropTypes.number.isRequired,\n  onCancel: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { defineMessages, FormattedMessage, useIntl } from \"react-intl\";\nimport { LoadingScreenLayout } from \"../layout/LoadingScreenLayout\";\nimport { Button } from \"../input/Button\";\n\nexport const ExitReason = {\n  exited: \"exited\",\n  closed: \"closed\",\n  denied: \"denied\",\n  disconnected: \"disconnected\",\n  left: \"left\",\n  full: \"full\",\n  sceneError: \"sceneError\",\n  connectError: \"connectError\",\n  versionMismatch: \"versionMismatch\"\n};\n\nconst messages = defineMessages({\n  [ExitReason.exited]: {\n    id: \"exited-room-screen.reason.exited\",\n    defaultMessage: \"Your session has ended. Refresh your browser to start a new one.\"\n  },\n  [ExitReason.closed]: {\n    id: \"exited-room-screen.reason.closed\",\n    defaultMessage: \"This room is no longer available.\"\n  },\n  [ExitReason.denied]: {\n    id: \"exited-room-screen.reason.denied\",\n    defaultMessage: \"You are not permitted to join this room. Please request permission from the room creator.\"\n  },\n  [ExitReason.disconnected]: {\n    id: \"exited-room-screen.reason.disconnected\",\n    defaultMessage: \"You have disconnected from the room. Refresh the page to try to reconnect.\"\n  },\n  [ExitReason.left]: {\n    id: \"exited-room-screen.reason.left\",\n    defaultMessage: \"You have left the room.\"\n  },\n  [ExitReason.full]: {\n    id: \"exited-room-screen.reason.full\",\n    defaultMessage: \"This room is full, please try again later.\"\n  },\n  [ExitReason.sceneError]: {\n    id: \"exited-room-screen.reason.scene-error\",\n    defaultMessage: \"The scene failed to load.\"\n  },\n  [ExitReason.connectError]: {\n    id: \"exited-room-screen.reason.connect-error\",\n    defaultMessage: \"Unable to connect to this room, please try again later.\"\n  },\n  [ExitReason.versionMismatch]: {\n    id: \"exited-room-screen.reason.version-mismatch\",\n    defaultMessage: \"The version you deployed is not available yet. Your browser will refresh in 5 seconds.\"\n  }\n});\n\nexport function ExitedRoomScreen({ reason, showTerms, termsUrl, showSourceLink }) {\n  const intl = useIntl();\n\n  let subtitle = null;\n  if (reason === ExitReason.closed) {\n    const contactEmail = intl.formatMessage({ id: \"contact-email\" });\n\n    subtitle = (\n      <>\n        <b>\n          <FormattedMessage\n            id=\"exited-room-screen.no-longer-available\"\n            defaultMessage=\"Sorry, this room is no longer available.\"\n          />\n        </b>\n        {showTerms && (\n          <p>\n            <FormattedMessage\n              id=\"exited-room-screen.closed-room-tos\"\n              defaultMessage=\"A room may be closed by the room owner, or if we receive reports that it violates our <toslink>Terms of Use</toslink>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                toslink: chunks => (\n                  <a target=\"_blank\" rel=\"noreferrer noopener\" href={termsUrl}>\n                    {chunks}\n                  </a>\n                )\n              }}\n            />\n          </p>\n        )}\n        <p>\n          <FormattedMessage\n            id=\"exited-room-screen.contact-us\"\n            defaultMessage=\"If you have questions, contact us at {contactEmail}.\"\n            values={{ contactEmail: <a href={`mailto:${contactEmail}`}>{contactEmail}</a> }}\n          />\n        </p>\n        {showSourceLink && (\n          <p>\n            <FormattedMessage\n              id=\"exited-room-screen.source-link\"\n              defaultMessage=\"If you'd like to run your own server, Hubs's source code is available on <a>GitHub</a>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                a: chunks => <a href=\"https://github.com/mozilla/hubs\">{chunks}</a>\n              }}\n            />\n          </p>\n        )}\n\n        <Button as=\"a\" preset=\"accept\" href=\"/\">\n          <FormattedMessage id=\"exited-room-screen.home-button\" defaultMessage=\"Back to Home\" />\n        </Button>\n      </>\n    );\n  } else {\n    const tcpUrl = new URL(document.location.toString());\n    const tcpParams = new URLSearchParams(tcpUrl.search);\n    tcpParams.set(\"force_tcp\", true);\n    tcpUrl.search = tcpParams.toString();\n\n    subtitle = (\n      <>\n        <b>{intl.formatMessage(messages[reason])}</b>\n\n        {reason === ExitReason.connectError && (\n          <p>\n            <FormattedMessage\n              id=\"exited-room-screen.connect-tcp\"\n              defaultMessage=\"You can try <a>connecting via TCP</a>, which may work better on some networks.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                a: chunks => <a href={tcpUrl.toString()}>{chunks}</a>\n              }}\n            />\n          </p>\n        )}\n        {![ExitReason.left, ExitReason.disconnected, ExitReason.sceneError].includes(reason) && (\n          <p>\n            <FormattedMessage\n              id=\"exited-room-screen.create-room\"\n              defaultMessage=\"You can also <a>create a new room</a>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                a: chunks => <a href=\"/\">{chunks}</a>\n              }}\n            />\n          </p>\n        )}\n\n        <Button as=\"a\" preset=\"accept\" href={window.location.href}>\n          <FormattedMessage id=\"exited-room-screen.refresh-page-button\" defaultMessage=\"Refresh Page\" />\n        </Button>\n      </>\n    );\n  }\n\n  return <LoadingScreenLayout center={subtitle} />;\n}\n\nExitedRoomScreen.propTypes = {\n  reason: PropTypes.string.isRequired,\n  showTerms: PropTypes.bool,\n  termsUrl: PropTypes.string,\n  showSourceLink: PropTypes.bool\n};\n","import React, { useState, useCallback } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Button, CancelButton } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport { TextInputField } from \"../input/TextInputField\";\n\nexport function CloseRoomModal({ roomName, onClose, onConfirm }) {\n  const [confirmText, setConfirmText] = useState(\"\");\n  const [showIsNotMatchError, setShowIsNotMatchError] = useState(false);\n\n  const onClickConfirm = useCallback(\n    () => {\n      if (confirmText.toLowerCase() === roomName.toLowerCase()) {\n        onConfirm();\n      } else {\n        setShowIsNotMatchError(true);\n      }\n    },\n    [onConfirm, confirmText, roomName]\n  );\n\n  return (\n    <Modal\n      title={<FormattedMessage id=\"close-room-modal.title\" defaultMessage=\"Close Room\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column padding center centerMd=\"both\" grow>\n        <p>\n          <FormattedMessage\n            id=\"close-room-modal.message\"\n            defaultMessage=\"Closing this room will remove yourself and others from the room, shutting it down permanently.{linebreak}Are you sure? This action cannot be undone.\"\n            values={{ linebreak: <br /> }}\n          />\n        </p>\n        <p>\n          <FormattedMessage\n            id=\"close-room-modal.type-to-confirm\"\n            defaultMessage=\"Type room name to confirm: {roomName}\"\n            values={{ roomName: <b>{roomName}</b> }}\n          />\n        </p>\n        <TextInputField\n          label={<FormattedMessage id=\"close-room-modal.confirm-room-name-field\" defaultMessage=\"Confirm Room Name\" />}\n          onChange={e => setConfirmText(e.target.value)}\n          value={confirmText}\n          error={\n            showIsNotMatchError && (\n              <FormattedMessage id=\"close-room-modal.room-name-match-error\" defaultMessage=\"Room name does not match\" />\n            )\n          }\n        />\n        <Button preset=\"accept\" onClick={onClickConfirm}>\n          <FormattedMessage id=\"close-room-modal.confirm\" defaultMessage=\"Yes, Close Room\" />\n        </Button>\n        <CancelButton onClick={onClose} />\n      </Column>\n    </Modal>\n  );\n}\n\nCloseRoomModal.propTypes = {\n  roomName: PropTypes.string,\n  onConfirm: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function WebVRUnsupportedModal({ onClose }) {\n  return (\n    <Modal\n      title={<FormattedMessage id=\"webvr-unsupported-modal.title\" defaultMessage=\"Enter in VR\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column padding center>\n        <p>\n          <FormattedMessage\n            id=\"webvr-unsupported-modal.message\"\n            defaultMessage=\"WebVR isn't supported in this browser, to enter with Oculus or SteamVR, use Firefox.\"\n          />\n        </p>\n        <Button\n          as=\"a\"\n          preset=\"accent2\"\n          href=\"https://www.mozilla.org/firefox/\"\n          target=\"_blank\"\n          rel=\"noreferrer noopener\"\n        >\n          <span>\n            <FormattedMessage id=\"webvr-unsupported-modal.download-firefox-button\" defaultMessage=\"Download Firefox\" />\n          </span>\n        </Button>\n        <p>\n          <small>\n            <FormattedMessage\n              id=\"webvr-unsupported-modal.webvr-rocks-link\"\n              defaultMessage=\"For a list of browsers with experimental VR support, visit <a>WebVR Rocks</a>.\"\n              values={{\n                // eslint-disable-next-line react/display-name\n                a: chunks => (\n                  <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    {chunks}\n                  </a>\n                )\n              }}\n            />\n          </small>\n        </p>\n      </Column>\n    </Modal>\n  );\n}\n\nWebVRUnsupportedModal.propTypes = {\n  onClose: PropTypes.func\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\nimport createHashtagPlugin from \"draft-js-hashtag-plugin\";\nimport createLinkifyPlugin from \"draft-js-linkify-plugin\";\nimport createCounterPlugin from \"draft-js-counter-plugin\";\nimport Editor from \"draft-js-plugins-editor\";\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\nimport \"draft-js-hashtag-plugin/lib/plugin.css\";\nimport \"draft-js-linkify-plugin/lib/plugin.css\";\nimport \"draft-js-counter-plugin/lib/plugin.css\";\nimport styles from \"./TweetEditorModal.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nconst emojiPlugin = createEmojiPlugin();\nconst hashtagPlugin = createHashtagPlugin();\nconst linkifyPlugin = createLinkifyPlugin();\nconst counterPlugin = createCounterPlugin();\n\nexport function TweetEditorModal({\n  editorState,\n  editorRef,\n  sending,\n  mediaThumbnailUrl,\n  contentSubtype,\n  onClickEditor,\n  onChange,\n  onSend,\n  onClose\n}) {\n  const { EmojiSuggestions, EmojiSelect } = emojiPlugin;\n  const { CharCounter } = counterPlugin;\n\n  const tweetLength = editorState.getCurrentContent().getPlainText().length;\n\n  return (\n    <Modal\n      title={<FormattedMessage id=\"tweet-editor-modal.title\" defaultMessage=\"Tweet\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column padding center>\n        <div className={styles.media}>\n          {contentSubtype && contentSubtype.startsWith(\"video\") ? (\n            <video src={mediaThumbnailUrl} width={450} height={255} controls />\n          ) : (\n            <img src={mediaThumbnailUrl} width={450} height={255} />\n          )}\n        </div>\n        <div className={styles.editor}>\n          <div className={styles.editorInner} onClick={onClickEditor}>\n            <Editor\n              ref={editorRef}\n              editorState={editorState}\n              onChange={onChange}\n              plugins={[emojiPlugin, hashtagPlugin, linkifyPlugin, counterPlugin]}\n            />\n          </div>\n\n          <div className={styles.emojiButton}>\n            <EmojiSelect />\n          </div>\n\n          <div className={styles.emojiSuggestions}>\n            <EmojiSuggestions />\n          </div>\n\n          {tweetLength > 200 && (\n            <div className={styles.counter}>\n              <CharCounter editorState={editorState} limit={280} /> / 280\n            </div>\n          )}\n        </div>\n        <Button preset=\"accent4\" disabled={sending || tweetLength > 280} onClick={onSend}>\n          {sending ? (\n            <FormattedMessage id=\"tweet-editor-modal.sending-tweet\" defaultMessage=\"Sending Tweet...\" />\n          ) : (\n            <FormattedMessage id=\"tweet-editor-modal.tweet-button\" defaultMessage=\"Tweet\" />\n          )}\n        </Button>\n      </Column>\n    </Modal>\n  );\n}\n\nTweetEditorModal.propTypes = {\n  editorRef: PropTypes.any,\n  editorState: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  sending: PropTypes.bool,\n  mediaThumbnailUrl: PropTypes.string,\n  contentSubtype: PropTypes.string,\n  onClickEditor: PropTypes.func,\n  onSend: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React, { useRef, useEffect, useState, useCallback, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TweetEditorModal } from \"./TweetEditorModal\";\nimport { Modifier, EditorState } from \"draft-js\";\nimport { createEditorStateWithText } from \"draft-js-plugins-editor\";\nimport { fetchReticulumAuthenticated } from \"../../utils/phoenix-utils\";\nimport { scaledThumbnailUrlFor } from \"../../utils/media-url-utils\";\n\n// Taken from draft-js-emoji\nconst addEmoji = (emoji, editorState) => {\n  const contentState = editorState.getCurrentContent();\n  const contentStateWithEntity = contentState.createEntity(\"emoji\", \"IMMUTABLE\", { emojiUnicode: emoji });\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  const currentSelectionState = editorState.getSelection();\n\n  let emojiAddedContent;\n  let emojiEndPos = 0;\n  let blockSize = 0;\n\n  // in case text is selected it is removed and then the emoji is added\n  const afterRemovalContentState = Modifier.removeRange(contentState, currentSelectionState, \"backward\");\n\n  // deciding on the position to insert emoji\n  const targetSelection = afterRemovalContentState.getSelectionAfter();\n\n  emojiAddedContent = Modifier.insertText(afterRemovalContentState, targetSelection, emoji, null, entityKey);\n\n  emojiEndPos = targetSelection.getAnchorOffset();\n  const blockKey = targetSelection.getAnchorKey();\n  blockSize = contentState.getBlockForKey(blockKey).getLength();\n\n  // If the emoji is inserted at the end, a space is appended right after for\n  // a smooth writing experience.\n  if (emojiEndPos === blockSize) {\n    emojiAddedContent = Modifier.insertText(emojiAddedContent, emojiAddedContent.getSelectionAfter(), \" \");\n  }\n\n  const newEditorState = EditorState.push(editorState, emojiAddedContent, \"insert-emoji\");\n  return EditorState.forceSelection(newEditorState, emojiAddedContent.getSelectionAfter());\n};\n\nexport function TweetEditorModalContainer({ initialTweet, mediaUrl, contentSubtype, onClose }) {\n  const [editorState, setEditorState] = useState(() => createEditorStateWithText(initialTweet || \"\"));\n  const editorRef = useRef();\n\n  useEffect(() => {\n    // Other attempts at doing this resulted in no visible cursor or weird editor behavior:\n    setEditorState(editorState => addEmoji(\"🐤\", editorState));\n  }, []);\n\n  const [sending, setSending] = useState(false);\n\n  const sendTweet = useCallback(\n    async () => {\n      setSending(true);\n\n      try {\n        const body = editorState.getCurrentContent().getPlainText();\n        // For now assume url is a stored file media url\n        await fetchReticulumAuthenticated(\"/api/v1/twitter/tweets\", \"POST\", { media_stored_file_url: mediaUrl, body });\n      } catch (error) {\n        setSending(false);\n        console.error(error);\n      }\n\n      onClose();\n    },\n    [mediaUrl, editorState, onClose]\n  );\n\n  const mediaThumbnailUrl = useMemo(\n    () => {\n      return contentSubtype && !contentSubtype.startsWith(\"video\")\n        ? scaledThumbnailUrlFor(mediaUrl, 450, 255)\n        : mediaUrl;\n    },\n    [contentSubtype, mediaUrl]\n  );\n\n  return (\n    <TweetEditorModal\n      editorState={editorState}\n      editorRef={editorRef}\n      onClose={onClose}\n      sending={sending}\n      onSend={sendTweet}\n      onChange={setEditorState}\n      mediaThumbnailUrl={mediaThumbnailUrl}\n      contentSubtype={contentSubtype}\n    />\n  );\n}\n\nTweetEditorModalContainer.propTypes = {\n  mediaUrl: PropTypes.string,\n  contentSubtype: PropTypes.string,\n  initialTweet: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n};\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"../modal/Modal\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Button } from \"../input/Button\";\nimport { Column } from \"../layout/Column\";\n\nexport function TwitterOAuthModal({ appName, onConnect, onClose }) {\n  return (\n    <Modal\n      title={<FormattedMessage id=\"twitter-oauth-modal.title\" defaultMessage=\"Connect to Twitter\" />}\n      beforeTitle={<CloseButton onClick={onClose} />}\n    >\n      <Column padding center centerMd=\"both\" grow>\n        <p>\n          <FormattedMessage\n            id=\"twitter-oauth-modal.message\"\n            defaultMessage=\"Connect to Twitter to send tweets from {appName}.\"\n            values={{ appName }}\n          />\n        </p>\n        <Button preset=\"accent4\" onClick={onConnect}>\n          <FormattedMessage id=\"twitter-oauth-modal.connect-button\" defaultMessage=\"Connect to Twitter\" />\n        </Button>\n      </Column>\n    </Modal>\n  );\n}\n\nTwitterOAuthModal.propTypes = {\n  appName: PropTypes.string.isRequired,\n  onConnect: PropTypes.func,\n  onClose: PropTypes.func\n};\n","import React, { useCallback, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TwitterOAuthModal } from \"./TwitterOAuthModal\";\nimport configs from \"../../utils/configs\";\n\nexport function TwitterOAuthModalContainer({ hubChannel, onConnected, onClose, isAdmin }) {\n  const popupRef = useRef();\n\n  const onConnect = useCallback(\n    async () => {\n      try {\n        if (popupRef.current) {\n          popupRef.current.close();\n        }\n\n        const url = await hubChannel.getTwitterOAuthURL();\n\n        const width = 600;\n        const height = 760;\n        const left = (window.innerWidth - width) / 2 + window.screenLeft;\n        const top = (window.innerHeight - height) / 2 + window.screenTop;\n\n        window.doingTwitterOAuth = true;\n\n        const popup = window.open(\n          url,\n          \"_blank\",\n          `resizable=yes,width=${width},height=${height},left=${left},top=${top}toolbar=no,titlebar=no,menubar=no,scrollbars=yes`\n        );\n        popup.focus();\n        popupRef.current = popup;\n      } catch (error) {\n        console.error(error);\n        if (error.message === \"twitter_api_error\" && isAdmin) {\n          console.warn(\n            \"Twitter might be misconfigured for Hubs Cloud. Check the docs here: https://hubs.mozilla.com/docs/hubs-cloud-third-party-integrations.html#twitter\"\n          );\n        }\n        onClose();\n      }\n    },\n    [hubChannel, isAdmin, onClose]\n  );\n\n  useEffect(\n    () => {\n      function onMessage({ data }) {\n        if (data === \"oauth-successful\") {\n          onConnected();\n          popupRef.current = null;\n          delete window.doingTwitterOAuth;\n          window.removeEventListener(\"message\", onMessage);\n        }\n      }\n\n      window.addEventListener(\"message\", onMessage);\n\n      return () => {\n        if (popupRef.current) {\n          popupRef.current.close();\n        }\n\n        delete window.doingTwitterOAuth;\n        window.removeEventListener(\"message\", onMessage);\n      };\n    },\n    [onConnected]\n  );\n\n  return <TwitterOAuthModal appName={configs.translation(\"app-name\")} onConnect={onConnect} onClose={onClose} />;\n}\n\nTwitterOAuthModalContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  onConnected: PropTypes.func.isRequired,\n  onClose: PropTypes.func,\n  isAdmin: PropTypes.bool\n};\n","import React, { useCallback, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TweetEditorModalContainer } from \"./TweetEditorModalContainer\";\nimport { TwitterOAuthModalContainer } from \"./TwitterOAuthModalContainer\";\nimport configs from \"../../utils/configs\";\n\nexport function TweetModalContainer({ hubChannel, initialTweet, mediaUrl, contentSubtype, onClose, isAdmin }) {\n  const [canTweet, setCanTweet] = useState(hubChannel.can(\"tweet\"));\n\n  const onConnected = useCallback(() => {\n    setCanTweet(true);\n  }, []);\n\n  if (canTweet) {\n    return (\n      <TweetEditorModalContainer\n        initialTweet={initialTweet}\n        mediaUrl={mediaUrl}\n        contentSubtype={contentSubtype}\n        onClose={onClose}\n      />\n    );\n  } else {\n    return (\n      <TwitterOAuthModalContainer\n        appName={configs.translation(\"app-name\")}\n        hubChannel={hubChannel}\n        onConnected={onConnected}\n        onClose={onClose}\n        isAdmin={isAdmin}\n      />\n    );\n  }\n}\n\nTweetModalContainer.propTypes = {\n  hubChannel: PropTypes.object.isRequired,\n  initialTweet: PropTypes.string,\n  mediaUrl: PropTypes.string,\n  contentSubtype: PropTypes.string,\n  onClose: PropTypes.func,\n  isAdmin: PropTypes.bool\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Tip.scss\";\n\nexport function Tip({ className, children, onDismiss, dismissLabel, ...rest }) {\n  return (\n    <div className={classNames(styles.tip, className)} {...rest}>\n      <div className={styles.content}>{children}</div>\n      {onDismiss && (\n        <button className={styles.dismissButton} onClick={onDismiss}>\n          {dismissLabel}\n        </button>\n      )}\n    </div>\n  );\n}\n\nTip.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n  onDismiss: PropTypes.func,\n  dismissLabel: PropTypes.node\n};\n","import React, { useCallback, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage, useIntl, defineMessages } from \"react-intl\";\nimport { Tip } from \"./Tip\";\nimport { useEffect } from \"react\";\nimport { discordBridgesForPresences, hasEmbedPresences } from \"../../utils/phoenix-utils\";\nimport configs from \"../../utils/configs\";\n\n// These keys are hardcoded in the input system to be based on the physical location on the keyboard rather than character\nlet moveKeys = \"W A S D\";\nlet turnLeftKey = \"Q\";\nlet turnRightKey = \"E\";\n\n// TODO The API to map from physical key to character is experimental. Depending on prospects of this getting wider\n// implimentation we may want to cook up our own polyfill based on observing key inputs\nif (window.navigator.keyboard !== undefined && window.navigator.keyboard.getLayoutMap) {\n  window.navigator.keyboard\n    .getLayoutMap()\n    .then(function(map) {\n      moveKeys = `${map.get(\"KeyW\") || \"W\"} ${map.get(\"KeyA\") || \"A\"} ${map.get(\"KeyS\") || \"S\"} ${map.get(\"KeyD\") ||\n        \"D\"}`.toUpperCase();\n      turnLeftKey = map.get(\"KeyQ\")?.toUpperCase();\n      turnRightKey = map.get(\"KeyE\")?.toUpperCase();\n    })\n    .catch(function(e) {\n      // This occurs on Chrome 93 when the Hubs page is in an iframe\n      console.warn(`Unable to remap keyboard: ${e}`);\n    });\n}\n\nconst onboardingMessages = defineMessages({\n  \"tips.mobile.look\": {\n    id: \"tips.mobile.look\",\n    defaultMessage: \"Welcome! 👋 Tap and drag to look around.\"\n  },\n  \"tips.mobile.locomotion\": {\n    id: \"tips.mobile.locomotion\",\n    defaultMessage: \"Great! To move, pinch with two fingers.\"\n  },\n  \"tips.mobile.invite\": {\n    id: \"tips.mobile.invite\",\n    defaultMessage: \"Use the Invite button in the bottom left to share this room.\"\n  },\n  \"tips.desktop.look\": {\n    id: \"tips.desktop.look\",\n    defaultMessage: \"Welcome to {appName}! Let's take a quick tour. 👋 Click and drag to look around.\"\n  },\n  \"tips.desktop.locomotion\": {\n    id: \"tips.desktop.locomotion\",\n    defaultMessage: \"Use the {moveKeys} keys to move. Hold shift to boost.\"\n  },\n  \"tips.desktop.turning\": {\n    id: \"tips.desktop.turning\",\n    defaultMessage: \"Perfect. Use the {turnLeftKey} and {turnRightKey} keys to rotate.\"\n  },\n  \"tips.desktop.invite\": {\n    id: \"tips.desktop.invite\",\n    defaultMessage: \"Nobody else is here. Use the invite button in the bottom left to share this room.\"\n  }\n});\n\nfunction OkDismissLabel() {\n  return <FormattedMessage id=\"tips.dismiss.ok\" defaultMessage=\"Ok\" />;\n}\n\nfunction SkipDismissLabel() {\n  return <FormattedMessage id=\"tips.dismiss.skip\" defaultMessage=\"Skip\" />;\n}\n\nexport function FullscreenTip(props) {\n  return (\n    <Tip {...props} dismissLabel={<OkDismissLabel />}>\n      <FormattedMessage id=\"tips.fullscreen\" defaultMessage=\"Entered fullscreen mode. Press Escape to show UI.\" />\n    </Tip>\n  );\n}\n\nexport function TipContainer({ hide, inLobby, inRoom, isStreaming, isEmbedded, scene, store, hubId, presences }) {\n  const intl = useIntl();\n  const [lobbyTipDismissed, setLobbyTipDismissed] = useState(false);\n  const [broadcastTipDismissed, setBroadcastTipDismissed] = useState(() =>\n    store.state.confirmedBroadcastedRooms.includes(hubId)\n  );\n  const [streamingTipDismissed, setStreamingTipDismissed] = useState(false);\n  const [embeddedTipDismissed, setEmbeddedTipDismissed] = useState(false);\n  const [onboardingTipId, setOnboardingTipId] = useState(null);\n\n  const onSkipOnboarding = useCallback(\n    () => {\n      scene.systems.tips.skipTips();\n    },\n    [scene]\n  );\n\n  useEffect(\n    () => {\n      function onSceneTipChanged({ detail: tipId }) {\n        setOnboardingTipId(tipId);\n      }\n\n      scene.addEventListener(\"tip-changed\", onSceneTipChanged);\n\n      setOnboardingTipId(scene.systems.tips.activeTip);\n    },\n    [scene]\n  );\n\n  const discordBridges = presences ? discordBridgesForPresences(presences) : [];\n  const isBroadcasting = discordBridges.length > 0;\n\n  // TODO: This only exists because we store local state in this component.\n  // If we move tip state to a context then we can remove this and not render this component at all.\n  if (hide) {\n    return null;\n  }\n\n  if (inLobby) {\n    if (lobbyTipDismissed) {\n      return null;\n    }\n\n    return (\n      <Tip onDismiss={() => setLobbyTipDismissed(true)} dismissLabel={<OkDismissLabel />}>\n        <FormattedMessage id=\"tips.lobby\" defaultMessage=\"You're in the lobby. Others cannot see or hear you.\" />\n      </Tip>\n    );\n  } else if (inRoom) {\n    if (onboardingTipId) {\n      return (\n        <Tip onDismiss={onSkipOnboarding} dismissLabel={<SkipDismissLabel />}>\n          {intl.formatMessage(onboardingMessages[onboardingTipId], {\n            appName: configs.translation(\"app-name\"),\n            moveKeys,\n            turnLeftKey,\n            turnRightKey\n          })}\n        </Tip>\n      );\n    }\n\n    if (isStreaming && !streamingTipDismissed) {\n      return (\n        <Tip onDismiss={() => setStreamingTipDismissed(true)} dismissLabel={<OkDismissLabel />}>\n          <FormattedMessage\n            id=\"tips.streaming\"\n            defaultMessage=\"Now broadcasting to the lobby. Exit streamer mode in the more menu when you're done.\"\n          />\n        </Tip>\n      );\n    }\n\n    if (isBroadcasting && !broadcastTipDismissed) {\n      return (\n        <Tip onDismiss={() => setBroadcastTipDismissed(true)} dismissLabel={<OkDismissLabel />}>\n          <FormattedMessage\n            id=\"tips.discord\"\n            defaultMessage=\"Chat in this room is being bridged to {broadcastTarget} on Discord.\"\n            values={{ broadcastTarget: discordBridges.map(channelName => \"#\" + channelName).join(\", \") }}\n          />\n        </Tip>\n      );\n    }\n\n    if ((isEmbedded || hasEmbedPresences(presences)) && !embeddedTipDismissed) {\n      return (\n        <Tip onDismiss={() => setEmbeddedTipDismissed(true)} dismissLabel={<OkDismissLabel />}>\n          <FormattedMessage\n            id=\"tips.embedded\"\n            defaultMessage=\"This room is embedded, so it may be visible to visitors on other websites.\"\n          />\n        </Tip>\n      );\n    }\n\n    return null;\n  }\n\n  return null;\n}\n\nTipContainer.propTypes = {\n  hide: PropTypes.bool,\n  inLobby: PropTypes.bool,\n  inRoom: PropTypes.bool,\n  isStreaming: PropTypes.bool,\n  isEmbedded: PropTypes.bool,\n  scene: PropTypes.object.isRequired,\n  store: PropTypes.object.isRequired,\n  hubId: PropTypes.string,\n  presences: PropTypes.object\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./SpectatingLabel.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function SpectatingLabel({ name }) {\n  return (\n    <div className={styles.label}>\n      <b>\n        <FormattedMessage id=\"spectating-label.label\" defaultMessage=\"Spectating\" />\n      </b>\n      <p>{name}</p>\n    </div>\n  );\n}\n\nSpectatingLabel.propTypes = {\n  name: PropTypes.string\n};\n","import React, { Component, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { FormattedMessage } from \"react-intl\";\nimport screenfull from \"screenfull\";\n\nimport configs from \"../utils/configs\";\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport { canShare } from \"../utils/share\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport styleUtils from \"./styles/style-utils.scss\";\nimport { ReactAudioContext } from \"./wrap-with-audio\";\nimport {\n  pushHistoryState,\n  clearHistoryState,\n  popToBeginningOfHubHistory,\n  navigateToPriorPage,\n  sluglessPath\n} from \"../utils/history\";\nimport StateRoute from \"./state-route.js\";\nimport { getPresenceProfileForSession, hubUrl } from \"../utils/phoenix-utils\";\nimport { getMicrophonePresences } from \"../utils/microphone-presence\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\nimport { isIOS } from \"../utils/is-mobile\";\n\nimport ProfileEntryPanel from \"./profile-entry-panel\";\nimport MediaBrowserContainer from \"./media-browser\";\n\nimport EntryStartPanel from \"./entry-start-panel.js\";\nimport AvatarEditor from \"./avatar-editor\";\nimport PreferencesScreen from \"./preferences-screen.js\";\nimport PresenceLog from \"./presence-log.js\";\nimport PreloadOverlay from \"./preload-overlay.js\";\nimport RTCDebugPanel from \"./debug-panel/RtcDebugPanel.js\";\nimport { showFullScreenIfAvailable, showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { handleExitTo2DInterstitial, exit2DInterstitialAndEnterVR, isIn2DInterstitial } from \"../utils/vr-interstitial\";\nimport maskEmail from \"../utils/mask-email\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { LoadingScreenContainer } from \"./room/LoadingScreenContainer\";\n\nimport { RoomLayoutContainer } from \"./room/RoomLayoutContainer\";\nimport roomLayoutStyles from \"./layout/RoomLayout.scss\";\nimport { useAccessibleOutlineStyle } from \"./input/useAccessibleOutlineStyle\";\nimport { ToolbarButton } from \"./input/ToolbarButton\";\nimport { RoomEntryModal } from \"./room/RoomEntryModal\";\nimport { EnterOnDeviceModal } from \"./room/EnterOnDeviceModal\";\nimport { MicSetupModalContainer } from \"./room/MicSetupModalContainer\";\nimport { InvitePopoverContainer } from \"./room/InvitePopoverContainer\";\nimport { MoreMenuPopoverButton, CompactMoreMenuButton, MoreMenuContextProvider } from \"./room/MoreMenuPopover\";\nimport { ChatSidebarContainer, ChatContextProvider, ChatToolbarButtonContainer } from \"./room/ChatSidebarContainer\";\nimport { ContentMenu, PeopleMenuButton, ObjectsMenuButton } from \"./room/ContentMenu\";\nimport { ReactComponent as CameraIcon } from \"./icons/Camera.svg\";\nimport { ReactComponent as AvatarIcon } from \"./icons/Avatar.svg\";\nimport { ReactComponent as AddIcon } from \"./icons/Add.svg\";\nimport { ReactComponent as DeleteIcon } from \"./icons/Delete.svg\";\nimport { ReactComponent as FavoritesIcon } from \"./icons/Favorites.svg\";\nimport { ReactComponent as StarOutlineIcon } from \"./icons/StarOutline.svg\";\nimport { ReactComponent as StarIcon } from \"./icons/Star.svg\";\nimport { ReactComponent as SettingsIcon } from \"./icons/Settings.svg\";\nimport { ReactComponent as WarningCircleIcon } from \"./icons/WarningCircle.svg\";\nimport { ReactComponent as HomeIcon } from \"./icons/Home.svg\";\nimport { ReactComponent as TextDocumentIcon } from \"./icons/TextDocument.svg\";\nimport { ReactComponent as SupportIcon } from \"./icons/Support.svg\";\nimport { ReactComponent as ShieldIcon } from \"./icons/Shield.svg\";\nimport { ReactComponent as DiscordIcon } from \"./icons/Discord.svg\";\nimport { ReactComponent as VRIcon } from \"./icons/VR.svg\";\nimport { ReactComponent as LeaveIcon } from \"./icons/Leave.svg\";\nimport { ReactComponent as EnterIcon } from \"./icons/Enter.svg\";\nimport { ReactComponent as InviteIcon } from \"./icons/Invite.svg\";\nimport { PeopleSidebarContainer, userFromPresence } from \"./room/PeopleSidebarContainer\";\nimport { ObjectListProvider } from \"./room/useObjectList\";\nimport { ObjectsSidebarContainer } from \"./room/ObjectsSidebarContainer\";\nimport { ObjectMenuContainer } from \"./room/ObjectMenuContainer\";\nimport { useCssBreakpoints } from \"react-use-css-breakpoints\";\nimport { PlacePopoverContainer } from \"./room/PlacePopoverContainer\";\nimport { SharePopoverContainer } from \"./room/SharePopoverContainer\";\nimport { AudioPopoverContainer } from \"./room/AudioPopoverContainer\";\nimport { ReactionPopoverContainer } from \"./room/ReactionPopoverContainer\";\nimport { SafariMicModal } from \"./room/SafariMicModal\";\nimport { RoomSignInModalContainer } from \"./auth/RoomSignInModalContainer\";\nimport { SignInStep } from \"./auth/SignInModal\";\nimport { LeaveReason, LeaveRoomModal } from \"./room/LeaveRoomModal\";\nimport { RoomSidebar } from \"./room/RoomSidebar\";\nimport { RoomSettingsSidebarContainer } from \"./room/RoomSettingsSidebarContainer\";\nimport { AutoExitWarningModal, AutoExitReason } from \"./room/AutoExitWarningModal\";\nimport { ExitReason } from \"./room/ExitedRoomScreen\";\nimport { UserProfileSidebarContainer } from \"./room/UserProfileSidebarContainer\";\nimport { CloseRoomModal } from \"./room/CloseRoomModal\";\nimport { WebVRUnsupportedModal } from \"./room/WebVRUnsupportedModal\";\nimport { TweetModalContainer } from \"./room/TweetModalContainer\";\nimport { TipContainer, FullscreenTip } from \"./room/TipContainer\";\nimport { SpectatingLabel } from \"./room/SpectatingLabel\";\nimport { SignInMessages } from \"./auth/SignInModal\";\nimport { MediaDevicesEvents } from \"../utils/media-devices-utils\";\n\nconst avatarEditorDebug = qsTruthy(\"avatarEditorDebug\");\n\nconst IN_ROOM_MODAL_ROUTER_PATHS = [\"/media\"];\nconst IN_ROOM_MODAL_QUERY_VARS = [\"media_source\"];\n\nconst LOBBY_MODAL_ROUTER_PATHS = [\"/media/scenes\", \"/media/avatars\", \"/media/favorites\"];\nconst LOBBY_MODAL_QUERY_VARS = [\"media_source\"];\nconst LOBBY_MODAL_QUERY_VALUES = [\"scenes\", \"avatars\", \"favorites\"];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nclass UIRoot extends Component {\n  willCompileAndUploadMaterials = false;\n\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    disableAutoExitOnIdle: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hub: PropTypes.object,\n    availableVREntryTypes: PropTypes.object,\n    checkingForDeviceAvailability: PropTypes.bool,\n    environmentSceneLoaded: PropTypes.bool,\n    entryDisallowed: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    hubIsBound: PropTypes.bool,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsFavorited: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessage: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    onSignInDialogVisibilityChanged: PropTypes.func,\n    showSafariMicDialog: PropTypes.bool,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    onAvatarSaved: PropTypes.func,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    showInterstitialPrompt: PropTypes.bool,\n    onInterstitialPromptClicked: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    hide: PropTypes.bool,\n    showPreload: PropTypes.bool,\n    onPreloadLoadClicked: PropTypes.func,\n    embed: PropTypes.bool,\n    embedToken: PropTypes.string,\n    onLoaded: PropTypes.func,\n    activeObject: PropTypes.object,\n    selectedObject: PropTypes.object,\n    breakpoint: PropTypes.string\n  };\n\n  state = {\n    enterInVR: false,\n    entered: false,\n    entering: false,\n    dialog: null,\n    showShareDialog: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    didConnectToNetworkedScene: false,\n    noMoreLoadingUpdates: false,\n    hideLoader: false,\n    showPrefs: false,\n    watching: false,\n    isStreaming: false,\n\n    waitingOnAudio: false,\n    audioTrackClone: null,\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    autoExitReason: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    signedIn: false,\n    videoShareMediaSource: null,\n    showVideoShareFailed: false,\n\n    objectInfo: null,\n    objectSrc: \"\",\n    sidebarId: null,\n    presenceCount: 0,\n    chatInputEffect: () => {}\n  };\n\n  constructor(props) {\n    super(props);\n\n    props.mediaSearchStore.setHistory(props.history);\n\n    // An exit handler that discards event arguments and can be cleaned up.\n    this.exitEventHandler = () => this.props.exitScene();\n    this.mediaDevicesManager = APP.mediaDevicesManager;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog) {\n      if (showSignInDialog) {\n        this.showContextualSignInDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n    if (!this.willCompileAndUploadMaterials && this.state.noMoreLoadingUpdates) {\n      this.willCompileAndUploadMaterials = true;\n      // We want to ensure that react and the browser have had the chance to render / update.\n      // See https://stackoverflow.com/a/34999925 , although our solution flipped setTimeout and requestAnimationFrame\n      window.requestAnimationFrame(() => {\n        window.setTimeout(() => {\n          if (!this.props.isBotMode) {\n            try {\n              this.props.scene.renderer.compile(this.props.scene.object3D, this.props.scene.camera);\n              this.props.scene.object3D.traverse(obj => {\n                if (!obj.material) {\n                  return;\n                }\n                const materials = Array.isArray(obj.material) ? obj.material : [obj.material];\n                for (const material of materials) {\n                  for (const prop in material) {\n                    if (material[prop] && material[prop].isTexture) {\n                      this.props.scene.renderer.initTexture(material[prop]);\n                    }\n                  }\n                }\n              });\n            } catch (e) {\n              console.error(e);\n              this.props.exitScene(ExitReason.sceneError); // https://github.com/mozilla/hubs/issues/1950\n            }\n          }\n\n          if (!this.state.hideLoader) {\n            this.setState({ hideLoader: true });\n          }\n        }, 0);\n      });\n    }\n\n    if (!this.props.selectedObject || !prevProps.selectedObject) {\n      const sceneEl = this.props.scene;\n\n      if (this.props.selectedObject) {\n        sceneEl.classList.add(roomLayoutStyles.sceneSmFullScreen);\n      } else {\n        sceneEl.classList.remove(roomLayoutStyles.sceneSmFullScreen);\n      }\n    }\n\n    if (this.state.presenceCount != this.occupantCount()) {\n      this.setState({ presenceCount: this.occupantCount() });\n    }\n  }\n\n  onConcurrentLoad = () => {\n    if (qsTruthy(\"allow_multi\") || this.props.store.state.preferences.allowMultipleHubsInstances) return;\n    this.startAutoExitTimer(AutoExitReason.concurrentSession);\n  };\n\n  onIdleDetected = () => {\n    if (\n      this.props.disableAutoExitOnIdle ||\n      this.state.isStreaming ||\n      this.props.store.state.preferences.disableIdleDetection\n    )\n      return;\n    this.startAutoExitTimer(AutoExitReason.idle);\n  };\n\n  onActivityDetected = () => {\n    if (this.state.autoExitTimerInterval) {\n      this.endAutoExitTimer();\n    }\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    window.addEventListener(\"idle_detected\", this.onIdleDetected);\n    window.addEventListener(\"activity_detected\", this.onActivityDetected);\n    window.addEventListener(\"focus_chat\", this.onFocusChat);\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.showShareDialog) {\n        this.setState({ showShareDialog: false });\n      }\n    });\n\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.scene.addEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.addEventListener(\"action_exit_watch\", () => {\n      if (this.state.hide) {\n        this.setState({ hide: false, hideUITip: false });\n      } else {\n        this.setState({ watching: false });\n      }\n    });\n    this.props.scene.addEventListener(\"action_toggle_ui\", () =>\n      this.setState({ hide: !this.state.hide, hideUITip: false })\n    );\n    this.props.scene.addEventListener(\"devicechange\", () => {\n      this.forceUpdate();\n    });\n\n    const scene = this.props.scene;\n\n    const unsubscribe = this.props.history.listen((location, action) => {\n      const state = location.state;\n\n      // If we just hit back into the entry flow, just go back to the page before the room landing page.\n      if (action === \"POP\" && state && state.entry_step && this.state.entered) {\n        unsubscribe();\n        navigateToPriorPage(this.props.history);\n        return;\n      }\n    });\n\n    // If we refreshed the page with any state history (eg if we were in the entry flow\n    // or had a modal/overlay open) just reset everything to the beginning of the flow by\n    // erasing all history that was accumulated for this room (including across refreshes.)\n    //\n    // We don't do this for the media browser case, since we want to be able to share\n    // links to the browser pages\n    if (this.props.history.location.state && !sluglessPath(this.props.history.location).startsWith(\"/media\")) {\n      popToBeginningOfHubHistory(this.props.history);\n    }\n\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n\n    if (this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\")) {\n      this.props.scene.addEventListener(\n        \"loading_finished\",\n        () => {\n          console.log(\"Loading has finished. Checking for forced room entry\");\n          setTimeout(() => this.handleForceEntry(), 1000);\n        },\n        { once: true }\n      );\n    }\n\n    this.playerRig = scene.querySelector(\"#avatar-rig\");\n\n    scene.addEventListener(\"action_media_tweet\", this.onTweet);\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.removeEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.scene.removeEventListener(\"action_media_tweet\", this.onTweet);\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    window.removeEventListener(\"concurrentload\", this.onConcurrentLoad);\n    window.removeEventListener(\"idle_detected\", this.onIdleDetected);\n    window.removeEventListener(\"activity_detected\", this.onActivityDetected);\n    window.removeEventListener(\"focus_chat\", this.onFocusChat);\n  }\n\n  storeUpdated = () => {\n    this.forceUpdate();\n  };\n\n  showContextualSignInDialog = () => {\n    const { signInMessage, authChannel } = this.props;\n    const onCallback = () => {\n      const { onContinueAfterSignIn } = this.props;\n      (onContinueAfterSignIn && onContinueAfterSignIn()) || this.closeDialog();\n    };\n    this.showNonHistoriedDialog(RoomSignInModalContainer, {\n      step: SignInStep.submit,\n      message: signInMessage,\n      onSubmitEmail: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(RoomSignInModalContainer, {\n          step: SignInStep.waitForVerification,\n          onClose: onCallback\n        });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showNonHistoriedDialog(RoomSignInModalContainer, {\n          step: SignInStep.complete,\n          onClose: onCallback,\n          onContinue: onCallback\n        });\n      },\n      onClose: onCallback\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  toggleFavorited = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      () => {\n        const isFavorited = this.isFavorited();\n\n        this.props.hubChannel[isFavorited ? \"unfavorite\" : \"favorite\"]();\n        this.setState({ isFavorited: !isFavorited });\n      },\n      SignInMessages.favoriteRoom\n    );\n  };\n\n  isFavorited = () => {\n    return this.state.isFavorited !== undefined ? this.state.isFavorited : this.props.initialIsFavorited;\n  };\n\n  onLoadingFinished = () => {\n    console.log(\"UI root loading has finished\");\n    this.setState({ noMoreLoadingUpdates: true });\n    this.props.scene.emit(\"loading_finished\");\n\n    if (this.props.onLoaded) {\n      this.props.onLoaded();\n    }\n  };\n\n  onSceneLoaded = () => {\n    console.log(\"UI root scene has loaded\");\n    this.setState({ sceneLoaded: true });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  onShareVideoFailed = () => {\n    this.setState({ showVideoShareFailed: true });\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(MediaDevicesEvents.VIDEO_SHARE_ENDED);\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleForceEntry = () => {\n    console.log(\"Forced entry type: \" + this.props.forcedVREntryType);\n\n    if (!this.props.forcedVREntryType) return;\n\n    if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  startAutoExitTimer = autoExitReason => {\n    if (this.state.autoExitTimerInterval) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval, autoExitReason });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.props.exitScene();\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      autoExitReason: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR, waitingOnAudio: true });\n\n    const hasGrantedMic = (await grantedMicLabels()).length > 0;\n\n    if (hasGrantedMic) {\n      if (!this.mediaDevicesManager.isMicShared) {\n        await this.mediaDevicesManager.startMicShare({});\n      }\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.onRequestMicPermission();\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n\n    this.setState({ waitingOnAudio: false });\n  };\n\n  enter2D = async () => {\n    console.log(\"Entering in 2D mode\");\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    console.log(\"Entering in VR mode\");\n    if (this.props.forcedVREntryType || this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.showNonHistoriedDialog(WebVRUnsupportedModal);\n    }\n  };\n\n  enterDaydream = async () => {\n    console.log(\"Entering in Daydream mode\");\n    await this.performDirectEntryFlow(true);\n  };\n\n  onRequestMicPermission = async () => {\n    await this.mediaDevicesManager.startMicShare({});\n  };\n\n  beginOrSkipAudioSetup = () => {\n    const skipAudioSetup = this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\");\n    if (skipAudioSetup) {\n      console.log(`Skipping audio setup (forcedVREntryType = ${this.props.forcedVREntryType})`);\n      this.onAudioReadyButton();\n    } else {\n      console.log(`Starting audio setup`);\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n  };\n\n  shouldShowFullScreen = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    return (isMobile || AFRAME.utils.device.isMobileVR()) && !isIOS() && !this.state.enterInVR && screenfull.enabled;\n  };\n\n  onAudioReadyButton = async () => {\n    if (!this.state.enterInVR) {\n      await showFullScreenIfAvailable();\n    }\n\n    // Push the new history state before going into VR, otherwise menu button will take us back\n    clearHistoryState(this.props.history);\n\n    const muteOnEntry = this.props.store.state.preferences.muteMicOnEntry;\n    await this.props.enterScene(this.state.enterInVR, muteOnEntry);\n\n    this.setState({ entered: true, entering: false, showShareDialog: false });\n\n    if (this.mediaDevicesManager.isMicShared) {\n      console.log(`Using microphone: ${this.mediaDevicesManager.selectedMicLabel}`);\n    }\n\n    if (this.mediaDevicesManager.isVideoShared) {\n      console.log(\"Screen sharing enabled.\");\n    }\n  };\n\n  attemptLink = async () => {\n    this.pushHistoryState(\"entry_step\", \"device\");\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => {\n      this.setState({ log: false, linkCode: null, linkCodeCancel: null });\n      this.props.exitScene();\n    });\n  };\n\n  toggleShareDialog = async () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: !this.state.showShareDialog });\n  };\n\n  closeDialog = () => {\n    if (this.state.dialog) {\n      this.setState({ dialog: null });\n    }\n\n    const { onSignInDialogVisibilityChanged } = this.props;\n    onSignInDialogVisibilityChanged && onSignInDialogVisibilityChanged(false);\n\n    if (isIn2DInterstitial()) {\n      exit2DInterstitialAndEnterVR();\n    } else {\n      showFullScreenIfWasFullScreen();\n    }\n  };\n\n  showNonHistoriedDialog = (DialogClass, props = {}) => {\n    const { onSignInDialogVisibilityChanged } = this.props;\n    onSignInDialogVisibilityChanged && onSignInDialogVisibilityChanged(true);\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  toggleStreamerMode = () => {\n    const isStreaming = !this.state.isStreaming;\n    this.props.scene.systems[\"hubs-systems\"].characterController.fly = isStreaming;\n\n    if (isStreaming) {\n      this.props.hubChannel.beginStreaming();\n    } else {\n      this.props.hubChannel.endStreaming();\n    }\n\n    this.setState({ isStreaming });\n  };\n\n  renderDialog = (DialogClass, props = {}) => <DialogClass {...{ onClose: this.closeDialog, ...props }} />;\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  onMiniInviteClicked = () => {\n    const link = `https://${configs.SHORTLINK_DOMAIN}/${this.props.hub.hub_id}`;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (canShare()) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = msg => {\n    this.props.onSendMessage(msg);\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  hasEmbedPresence = () => {\n    if (!this.props.presences) {\n      return false;\n    } else {\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.context && m.context.embed) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  onTweet = ({ detail }) => {\n    handleExitTo2DInterstitial(true, () => {}).then(() => {\n      this.props.performConditionalSignIn(\n        () => this.props.hubChannel.signedIn,\n        () => {\n          this.showNonHistoriedDialog(TweetModalContainer, {\n            hubChannel: this.props.hubChannel,\n            isAdmin: configs.isAdmin(),\n            ...detail\n          });\n        },\n        SignInMessages.tweet\n      );\n    });\n  };\n\n  onChangeScene = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.can(\"update_hub\"),\n      () => {\n        showFullScreenIfAvailable();\n        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n      },\n      SignInMessages.changeScene\n    );\n  };\n\n  pushHistoryState = (k, v) => pushHistoryState(this.props.history, k, v);\n\n  setSidebar(sidebarId, otherState) {\n    this.setState({ sidebarId, chatInputEffect: () => {}, selectedUserId: null, ...otherState });\n  }\n\n  toggleSidebar(sidebarId, otherState) {\n    this.setState(({ sidebarId: curSidebarId }) => {\n      const nextSidebarId = curSidebarId === sidebarId ? null : sidebarId;\n\n      return {\n        sidebarId: nextSidebarId,\n        selectedUserId: null,\n        ...otherState\n      };\n    });\n  }\n\n  onFocusChat = e => {\n    this.setSidebar(\"chat\", {\n      chatInputEffect: input => {\n        input.focus();\n        input.value = e.detail.prefix;\n      }\n    });\n  };\n\n  renderInterstitialPrompt = () => {\n    return (\n      <div className={styles.interstitial} onClick={() => this.props.onInterstitialPromptClicked()}>\n        <div>\n          <FormattedMessage id=\"ui-root.interstitial-prompt\" defaultMessage=\"Continue\" />\n        </div>\n      </div>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src={configs.image(\"logo\")} />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  onEnteringCanceled = () => {\n    this.props.hubChannel.sendEnteringCancelledEvent();\n    this.setState({ entering: false });\n  };\n\n  renderEntryStartPanel = () => {\n    const { hasAcceptedProfile, hasChangedName } = this.props.store.state.activity;\n    const promptForNameAndAvatarBeforeEntry = this.props.hubIsBound ? !hasAcceptedProfile : !hasChangedName;\n\n    // TODO: What does onEnteringCanceled do?\n    return (\n      <>\n        <RoomEntryModal\n          roomName={this.props.hub.name}\n          showJoinRoom={!this.state.waitingOnAudio && !this.props.entryDisallowed}\n          onJoinRoom={() => {\n            if (promptForNameAndAvatarBeforeEntry || !this.props.forcedVREntryType) {\n              this.setState({ entering: true });\n              this.props.hubChannel.sendEnteringEvent();\n\n              if (promptForNameAndAvatarBeforeEntry) {\n                this.pushHistoryState(\"entry_step\", \"profile\");\n              } else {\n                this.onRequestMicPermission();\n                this.pushHistoryState(\"entry_step\", \"audio\");\n              }\n            } else {\n              this.handleForceEntry();\n            }\n          }}\n          showEnterOnDevice={!this.state.waitingOnAudio && !this.props.entryDisallowed && !isMobileVR}\n          onEnterOnDevice={() => this.attemptLink()}\n          showSpectate={!this.state.waitingOnAudio}\n          onSpectate={() => this.setState({ watching: true })}\n          showOptions={this.props.hubChannel.canOrWillIfCreator(\"update_hub\")}\n          onOptions={() => {\n            this.props.performConditionalSignIn(\n              () => this.props.hubChannel.can(\"update_hub\"),\n              () => this.setSidebar(\"room-settings\"),\n              SignInMessages.roomSettings\n            );\n          }}\n        />\n        {!this.state.waitingOnAudio && (\n          <EntryStartPanel\n            hubChannel={this.props.hubChannel}\n            entering={this.state.entering}\n            onEnteringCanceled={this.onEnteringCanceled}\n          />\n        )}\n      </>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <EnterOnDeviceModal\n        shortUrl={configs.SHORTLINK_DOMAIN}\n        loadingCode={!this.state.linkCode}\n        code={this.state.linkCode}\n        headsetConnected={\n          this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n          this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no\n        }\n        unsupportedBrowser={this.props.availableVREntryTypes.generic === VR_DEVICE_AVAILABILITY.maybe}\n        onEnterOnConnectedHeadset={() => {\n          // TODO: This is bad. linkCodeCancel should be tied to component lifecycle not these callback methods.\n          this.state.linkCodeCancel();\n          this.setState({ linkCode: null, linkCodeCancel: null });\n          this.enterVR();\n        }}\n        onBack={() => {\n          if (this.state.linkCodeCancel) {\n            // If the back button is pressed rapidly\n            // (before link code generation finishes),\n            // linkCodeCancel will not be a function\n            // and attempting to call it will throw.\n            // TODO: If that happens it may be ideal to\n            // interrupt and cancel link code generation.\n            this.state.linkCodeCancel();\n          }\n          this.setState({ linkCode: null, linkCodeCancel: null });\n          this.props.history.goBack();\n        }}\n      />\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    // TODO: Show HMD mic not chosen warning\n    return (\n      <MicSetupModalContainer\n        scene={this.props.scene}\n        onEnterRoom={this.onAudioReadyButton}\n        onBack={() => this.props.history.goBack()}\n      />\n    );\n  };\n\n  isInModalOrOverlay = () => {\n    if (\n      this.state.entered &&\n      (IN_ROOM_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        IN_ROOM_MODAL_QUERY_VARS.find(x => new URLSearchParams(this.props.history.location.search).get(x)))\n    ) {\n      return true;\n    }\n\n    if (\n      !this.state.entered &&\n      (LOBBY_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        LOBBY_MODAL_QUERY_VARS.find(\n          (x, i) => new URLSearchParams(this.props.history.location.search).get(x) === LOBBY_MODAL_QUERY_VALUES[i]\n        ))\n    ) {\n      return true;\n    }\n\n    if (this.state.objectInfo && this.state.objectInfo.object3D) {\n      return true; // TODO: Get object info dialog to use history\n    }\n    if (this.state.sidebarId !== null) {\n      return true;\n    }\n\n    return !!(\n      (this.props.history &&\n        this.props.history.location.state &&\n        (this.props.history.location.state.modal || this.props.history.location.state.overlay)) ||\n      this.state.dialog\n    );\n  };\n\n  getSelectedUser() {\n    const selectedUserId = this.state.selectedUserId;\n    const presence = this.props.presences[selectedUserId];\n    const micPresences = getMicrophonePresences();\n    return userFromPresence(selectedUserId, presence, micPresences, this.props.sessionId);\n  }\n\n  render() {\n    const isGhost =\n      configs.feature(\"enable_lobby_ghosts\") && (this.state.watching || (this.state.hide || this.props.hide));\n    const hide = this.state.hide || this.props.hide;\n\n    const rootStyles = {\n      [styles.ui]: true,\n      \"ui-root\": true,\n      \"in-modal-or-overlay\": this.isInModalOrOverlay(),\n      isGhost,\n      hide\n    };\n    if (this.props.hide || this.state.hide) {\n      return (\n        <div className={classNames(rootStyles)}>\n          <RoomLayoutContainer\n            scene={this.props.scene}\n            store={this.props.store}\n            viewport={!this.state.hideUITip && <FullscreenTip onDismiss={() => this.setState({ hideUITip: true })} />}\n          />\n        </div>\n      );\n    }\n\n    if (this.props.showSafariMicDialog) {\n      return (\n        <div className={classNames(rootStyles)}>\n          <RoomLayoutContainer scene={this.props.scene} store={this.props.store} modal={<SafariMicModal />} />\n        </div>\n      );\n    }\n\n    const preload = this.props.showPreload;\n\n    const isLoading = !preload && !this.state.hideLoader;\n\n    if (isLoading && this.state.showPrefs) {\n      return (\n        <div>\n          <LoadingScreenContainer scene={this.props.scene} onLoaded={this.onLoadingFinished} />\n          <PreferencesScreen\n            onClose={() => {\n              this.setState({ showPrefs: false });\n            }}\n            store={this.props.store}\n            scene={this.props.scene}\n          />\n        </div>\n      );\n    }\n    if (this.props.isBotMode) return this.renderBotMode();\n    if (isLoading) {\n      return <LoadingScreenContainer scene={this.props.scene} onLoaded={this.onLoadingFinished} />;\n    }\n    if (this.state.showPrefs) {\n      return (\n        <PreferencesScreen\n          onClose={() => {\n            this.setState({ showPrefs: false });\n          }}\n          store={this.props.store}\n          scene={this.props.scene}\n        />\n      );\n    }\n\n    if (this.props.showInterstitialPrompt) return this.renderInterstitialPrompt();\n\n    const entered = this.state.entered;\n    const watching = this.state.watching;\n    const enteredOrWatching = entered || watching;\n    const showRtcDebugPanel = this.props.store.state.preferences.showRtcDebugPanel;\n    const showAudioDebugPanel = this.props.store.state.preferences.showAudioDebugPanel;\n    const displayNameOverride = this.props.hubIsBound\n      ? getPresenceProfileForSession(this.props.presences, this.props.sessionId).displayName\n      : null;\n\n    const enableSpectateVRButton =\n      configs.feature(\"enable_lobby_ghosts\") &&\n      isGhost &&\n      !hide &&\n      this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no;\n\n    const entryDialog =\n      this.props.availableVREntryTypes &&\n      !preload &&\n      (this.isWaitingForAutoExit() ? (\n        <AutoExitWarningModal\n          reason={this.state.autoExitReason}\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"device\" history={this.props.history}>\n            {this.renderDevicePanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"audio\" history={this.props.history}>\n            {this.renderAudioSetupPanel()}\n          </StateRoute>\n          <StateRoute\n            stateKey=\"entry_step\"\n            stateValue=\"profile\"\n            history={this.props.history}\n            render={props => (\n              <ProfileEntryPanel\n                {...props}\n                containerType=\"modal\"\n                displayNameOverride={displayNameOverride}\n                finished={() => {\n                  if (this.props.forcedVREntryType) {\n                    this.pushHistoryState();\n                    this.handleForceEntry();\n                  } else {\n                    this.onRequestMicPermission();\n                    this.pushHistoryState(\"entry_step\", \"audio\");\n                  }\n                }}\n                showBackButton\n                onBack={() => this.pushHistoryState()}\n                store={this.props.store}\n                mediaSearchStore={this.props.mediaSearchStore}\n                avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n              />\n            )}\n          />\n          <StateRoute stateKey=\"entry_step\" stateValue=\"\" history={this.props.history}>\n            {this.renderEntryStartPanel()}\n          </StateRoute>\n        </>\n      ));\n\n    const presenceLogEntries = this.props.presenceLogEntries || [];\n\n    const mediaSource = this.props.mediaSearchStore.getUrlMediaSource(this.props.history.location);\n\n    // Allow scene picker pre-entry, otherwise wait until entry\n    const showMediaBrowser =\n      mediaSource && ([\"scenes\", \"avatars\", \"favorites\"].includes(mediaSource) || this.state.entered);\n\n    const streaming = this.state.isStreaming;\n\n    const showObjectList = enteredOrWatching;\n\n    const streamer = getCurrentStreamer();\n    const streamerName = streamer && streamer.displayName;\n\n    const renderEntryFlow = (!enteredOrWatching && this.props.hub) || this.isWaitingForAutoExit();\n\n    const canCreateRoom = !configs.feature(\"disable_room_creation\") || configs.isAdmin();\n    const canCloseRoom = this.props.hubChannel && !!this.props.hubChannel.canOrWillIfCreator(\"close_hub\");\n    const isModerator = this.props.hubChannel && this.props.hubChannel.canOrWillIfCreator(\"kick_users\") && !isMobileVR;\n\n    const moreMenu = [\n      {\n        id: \"user\",\n        label: !this.state.signedIn ? (\n          <FormattedMessage id=\"more-menu.not-signed-in\" defaultMessage=\"You are not signed in\" />\n        ) : (\n          <FormattedMessage\n            id=\"more-menu.you-signed-in-as\"\n            defaultMessage=\"Signed in as: {email}\"\n            values={{ email: maskEmail(this.props.store.state.credentials.email) }}\n          />\n        ),\n        items: [\n          this.state.signedIn\n            ? {\n                id: \"sign-out\",\n                label: <FormattedMessage id=\"more-menu.sign-out\" defaultMessage=\"Sign Out\" />,\n                icon: LeaveIcon,\n                onClick: async () => {\n                  await this.props.authChannel.signOut(this.props.hubChannel);\n                  this.setState({ signedIn: false });\n                }\n              }\n            : {\n                id: \"sign-in\",\n                label: <FormattedMessage id=\"more-menu.sign-in\" defaultMessage=\"Sign In\" />,\n                icon: EnterIcon,\n                onClick: () => this.showContextualSignInDialog()\n              },\n          canCreateRoom && {\n            id: \"create-room\",\n            label: <FormattedMessage id=\"more-menu.create-room\" defaultMessage=\"Create Room\" />,\n            icon: AddIcon,\n            onClick: () =>\n              this.showNonHistoriedDialog(LeaveRoomModal, {\n                destinationUrl: \"/\",\n                reason: LeaveReason.createRoom\n              })\n          },\n          {\n            id: \"user-profile\",\n            label: <FormattedMessage id=\"more-menu.profile\" defaultMessage=\"Change Name & Avatar\" />,\n            icon: AvatarIcon,\n            onClick: () => this.setSidebar(\"profile\")\n          },\n          {\n            id: \"favorite-rooms\",\n            label: <FormattedMessage id=\"more-menu.favorite-rooms\" defaultMessage=\"Favorite Rooms\" />,\n            icon: FavoritesIcon,\n            onClick: () =>\n              this.props.performConditionalSignIn(\n                () => this.props.hubChannel.signedIn,\n                () => {\n                  showFullScreenIfAvailable();\n                  this.props.mediaSearchStore.sourceNavigateWithNoNav(\"favorites\", \"use\");\n                },\n                SignInMessages.favoriteRooms\n              )\n          },\n          {\n            id: \"preferences\",\n            label: <FormattedMessage id=\"more-menu.preferences\" defaultMessage=\"Preferences\" />,\n            icon: SettingsIcon,\n            onClick: () => this.setState({ showPrefs: true })\n          }\n        ].filter(item => item)\n      },\n      {\n        id: \"room\",\n        label: <FormattedMessage id=\"more-menu.room\" defaultMessage=\"Room\" />,\n        items: [\n          {\n            id: \"room-info\",\n            label: <FormattedMessage id=\"more-menu.room-info\" defaultMessage=\"Room Info and Settings\" />,\n            icon: HomeIcon,\n            onClick: () => this.setSidebar(\"room-info\")\n          },\n          (this.props.breakpoint === \"sm\" || this.props.breakpoint === \"md\") &&\n            (this.props.hub.entry_mode !== \"invite\" || this.props.hubChannel.can(\"update_hub\")) && {\n              id: \"invite\",\n              label: <FormattedMessage id=\"more-menu.invite\" defaultMessage=\"Invite\" />,\n              icon: InviteIcon,\n              onClick: () => this.props.scene.emit(\"action_invite\")\n            },\n          this.isFavorited()\n            ? {\n                id: \"unfavorite-room\",\n                label: <FormattedMessage id=\"more-menu.unfavorite-room\" defaultMessage=\"Unfavorite Room\" />,\n                icon: StarIcon,\n                onClick: () => this.toggleFavorited()\n              }\n            : {\n                id: \"favorite-room\",\n                label: <FormattedMessage id=\"more-menu.favorite-room\" defaultMessage=\"Favorite Room\" />,\n                icon: StarOutlineIcon,\n                onClick: () => this.toggleFavorited()\n              },\n          isModerator &&\n            entered && {\n              id: \"streamer-mode\",\n              label: streaming ? (\n                <FormattedMessage id=\"more-menu.exit-streamer-mode\" defaultMessage=\"Exit Streamer Mode\" />\n              ) : (\n                <FormattedMessage id=\"more-menu.enter-streamer-mode\" defaultMessage=\"Enter Streamer Mode\" />\n              ),\n              icon: CameraIcon,\n              onClick: () => this.toggleStreamerMode()\n            },\n          (this.props.breakpoint === \"sm\" || this.props.breakpoint === \"md\") &&\n            entered && {\n              id: \"leave-room\",\n              label: <FormattedMessage id=\"more-menu.enter-leave-room\" defaultMessage=\"Leave Room\" />,\n              icon: LeaveIcon,\n              onClick: () => {\n                this.showNonHistoriedDialog(LeaveRoomModal, {\n                  destinationUrl: \"/\",\n                  reason: LeaveReason.leaveRoom\n                });\n              }\n            },\n          canCloseRoom && {\n            id: \"close-room\",\n            label: <FormattedMessage id=\"more-menu.close-room\" defaultMessage=\"Close Room\" />,\n            icon: DeleteIcon,\n            onClick: () =>\n              this.props.performConditionalSignIn(\n                () => this.props.hubChannel.can(\"update_hub\"),\n                () => {\n                  this.showNonHistoriedDialog(CloseRoomModal, {\n                    roomName: this.props.hub.name,\n                    onConfirm: () => {\n                      this.props.hubChannel.closeHub();\n                    }\n                  });\n                },\n                SignInMessages.closeRoom\n              )\n          }\n        ].filter(item => item)\n      },\n      {\n        id: \"support\",\n        label: <FormattedMessage id=\"more-menu.support\" defaultMessage=\"Support\" />,\n        items: [\n          configs.feature(\"show_community_link\") && {\n            id: \"community\",\n            label: <FormattedMessage id=\"more-menu.community\" defaultMessage=\"Community\" />,\n            icon: DiscordIcon,\n            href: configs.link(\"community\", \"https://discord.gg/dFJncWwHun\")\n          },\n          configs.feature(\"show_issue_report_link\") && {\n            id: \"report-issue\",\n            label: <FormattedMessage id=\"more-menu.report-issue\" defaultMessage=\"Report Issue\" />,\n            icon: WarningCircleIcon,\n            href: configs.link(\"issue_report\", \"https://hubs.mozilla.com/docs/help.html\")\n          },\n          entered && {\n            id: \"start-tour\",\n            label: <FormattedMessage id=\"more-menu.start-tour\" defaultMessage=\"Start Tour\" />,\n            icon: SupportIcon,\n            onClick: () => this.props.scene.systems.tips.resetTips()\n          },\n          configs.feature(\"show_docs_link\") && {\n            id: \"help\",\n            label: <FormattedMessage id=\"more-menu.help\" defaultMessage=\"Help\" />,\n            icon: SupportIcon,\n            href: configs.link(\"docs\", \"https://hubs.mozilla.com/docs\")\n          },\n          configs.feature(\"show_controls_link\") && {\n            id: \"controls\",\n            label: <FormattedMessage id=\"more-menu.controls\" defaultMessage=\"Controls\" />,\n            icon: SupportIcon,\n            href: configs.link(\"controls\", \"https://hubs.mozilla.com/docs/hubs-controls.html\")\n          },\n          configs.feature(\"show_whats_new_link\") && {\n            id: \"whats-new\",\n            label: <FormattedMessage id=\"more-menu.whats-new\" defaultMessage=\"What's New\" />,\n            icon: SupportIcon,\n            href: \"/whats-new\"\n          },\n          configs.feature(\"show_terms\") && {\n            id: \"tos\",\n            label: <FormattedMessage id=\"more-menu.tos\" defaultMessage=\"Terms of Service\" />,\n            icon: TextDocumentIcon,\n            href: configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")\n          },\n          configs.feature(\"show_privacy\") && {\n            id: \"privacy\",\n            label: <FormattedMessage id=\"more-menu.privacy\" defaultMessage=\"Privacy Notice\" />,\n            icon: ShieldIcon,\n            href: configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")\n          }\n        ].filter(item => item)\n      }\n    ];\n\n    return (\n      <MoreMenuContextProvider>\n        <ReactAudioContext.Provider value={this.state.audioContext}>\n          <div className={classNames(rootStyles)}>\n            {preload &&\n              this.props.hub && (\n                <PreloadOverlay\n                  hubName={this.props.hub.name}\n                  hubScene={this.props.hub.scene}\n                  baseUrl={hubUrl(this.props.hub.hub_id).href}\n                  onLoadClicked={this.props.onPreloadLoadClicked}\n                />\n              )}\n            {!this.state.dialog && (\n              <StateRoute\n                stateKey=\"overlay\"\n                stateValue=\"avatar-editor\"\n                history={this.props.history}\n                render={props => (\n                  <AvatarEditor\n                    className={styles.avatarEditor}\n                    signedIn={this.state.signedIn}\n                    onSignIn={this.showContextualSignInDialog}\n                    onSave={() => {\n                      if (props.location.state.detail && props.location.state.detail.returnToProfile) {\n                        this.props.history.goBack();\n                      } else {\n                        this.props.history.goBack();\n                        // We are returning to the media browser. Trigger an update so that the filter switches to\n                        // my-avatars, now that we've saved an avatar.\n                        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\");\n                      }\n                      this.props.onAvatarSaved();\n                    }}\n                    onClose={() => this.props.history.goBack()}\n                    store={this.props.store}\n                    debug={avatarEditorDebug}\n                    avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                    hideDelete={props.location.state.detail && props.location.state.detail.hideDelete}\n                  />\n                )}\n              />\n            )}\n            {!this.state.dialog &&\n              showMediaBrowser && (\n                <MediaBrowserContainer\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  hubChannel={this.props.hubChannel}\n                  onMediaSearchResultEntrySelected={(entry, selectAction) => {\n                    if (entry.type === \"room\") {\n                      this.showNonHistoriedDialog(LeaveRoomModal, {\n                        destinationUrl: entry.url,\n                        reason: LeaveReason.joinRoom\n                      });\n                    } else {\n                      this.props.onMediaSearchResultEntrySelected(entry, selectAction);\n                    }\n                  }}\n                  performConditionalSignIn={this.props.performConditionalSignIn}\n                  showNonHistoriedDialog={this.showNonHistoriedDialog}\n                  store={this.props.store}\n                  scene={this.props.scene}\n                />\n              )}\n            {this.props.hub && (\n              <RoomLayoutContainer\n                scene={this.props.scene}\n                store={this.props.store}\n                objectFocused={!!this.props.selectedObject}\n                streaming={streaming}\n                viewport={\n                  <>\n                    {!this.state.dialog && renderEntryFlow ? entryDialog : undefined}\n                    {!this.props.selectedObject && <CompactMoreMenuButton />}\n                    {(!this.props.selectedObject ||\n                      (this.props.breakpoint !== \"sm\" && this.props.breakpoint !== \"md\")) && (\n                      <ContentMenu>\n                        {showObjectList && (\n                          <ObjectsMenuButton\n                            active={this.state.sidebarId === \"objects\"}\n                            onClick={() => this.toggleSidebar(\"objects\")}\n                          />\n                        )}\n                        <PeopleMenuButton\n                          active={this.state.sidebarId === \"people\"}\n                          onClick={() => this.toggleSidebar(\"people\")}\n                          presencecount={this.state.presenceCount}\n                        />\n                      </ContentMenu>\n                    )}\n                    {!entered && !streaming && !isMobile && streamerName && <SpectatingLabel name={streamerName} />}\n                    {this.props.activeObject && (\n                      <ObjectMenuContainer\n                        hubChannel={this.props.hubChannel}\n                        scene={this.props.scene}\n                        onOpenProfile={() => this.setSidebar(\"profile\")}\n                        onGoToObject={() => {\n                          if (this.props.breakpoint === \"sm\") {\n                            this.setSidebar(null);\n                          }\n                        }}\n                      />\n                    )}\n                    {this.state.sidebarId !== \"chat\" &&\n                      this.props.hub && (\n                        <PresenceLog\n                          inRoom={true}\n                          presences={this.props.presences}\n                          entries={presenceLogEntries}\n                          hubId={this.props.hub.hub_id}\n                          history={this.props.history}\n                          onViewProfile={sessionId => this.setSidebar(\"user\", { selectedUserId: sessionId })}\n                        />\n                      )}\n                    <TipContainer\n                      hide={this.props.activeObject}\n                      inLobby={watching}\n                      inRoom={entered}\n                      isEmbedded={this.props.embed}\n                      isStreaming={streaming}\n                      hubId={this.props.hub.hub_id}\n                      presences={this.props.presences}\n                      scene={this.props.scene}\n                      store={this.props.store}\n                    />\n                    {(showRtcDebugPanel || showAudioDebugPanel) && (\n                      <RTCDebugPanel\n                        history={this.props.history}\n                        store={window.APP.store}\n                        scene={this.props.scene}\n                        presences={this.props.presences}\n                        sessionId={this.props.sessionId}\n                        showRtcDebug={showRtcDebugPanel}\n                        showAudioDebug={showAudioDebugPanel}\n                      />\n                    )}\n                  </>\n                }\n                sidebar={\n                  this.state.sidebarId ? (\n                    <>\n                      {this.state.sidebarId === \"chat\" && (\n                        <ChatSidebarContainer\n                          presences={this.props.presences}\n                          occupantCount={this.occupantCount()}\n                          canSpawnMessages={entered && this.props.hubChannel.can(\"spawn_and_move_media\")}\n                          scene={this.props.scene}\n                          onClose={() => this.setSidebar(null)}\n                          inputEffect={this.state.chatInputEffect}\n                        />\n                      )}\n                      {this.state.sidebarId === \"objects\" && (\n                        <ObjectsSidebarContainer\n                          hubChannel={this.props.hubChannel}\n                          onClose={() => this.setSidebar(null)}\n                        />\n                      )}\n                      {this.state.sidebarId === \"people\" && (\n                        <PeopleSidebarContainer\n                          displayNameOverride={displayNameOverride}\n                          store={this.props.store}\n                          mediaSearchStore={this.props.mediaSearchStore}\n                          hubChannel={this.props.hubChannel}\n                          history={this.props.history}\n                          mySessionId={this.props.sessionId}\n                          presences={this.props.presences}\n                          onClose={() => this.setSidebar(null)}\n                          onCloseDialog={() => this.closeDialog()}\n                          showNonHistoriedDialog={this.showNonHistoriedDialog}\n                          performConditionalSignIn={this.props.performConditionalSignIn}\n                        />\n                      )}\n                      {this.state.sidebarId === \"profile\" && (\n                        <ProfileEntryPanel\n                          history={this.props.history}\n                          containerType=\"sidebar\"\n                          displayNameOverride={displayNameOverride}\n                          finished={() => this.setSidebar(null)}\n                          onClose={() => this.setSidebar(null)}\n                          store={this.props.store}\n                          mediaSearchStore={this.props.mediaSearchStore}\n                        />\n                      )}\n                      {this.state.sidebarId === \"user\" && (\n                        <UserProfileSidebarContainer\n                          user={this.getSelectedUser()}\n                          hubChannel={this.props.hubChannel}\n                          performConditionalSignIn={this.props.performConditionalSignIn}\n                          onClose={() => this.setSidebar(null)}\n                          onCloseDialog={() => this.closeDialog()}\n                          showNonHistoriedDialog={this.showNonHistoriedDialog}\n                        />\n                      )}\n                      {this.state.sidebarId === \"room-info\" && (\n                        <RoomSidebar\n                          accountId={this.props.sessionId}\n                          room={this.props.hub}\n                          canEdit={this.props.hubChannel.canOrWillIfCreator(\"update_hub\")}\n                          onEdit={() => {\n                            this.props.performConditionalSignIn(\n                              () => this.props.hubChannel.can(\"update_hub\"),\n                              () => this.setSidebar(\"room-info-settings\"),\n                              SignInMessages.roomSettings\n                            );\n                          }}\n                          onClose={() => this.setSidebar(null)}\n                          onChangeScene={this.onChangeScene}\n                        />\n                      )}\n                      {this.state.sidebarId === \"room-info-settings\" && (\n                        <RoomSettingsSidebarContainer\n                          room={this.props.hub}\n                          hubChannel={this.props.hubChannel}\n                          showBackButton\n                          onClose={() => this.setSidebar(\"room-info\")}\n                          onChangeScene={this.onChangeScene}\n                        />\n                      )}\n                      {this.state.sidebarId === \"room-settings\" && (\n                        <RoomSettingsSidebarContainer\n                          room={this.props.hub}\n                          accountId={this.props.sessionId}\n                          hubChannel={this.props.hubChannel}\n                          onClose={() => this.setSidebar(null)}\n                          onChangeScene={this.onChangeScene}\n                        />\n                      )}\n                    </>\n                  ) : (\n                    undefined\n                  )\n                }\n                modal={this.state.dialog}\n                toolbarLeft={\n                  <InvitePopoverContainer\n                    hub={this.props.hub}\n                    hubChannel={this.props.hubChannel}\n                    scene={this.props.scene}\n                  />\n                }\n                toolbarCenter={\n                  <>\n                    {watching && (\n                      <>\n                        <ToolbarButton\n                          icon={<EnterIcon />}\n                          label={<FormattedMessage id=\"toolbar.join-room-button\" defaultMessage=\"Join Room\" />}\n                          preset=\"accept\"\n                          onClick={() => this.setState({ watching: false })}\n                        />\n                        {enableSpectateVRButton && (\n                          <ToolbarButton\n                            icon={<VRIcon />}\n                            preset=\"accent5\"\n                            label={\n                              <FormattedMessage id=\"toolbar.spectate-in-vr-button\" defaultMessage=\"Spectate in VR\" />\n                            }\n                            onClick={() => this.props.scene.enterVR()}\n                          />\n                        )}\n                      </>\n                    )}\n                    {entered && (\n                      <>\n                        <AudioPopoverContainer scene={this.props.scene} />\n                        <SharePopoverContainer scene={this.props.scene} hubChannel={this.props.hubChannel} />\n                        <PlacePopoverContainer\n                          scene={this.props.scene}\n                          hubChannel={this.props.hubChannel}\n                          mediaSearchStore={this.props.mediaSearchStore}\n                          showNonHistoriedDialog={this.showNonHistoriedDialog}\n                        />\n                        {this.props.hubChannel.can(\"spawn_emoji\") && (\n                          <ReactionPopoverContainer\n                            scene={this.props.scene}\n                            initialPresence={getPresenceProfileForSession(this.props.presences, this.props.sessionId)}\n                          />\n                        )}\n                      </>\n                    )}\n                    <ChatToolbarButtonContainer onClick={() => this.toggleSidebar(\"chat\")} />\n                    {entered &&\n                      isMobileVR && (\n                        <ToolbarButton\n                          className={styleUtils.hideLg}\n                          icon={<VRIcon />}\n                          preset=\"accept\"\n                          label={<FormattedMessage id=\"toolbar.enter-vr-button\" defaultMessage=\"Enter VR\" />}\n                          onClick={() => exit2DInterstitialAndEnterVR(true)}\n                        />\n                      )}\n                  </>\n                }\n                toolbarRight={\n                  <>\n                    {entered &&\n                      isMobileVR && (\n                        <ToolbarButton\n                          icon={<VRIcon />}\n                          preset=\"accept\"\n                          label={<FormattedMessage id=\"toolbar.enter-vr-button\" defaultMessage=\"Enter VR\" />}\n                          onClick={() => exit2DInterstitialAndEnterVR(true)}\n                        />\n                      )}\n                    {entered && (\n                      <ToolbarButton\n                        icon={<LeaveIcon />}\n                        label={<FormattedMessage id=\"toolbar.leave-room-button\" defaultMessage=\"Leave\" />}\n                        preset=\"cancel\"\n                        onClick={() => {\n                          this.showNonHistoriedDialog(LeaveRoomModal, {\n                            destinationUrl: \"/\",\n                            reason: LeaveReason.leaveRoom\n                          });\n                        }}\n                      />\n                    )}\n                    <MoreMenuPopoverButton menu={moreMenu} />\n                  </>\n                }\n              />\n            )}\n          </div>\n        </ReactAudioContext.Provider>\n      </MoreMenuContextProvider>\n    );\n  }\n}\n\nfunction UIRootHooksWrapper(props) {\n  useAccessibleOutlineStyle();\n  const breakpoint = useCssBreakpoints();\n\n  useEffect(\n    () => {\n      const el = document.getElementById(\"preload-overlay\");\n      el.classList.add(\"loaded\");\n\n      const sceneEl = props.scene;\n\n      sceneEl.classList.add(roomLayoutStyles.scene);\n\n      // Remove the preload overlay after the animation has finished.\n      const timeout = setTimeout(() => {\n        el.remove();\n      }, 500);\n\n      return () => {\n        clearTimeout(timeout);\n        sceneEl.classList.remove(roomLayoutStyles.scene);\n      };\n    },\n    [props.scene]\n  );\n\n  return (\n    <ChatContextProvider messageDispatch={props.messageDispatch}>\n      <ObjectListProvider scene={props.scene}>\n        <UIRoot breakpoint={breakpoint} {...props} />\n      </ObjectListProvider>\n    </ChatContextProvider>\n  );\n}\n\nUIRootHooksWrapper.propTypes = {\n  scene: PropTypes.object.isRequired,\n  messageDispatch: PropTypes.object,\n  store: PropTypes.object.isRequired\n};\n\nexport default UIRootHooksWrapper;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../../utils/configs\";\nimport { ExitedRoomScreen } from \"./ExitedRoomScreen\";\n\nexport function ExitedRoomScreenContainer({ reason }) {\n  return (\n    <ExitedRoomScreen\n      showTerms={configs.feature(\"show_terms\")}\n      termsUrl={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n      showSourceLink={configs.feature(\"show_source_link\")}\n      reason={reason}\n      contactEmail={configs.translation(\"contact-email\")}\n    />\n  );\n}\n\nExitedRoomScreenContainer.propTypes = {\n  reason: PropTypes.string.isRequired\n};\n","import jwtDecode from \"jwt-decode\";\nimport { EventTarget } from \"event-target-shim\";\nimport { Presence } from \"phoenix\";\nimport { migrateChannelToSocket, discordBridgesForPresences, migrateToChannel } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\n// Permissions that will be assumed if the user becomes the creator.\nconst HUB_CREATOR_PERMISSIONS = [\n  \"update_hub\",\n  \"update_hub_promotion\",\n  \"update_roles\",\n  \"close_hub\",\n  \"mute_users\",\n  \"kick_users\",\n  \"amplify_audio\"\n];\nconst VALID_PERMISSIONS = HUB_CREATOR_PERMISSIONS.concat([\n  \"tweet\",\n  \"spawn_camera\",\n  \"spawn_drawing\",\n  \"spawn_and_move_media\",\n  \"pin_objects\",\n  \"spawn_emoji\",\n  \"fly\"\n]);\n\nexport default class HubChannel extends EventTarget {\n  constructor(store, hubId) {\n    super();\n    this.store = store;\n    this.hubId = hubId;\n    this._signedIn = !!this.store.state.credentials.token;\n    this._permissions = {};\n    this._blockedSessionIds = new Set();\n\n    store.addEventListener(\"profilechanged\", this.sendProfileUpdate.bind(this));\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  // Returns true if this current session has the given permission.\n  can(permission) {\n    if (!VALID_PERMISSIONS.includes(permission)) throw new Error(`Invalid permission name: ${permission}`);\n    return this._permissions && this._permissions[permission];\n  }\n\n  // Returns true if the current session has the given permission, *or* will get the permission\n  // if they sign in and become the creator.\n  canOrWillIfCreator(permission) {\n    if (this._getCreatorAssignmentToken() && HUB_CREATOR_PERMISSIONS.includes(permission)) return true;\n    return this.can(permission);\n  }\n\n  canEnterRoom(hub) {\n    if (!hub) return false;\n    if (this.canOrWillIfCreator(\"update_hub\")) return true;\n\n    const roomEntrySlotCount = Object.values(this.presence.state).reduce((acc, { metas }) => {\n      const meta = metas[metas.length - 1];\n      const usingSlot = meta.presence === \"room\" || (meta.context && meta.context.entering);\n      return acc + (usingSlot ? 1 : 0);\n    }, 0);\n\n    // This now exists in room settings but a default is left here to support old reticulum servers\n    const DEFAULT_ROOM_SIZE = 24;\n    return roomEntrySlotCount < (hub.room_size !== undefined ? hub.room_size : DEFAULT_ROOM_SIZE);\n  }\n\n  // Migrates this hub channel to a new phoenix channel and presence\n  async migrateToSocket(socket, params) {\n    let presenceBindings;\n\n    // Unbind presence, and then set up bindings after reconnect\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = await migrateChannelToSocket(this.channel, socket, params);\n    this.presence = new Presence(this.channel);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n  }\n\n  async migrateToHub(hubId) {\n    let presenceBindings;\n\n    const newChannel = this.channel.socket.channel(`hub:${hubId}`, APP.hubChannelParamsForPermsToken());\n    const data = await migrateToChannel(this.channel, newChannel);\n\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = newChannel;\n    this.presence = new Presence(this.channel);\n    this.hubId = data.hubs[0].hub_id;\n\n    this.setPermissionsFromToken(data.perms_token);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n    return data;\n  }\n\n  setPermissionsFromToken = token => {\n    // Note: token is not verified.\n    this.token = token;\n    this._permissions = jwtDecode(token);\n    configs.setIsAdmin(this._permissions.postgrest_role === \"ret_admin\");\n    this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n\n    // Refresh the token 1 minute before it expires.\n    const nextRefresh = new Date(this._permissions.exp * 1000 - 60 * 1000) - new Date();\n    if (this.fetchPermissionsTimeout) {\n      clearTimeout(this.fetchPermissionsTimeout);\n    }\n    this.fetchPermissionsTimeout = setTimeout(this.fetchPermissions, nextRefresh);\n  };\n\n  sendEnteringEvent = async () => {\n    this.channel.push(\"events:entering\", {});\n  };\n\n  sendEnteringCancelledEvent = async () => {\n    this.channel.push(\"events:entering_cancelled\", {});\n  };\n\n  sendEnteredEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    const initialOccupantCount = this.presence\n      .list((key, presence) => {\n        return { key, entryState: presence.metas[presence.metas.length - 1].presence };\n      })\n      .filter(({ key, entryState }) => {\n        return key !== NAF.clientId && entryState === \"room\";\n      }).length;\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  beginStreaming() {\n    this.channel.push(\"events:begin_streaming\", {});\n  }\n\n  endStreaming() {\n    this.channel.push(\"events:end_streaming\", {});\n  }\n\n  beginRecording() {\n    this.channel.push(\"events:begin_recording\", {});\n  }\n\n  endRecording() {\n    this.channel.push(\"events:end_recording\", {});\n  }\n\n  raiseHand() {\n    this.channel.push(\"events:raise_hand\", {});\n  }\n\n  lowerHand() {\n    this.channel.push(\"events:lower_hand\", {});\n  }\n\n  beginTyping() {\n    this.channel.push(\"events:begin_typing\", {});\n  }\n\n  endTyping() {\n    this.channel.push(\"events:end_typing\", {});\n  }\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  updateScene = url => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_scene\", { url });\n  };\n\n  updateHub = settings => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_hub\", settings);\n  };\n\n  fetchInvite = () => {\n    return new Promise(resolve => this.channel.push(\"fetch_invite\", {}).receive(\"ok\", resolve));\n  };\n\n  revokeInvite = hubInviteId => {\n    return new Promise(resolve =>\n      this.channel.push(\"revoke_invite\", { hub_invite_id: hubInviteId }).receive(\"ok\", resolve)\n    );\n  };\n\n  closeHub = () => {\n    if (!this._permissions.close_hub) return \"unauthorized\";\n    this.channel.push(\"close_hub\", {});\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  // If true, will tell the server to not send us any NAF traffic\n  allowNAFTraffic = allow => {\n    this.channel.push(allow ? \"unblock_naf\" : \"block_naf\", {});\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  _getCreatorAssignmentToken = () => {\n    const creatorAssignmentTokenEntry =\n      this.store.state.creatorAssignmentTokens &&\n      this.store.state.creatorAssignmentTokens.find(t => t.hubId === this.hubId);\n\n    return creatorAssignmentTokenEntry && creatorAssignmentTokenEntry.creatorAssignmentToken;\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      const creator_assignment_token = this._getCreatorAssignmentToken();\n\n      this.channel\n        .push(\"sign_in\", { token, creator_assignment_token })\n        .receive(\"ok\", ({ perms_token }) => {\n          this.setPermissionsFromToken(perms_token);\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          if (err.reason === \"invalid_token\") {\n            console.warn(\"sign in failed\", err);\n            // Token expired or invalid TODO purge from storage if possible\n            resolve();\n          } else {\n            console.error(\"sign in failed\", err);\n            reject();\n          }\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", async () => {\n          this._signedIn = false;\n          const params = this.channel.params();\n          delete params.auth_token;\n          delete params.perms_token;\n          await this.fetchPermissions();\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getTwitterOAuthURL = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"oauth\", { type: \"twitter\" })\n        .receive(\"ok\", res => {\n          resolve(res.oauth_url);\n        })\n        .receive(\"error\", err => reject(new Error(err.reason)));\n    });\n  };\n\n  discordBridges = () => {\n    if (!this.presence || !this.presence.state) return [];\n    return discordBridgesForPresences(this.presence.state);\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"pin\", payload)\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject);\n    });\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  fetchPermissions = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"refresh_perms_token\")\n        .receive(\"ok\", res => {\n          this.setPermissionsFromToken(res.perms_token);\n          resolve({ permsToken: res.perms_token, permissions: this._permissions });\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  mute = sessionId => this.channel.push(\"mute\", { session_id: sessionId });\n  addOwner = sessionId => this.channel.push(\"add_owner\", { session_id: sessionId });\n  removeOwner = sessionId => this.channel.push(\"remove_owner\", { session_id: sessionId });\n\n  hide = sessionId => {\n    NAF.connection.adapter.block(sessionId);\n    APP.dialog.block(sessionId);\n    this.channel.push(\"block\", { session_id: sessionId });\n    this._blockedSessionIds.add(sessionId);\n  };\n\n  unhide = sessionId => {\n    if (!this._blockedSessionIds.has(sessionId)) return;\n    NAF.connection.adapter.unblock(sessionId);\n    APP.dialog.unblock(sessionId);\n    NAF.connection.entities.completeSync(sessionId);\n    this.channel.push(\"unblock\", { session_id: sessionId });\n    this._blockedSessionIds.delete(sessionId);\n  };\n\n  isHidden = sessionId => this._blockedSessionIds.has(sessionId);\n\n  kick = async sessionId => {\n    APP.dialog.kick(sessionId);\n    this.channel.push(\"kick\", { session_id: sessionId });\n  };\n\n  requestSupport = () => this.channel.push(\"events:request_support\", {});\n  favorite = () => this.channel.push(\"favorite\", {});\n  unfavorite = () => this.channel.push(\"unfavorite\", {});\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","import { SHAPE, FIT } from \"three-ammo/constants\";\n\nfunction exceedsDensityThreshold(count, subtree) {\n  const bounds = subtree.boundingData;\n  const triangleThreshold = 1000;\n  const minimumVolume = 0.1;\n  const minimumTriangles = 100;\n  const dx = bounds[3] - bounds[0];\n  const dy = bounds[4] - bounds[1];\n  const dz = bounds[5] - bounds[2];\n  const volume = dx * dy * dz;\n\n  if (volume < minimumVolume) {\n    return false;\n  }\n\n  if (count < minimumTriangles) {\n    return false;\n  }\n\n  return count / volume > triangleThreshold;\n}\n\nfunction isHighDensity(subtree) {\n  if (subtree.continueGeneration) {\n    subtree.continueGeneration();\n  }\n  if (subtree.count) {\n    const result = exceedsDensityThreshold(subtree.count, subtree);\n    return result === true ? true : subtree.count;\n  } else {\n    const leftResult = isHighDensity(subtree.left);\n    if (leftResult === true) return true;\n    const rightResult = isHighDensity(subtree.right);\n    if (rightResult === true) return true;\n\n    const count = leftResult + rightResult;\n    const result = exceedsDensityThreshold(count, subtree);\n    return result === true ? true : count;\n  }\n}\n\nfunction isGeometryHighDensity(geo) {\n  const bvh = geo.boundsTree;\n  const roots = bvh._roots;\n  for (let i = 0; i < roots.length; ++i) {\n    return isHighDensity(roots[i]) === true;\n  }\n  return false;\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const shapePrefix = \"shape-helper__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    if (document.querySelector([\"[shape-helper__trimesh]\", \"[shape-helper__heightfield]\"])) {\n      console.log(\"heightfield or trimesh found on scene\");\n    } else {\n      console.log(\"collision not found in scene\");\n\n      let isHighDensity = false;\n      meshRoot.traverse(o => {\n        if (\n          o.isMesh &&\n          (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n          !o.name.startsWith(\"Floor_Plan\") &&\n          !o.name.startsWith(\"Ground_Plane\") &&\n          o.geometry.boundsTree\n        ) {\n          if (isGeometryHighDensity(o.geometry)) {\n            isHighDensity = true;\n            return;\n          }\n        }\n      });\n\n      let navMesh = null;\n\n      if (isHighDensity) {\n        console.log(\"mesh contains high triangle density region\");\n        navMesh = document.querySelector(\"[nav-mesh]\");\n      }\n\n      if (navMesh) {\n        console.log(`mesh density exceeded, using floor plan only`);\n        navMesh.setAttribute(shapePrefix + \"floorPlan\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL,\n          includeInvisible: true\n        });\n        shapes.push({ id: shapePrefix + \"floorPlan\", entity: navMesh });\n      } else if (!isHighDensity) {\n        el.setAttribute(shapePrefix + \"environment\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL\n        });\n        shapes.push({ id: shapePrefix + \"environment\", entity: el });\n        console.log(\"adding mesh shape for all visible meshes\");\n      } else {\n        el.setAttribute(shapePrefix + \"defaultFloor\", {\n          type: SHAPE.BOX,\n          margin: 0.01,\n          halfExtents: { x: 4000, y: 0.5, z: 4000 },\n          offset: { x: 0, y: -0.5, z: 0 },\n          fit: FIT.MANUAL\n        });\n        shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n        console.log(\"adding default floor collision\");\n      }\n    }\n    console.groupEnd();\n  };\n})();\n","import \"./utils/configs\";\nimport { getAbsoluteHref } from \"./utils/media-url-utils\";\nimport { isValidSceneUrl } from \"./utils/scene-url-utils\";\nimport { spawnChatMessage } from \"./react-components/chat-message\";\nimport { SOUND_CHAT_MESSAGE, SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"./systems/sound-effects-system\";\nimport ducky from \"./assets/models/DuckyMesh.glb\";\nimport { EventTarget } from \"event-target-shim\";\nimport { ExitReason } from \"./react-components/room/ExitedRoomScreen\";\nimport { LogMessageType } from \"./react-components/room/ChatSidebar\";\n\nlet uiRoot;\n// Handles user-entered messages\nexport default class MessageDispatch extends EventTarget {\n  constructor(scene, entryManager, hubChannel, remountUI, mediaSearchStore) {\n    super();\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.remountUI = remountUI;\n    this.mediaSearchStore = mediaSearchStore;\n    this.presenceLogEntries = [];\n  }\n\n  addToPresenceLog(entry) {\n    entry.key = Date.now().toString();\n\n    this.presenceLogEntries.push(entry);\n    this.remountUI({ presenceLogEntries: this.presenceLogEntries });\n    if (entry.type === \"chat\" && this.scene.is(\"loaded\")) {\n      this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CHAT_MESSAGE);\n    }\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      this.remountUI({ presenceLogEntries: this.presenceLogEntries });\n\n      setTimeout(() => {\n        this.presenceLogEntries.splice(this.presenceLogEntries.indexOf(entry), 1);\n        this.remountUI({ presenceLogEntries: this.presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  }\n\n  receive(message) {\n    this.addToPresenceLog(message);\n    this.dispatchEvent(new CustomEvent(\"message\", { detail: message }));\n  }\n\n  log = (messageType, props) => {\n    this.receive({ type: \"log\", messageType, props });\n  };\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      const commandParts = message.substring(1).split(/\\s+/);\n      this.dispatchCommand(commandParts[0], ...commandParts.slice(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = async (command, ...args) => {\n    const entered = this.scene.is(\"entered\");\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n\n    // TODO: Some of the commands below should be available without requiring room entry.\n    if (!entered && (!isGhost || command === \"duck\")) {\n      this.log(LogMessageType.roomEntryRequired);\n      return;\n    }\n\n    const avatarRig = document.querySelector(\"#avatar-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = avatarRig.object3D.scale;\n    let err;\n    let physicsSystem;\n    const captureSystem = this.scene.systems[\"capture-system\"];\n\n    switch (command) {\n      case \"fly\":\n        if (this.scene.systems[\"hubs-systems\"].characterController.fly) {\n          this.scene.systems[\"hubs-systems\"].characterController.enableFly(false);\n          this.log(LogMessageType.flyModeDisabled);\n        } else {\n          if (this.scene.systems[\"hubs-systems\"].characterController.enableFly(true)) {\n            this.log(LogMessageType.flyModeEnabled);\n          }\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            avatarRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            avatarRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            avatarRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            avatarRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: ExitReason.left });\n        break;\n      case \"duck\":\n        spawnChatMessage(getAbsoluteHref(location.href, ducky));\n        if (Math.random() < 0.01) {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n        } else {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n        }\n        break;\n      case \"debug\":\n        physicsSystem = document.querySelector(\"a-scene\").systems[\"hubs-systems\"].physicsSystem;\n        physicsSystem.setDebug(!physicsSystem.debugEnabled);\n        break;\n      case \"vrstats\":\n        document.getElementById(\"stats\").components[\"stats-plus\"].toggleVRStats();\n        break;\n      case \"scene\":\n        if (args[0]) {\n          if (await isValidSceneUrl(args[0])) {\n            err = this.hubChannel.updateScene(args[0]);\n            if (err === \"unauthorized\") {\n              this.log(LogMessageType.unauthorizedSceneChange);\n            }\n          } else {\n            this.log(LogMessageType.inalidSceneUrl);\n          }\n        } else if (this.hubChannel.canOrWillIfCreator(\"update_hub\")) {\n          this.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n        }\n\n        break;\n      case \"rename\":\n        err = this.hubChannel.rename(args.join(\" \"));\n        if (err === \"unauthorized\") {\n          this.log(LogMessageType.unauthorizedRoomRename);\n        }\n        break;\n      case \"capture\":\n        if (!captureSystem.available()) {\n          this.log(LogMessageType.captureUnavailable);\n          break;\n        }\n        if (args[0] === \"stop\") {\n          if (captureSystem.started()) {\n            captureSystem.stop();\n            this.log(LogMessageType.captureStopped);\n          } else {\n            this.log(LogMessageType.captureAlreadyStopped);\n          }\n        } else {\n          if (captureSystem.started()) {\n            this.log(LogMessageType.captureAlreadyRunning);\n          } else {\n            captureSystem.start();\n            this.log(LogMessageType.captureStarted);\n          }\n        }\n        break;\n      case \"audioNormalization\":\n        {\n          if (args.length === 1) {\n            const factor = Number(args[0]);\n            if (!isNaN(factor)) {\n              const effectiveFactor = Math.max(0.0, Math.min(255.0, factor));\n              window.APP.store.update({\n                preferences: { audioNormalization: effectiveFactor }\n              });\n              if (factor) {\n                this.log(LogMessageType.setAudioNormalizationFactor, { factor: effectiveFactor });\n              } else {\n                this.log(LogMessageType.audioNormalizationDisabled);\n              }\n            } else {\n              this.log(LogMessageType.audioNormalizationNaN);\n            }\n          } else {\n            this.log(LogMessageType.invalidAudioNormalizationRange);\n          }\n        }\n        break;\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport nextTick from \"./utils/next-tick\";\nimport { hackyMobileSafariTest } from \"./utils/detect-touchscreen\";\nimport { SignInMessages } from \"./react-components/auth/SignInModal\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst forceEnableTouchscreen = hackyMobileSafariTest();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\n\nimport { addMedia } from \"./utils/media-utils\";\nimport {\n  isIn2DInterstitial,\n  handleExitTo2DInterstitial,\n  exit2DInterstitialAndEnterVR,\n  forceExitFrom2DInterstitial\n} from \"./utils/vr-interstitial\";\nimport { ObjectContentOrigins } from \"./object-types\";\nimport { getAvatarSrc, getAvatarType } from \"./utils/avatar-utils\";\nimport { SOUND_ENTER_SCENE } from \"./systems/sound-effects-system\";\nimport { MediaDevices, MediaDevicesEvents } from \"./utils/media-devices-utils\";\n\nexport default class SceneEntryManager {\n  constructor(hubChannel, authChannel, history) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.store = window.APP.store;\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n    this.scene = document.querySelector(\"a-scene\");\n    this.rightCursorController = document.getElementById(\"right-cursor-controller\");\n    this.leftCursorController = document.getElementById(\"left-cursor-controller\");\n    this.avatarRig = document.getElementById(\"avatar-rig\");\n    this._entered = false;\n    this.performConditionalSignIn = () => {};\n    this.history = history;\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      console.log(\"Scene is loaded so setting up controllers\");\n      this.rightCursorController.components[\"cursor-controller\"].enabled = false;\n      this.leftCursorController.components[\"cursor-controller\"].enabled = false;\n      this.mediaDevicesManager = APP.mediaDevicesManager;\n      this._setupBlocking();\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (enterInVR, muteOnEntry) => {\n    console.log(\"Entering scene...\");\n    document.getElementById(\"viewing-camera\").removeAttribute(\"scene-preview-camera\");\n\n    if (isDebug && NAF.connection.adapter.session) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    if (enterInVR) {\n      // This specific scene state var is used to check if the user went through the\n      // entry flow and chose VR entry, and is used to preempt VR mode on refreshes.\n      this.scene.addState(\"vr-entered\");\n\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      \"getVRDisplays\" in navigator && navigator.getVRDisplays();\n\n      await exit2DInterstitialAndEnterVR(true);\n    }\n\n    const waypointSystem = this.scene.systems[\"hubs-systems\"].waypointSystem;\n    waypointSystem.moveToSpawnPoint();\n\n    if (isMobile || forceEnableTouchscreen || qsTruthy(\"force_enable_touchscreen\")) {\n      this.avatarRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupKicking();\n    this._setupMedia();\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_ENTER_SCENE);\n\n    if (isBotMode) {\n      this._runBot();\n      this.scene.addState(\"entered\");\n      this.hubChannel.sendEnteredEvent();\n      return;\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.rightCursorController.components[\"cursor-controller\"].enabled = true;\n    this.leftCursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !this.scene.renderer.xr.isPresenting) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEnteredEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    // Bump stored entry count after 30s\n    setTimeout(() => this.store.bumpEntryCount(), 30000);\n\n    this.scene.addState(\"entered\");\n\n    APP.mediaDevicesManager.micEnabled = !muteOnEntry;\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      console.log(\"Scene already loaded so callback invoked directly\");\n      callback();\n    } else {\n      console.log(\"Scene not yet loaded so callback is deferred\");\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (enterInVR, muteOnEntry) => {\n    this.whenSceneLoaded(() => this.enterScene(enterInVR, muteOnEntry));\n  };\n\n  exitScene = () => {\n    this.scene.exitVR();\n    if (APP.dialog && APP.dialog.localMediaStream) {\n      APP.dialog.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    this.scene.parentNode.removeChild(this.scene);\n  };\n\n  _setupPlayerRig = () => {\n    this._setPlayerInfoFromProfile();\n\n    // Explict user action changed avatar or updated existing avatar.\n    this.scene.addEventListener(\"avatar_updated\", () => this._setPlayerInfoFromProfile(true));\n\n    // Store updates can occur to avatar id in cases like error, auth reset, etc.\n    this.store.addEventListener(\"statechanged\", () => this._setPlayerInfoFromProfile());\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n    if (avatarScale) {\n      this.avatarRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _setPlayerInfoFromProfile = async (force = false) => {\n    const avatarId = this.store.state.profile.avatarId;\n    if (!force && this._lastFetchedAvatarId === avatarId) return; // Avoid continually refetching based upon state changing\n\n    this._lastFetchedAvatarId = avatarId;\n    const avatarSrc = await getAvatarSrc(avatarId);\n\n    this.avatarRig.setAttribute(\"player-info\", { avatarSrc, avatarType: getAvatarType(avatarId) });\n  };\n\n  _setupKicking = () => {\n    // This event is only received by the kicker\n    document.body.addEventListener(\"kicked\", ({ detail }) => {\n      const { clientId: kickedClientId } = detail;\n      const { entities } = NAF.connection.entities;\n      for (const id in entities) {\n        const entity = entities[id];\n        if (NAF.utils.getCreator(entity) !== kickedClientId) continue;\n\n        if (entity.components.networked.data.persistent) {\n          NAF.utils.takeOwnership(entity);\n          window.APP.pinningHelper.unpinElement(entity);\n          entity.parentNode.removeChild(entity);\n        } else {\n          NAF.entities.removeEntity(id);\n        }\n      }\n    });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId, true);\n    });\n  };\n\n  _setupMedia = () => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      if (!this.hubChannel.can(\"spawn_and_move_media\")) return;\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        null,\n        !(src instanceof MediaStream),\n        true\n      );\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#avatar-pov-node\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    this.scene.addEventListener(\"action_spawn\", () => {\n      handleExitTo2DInterstitial(false, () => window.APP.mediaSearchStore.pushExitMediaBrowserHistory());\n      window.APP.mediaSearchStore.sourceNavigateToDefaultSource();\n    });\n\n    this.scene.addEventListener(\"action_kick_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"kick_users\"),\n        async () => await window.APP.hubChannel.kick(clientId),\n        SignInMessages.kickUser\n      );\n    });\n\n    this.scene.addEventListener(\"action_mute_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"mute_users\"),\n        () => window.APP.hubChannel.mute(clientId),\n        SignInMessages.muteUser\n      );\n    });\n\n    this.scene.addEventListener(\"action_vr_notice_closed\", () => forceExitFrom2DInterstitial());\n\n    document.addEventListener(\"paste\", e => {\n      if (\n        (e.target.matches(\"input, textarea\") || e.target.contentEditable === \"true\") &&\n        document.activeElement === e.target\n      )\n        return;\n\n      // Never paste into scene if dialog is open\n      const uiRoot = document.querySelector(\".ui-root\");\n      if (uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\")) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    let lastDebugScene;\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n\n      if (qsTruthy(\"debugLocalScene\")) {\n        URL.revokeObjectURL(lastDebugScene);\n        const url = URL.createObjectURL(e.dataTransfer.files[0]);\n        this.hubChannel.updateScene(url);\n        lastDebugScene = url;\n        return;\n      }\n\n      let url = e.dataTransfer.getData(\"url\");\n\n      if (!url) {\n        // Sometimes dataTransfer text contains a valid URL, so try for that.\n        try {\n          url = new URL(e.dataTransfer.getData(\"text\")).href;\n        } catch (e) {\n          // Nope, not this time.\n        }\n      }\n\n      const files = e.dataTransfer.files;\n\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareSuccess = (isDisplayMedia, isVideoTrackAdded, target) => {\n      isHandlingVideoShare = false;\n\n      if (isVideoTrackAdded) {\n        if (target === \"avatar\") {\n          this.avatarRig.setAttribute(\"player-info\", { isSharingAvatarCamera: true });\n        } else {\n          currentVideoShareEntity = spawnMediaInfrontOfPlayer(this.mediaDevicesManager.mediaStream, undefined);\n          // Wire up custom removal event which will stop the stream.\n          currentVideoShareEntity.setAttribute(\n            \"emit-scene-event-on-remove\",\n            `event:${MediaDevicesEvents.VIDEO_SHARE_ENDED}`\n          );\n        }\n\n        this.scene.emit(\"share_video_enabled\", { source: isDisplayMedia ? MediaDevices.SCREEN : MediaDevices.CAMERA });\n        this.scene.addState(\"sharing_video\");\n      }\n    };\n\n    const shareError = error => {\n      console.error(error);\n      isHandlingVideoShare = false;\n      this.scene.emit(\"share_video_failed\");\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", event => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n      this.mediaDevicesManager.startVideoShare({\n        isDisplayMedia: false,\n        target: event.detail?.target,\n        success: shareSuccess,\n        error: shareError\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n      this.mediaDevicesManager.startVideoShare({\n        isDisplayMedia: true,\n        target: null,\n        success: shareSuccess,\n        error: shareError\n      });\n    });\n\n    this.scene.addEventListener(MediaDevicesEvents.VIDEO_SHARE_ENDED, async () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        NAF.utils.takeOwnership(currentVideoShareEntity);\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      await this.mediaDevicesManager.stopVideoShare();\n      currentVideoShareEntity = null;\n\n      this.avatarRig.setAttribute(\"player-info\", { isSharingAvatarCamera: false });\n      this.scene.emit(\"share_video_disabled\");\n      this.scene.removeState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    });\n\n    this.scene.addEventListener(MediaDevicesEvents.MIC_SHARE_ENDED, async () => {\n      await this.mediaDevicesManager.stopMicShare();\n    });\n\n    this.scene.addEventListener(\"action_selected_media_result_entry\", async e => {\n      // TODO spawn in space when no rights\n      const { entry, selectAction } = e.detail;\n      if (selectAction !== \"spawn\") return;\n\n      const delaySpawn = isIn2DInterstitial() && !isMobileVR;\n      await exit2DInterstitialAndEnterVR();\n\n      // If user has HMD lifted up or gone through interstitial, delay spawning for now. eventually show a modal\n      if (delaySpawn) {\n        setTimeout(() => {\n          spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n        }, 3000);\n      } else {\n        spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n      }\n    });\n\n    this.mediaSearchStore.addEventListener(\"media-exit\", () => {\n      exit2DInterstitialAndEnterVR();\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_toggle_camera\", () => {\n      if (!this.hubChannel.can(\"spawn_camera\")) return;\n      const myCamera = this.scene.systems[\"camera-tools\"].getMyCamera();\n\n      if (myCamera) {\n        myCamera.parentNode.removeChild(myCamera);\n      } else {\n        const entity = document.createElement(\"a-entity\");\n        entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#avatar-pov-node\",\n          offset: { x: 0, y: 0, z: -1.5 }\n        });\n        this.scene.appendChild(entity);\n      }\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"photo\"));\n    this.scene.addEventListener(\"video_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"video\"));\n  };\n\n  _spawnAvatar = () => {\n    this.avatarRig.setAttribute(\"networked\", \"template: #remote-avatar; attachTemplateToLocal: false;\");\n    this.avatarRig.setAttribute(\"networked-avatar\", \"\");\n    this.avatarRig.emit(\"entered\");\n  };\n\n  _runBot = async () => {\n    const audioEl = document.createElement(\"audio\");\n    let audioInput;\n    let dataInput;\n\n    // Wait for startup to render form\n    do {\n      audioInput = document.querySelector(\"#bot-audio-input\");\n      dataInput = document.querySelector(\"#bot-data-input\");\n      await nextTick();\n    } while (!audioInput || !dataInput);\n\n    const getAudio = () => {\n      audioEl.loop = true;\n      audioEl.muted = false;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n\n    if (audioInput.files && audioInput.files.length > 0) {\n      getAudio();\n    } else {\n      audioInput.onchange = getAudio;\n    }\n\n    const camera = document.querySelector(\"#avatar-pov-node\");\n    const leftController = document.querySelector(\"#player-left-controller\");\n    const rightController = document.querySelector(\"#player-right-controller\");\n    const getRecording = () => {\n      fetch(URL.createObjectURL(dataInput.files[0]))\n        .then(resp => resp.json())\n        .then(recording => {\n          camera.setAttribute(\"replay\", \"\");\n          camera.components[\"replay\"].poses = recording.camera.poses;\n\n          leftController.setAttribute(\"replay\", \"\");\n          leftController.components[\"replay\"].poses = recording.left.poses;\n          leftController.removeAttribute(\"visibility-by-path\");\n          leftController.removeAttribute(\"track-pose\");\n          leftController.setAttribute(\"visible\", true);\n\n          rightController.setAttribute(\"replay\", \"\");\n          rightController.components[\"replay\"].poses = recording.right.poses;\n          rightController.removeAttribute(\"visibility-by-path\");\n          rightController.removeAttribute(\"track-pose\");\n          rightController.setAttribute(\"visible\", true);\n        });\n    };\n\n    if (dataInput.files && dataInput.files.length > 0) {\n      getRecording();\n    } else {\n      dataInput.onchange = getRecording;\n    }\n\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n\n    const audioStream = audioEl.captureStream\n      ? audioEl.captureStream()\n      : audioEl.mozCaptureStream\n        ? audioEl.mozCaptureStream()\n        : null;\n\n    if (audioStream) {\n      let audioVolume = Number(qs.get(\"audio_volume\") || \"1.0\");\n      if (isNaN(audioVolume)) {\n        audioVolume = 1.0;\n      }\n      const audioContext = THREE.AudioContext.getContext();\n      const audioSource = audioContext.createMediaStreamSource(audioStream);\n      const audioDestination = audioContext.createMediaStreamDestination();\n      const gainNode = audioContext.createGain();\n      audioSource.connect(gainNode);\n      gainNode.connect(audioDestination);\n      gainNode.gain.value = audioVolume;\n      this.mediaDevicesManager.mediaStream.addTrack(audioDestination.stream.getAudioTracks()[0]);\n    }\n\n    const connect = async () => {\n      await APP.dialog.setLocalMediaStream(this.mediaDevicesManager.mediaStream);\n      audioEl.play();\n    };\n    if (APP.dialog._sendTransport) {\n      connect();\n    } else {\n      this.scene.addEventListener(\"didConnectToDialog\", connect);\n    }\n  };\n}\n","import nextTick from \"./utils/next-tick.js\";\nconst INIT_TIMEOUT_MS = 5000;\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  register() {\n    if (navigator.serviceWorker) {\n      try {\n        navigator.serviceWorker\n          .register(\"/hub.service.js\")\n          .then(() => {\n            navigator.serviceWorker.ready\n              .then(registration => this.setRegistration(registration))\n              .catch(e => this.setRegistrationFailed(e));\n          })\n          .catch(e => this.setRegistrationFailed(e));\n      } catch (e) {\n        this.setRegistrationFailed(e);\n      }\n    } else {\n      this.setRegistrationFailed(\"Not supported\");\n    }\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    console.log(\"Service worker registered\");\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = e => {\n    console.error(\"Service worker registration failed\", e);\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n    const startedAt = performance.now();\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined && performance.now() - startedAt < INIT_TIMEOUT_MS) await nextTick();\n    if (performance.now() - startedAt >= INIT_TIMEOUT_MS) console.warn(\"Service worker registration timed out.\");\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\nimport traverseFilteredSubtrees from \"../utils/traverseFilteredSubtrees\";\n\nconst invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\nconst isDebug = qsTruthy(\"debug\");\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\n/**\n * Updates invaders every tick, doing one per frame on mobile VR.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n    this.tickCount = 0;\n    this._updateInvaders = this._updateInvaders.bind(this);\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    this._updateInvaders();\n    this.tickCount++;\n  },\n\n  _updateInvaders: (function() {\n    const tempInvasionFlags = [];\n\n    const setInvaderFlag = (i, invaders, bubble) => {\n      // Hide the invader if inside the bubble\n      const invader = invaders[i];\n      invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n      const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n      const radiusSum = bubble.data.radius + invader.data.radius;\n\n      if (distanceSquared < radiusSum * radiusSum) {\n        tempInvasionFlags[i] = true;\n      }\n    };\n\n    const flushInvadingFlagsForIndex = (i, invaders) => {\n      if (invaders[i].invading !== tempInvasionFlags[i]) {\n        invaders[i].setInvading(tempInvasionFlags[i]);\n      }\n    };\n\n    return function() {\n      if (!this.data.enabled) return;\n      if (this.invaders.length === 0) return;\n\n      tempInvasionFlags.length = 0;\n\n      // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n      // right now this is satisfied because we update the world matrices in the character controller\n      for (let i = 0; i < this.invaders.length; i++) {\n        this.invaders[i].el.object3D.updateMatrices(); // We read matrixWorld below, update matrices here\n        tempInvasionFlags[i] = false;\n      }\n\n      // Loop through all of the space bubbles (usually one)\n      for (let i = 0; i < this.bubbles.length; i++) {\n        const bubble = this.bubbles[i];\n\n        bubble.el.object3D.updateMatrices();\n        bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n        if (!isMobileVR) {\n          for (let j = 0; j < this.invaders.length; j++) {\n            setInvaderFlag(j, this.invaders, bubble);\n          }\n        } else {\n          // Optimization: update one invader per frame on mobile VR\n          setInvaderFlag(this.tickCount % this.invaders.length, this.invaders, bubble);\n        }\n      }\n\n      if (!isMobileVR) {\n        for (let i = 0; i < this.invaders.length; i++) {\n          flushInvadingFlagsForIndex(i, this.invaders);\n        }\n      } else {\n        flushInvadingFlagsForIndex(this.tickCount % this.invaders.length, this.invaders);\n      }\n    };\n  })()\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\nfunction getGLTFModelRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"gltf-model-plus\"])) {\n    entity = entity.parentNode;\n  }\n\n  return entity;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n\n    if (this.data.useMaterial) {\n      this.gltfRootEl = getGLTFModelRoot(this.el);\n    }\n\n    this.invading = false;\n    this.alwaysHidden = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  // Allow external callers to tell this invader to always hide this element, regardless of invasion state\n  setAlwaysHidden(alwaysHidden) {\n    this.alwaysHidden = alwaysHidden;\n    this.applyInvasionToMesh(this.invading);\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.invading === invading) return;\n\n    this.applyInvasionToMesh(invading);\n    this.invading = invading;\n  },\n\n  disable() {\n    if (this.invading) {\n      this.applyInvasionToMesh(false);\n    }\n\n    this.disabled = true;\n  },\n\n  enable() {\n    this.disabled = false;\n    this.applyInvasionToMesh(this.invading);\n  },\n\n  applyInvasionToMesh(invading) {\n    if (this.disabled) return;\n\n    // Note: Model isn't loaded on init because this object is inflated before the root is.\n    // object3DMap.mesh is not initially set and must be checked before traversing.\n    if (this.gltfRootEl && this.gltfRootEl.object3DMap.mesh && !this.alwaysHidden) {\n      traverseFilteredSubtrees(this.gltfRootEl.object3DMap.mesh, obj => {\n        // Prevents changing the opacity of ui elements\n        if (obj.el && obj.el.components.tags && obj.el.components.tags.data.ignoreSpaceBubble) {\n          // Skip all objects under this branch by returning false\n          return false;\n        }\n\n        if (!obj.material) {\n          return;\n        }\n\n        forEachMaterial(obj, material => {\n          let originalProps = material.userData.originalProps;\n\n          if (!material.userData.originalProps) {\n            originalProps = material.userData.originalProps = {\n              opacity: material.opacity,\n              transparent: material.transparent,\n              format: material.format,\n              blending: material.blending,\n              side: material.side\n            };\n          }\n\n          // Note: Sharing materials will cause all objects with the material to turn transparent / opaque\n          // This is generally fine for avatars since a material will only be shared within a glTF model,\n          // not across avatars in the room.\n          material.opacity = invading ? this.data.invadingOpacity : originalProps.opacity;\n          material.transparent = invading || originalProps.transparent;\n\n          // Note: Since ThreeJS 0.132 the default format for GLTF imported opaque materials is RGBFormat\n          // so we need to switch before enabling transparency.\n          material.format = invading ? THREE.RGBAFormat : originalProps.format;\n          material.blending = invading ? THREE.NormalBlending : originalProps.blending;\n          // This shouldn't be necessary but for some reason transparency doens't work on some models if they are single sided.\n          material.side = invading ? THREE.DoubleSide : originalProps.side;\n        });\n      });\n    } else {\n      this.el.object3D.visible = !invading && !this.alwaysHidden;\n    }\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (!isDebug) return;\n\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","export default function traverseFilteredSubtrees(object, cb) {\n  if (cb(object) === false) {\n    return;\n  }\n\n  const children = object.children;\n\n  for (let i = 0; i < children.length; i++) {\n    traverseFilteredSubtrees(children[i], cb);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nconst qs = new URLSearchParams(location.search);\nconst IDLE_TIMEOUT_MS = (parseInt(qs.get(\"idle_timeout\"), 10) || 2 * 60 * 60) * 1000;\nconst INPUT_CHECK_INTERVAL_MS = 1000;\n\nconst CHARACTER_ACCELERATION_PATH = paths.actions.characterAcceleration;\nconst BASIC_ACTIVITY_PATHS = [\n  paths.actions.startGazeTeleport,\n  paths.actions.rightHand.startTeleport,\n  paths.actions.leftHand.startTeleport,\n  paths.actions.snapRotateRight,\n  paths.actions.snapRotateLeft,\n  paths.actions.cursor.right.grab,\n  paths.actions.cursor.left.grab,\n  paths.actions.rightHand.grab,\n  paths.actions.leftHand.grab,\n  paths.actions.angularVelocity\n];\n\nAFRAME.registerSystem(\"idle-detector\", {\n  init() {\n    this.resetTimeout = this.resetTimeout.bind(this);\n    this.idleTimeout = null;\n    this.lastInputCheck = 0;\n\n    const events = [\"click\", \"pointerdown\", \"touchstart\", \"keyup\"];\n\n    for (const event of events) {\n      window.addEventListener(event, this.resetTimeout);\n    }\n\n    this.resetTimeout();\n  },\n  resetTimeout() {\n    if (this.idleTimeout) clearTimeout(this.idleTimeout);\n    this.idleTimeout = setTimeout(this.onIdleTimeout, IDLE_TIMEOUT_MS);\n    window.dispatchEvent(new CustomEvent(\"activity_detected\"));\n  },\n  onIdleTimeout() {\n    window.dispatchEvent(new CustomEvent(\"idle_detected\"));\n  },\n  tick(time) {\n    if (time - this.lastInputCheck < INPUT_CHECK_INTERVAL_MS) return;\n\n    const userinput = this.el.systems.userinput;\n\n    let basicActivity = false;\n    for (const activityPath of BASIC_ACTIVITY_PATHS) {\n      basicActivity = basicActivity || !!userinput.get(activityPath);\n    }\n\n    const characterAcceleration = userinput.get(CHARACTER_ACCELERATION_PATH);\n\n    const active =\n      basicActivity ||\n      !!(characterAcceleration && characterAcceleration[0]) ||\n      !!(characterAcceleration && characterAcceleration[1]);\n\n    if (active) {\n      this.resetTimeout();\n    }\n  },\n  remove() {}\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst CAMERA_UPDATE_FRAME_DELAY = 10; // Update one camera every N'th frame\n\n// Used for tracking and managing camera tools in the scene\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n    this.cameraUpdateCount = 0;\n    this.ticks = 0;\n    this.updateMyCamera = this.updateMyCamera.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      this.updateMyCamera();\n    });\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this.updateMyCamera);\n    this.updateMyCamera();\n  },\n\n  deregister(el) {\n    this.cameraEls.splice(this.cameraEls.indexOf(el), 1);\n    el.removeEventListener(\"ownership-changed\", this.updateMyCamera);\n    this.updateMyCamera();\n  },\n\n  getMyCamera() {\n    return this.myCamera;\n  },\n\n  ifMyCameraRenderingViewfinder(f) {\n    if (!this.myCamera) return;\n\n    const myCameraTool = this.myCamera.components[\"camera-tool\"];\n\n    if (myCameraTool && myCameraTool.showCameraViewfinder && myCameraTool.camera) {\n      f(myCameraTool);\n    }\n  },\n\n  updateMyCamera() {\n    this.myCamera = this.cameraEls.find(NAF.utils.isMine);\n\n    if (this.myCamera) {\n      this.sceneEl.addState(\"camera\");\n    } else {\n      this.sceneEl.removeState(\"camera\");\n    }\n  },\n\n  tick() {\n    this.ticks++;\n\n    // We update at most one camera viewfinder per frame.\n    if (this.ticks % CAMERA_UPDATE_FRAME_DELAY === 0) {\n      if (this.cameraEls.length == 0) return;\n\n      this.cameraUpdateCount++;\n      this.cameraEls[this.cameraUpdateCount % this.cameraEls.length].components[\"camera-tool\"].updateViewfinder();\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n// Used for tracking and managing pen tools in the scene\nAFRAME.registerSystem(\"pen-tools\", {\n  init() {\n    this.penEls = [];\n    this.updateMyPen = this.updateMyPen.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      this.updateMyPen();\n    });\n  },\n\n  register(el) {\n    this.penEls.push(el);\n    el.addEventListener(\"ownership-changed\", this.updateMyPen);\n    this.updateMyPen();\n  },\n\n  deregister(el) {\n    this.penEls.splice(this.penEls.indexOf(el), 1);\n    el.removeEventListener(\"ownership-changed\", this.updateMyPen);\n    this.updateMyPen();\n  },\n\n  getMyPen() {\n    return this.myPen;\n  },\n\n  updateMyPen() {\n    this.myPen = this.penEls.find(NAF.utils.isMine);\n\n    if (this.myPen) {\n      this.sceneEl.addState(\"pen\");\n    } else {\n      this.sceneEl.removeState(\"pen\");\n    }\n  }\n});\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.rightCursorHoveringOnPen = \"rightCursorHoveringOnPen\";\nsets.rightCursorHoveringOnCamera = \"rightCursorHoveringOnCamera\";\nsets.rightCursorHoveringOnInteractable = \"rightCursorHoveringOnInteractable\";\nsets.rightCursorHoveringOnUI = \"rightCursorHoveringOnUI\";\nsets.rightCursorHoveringOnVideo = \"rightCursorHoveringOnVideo\";\nsets.rightCursorHoveringOnNothing = \"rightCursorHoveringOnNothing\";\nsets.rightCursorHoldingPen = \"rightCursorHoldingPen\";\nsets.rightCursorHoldingCamera = \"rightCursorHoldingCamera\";\nsets.rightCursorHoldingInteractable = \"rightCursorHoldingInteractable\";\nsets.rightCursorHoldingUI = \"rightCursorHoldingUI\";\nsets.rightCursorHoldingNothing = \"rightCursorHoldingNothing\";\nsets.leftCursorHoveringOnPen = \"leftCursorHoveringOnPen\";\nsets.leftCursorHoveringOnCamera = \"leftCursorHoveringOnCamera\";\nsets.leftCursorHoveringOnInteractable = \"leftCursorHoveringOnInteractable\";\nsets.leftCursorHoveringOnUI = \"leftCursorHoveringOnUI\";\nsets.leftCursorHoveringOnVideo = \"leftCursorHoveringOnVideo\";\nsets.leftCursorHoveringOnNothing = \"leftCursorHoveringOnNothing\";\nsets.leftCursorHoldingPen = \"leftCursorHoldingPen\";\nsets.leftCursorHoldingCamera = \"leftCursorHoldingCamera\";\nsets.leftCursorHoldingInteractable = \"leftCursorHoldingInteractable\";\nsets.leftCursorHoldingUI = \"leftCursorHoldingUI\";\nsets.leftCursorHoldingNothing = \"leftCursorHoldingNothing\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\nsets.debugUserInput = \"debugUserInput\";\nsets.inspecting = \"inspecting\";\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nconst isInModal = (function() {\n  let uiRoot;\n  return function isInModal() {\n    // TODO: Tech debt. Find better way to handle this state that is available in react.\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    return (\n      (uiRoot && uiRoot.children[0] && uiRoot.children[0].classList.contains(\"in-modal-or-overlay\")) ||\n      window.APP.preferenceScreenIsVisible\n    );\n  };\n})();\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.buttonMiddle = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    this.canvas = document.querySelector(\"canvas\");\n    this.canvas.addEventListener(\"contextmenu\", e => {\n      if (e.button === 2) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n    });\n    [\"mousedown\", \"wheel\"].map(x => this.canvas.addEventListener(x, queueEvent, { passive: false }));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent, { passive: false }));\n\n    document.addEventListener(\n      \"wheel\",\n      e => {\n        // Only capture wheel events when the canvas is focused\n        if (document.activeElement.classList.contains(\"a-canvas\")) {\n          e.preventDefault();\n        }\n      },\n      { passive: false }\n    );\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return true;\n    }\n\n    const left = event.button === 0;\n    const middle = event.button === 1;\n    const right = event.button === 2;\n    // Note: This assumes the canvas always starts in the top left.\n    // This works with the current sidebar and toolbar layout.\n    this.coords[0] = (event.clientX / this.canvas.clientWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / this.canvas.clientHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.mouseDownLeftThisFrame = true;\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.mouseDownRightThisFrame = true;\n      this.buttonRight = true;\n    } else if (event.type === \"mousedown\" && middle) {\n      this.mouseDownMiddleThisFrame = true;\n      this.buttonMiddle = true;\n    } else if (event.type === \"mouseup\" && left) {\n      if (this.mouseDownLeftThisFrame) {\n        return false;\n      }\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      if (this.mouseDownRightThisFrame) {\n        return false;\n      }\n      this.buttonRight = false;\n    } else if (event.type === \"mouseup\" && middle) {\n      if (this.mouseDownMiddleThisFrame) {\n        return false;\n      }\n      this.buttonMiddle = false;\n    }\n    return true;\n  }\n\n  write(frame) {\n    this.movementXY[0] = 0; // deltas\n    this.movementXY[1] = 0; // deltas\n    this.wheel = 0; // delta\n\n    this.didStopProcessingEarly = false;\n    this.mouseDownLeftThisFrame = false;\n    this.mouseDownRightThisFrame = false;\n    this.mouseDownMiddleThisFrame = false;\n\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (!this.process(event)) {\n        this.didStopProcessingEarly = true;\n        this.events.splice(0, i);\n        break;\n      }\n    }\n\n    if (!this.didStopProcessingEarly) {\n      this.events.length = 0;\n    }\n\n    frame.setVector2(paths.device.mouse.coords, this.coords[0], this.coords[1]);\n    frame.setVector2(paths.device.mouse.movementXY, this.movementXY[0], this.movementXY[1]);\n    frame.setValueType(paths.device.mouse.buttonLeft, this.buttonLeft);\n    frame.setValueType(paths.device.mouse.buttonRight, this.buttonRight);\n    frame.setValueType(paths.device.mouse.buttonMiddle, this.buttonMiddle);\n    frame.setValueType(paths.device.mouse.wheel, this.wheel);\n  }\n}\n\nwindow.oncontextmenu = e => {\n  if (!isInModal()) {\n    e.preventDefault();\n  }\n};\n","// You might prefer to use this over a Set because iterating over a set allocates memory\nexport function ArrayBackedSet(initialItems) {\n  return {\n    items: initialItems || [],\n    has(item) {\n      return this.items.indexOf(item) !== -1;\n    },\n    add(item) {\n      if (!this.has(item)) {\n        this.items.push(item);\n      }\n    },\n    delete(item) {\n      const index = this.items.indexOf(item);\n      if (index !== -1) {\n        this.items[index] = this.items[this.items.length - 1];\n        this.items.pop();\n      }\n    },\n    clear() {\n      this.items.length = 0;\n    }\n  };\n}\n","import { paths } from \"../paths\";\nimport { ArrayBackedSet } from \"../array-backed-set\";\n\n// TODO currently hardcoding these keys to be physical location based instead of character based. We likely want to make this part of the bindings themselves.\nconst CODE_TO_KEY = {\n  KeyW: \"w\",\n  KeyA: \"a\",\n  KeyS: \"s\",\n  KeyD: \"d\",\n  KeyQ: \"q\",\n  KeyE: \"e\"\n};\n\nexport class KeyboardDevice {\n  constructor() {\n    this.seenKeys = new ArrayBackedSet();\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x =>\n      document.addEventListener(x, e => {\n        if (!e.key) return;\n        this.events.push(e);\n\n        // Block browser hotkeys for chat command, media browser and freeze\n        if (\n          (e.type === \"keydown\" &&\n            e.key === \"/\" &&\n            ![\"TEXTAREA\", \"INPUT\"].includes(document.activeElement && document.activeElement.nodeName) &&\n            !(document.activeElement && document.activeElement.contentEditable === \"true\")) ||\n          (e.ctrlKey &&\n            (e.key === \"1\" ||\n              e.key === \"2\" ||\n              e.key === \"3\" ||\n              e.key === \"4\" ||\n              e.key === \"5\" ||\n              e.key === \"6\" ||\n              e.key === \"7\" ||\n              e.key === \"8\" ||\n              e.key === \"9\" ||\n              e.key === \"0\")) ||\n          (e.key === \"Tab\" && document.activeElement.classList.contains(\"a-canvas\"))\n        ) {\n          e.preventDefault();\n          return false;\n        }\n      })\n    );\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (event.type === \"blur\") {\n        this.keys = {};\n        this.seenKeys.clear();\n      } else {\n        let key = event.key.toLowerCase();\n        // Use event.code and not event.key for wasdqe controls so this works\n        // for non QWERTY keyboards.\n        key = (event.code && CODE_TO_KEY[event.code]) || key;\n        this.keys[key] = event.type === \"keydown\";\n        this.seenKeys.add(key);\n      }\n    }\n\n    this.events.length = 0;\n\n    for (let i = 0; i < this.seenKeys.items.length; i++) {\n      const key = this.seenKeys.items[i];\n      const path = paths.device.keyboard.key(key);\n      frame.setValueType(path, this.keys[key]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame.setValueType(paths.device.hud.penButton, this.events.length !== 0);\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (this.gamepad.connected) {\n      const xboxPaths = paths.device.xbox;\n      this.buttonMap.forEach(b => {\n        const path = xboxPaths.button(b.name);\n        const button = this.gamepad.buttons[b.buttonId];\n        frame.setValueType(path.pressed, !!button.pressed);\n        frame.setValueType(path.touched, !!button.touched);\n        frame.setValueType(path.value, button.value);\n      });\n      frame.setValueType(xboxPaths.axesSum, 0);\n      this.axisMap.forEach(axis => {\n        frame.setValueType(xboxPaths.axis(axis.name), this.gamepad.axes[axis.axisId]);\n        frame.setValueType(xboxPaths.axesSum, frame.get(xboxPaths.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n      });\n\n      if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n        frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n      }\n    }\n  }\n}\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","// Vector from eyes to elbow (divided by user height).\nconst EYES_TO_ELBOW = { x: 0.175, y: -0.3, z: -0.03 };\n// Vector from eyes to elbow (divided by user height).\nconst FOREARM = { x: 0, y: 0, z: -0.175 };\n\nexport const applyArmModel = (function() {\n  const controllerEuler = new THREE.Euler();\n  const deltaControllerPosition = new THREE.Vector3();\n  const controllerQuaternion = new THREE.Quaternion();\n  const controllerPosition = new THREE.Vector3();\n  return function applyArmModel(gamepadPose, hand, headObject3D, userHeight) {\n    headObject3D.updateMatrices();\n    controllerPosition.copy(headObject3D.position);\n    controllerPosition.y = controllerPosition.y - userHeight;\n    deltaControllerPosition.set(\n      EYES_TO_ELBOW.x * (hand === \"left\" ? -1 : hand === \"right\" ? 1 : 0),\n      EYES_TO_ELBOW.y,\n      EYES_TO_ELBOW.z\n    );\n    deltaControllerPosition.multiplyScalar(userHeight);\n    deltaControllerPosition.applyAxisAngle(headObject3D.up, headObject3D.rotation.y);\n    controllerPosition.add(deltaControllerPosition);\n    deltaControllerPosition.set(FOREARM.x, FOREARM.y, FOREARM.z);\n    deltaControllerPosition.multiplyScalar(userHeight);\n    controllerQuaternion.fromArray(gamepadPose.orientation);\n    controllerEuler.setFromQuaternion(controllerQuaternion);\n    controllerEuler.set(controllerEuler.x, controllerEuler.y, 0);\n    deltaControllerPosition.applyEuler(controllerEuler);\n    controllerPosition.add(deltaControllerPosition);\n    return controllerPosition;\n  };\n})();\n","export const copySittingToStandingTransform = function copySittingToStandingTransform(matrix) {\n  navigator.getVRDisplays &&\n    navigator.getVRDisplays().then(displays => {\n      if (displays[0] && displays[0].stageParameters && displays[0].stageParameters.sittingToStandingTransform) {\n        matrix.fromArray(displays[0].stageParameters.sittingToStandingTransform);\n      } else {\n        setTimeout(() => {\n          copySittingToStandingTransform(matrix);\n        }, 1000); // Try again when the display is ready\n      }\n    });\n};\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nimport { waitForDOMContentLoaded } from \"../../../utils/async-utils\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst m = new THREE.Matrix4();\n\nconst TOUCHPAD = paths.device.oculusgo.touchpad;\nconst TRIGGER = paths.device.oculusgo.trigger;\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n    this.q = new THREE.Quaternion();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n\n    // TODO ideally we should just be getting pose from the gamepad\n    // TODO if controller is set to left hand, we still use right hand query here\n    // because otherwise things break.\n    waitForDOMContentLoaded().then(() => {\n      this.rayObject = document.querySelector(\"#player-right-controller\").object3D;\n      this.headObject3D = document.querySelector(\"#avatar-pov-node\").object3D;\n    });\n\n    navigator.getGamepads();\n  }\n\n  write(frame) {\n    if (!this.rayObject || !this.headObject3D) return;\n\n    // Have to call navigator.getGamepads() in order for the gamepad object to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      frame.setValueType(TOUCHPAD.axisX, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD.axisY, this.gamepad.axes[1]);\n      frame.setValueType(TOUCHPAD.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(TOUCHPAD.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(TOUCHPAD.value, this.gamepad.buttons[0].value);\n      frame.setValueType(TRIGGER.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(TRIGGER.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(TRIGGER.value, this.gamepad.buttons[1].value);\n\n      this.rayObject.updateMatrices();\n      this.rayObject.getWorldQuaternion(this.q);\n      frame.setValueType(paths.actions.rayObjectRotation, this.q);\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.oculusgo.pose, this.pose);\n\n      if (this.gamepad.pose.orientation) {\n        // TODO if controller is set to left hand, we still draw right hand until\n        // bindings are overhauled to handle primary/secondary hands.\n        frame.setMatrix4(\n          paths.device.oculusgo.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.gearVRController.button(\"touchpad\");\nconst TRIGGER = paths.device.gearVRController.button(\"trigger\");\nconst TOUCHPAD_X = paths.device.gearVRController.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.gearVRController.axis(\"touchpadY\");\n\nconst m = new THREE.Matrix4();\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    // Chrome requires a call to getGamepads() for the gamepad state to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      const touchpad = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!touchpad.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!touchpad.touched);\n      frame.setValueType(TOUCHPAD.value, !!touchpad.value);\n\n      const trigger = this.gamepad.buttons[1];\n      frame.setValueType(TRIGGER.pressed, !!trigger.pressed);\n      frame.setValueType(TRIGGER.touched, !!trigger.touched);\n      frame.setValueType(TRIGGER.value, !!trigger.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.gearVRController.pose, this.pose);\n      this.headObject3D = this.headObject3D || document.querySelector(\"#avatar-pov-node\").object3D;\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          paths.device.gearVRController.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1);\n\nconst m = new THREE.Matrix4();\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n    this.handOffset = this.gamepad.hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET;\n  }\n\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.orientation.copy(this.rayObjectRotation);\n\n    frame.setPose(this.path.pose, this.pose);\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(this.handOffset)\n      );\n    }\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().makeTranslation(0, 0, -0.04);\nconst m = new THREE.Matrix4();\n\nconst TOUCHPAD = paths.device.daydream.button(\"touchpad\");\nconst TOUCHPAD_X = paths.device.daydream.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.daydream.axis(\"touchpadY\");\nconst POSE = paths.device.daydream.pose;\nconst MATRIX = paths.device.daydream.matrix;\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand || \"right\"}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[0];\n    if (this.gamepad && this.gamepad.connected) {\n      const button = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!button.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!button.touched);\n      frame.setValueType(TOUCHPAD.value, !!button.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(POSE, this.pose);\n\n      this.headObject3D = this.headObject3D || document.querySelector(\"#avatar-pov-node\").object3D;\n\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          MATRIX,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n            .multiply(HAND_OFFSET)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, 0, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst RAY_ROTATION = new THREE.Quaternion();\nconst m = new THREE.Matrix4();\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n    this.gamepad = gamepad;\n\n    if (this.gamepad.id === \"OpenVR Cosmos\") {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"trigger\", buttonId: 0 },\n        { name: \"grip\", buttonId: 1 },\n        { name: \"primary\", buttonId: 2 },\n        { name: \"secondary\", buttonId: 3 },\n        { name: \"joystick\", buttonId: 4 },\n        { name: \"bumper\", buttonId: 5 }\n      ];\n      this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    } else if (this.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), Math.PI / 15);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 }\n      ];\n      this.axisMap = [{ name: \"touchX\", axisId: 0 }, { name: \"touchY\", axisId: 1 }];\n    } else if (this.gamepad.axes.length === 4) {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"primary\", buttonId: 3 },\n        { name: \"secondary\", buttonId: 4 },\n        { name: \"joystick\", buttonId: 5 },\n        { name: \"index\", buttonId: 6 },\n        { name: \"middle\", buttonId: 7 },\n        { name: \"ring\", buttonId: 8 },\n        { name: \"pinky\", buttonId: 9 }\n      ];\n      this.axisMap = [\n        { name: \"touchX\", axisId: 0 },\n        { name: \"touchY\", axisId: 1 },\n        { name: \"joyX\", axisId: 2 },\n        { name: \"joyY\", axisId: 3 }\n      ];\n    } else {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"primary\", buttonId: 3 }\n      ];\n      this.axisMap = [{ name: \"touchX\", axisId: 0 }, { name: \"touchY\", axisId: 1 }];\n    }\n\n    this.pose = new Pose();\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    const gamepads = navigator.getGamepads();\n    if (gamepads.length < this.gamepad.index + 1) {\n      //workaround for: https://bugzilla.mozilla.org/show_bug.cgi?id=1568076\n      return;\n    }\n    this.gamepad = gamepads[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(rayObject.matrixWorld));\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction\n      .set(0, 0, -1)\n      .applyQuaternion(RAY_ROTATION)\n      .applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, -0.017, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst m = new THREE.Matrix4();\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame.setValueType(path.touchpad.pressed, this.gamepad.buttons[0].pressed);\n    frame.setValueType(path.touchpad.touched, this.gamepad.buttons[0].touched);\n    frame.setValueType(path.touchpad.value, this.gamepad.buttons[0].value);\n\n    frame.setValueType(path.trigger.pressed, this.gamepad.buttons[1].pressed);\n    frame.setValueType(path.trigger.touched, this.gamepad.buttons[1].touched);\n    frame.setValueType(path.trigger.value, this.gamepad.buttons[1].value);\n\n    frame.setValueType(path.grip.pressed, this.gamepad.buttons[2].pressed);\n    frame.setValueType(path.grip.touched, this.gamepad.buttons[2].touched);\n    frame.setValueType(path.grip.value, this.gamepad.buttons[2].value);\n\n    frame.setValueType(path.menu.pressed, this.gamepad.buttons[3].pressed);\n    frame.setValueType(path.menu.touched, this.gamepad.buttons[3].touched);\n    frame.setValueType(path.menu.value, this.gamepad.buttons[3].value);\n\n    frame.setValueType(path.touchpad.axisX, this.gamepad.axes[0]);\n    frame.setValueType(path.touchpad.axisY, this.gamepad.axes[1]);\n    frame.setValueType(path.joystick.axisX, this.gamepad.axes[2]);\n    frame.setValueType(path.joystick.axisY, this.gamepad.axes[3]);\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n// Note these offests are specifically for the oculus touch controllers on a Quest.\n// We'll have to account for other headsets and controllers as we expand WebXR support.\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.12);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.12);\nconst m = new THREE.Matrix4();\n\nexport class WebXRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame, scene, referenceSpace) {\n    if (!referenceSpace || !this.gamepad) return;\n\n    const hand = this.gamepad.hand || \"right\";\n    const path = paths.device.webxr[hand];\n\n    if (this.gamepad.buttons[0]) {\n      frame.setValueType(path.button.trigger.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(path.button.trigger.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(path.button.trigger.value, this.gamepad.buttons[0].value);\n    }\n\n    if (this.gamepad.buttons[1]) {\n      frame.setValueType(path.button.grip.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(path.button.grip.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(path.button.grip.value, this.gamepad.buttons[1].value);\n    }\n\n    if (this.gamepad.buttons[2]) {\n      frame.setValueType(path.button.touchpad.pressed, this.gamepad.buttons[2].pressed);\n      frame.setValueType(path.button.touchpad.touched, this.gamepad.buttons[2].touched);\n      frame.setValueType(path.button.touchpad.value, this.gamepad.buttons[2].value);\n    }\n\n    if (this.gamepad.buttons[3]) {\n      frame.setValueType(path.button.thumbStick.pressed, this.gamepad.buttons[3].pressed);\n      frame.setValueType(path.button.thumbStick.touched, this.gamepad.buttons[3].touched);\n      frame.setValueType(path.button.thumbStick.value, this.gamepad.buttons[3].value);\n    }\n\n    if (this.gamepad.buttons[4]) {\n      frame.setValueType(path.button.a.pressed, this.gamepad.buttons[4].pressed);\n      frame.setValueType(path.button.a.touched, this.gamepad.buttons[4].touched);\n      frame.setValueType(path.button.a.value, this.gamepad.buttons[4].value);\n    }\n\n    if (this.gamepad.buttons[5]) {\n      frame.setValueType(path.button.b.pressed, this.gamepad.buttons[5].pressed);\n      frame.setValueType(path.button.b.touched, this.gamepad.buttons[5].touched);\n      frame.setValueType(path.button.b.value, this.gamepad.buttons[5].value);\n    }\n\n    if (this.gamepad.axes.length >= 4) {\n      frame.setValueType(path.axis.touchpadX, this.gamepad.axes[0]);\n      frame.setValueType(path.axis.touchpadY, this.gamepad.axes[1]);\n      frame.setValueType(path.axis.joyX, this.gamepad.axes[2]);\n      frame.setValueType(path.axis.joyY, this.gamepad.axes[3]);\n    }\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.orientation.copy(this.rayObjectRotation);\n\n    frame.setPose(path.pose, this.pose);\n\n    const pose = scene.frame.getPose(this.gamepad.targetRaySpace, referenceSpace);\n\n    if (pose && pose.transform.position && pose.transform.orientation) {\n      this.position.copy(pose.transform.position);\n      this.orientation.copy(pose.transform.orientation);\n      this.matrix.compose(\n        this.position,\n        this.orientation,\n        ONES\n      );\n      this.matrix.multiply(hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET);\n      frame.setMatrix4(path.matrix, this.matrix);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.hasPolyfill = window.webvrpolyfill;\n    if (this.hasPolyfill) {\n      this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n      this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n    }\n\n    this.enableGyro = window.APP.store.state.preferences.enableGyro;\n    window.APP.store.addEventListener(\"statechanged\", () => {\n      this.enableGyro = window.APP.store.state.preferences.enableGyro;\n    });\n  }\n\n  write(frame) {\n    if (!this.enableGyro || !this.hasPolyfill || !this.vrDisplay || !this.frameData) {\n      return;\n    }\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    // Don't use gyro values when device is lying flat\n    if (hmdEuler.x < -Math.PI * 0.475) return;\n\n    const dX = difference(hmdEuler.x, this.prevX);\n    const dY = difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame.setValueType(paths.device.gyro.averageDeltaX, this.averageDeltaX);\n    frame.setValueType(paths.device.gyro.averageDeltaY, this.averageDeltaY);\n  }\n}\n","/* global AFRAME NAF */\nimport { paths } from \"./userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { canMove } from \"../utils/permissions-utils\";\nimport { isTagged } from \"../components/tags\";\n\nfunction findHandCollisionTargetForHand(bodyHelper) {\n  const physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n\n  const handCollisions = physicsSystem.getCollisions(bodyHelper.uuid);\n  if (handCollisions) {\n    for (let i = 0; i < handCollisions.length; i++) {\n      const bodyData = physicsSystem.bodyUuidToData.get(handCollisions[i]);\n      const object3D = bodyData && bodyData.object3D;\n      if (object3D && isTagged(object3D.el, \"isHandCollisionTarget\")) {\n        return object3D.el;\n      }\n    }\n  }\n\n  return null;\n}\n\nconst notRemoteHoverTargets = new Map();\nconst remoteHoverTargets = new Map();\nexport function findRemoteHoverTarget(object3D) {\n  if (!object3D) return null;\n  if (notRemoteHoverTargets.get(object3D)) return null;\n  const target = remoteHoverTargets.get(object3D);\n  return target || findRemoteHoverTarget(object3D.parent);\n}\nAFRAME.registerComponent(\"is-remote-hover-target\", {\n  init: function() {\n    remoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    remoteHoverTargets.delete(this.el.object3D);\n  }\n});\nAFRAME.registerComponent(\"is-not-remote-hover-target\", {\n  init: function() {\n    notRemoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    notRemoteHoverTargets.delete(this.el.object3D);\n  }\n});\n\nexport function isUI(el) {\n  return isTagged(el, \"singleActionButton\") || isTagged(el, \"holdableButton\");\n}\n\nfunction identityFn(o) {\n  return o;\n}\n\nAFRAME.registerSystem(\"interaction\", {\n  updateCursorIntersection: function(intersection, left) {\n    if (!left) {\n      this.rightRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      return this.rightRemoteHoverTarget;\n    }\n\n    this.leftRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n    return this.leftRemoteHoverTarget;\n  },\n\n  getActiveIntersection() {\n    return (\n      (this.state.rightRemote.hovered && this.rightCursorControllerEl.components[\"cursor-controller\"].intersection) ||\n      (this.state.leftRemote.hovered && this.leftCursorControllerEl.components[\"cursor-controller\"].intersection)\n    );\n  },\n\n  isHoldingAnything(pred = identityFn) {\n    return !!(\n      pred(this.state.leftHand.held) ||\n      pred(this.state.rightHand.held) ||\n      pred(this.state.rightRemote.held) ||\n      pred(this.state.leftRemote.held)\n    );\n  },\n\n  isHeld(el) {\n    return (\n      this.state.leftHand.held === el ||\n      this.state.rightHand.held === el ||\n      this.state.rightRemote.held === el ||\n      this.state.leftRemote.held === el\n    );\n  },\n\n  wasReleasedThisFrame(el) {\n    return (\n      (this.previousState.leftHand.held === el && !this.state.leftHand.held) ||\n      (this.previousState.rightHand.held === el && !this.state.rightHand.held) ||\n      (this.previousState.rightRemote.held === el && !this.state.rightRemote.held) ||\n      (this.previousState.leftRemote.held === el && !this.state.leftRemote.held)\n    );\n  },\n\n  release(el) {\n    if (this.state.leftHand.held === el) {\n      this.state.leftHand.held = null;\n    }\n    if (this.state.leftHand.hovered === el) {\n      this.state.leftHand.hovered = null;\n    }\n    if (this.state.leftHand.held === el) {\n      this.state.leftHand.held = null;\n    }\n    if (this.state.rightHand.hovered === el) {\n      this.state.rightHand.hovered = null;\n    }\n    if (this.state.rightRemote.held === el) {\n      this.state.rightRemote.held = null;\n    }\n    if (this.state.rightRemote.hovered === el) {\n      this.state.rightRemote.hovered = null;\n    }\n    if (this.state.leftRemote.held === el) {\n      this.state.leftRemote.held = null;\n    }\n    if (this.state.leftRemote.hovered === el) {\n      this.state.leftRemote.hovered = null;\n    }\n  },\n\n  getRightRemoteHoverTarget() {\n    return this.rightRemoteHoverTarget;\n  },\n\n  getLeftRemoteHoverTarget() {\n    return this.leftRemoteHoverTarget;\n  },\n\n  init: function() {\n    this.options = {\n      leftHand: {\n        entity: null,\n        grabPath: paths.actions.leftHand.grab,\n        dropPath: paths.actions.leftHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightHand: {\n        entity: null,\n        grabPath: paths.actions.rightHand.grab,\n        dropPath: paths.actions.rightHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.right.grab,\n        dropPath: paths.actions.cursor.right.drop,\n        hoverFn: this.getRightRemoteHoverTarget\n      },\n      leftRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.left.grab,\n        dropPath: paths.actions.cursor.left.drop,\n        hoverFn: this.getLeftRemoteHoverTarget\n      }\n    };\n    this.state = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      leftRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    this.previousState = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      leftRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    waitForDOMContentLoaded().then(() => {\n      this.options.leftHand.entity = document.getElementById(\"player-left-controller\");\n      this.options.rightHand.entity = document.getElementById(\"player-right-controller\");\n      this.options.rightRemote.entity = document.getElementById(\"right-cursor\");\n      this.options.leftRemote.entity = document.getElementById(\"left-cursor\");\n      this.rightCursorControllerEl = document.getElementById(\"right-cursor-controller\");\n      this.leftCursorControllerEl = document.getElementById(\"left-cursor-controller\");\n      this.ready = true;\n    });\n  },\n\n  tickInteractor(options, state) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (state.held) {\n      const networked = state.held.components[\"networked\"];\n      const lostOwnership = networked && networked.data && networked.data.owner !== NAF.clientId;\n      if (userinput.get(options.dropPath) || lostOwnership) {\n        state.held = null;\n      }\n    } else {\n      state.hovered = options.hoverFn.call(\n        this,\n        options.entity.components[\"body-helper\"] && options.entity.components[\"body-helper\"]\n          ? options.entity.components[\"body-helper\"]\n          : null\n      );\n      if (state.hovered) {\n        const entity = state.hovered;\n        const isFrozen = this.el.is(\"frozen\");\n        const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n        if (\n          isTagged(entity, \"isHoldable\") &&\n          userinput.get(options.grabPath) &&\n          (isFrozen || !isPinned) &&\n          canMove(entity)\n        ) {\n          state.held = entity;\n        }\n      }\n    }\n  },\n\n  tick2() {\n    if (!this.el.is(\"entered\")) {\n      return;\n    }\n\n    Object.assign(this.previousState.rightHand, this.state.rightHand);\n    Object.assign(this.previousState.rightRemote, this.state.rightRemote);\n    Object.assign(this.previousState.leftHand, this.state.leftHand);\n    Object.assign(this.previousState.leftRemote, this.state.leftRemote);\n\n    if (this.options.leftHand.entity.object3D.visible && !this.state.leftRemote.held) {\n      this.tickInteractor(this.options.leftHand, this.state.leftHand);\n    }\n    if (this.options.rightHand.entity.object3D.visible && !this.state.rightRemote.held) {\n      this.tickInteractor(this.options.rightHand, this.state.rightHand);\n    }\n    if (!this.state.rightHand.held && !this.state.rightHand.hovered) {\n      this.tickInteractor(this.options.rightRemote, this.state.rightRemote);\n    }\n    if (!this.state.leftHand.held && !this.state.leftHand.hovered) {\n      this.tickInteractor(this.options.leftRemote, this.state.leftRemote);\n    }\n  }\n});\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      const rightCursorController = document.getElementById(\"right-cursor-controller\");\n\n      if (rightCursorController && rightCursorController.components) {\n        this.cursorController = rightCursorController.components[\"cursor-controller\"];\n      }\n    }\n\n    if (!this.camera) {\n      this.camera = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.viewingCamera;\n    }\n\n    const buttonLeft = frame.get(paths.device.mouse.buttonLeft);\n    const buttonRight = frame.get(paths.device.mouse.buttonRight);\n    if (buttonLeft && !this.prevButtonLeft && this.cursorController) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(\n        AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n        true,\n        rawIntersections\n      );\n      const intersection = rawIntersections.find(x => x.object.el);\n      const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const isInteractable =\n        intersection &&\n        intersection.object.el.matches(\n          \".interactable, .interactable *, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n        );\n      const isPinned =\n        remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n      const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n      const template =\n        remoteHoverTarget &&\n        remoteHoverTarget.components.networked &&\n        remoteHoverTarget.components.networked.data.template;\n      const isStaticControlledMedia = template && template === \"#static-controlled-media\";\n      const isStaticMedia = template && template === \"#static-media\";\n      this.clickedOnAnything =\n        (isInteractable &&\n          (isFrozen || !isPinned) &&\n          (remoteHoverTarget && canMove(remoteHoverTarget)) &&\n          !isStaticControlledMedia &&\n          !isStaticMedia) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      const movementXY = frame.get(paths.device.mouse.movementXY);\n      if (movementXY) {\n        frame.setVector2(paths.device.smartMouse.cameraDelta, movementXY[0], movementXY[1]);\n      }\n      frame.setValueType(paths.device.smartMouse.shouldMoveCamera, true);\n    }\n\n    if (this.camera) {\n      const coords = frame.get(paths.device.mouse.coords);\n      frame.setPose(\n        paths.device.smartMouse.cursorPose,\n        calculateCursorPose(this.camera, coords, this.origin, this.direction, this.cursorPose)\n      );\n    }\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nconst TAP_PATHS = [\n  paths.device.touchscreen.tap1,\n  paths.device.touchscreen.tap2,\n  paths.device.touchscreen.tap3,\n  paths.device.touchscreen.tap4,\n  paths.device.touchscreen.tap5\n];\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nconst getPlayerCamera = function() {\n  return AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.viewingCamera;\n};\n\nfunction isSingleActionButton(el) {\n  return el.components.tags && el.components.tags.data.singleActionButton;\n}\n\nfunction shouldMoveCursor(touch, rect, raycaster) {\n  const isCursorGrabbing = !!AFRAME.scenes[0].systems.interaction.state.rightRemote.held;\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: ((touch.clientX - rect.left) / rect.width) * 2 - 1,\n      y: -((touch.clientY - rect.top) / rect.height) * 2 + 1\n    },\n    getPlayerCamera()\n  );\n  raycaster.intersectObjects(\n    AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n    true,\n    rawIntersections\n  );\n  const intersection = rawIntersections.find(x => x.object.el);\n  const isInteractable =\n    intersection &&\n    intersection.object.el.matches(\n      \".interactable, .interactable *, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n    );\n  const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  const isPinned =\n    remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n  const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n\n  const template =\n    remoteHoverTarget && remoteHoverTarget.components.networked && remoteHoverTarget.components.networked.data.template;\n  const isStaticControlledMedia = template && template === \"#static-controlled-media\";\n  const isStaticMedia = template && template === \"#static-media\";\n  return (\n    isInteractable &&\n    (isFrozen || !isPinned) &&\n    !isStaticControlledMedia &&\n    !isStaticMedia &&\n    (remoteHoverTarget && (canMove(remoteHoverTarget) || isSingleActionButton(remoteHoverTarget)))\n  );\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 100);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n    // When touches appear, this timestamps and then watches for the high water mark of # of touches\n    this.pendingTap = { maxTouchCount: 0, startedAt: 0 };\n    this.tapIndexToWriteNextFrame = 0;\n\n    this.canvas = document.querySelector(\"canvas\");\n\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      this.canvas.addEventListener(x, this.events.push.bind(this.events))\n    );\n    this.canvasRect = this.canvas.getBoundingClientRect();\n    new ResizeObserver(() => (this.canvasRect = this.canvas.getBoundingClientRect())).observe(this.canvas);\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n    } else {\n      const assignment = findByTouch(touch, this.assignments);\n      switch (assignment.job) {\n        case MOVE_CURSOR_JOB:\n        case MOVE_CAMERA_JOB:\n          // If grab was being delayed, we should fire the initial grab and also delay the unassignment\n          // to ensure we write at least two frames with the grab down (since the action set will change)\n          // and otherwise we'd not see the falling xform.\n          if (assignment.framesUntilGrab >= 0) {\n            assignment.framesUntilUnassign = assignment.framesUntilGrab + 2;\n          } else {\n            unassign(assignment.touch, assignment.job, this.assignments);\n          }\n\n          break;\n        case FIRST_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n          if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n            const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n            unassign(second.touch, second.job, this.assignments);\n            if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n              // reassign secondPincher to firstPincher\n              const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n              first.clientX = second.clientX;\n              first.clientY = second.clientY;\n            } else {\n              // reassign secondPincher to moveCamera\n              const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n              cameraMover.clientX = second.clientX;\n              cameraMover.clientY = second.clientY;\n              cameraMover.delta = [0, 0];\n            }\n          }\n          break;\n        case SECOND_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n          if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            //reassign firstPincher to moveCamera\n            const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n            unassign(first.touch, first.job, this.assignments);\n            const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = first.clientX;\n            cameraMover.clientY = first.clientY;\n            cameraMover.delta = [0, 0];\n          }\n          break;\n      }\n    }\n\n    // Touches cleared, determine what to do with pending tap\n    if (this.assignments.length === 0) {\n      if (this.pendingTap.maxTouchCount > 0 && performance.now() - this.pendingTap.startedAt <= 125) {\n        this.tapIndexToWriteNextFrame = this.pendingTap.maxTouchCount;\n      }\n\n      this.pendingTap = { maxTouchCount: 0 };\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        // Don't move the cursor until after the grab so that the grab happens at the touch's initial position\n        if (assignment.framesUntilGrab < 0) {\n          assignment.cursorPose.fromCameraProjection(\n            getPlayerCamera(),\n            ((touch.clientX - this.canvasRect.left) / this.canvasRect.width) * 2 - 1,\n            -((touch.clientY - this.canvasRect.top) / this.canvasRect.height) * 2 + 1\n          );\n        }\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    const isFirstTouch = this.assignments.length === 0;\n    const isSecondTouch = this.assignments.length === 1;\n    const isThirdTouch = this.assignments.length === 2;\n\n    const hasSecondPinch = !!findByJob(SECOND_PINCHER_JOB, this.assignments);\n\n    if (isFirstTouch || (isThirdTouch && hasSecondPinch)) {\n      let assignment;\n\n      // First touch or third touch and other two fingers were pinching\n      if (shouldMoveCursor(touch, this.canvasRect, this.raycaster)) {\n        assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n\n        // Grabbing objects is delayed by several frames:\n        // - We don't want the physics constraint to be applied too early, which results in crazy velocities\n        // - We don't want to mis-trigger grabs if the user is about to put down a second finger.\n        assignment.framesUntilGrab = 8;\n      } else {\n        assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n        assignment.delta = [0, 0];\n      }\n\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n\n      // On touch down, we always move the cursor on the first frame, but the MOVE_CURSOR_JOB indicates\n      // the touch will then track the cursor (instead of the camera)\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        getPlayerCamera(),\n        ((touch.clientX - this.canvasRect.left) / this.canvasRect.width) * 2 - 1,\n        -((touch.clientY - this.canvasRect.top) / this.canvasRect.height) * 2 + 1\n      );\n    } else if (isSecondTouch || isThirdTouch) {\n      const cursorJob = findByJob(MOVE_CURSOR_JOB, this.assignments);\n\n      if (isSecondTouch && cursorJob && cursorJob.framesUntilGrab < 0) {\n        // The second touch is happening after grab activated, so assign this touch to first pinch.\n        const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = touch.clientX;\n        first.clientY = touch.clientY;\n      } else {\n        // Second or third touch, but third touch only if not pinching\n        if (isSecondTouch) {\n          // The second touch is happening before the grab activated, so re-assign the first\n          // to the first pinch, and effectively cancel the grab.\n          const previousAssignment = this.assignments[0];\n          unassign(previousAssignment.touch, previousAssignment.job, this.assignments);\n          const first = assign(previousAssignment.touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = previousAssignment.clientX;\n          first.clientY = previousAssignment.clientY;\n        }\n\n        const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n\n        if (!first) {\n          const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = touch.clientX;\n          first.clientY = touch.clientY;\n          return;\n        } else {\n          const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n          second.clientX = touch.clientX;\n          second.clientY = touch.clientY;\n\n          const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n\n          this.pinch = {\n            initialDistance,\n            currentDistance: initialDistance,\n            delta: 0\n          };\n        }\n      }\n    }\n\n    if (this.pendingTap.maxTouchCount === 0 && this.assignments.length > 0) {\n      this.pendingTap.startedAt = performance.now();\n    }\n\n    this.pendingTap.maxTouchCount = Math.max(this.pendingTap.maxTouchCount, this.assignments.length);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    const hasCursorJob = jobIsAssigned(MOVE_CURSOR_JOB, this.assignments);\n    const hasCameraJob = jobIsAssigned(MOVE_CAMERA_JOB, this.assignments);\n\n    if (hasCursorJob || hasCameraJob) {\n      frame.setValueType(path.isTouching, true);\n\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments) || findByJob(MOVE_CAMERA_JOB, this.assignments);\n      frame.setPose(path.cursorPose, assignment.cursorPose);\n    }\n\n    frame.setValueType(path.isTouchingGrabbable, false);\n\n    if (hasCursorJob) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame.setValueType(path.isTouchingGrabbable, assignment.framesUntilGrab <= 0);\n      assignment.framesUntilGrab--;\n\n      if (assignment.framesUntilUnassign >= 0) {\n        if (assignment.framesUntilUnassign === 0) {\n          unassign(assignment.touch, assignment.job, this.assignments);\n        }\n\n        assignment.framesUntilUnassign--;\n      }\n    }\n\n    if (hasCameraJob) {\n      const delta = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n      frame.setVector2(path.touchCameraDelta, delta[0] / this.canvas.clientWidth, delta[1] / this.canvas.clientHeight);\n    }\n\n    frame.setValueType(path.pinch.delta, this.pinch.delta);\n    frame.setValueType(path.pinch.initialDistance, this.pinch.initialDistance);\n    frame.setValueType(path.pinch.currentDistance, this.pinch.currentDistance);\n\n    if (this.tapIndexToWriteNextFrame && this.tapIndexToWriteNextFrame < TAP_PATHS.length) {\n      // write to tap-X path if we had an X-fingered tap\n      frame.setValueType(TAP_PATHS[this.tapIndexToWriteNextFrame - 1], true);\n    }\n\n    this.tapIndexToWriteNextFrame = 0;\n\n    frame.setValueType(path.anything, this.assignments.length !== 0);\n  }\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.value));\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        frame.setValueType(dest.value, frame.get(src.value) * scalar);\n      }\n    };\n  },\n  scaleExp: function(scalar, exp = 1) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        if (exp === 1) {\n          frame.setValueType(dest.value, frame.get(src.value) * scalar);\n        } else {\n          frame.setValueType(dest.value, Math.pow(frame.get(src.value), exp) * scalar);\n        }\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame.setValueType(dest.value, Math.abs(frame.get(src.value)) < deadzoneSize ? 0 : frame.get(src.value));\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    const value = frame.get(src.value);\n    if (value !== undefined) {\n      frame.setValueType(dest.x, value[0]);\n      frame.setValueType(dest.y, value[1]);\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    const x = frame.get(src.x);\n    const y = frame.get(src.y);\n    if (x !== undefined && y !== undefined) {\n      frame.setVector2(dest.value, x, y);\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame.setValueType(dest.value, -frame.get(src.value));\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? undefined : frame.get(src.value));\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? frame.get(src.value) : undefined);\n  },\n  copyVec2IfTrue: function(frame, src, dest) {\n    if (frame.get(src.bool)) {\n      const v2 = frame.get(src.value);\n      frame.setVector2(dest.value, v2[0], v2[1]);\n    }\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) !== undefined ? 0 : frame.get(src.value));\n  },\n  true: function(frame, src, dest) {\n    frame.setValueType(dest.value, true);\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, frame.get(src.value) && prevState === false);\n    return !!frame.get(src.value);\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame.setValueType(dest.value, state.values.shift());\n      state.values.push(frame.get(src.value) && !state.prev);\n      state.prev = frame.get(src.value);\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, !frame.get(src.value) && prevState);\n    return !!frame.get(src.value);\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame.setVector2(dest.value, 0, 0);\n  },\n  poseFromCameraProjection: function() {\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      const camera = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.viewingCamera;\n      const value = frame.get(src.value);\n      frame.setPose(dest.value, pose.fromCameraProjection(camera, value[0], value[1]));\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame.get(src.value)) return;\n      const [x, y] = frame.get(src.value);\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame.setValueType(dest[direction], true);\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame.setValueType(dest.value, constValue);\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame.get(a)) x -= 1;\n    if (frame.get(d)) x += 1;\n    if (frame.get(w)) y += 1;\n    if (frame.get(s)) y -= 1;\n    frame.setVector2(vec2, x, y);\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      frame.setVector2(dest.value, first[0] + second[0], first[1] + second[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      const max =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n      frame.setVector2(dest.value, max[0], max[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame.get(src.value);\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame.setVector2(dest.value, vec2[0], vec2[1]);\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame.setVector2(dest.value, vec2[0] / l, vec2[1] / l);\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (!frame.get(path)) {\n        frame.setValueType(dest.value, false);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, true);\n  },\n  any: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (frame.get(path)) {\n        frame.setValueType(dest.value, true);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, false);\n  },\n  touch_axis_scroll(scale = 1, snap_to) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      if (snap_to === undefined || Math.abs(frame.get(src.value) - state.value) >= snap_to) {\n        frame.setValueType(\n          dest.value,\n          state.touching && frame.get(src.touching) ? scale * (frame.get(src.value) - state.value) : 0\n        );\n      }\n\n      state.value = frame.get(src.value);\n      state.touching = frame.get(src.touching);\n\n      return state;\n    };\n  },\n  diff_vec2: function diff_vec2(frame, src, dest, state = [0, 0]) {\n    const v2 = frame.get(src.value);\n    if (v2) {\n      frame.setVector2(dest.value, v2[0] - state[0], v2[1] - state[1]);\n      state[0] = v2[0];\n      state[1] = v2[1];\n    }\n    return state;\n  },\n  invert_vec2_if_preference(preference) {\n    return function invert_vec2_if_preference(frame, src, dest) {\n      const vec2 = frame.get(src.value);\n      if (vec2) {\n        const invert =\n          window.APP &&\n          window.APP.store &&\n          window.APP.store.state &&\n          window.APP.store.state.preferences &&\n          (window.APP.store.state.preferences[preference] ||\n            window.APP.store.state.preferences[preference] === undefined);\n        const oneOrMinusOne = invert ? -1 : 1;\n        frame.setVector2(dest.value, vec2[0] * oneOrMinusOne, vec2[1] * oneOrMinusOne);\n      }\n    };\n  }\n};\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// import { Pose } from \"../pose\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst togglePenWithRMB = \"/vars/mouse-and-keyboard/drop_pen_with_RMB\";\nconst togglePenWithEsc = \"/vars/mouse-and-keyboard/drop_pen_with_esc\";\nconst togglePenWithP = \"/vars/mouse-and-keyboard/drop_pen_with_p\";\nconst togglePenWithHud = \"/vars/mouse-and-keyboard/drop_pen_with_hud\";\nconst togglePen = \"/vars/mouse-and-keyboard/togglePen\";\nconst startInspectingViaMouse = \"/vars/mouse-and-keyboard/startInspectingViaMouse\";\nconst startInspectingViaKeyboard = \"/vars/mouse-and-keyboard/startInspectingViaKeyboard\";\nconst stopInspectingViaKeyboard = \"/vars/mouse-and-keyboard/stopInspectingViaKeyboard\";\nconst stopInspectingViaKeyboardFocus = \"/vars/mouse-and-keyboard/stopInspectingViaKeyboardFocus\";\nconst stopInspectingSelf = \"/vars/mouse-and-keyboard/stopInspectingSelf\";\n\nconst qs = new URLSearchParams(location.search);\nconst inspectZoomSpeed = parseFloat(qs.get(\"izs\")) || -10.0;\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.always(true)\n    },\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.always(false)\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.dCharSpeed },\n      xform: xforms.scale(-0.3)\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"g\") },\n      dest: { value: paths.actions.toggleFly },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"`\") },\n      dest: { value: paths.actions.toggleUI },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: togglePenWithP },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePenWithHud },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithHud, togglePenWithP],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.coords },\n      dest: { value: \"/var/mouseCoordsDelta\" },\n      xform: xforms.diff_vec2\n    },\n    {\n      src: { value: \"/var/mouseCoordsDelta\" },\n      dest: { x: \"/var/mouseCoordsX\", y: \"/var/mouseCoordsY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/mouseCoordsX\" },\n      dest: { value: \"/var/mouseCoordsXScaled\" },\n      xform: xforms.scale(-Math.PI)\n    },\n    {\n      src: { value: \"/var/mouseCoordsY\" },\n      dest: { value: \"/var/mouseCoordsYScaled\" },\n      xform: xforms.scale((2 * Math.PI) / 3)\n    },\n    {\n      src: { x: \"/var/mouseCoordsXScaled\", y: \"/var/mouseCoordsYScaled\" },\n      dest: { value: \"/var/actions/cameraDelta\" },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: \"/var/actions/cameraDelta\",\n        bool: paths.device.smartMouse.shouldMoveCamera\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.copyVec2IfTrue\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/control+1\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/control+2\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/control+3\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/control+4\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/control+5\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/control+6\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/control+7\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/control+8\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"o\") },\n      dest: { value: paths.actions.nextCameraMode },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/notcontrol+1\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+1\" },\n      dest: { value: paths.actions.spawnEmoji0 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/notcontrol+2\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+2\" },\n      dest: { value: paths.actions.spawnEmoji1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/notcontrol+3\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+3\" },\n      dest: { value: paths.actions.spawnEmoji2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/notcontrol+4\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+4\" },\n      dest: { value: paths.actions.spawnEmoji3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/notcontrol+5\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+5\" },\n      dest: { value: paths.actions.spawnEmoji4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/notcontrol+6\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+6\" },\n      dest: { value: paths.actions.spawnEmoji5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/notcontrol+7\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+7\" },\n      dest: { value: paths.actions.spawnEmoji6 },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"i\") },\n      dest: { value: paths.actions.startInspectingSelf },\n      xform: xforms.rising\n    }\n\n    // Helpful bindings for debugging hands in 2D\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.rightHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(0.2, 1.3, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // },\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.leftHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(-0.2, 1.4, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // }\n  ],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.right.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.right.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: togglePenWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: togglePenWithEsc },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithRMB, togglePenWithEsc, togglePenWithP, togglePenWithHud],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      priority: 1001,\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 200\n    }\n  ],\n\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.right.scaleGrabbedGrabbable },\n      xform: xforms.noop,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.right.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.transformModifier },\n      xform: xforms.copy,\n      priority: 1\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: startInspectingViaMouse },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"f\") },\n      dest: { value: startInspectingViaKeyboard },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: [startInspectingViaMouse, startInspectingViaKeyboard],\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.any,\n      priority: 201\n    }\n  ],\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.3),\n      priority: 1\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/control+1\" },\n      xform: xforms.copyIfTrue,\n      priority: 1001\n    },\n    {\n      src: { value: \"/var/control+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/control+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/control+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/control+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/control+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/control+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/control+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/control+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.inspecting]: [\n    {\n      src: { value: paths.device.keyboard.key(\"space\") },\n      dest: { value: k(\"space-rising\") },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        paths.device.keyboard.key(\"Escape\"),\n        paths.device.keyboard.key(\"w\"),\n        paths.device.keyboard.key(\"a\"),\n        paths.device.keyboard.key(\"s\"),\n        paths.device.keyboard.key(\"d\"),\n        paths.device.keyboard.key(\"q\"),\n        paths.device.keyboard.key(\"e\"),\n        k(\"space-rising\")\n      ],\n      dest: { value: stopInspectingViaKeyboard },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.inspectZoom },\n      xform: xforms.scale(inspectZoomSpeed),\n      priority: 1\n    },\n    {\n      src: { value: paths.device.mouse.movementXY },\n      dest: { x: \"/var/movementX\", y: \"/var/movementY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { bool: paths.device.mouse.buttonMiddle, value: \"/var/movementY\" },\n      dest: { value: \"/var/middle-mouse-move-y\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/middle-mouse-move-y\" },\n      dest: { value: paths.actions.inspectPanY },\n      xform: xforms.scale(0.001)\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"f\") },\n      dest: { value: stopInspectingViaKeyboardFocus },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"i\") },\n      dest: { value: stopInspectingSelf },\n      xform: xforms.rising\n    },\n    {\n      src: [stopInspectingViaKeyboard, stopInspectingViaKeyboardFocus, stopInspectingSelf],\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.any\n    }\n  ],\n  [sets.debugUserInput]: [\n    {\n      src: { value: paths.device.keyboard.key(\"m\") },\n      dest: { value: paths.actions.debugUserInput.describeCurrentMasks },\n      xform: xforms.rising,\n      priority: 10\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDeltaMaybeInverted = \"vars/touchscreen/touchCameraDeltaMaybeInverted\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\nconst togglePen = \"/vars/touchscreen/togglePen\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: { value: paths.device.touchscreen.tap2 },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.copy\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(-Math.PI)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(-Math.PI / 2)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: touchCamDelta },\n      dest: { value: touchCamDeltaMaybeInverted },\n      xform: xforms.invert_vec2_if_preference(\"invertTouchscreenCameraMove\")\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDeltaMaybeInverted,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: touchCamDeltaMaybeInverted },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 3\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: paths.actions.inspectZoom },\n      xform: xforms.scale(0.025),\n      priority: 1\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst wakeLeft = `${name}left/wake`;\nconst wakeRight = `${name}right/wake`;\nconst leftJoyXDeadzoned = `${name}left/joy/x/deadzoned`;\nconst leftJoyYDeadzoned = `${name}left/joy/y/deadzoned`;\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst leftCursorDrop2 = `${name}left/cursorDrop2`;\nconst leftCursorDrop1 = `${name}left/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst rightJoyYDeadzoned = `${name}right/joy/y/deadzoned`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\nconst upperButtons = `${name}buttons/upper`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.leftOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.rightOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: [leftButton(\"y\").pressed, rightButton(\"b\").pressed],\n      dest: { value: upperButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyYDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyY\n      },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: leftJoyXDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyXDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"thumbStick\").pressed\n      },\n      dest: {\n        value: paths.actions.nextCameraMode\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rightButton(\"thumbStick\").pressed\n      },\n      dest: {\n        value: paths.actions.toggleFly\n      },\n      xform: xforms.rising\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [\n        leftButton(\"y\").pressed,\n        leftButton(\"x\").pressed,\n        leftButton(\"trigger\").pressed,\n        leftButton(\"grip\").pressed\n      ],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rightButton(\"b\").pressed,\n        rightButton(\"a\").pressed,\n        rightButton(\"trigger\").pressed,\n        rightButton(\"grip\").pressed\n      ],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: { value: leftAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"x\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftCursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: { value: leftAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: {\n        value: rightJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton(\"a\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst leftButton = paths.device.webxr.left.button;\nconst leftAxis = paths.device.webxr.left.axis;\nconst leftPose = paths.device.webxr.left.pose;\nconst rightButton = paths.device.webxr.right.button;\nconst rightAxis = paths.device.webxr.right.axis;\nconst rightPose = paths.device.webxr.right.pose;\n\nconst v = path => \"/webxr/var/\" + path;\nconst wakeLeft = v(\"left/wake\");\nconst wakeRight = v(\"right/wake\");\nconst leftJoyXDeadzoned = v(\"left/joy/x/deadzoned\");\nconst leftJoyYDeadzoned = v(\"left/joy/y/deadzoned\");\nconst scaledLeftJoyX = v(\"left/scaledJoyX\");\nconst scaledLeftJoyY = v(\"left/scaledJoyY\");\nconst cursorDrop1 = v(\"right/cursorDrop1\");\nconst cursorDrop2 = v(\"right/cursorDrop2\");\nconst cursorDrop3 = v(\"right/cursorDrop3\");\nconst leftCursorDrop2 = v(\"left/cursorDrop2\");\nconst leftCursorDrop1 = v(\"left/cursorDrop1\");\nconst rightHandDrop2 = v(\"right/rightHandDrop2\");\nconst rightGripRisingGrab = v(\"right/grip/RisingGrab\");\nconst leftGripRisingGrab = v(\"left/grip/RisingGrab\");\nconst rightDpadNorth = v(\"rightDpad/north\");\nconst rightDpadSouth = v(\"rightDpad/south\");\nconst rightDpadEast = v(\"rightDpad/east\");\nconst rightDpadWest = v(\"rightDpad/west\");\nconst rightDpadCenter = v(\"rightDpad/center\");\nconst rightJoy = v(\"right/joy\");\nconst rightJoyY1 = v(\"right/joyY1\");\nconst rightJoyYDeadzoned = v(\"right/joy/y/deadzoned\");\nconst leftDpadNorth = v(\"leftDpad/north\");\nconst leftDpadSouth = v(\"leftDpad/south\");\nconst leftDpadEast = v(\"leftDpad/east\");\nconst leftDpadWest = v(\"leftDpad/west\");\nconst leftDpadCenter = v(\"leftDpad/center\");\nconst leftJoy = v(\"left/joy\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst rightBoost = v(\"right/boost\");\nconst leftBoost = v(\"left/boost\");\nconst lowerButtons = v(\"buttons/lower\");\nconst upperButtons = v(\"buttons/upper\");\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst touchpad = v(\"touchpad\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst dpadNorth = v(\"dpadNorth\");\nconst dpadSouth = v(\"dpadSouth\");\nconst dpadEast = v(\"dpadEast\");\nconst dpadWest = v(\"dpadWest\");\nconst dpadCenter = v(\"dpadCenter\");\nconst dpadCenterStrip = v(\"dpadCenterStrip\");\nconst snapRotateRight1 = v(\"snapRotateRight1\");\nconst snapRotateRight2 = v(\"snapRotateRight2\");\nconst snapRotateLeft1 = v(\"snapRotateLeft1\");\nconst snapRotateLeft2 = v(\"snapRotateLeft2\");\nconst centerStripPressed = v(\"centerStripPressed\");\nconst touchpadReleased = v(\"touchpadReleased\");\nconst lowerButtonsReleased = v(\"lowerButtonsReleased\");\n\nexport const webXRUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.webxr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.webxr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton.grip.pressed },\n      dest: { value: leftGripPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton.grip.pressed },\n      dest: { value: leftGripPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftGripPressed1 },\n      dest: { value: paths.actions.leftHand.middleRingPinky },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton.a.touched, leftButton.b.touched, leftButton.thumbStick.touched],\n      dest: { value: paths.actions.leftHand.thumb },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton.trigger.pressed },\n      dest: { value: leftTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton.trigger.pressed },\n      dest: { value: leftTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: { value: paths.actions.leftHand.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton.grip.pressed },\n      dest: { value: rightGripPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton.grip.pressed },\n      dest: { value: rightGripPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightGripPressed1 },\n      dest: { value: paths.actions.rightHand.middleRingPinky },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton.a.touched, rightButton.b.touched, rightButton.thumbStick.touched],\n      dest: { value: paths.actions.rightHand.thumb },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton.trigger.pressed },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton.trigger.pressed },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: { value: paths.actions.rightHand.index },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis.joyX,\n        y: leftAxis.joyY\n      },\n      dest: { value: leftJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: leftJoy },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: { value: rightAxis.joyY },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis.joyX,\n        y: rightJoyY1\n      },\n      dest: { value: rightJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rightJoy },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: { value: rightDpadEast },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [leftButton.a.pressed, rightButton.a.pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: [leftButton.b.pressed, rightButton.b.pressed],\n      dest: { value: upperButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightDpadWest },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftAxis.joyY },\n      dest: { value: leftJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: scaledLeftJoyY },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: leftAxis.joyX },\n      dest: { value: leftJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: leftJoyXDeadzoned },\n      dest: { value: scaledLeftJoyX },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton.b.pressed },\n      dest: { value: leftBoost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton.b.pressed },\n      dest: { value: rightBoost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton.thumbStick.pressed },\n      dest: { value: paths.actions.nextCameraMode },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightButton.thumbStick.pressed },\n      dest: { value: paths.actions.toggleFly },\n      xform: xforms.rising\n    },\n    {\n      src: [leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftButton.b.pressed, leftButton.a.pressed, leftButton.trigger.pressed, leftButton.grip.pressed],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [rightButton.b.pressed, rightButton.a.pressed, rightButton.trigger.pressed, rightButton.grip.pressed],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        x: rightAxis.touchpadX,\n        y: rightAxis.touchpadY\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.3)\n    },\n    {\n      src: [dpadNorth, dpadCenter, dpadSouth],\n      dest: { value: dpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: dpadCenterStrip,\n        bool: rightButton.touchpad.pressed\n      },\n      dest: { value: centerStripPressed },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [centerStripPressed, lowerButtons],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton.touchpad.pressed },\n      dest: { value: touchpadReleased },\n      xform: xforms.falling\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: lowerButtonsReleased },\n      xform: xforms.falling\n    },\n    {\n      src: [touchpadReleased, lowerButtonsReleased],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton.touchpad.pressed },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: { value: snapRotateRight1 },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: { value: snapRotateLeft1 },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightDpadEast },\n      dest: { value: snapRotateRight2 },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightDpadWest },\n      dest: { value: snapRotateLeft2 },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [snapRotateRight1, snapRotateRight2],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: [snapRotateLeft1, snapRotateLeft2],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis.joyY },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: { value: leftAxis.joyY },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: leftDpadEast },\n      dest: { value: paths.actions.leftHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftDpadWest },\n      dest: { value: paths.actions.leftHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton.b.pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton.a.pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab, rightTriggerPressed2],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftCursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis.joyY },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop3 },\n      xform: xforms.falling,\n      priority: 4\n    },\n    {\n      src: [cursorDrop1, cursorDrop2, cursorDrop3],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: { value: leftAxis.joyY },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton.b.pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: leftButton.b.pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightHandDrop2 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightDpadEast },\n      dest: { value: paths.actions.rightHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightDpadWest },\n      dest: { value: paths.actions.rightHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightAxis.joyY },\n      dest: { value: rightJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton.b.pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton.a.pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop3 },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: []\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst wakeLeft = `${name}left/wake`;\nconst wakeRight = `${name}right/wake`;\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoy = v(\"left/joy\");\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lJoyYDeadzoned = v(\"left/joyY/deadzoned\");\nconst lTouch = v(\"left/touch\");\nconst lTouchScaled = v(\"left/touch/scaled\");\nconst lTouchXScaled = v(\"left/touchX/scaled\");\nconst lTouchY = v(\"left/touchY\");\nconst lTouchYScaled = v(\"left/touchY/scaled\");\nconst lDpadNorth1 = v(\"left/dpad/north1\");\nconst lDpadSouth1 = v(\"left/dpad/south1\");\nconst lDpadEast1 = v(\"left/dpad/east1\");\nconst lDpadWest1 = v(\"left/dpad/west1\");\nconst lDpadCenter1 = v(\"left/dpad/center1\");\nconst lDpadNorth2 = v(\"left/dpad/north2\");\nconst lDpadSouth2 = v(\"left/dpad/south2\");\nconst lDpadEast2 = v(\"left/dpad/east2\");\nconst lDpadWest2 = v(\"left/dpad/west2\");\nconst lDpadCenter2 = v(\"left/dpad/center2\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"left/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"left/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst touchCharacterAcceleration = v(\"left/touch/characterAcceleration\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\nconst leftUndoDrawing = v(\"left/drawing/undo\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rTouch = v(\"right/touch\");\nconst rJoy = v(\"right/joy\");\nconst rJoyYDeadzoned = v(\"right/joyY/deadzoned\");\nconst rDpadNorth1 = v(\"right/dpad/north1\");\nconst rDpadSouth1 = v(\"right/dpad/south1\");\nconst rDpadEast1 = v(\"right/dpad/east1\");\nconst rDpadWest1 = v(\"right/dpad/west1\");\nconst rDpadCenter1 = v(\"right/dpad/center\");\nconst rDpadNorth2 = v(\"right/dpad/north2\");\nconst rDpadSouth2 = v(\"right/dpad/south2\");\nconst rDpadEast2 = v(\"right/dpad/east2\");\nconst rDpadWest2 = v(\"right/dpad/west2\");\nconst rDpadCenter2 = v(\"right/dpad/center2\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst rightCursorDrop1 = v(\"right/cursorDrop1\");\nconst rightCursorDrop2 = v(\"right/cursorDrop2\");\nconst leftCursorDrop1 = v(\"left/cursorDrop1\");\nconst leftCursorDrop2 = v(\"left/cursorDrop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\nconst rightUndoDrawing = v(\"right/drawing/undo\");\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\nconst ensureFrozenViaButtons = v(\"buttons/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\nconst thawViaButtons = v(\"buttons/thaw\");\n\nconst freezeButtons = v(\"buttons/freeze\");\nconst inspectButtons = v(\"buttons/inspect\");\n\nconst rSnapRight1 = v(\"right/snap-right\");\nconst rSnapLeft1 = v(\"right/snap-left\");\nconst rSnapRight2 = v(\"right/snap-right2\");\nconst rSnapLeft2 = v(\"right/snap-left2\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.vive.left.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.vive.right.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard, ensureFrozenViaButtons],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard, thawViaButtons],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"primary\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"primary\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"touchX\"),\n        y: lAxis(\"touchY\")\n      },\n      dest: {\n        value: lTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lTouch\n      },\n      dest: {\n        north: lDpadNorth1,\n        south: lDpadSouth1,\n        east: lDpadEast1,\n        west: lDpadWest1,\n        center: lDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"touchX\"),\n        y: rAxis(\"touchY\")\n      },\n      dest: {\n        value: rTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rTouch\n      },\n      dest: {\n        north: rDpadNorth1,\n        south: rDpadSouth1,\n        east: rDpadEast1,\n        west: rDpadWest1,\n        center: rDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth2,\n        south: rDpadSouth2,\n        east: rDpadEast2,\n        west: rDpadWest2,\n        center: rDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth1, rDpadSouth1, rDpadCenter1],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast1\n      },\n      dest: {\n        value: rSnapRight1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadEast2\n      },\n      dest: {\n        value: rSnapRight2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight1, rSnapRight2, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest1\n      },\n      dest: {\n        value: rSnapLeft1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadWest2\n      },\n      dest: {\n        value: rSnapLeft2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft1, rSnapLeft2, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\")\n      },\n      dest: {\n        value: lTouchXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lTouchY\n      },\n      dest: { value: lTouchYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lTouchXScaled,\n        y: lTouchYScaled\n      },\n      dest: { value: lTouchScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lTouchScaled\n      },\n      dest: { value: touchCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lJoyScaled,\n        second: touchCharacterAcceleration\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"primary\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"primary\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: [\n        lButton(\"primary\").pressed,\n        lButton(\"trigger\").pressed,\n        lButton(\"grip\").pressed,\n        lButton(\"touchpad\").pressed\n      ],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rButton(\"primary\").pressed,\n        rButton(\"trigger\").pressed,\n        rButton(\"grip\").pressed,\n        rButton(\"touchpad\").pressed\n      ],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rButton(\"secondary\").pressed,\n        lButton(\"secondary\").pressed,\n        rButton(\"bumper\").pressed,\n        lButton(\"bumper\").pressed\n      ],\n      dest: { value: freezeButtons },\n      xform: xforms.any\n    },\n    {\n      src: [rButton(\"primary\").pressed, lButton(\"primary\").pressed],\n      dest: { value: inspectButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: freezeButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: freezeButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [],\n\n  [sets.leftCursorHoveringOnNothing]: [],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: lAxis(\"touchY\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter1\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth1\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth1\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: [rButton(\"primary\").pressed, lButton(\"secondary\").pressed],\n      dest: { value: leftUndoDrawing },\n      xform: xforms.any,\n      priority: 1\n    },\n    {\n      src: { value: leftUndoDrawing },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: lButton(\"primary\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any\n    },\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any\n    },\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: rightCursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: {\n        value: leftCursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(-0.02)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightCursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [rightCursorDrop1, rightCursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: {\n        value: lAxis(\"touchY\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(-0.02),\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.leftCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: [rightCursorDrop1],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [rightCursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.right.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.right.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"primary\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: [leftCursorDrop1],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.left.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.left.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: lButton(\"primary\").pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: [lButton(\"primary\").pressed, rButton(\"secondary\").pressed],\n      dest: { value: rightUndoDrawing },\n      xform: xforms.any,\n      priority: 1\n    },\n    {\n      src: { value: rightUndoDrawing },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rButton(\"primary\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.leftCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n  [sets.inspecting]: [\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ]\n});\n\nexport const viveWandUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n\nexport const indexUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ]\n});\n\nexport const viveFocusPlusUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.negate\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n\nexport const viveCosmosUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: {\n        x: lAxis(\"joyX\"),\n        y: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoy\n      },\n      xform: xforms.compose_vec2,\n      priority: 1\n    },\n    {\n      src: {\n        value: lJoy\n      },\n      dest: {\n        north: lDpadNorth2,\n        south: lDpadSouth2,\n        east: lDpadEast2,\n        west: lDpadWest2,\n        center: lDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lDpadEast2,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.leftHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lDpadWest2,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.leftHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1),\n      priority: 1\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rDpadEast2 },\n      dest: { value: paths.actions.rightHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rDpadWest2 },\n      dest: { value: paths.actions.rightHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = forCursor ? paths.actions.cursor[hand] : paths.actions[hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.2)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.2)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction cursorMediaVolumeModBindings() {\n  const hand = \"right\";\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padCenterStrip } = dpadVariables(hand);\n\n  return [\n    ...dpadBindings(hand),\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: paths.actions.cursor[hand].mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = forCursor ? paths.actions.cursor[hand] : paths.actions[hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.rightCursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [...cursorMediaVolumeModBindings()],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightCursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.rightCursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.rightCursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.rightCursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst scaledRightJoystickVertical = paths.device.xbox.v(\"scaledRightJoystickVertical\");\nconst scaledLeftJoystickCursorDelta = paths.device.xbox.v(\"scaledLeftJoystickCursorDelta\");\nconst scaledRightJoystickHorizontal = paths.device.xbox.v(\"scaledRightJoystickHorizontal\");\nconst deadzonedRightJoystickHorizontal = paths.device.xbox.v(\"deadzonedRightJoystickHorizontal\");\nconst deadzonedRightJoystickVertical = paths.device.xbox.v(\"deadzonedRightJoystickVertical\");\nconst deadzonedLeftJoystickHorizontal = paths.device.xbox.v(\"deadzonedLeftJoystickHorizontal\");\nconst deadzonedLeftJoystickVertical = paths.device.xbox.v(\"deadzonedLeftJoystickVertical\");\nconst vec2Zero = paths.device.xbox.v(\"vec2Zero\");\nconst zero = paths.device.xbox.v(\"zero\");\n\nfunction characterAccelerationBindings(disableForwardOnTrigger) {\n  const scaledLeftJoystickHorizontal = paths.device.xbox.v(\"scaledLeftJoystickHorizontal\");\n  const scaledLeftJoystickVertical = paths.device.xbox.v(\"scaledLeftJoystickVertical\");\n  const scaledLeftJoystickForwardAcceleration = paths.device.xbox.v(\"scaledLeftJoystickForwardAcceleration\");\n  return [\n    {\n      src: { value: deadzonedLeftJoystickHorizontal },\n      dest: { value: scaledLeftJoystickHorizontal },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickVertical\n      },\n      dest: { value: scaledLeftJoystickForwardAcceleration },\n      xform: disableForwardOnTrigger ? xforms.copyIfFalse : xforms.copy\n    },\n    {\n      src: {\n        x: scaledLeftJoystickHorizontal,\n        y: scaledLeftJoystickForwardAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    }\n  ];\n}\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.right.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.right.penPrevColor },\n      xform: xforms.rising\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: axis(\"rightJoystickHorizontal\") },\n      dest: { value: deadzonedRightJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickHorizontal },\n      dest: { value: scaledRightJoystickHorizontal },\n      xform: xforms.scale(-0.125) // horizontal look speed modifier\n    },\n    {\n      src: { value: axis(\"rightJoystickVertical\") },\n      dest: { value: deadzonedRightJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickVertical },\n      dest: { value: scaledRightJoystickVertical },\n      xform: xforms.scale(-0.125) // vertical look speed modifier\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: {\n        x: scaledRightJoystickHorizontal,\n        y: scaledRightJoystickVertical\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: axis(\"leftJoystickHorizontal\") },\n      dest: { value: deadzonedLeftJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: deadzonedLeftJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: {},\n      dest: { value: vec2Zero },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: vec2Zero },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: button(\"start\").pressed },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.startGazeTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.stopGazeTeleport },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightCursorHoldingNothing]: [...characterAccelerationBindings()],\n  [sets.rightCursorHoldingInteractable]: [\n    ...characterAccelerationBindings(true),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickCursorDelta },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickCursorDelta\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copyIfTrue\n    }\n  ],\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    ...characterAccelerationBindings(),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.right.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.right.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.daydream.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: grabBinding,\n  [sets.rightCursorHoveringOnUI]: grabBinding,\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.right.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.right.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.rightCursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const cardboardUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadButton = device.button(\"touchpad\");\n  const triggerButton = device.button(\"trigger\");\n  const touchpadX = device.axis(\"touchpadX\");\n  const touchpadXForPen = device.axis(\"touchpadXForPen\");\n  const touchpadY = device.axis(\"touchpadY\");\n  const touchpadYForPen = device.axis(\"touchpadYForPen\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n  const dpadBottomCenterStrip = device.v(\"dpad/bottomCenterStrip\");\n  const togglePen = \"/vars/oculus-go/togglePen\";\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.right.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n  const dropBinding = {\n    src: {\n      value: triggerFalling\n    },\n    dest: { value: paths.actions.cursor.right.drop },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: { value: device.matrix },\n        dest: { value: paths.actions.rightHand.matrix },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: touchpadX,\n          y: touchpadY\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: { value: touchpadX },\n        dest: { value: touchpadXForPen },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadY },\n        dest: { value: touchpadYForPen },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadBottomCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: [dpadNorth, dpadBottomCenterStrip],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadButton.pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.right.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadButton.touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.rightCursorHoveringOnInteractable]: [grabBinding],\n    [sets.rightCursorHoveringOnUI]: [grabBinding],\n    [sets.rightCursorHoldingUI]: [dropBinding],\n    [sets.rightCursorHoveringOnVideo]: [\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n        xform: xforms.touch_axis_scroll(-0.1)\n      }\n    ],\n\n    [sets.rightCursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.right.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.rightCursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.right.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.right.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: touchpadXForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.scalePenTip },\n        xform: xforms.touch_axis_scroll(0.1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadYForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.modDelta },\n        xform: xforms.touch_axis_scroll(1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadBottomCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: togglePen },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.cursor.right.drop },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.pen.remove },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.rightCursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.right.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\nimport { isUI } from \"./../interactions\";\nimport { CAMERA_MODE_INSPECT } from \"../camera-system\";\nimport qsTruthy from \"../../utils/qs_truthy\";\nconst debugUserInput = qsTruthy(\"dui\");\n\nlet leftTeleporter, rightTeleporter;\n\nexport function resolveActionSets() {\n  leftTeleporter =\n    leftTeleporter ||\n    (document.getElementById(\"player-left-controller\") &&\n      document.getElementById(\"player-left-controller\").components.teleporter);\n  rightTeleporter =\n    rightTeleporter ||\n    (document.getElementById(\"player-right-controller\") &&\n      document.getElementById(\"player-right-controller\").components.teleporter);\n  if (!leftTeleporter || !rightTeleporter) return;\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  const { leftHand, rightHand, rightRemote, leftRemote } = AFRAME.scenes[0].systems.interaction.state;\n\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHand.held);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHand.held);\n  userinput.toggleSet(sets.leftCursorHoldingInteractable, leftRemote.held);\n  userinput.toggleSet(sets.rightCursorHoldingInteractable, rightRemote.held);\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnNothing,\n    !leftRemote.held && !leftRemote.hovered && !leftHand.held && !leftHand.hovered\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnNothing,\n    !rightRemote.held && !rightRemote.hovered && !rightHand.held && !rightHand.hovered\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnNothing,\n    !leftHand.held && !leftHand.hovered && !leftRemote.held && !leftRemote.hovered\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnNothing,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && !rightRemote.hovered\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnPen,\n    !leftHand.held &&\n      leftHand.hovered &&\n      leftHand.hovered.components.tags &&\n      leftHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnPen,\n    !rightHand.held &&\n      rightHand.hovered &&\n      rightHand.hovered.components.tags &&\n      rightHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnPen,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components.tags &&\n      leftRemote.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components.tags &&\n      rightRemote.hovered.components.tags.data.isPen\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnCamera,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnCamera,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnCamera,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnCamera,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"camera-tool\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnInteractable,\n    !leftHand.held &&\n      leftHand.hovered &&\n      ((leftHand.hovered.components.tags && leftHand.hovered.components.tags.data.offersHandConstraint) ||\n        leftHand.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnInteractable,\n    !rightHand.held &&\n      rightHand.hovered &&\n      ((rightHand.hovered.components.tags && rightHand.hovered.components.tags.data.offersHandConstraint) ||\n        rightHand.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnInteractable,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      ((leftRemote.hovered.components.tags && leftRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        (leftRemote.hovered.components.tags && leftRemote.hovered.components.tags.data.togglesHoveredActionSet) ||\n        leftRemote.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnInteractable,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      ((rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        (rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.togglesHoveredActionSet) ||\n        rightRemote.hovered.components[\"super-spawner\"])\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnVideo,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnVideo,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnVideo,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnVideo,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"media-video\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoldingPen,\n    leftHand.held && leftHand.held.components.tags && leftHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoldingPen,\n    rightHand.held && rightHand.held.components.tags && rightHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoldingPen,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      leftRemote.held &&\n      leftRemote.held.components.tags &&\n      leftRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHand.held && leftHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHand.held && rightHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(\n    sets.leftCursorHoldingCamera,\n    !leftHand.held && !leftHand.hovered && leftRemote.held && leftRemote.held.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingCamera,\n    !rightHand.held && !rightHand.hovered && rightRemote.held && rightRemote.held.components[\"camera-tool\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnUI,\n    !leftHand.held && !leftHand.hovered && !leftRemote.held && isUI(leftRemote.hovered)\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnUI,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && isUI(rightRemote.hovered)\n  );\n\n  userinput.toggleSet(sets.leftCursorHoldingNothing, !leftHand.held && !leftRemote.held);\n  userinput.toggleSet(sets.rightCursorHoldingNothing, !rightHand.held && !rightRemote.held);\n\n  userinput.toggleSet(\n    sets.leftCursorHoldingUI,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      leftRemote.held &&\n      leftRemote.held.components.tags &&\n      leftRemote.held.components.tags.data.holdableButton\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.holdableButton\n  );\n\n  userinput.toggleSet(sets.leftHandTeleporting, leftTeleporter.isTeleporting);\n  userinput.toggleSet(sets.rightHandTeleporting, rightTeleporter.isTeleporting);\n\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" ||\n      document.activeElement.nodeName === \"TEXTAREA\" ||\n      document.activeElement.contentEditable === \"true\"\n  );\n\n  userinput.toggleSet(sets.debugUserInput, debugUserInput);\n\n  if (AFRAME.scenes[0] && AFRAME.scenes[0].systems[\"hubs-systems\"]) {\n    userinput.toggleSet(\n      sets.inspecting,\n      AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT\n    );\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame.setValueType(buttonPath.pressed, !!button.pressed);\n        frame.setValueType(buttonPath.touched, !!button.touched);\n        frame.setValueType(buttonPath.value, button.value);\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame.setValueType(paths.device.gamepad(this.gamepad.index).axis(i), axis);\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { WebXRControllerDevice } from \"./devices/webxr-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport { webXRUserBindings } from \"./bindings/webxr-user\";\nimport {\n  viveUserBindings,\n  viveWandUserBindings,\n  indexUserBindings,\n  viveFocusPlusUserBindings,\n  viveCosmosUserBindings\n} from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\nimport { cardboardUserBindings } from \"./bindings/cardboard-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"../../utils/vr-caps-detect\";\nimport { hackyMobileSafariTest } from \"../../utils/detect-touchscreen\";\nimport { ArrayBackedSet } from \"./array-backed-set\";\n\nfunction arrayContentsDiffer(a, b) {\n  if (a.length !== b.length) return true;\n\n  for (let i = 0, il = a.length; i < il; i++) {\n    const elem = a[i];\n    let found = false;\n\n    for (let j = 0, jl = b.length; j < jl; j++) {\n      if (elem === b[j]) {\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) return true;\n  }\n\n  return false;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction notEmpty(s) {\n  return s !== \"\";\n}\n\nfunction isSubpath(subpath, path) {\n  const a = subpath.split(\"/\").filter(notEmpty);\n  const b = path.split(\"/\").filter(notEmpty);\n  if (a.length > b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1 && isSubpath(maskerPath, maskedPath)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = new Array(bindings.length);\n  for (let row = 0; row < bindings.length; row++) {\n    const masksRow = (masks[row] = []);\n    const bindingsRow = bindings[row];\n    for (let col = 0; col < bindings.length; col++) {\n      if (canMask(bindings[col], bindingsRow)) {\n        masksRow.push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.includes(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    const maskedRow = (masked[row] = []);\n    const masksRow = masks[row];\n    for (let col = 0; col < sortedBindings.length; col++) {\n      if (actives[col] && masksRow.indexOf(col) !== -1) {\n        maskedRow.push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    if (!this.frame) return;\n    return this.frame.get(path);\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push(set);\n    this.pendingSetChanges.push(!!value);\n  },\n\n  init() {\n    this.frame = {\n      generation: 0,\n      values: {},\n      generations: {},\n      get: function(path) {\n        if (this.generations[path] !== this.generation) return undefined;\n        return this.values[path];\n      },\n      setValueType: function(path, value) {\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setVector2: function(path, a, b) {\n        const value = this.values[path] || [];\n        value[0] = a;\n        value[1] = b;\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setPose: function(path, pose) {\n        this.setValueType(path, pose);\n      },\n      setMatrix4: function(path, mat4) {\n        // Should we assume the incoming mat4 is safe to store instead of copying values?\n        const value = this.values[path] || new THREE.Matrix4();\n        value.copy(mat4);\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      }\n    };\n\n    this.prevActiveSets = [];\n    this.activeSets = [sets.global];\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new ArrayBackedSet([new HudDevice()]);\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    const forceEnableTouchscreen = hackyMobileSafariTest();\n\n    if (!(isMobile || isMobileVR || forceEnableTouchscreen)) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!isMobileVR || forceEnableTouchscreen) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.isMobile = isMobile;\n    this.isMobileVR = isMobileVR;\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n    vrGamepadMappings.set(WebXRControllerDevice, webXRUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const addExtraMappings = activeDevice => {\n      if (activeDevice instanceof ViveControllerDevice && activeDevice.gamepad) {\n        if (activeDevice.gamepad.id === \"OpenVR Cosmos\") {\n          //HTC Vive Cosmos Controller\n          this.registeredMappings.add(viveCosmosUserBindings);\n        } else if (activeDevice.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n          //HTC Vive Focus Plus Controller\n          this.registeredMappings.add(viveFocusPlusUserBindings);\n        } else if (activeDevice.gamepad.axes.length === 4) {\n          //Valve Index Controller\n          this.registeredMappings.add(indexUserBindings);\n        } else {\n          //HTC Vive Controller (wands)\n          this.registeredMappings.add(viveWandUserBindings);\n        }\n      }\n    };\n\n    const deleteExtraMappings = activeDevice => {\n      if (activeDevice instanceof ViveControllerDevice && activeDevice.gamepad) {\n        this.registeredMappings.delete(viveCosmosUserBindings);\n        this.registeredMappings.delete(viveFocusPlusUserBindings);\n        this.registeredMappings.delete(indexUserBindings);\n        this.registeredMappings.delete(viveWandUserBindings);\n      }\n    };\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n      const forceEnableTouchscreen = hackyMobileSafariTest();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(\n          isMobile || forceEnableTouchscreen ? touchscreenUserBindings : keyboardMouseUserBindings\n        );\n        // add mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n          addExtraMappings(activeDevice);\n        }\n\n        // Handle cardboard by looking of VR device caps\n        if (isMobile) {\n          getAvailableVREntryTypes().then(availableVREntryTypes => {\n            if (availableVREntryTypes.cardboard === VR_DEVICE_AVAILABILITY.yes) {\n              this.registeredMappings.add(cardboardUserBindings);\n              this.registeredMappingsChanged = true;\n            }\n          });\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          deleteExtraMappings(activeDevice);\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(\n          isMobile || forceEnableTouchscreen ? touchscreenUserBindings : keyboardMouseUserBindings\n        );\n      }\n\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        if (!e.gamepad.isWebXRGamepad && activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      if (e.gamepad.isWebXRGamepad) {\n        gamepadDevice = new WebXRControllerDevice(e.gamepad);\n      } else if (\n        // HACK Firefox Nightly bug causes corrupt gamepad names for OpenVR, so do startsWith\n        e.gamepad.id.startsWith(\"OpenVR Gamepad\") ||\n        e.gamepad.id.startsWith(\"OpenVR Knuckles\") ||\n        e.gamepad.id === \"HTC Vive Focus Plus Controller\" ||\n        e.gamepad.id === \"OpenVR Cosmos\"\n      ) {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\") || e.gamepad.id.startsWith(\"Pico Neo 2\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\" || e.gamepad.id === \"Pico G2 Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Gear VR Controller\" || e.gamepad.id === \"HTC Vive Focus Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.mapping === \"standard\") {\n        // Our XboxController device and bindings should be generic enough for most gamepads.\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        // This device doesn't actually have any bindings, but we need to fallback to something.\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const device = this.activeDevices.items[i];\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    const retrieveXRGamepads = ({ added, removed }) => {\n      for (const inputSource of removed) {\n        gamepadDisconnected(inputSource);\n      }\n      for (const inputSource of added) {\n        inputSource.gamepad.isWebXRGamepad = true;\n        inputSource.gamepad.targetRaySpace = inputSource.targetRaySpace;\n        inputSource.gamepad.primaryProfile = inputSource.profiles[0];\n        // inputSource.gamepad.hand is a read-only property and still an experimental property.\n        // We read this property elsewhere. Only Firefox supports this property now.\n        // So we set this property if it's undefined.\n        if (inputSource.gamepad.hand === undefined) {\n          inputSource.gamepad.hand = inputSource.handedness;\n        }\n        gamepadConnected(inputSource);\n      }\n    };\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", () => {\n      const { xrSession } = this.el.sceneEl;\n      if (xrSession) {\n        xrSession.addEventListener(\"inputsourceschange\", retrieveXRGamepads);\n        xrSession.requestReferenceSpace(\"local-floor\").then(referenceSpace => {\n          this.xrReferenceSpace = referenceSpace;\n        });\n        xrSession.addEventListener(\"end\", () => {\n          this.activeDevices.items.filter(d => d.gamepad && d.gamepad.isWebXRGamepad).forEach(gamepadDisconnected);\n        });\n      }\n      updateBindingsForVRMode();\n    });\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  maybeToggleXboxMapping() {\n    if (hackyMobileSafariTest() || this.isMobile || this.isMobileVR) return;\n\n    const vrAxesSum =\n      (this.get(paths.device.vive.left.axesSum) || 0) +\n      (this.get(paths.device.vive.right.axesSum) || 0) +\n      (this.get(paths.device.leftOculusTouch.axesSum) || 0) +\n      (this.get(paths.device.rightOculusTouch.axesSum) || 0);\n    const mouseMovement = this.get(paths.device.mouse.movementXY);\n    const nonXboxActivity = (mouseMovement && (mouseMovement[0] || mouseMovement[1])) > 2 || vrAxesSum > 0.5;\n\n    const hasXboxMapping = this.registeredMappings.has(xboxControllerUserBindings);\n\n    if (nonXboxActivity && hasXboxMapping) {\n      this.registeredMappings.delete(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    } else if (this.get(paths.device.xbox.axesSum) > 0.5 && !hasXboxMapping) {\n      this.registeredMappings.add(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    }\n  },\n\n  tick2() {\n    this.frame.generation += 1;\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.length = 0;\n    for (let i = 0; i < this.activeSets.length; i++) {\n      const item = this.activeSets[i];\n      this.prevActiveSets.push(item);\n    }\n    resolveActionSets();\n    for (let i = 0, l = this.pendingSetChanges.length; i < l; i += 2) {\n      const set = this.pendingSetChanges[i];\n      const value = this.pendingSetChanges[i + 1];\n\n      if (value) {\n        if (!this.activeSets.includes(set)) {\n          this.activeSets.push(set);\n        }\n      } else {\n        const idx = this.activeSets.indexOf(set);\n\n        if (idx > -1) {\n          this.activeSets.splice(idx, 1);\n        }\n      }\n    }\n    const activeSetsChanged = arrayContentsDiffer(this.prevActiveSets, this.activeSets);\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    for (let i = 0; i < this.activeDevices.items.length; i++) {\n      this.activeDevices.items[i].write(this.frame, this.el.sceneEl, this.xrReferenceSpace);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform, debug } = binding;\n\n      let oldValue;\n\n      if (debug) {\n        oldValue = this.frame.get(dest.value);\n      }\n\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n\n      if (debug) {\n        // Note for now this only works with bindings that have { value: } sources and dests\n        console.log(\n          `${JSON.stringify(src.value)} (${src.value && JSON.stringify(this.frame.get(src.value))}) to ${JSON.stringify(\n            dest\n          )}: ${oldValue} -> ${this.frame.get(dest.value)}`\n        );\n      }\n\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n\n    this.maybeToggleXboxMapping();\n  }\n});\n","import { paths } from \"./paths\";\nimport qsTruthy from \"../../utils/qs_truthy\";\n\nconst PATHS_TO_SHOW = [\"/actions/\", \"/device/\", \"/var/\"];\nconst DELIMITER = \"-----------------------------------\";\n\nconst replacer = (k, v) => {\n  if (typeof v === \"number\") {\n    return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n  }\n  return v;\n};\nfunction describeCurrentMasks(userinput) {\n  const strings = [];\n  userinput.masked.forEach((maskers, i) => {\n    let val;\n    if (!userinput.actives[i]) return;\n    if (maskers.length) {\n      val = JSON.stringify(userinput.sortedBindings[i], replacer);\n      strings.push(DELIMITER);\n      strings.push(`Binding #${i}:`);\n      if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n      strings.push(`${val}\\n`);\n    }\n    maskers.forEach(masker => {\n      val = JSON.stringify(userinput.sortedBindings[masker], replacer);\n      if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n      strings.push(`- Masked by #${masker}:\\n${val}`);\n    });\n    if (maskers.length) {\n      strings.push(`\\n`);\n    }\n  });\n  return strings.join(\"\\n\");\n}\n\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame.values) {\n        if (!frame.get(key)) continue;\n        if (!PATHS_TO_SHOW.some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame.get(key), replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.debugUserInput.describeCurrentMasks)) {\n      console.log(describeCurrentMasks(userinput));\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (qsTruthy(\"userinput_debug\") && !this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          z-index: 2;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", JSON.parse(JSON.stringify(userinput.sortedBindings)));\n      console.log(\"actives\", JSON.parse(JSON.stringify(userinput.actives)));\n      console.log(\"masks\", JSON.parse(JSON.stringify(userinput.masks)));\n      console.log(\"masked\", JSON.parse(JSON.stringify(userinput.masked)));\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", JSON.parse(JSON.stringify(userinput.activeSets)));\n      console.log(\"frame\", JSON.parse(JSON.stringify(userinput.frame)));\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const strings = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            strings.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            JSON.parse(JSON.stringify(sortedBindings[i])),\n            \"\\n\",\n            \"dest: \",\n            JSON.parse(JSON.stringify(sortedBindings[i].dest && Object.values(sortedBindings[i].dest))),\n            \"\\n\",\n            \"active: \",\n            JSON.parse(JSON.stringify(actives[i])),\n            \"\\n\",\n            \"maskedBy: \",\n            JSON.parse(JSON.stringify(masked[i])),\n            \"\\n\",\n            strings.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nimport { SOURCES } from \"../storage/media-search-store\";\n\nconst MEDIA_SEARCH_PATHS = [\n  paths.actions.mediaSearch1,\n  paths.actions.mediaSearch2,\n  paths.actions.mediaSearch3,\n  paths.actions.mediaSearch4,\n  paths.actions.mediaSearch5,\n  paths.actions.mediaSearch6,\n  paths.actions.mediaSearch7,\n  paths.actions.mediaSearch8\n];\n\n// Every frame, looks for input paths that trigger UI-relevant events and handles them.\nAFRAME.registerSystem(\"ui-hotkeys\", {\n  init() {\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n  },\n\n  tick: function() {\n    if (!this.userinput) {\n      this.userinput = this.el.systems.userinput;\n    }\n\n    if (this.userinput.get(paths.actions.focusChat)) {\n      window.dispatchEvent(new CustomEvent(\"focus_chat\", { detail: { prefix: \"\" } }));\n    }\n\n    if (this.userinput.get(paths.actions.focusChatCommand)) {\n      window.dispatchEvent(new CustomEvent(\"focus_chat\", { detail: { prefix: \"/\" } }));\n    }\n\n    if (this.userinput.get(paths.actions.mediaExit)) {\n      const state = window.APP.history.location.state && window.APP.history.location.state.value;\n      const ignoredStates = new Set([\"avatar-editor\", \"link\", \"profile\", \"device\", \"audio\"]);\n      const maybeInMediaBrowser = !state || !ignoredStates.has(state);\n      if (maybeInMediaBrowser) {\n        // Do not push \"exit media browser\" to history\n        // if we know we are NOT in the media browser.\n        // TODO: If we set the state to \"media browser\"\n        //       while the media browser is open, then we\n        //       can check that condition directly.\n        //       Until then, we push \"exit media browser\"\n        //       to the history if state is undefined.\n        this.mediaSearchStore.pushExitMediaBrowserHistory();\n      }\n\n      this.el.emit(\"action_exit_watch\");\n    }\n\n    for (let i = 0; i < MEDIA_SEARCH_PATHS.length; i++) {\n      if (this.userinput.get(MEDIA_SEARCH_PATHS[i]) && window.APP.hubChannel.can(\"spawn_and_move_media\")) {\n        this.mediaSearchStore.sourceNavigate(SOURCES[i]);\n      }\n    }\n\n    if (this.userinput.get(paths.actions.toggleCamera)) {\n      this.el.emit(\"action_toggle_camera\");\n    }\n\n    if (this.userinput.get(paths.actions.toggleUI)) {\n      this.el.emit(\"action_toggle_ui\");\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\n\n// The output of this system is activeTip. There are named tips (eg locomotion) that each have validators.\n//\n// Each frame we run all the non-finished validators and take the first tip (by order)\n// which is VALID. Any tip that returns FINISHED will no longer be considered without\n// a local storage reset.\n\n// Validators can return these values:\n//\n// INVALID - Tip is not valid to show\n// VALID - Tip is valid to show\n// FINISH - Tip should always be assumed INVALID going forward\n//\nconst INVALID = 0;\nconst VALID = 1;\nconst FINISH = 2;\n\nconst LOCAL_STORAGE_KEY = \"__hubs_finished_tips\";\n\nconst TIPS = {\n  desktop: [\"look\", \"locomotion\", \"turning\", \"invite\"],\n  mobile: [\"look\", \"locomotion\", \"invite\"],\n  standalone: []\n};\n\nlet localStorageCache = null;\nlet finished = false; // Optimization, lets system skip altogether once finished.\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst tipPlatform = () => {\n  if (isMobileVR) return \"standalone\";\n  return isMobile ? \"mobile\" : \"desktop\";\n};\n\nconst platformTips = TIPS[tipPlatform()];\n\nfunction markTipFinished(tip) {\n  const storeData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  storeData[tip] = { finished: true };\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storeData));\n  localStorageCache = null;\n}\n\nconst VALIDATORS = {\n  look: function(userinput) {\n    const cameraDelta = userinput.get(\n      isMobile ? paths.device.touchscreen.touchCameraDelta : paths.device.smartMouse.cameraDelta\n    );\n    return cameraDelta ? FINISH : VALID;\n  },\n  locomotion: function(userinput) {\n    const accel = userinput.get(paths.actions.characterAcceleration);\n\n    // User moved\n    return accel && (accel[0] !== 0 || accel[1] !== 0) ? FINISH : VALID;\n  },\n  turning: function(userinput) {\n    if (userinput.get(paths.actions.snapRotateLeft) || userinput.get(paths.actions.snapRotateRight)) return FINISH;\n    return VALID;\n  },\n  invite: function(_userinput, scene, hub) {\n    if (hub && hub.entry_mode === \"invite\") return INVALID;\n    return scene.is(\"copresent\") ? FINISH : VALID;\n  }\n};\n\nAFRAME.registerSystem(\"tips\", {\n  init: function() {\n    this.activeTip = null;\n    this._performStep = this._performStep.bind(this);\n\n    if (localStorage.getItem(LOCAL_STORAGE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    }\n  },\n\n  resetTips: function() {\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    localStorageCache = null;\n    window.APP.store.resetTipActivityFlags();\n    window.APP.store.resetConfirmedBroadcastedRooms();\n    this.activeTip = null;\n    finished = false;\n  },\n\n  skipTips: function() {\n    for (let i = 0; i < platformTips.length; i++) {\n      const tipId = platformTips[i];\n      markTipFinished(tipId);\n    }\n  },\n\n  tick: function() {\n    if (isMobileVR) return; // Optimization for now, don't bother with this on mobile VR until we have real tips\n\n    if (!this._userinput) {\n      this._userinput = this.el.systems.userinput;\n\n      if (!this._userinput) return;\n    }\n\n    const tips = platformTips;\n\n    const prevTip = this.activeTip;\n\n    this._performStep(tips);\n\n    if (prevTip !== this.activeTip) {\n      this.el.emit(\"tip-changed\", this.activeTip);\n    }\n  },\n\n  _performStep: function(tips) {\n    if (finished) return;\n\n    let chosenTip = null;\n    let finishCount = 0;\n\n    for (let i = 0; i < tips.length; i++) {\n      const tip = tips[i];\n\n      if (localStorageCache === null) {\n        localStorageCache = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n      }\n\n      if (localStorageCache[tip] && localStorageCache[tip].finished) {\n        finishCount++;\n        continue;\n      }\n\n      switch (VALIDATORS[tip](this._userinput, this.el, window.APP.hub)) {\n        case FINISH:\n          markTipFinished(tip);\n          break;\n        case VALID:\n          chosenTip = `tips.${tipPlatform()}.${tip}`;\n          break;\n      }\n\n      if (chosenTip) break;\n    }\n\n    this.activeTip = chosenTip;\n\n    if (finishCount === tips.length) {\n      // Optimization: Tips are completed no need to re-walk.\n      finished = true;\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst noop = function() {};\nAFRAME.registerComponent(\"overwrite-raycast-as-noop\", {\n  init() {\n    this.el.object3D.raycast = noop;\n    this.mesh = this.el.getObject3D(\"mesh\");\n    if (this.mesh) {\n      this.mesh.raycast = noop;\n    } else {\n      this.el.addEventListener(\"model-loaded\", () => {\n        this.mesh = this.el.getObject3D(\"mesh\");\n        if (this.mesh) {\n          this.mesh.raycast = noop;\n        }\n      });\n    }\n  }\n});\n\nexport class CursorTargettingSystem {\n  constructor() {\n    this.targets = [];\n    this.dirty = true;\n    this.onMutation = this.onMutation.bind(this);\n    this.onObject3DSet = this.onObject3DSet.bind(this);\n    this.onObject3DRemove = this.onObject3DRemove.bind(this);\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.onMutation);\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.getElementById(\"right-cursor-controller\");\n      this.leftRemote = document.getElementById(\"left-cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.onObject3DSet);\n      scene.addEventListener(\"object3dremove\", this.onObject3DRemove);\n    });\n  }\n\n  tick(t) {\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n\n    if (this.rightRemote) {\n      this.rightRemote.components[\"cursor-controller\"].tick2(t);\n    }\n\n    if (this.leftRemote) {\n      this.leftRemote.components[\"cursor-controller\"].tick2(t, true);\n    }\n  }\n\n  onObject3DSet() {\n    this.dirty = true;\n  }\n\n  onObject3DRemove() {\n    this.dirty = true;\n  }\n\n  onMutation(records) {\n    // let's try to avoid re-querying the targets on attribute changes we know we can ignore\n    if (records.some(r => r.type === \"childList\" || (r.type === \"attributes\" && r.attributeName === \"class\"))) {\n      this.dirty = true;\n    }\n  }\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\n      \".collidable, .interactable, .ui, .drawing, .occupiable-waypoint-icon, .teleport-waypoint-icon, .avatar-inspect-collider\"\n    );\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  }\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.onObject3DSet);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.onObject3DRemove);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { isTagged } from \"../components/tags\";\nimport { CAMERA_MODE_INSPECT } from \"../systems/camera-system\";\nimport { hackyMobileSafariTest } from \"../utils/detect-touchscreen\";\n\nfunction shouldEnableRemote(scene, hand, remote, teleporting, woke) {\n  const vrRemotePenIntersection =\n    scene.is(\"vr-mode\") && isTagged(remote.held, \"isPen\") && remote.held.children[0].components.pen.intersection;\n  return scene.is(\"entered\") && !hand.hovered && !hand.held && !teleporting && !vrRemotePenIntersection && woke;\n}\n\nexport class CursorTogglingSystem {\n  constructor() {\n    this.wakeLeft = false;\n    this.wakeRight = false;\n\n    waitForDOMContentLoaded().then(() => {\n      this.domContentLoadedButComponentsMayNotHave = true;\n    });\n  }\n\n  tick(interaction, userinput, scene) {\n    if (!this.domContentLoadedButComponentsMayNotHave) return;\n    if (!this.gotComponentReferences) {\n      this.gotComponentReferences = true;\n      this.rightCursorController = document.getElementById(\"right-cursor-controller\").components[\"cursor-controller\"];\n      this.leftCursorController = document.getElementById(\"left-cursor-controller\").components[\"cursor-controller\"];\n      this.rightHandTeleporter = document.getElementById(\"player-right-controller\").components[\"teleporter\"];\n      this.leftHandTeleporter = document.getElementById(\"player-left-controller\").components[\"teleporter\"];\n      this.gazeTeleporter = document.getElementById(\"gaze-teleport\").components[\"teleporter\"];\n    }\n\n    const rightRemote = interaction.state.rightRemote;\n    const leftRemote = interaction.state.leftRemote;\n    const leftHand = interaction.state.leftHand;\n    const rightHand = interaction.state.rightHand;\n\n    if (userinput.get(paths.actions.cursor.right.wake)) {\n      this.wakeRight = true;\n      if (!leftRemote.held) {\n        this.wakeLeft = false;\n      }\n    }\n\n    if (userinput.get(paths.actions.cursor.left.wake)) {\n      this.wakeLeft = true;\n      if (!rightRemote.held) {\n        this.wakeRight = false;\n      }\n    }\n\n    const inspecting = interaction.el.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT;\n    const shouldEnableLeftRemote =\n      !inspecting &&\n      shouldEnableRemote(\n        scene,\n        leftHand,\n        leftRemote,\n        this.leftHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting,\n        this.wakeLeft\n      );\n    const isMobile = AFRAME.utils.device.isMobile();\n    const shouldEnableRightRemote =\n      isMobile ||\n      hackyMobileSafariTest() ||\n      (!inspecting &&\n        shouldEnableRemote(\n          scene,\n          rightHand,\n          rightRemote,\n          this.rightHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting,\n          this.wakeRight\n        ));\n\n    if (!shouldEnableLeftRemote) {\n      leftRemote.hovered = null;\n    }\n    if (!shouldEnableRightRemote) {\n      rightRemote.hovered = null;\n    }\n    this.leftCursorController.enabled = shouldEnableLeftRemote;\n    this.rightCursorController.enabled = shouldEnableRightRemote;\n  }\n}\n","import { AmmoWorker, WorkerHelpers, CONSTANTS } from \"three-ammo\";\nimport { AmmoDebugConstants, DefaultBufferSize } from \"ammo-debug-drawer\";\nimport configs from \"../utils/configs\";\nimport * as ammoWasmUrl from \"ammo.js/builds/ammo.wasm.wasm\";\n\nconst MESSAGE_TYPES = CONSTANTS.MESSAGE_TYPES,\n  TYPE = CONSTANTS.TYPE,\n  BUFFER_CONFIG = CONSTANTS.BUFFER_CONFIG;\n\nconst WORLD_CONFIG = {\n  debugDrawMode: AmmoDebugConstants.DrawWireframe,\n  gravity: { x: 0, y: -9.8, z: 0 }\n};\n\nconst MAX_BODIES = 512;\n\nexport class PhysicsSystem {\n  constructor(scene) {\n    this.ammoWorker = new AmmoWorker();\n    this.workerHelpers = new WorkerHelpers(this.ammoWorker);\n\n    this.bodyHelpers = [];\n    this.shapeHelpers = [];\n    this.bodyUuids = [];\n    this.indexToUuid = {};\n    this.bodyUuidToData = new Map();\n\n    this.debugRequested = false;\n    this.debugEnabled = false;\n    this.scene = scene;\n    this.stepDuration = 0;\n\n    this.ready = false;\n    this.nextBodyUuid = 0;\n    this.nextShapeUuid = 0;\n\n    const arrayBuffer = new ArrayBuffer(4 * BUFFER_CONFIG.BODY_DATA_SIZE * MAX_BODIES);\n    this.objectMatricesFloatArray = new Float32Array(arrayBuffer);\n    this.objectMatricesIntArray = new Int32Array(arrayBuffer);\n\n    this.ammoWorker.postMessage(\n      {\n        type: MESSAGE_TYPES.INIT,\n        worldConfig: WORLD_CONFIG,\n        arrayBuffer,\n        maxBodies: MAX_BODIES,\n        wasmUrl: new URL(ammoWasmUrl, configs.BASE_ASSETS_PATH || window.location).href\n      },\n      [arrayBuffer]\n    );\n\n    this.ammoWorker.onmessage = async event => {\n      if (event.data.type === MESSAGE_TYPES.READY) {\n        this.ready = true;\n        for (const bodyHelper of this.bodyHelpers) {\n          if (bodyHelper.alive) bodyHelper.init2();\n        }\n        for (const shapeHelper of this.shapeHelpers) {\n          if (shapeHelper.alive) shapeHelper.init2();\n        }\n        this.shapeHelpers.length = 0;\n        this.bodyHelpers.length = 0;\n      } else if (event.data.type === MESSAGE_TYPES.BODY_READY) {\n        const uuid = event.data.uuid;\n        const index = event.data.index;\n        if (this.bodyUuidToData.has(uuid)) {\n          this.bodyUuids.push(uuid);\n          this.bodyUuidToData.get(uuid).index = index;\n          this.indexToUuid[index] = uuid;\n        } else {\n          console.warn(`Body initialized for uuid: ${uuid} but body missing.`);\n        }\n      } else if (event.data.type === MESSAGE_TYPES.SHAPES_READY) {\n        const bodyUuid = event.data.bodyUuid;\n        const shapesUuid = event.data.shapesUuid;\n        if (this.bodyUuidToData.has(bodyUuid)) {\n          this.bodyUuidToData.get(bodyUuid).shapes.push(shapesUuid);\n        } else {\n          console.warn(`Shape initialized but body with uuid: ${bodyUuid} missing.`);\n        }\n      } else if (event.data.type === MESSAGE_TYPES.TRANSFER_DATA) {\n        this.objectMatricesFloatArray = event.data.objectMatricesFloatArray;\n        this.objectMatricesIntArray = new Int32Array(this.objectMatricesFloatArray.buffer);\n        this.stepDuration = event.data.stepDuration;\n      }\n    };\n  }\n\n  setDebug(debug) {\n    this.debugRequested = debug;\n  }\n\n  enableDebug() {\n    if (!window.SharedArrayBuffer) {\n      console.warn(\"Physics debug rendering only available in browsers that support SharedArrayBuffers.\");\n      this.debugRequested = false;\n      return;\n    }\n\n    this.debugEnabled = true;\n\n    if (!this.debugMesh) {\n      this.debugSharedArrayBuffer = new window.SharedArrayBuffer(4 + 2 * DefaultBufferSize * 4);\n      this.debugIndex = new Uint32Array(this.debugSharedArrayBuffer, 0, 4);\n      const debugVertices = new Float32Array(this.debugSharedArrayBuffer, 4, DefaultBufferSize);\n      const debugColors = new Float32Array(this.debugSharedArrayBuffer, 4 + DefaultBufferSize, DefaultBufferSize);\n      this.debugGeometry = new THREE.BufferGeometry();\n      this.debugGeometry.addAttribute(\"position\", new THREE.BufferAttribute(debugVertices, 3));\n      this.debugGeometry.addAttribute(\"color\", new THREE.BufferAttribute(debugColors, 3));\n      const debugMaterial = new THREE.LineBasicMaterial({\n        vertexColors: THREE.VertexColors,\n        depthTest: true\n      });\n      this.debugMesh = new THREE.LineSegments(this.debugGeometry, debugMaterial);\n      this.debugMesh.frustumCulled = false;\n      this.debugMesh.renderOrder = 999;\n    }\n\n    if (!this.debugMesh.parent) {\n      this.scene.add(this.debugMesh);\n      this.workerHelpers.enableDebug(true, this.debugSharedArrayBuffer);\n    }\n  }\n\n  disableDebug() {\n    this.debugEnabled = false;\n    if (this.debugMesh) {\n      this.scene.remove(this.debugMesh);\n      this.workerHelpers.enableDebug(false);\n    }\n  }\n\n  tick = (() => {\n    const transform = new THREE.Matrix4();\n    const inverse = new THREE.Matrix4();\n    const matrix = new THREE.Matrix4();\n    const scale = new THREE.Vector3();\n    return function() {\n      if (this.ready) {\n        if (this.debugRequested !== this.debugEnabled) {\n          if (this.debugRequested) {\n            this.enableDebug();\n          } else {\n            this.disableDebug();\n          }\n        }\n\n        /** Buffer Schema\n         * Every physics body has 26 * 4 bytes (64bit float/int) assigned in the buffer\n         * 0-15   Matrix4 elements (floats)\n         * 16     Linear Velocity (float)\n         * 17     Angular Velocity (float)\n         * 18-25  first 8 Collisions (ints)\n         */\n\n        if (this.objectMatricesFloatArray.buffer.byteLength !== 0) {\n          for (let i = 0; i < this.bodyUuids.length; i++) {\n            const uuid = this.bodyUuids[i];\n            const body = this.bodyUuidToData.get(uuid);\n            const index = body.index;\n            const type = body.options.type ? body.options.type : TYPE.DYNAMIC;\n            const object3D = body.object3D;\n            if (type === TYPE.DYNAMIC) {\n              matrix.fromArray(\n                this.objectMatricesFloatArray,\n                index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.MATRIX_OFFSET\n              );\n              object3D.parent.updateMatrices();\n              inverse.copy(object3D.parent.matrixWorld).invert();\n              transform.multiplyMatrices(inverse, matrix);\n              transform.decompose(object3D.position, object3D.quaternion, scale);\n              object3D.matrixNeedsUpdate = true;\n            }\n\n            object3D.updateMatrices();\n            this.objectMatricesFloatArray.set(\n              object3D.matrixWorld.elements,\n              index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.MATRIX_OFFSET\n            );\n\n            body.linearVelocity = this.objectMatricesFloatArray[\n              index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.LINEAR_VELOCITY_OFFSET\n            ];\n\n            body.angularVelocity = this.objectMatricesFloatArray[\n              index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.ANGULAR_VELOCITY_OFFSET\n            ];\n\n            body.collisions.length = 0;\n\n            for (let j = BUFFER_CONFIG.COLLISIONS_OFFSET; j < BUFFER_CONFIG.BODY_DATA_SIZE; j++) {\n              const collidingIndex = this.objectMatricesIntArray[index * BUFFER_CONFIG.BODY_DATA_SIZE + j];\n              if (collidingIndex !== -1) {\n                body.collisions.push(this.indexToUuid[collidingIndex]);\n              }\n            }\n          }\n\n          this.ammoWorker.postMessage(\n            { type: MESSAGE_TYPES.TRANSFER_DATA, objectMatricesFloatArray: this.objectMatricesFloatArray },\n            [this.objectMatricesFloatArray.buffer]\n          );\n        }\n\n        /* DEBUG RENDERING */\n        if (this.debugEnabled) {\n          const index = window.Atomics.load(this.debugIndex, 0);\n          if (index !== 0) {\n            this.debugGeometry.attributes.position.needsUpdate = true;\n            this.debugGeometry.attributes.color.needsUpdate = true;\n          }\n          this.debugGeometry.setDrawRange(0, index);\n          window.Atomics.store(this.debugIndex, 0, 0);\n        }\n      }\n    };\n  })();\n\n  addBody(object3D, options) {\n    this.workerHelpers.addBody(this.nextBodyUuid, object3D, options);\n\n    this.bodyUuidToData.set(this.nextBodyUuid, {\n      object3D: object3D,\n      options: options,\n      collisions: [],\n      linearVelocity: 0,\n      angularVelocity: 0,\n      index: -1,\n      shapes: []\n    });\n\n    return this.nextBodyUuid++;\n  }\n\n  updateBody(uuid, options) {\n    if (this.bodyUuidToData.has(uuid)) {\n      this.bodyUuidToData.get(uuid).options = options;\n      this.workerHelpers.updateBody(uuid, options);\n    } else {\n      console.warn(`updateBody called for uuid: ${uuid} but body missing.`);\n    }\n  }\n\n  removeBody(uuid) {\n    const idx = this.bodyUuids.indexOf(uuid);\n    if (this.bodyUuidToData.has(uuid) && idx !== -1) {\n      delete this.indexToUuid[this.bodyUuidToData.get(uuid).index];\n      this.bodyUuidToData.delete(uuid);\n      this.bodyUuids.splice(idx, 1);\n      this.workerHelpers.removeBody(uuid);\n    } else {\n      console.warn(`removeBody called for uuid: ${uuid} but body missing.`);\n    }\n  }\n\n  addShapes(bodyUuid, mesh, options) {\n    if (mesh) {\n      const scale = new THREE.Vector3();\n      mesh.updateMatrices();\n      scale.setFromMatrixScale(mesh.matrixWorld);\n    }\n    this.workerHelpers.addShapes(bodyUuid, this.nextShapeUuid, mesh, options);\n    this.bodyUuidToData.get(bodyUuid).shapes.push(this.nextShapeUuid);\n    return this.nextShapeUuid++;\n  }\n\n  removeShapes(bodyUuid, shapesUuid) {\n    if (this.bodyUuidToData.has(bodyUuid)) {\n      this.workerHelpers.removeShapes(bodyUuid, shapesUuid);\n      const idx = this.bodyUuidToData.get(bodyUuid).shapes.indexOf(shapesUuid);\n      if (idx !== -1) {\n        this.bodyUuidToData.get(bodyUuid).shapes.splice(idx, 1);\n      } else {\n        console.warn(`removeShapes called for shapesUuid: ${shapesUuid} on bodyUuid: ${bodyUuid} but shapes missing.`);\n      }\n    }\n  }\n\n  addConstraint(constraintId, bodyUuid, targetUuid, options) {\n    this.workerHelpers.addConstraint(constraintId, bodyUuid, targetUuid, options);\n  }\n\n  removeConstraint(constraintId) {\n    this.workerHelpers.removeConstraint(constraintId);\n  }\n\n  registerBodyHelper(bodyHelper) {\n    if (this.ready) {\n      bodyHelper.init2();\n    } else {\n      this.bodyHelpers.push(bodyHelper);\n    }\n  }\n\n  registerShapeHelper(shapeHelper) {\n    if (this.ready) {\n      shapeHelper.init2();\n    } else {\n      this.shapeHelpers.push(shapeHelper);\n    }\n  }\n\n  bodyInitialized(uuid) {\n    return this.bodyUuidToData.has(uuid) && this.bodyUuidToData.get(uuid).index !== -1;\n  }\n\n  getLinearVelocity(uuid) {\n    return this.bodyUuidToData.get(uuid).linearVelocity;\n  }\n\n  getAngularVelocity(uuid) {\n    return this.bodyUuidToData.get(uuid).angularVelocity;\n  }\n\n  getCollisions(uuid) {\n    return this.bodyUuidToData.get(uuid).collisions;\n  }\n\n  resetDynamicBody(uuid) {\n    this.workerHelpers.resetDynamicBody(uuid);\n  }\n\n  activateBody(uuid) {\n    this.workerHelpers.activateBody(uuid);\n  }\n}\n","/* global NAF AFRAME */\nimport { CONSTANTS } from \"three-ammo\";\nconst ACTIVATION_STATE = CONSTANTS.ACTIVATION_STATE;\n\nexport class ConstraintsSystem {\n  constructor(physicsSystem) {\n    this.prevLeftHand = {\n      held: null,\n      spawning: false\n    };\n    this.prevRightHand = {\n      held: null,\n      spawning: false\n    };\n    this.prevRightRemote = {\n      held: null,\n      spawning: false\n    };\n    this.prevLeftRemote = {\n      held: null,\n      spawning: false\n    };\n\n    this.physicsSystem = physicsSystem;\n    this.constraintPairs = {};\n  }\n\n  tickInteractor(constraintTag, entityId, state, prevState) {\n    if (!this.physicsSystem) return;\n\n    if (prevState.held === state.held) {\n      if (\n        !state.spawning &&\n        prevState.spawning &&\n        state.held &&\n        state.held.components.tags &&\n        state.held.components.tags.data[constraintTag]\n      ) {\n        state.held.setAttribute(\"body-helper\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        const heldEntityId = state.held.id;\n        const bodyUuid = state.held.components[\"body-helper\"].uuid;\n        const targetEl = document.querySelector(`#${entityId}`);\n        const targetUuid = targetEl.components[\"body-helper\"].uuid;\n        if (bodyUuid !== -1 && targetUuid !== -1) {\n          this.physicsSystem.addConstraint(entityId, bodyUuid, targetUuid, {});\n          if (!this.constraintPairs[heldEntityId]) {\n            this.constraintPairs[heldEntityId] = [];\n          }\n          this.constraintPairs[heldEntityId].push(entityId);\n        }\n      }\n      return;\n    }\n    if (prevState.held && prevState.held.components.tags && prevState.held.components.tags.data[constraintTag]) {\n      const heldEntityId = prevState.held.id;\n      if (this.constraintPairs[heldEntityId] && this.constraintPairs[heldEntityId].indexOf(entityId) !== -1) {\n        this.constraintPairs[heldEntityId].splice(this.constraintPairs[heldEntityId].indexOf(entityId), 1);\n        if (this.constraintPairs[heldEntityId].length === 0) {\n          delete this.constraintPairs[heldEntityId];\n        }\n        this.physicsSystem.removeConstraint(entityId);\n      }\n\n      if (!this.constraintPairs[heldEntityId] || this.constraintPairs[heldEntityId].length < 1) {\n        prevState.held.setAttribute(\"body-helper\", { activationState: ACTIVATION_STATE.ACTIVE_TAG });\n      }\n    }\n    if (!state.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n      if (!state.held.components[\"networked\"] || NAF.utils.isMine(state.held) || NAF.utils.takeOwnership(state.held)) {\n        state.held.setAttribute(\"body-helper\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        const heldEntityId = state.held.id;\n        const bodyUuid = state.held.components[\"body-helper\"].uuid;\n        const targetEl = document.querySelector(`#${entityId}`);\n        const targetUuid = targetEl.components[\"body-helper\"].uuid;\n        if (bodyUuid !== -1 && targetUuid !== -1) {\n          this.physicsSystem.addConstraint(entityId, bodyUuid, targetUuid, {});\n          if (!this.constraintPairs[heldEntityId]) {\n            this.constraintPairs[heldEntityId] = [];\n          }\n          this.constraintPairs[heldEntityId].push(entityId);\n        }\n      } else {\n        console.log(\"Failed to obtain ownership while trying to create constraint on networked object.\");\n      }\n    }\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.leftHand.entity.id,\n      interaction.state.leftHand,\n      this.prevLeftHand\n    );\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.rightHand.entity.id,\n      interaction.state.rightHand,\n      this.prevRightHand\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.rightRemote.entity.id,\n      interaction.state.rightRemote,\n      this.prevRightRemote\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.leftRemote.entity.id,\n      interaction.state.leftRemote,\n      this.prevLeftRemote\n    );\n\n    Object.assign(this.prevLeftHand, interaction.state.leftHand);\n    Object.assign(this.prevRightHand, interaction.state.rightHand);\n    Object.assign(this.prevRightRemote, interaction.state.rightRemote);\n    Object.assign(this.prevLeftRemote, interaction.state.leftRemote);\n  }\n\n  // for held objects deleted during the component tick\n  release(el) {\n    if (this.prevLeftHand.held === el) {\n      this.prevLeftHand.held = null;\n      this.prevLeftHand.spawning = false;\n    }\n    if (this.prevLeftHand.held === el) {\n      this.prevLeftHand.held = null;\n      this.prevLeftHand.spawning = false;\n    }\n    if (this.prevRightRemote.held === el) {\n      this.prevRightRemote.held = null;\n      this.prevRightRemote.spawning = false;\n    }\n    if (this.prevLeftRemote.held === el) {\n      this.prevLeftRemote.held = null;\n      this.prevLeftRemote.spawning = false;\n    }\n  }\n}\n","/* global THREE AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst COLLISION_FILTER_MASK_HANDS = { collisionFilterMask: COLLISION_LAYERS.HANDS };\nexport const distanceBetweenStretchers = (() => {\n  const a = new THREE.Vector3();\n  const b = new THREE.Vector3();\n  return function distanceBetweenStretchers(obj1, obj2) {\n    obj1.getWorldPosition(a);\n    obj2.getWorldPosition(b);\n    return a.distanceTo(b);\n  };\n})();\n\nfunction existsAndHeldInEither(object, holderA, holderB) {\n  return object && (object === holderA.held || object === holderB.held);\n}\n\nexport class TwoPointStretchingSystem {\n  constructor() {\n    this.initialScale = new THREE.Vector3();\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const { leftHand, rightHand, rightRemote, leftRemote } = interaction.state;\n\n    const stretching =\n      existsAndHeldInEither(leftHand.held, rightHand, rightRemote) ||\n      existsAndHeldInEither(leftRemote.held, rightHand, rightRemote);\n    const stretched = leftHand.held || leftRemote.held;\n    let leftStretcher, rightStretcher;\n    if (stretching) {\n      leftStretcher = leftHand.held\n        ? interaction.options.leftHand.entity.object3D\n        : interaction.options.leftRemote.entity.object3D;\n      rightStretcher = rightHand.held\n        ? interaction.options.rightHand.entity.object3D\n        : interaction.options.rightRemote.entity.object3D;\n      if (\n        leftStretcher !== this.previousLeftStretcher ||\n        rightStretcher !== this.previousRightStretcher ||\n        stretched !== this.stretched\n      ) {\n        this.initialStretchDistance = distanceBetweenStretchers(leftStretcher, rightStretcher);\n        this.stretched = stretched;\n        this.initialScale.copy(this.stretched.object3D.scale);\n        if (this.stretched.components[\"ammo-body\"]) {\n          this.stretched.setAttribute(\"ammo-body\", COLLISION_FILTER_MASK_HANDS);\n        }\n      }\n\n      this.stretched.object3D.scale\n        .copy(this.initialScale)\n        .multiplyScalar(distanceBetweenStretchers(leftStretcher, rightStretcher) / this.initialStretchDistance);\n      this.stretched.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.previousLeftStretcher = leftStretcher;\n    this.previousRightStretcher = rightStretcher;\n  }\n}\n","import { CAMERA_MODE_INSPECT } from \"./camera-system\";\n\nexport class SingleActionButtonSystem {\n  tick() {\n    this.didInteractThisFrame = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n      // TODO: Fix issue where button objects are \"visible\" but not on the inspect layer,\n      // which makes it so we can interact with them but cannot see them.\n      return;\n    }\n    const hovered = interaction.state.rightRemote.hovered;\n    if (\n      hovered &&\n      userinput.get(interaction.options.rightRemote.grabPath) &&\n      hovered.components.tags &&\n      hovered.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    const hovered2 = interaction.state.leftRemote.hovered;\n    if (\n      hovered2 &&\n      userinput.get(interaction.options.leftRemote.grabPath) &&\n      hovered2.components.tags &&\n      hovered2.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered2.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n  }\n}\n\nexport class HoldableButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const held = interaction.state.rightRemote.held;\n\n    if (this.prevHeld && this.prevHeld !== held) {\n      this.prevHeld.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    if (held && this.prevHeld !== held) {\n      held.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n\n    this.prevHeld = held;\n\n    const heldLeft = interaction.state.leftRemote.held;\n\n    if (this.prevHeldLeft && this.prevHeldLeft !== heldLeft) {\n      this.prevHeldLeft.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n    if (heldLeft && this.prevHeldLeft !== heldLeft) {\n      heldLeft.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n\n    this.prevHeldLeft = heldLeft;\n  }\n}\n\nconst hasButtonComponent = (function() {\n  const BUTTON_COMPONENT_NAMES = [\n    \"icon-button\",\n    \"text-button\",\n    \"pin-networked-object-button\",\n    \"mic-button\",\n    \"inspect-button\"\n  ];\n  return function hasButtonComponent(components) {\n    for (let i = 0; i < BUTTON_COMPONENT_NAMES.length; i++) {\n      if (components[BUTTON_COMPONENT_NAMES[i]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n})();\n\nfunction getHoverableButton(hovered) {\n  if (!hovered) return null;\n  if (\n    hasButtonComponent(hovered.components) ||\n    hovered.classList.contains(\"teleport-waypoint-icon\") ||\n    hovered.classList.contains(\"occupiable-waypoint-icon\")\n  ) {\n    return hovered;\n  }\n  if (hovered.children) {\n    // TODO: not sure if looping thru children here is desireable, but we did this to accomodate the rounded-button mixins\n    for (let i = 0; i < hovered.children.length; i++) {\n      if (\n        hasButtonComponent(hovered.children[i].components) ||\n        hovered.children[i].classList.contains(\"teleport-waypoint-icon\") ||\n        hovered.children[i].classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        return hovered.children[i];\n      }\n    }\n  }\n  return null;\n}\n\nfunction dispatch(el, event) {\n  el.object3D.dispatchEvent(event);\n  if (el.children) {\n    for (let i = 0; i < el.children.length; i++) {\n      if (\n        hasButtonComponent(el.children[i].components) ||\n        el.children[i].classList.contains(\"teleport-waypoint-icon\") ||\n        el.children[i].classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        el.children[i].object3D.dispatchEvent(event);\n      }\n    }\n  }\n}\n\nconst HOVERED = { type: \"hovered\" };\nconst UNHOVERED = { type: \"unhovered\" };\nexport class HoverButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const button = getHoverableButton(interaction.state.rightRemote.hovered);\n    const button2 = getHoverableButton(interaction.state.leftRemote.hovered);\n\n    if (this.prevButton && this.prevButton !== button) {\n      dispatch(this.prevButton, UNHOVERED);\n    }\n\n    if (button && this.prevButton !== button) {\n      dispatch(button, HOVERED);\n    }\n\n    this.prevButton = button;\n\n    // TODO: hover should respect both remotes\n    if (this.prevButtonLeft && this.prevButtonLeft !== button2) {\n      dispatch(this.prevButtonLeft, UNHOVERED);\n    }\n\n    if (button2 && this.prevButtonLeft !== button2) {\n      dispatch(button2, HOVERED);\n    }\n\n    this.prevButtonLeft = button2;\n  }\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { SOUND_PEN_UNDO_DRAW } from \"./sound-effects-system\";\n\n/**\n * Drawing Menu System\n * A system for showing menus for drawings.\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nexport class DrawingMenuSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n\n    this.sceneEl.addEventListener(\"stateremoved\", this.hideMenus.bind(this));\n\n    this.lastIntersection = new THREE.Vector3();\n\n    this.drawingMenus = [];\n    this.buttonMap = {};\n\n    waitForDOMContentLoaded().then(() => {\n      this.cursorControllers = document.querySelectorAll(\"[cursor-controller]\");\n      this.camera = this.sceneEl.querySelector(\"#avatar-pov-node\");\n    });\n  }\n\n  tick() {\n    if (!this.cursorControllers || this.cursorControllers.length === 0 || !this.camera) return;\n\n    if (this.sceneEl.is(\"frozen\") && window.APP.hubChannel.can(\"spawn_drawing\")) {\n      const hovered = this.getHovered();\n      if (hovered) {\n        for (let i = 0; i < this.cursorControllers.length; i++) {\n          if (this.cursorControllers[i].components[\"cursor-controller\"].intersection) {\n            const intersectionPoint = this.cursorControllers[i].components[\"cursor-controller\"].intersection.point;\n            this.showMenu(hovered, intersectionPoint);\n          }\n        }\n      }\n      this.handleButtons();\n      this.scaleMenus();\n    }\n  }\n\n  getMenuScale(distance) {\n    if (distance <= 1.5) {\n      return 0.5;\n    }\n    return Math.min(3, distance - 1);\n  }\n\n  scaleMenus = (() => {\n    const cameraWorldPos = new THREE.Vector3();\n    return function() {\n      if (!this.drawingMenus || this.drawingMenus.length === 0) return;\n\n      this.camera.object3D.getWorldPosition(cameraWorldPos);\n\n      for (let i = 0; i < this.drawingMenus.length; i++) {\n        const menu = this.drawingMenus[i];\n        if (menu.object3D.visible && !menu.getAttribute(\"animation__show\")) {\n          const dist = cameraWorldPos.distanceTo(menu.object3D.position);\n          menu.object3D.scale.setScalar(this.getMenuScale(dist));\n          menu.object3D.matrixNeedsUpdate = true;\n        }\n      }\n    };\n  })();\n\n  handleButtons = (() => {\n    const remotes = [\"rightRemote\", \"leftRemote\"];\n    return function() {\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      const userinput = AFRAME.scenes[0].systems.userinput;\n\n      for (let i = 0; i < remotes.length; i++) {\n        const remote = remotes[i];\n        if (interaction.state[remote]) {\n          const hovered = interaction.state[remote].hovered;\n          if (\n            hovered &&\n            userinput.get(interaction.options[remote].grabPath) &&\n            hovered.components.tags &&\n            hovered.components.tags.data.singleActionButton\n          ) {\n            if (this.buttonMap[hovered.object3D.uuid]) {\n              const networkedEntity = this.buttonMap[hovered.object3D.uuid];\n              if (hovered.classList.contains(\"undo-drawing\")) {\n                networkedEntity.components[\"networked-drawing\"].undoDraw();\n                this.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n              } else if (hovered.classList.contains(\"delete-drawing\")) {\n                NAF.utils.takeOwnership(networkedEntity);\n                this.sceneEl.removeChild(networkedEntity);\n              } else if (hovered.classList.contains(\"serialize-drawing\")) {\n                networkedEntity.components[\"networked-drawing\"].serializeDrawing().then(() => {\n                  const networkedEntity = this.buttonMap[hovered.object3D.uuid];\n                  NAF.utils.takeOwnership(networkedEntity);\n                  this.sceneEl.removeChild(networkedEntity);\n                });\n              }\n            }\n          }\n        }\n      }\n    };\n  })();\n\n  getHovered() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let hovered = null;\n    if (\n      interaction.state.leftRemote &&\n      interaction.state.leftRemote.hovered &&\n      interaction.state.leftRemote.hovered.classList.contains(\"drawing\")\n    ) {\n      hovered = interaction.state.leftRemote.hovered;\n    } else if (\n      interaction.state.rightRemote &&\n      interaction.state.rightRemote.hovered &&\n      interaction.state.rightRemote.hovered.classList.contains(\"drawing\")\n    ) {\n      hovered = interaction.state.rightRemote.hovered;\n    }\n    return hovered;\n  }\n\n  showMenu = (() => {\n    const position = new THREE.Vector3();\n    const cameraWorldPos = new THREE.Vector3();\n    return function(hovered, intersectionPoint) {\n      const menu = hovered.children[0];\n\n      if (!menu.object3D.visible || !almostEquals(0.25, intersectionPoint, this.lastIntersection)) {\n        this.camera.object3D.getWorldPosition(cameraWorldPos);\n        position\n          .subVectors(cameraWorldPos, intersectionPoint)\n          .normalize()\n          .multiplyScalar(0.1);\n        menu.object3D.position.copy(intersectionPoint).add(position);\n        menu.object3D.lookAt(cameraWorldPos);\n        menu.object3D.matrixNeedsUpdate = true;\n        menu.object3D.visible = true;\n        this.lastIntersection.copy(intersectionPoint);\n\n        const isMine = hovered.components.networked.isMine();\n        menu.querySelector(\".undo-drawing\").object3D.visible = isMine;\n        menu.querySelector(\".serialize-drawing\").object3D.visible =\n          isMine && window.APP.hubChannel.can(\"spawn_and_move_media\");\n\n        const dist = cameraWorldPos.distanceTo(menu.object3D.position);\n        const finalScale = this.getMenuScale(dist);\n\n        menu.removeAttribute(\"animation__show\");\n\n        menu.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n\n        menu.addEventListener(\n          \"animationcomplete\",\n          () => {\n            menu.removeAttribute(\"animation__show\");\n          },\n          { once: true }\n        );\n      }\n    };\n  })();\n\n  hideMenus() {\n    if (!this.drawingMenus) return;\n\n    for (let i = 0; i < this.drawingMenus.length; i++) {\n      this.drawingMenus[i].object3D.visible = false;\n    }\n  }\n\n  registerDrawingMenu(networkedDrawingEl) {\n    const menuEl = networkedDrawingEl.querySelector(\".drawing-menu\");\n    this.drawingMenus.push(menuEl);\n    const undoButton = menuEl.querySelector(\".undo-drawing\");\n    this.buttonMap[undoButton.object3D.uuid] = networkedDrawingEl;\n    const deleteButton = menuEl.querySelector(\".delete-drawing\");\n    this.buttonMap[deleteButton.object3D.uuid] = networkedDrawingEl;\n    const serializeButton = menuEl.querySelector(\".serialize-drawing\");\n    this.buttonMap[serializeButton.object3D.uuid] = networkedDrawingEl;\n  }\n\n  unregisterDrawingMenu(networkedDrawingEl) {\n    const menuEl = networkedDrawingEl.querySelector(\".drawing-menu\");\n    const idx = this.drawingMenus.indexOf(menuEl);\n    if (idx !== -1) {\n      this.drawingMenus.splice(idx, 1);\n    }\n    const undoButton = menuEl.querySelector(\".undo-drawing\");\n    delete this.buttonMap[undoButton.object3D.uuid];\n    const deleteButton = menuEl.querySelector(\".delete-drawing\");\n    delete this.buttonMap[deleteButton.object3D.uuid];\n    const serializeButton = menuEl.querySelector(\".serialize-drawing\");\n    delete this.buttonMap[serializeButton.object3D.uuid];\n  }\n}\n","function getSpecificHoverMenu(el) {\n  return (\n    el &&\n    el.components &&\n    (el.components[\"hover-menu\"] ||\n      el.components[\"hover-menu__video\"] ||\n      el.components[\"hover-menu__pager\"] ||\n      el.components[\"hover-menu__hubs-item\"] ||\n      el.components[\"hover-menu__link\"] ||\n      el.components[\"hover-menu__photo\"])\n  );\n}\n\nfunction findHoverMenu(hovered) {\n  if (!hovered) return null;\n  const hoverMenu = getSpecificHoverMenu(hovered);\n  if (hoverMenu) {\n    return hoverMenu;\n  }\n  if (!(hovered.components.tags && hovered.components.tags.data.isHoverMenuChild)) {\n    return null;\n  }\n  let el = hovered.parentNode;\n  while (el && !getSpecificHoverMenu(el)) {\n    el = el.parentNode;\n  }\n  return getSpecificHoverMenu(el);\n}\n\nexport class HoverMenuSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const hoverMenu = findHoverMenu(interaction.state.rightRemote.hovered);\n\n    if (this.prevHoverMenu && this.prevHoverMenu !== hoverMenu) {\n      this.prevHoverMenu.hovering = false;\n      this.prevHoverMenu.applyHoverState();\n    }\n\n    if (hoverMenu && this.prevHoverMenu !== hoverMenu) {\n      hoverMenu.hovering = true;\n      hoverMenu.applyHoverState();\n    }\n\n    this.prevHoverMenu = hoverMenu;\n\n    //TODO: Menu be visible if either remote is hovering.\n    const hoverMenu2 = findHoverMenu(interaction.state.leftRemote.hovered);\n\n    if (this.prevHoverMenu2 && this.prevHoverMenu2 !== hoverMenu2) {\n      this.prevHoverMenu2.hovering = false;\n      this.prevHoverMenu2.applyHoverState();\n    }\n\n    if (hoverMenu2 && this.prevHoverMenu2 !== hoverMenu2) {\n      hoverMenu2.hovering = true;\n      hoverMenu2.applyHoverState();\n    }\n\n    this.prevHoverMenu2 = hoverMenu2;\n  }\n}\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\n// WARNING: This system mutates interaction system state!\nexport class SuperSpawnerSystem {\n  maybeSpawn(state, grabPath) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const superSpawner = state.hovered && state.hovered.components[\"super-spawner\"];\n\n    const isPermitted =\n      window.APP.hubChannel &&\n      (superSpawner && superSpawner.data.template === \"#interactable-emoji\"\n        ? window.APP.hubChannel.can(\"spawn_emoji\")\n        : window.APP.hubChannel.can(\"spawn_and_move_media\"));\n\n    if (\n      superSpawner &&\n      superSpawner.spawnedMediaScale &&\n      !superSpawner.cooldownTimeout &&\n      userinput.get(grabPath) &&\n      isPermitted\n    ) {\n      this.performSpawn(state, grabPath, userinput, superSpawner);\n    }\n  }\n\n  performSpawn(state, grabPath, userinput, superSpawner) {\n    const data = superSpawner.data;\n\n    const spawnedEntity = addMedia(\n      data.src,\n      data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      data.resolve,\n      true,\n      false,\n      data.mediaOptions\n    ).entity;\n\n    // TODO HACK objects become held mid frame here, so if something runs between here and\n    // when the networked component is initialized isMine will throw since data doesnt exist\n    // should probably fix isMine in networked aframe instead of merging this\n    if (spawnedEntity.components.networked && !spawnedEntity.components.networked.data) {\n      spawnedEntity.components.networked.data = {};\n    }\n\n    superSpawner.el.object3D.getWorldPosition(spawnedEntity.object3D.position);\n    superSpawner.el.object3D.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    superSpawner.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    state.held = spawnedEntity;\n\n    superSpawner.activateCooldown();\n    state.spawning = true;\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        spawnedEntity.object3D.scale.copy(superSpawner.spawnedMediaScale);\n        spawnedEntity.object3D.matrixNeedsUpdate = true;\n        state.spawning = false;\n        superSpawner.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    this.maybeSpawn(interaction.state.leftHand, interaction.options.leftHand.grabPath);\n    this.maybeSpawn(interaction.state.rightHand, interaction.options.rightHand.grabPath);\n    this.maybeSpawn(interaction.state.rightRemote, interaction.options.rightRemote.grabPath);\n    this.maybeSpawn(interaction.state.leftRemote, interaction.options.leftRemote.grabPath);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { distanceBetweenStretchers } from \"./two-point-stretching-system\";\n\nfunction copyState(previous, current, isTeleporting) {\n  previous.held = current.held;\n  previous.hovered = current.hovered;\n  previous.isTeleporting = isTeleporting;\n}\n\n// TODO: These strengths should be written into bindings, since vibration strength varies across devices.\nconst STRENGTH = {\n  DROP: 0.1,\n  PICKUP: 0.2,\n  BUTTON_PRESSED: 0.2,\n  HOVER: 0.08,\n  STRETCH_BASE: 0.05,\n  STRETCH_DISTANCE: 0.2,\n  TELEPORTING: 0.08,\n  TELEPORTED: 0.2\n};\n\nfunction determineStrength(previous, current, isTeleporting) {\n  if (previous.held && !current.held) {\n    return STRENGTH.DROP;\n  } else if (!previous.held && current.held) {\n    return STRENGTH.PICKUP;\n  } else if (!previous.hovered && current.hovered) {\n    return STRENGTH.HOVER;\n  } else if (isTeleporting) {\n    return STRENGTH.TELEPORTING;\n  } else if (previous.isTeleporting && !isTeleporting) {\n    return STRENGTH.TELEPORTED;\n  } else {\n    return 0;\n  }\n}\n\nfunction determineStretchStrength(stretchSystem) {\n  if (!stretchSystem.stretcherLeft || !stretchSystem.stretcherRight) {\n    return 0;\n  }\n\n  return THREE.Math.clamp(\n    STRENGTH.STRETCH_BASE +\n      STRENGTH.STRETCH_DISTANCE *\n        Math.abs(\n          distanceBetweenStretchers(stretchSystem.stretcherLeft, stretchSystem.stretcherRight) -\n            stretchSystem.initialStretchDistance\n        ),\n    0,\n    0.5\n  );\n}\n\nexport class HapticFeedbackSystem {\n  constructor() {\n    this.state = {\n      rightHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      rightRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      }\n    };\n  }\n\n  tick(twoPointStretchingSystem, interactLeft, interactRight) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftActuator = userinput.get(paths.haptics.actuators.left);\n    const rightActuator = userinput.get(paths.haptics.actuators.right);\n    if (!leftActuator && !rightActuator) {\n      return;\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote, leftRemote } = interaction.state;\n    this.leftTeleporter =\n      this.leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n    this.rightTeleporter =\n      this.rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n\n    const leftHandStrength = determineStrength(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    const rightHandStrength = determineStrength(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    const rightRemoteStrength = determineStrength(this.state.rightRemote, rightRemote, false);\n    const leftRemoteStrength = determineStrength(this.state.leftRemote, leftRemote, false);\n    const buttonLeftStrength = interactLeft ? STRENGTH.BUTTON_PRESSED : 0;\n    const buttonRightStrength = interactRight ? STRENGTH.BUTTON_PRESSED : 0;\n    const stretchingStrength = determineStretchStrength(twoPointStretchingSystem);\n\n    const leftStrength = Math.max(leftHandStrength, leftRemoteStrength, stretchingStrength, buttonLeftStrength);\n    const rightStrength = Math.max(rightHandStrength, rightRemoteStrength, stretchingStrength, buttonRightStrength);\n\n    if (leftStrength && leftActuator) {\n      leftActuator.pulse(leftStrength, 15);\n    }\n\n    if (rightStrength && rightActuator) {\n      rightActuator.pulse(rightStrength, 15);\n    }\n\n    copyState(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    copyState(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    copyState(this.state.rightRemote, rightRemote, false);\n    copyState(this.state.leftRemote, leftRemote, false);\n  }\n}\n","// We disable batching manager because of some problems.\n// BatchManagerSystem has some dependencies with our Three.js fork.\n// Build errors with the upstreaming official Three.js.\n// So replacing BatchManagerSystem with a stub so far.\n// We may revert and update it when we will enable again.\n\nexport class BatchManagerSystem {\n  constructor(/*scene, renderer*/) {}\n\n  get batchingEnabled() {\n    return false;\n  }\n\n  set batchingEnabled(enabled) {\n    // Ignore\n  }\n\n  addObject(/*rootObject*/) {\n    return 0;\n  }\n\n  removeObject(/*rootObject*/) {\n    return;\n  }\n\n  tick(/*time*/) {\n    return;\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { SOUND_HOVER_OR_GRAB } from \"./sound-effects-system\";\nimport { isUI } from \"./interactions\";\n\nexport class InteractionSfxSystem {\n  constructor() {}\n\n  tick(interaction, userinput, sfx) {\n    const state = interaction.state;\n    const previousState = interaction.previousState;\n\n    if (\n      state.leftHand.held !== previousState.leftHand.held ||\n      state.rightHand.held !== previousState.rightHand.held ||\n      state.rightRemote.held !== previousState.rightRemote.held ||\n      (isUI(state.rightRemote.hovered) && state.rightRemote.hovered !== previousState.rightRemote.hovered) ||\n      state.leftRemote.held !== previousState.leftRemote.held ||\n      (isUI(state.leftRemote.hovered) && state.leftRemote.hovered !== previousState.leftRemote.hovered)\n    ) {\n      sfx.playSoundOneShot(SOUND_HOVER_OR_GRAB);\n    }\n\n    if (userinput.get(paths.actions.logInteractionState)) {\n      console.log(\n        \"Interaction System State\\nleftHand held\",\n        state.leftHand.held,\n        \"\\nleftHand hovered\",\n        state.leftHand.hovered,\n        \"\\nrightHand held\",\n        state.rightHand.held,\n        \"\\nrightHand hovered\",\n        state.rightHand.hovered,\n        \"\\nrightRemote held\",\n        state.rightRemote.held,\n        \"\\nrightRemote hovered\",\n        state.rightRemote.hovered,\n        \"\\nleftRemote held\",\n        state.leftRemote.held,\n        \"\\nleftRemote hovered\",\n        state.leftRemote.hovered\n      );\n    }\n  }\n}\n","import \"./configs\";\nimport { getThemeColor } from \"./theme\";\nimport ColorShiftWorker from \"../workers/color-shift.worker.js\";\nimport { promisifyWorker } from \"./promisify-worker.js\";\nconst colorShift = promisifyWorker(new ColorShiftWorker());\n\nfunction getThemeColorShifter(type) {\n  // Goal of this algorithm is to take a ctx pointing to a spritesheet\n  // that has a single saturated color, and convert it to another.\n  return async (ctx, w, h) => {\n    const data = ctx.getImageData(0, 0, w, h);\n    const color = type === \"action\" ? getThemeColor(\"action-color\") : getThemeColor(\"notice-background-color\");\n    const res = await colorShift(data.data.buffer, [data.data.buffer], { type, color });\n    ctx.putImageData(new ImageData(res, w, h), 0, 0);\n  };\n}\n\nexport { getThemeColorShifter };\n","/* global AFRAME THREE */\n\n// See doc/spritesheet-generation.md for information about this spritesheet\nimport spritesheetAction from \"../assets/images/spritesheets/sprite-system-action-spritesheet.json\";\nimport spritesheetNotice from \"../assets/images/spritesheets/sprite-system-notice-spritesheet.json\";\nimport { createImageTexture } from \"../utils/media-utils\";\nimport spritesheetActionPng from \"../assets/images/spritesheets/sprite-system-action-spritesheet.png\";\nimport spritesheetNoticePng from \"../assets/images/spritesheets/sprite-system-notice-spritesheet.png\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport vertexShader from \"./sprites/sprite.vert\";\nimport fragmentShader from \"./sprites/sprite.frag\";\nimport { getThemeColorShifter } from \"../utils/theme-sprites\";\nimport { disposeTexture } from \"../utils/material-utils\";\n\nconst MAX_SPRITES = 1024;\nconst SHEET_TYPES = [\"action\", \"notice\"];\nconst PNGS = {\n  action: spritesheetActionPng,\n  notice: spritesheetNoticePng\n};\nconst ZEROS = new Array(16 * 4).fill(0);\n\nconst getSheetType = sprite => (spritesheetAction.frames[sprite.data.name] ? \"action\" : \"notice\");\n\nconst isVisible = o => {\n  if (!o.visible) return false;\n  if (!o.parent) return true;\n  return isVisible(o.parent);\n};\n\nAFRAME.registerComponent(\"sprite\", {\n  schema: { name: { type: \"string\" } },\n  tick() {\n    // TODO when we run out of sprites we currently just stop rendering them. We need to do something better.\n    if (!(this.didRegisterWithSystem || this.didFailToRegister) && this.el.sceneEl.systems[\"hubs-systems\"]) {\n      const registered = this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.add(this);\n      this.didRegisterWithSystem = registered > 0;\n      this.didFailToRegister = registered < 0;\n    }\n  },\n\n  update() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.updateUVs(this);\n    }\n  },\n\n  remove() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.remove(this);\n    }\n  }\n});\n\nconst normalizedFrame = (function() {\n  const memo = new Map();\n  return function normalizedFrame(name, spritesheet) {\n    let ret = memo.get(name);\n    if (ret) {\n      return ret;\n    } else {\n      if (!spritesheet.frames[name]) {\n        ret = { x: 0, y: 0, w: 0, h: 0 };\n        memo.set(name, ret);\n        return ret;\n      }\n      const size = spritesheet.meta.size;\n      const frame = spritesheet.frames[name].frame;\n      ret = {\n        x: frame.x / size.w,\n        y: frame.y / size.h,\n        w: frame.w / size.w,\n        h: frame.h / size.h\n      };\n      memo.set(name, ret);\n      return ret;\n    }\n  };\n})();\n\nconst raycastOnSprite = (function() {\n  const vA = new THREE.Vector3();\n  const vB = new THREE.Vector3();\n  const vC = new THREE.Vector3();\n  const vD = new THREE.Vector3();\n  const point = new THREE.Vector3();\n  const intersectionInfo = { distance: 0, point, object: null };\n\n  return function raycast(raycaster, intersects) {\n    this.updateMatrices();\n    vA.set(-0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vB.set(0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vC.set(-0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n    let intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, point);\n    if (intersect === null) {\n      vD.set(0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n      intersect = raycaster.ray.intersectTriangle(vB, vC, vD, false, point);\n      if (intersect === null) {\n        return;\n      }\n    }\n\n    const distance = raycaster.ray.origin.distanceTo(point);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n\n    intersectionInfo.distance = distance;\n    intersectionInfo.point = point;\n    intersectionInfo.object = this;\n    intersects.push(intersectionInfo);\n  };\n})();\n\nconst getHoverableVisuals = el => {\n  if (!el || !el.components) return null;\n  if (el.components[\"hoverable-visuals\"]) {\n    return el.components[\"hoverable-visuals\"];\n  }\n  return getHoverableVisuals(el.parentEl);\n};\n\nconst enableSweepingEffect = comp => {\n  const hoverableVisuals = getHoverableVisuals(comp.el);\n  if (!hoverableVisuals) {\n    return false;\n  }\n\n  const isPinned = hoverableVisuals.el.components.pinnable && hoverableVisuals.el.components.pinnable.data.pinned;\n  const isSpawner = !!hoverableVisuals.el.components[\"super-spawner\"];\n  const isFrozen = hoverableVisuals.el.sceneEl.is(\"frozen\");\n  const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n  return hoverableVisuals.data.enableSweepingEffect && !hideDueToPinning;\n};\n\nconst createGeometry = maxSprites => {\n  // TODO: Consider to use InstancedBufferGeometry which would be more efficient and performant\n  const geometry = new THREE.BufferGeometry();\n\n  const positions = new Float32Array(maxSprites * 3 * 4);\n  for (let i = 0; i < maxSprites; i++) {\n    positions[i * 3 * 4 + 0] = -0.5;\n    positions[i * 3 * 4 + 1] = 0.5;\n    positions[i * 3 * 4 + 2] = 0.0;\n    positions[i * 3 * 4 + 3] = 0.5;\n    positions[i * 3 * 4 + 4] = 0.5;\n    positions[i * 3 * 4 + 5] = 0.0;\n    positions[i * 3 * 4 + 6] = -0.5;\n    positions[i * 3 * 4 + 7] = -0.5;\n    positions[i * 3 * 4 + 8] = 0.0;\n    positions[i * 3 * 4 + 9] = 0.5;\n    positions[i * 3 * 4 + 10] = -0.5;\n    positions[i * 3 * 4 + 11] = 0.0;\n  }\n  // We need to use \"position\" as the attribute name here. It was previously \"a_vertices\". It seems three.js\n  // might assume that geometries have a \"position\" attribute in some cases,\n  // like in https://github.com/mrdoob/three.js/pull/18044\n  geometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3, false));\n\n  geometry.setAttribute(\n    \"a_hubs_EnableSweepingEffect\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4), 1, false)\n  );\n\n  geometry.setAttribute(\n    \"a_hubs_SweepParams\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4 * 2), 2, false)\n  );\n\n  geometry.setAttribute(\"a_uvs\", new THREE.BufferAttribute(new Float32Array(maxSprites * 2 * 4), 2, false));\n  geometry.setAttribute(\"a_mv\", new THREE.BufferAttribute(new Float32Array(maxSprites * 16 * 4), 16, false));\n\n  const indices = new Uint16Array(maxSprites * 3 * 2);\n  for (let i = 0; i < maxSprites; i++) {\n    indices[i * 3 * 2 + 0] = i * 4 + 0;\n    indices[i * 3 * 2 + 1] = i * 4 + 2;\n    indices[i * 3 * 2 + 2] = i * 4 + 1;\n    indices[i * 3 * 2 + 3] = i * 4 + 1;\n    indices[i * 3 * 2 + 4] = i * 4 + 2;\n    indices[i * 3 * 2 + 5] = i * 4 + 3;\n  }\n  geometry.setIndex(new THREE.BufferAttribute(indices, 1));\n\n  geometry.drawRange.count = 0;\n\n  return geometry;\n};\n\nconst createMaterial = spritesheetTexture => {\n  return new THREE.RawShaderMaterial({\n    uniforms: {\n      u_spritesheet: { value: spritesheetTexture },\n      hubs_Time: { value: 0 }\n    },\n    vertexShader,\n    fragmentShader,\n    side: THREE.DoubleSide,\n    transparent: true\n  });\n};\n\nexport class SpriteSystem {\n  raycast(raycaster, intersects) {\n    for (const sheetType of SHEET_TYPES) {\n      const sprites = this.sprites[sheetType];\n      for (const sprite of sprites) {\n        const o = sprite.el.object3D;\n        if (isVisible(o)) {\n          raycastOnSprite.call(o, raycaster, intersects);\n        }\n      }\n    }\n    return intersects;\n  }\n\n  constructor(scene) {\n    this.sprites = { action: [], notice: [] };\n    this.indicesFromSprites = { action: new WeakMap(), notice: new WeakMap() };\n    this.meshes = { action: null, notice: null };\n\n    waitForDOMContentLoaded().then(() => {\n      for (const type in PNGS) {\n        const spritesheetPng = PNGS[type];\n        createImageTexture(spritesheetPng, getThemeColorShifter(type)).then(spritesheetTexture => {\n          const geometry = createGeometry(MAX_SPRITES);\n          const material = createMaterial(spritesheetTexture);\n          const mesh = (this.meshes[type] = new THREE.Mesh(geometry, material));\n          const el = document.createElement(\"a-entity\");\n          el.classList.add(\"ui\");\n          scene.appendChild(el);\n          el.setObject3D(\"mesh\", mesh);\n          mesh.frustumCulled = false;\n          mesh.renderOrder = window.APP.RENDER_ORDER.HUD_ICONS;\n          mesh.raycast = this.raycast.bind(this);\n        });\n      }\n    });\n\n    APP.store.addEventListener(\"themechanged\", () => {\n      for (const type in PNGS) {\n        const spritesheetPng = PNGS[type];\n        // TODO: Fix me if possible\n        // 1. If theme is changed before meshes are initialized, no effect to textures.\n        // 2. If theme is changed before textures loading for the previous theme is completed\n        // and textures loading for the new theme is completed earlier than the previous ones,\n        // the previous ones are set.\n        if (this.meshes[type]) {\n          createImageTexture(spritesheetPng, getThemeColorShifter(type)).then(newTexture => {\n            const oldTexture = this.meshes[type].material.uniforms.u_spritesheet.value;\n            this.meshes[type].material.uniforms.u_spritesheet.value = newTexture;\n            this.meshes[type].material.uniformsNeedUpdate = true;\n            disposeTexture(oldTexture);\n          });\n        }\n      }\n    });\n  }\n\n  tick(t) {\n    for (let i = 0, il = SHEET_TYPES.length; i < il; i++) {\n      const sheetType = SHEET_TYPES[i];\n      const mesh = this.meshes[sheetType];\n\n      if (!mesh) continue;\n\n      mesh.material.uniforms.hubs_Time.value = t;\n      mesh.material.uniformsNeedUpdate = true;\n\n      const geometry = mesh.geometry;\n      const aMv = geometry.getAttribute(\"a_mv\");\n      const aEnableSweepingEffect = geometry.getAttribute(\"a_hubs_EnableSweepingEffect\");\n      const aSweepParams = geometry.getAttribute(\"a_hubs_SweepParams\");\n      const sprites = this.sprites[sheetType];\n\n      let aEnableSweepingEffectNeedsUpdate = false;\n      let aSweepParamsNeedsUpdate = false;\n\n      for (let j = 0, jl = sprites.length; j < jl; j++) {\n        const sprite = sprites[j];\n\n        if (isVisible(sprite.el.object3D)) {\n          const enableSweepingEffectValue = enableSweepingEffect(sprite) ? 1 : 0;\n          aEnableSweepingEffect.array[j * 4 + 0] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[j * 4 + 1] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[j * 4 + 2] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[j * 4 + 3] = enableSweepingEffectValue;\n          aEnableSweepingEffectNeedsUpdate = true;\n\n          if (enableSweepingEffectValue) {\n            const hoverableVisuals = getHoverableVisuals(sprite.el);\n            const s = hoverableVisuals.sweepParams[0];\n            const t = hoverableVisuals.sweepParams[1];\n            aSweepParams.setXY(j * 4 + 0, s, t);\n            aSweepParams.setXY(j * 4 + 1, s, t);\n            aSweepParams.setXY(j * 4 + 2, s, t);\n            aSweepParams.setXY(j * 4 + 3, s, t);\n            aSweepParamsNeedsUpdate = true;\n          }\n\n          // TODO: This tick should be invoked after updating the entire scene graph matrices.\n          // If we do it, we may remove this .updateMatrices() call\n          sprite.el.object3D.updateMatrices();\n          const mat4 = sprite.el.object3D.matrixWorld;\n          aMv.array.set(mat4.elements, j * 4 * 16);\n          aMv.array.set(mat4.elements, (j * 4 + 1) * 16);\n          aMv.array.set(mat4.elements, (j * 4 + 2) * 16);\n          aMv.array.set(mat4.elements, (j * 4 + 3) * 16);\n        } else {\n          aMv.array.set(ZEROS, j * 4 * 16);\n        }\n      }\n\n      aMv.needsUpdate = true;\n      aMv.updateRange.count = sprites.length * 4 * 16;\n\n      if (aEnableSweepingEffectNeedsUpdate) {\n        aEnableSweepingEffect.needsUpdate = true;\n        aEnableSweepingEffect.updateRange.count = sprites.length * 4;\n      }\n\n      if (aSweepParamsNeedsUpdate) {\n        aSweepParams.needsUpdate = true;\n        aSweepParams.updateRange.count = sprites.length * 4 * 2;\n      }\n    }\n  }\n\n  updateUVs(sprite) {\n    const sheetType = getSheetType(sprite);\n    const mesh = this.meshes[sheetType];\n\n    // TODO: Is this guard necessary?\n    if (!mesh) return;\n\n    const indicesFromSprites = this.indicesFromSprites[sheetType];\n\n    // TODO: Is this guard necessary?\n    if (!indicesFromSprites.has(sprite)) return;\n\n    const index = indicesFromSprites.get(sprite);\n    const flipY = mesh.material.uniforms.u_spritesheet.value.flipY;\n    const frame = normalizedFrame(sprite.data.name, sheetType === \"action\" ? spritesheetAction : spritesheetNotice);\n    const aUvs = mesh.geometry.getAttribute(\"a_uvs\");\n    aUvs.setXY(index * 4 + 0, frame.x, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(index * 4 + 1, frame.x + frame.w, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(index * 4 + 2, frame.x, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.setXY(index * 4 + 3, frame.x + frame.w, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.needsUpdate = true;\n    aUvs.updateRange.count = this.sprites[sheetType].length * 4 * 2;\n  }\n\n  add(sprite) {\n    const sheetType = getSheetType(sprite);\n    const mesh = this.meshes[sheetType];\n\n    if (!mesh) return 0;\n\n    const sprites = this.sprites[sheetType];\n    const indicesFromSprites = this.indicesFromSprites[sheetType];\n\n    // TODO: Is this guard necessary?\n    if (indicesFromSprites.has(sprite)) {\n      console.error(\"This sprite is already added\");\n      return -1;\n    }\n\n    if (sprites.length >= MAX_SPRITES) {\n      console.error(\"Too many sprites\");\n      return -1;\n    }\n\n    const index = sprites.push(sprite) - 1;\n    indicesFromSprites.set(sprite, index);\n    this.updateUVs(sprite);\n\n    const geometry = mesh.geometry;\n    geometry.drawRange.count = sprites.length * 3 * 2;\n\n    return 1;\n  }\n\n  remove(sprite) {\n    const sheetType = getSheetType(sprite);\n    const mesh = this.meshes[sheetType];\n\n    // TODO: Is this guard necessary?\n    if (!mesh) return;\n\n    const sprites = this.sprites[sheetType];\n    const indicesFromSprites = this.indicesFromSprites[sheetType];\n\n    // TODO: Is this guard necessary?\n    if (!indicesFromSprites.has(sprite)) {\n      console.error(\"This sprite is not found\");\n      return;\n    }\n\n    const index = indicesFromSprites.get(sprite);\n    indicesFromSprites.delete(sprite);\n\n    const lastSprite = sprites.pop();\n\n    if (sprite !== lastSprite) {\n      // Move the last sprite to the place at the removed sprite index\n      sprites[index] = lastSprite;\n      indicesFromSprites.set(lastSprite, index);\n      this.updateUVs(lastSprite);\n    }\n\n    const geometry = mesh.geometry;\n    geometry.drawRange.count = sprites.length * 3 * 2;\n  }\n}\n","import { setMatrixWorld, affixToWorldUp } from \"../utils/three-utils\";\nimport { isTagged } from \"../components/tags\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst calculateIconTransform = (function() {\n  const up = new THREE.Vector3();\n  const backward = new THREE.Vector3();\n  const forward = new THREE.Vector3();\n  const camToWaypoint = new THREE.Vector3();\n  const v1 = new THREE.Vector3();\n  const m1 = new THREE.Matrix4();\n  const position = new THREE.Vector3();\n  let scale = 1;\n\n  return function calculateIconTransform(waypoint, viewingCamera, outMat4) {\n    waypoint.updateMatrices();\n    viewingCamera.updateMatrices();\n    affixToWorldUp(m1.copy(waypoint.matrixWorld), m1).extractBasis(v1, up, backward);\n    position\n      .setFromMatrixPosition(waypoint.matrixWorld)\n      .add(v1.addVectors(up.multiplyScalar(1.6), backward.multiplyScalar(0.15)));\n    camToWaypoint.subVectors(position, v1.setFromMatrixPosition(viewingCamera.matrixWorld));\n    const distance = camToWaypoint.length();\n    const minDistance = distance < 0.2 * v1.setFromMatrixColumn(viewingCamera.matrixWorld, 0).length();\n    if (distance < minDistance) {\n      scale = 0.00001;\n      camToWaypoint.set(0, 0, -1);\n    } else {\n      scale = 0.1 + 0.05 * distance;\n    }\n    forward\n      .copy(camToWaypoint)\n      .projectOnPlane(up.set(0, 1, 0))\n      .normalize();\n\n    return outMat4\n      .makeBasis(\n        v1.crossVectors(forward, up).multiplyScalar(scale),\n        up.multiplyScalar(scale),\n        forward.multiplyScalar(scale * -1)\n      )\n      .setPosition(position);\n  };\n})();\nfunction isMineOrTakeOwnership(el) {\n  return NAF.utils.isMine(el) || NAF.utils.takeOwnership(el);\n}\nfunction isOccupiableSpawnPoint(waypointData) {\n  return waypointData.canBeOccupied && waypointData.canBeSpawnPoint;\n}\nfunction isUnoccupiableSpawnPoint(waypointData) {\n  return !waypointData.canBeOccupied && waypointData.canBeSpawnPoint;\n}\nfunction loadTemplateAndAddToScene(scene, templateId) {\n  return new Promise(resolve => {\n    const content = document.importNode(document.getElementById(templateId).content.children[0]);\n    scene.appendChild(content, true);\n    setTimeout(() => {\n      // Without this timeout, this resolves too early in Firefox for Android\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      resolve(content);\n    }, 0);\n  });\n}\nfunction templatesToLoadForWaypointData(data) {\n  const templateIds = [];\n  if (data.canBeClicked && data.canBeOccupied) {\n    templateIds.push(\"occupiable-waypoint-icon\");\n  } else if (data.canBeClicked && !data.canBeOccupied) {\n    templateIds.push(\"teleport-waypoint-icon\");\n  } else if (isUnoccupiableSpawnPoint(data)) {\n    //    templateIds.push(\"teleport-waypoint-icon\");\n  } else if (isOccupiableSpawnPoint(data)) {\n    //    templateIds.push(\"occupiable-waypoint-icon\");\n  } else {\n    //templateIds.push(\"teleport-waypoint-icon\");\n  }\n  return templateIds;\n}\nfunction loadTemplatesForWaypointData(scene, data) {\n  return templatesToLoadForWaypointData(data).map(templateId => loadTemplateAndAddToScene(scene, templateId));\n}\n\nfunction shouldTryToOccupy(waypointComponent) {\n  return (\n    waypointComponent.data.canBeOccupied &&\n    (NAF.utils.isMine(waypointComponent.el) ||\n      !(\n        waypointComponent.data.isOccupied &&\n        NAF.utils.getNetworkOwner(waypointComponent.el) &&\n        NAF.connection.connectedClients[NAF.utils.getNetworkOwner(waypointComponent.el)]\n      ))\n  );\n}\n\nfunction isOccupiedByMe(waypointComponent) {\n  return (\n    waypointComponent.data.canBeOccupied &&\n    waypointComponent.data.isOccupied &&\n    waypointComponent.el.components.networked &&\n    NAF.utils.isMine(waypointComponent.el)\n  );\n}\nfunction unoccupyWaypoint(waypointComponent) {\n  waypointComponent.el.setAttribute(\"waypoint\", { isOccupied: false });\n}\nfunction unoccupyWaypoints(waypointComponents) {\n  waypointComponents.filter(isOccupiedByMe).forEach(unoccupyWaypoint);\n}\nfunction occupyWaypoint(waypointComponent) {\n  waypointComponent.el.setAttribute(\"waypoint\", { isOccupied: true });\n}\n\nfunction uuid(el) {\n  return el.object3D.uuid;\n}\n\nexport class WaypointSystem {\n  constructor(scene, characterController) {\n    this.helperMat4 = new THREE.Matrix4();\n    this.scene = scene;\n    this.loading = [];\n    this.ready = [];\n    this.previousWaypointHash = null;\n    this.initialSpawnHappened = false;\n\n    this.waypointForTemplateEl = {};\n    this.elementsFromTemplatesFor = {};\n    this.eventHandlers = [];\n    this.lostOwnershipOfWaypoint = this.lostOwnershipOfWaypoint.bind(this);\n    waitForDOMContentLoaded().then(() => {\n      loadTemplateAndAddToScene(scene, \"waypoint-preview-avatar-template\").then(el => {\n        this.waypointPreviewAvatar = el;\n        this.waypointPreviewAvatar.object3D.visible = false;\n      });\n    });\n    this.characterController = characterController;\n  }\n\n  releaseAnyOccupiedWaypoints() {\n    unoccupyWaypoints(this.ready);\n    if (this.currentWaypoint) {\n      this.currentWaypoint.el.removeEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n    }\n  }\n\n  teleportToWaypoint(iconEl, waypointComponent) {\n    return function onInteract() {\n      this.moveToWaypoint(waypointComponent, false);\n    }.bind(this);\n  }\n  tryTeleportToOccupiableWaypoint(iconEl, waypointComponent) {\n    return function onInteract() {\n      const previouslyOccupiedWaypoints = this.ready.filter(isOccupiedByMe);\n      this.tryToOccupy(waypointComponent).then(didOccupy => {\n        if (didOccupy) {\n          waypointComponent.el.object3D.updateMatrices();\n          this.characterController.shouldLandWhenPossible = true;\n          this.characterController.enqueueWaypointTravelTo(\n            waypointComponent.el.object3D.matrixWorld,\n            false,\n            waypointComponent.data\n          );\n          unoccupyWaypoints(previouslyOccupiedWaypoints.filter(wp => wp !== waypointComponent));\n        }\n      });\n    }.bind(this);\n  }\n  setupEventHandlersFor(component) {\n    return function setupEventHandlers(el) {\n      const id = uuid(el);\n      this.eventHandlers[id] = this.eventHandlers[id] || {};\n      if (\n        component.data.canBeClicked &&\n        (el.classList.contains(\"teleport-waypoint-icon\") || el.classList.contains(\"occupiable-waypoint-icon\"))\n      ) {\n        const onHover = () => {\n          component.el.object3D.updateMatrices();\n          if (this.waypointPreviewAvatar && !this.waypointForTemplateEl[id].data.willMaintainInitialOrientation) {\n            this.waypointPreviewAvatar.object3D.visible = true;\n            component.el.object3D.updateMatrices();\n            setMatrixWorld(this.waypointPreviewAvatar.object3D, component.el.object3D.matrixWorld);\n          }\n        };\n        const onUnhover = () => {\n          if (this.waypointPreviewAvatar) {\n            this.waypointPreviewAvatar.object3D.visible = false;\n          }\n        };\n        el.object3D.addEventListener(\"hovered\", onHover);\n        el.object3D.addEventListener(\"unhovered\", onUnhover);\n        this.eventHandlers[id][\"hovered\"] = onHover;\n        this.eventHandlers[id][\"unhovered\"] = onUnhover;\n      }\n      if (isTagged(el, \"singleActionButton\") && component.data.canBeClicked) {\n        let onInteract = () => {\n          console.log(\"interacted with\", el, \"associated with waypoint\", component);\n        };\n        if (el.classList.contains(\"teleport-waypoint-icon\")) {\n          onInteract = this.teleportToWaypoint(el, component);\n        } else if (el.classList.contains(\"occupiable-waypoint-icon\")) {\n          onInteract = this.tryTeleportToOccupiableWaypoint(el, component);\n        }\n        el.object3D.addEventListener(\"interact\", onInteract);\n        this.eventHandlers[id][\"interact\"] = onInteract;\n      }\n    }.bind(this);\n  }\n  registerComponent(component) {\n    this.loading.push(component);\n    const setupEventHandlers = this.setupEventHandlersFor(component);\n    const waypointId = uuid(component.el);\n    this.elementsFromTemplatesFor[waypointId] = this.elementsFromTemplatesFor[waypointId] || [];\n    Promise.all(loadTemplatesForWaypointData(this.scene, component.data)).then(elementsFromTemplates => {\n      const li = this.loading.indexOf(component);\n      if (li === -1) {\n        return null;\n      }\n      this.loading.splice(li, 1);\n      this.ready.push(component);\n      this.elementsFromTemplatesFor[waypointId].push(...elementsFromTemplates);\n      elementsFromTemplates.forEach(el => {\n        this.waypointForTemplateEl[uuid(el)] = component;\n      });\n      elementsFromTemplates.forEach(setupEventHandlers);\n    });\n  }\n  unregisterComponent(component) {\n    const li = this.loading.indexOf(component);\n    if (li !== -1) {\n      this.loading.splice(li, 1);\n    }\n    const ri = this.ready.indexOf(component);\n    if (ri !== -1) {\n      this.ready.splice(ri, 1);\n      const waypointId = uuid(component.el);\n      const elementsFromTemplates = this.elementsFromTemplatesFor[waypointId];\n      for (let i = 0; i < elementsFromTemplates.length; i++) {\n        const el = elementsFromTemplates[i];\n        const id = uuid(el);\n        if (this.eventHandlers[id]) {\n          const removeEventListener = eventName => {\n            if (this.eventHandlers[id][eventName]) {\n              el.object3D.removeEventListener(eventName, this.eventHandlers[id][eventName]);\n              delete this.eventHandlers[id][eventName];\n            }\n          };\n          [\"interact\", \"hovered\", \"unhovered\"].map(removeEventListener);\n        }\n        el.parentNode.removeChild(el);\n      }\n      this.elementsFromTemplatesFor[waypointId].length = 0;\n    }\n  }\n  getUnoccupiableSpawnPoint() {\n    const candidates = this.ready.filter(component => isUnoccupiableSpawnPoint(component.data));\n    return candidates.length && candidates.splice(Math.floor(Math.random() * candidates.length), 1)[0];\n  }\n  lostOwnershipOfWaypoint(e) {\n    if (this.currentWaypoint && this.currentWaypoint.el === e.detail.el) {\n      this.mightNeedRespawn = true;\n      this.ownershipLostTime = performance.now();\n    }\n  }\n  tryToOccupy(waypointComponent) {\n    return new Promise(resolve => {\n      if (shouldTryToOccupy(waypointComponent) && isMineOrTakeOwnership(waypointComponent.el)) {\n        occupyWaypoint(waypointComponent);\n        if (this.currentWaypoint) {\n          this.currentWaypoint.el.removeEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n        }\n        this.currentWaypoint = waypointComponent;\n        waypointComponent.el.addEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n        resolve(true);\n      } else {\n        resolve(false);\n      }\n    });\n  }\n  tryToOccupyAnyOf(waypoints) {\n    if (!waypoints.length) return Promise.resolve(null);\n    const candidate = waypoints.splice(Math.floor(Math.random() * waypoints.length), 1)[0];\n    return this.tryToOccupy(candidate).then(didOccupy => {\n      if (didOccupy) {\n        return Promise.resolve(candidate);\n      } else {\n        return this.tryToOccupyAnyOf(waypoints);\n      }\n    });\n  }\n  moveToSpawnPoint() {\n    if (this.currentMoveToSpawn) {\n      return this.currentMoveToSpawn;\n    }\n    if (!this.nextMoveToSpawn) {\n      this.waitOneTick = true;\n      this.nextMoveToSpawn = new Promise(resolve => {\n        this.nextMoveToSpawnResolve = resolve;\n      });\n    }\n    // Reset system state to allow for waypoint selection based on URL fragments\n    this.previousWaypointHash = null;\n    this.initialSpawnHappened = false;\n    return this.nextMoveToSpawn;\n  }\n  moveToWaypoint(waypointComponent, instant) {\n    this.releaseAnyOccupiedWaypoints();\n    waypointComponent.el.object3D.updateMatrices();\n    this.characterController.shouldLandWhenPossible = true;\n    this.characterController.enqueueWaypointTravelTo(\n      waypointComponent.el.object3D.matrixWorld,\n      !window.APP.store.state.preferences.animateWaypointTransitions || instant,\n      waypointComponent.data\n    );\n  }\n  moveToUnoccupiableSpawnPoint() {\n    const waypointComponent = this.getUnoccupiableSpawnPoint();\n    if (waypointComponent) {\n      this.moveToWaypoint(waypointComponent, true);\n    }\n    return waypointComponent;\n  }\n  tick() {\n    if (this.waitOneTick) {\n      this.waitOneTick = false;\n      return;\n    }\n\n    const hashUpdated = window.location.hash !== \"\" && this.previousWaypointHash !== window.location.hash;\n\n    if (hashUpdated && this.initialSpawnHappened) {\n      const waypointName = window.location.hash.replace(\"#\", \"\");\n      const waypoint = this.ready.find(c => c.el.object3D.name === waypointName);\n      if (waypoint) {\n        this.moveToWaypoint(waypoint, this.previousWaypointHash === null);\n        window.history.replaceState(null, null, window.location.href.split(\"#\")[0]); // Reset so you can re-activate the same waypoint\n      }\n      this.previousWaypointHash = window.location.hash;\n    }\n\n    if (!this.currentMoveToSpawn && this.nextMoveToSpawn) {\n      this.mightNeedRespawn = false;\n      this.currentMoveToSpawn = this.nextMoveToSpawn;\n      this.currentMoveToSpawnResolve = this.nextMoveToSpawnResolve;\n      this.nextMoveToSpawn = null;\n      this.nextMoveToSpawnResolve = null;\n\n      let resolvedWaypointOrNull;\n\n      const previouslyOccupiedWaypoints = this.ready.filter(isOccupiedByMe);\n      this.tryToOccupyAnyOf(this.ready.filter(component => isOccupiableSpawnPoint(component.data))).then(\n        waypointComponentOrNull => {\n          if (waypointComponentOrNull) {\n            const waypointComponent = waypointComponentOrNull;\n            unoccupyWaypoints(previouslyOccupiedWaypoints.filter(wp => wp !== waypointComponent));\n            waypointComponent.el.object3D.updateMatrices();\n            this.characterController.shouldLandWhenPossible = true;\n            this.characterController.enqueueWaypointTravelTo(\n              waypointComponent.el.object3D.matrixWorld,\n              true,\n              waypointComponent.data\n            );\n            resolvedWaypointOrNull = waypointComponent;\n          } else if (waypointComponentOrNull === null) {\n            resolvedWaypointOrNull = this.moveToUnoccupiableSpawnPoint();\n          }\n          this.initialSpawnHappened = true;\n          this.currentMoveToSpawnResolve(resolvedWaypointOrNull);\n          this.currentMoveToSpawn = null;\n          this.currentMoveToSpawnResolve = null;\n        }\n      );\n    } else if (this.mightNeedRespawn && performance.now() - this.ownershipLostTime < 8000) {\n      this.mightNeedRespawn = false;\n      this.moveToSpawnPoint();\n    }\n    const tickTemplateEl = (elementFromTemplate, waypointComponent) => {\n      if (\n        elementFromTemplate.classList.contains(\"teleport-waypoint-icon\") ||\n        elementFromTemplate.classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        elementFromTemplate.object3D.visible = this.scene.is(\"frozen\");\n        if (elementFromTemplate.object3D.visible) {\n          this.viewingCamera = this.viewingCamera || document.getElementById(\"viewing-camera\").object3DMap.camera;\n          setMatrixWorld(\n            elementFromTemplate.object3D,\n            calculateIconTransform(waypointComponent.el.object3D, this.viewingCamera, this.helperMat4)\n          );\n        }\n      }\n    };\n    function tickWaypoint(waypointComponent) {\n      const elementsFromTemplates = this.elementsFromTemplatesFor[uuid(waypointComponent.el)];\n      elementsFromTemplates.forEach(el => tickTemplateEl(el, waypointComponent));\n    }\n    this.ready.forEach(tickWaypoint.bind(this));\n  }\n}\n\nAFRAME.registerComponent(\"waypoint\", {\n  schema: {\n    canBeSpawnPoint: { default: false },\n    canBeOccupied: { default: false },\n    canBeClicked: { default: false },\n    willDisableMotion: { default: false },\n    willDisableTeleporting: { default: false },\n    snapToNavMesh: { default: false },\n    willMaintainInitialOrientation: { default: false },\n    willMaintainWorldUp: { default: true },\n    isOccupied: { default: false }\n  },\n  init() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].waypointSystem;\n    this.didRegisterWithSystem = false;\n  },\n  play() {\n    if (!this.didRegisterWithSystem) {\n      if (this.el.components.networked) {\n        applyPersistentSync(this.el.components.networked.data.networkId);\n      }\n      this.system.registerComponent(this, this.el.sceneEl);\n      this.didRegisterWithSystem = true;\n    }\n  },\n  remove() {\n    if (!this.didRegisterWithSystem) {\n      console.warn(\"Waypoint removed without ever having registered with the system.\");\n    } else {\n      this.system.unregisterComponent(this);\n    }\n  }\n});\n","const mat4Pool = [];\nexport function getPooledMatrix4() {\n  return mat4Pool.shift() || new THREE.Matrix4();\n}\nexport function freePooledMatrix4(mat4) {\n  mat4Pool.push(mat4);\n}\n","export const getCurrentPlayerHeight = (function() {\n  let avatarPOV;\n  let avatarRig;\n  return function getCurrentPlayerHeight(world) {\n    avatarPOV = avatarPOV || document.getElementById(\"avatar-pov-node\");\n    avatarRig = avatarRig || document.getElementById(\"avatar-rig\");\n    avatarRig.object3D.updateMatrices();\n    avatarPOV.object3D.updateMatrices();\n    if (world) {\n      return avatarPOV.object3D.matrixWorld.elements[13] - avatarRig.object3D.matrixWorld.elements[13];\n    }\n    return avatarPOV.object3D.matrix.elements[13];\n  };\n})();\n","import { paths } from \"./userinput/paths\";\nimport { SOUND_SNAP_ROTATE, SOUND_WAYPOINT_START, SOUND_WAYPOINT_END } from \"./sound-effects-system\";\nimport { easeOutQuadratic } from \"../utils/easing\";\nimport { getPooledMatrix4, freePooledMatrix4 } from \"../utils/mat4-pool\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport {\n  childMatch,\n  rotateInPlaceAroundWorldUp,\n  calculateCameraTransformForWaypoint,\n  interpolateAffine,\n  affixToWorldUp\n} from \"../utils/three-utils\";\nimport { getCurrentPlayerHeight } from \"../utils/get-current-player-height\";\nimport qsTruthy from \"../utils/qs_truthy\";\n//import { m4String } from \"../utils/pretty-print\";\nconst NAV_ZONE = \"character\";\nconst qsAllowWaypointLerp = qsTruthy(\"waypointLerp\");\nconst isMobile = AFRAME.utils.device.isMobile();\n\nconst calculateDisplacementToDesiredPOV = (function() {\n  const translationCoordinateSpace = new THREE.Matrix4();\n  const translated = new THREE.Matrix4();\n  const localTranslation = new THREE.Matrix4();\n  return function calculateDisplacementToDesiredPOV(\n    povMat4,\n    allowVerticalMovement,\n    localDisplacement,\n    displacementToDesiredPOV\n  ) {\n    localTranslation.makeTranslation(localDisplacement.x, localDisplacement.y, localDisplacement.z);\n    translationCoordinateSpace.extractRotation(povMat4);\n    if (!allowVerticalMovement) {\n      affixToWorldUp(translationCoordinateSpace, translationCoordinateSpace);\n    }\n    translated.copy(translationCoordinateSpace).multiply(localTranslation);\n    return displacementToDesiredPOV.setFromMatrixPosition(translated);\n  };\n})();\n\n/**\n * A character controller that moves the avatar.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n */\nconst BASE_SPEED = 3.2; //TODO: in what units?\nexport class CharacterControllerSystem {\n  constructor(scene) {\n    this.scene = scene;\n    this.fly = false;\n    this.shouldLandWhenPossible = false;\n    this.waypoints = [];\n    this.waypointTravelStartTime = 0;\n    this.waypointTravelTime = 0;\n    this.navGroup = null;\n    this.navNode = null;\n    this.relativeMotion = new THREE.Vector3(0, 0, 0);\n    this.nextRelativeMotion = new THREE.Vector3(0, 0, 0);\n    this.dXZ = 0;\n    this.scene.addEventListener(\"nav-mesh-loaded\", () => {\n      this.navGroup = null;\n      this.navNode = null;\n    });\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n    });\n  }\n  // Use this API for waypoint travel so that your matrix doesn't end up in the pool\n  enqueueWaypointTravelTo(inTransform, isInstant, waypointComponentData) {\n    this.waypoints.push({ transform: getPooledMatrix4().copy(inTransform), isInstant, waypointComponentData }); //TODO: don't create new object\n  }\n  enqueueRelativeMotion(motion) {\n    this.relativeMotion.add(motion);\n  }\n  enqueueInPlaceRotationAroundWorldUp(dXZ) {\n    this.dXZ += dXZ;\n  }\n  // We assume the rig is at the root, and its local position === its world position.\n  teleportTo = (function() {\n    const rig = new THREE.Vector3();\n    const head = new THREE.Vector3();\n    const deltaFromHeadToTargetForHead = new THREE.Vector3();\n    const targetForHead = new THREE.Vector3();\n    const targetForRig = new THREE.Vector3();\n    //TODO: Use enqueue waypoint\n    return function teleportTo(targetWorldPosition) {\n      this.isMotionDisabled = false;\n      this.avatarRig.object3D.getWorldPosition(rig);\n      this.avatarPOV.object3D.getWorldPosition(head);\n      targetForHead.copy(targetWorldPosition);\n      targetForHead.y += this.avatarPOV.object3D.position.y;\n      deltaFromHeadToTargetForHead.copy(targetForHead).sub(head);\n      targetForRig.copy(rig).add(deltaFromHeadToTargetForHead);\n      const navMeshExists = NAV_ZONE in this.scene.systems.nav.pathfinder.zones;\n      this.findPositionOnNavMesh(targetForRig, targetForRig, this.avatarRig.object3D.position, navMeshExists);\n      this.avatarRig.object3D.matrixNeedsUpdate = true;\n    };\n  })();\n\n  travelByWaypoint = (function() {\n    const inMat4Copy = new THREE.Matrix4();\n    const inPosition = new THREE.Vector3();\n    const outPosition = new THREE.Vector3();\n    const translation = new THREE.Matrix4();\n    const initialOrientation = new THREE.Matrix4();\n    const finalScale = new THREE.Vector3();\n    const finalPosition = new THREE.Vector3();\n    const finalPOV = new THREE.Matrix4();\n    return function travelByWaypoint(inMat4, snapToNavMesh, willMaintainInitialOrientation) {\n      this.avatarPOV.object3D.updateMatrices();\n      if (!this.fly && !snapToNavMesh) {\n        this.fly = true;\n        this.shouldLandWhenPossible = true;\n        this.shouldUnoccupyWaypointsOnceMoving = true;\n      }\n      inMat4Copy.copy(inMat4);\n      rotateInPlaceAroundWorldUp(inMat4Copy, Math.PI, finalPOV);\n      const navMeshExists = NAV_ZONE in this.scene.systems.nav.pathfinder.zones;\n      if (!navMeshExists && snapToNavMesh) {\n        console.warn(\"Tried to travel to a waypoint that wants to snap to the nav mesh, but there is no nav mesh\");\n      }\n      if (navMeshExists && snapToNavMesh) {\n        inPosition.setFromMatrixPosition(inMat4Copy);\n        this.findPositionOnNavMesh(inPosition, inPosition, outPosition, true);\n        finalPOV.setPosition(outPosition);\n        translation.makeTranslation(0, getCurrentPlayerHeight(), -0.15);\n      } else {\n        // If we are not snapping to the nav mesh, align the user's\n        // perspective exactly to the robot eyes as they appear in the\n        // waypoint indicator. (1.6 meters up and 0.15 meters forward)\n        // This does _not_ require taking the player's height into account\n        // on this line because we are only interested in where the\n        // camera will end up.\n        translation.makeTranslation(0, 1.6, -0.15);\n      }\n      finalPOV.multiply(translation);\n      if (willMaintainInitialOrientation) {\n        initialOrientation.extractRotation(this.avatarPOV.object3D.matrixWorld);\n        finalScale.setFromMatrixScale(finalPOV);\n        finalPosition.setFromMatrixPosition(finalPOV);\n        finalPOV\n          .copy(initialOrientation)\n          .scale(finalScale)\n          .setPosition(finalPosition);\n      }\n      calculateCameraTransformForWaypoint(this.avatarPOV.object3D.matrixWorld, finalPOV, finalPOV);\n      childMatch(this.avatarRig.object3D, this.avatarPOV.object3D, finalPOV);\n    };\n  })();\n\n  tick = (function() {\n    const snapRotatedPOV = new THREE.Matrix4();\n    const newPOV = new THREE.Matrix4();\n    const displacementToDesiredPOV = new THREE.Vector3();\n\n    const startPOVPosition = new THREE.Vector3();\n    const desiredPOVPosition = new THREE.Vector3();\n    const navMeshSnappedPOVPosition = new THREE.Vector3();\n    const AVERAGE_WAYPOINT_TRAVEL_SPEED_METERS_PER_SECOND = 50;\n    const startTransform = new THREE.Matrix4();\n    const interpolatedWaypoint = new THREE.Matrix4();\n    const startTranslation = new THREE.Matrix4();\n    const waypointPosition = new THREE.Vector3();\n    const v = new THREE.Vector3();\n\n    let uiRoot;\n    return function tick(t, dt) {\n      const entered = this.scene.is(\"entered\");\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      if (!isGhost && !entered) return;\n      const vrMode = this.scene.is(\"vr-mode\");\n      this.sfx = this.sfx || this.scene.systems[\"hubs-systems\"].soundEffectsSystem;\n      this.waypointSystem = this.waypointSystem || this.scene.systems[\"hubs-systems\"].waypointSystem;\n\n      if (!this.activeWaypoint && this.waypoints.length) {\n        this.activeWaypoint = this.waypoints.splice(0, 1)[0];\n        // Normally, do not disable motion on touchscreens because there is no way to teleport out of it.\n        // But if motion AND teleporting is disabled, then disable motion because the waypoint author\n        // intended for the user to be stuck here.\n        this.isMotionDisabled =\n          this.activeWaypoint.waypointComponentData.willDisableMotion &&\n          (!isMobile || this.activeWaypoint.waypointComponentData.willDisableTeleporting);\n        this.isTeleportingDisabled = this.activeWaypoint.waypointComponentData.willDisableTeleporting;\n        this.avatarPOV.object3D.updateMatrices();\n        this.waypointTravelTime =\n          (vrMode && !qsAllowWaypointLerp) || this.activeWaypoint.isInstant\n            ? 0\n            : 1000 *\n              (new THREE.Vector3()\n                .setFromMatrixPosition(this.avatarPOV.object3D.matrixWorld)\n                .distanceTo(waypointPosition.setFromMatrixPosition(this.activeWaypoint.transform)) /\n                AVERAGE_WAYPOINT_TRAVEL_SPEED_METERS_PER_SECOND);\n        rotateInPlaceAroundWorldUp(this.avatarPOV.object3D.matrixWorld, Math.PI, startTransform);\n        startTransform.multiply(startTranslation.makeTranslation(0, -1 * getCurrentPlayerHeight(), -0.15));\n        this.waypointTravelStartTime = t;\n        if (!vrMode && this.waypointTravelTime > 100) {\n          this.sfx.playSoundOneShot(SOUND_WAYPOINT_START);\n        }\n      }\n\n      const animationIsOver =\n        this.waypointTravelTime === 0 || t >= this.waypointTravelStartTime + this.waypointTravelTime;\n      if (this.activeWaypoint && !animationIsOver) {\n        const progress = THREE.Math.clamp((t - this.waypointTravelStartTime) / this.waypointTravelTime, 0, 1);\n        interpolateAffine(\n          startTransform,\n          this.activeWaypoint.transform,\n          easeOutQuadratic(progress),\n          interpolatedWaypoint\n        );\n        this.travelByWaypoint(\n          interpolatedWaypoint,\n          false,\n          this.activeWaypoint.waypointComponentData.willMaintainInitialOrientation\n        );\n      }\n      if (this.activeWaypoint && (this.waypoints.length || animationIsOver)) {\n        this.travelByWaypoint(\n          this.activeWaypoint.transform,\n          this.activeWaypoint.waypointComponentData.snapToNavMesh,\n          this.activeWaypoint.waypointComponentData.willMaintainInitialOrientation\n        );\n        freePooledMatrix4(this.activeWaypoint.transform);\n        this.activeWaypoint = null;\n        if (vrMode || this.waypointTravelTime > 0) {\n          this.sfx.playSoundOneShot(SOUND_WAYPOINT_END);\n        }\n      }\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const wasFlying = this.fly;\n      if (userinput.get(paths.actions.toggleFly)) {\n        this.shouldLandWhenPossible = false;\n        this.avatarRig.messageDispatch.dispatch(\"/fly\"); // TODO: Separate the logic about displaying the message from toggling the fly state in such a way that it is clear that this.fly will be toggled here\n      }\n      const didStopFlying = wasFlying && !this.fly;\n      if (!this.fly && this.shouldLandWhenPossible) {\n        this.shouldLandWhenPossible = false;\n      }\n      if (this.fly) {\n        this.navNode = null;\n      }\n      const preferences = window.APP.store.state.preferences;\n      const snapRotateLeft = userinput.get(paths.actions.snapRotateLeft);\n      const snapRotateRight = userinput.get(paths.actions.snapRotateRight);\n      if (snapRotateLeft) {\n        this.dXZ += (preferences.snapRotationDegrees * Math.PI) / 180;\n      }\n      if (snapRotateRight) {\n        this.dXZ -= (preferences.snapRotationDegrees * Math.PI) / 180;\n      }\n      if (snapRotateLeft || snapRotateRight) {\n        this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n      }\n      const characterAcceleration = userinput.get(paths.actions.characterAcceleration);\n      if (characterAcceleration) {\n        const zCharacterAcceleration = -1 * characterAcceleration[1];\n        this.relativeMotion.set(\n          this.relativeMotion.x +\n            (preferences.disableMovement || preferences.disableStrafing ? 0 : characterAcceleration[0]),\n          this.relativeMotion.y,\n          this.relativeMotion.z +\n            (preferences.disableMovement\n              ? 0\n              : preferences.disableBackwardsMovement\n                ? Math.min(0, zCharacterAcceleration)\n                : zCharacterAcceleration)\n        );\n      }\n      const lerpC = vrMode ? 0 : 0.85; // TODO: To support drifting (\"ice skating\"), motion needs to keep initial direction\n      this.nextRelativeMotion.copy(this.relativeMotion).multiplyScalar(lerpC);\n      this.relativeMotion.multiplyScalar(1 - lerpC);\n\n      this.avatarPOV.object3D.updateMatrices();\n      rotateInPlaceAroundWorldUp(this.avatarPOV.object3D.matrixWorld, this.dXZ, snapRotatedPOV);\n\n      newPOV.copy(snapRotatedPOV);\n\n      const navMeshExists = NAV_ZONE in this.scene.systems.nav.pathfinder.zones;\n      if (!this.isMotionDisabled) {\n        const playerScale = v.setFromMatrixColumn(this.avatarPOV.object3D.matrixWorld, 1).length();\n        const triedToMove = this.relativeMotion.lengthSq() > 0.000001;\n\n        if (triedToMove) {\n          const speedModifier = preferences.movementSpeedModifier;\n          calculateDisplacementToDesiredPOV(\n            snapRotatedPOV,\n            this.fly || !navMeshExists,\n            this.relativeMotion.multiplyScalar(\n              ((userinput.get(paths.actions.boost) ? 2 : 1) *\n                speedModifier *\n                BASE_SPEED *\n                Math.sqrt(playerScale) *\n                dt) /\n                1000\n            ),\n            displacementToDesiredPOV\n          );\n\n          newPOV\n            .makeTranslation(displacementToDesiredPOV.x, displacementToDesiredPOV.y, displacementToDesiredPOV.z)\n            .multiply(snapRotatedPOV);\n        }\n\n        const shouldRecomputeNavGroupAndNavNode = didStopFlying || this.shouldLandWhenPossible;\n        const shouldResnapToNavMesh = navMeshExists && (shouldRecomputeNavGroupAndNavNode || triedToMove);\n\n        let squareDistNavMeshCorrection = 0;\n\n        if (shouldResnapToNavMesh) {\n          this.findPOVPositionAboveNavMesh(\n            startPOVPosition.setFromMatrixPosition(this.avatarPOV.object3D.matrixWorld),\n            desiredPOVPosition.setFromMatrixPosition(newPOV),\n            navMeshSnappedPOVPosition,\n            shouldRecomputeNavGroupAndNavNode\n          );\n\n          squareDistNavMeshCorrection = desiredPOVPosition.distanceToSquared(navMeshSnappedPOVPosition);\n\n          if (this.fly && this.shouldLandWhenPossible && squareDistNavMeshCorrection < 0.5 && !this.activeWaypoint) {\n            this.shouldLandWhenPossible = false;\n            this.fly = false;\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n          } else if (!this.fly) {\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n          }\n        }\n\n        if (!this.activeWaypoint && this.shouldUnoccupyWaypointsOnceMoving && triedToMove) {\n          this.shouldUnoccupyWaypointsOnceMoving = false;\n          this.waypointSystem.releaseAnyOccupiedWaypoints();\n          if (this.fly && this.shouldLandWhenPossible && (shouldResnapToNavMesh && squareDistNavMeshCorrection < 3)) {\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n            this.shouldLandWhenPossible = false;\n            this.fly = false;\n          }\n        }\n      }\n\n      childMatch(this.avatarRig.object3D, this.avatarPOV.object3D, newPOV);\n      this.relativeMotion.copy(this.nextRelativeMotion);\n      this.dXZ = 0;\n    };\n  })();\n\n  getClosestNode(pos) {\n    const pathfinder = this.scene.systems.nav.pathfinder;\n    if (!pathfinder.zones[NAV_ZONE].groups[this.navGroup]) {\n      return null;\n    }\n    return (\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup)\n    );\n  }\n\n  findPOVPositionAboveNavMesh = (function() {\n    const startingFeetPosition = new THREE.Vector3();\n    const desiredFeetPosition = new THREE.Vector3();\n    // TODO: Here we assume the player is standing straight up, but in VR it is often the case\n    // that you want to lean over the edge of a balcony/table that does not have nav mesh below.\n    // We should find way to allow leaning over the edge of a balcony and maybe disallow putting\n    // your head through a wall.\n    return function findPOVPositionAboveNavMesh(\n      startPOVPosition,\n      desiredPOVPosition,\n      outPOVPosition,\n      shouldRecomputeGroupAndNode\n    ) {\n      const playerHeight = getCurrentPlayerHeight(true);\n      startingFeetPosition.copy(startPOVPosition);\n      startingFeetPosition.y -= playerHeight;\n      desiredFeetPosition.copy(desiredPOVPosition);\n      desiredFeetPosition.y -= playerHeight;\n      this.findPositionOnNavMesh(\n        startingFeetPosition,\n        desiredFeetPosition,\n        outPOVPosition,\n        shouldRecomputeGroupAndNode\n      );\n      outPOVPosition.y += playerHeight;\n      return outPOVPosition;\n    };\n  })();\n\n  findPositionOnNavMesh(start, end, outPos, shouldRecomputeGroupAndNode) {\n    const pathfinder = this.scene.systems.nav.pathfinder;\n    if (!(NAV_ZONE in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(NAV_ZONE, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode || this.navNode === null || this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      this.navNode = pathfinder.clampStep(start, end, this.navNode, NAV_ZONE, this.navGroup, outPos);\n    }\n    return outPos;\n  }\n\n  enableFly(enabled) {\n    if (enabled && window.APP.hubChannel && window.APP.hubChannel.can(\"fly\")) {\n      this.fly = true;\n    } else {\n      this.fly = false;\n    }\n    return this.fly;\n  }\n}\n","const IDENTITY = new THREE.Matrix4().identity();\nexport class CursorPoseTrackingSystem {\n  constructor() {\n    this.pairs = [];\n  }\n  register(object3D, path) {\n    object3D.applyMatrix4(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    this.pairs.push({ object3D, path });\n  }\n  unregister(object3D) {\n    this.pairs = this.pairs.filter(p => p.object3D !== object3D);\n  }\n  tick() {\n    for (let i = 0; i < this.pairs.length; i++) {\n      const matrix = AFRAME.scenes[0].systems.userinput.get(this.pairs[i].path);\n      if (matrix) {\n        const o = this.pairs[i].object3D;\n        o.matrix.copy(matrix);\n        o.matrix.decompose(o.position, o.quaternion, o.scale);\n        o.matrixWorldNeedsUpdate = true;\n      }\n    }\n  }\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { elasticOut } from \"../utils/easing\";\nconst MENU_ANIMATION_DURATION_MS = 750;\nexport class MenuAnimationSystem {\n  constructor() {\n    this.components = [];\n    this.data = new Map();\n    this.tick = this.tick.bind(this);\n    waitForDOMContentLoaded().then(() => {\n      this.viewingCameraEl = document.getElementById(\"viewing-camera\");\n    });\n  }\n  register(component, menuEl, chooseScale) {\n    this.components.push(component);\n    this.data.set(component, {\n      menuEl,\n      chooseScale,\n      menuOpenTime: -1,\n      startScaleAtMenuOpenTime: 0,\n      wasMenuVisible: false,\n      endingScale: 0\n    });\n  }\n  unregister(component) {\n    this.components.splice(this.components.indexOf(component), 1);\n    this.data.delete(component);\n  }\n  tick = (function() {\n    const menuToCamera = new THREE.Vector3();\n    const menuScale = new THREE.Vector3();\n    const menuParentScale = new THREE.Vector3();\n    const menuPosition = new THREE.Vector3();\n    const cameraPosition = new THREE.Vector3();\n    return function tick(t) {\n      if (!this.viewingCameraEl) {\n        return;\n      }\n      const camera = this.viewingCameraEl.object3DMap.camera;\n      camera.updateMatrices();\n      cameraPosition.setFromMatrixPosition(camera.matrixWorld);\n\n      for (let i = 0; i < this.components.length; i++) {\n        const datum = this.data.get(this.components[i]);\n        const isMenuVisible = datum.menuEl.object3D.visible;\n        const isMenuOpening = isMenuVisible && !datum.wasMenuVisible;\n        const distanceToMenu = menuToCamera\n          .subVectors(cameraPosition, menuPosition.setFromMatrixPosition(datum.menuEl.object3D.matrixWorld))\n          .length();\n        datum.menuEl.object3D.parent.updateMatrices();\n        menuParentScale.setFromMatrixScale(datum.menuEl.object3D.parent.matrixWorld);\n        if (isMenuOpening) {\n          const scale = datum.chooseScale\n            ? THREE.Math.clamp(0.45 * distanceToMenu, 0.05, 4)\n            : menuScale.setFromMatrixScale(datum.menuEl.object3D.matrixWorld).x;\n          datum.endingScale = scale / menuParentScale.x;\n          datum.menuOpenTime = t;\n          datum.startScaleAtMenuOpenTime = datum.endingScale * 0.8;\n        }\n        if (isMenuVisible) {\n          const currentScale = THREE.Math.lerp(\n            datum.startScaleAtMenuOpenTime,\n            datum.endingScale,\n            elasticOut(THREE.Math.clamp((t - datum.menuOpenTime) / MENU_ANIMATION_DURATION_MS, 0, 1))\n          );\n          if (datum.menuEl.object3D.scale.x !== currentScale) {\n            datum.menuEl.object3D.scale.setScalar(currentScale);\n            datum.menuEl.object3D.matrixNeedsUpdate = true;\n          }\n        }\n        datum.wasMenuVisible = isMenuVisible;\n      }\n    };\n  })();\n}\n","import { SourceType } from \"../components/audio-params\";\nimport { updateAudioSettings } from \"../update-audio-settings\";\n\nexport class AudioSettingsSystem {\n  constructor(sceneEl) {\n    sceneEl.addEventListener(\"reset_scene\", this.onSceneReset);\n\n    if (window.APP.store.state.preferences.audioNormalization !== 0.0) {\n      //hack to always reset to 0.0 (disabled)\n      window.APP.store.update({\n        preferences: { audioNormalization: 0.0 }\n      });\n    }\n  }\n\n  onSceneReset = () => {\n    APP.sceneAudioDefaults.delete(SourceType.AVATAR_AUDIO_SOURCE);\n    APP.sceneAudioDefaults.delete(SourceType.MEDIA_VIDEO);\n    for (const [el, audio] of APP.audios.entries()) {\n      updateAudioSettings(el, audio);\n    }\n  };\n}\n","import { LogMessageType } from \"../react-components/room/ChatSidebar\";\nimport { GAIN_TIME_CONST, SourceType } from \"../components/audio-params\";\n\nlet delayedReconnectTimeout = null;\nfunction performDelayedReconnect(gainNode) {\n  if (delayedReconnectTimeout) {\n    clearTimeout(delayedReconnectTimeout);\n  }\n\n  delayedReconnectTimeout = setTimeout(() => {\n    delayedReconnectTimeout = null;\n    console.warn(\n      \"enableChromeAEC: recreate RTCPeerConnection loopback because the local connection was disconnected for 10s\"\n    );\n    // eslint-disable-next-line no-use-before-define\n    enableChromeAEC(gainNode);\n  }, 10000);\n}\n\nimport * as sdpTransform from \"sdp-transform\";\nimport MediaDevicesManager from \"../utils/media-devices-manager\";\nimport { THREE } from \"aframe\";\n\nfunction isThreeAudio(node) {\n  return node instanceof THREE.Audio || node instanceof THREE.PositionalAudio;\n}\n\nasync function enableChromeAEC(gainNode) {\n  /**\n   *  workaround for: https://bugs.chromium.org/p/chromium/issues/detail?id=687574\n   *  1. grab the GainNode from the scene's THREE.AudioListener\n   *  2. disconnect the GainNode from the AudioDestinationNode (basically the audio out), this prevents hearing the audio twice.\n   *  3. create a local webrtc connection between two RTCPeerConnections (see this example: https://webrtc.github.io/samples/src/content/peerconnection/pc1/)\n   *  4. create a new MediaStreamDestination from the scene's THREE.AudioContext and connect the GainNode to it.\n   *  5. add the MediaStreamDestination's track  to one of those RTCPeerConnections\n   *  6. connect the other RTCPeerConnection's stream to a new audio element.\n   *  All audio is now routed through Chrome's audio mixer, thus enabling AEC, while preserving all the audio processing that was performed via the WebAudio API.\n   */\n\n  const audioEl = new Audio();\n  audioEl.setAttribute(\"autoplay\", \"autoplay\");\n  audioEl.setAttribute(\"playsinline\", \"playsinline\");\n\n  const context = THREE.AudioContext.getContext();\n  const loopbackDestination = context.createMediaStreamDestination();\n  const outboundPeerConnection = new RTCPeerConnection();\n  const inboundPeerConnection = new RTCPeerConnection();\n\n  const onError = e => {\n    console.error(\"enableChromeAEC: RTCPeerConnection loopback initialization error\", e);\n  };\n\n  outboundPeerConnection.addEventListener(\"icecandidate\", e => {\n    inboundPeerConnection.addIceCandidate(e.candidate).catch(onError);\n  });\n  outboundPeerConnection.addEventListener(\"iceconnectionstatechange\", () => {\n    console.warn(\n      \"enableChromeAEC: outboundPeerConnection state changed to \" + outboundPeerConnection.iceConnectionState\n    );\n    if (outboundPeerConnection.iceConnectionState === \"disconnected\") {\n      performDelayedReconnect(gainNode);\n    }\n    if (outboundPeerConnection.iceConnectionState === \"connected\") {\n      if (delayedReconnectTimeout) {\n        // The RTCPeerConnection reconnected by itself, cancel recreating the\n        // local connection.\n        clearTimeout(delayedReconnectTimeout);\n      }\n    }\n  });\n\n  inboundPeerConnection.addEventListener(\"icecandidate\", e => {\n    outboundPeerConnection.addIceCandidate(e.candidate).catch(onError);\n  });\n  inboundPeerConnection.addEventListener(\"iceconnectionstatechange\", () => {\n    console.warn(\"enableChromeAEC: inboundPeerConnection state changed to \" + inboundPeerConnection.iceConnectionState);\n    if (inboundPeerConnection.iceConnectionState === \"disconnected\") {\n      performDelayedReconnect(gainNode);\n    }\n    if (inboundPeerConnection.iceConnectionState === \"connected\") {\n      if (delayedReconnectTimeout) {\n        // The RTCPeerConnection reconnected by itself, cancel recreating the\n        // local connection.\n        clearTimeout(delayedReconnectTimeout);\n      }\n    }\n  });\n\n  inboundPeerConnection.addEventListener(\"track\", e => {\n    audioEl.srcObject = e.streams[0];\n  });\n\n  try {\n    //The following should never fail, but just in case, we won't disconnect/reconnect the gainNode unless all of this succeeds\n    loopbackDestination.stream.getTracks().forEach(track => {\n      outboundPeerConnection.addTrack(track, loopbackDestination.stream);\n    });\n\n    const offer = await outboundPeerConnection.createOffer();\n    outboundPeerConnection.setLocalDescription(offer);\n    await inboundPeerConnection.setRemoteDescription(offer);\n\n    const answer = await inboundPeerConnection.createAnswer();\n\n    // Rewrite SDP to be stereo and (variable) max bitrate\n    const parsedSdp = sdpTransform.parse(answer.sdp);\n    for (let i = 0; i < parsedSdp.media.length; i++) {\n      for (let j = 0; j < parsedSdp.media[i].fmtp.length; j++) {\n        parsedSdp.media[i].fmtp[j].config += `;stereo=1;cbr=0;maxaveragebitrate=510000;`;\n      }\n    }\n    answer.sdp = sdpTransform.write(parsedSdp);\n\n    inboundPeerConnection.setLocalDescription(answer);\n    outboundPeerConnection.setRemoteDescription(answer);\n\n    gainNode.disconnect();\n    gainNode.connect(loopbackDestination);\n  } catch (e) {\n    onError(e);\n  }\n}\n\nexport class AudioSystem {\n  constructor(sceneEl) {\n    this._sceneEl = sceneEl;\n\n    this.audioContext = THREE.AudioContext.getContext();\n    this.audioNodes = new Map();\n    this.mediaStreamDestinationNode = this.audioContext.createMediaStreamDestination(); // Voice, camera, screenshare\n    this.audioDestination = this.audioContext.createMediaStreamDestination(); // Media elements\n    this.outboundStream = this.mediaStreamDestinationNode.stream;\n    this.outboundGainNode = this.audioContext.createGain();\n    this.outboundAnalyser = this.audioContext.createAnalyser();\n    this.outboundAnalyser.fftSize = 32;\n    this.analyserLevels = new Uint8Array(this.outboundAnalyser.fftSize);\n    this.outboundGainNode.connect(this.outboundAnalyser);\n    this.outboundAnalyser.connect(this.mediaStreamDestinationNode);\n    this.audioContextNeedsToBeResumed = false;\n\n    this.mixer = {\n      [SourceType.AVATAR_AUDIO_SOURCE]: this.audioContext.createGain(),\n      [SourceType.MEDIA_VIDEO]: this.audioContext.createGain(),\n      [SourceType.SFX]: this.audioContext.createGain()\n    };\n    this.mixer[SourceType.AVATAR_AUDIO_SOURCE].connect(this._sceneEl.audioListener.getInput());\n    this.mixer[SourceType.MEDIA_VIDEO].connect(this._sceneEl.audioListener.getInput());\n    this.mixer[SourceType.SFX].connect(this._sceneEl.audioListener.getInput());\n\n    // Analyser to show the output audio level\n    this.mixerAnalyser = this.audioContext.createAnalyser();\n    this.mixerAnalyser.fftSize = 32;\n    this.mixer[SourceType.AVATAR_AUDIO_SOURCE].connect(this.mixerAnalyser);\n    this.mixer[SourceType.MEDIA_VIDEO].connect(this.mixerAnalyser);\n    this.mixer[SourceType.SFX].connect(this.mixerAnalyser);\n\n    // Webkit Mobile fix\n    this._safariMobileAudioInterruptionFix();\n\n    document.body.addEventListener(\"touchend\", this._resumeAudioContext, false);\n    document.body.addEventListener(\"mouseup\", this._resumeAudioContext, false);\n\n    this.onPrefsUpdated = this.updatePrefs.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.onPrefsUpdated);\n  }\n\n  addStreamToOutboundAudio(id, mediaStream) {\n    if (this.audioNodes.has(id)) {\n      this.removeStreamFromOutboundAudio(id);\n    }\n\n    const sourceNode = this.audioContext.createMediaStreamSource(mediaStream);\n    const gainNode = this.audioContext.createGain();\n    sourceNode.connect(gainNode);\n    gainNode.connect(this.outboundGainNode);\n    this.audioNodes.set(id, { sourceNode, gainNode });\n  }\n\n  removeStreamFromOutboundAudio(id) {\n    if (this.audioNodes.has(id)) {\n      const nodes = this.audioNodes.get(id);\n      nodes.sourceNode.disconnect();\n      nodes.gainNode.disconnect();\n      this.audioNodes.delete(id);\n    }\n  }\n\n  addAudio({ sourceType, node }) {\n    let outputNode = node;\n    if (isThreeAudio(node)) {\n      node.gain.disconnect();\n      outputNode = node.gain;\n    }\n    outputNode.connect(this.mixer[sourceType]);\n  }\n\n  removeAudio({ node }) {\n    let outputNode = node;\n    if (isThreeAudio(node)) {\n      outputNode = node.gain;\n    }\n    outputNode.disconnect();\n  }\n\n  updatePrefs() {\n    const { globalVoiceVolume, globalMediaVolume, globalSFXVolume } = window.APP.store.state.preferences;\n    let newGain = globalMediaVolume / 100;\n    this.mixer[SourceType.MEDIA_VIDEO].gain.setTargetAtTime(newGain, this.audioContext.currentTime, GAIN_TIME_CONST);\n\n    newGain = globalSFXVolume / 100;\n    this.mixer[SourceType.SFX].gain.setTargetAtTime(newGain, this.audioContext.currentTime, GAIN_TIME_CONST);\n\n    newGain = globalVoiceVolume / 100;\n    this.mixer[SourceType.AVATAR_AUDIO_SOURCE].gain.setTargetAtTime(\n      newGain,\n      this.audioContext.currentTime,\n      GAIN_TIME_CONST\n    );\n\n    if (MediaDevicesManager.isAudioOutputSelectEnabled && APP.mediaDevicesManager) {\n      const sinkId = APP.mediaDevicesManager.selectedSpeakersDeviceId;\n      const isDefault = sinkId === APP.mediaDevicesManager.defaultOutputDeviceId;\n      if ((!this.outputMediaAudio && isDefault) || sinkId === this.outputMediaAudio?.sinkId) return;\n      const sink = isDefault ? this._sceneEl.audioListener.getInput() : this.audioDestination;\n      this.mixer[SourceType.AVATAR_AUDIO_SOURCE].disconnect();\n      this.mixer[SourceType.AVATAR_AUDIO_SOURCE].connect(sink);\n      this.mixer[SourceType.AVATAR_AUDIO_SOURCE].connect(this.mixerAnalyser);\n      this.mixer[SourceType.MEDIA_VIDEO].disconnect();\n      this.mixer[SourceType.MEDIA_VIDEO].connect(sink);\n      this.mixer[SourceType.MEDIA_VIDEO].connect(this.mixerAnalyser);\n      this.mixer[SourceType.SFX].disconnect();\n      this.mixer[SourceType.SFX].connect(sink);\n      this.mixer[SourceType.SFX].connect(this.mixerAnalyser);\n      if (isDefault) {\n        if (this.outputMediaAudio) {\n          this.outputMediaAudio.pause();\n          this.outputMediaAudio.srcObject = null;\n          this.outputMediaAudio = null;\n        }\n      } else {\n        // Swithing the audio sync is only supported in Chrome at the time of writing this.\n        // It also seems to have some limitations and it only works on audio elements. We are piping all our media through the Audio Context\n        // and that doesn't seem to work.\n        // To workaround that we need to use a MediaStreamAudioDestinationNode that is set as the source of the audio element where we switch the sink.\n        // This is very hacky but there don't seem to have any better alternatives at the time of writing this.\n        // https://stackoverflow.com/a/67043782\n        if (!this.outputMediaAudio) {\n          this.outputMediaAudio = new Audio();\n          this.outputMediaAudio.srcObject = this.audioDestination.stream;\n        }\n        if (this.outputMediaAudio.sinkId !== sinkId) {\n          this.outputMediaAudio.setSinkId(sinkId).then(() => {\n            this.outputMediaAudio.play();\n          });\n        }\n      }\n    }\n  }\n\n  /**\n   * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n   * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n   */\n  _resumeAudioContext = () => {\n    this.audioContext.resume();\n\n    setTimeout(() => {\n      if (this.audioContext.state === \"running\") {\n        const disableAEC = window.APP.store.state.preferences.disableEchoCancellation;\n        if (!AFRAME.utils.device.isMobile() && /chrome/i.test(navigator.userAgent) && !disableAEC) {\n          enableChromeAEC(this._sceneEl.audioListener.gain);\n        }\n\n        document.body.removeEventListener(\"touchend\", this._resumeAudioContext, false);\n        document.body.removeEventListener(\"mouseup\", this._resumeAudioContext, false);\n      }\n    }, 0);\n  };\n\n  // Webkit mobile fix\n  // https://stackoverflow.com/questions/10232908/is-there-a-way-to-detect-a-mobile-safari-audio-interruption-headphones-unplugg\n  _safariMobileAudioInterruptionFix() {\n    this.audioContext.onstatechange = () => {\n      console.log(`AudioContext state changed to ${this.audioContext.state}`);\n      if (this.audioContext.state === \"suspended\") {\n        // When you unplug the headphone or when the bluetooth headset disconnects on\n        // iOS Safari or Chrome, the state changes to suspended.\n        // Chrome Android doesn't go in suspended state for this case.\n        document.getElementById(\"avatar-rig\").messageDispatch.log(LogMessageType.audioSuspended);\n        document.body.addEventListener(\"touchend\", this._resumeAudioContext, false);\n        document.body.addEventListener(\"mouseup\", this._resumeAudioContext, false);\n        this.audioContextNeedsToBeResumed = true;\n      } else if (this.audioContext.state === \"running\" && this.audioContextNeedsToBeResumed) {\n        this.audioContextNeedsToBeResumed = false;\n        document.getElementById(\"avatar-rig\").messageDispatch.log(LogMessageType.audioResumed);\n      }\n    };\n  }\n}\n","import { MediaType } from \"../utils/media-utils\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\nimport { cloneObject3D, disposeNode } from \"../utils/three-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nfunction scaleForAspectFit(containerSize, itemSize) {\n  return Math.min(containerSize.x / itemSize.x, containerSize.y / itemSize.y, containerSize.z / itemSize.z);\n}\n\nconst DEBUG = qsTruthy(\"debug\");\n\nconst isCapturableByType = {\n  [MediaType.ALL]: function(el) {\n    return !!(el && el.components[\"media-loader\"]);\n  },\n  [MediaType.ALL_2D]: function(el) {\n    return !!(el && (el.components[\"media-image\"] || el.components[\"media-video\"] || el.components[\"media-pdf\"]));\n  },\n  [MediaType.MODEL]: function(el) {\n    return !!(el && el.components[\"gltf-model-plus\"]);\n  },\n  [MediaType.IMAGE]: function(el) {\n    return !!(el && el.components[\"media-image\"]);\n  },\n  [MediaType.VIDEO]: function(el) {\n    return !!(el && el.components[\"media-video\"]);\n  },\n  [MediaType.PDF]: function(el) {\n    return !!(el && el.components[\"media-pdf\"]);\n  }\n};\n\nconst EMPTY_COLOR = 0x6fc0fd;\nconst HOVER_COLOR = 0x2f80ed;\nconst FULL_COLOR = 0x808080;\n\nconst components = [];\nexport class MediaFramesSystem {\n  constructor(physicsSystem, interactionSystem) {\n    this.physicsSystem = physicsSystem;\n    this.interactionSystem = interactionSystem;\n  }\n\n  tick() {\n    for (let i = 0; i < components.length; i++) {\n      const frame = components[i];\n\n      const bodyUUID = frame.el.components[\"body-helper\"].uuid;\n      // TODO would be nice to fix the timing so we don't need to check this\n      if (!this.physicsSystem.bodyInitialized(bodyUUID)) continue;\n\n      const holdingSomethingCapturable = this.interactionSystem.isHoldingAnything(\n        isCapturableByType[frame.data.mediaType]\n      );\n\n      const guideMesh = frame.el.getObject3D(\"guide\");\n      guideMesh.visible = holdingSomethingCapturable;\n\n      if (frame.data.targetId === \"empty\") {\n        // frame empty\n        guideMesh.material.uniforms.color.value.set(EMPTY_COLOR);\n        const capturableEl = this.getCapturableEntityCollidingWithBody(frame.data.mediaType, bodyUUID);\n        if (capturableEl && NAF.utils.isMine(capturableEl)) {\n          // capturable object I own is colliding with an empty frame\n          if (this.interactionSystem.isHeld(capturableEl)) {\n            // held object I own colliding with an empty frame, show preview\n            guideMesh.material.uniforms.color.value.set(HOVER_COLOR);\n            frame.showPreview(capturableEl);\n          } else {\n            // non-held object I own colliding with an empty frame, capture\n            frame.capture(capturableEl);\n          }\n        } else {\n          // no capturable object I own is colliding with this empty frame, hide preview\n          frame.hidePreview();\n        }\n      } else {\n        // frame full\n        guideMesh.material.uniforms.color.value.set(FULL_COLOR);\n        frame.hidePreview();\n        const capturedEl = document.getElementById(frame.data.targetId);\n        if (capturedEl) {\n          if (NAF.utils.isMine(capturedEl)) {\n            if (this.interactionSystem.isHeld(capturedEl)) {\n              if (!this.isColliding(frame.el, capturedEl)) {\n                // holding the captured object and its no longer colliding, releasee it\n                frame.release();\n              } else {\n                // holding within bounds\n                guideMesh.material.uniforms.color.value.set(HOVER_COLOR);\n              }\n            } else if (frame.data.snapToCenter && this.interactionSystem.wasReleasedThisFrame(capturedEl)) {\n              // released in bounds, re-snap\n              frame.snapObject(capturedEl);\n            }\n          }\n        } else {\n          // captured object was removed\n          frame.release();\n        }\n      }\n    }\n  }\n\n  getCapturableEntityCollidingWithBody(mediaType, bodyUUID) {\n    const collisions = this.physicsSystem.getCollisions(bodyUUID);\n    for (let i = 0; i < collisions.length; i++) {\n      const bodyData = this.physicsSystem.bodyUuidToData.get(collisions[i]);\n      const mediaObjectEl = bodyData && bodyData.object3D && bodyData.object3D.el;\n      if (isCapturableByType[mediaType](mediaObjectEl)) {\n        return mediaObjectEl;\n      }\n    }\n    return null;\n  }\n\n  isColliding(entityA, entityB) {\n    const bodyAUUID = entityA.components[\"body-helper\"].uuid;\n    const bodyBUUID = entityB.components[\"body-helper\"].uuid;\n    return (\n      this.physicsSystem.bodyInitialized(bodyAUUID) &&\n      this.physicsSystem.bodyInitialized(bodyBUUID) &&\n      this.physicsSystem.getCollisions(bodyAUUID).indexOf(bodyBUUID) !== -1\n    );\n  }\n}\n\nAFRAME.registerComponent(\"media-frame\", {\n  schema: {\n    bounds: { default: new THREE.Vector3(1, 1, 1) },\n    mediaType: { default: MediaType.ALL_2D, oneOf: Object.values(MediaType) },\n    snapToCenter: { default: true },\n    debug: { default: false },\n\n    targetId: { default: \"empty\" },\n    originalTargetScale: { default: new THREE.Vector3(1, 1, 1) }\n  },\n\n  init() {\n    this.tmpWorldPosition = new THREE.Vector3();\n    //TODO these visuals need work\n    this.el.setObject3D(\n      \"guide\",\n      new THREE.Mesh(\n        new THREE.BoxGeometry(this.data.bounds.x, this.data.bounds.y, this.data.bounds.z),\n        new THREE.ShaderMaterial({\n          uniforms: {\n            color: { value: new THREE.Color(0x2f80ed) }\n          },\n          vertexShader: `\n            varying vec2 vUv;\n            void main()\n            {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n              vUv = uv;\n            }\n          `,\n          fragmentShader: `\n            // adapted from https://www.shadertoy.com/view/Mlt3z8\n            float bayerDither2x2( vec2 v ) {\n              return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );\n            }\n            float bayerDither4x4( vec2 v ) {\n              vec2 P1 = mod( v, 2.0 );\n              vec2 P2 = mod( floor( 0.5  * v ), 2.0 );\n              return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );\n            }\n\n            varying vec2 vUv;\n            uniform vec3 color;\n            void main() {\n              float alpha = max(step(0.45, abs(vUv.x - 0.5)), step(0.45, abs(vUv.y - 0.5))) - 0.5;\n              if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= alpha ) discard;\n              gl_FragColor = vec4(color, 1.0);\n            }\n          `,\n          side: THREE.DoubleSide\n        })\n      )\n    );\n  },\n\n  update(oldData) {\n    // TODO we may want to support dynamic bounds updates, but its currently\n    // a pain since runtime shape modifications have lots of issues\n\n    if (this.data.debug) {\n      console.log(\n        `${this.el.id}: ${oldData.targetId}(${JSON.stringify(oldData.originalTargetScale)}) -> ${\n          this.data.targetId\n        }(${JSON.stringify(this.data.originalTargetScale)})`\n      );\n    }\n\n    // Ownership race, whoever owns the old object needs to take care of \"ejecting\" it\n    if (oldData.targetId !== \"empty\" && oldData.targetId !== this.data.targetId) {\n      const capturedEl = document.getElementById(oldData.targetId);\n      if (capturedEl && NAF.utils.isMine(capturedEl)) {\n        capturedEl.object3D.translateZ(this.data.bounds.z);\n        capturedEl.object3D.scale.copy(oldData.originalTargetScale);\n        capturedEl.object3D.matrixNeedsUpdate = true;\n        capturedEl.components[\"floaty-object\"].setLocked(false);\n      }\n    }\n  },\n\n  play() {\n    components.push(this);\n    if (this.el.components.networked) {\n      applyPersistentSync(this.el.components.networked.data.networkId);\n    }\n  },\n\n  pause() {\n    components.splice(components.indexOf(this), 1);\n  },\n\n  tick(_, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  },\n\n  showPreview(capturableEntity) {\n    if (!this.preview) {\n      const srcMesh = capturableEntity.getObject3D(\"mesh\");\n      const clonedMesh = cloneObject3D(srcMesh, false);\n\n      clonedMesh.traverse(node => {\n        if (node.isMesh) {\n          if (node.material) {\n            node.material = node.material.clone();\n            node.material.transparent = true;\n            node.material.opacity = 0.5;\n            node.material.needsUpdate = true;\n          }\n        }\n      });\n\n      const loopAnimation = capturableEntity.components[\"loop-animation\"];\n      if (loopAnimation && loopAnimation.isPlaying) {\n        const originalAnimation = loopAnimation.currentActions[loopAnimation.data.activeClipIndex];\n        const animation = clonedMesh.animations[loopAnimation.data.activeClipIndex];\n        this.mixer = new THREE.AnimationMixer(clonedMesh);\n        const action = this.mixer.clipAction(animation);\n        action.syncWith(originalAnimation);\n        action.setLoop(THREE.LoopRepeat, Infinity).play();\n      }\n\n      // Reset offsets\n      clonedMesh.position.set(0, 0, 0);\n      clonedMesh.quaternion.identity();\n      let aabb = new THREE.Box3().setFromObject(clonedMesh);\n      const size = new THREE.Vector3();\n      aabb.getSize(size);\n      let center = new THREE.Vector3();\n      aabb.getCenter(center);\n      clonedMesh.position.copy(center);\n      clonedMesh.position.multiplyScalar(-1);\n      clonedMesh.matrixNeedsUpdate = true;\n      this.preview = new THREE.Object3D();\n      this.el.sceneEl.object3D.add(this.preview);\n      this.preview.add(clonedMesh);\n\n      // Apply preview mesh transforms to match the frame ones\n      this.el.object3D.updateWorldMatrix(true);\n      const worldPos = new THREE.Vector3();\n      this.el.object3D.getWorldPosition(worldPos);\n      const worldQuat = new THREE.Quaternion();\n      this.el.object3D.getWorldQuaternion(worldQuat);\n      this.preview.position.copy(worldPos);\n      this.preview.scale.multiplyScalar(scaleForAspectFit(this.data.bounds, size));\n      this.preview.setRotationFromQuaternion(worldQuat);\n      this.preview.matrixNeedsUpdate = true;\n\n      if (DEBUG) {\n        const quat = this.preview.quaternion.clone();\n        this.preview.quaternion.identity();\n        this.preview.matrixNeedsUpdate = true;\n        this.preview.updateMatrixWorld(true);\n        aabb = new THREE.Box3().setFromObject(this.preview);\n        this.preview.quaternion.copy(quat);\n        this.preview.matrixNeedsUpdate = true;\n        this.preview.updateMatrixWorld(true);\n        this.helperBBAA = new THREE.Box3Helper(aabb, 0xffff00);\n        this.helperBBAA.setRotationFromQuaternion(this.preview.quaternion);\n        this.el.sceneEl.object3D.add(this.helperBBAA);\n\n        this.centerBBAA = new THREE.AxesHelper(0.25);\n        center = new THREE.Vector3();\n        aabb.getCenter(center);\n        this.centerBBAA.position.copy(center);\n        this.centerBBAA.setRotationFromQuaternion(this.preview.quaternion);\n        this.el.sceneEl.object3D.add(this.centerBBAA);\n      }\n    }\n  },\n\n  hidePreview() {\n    if (this.preview) {\n      this.el.sceneEl.object3D.remove(this.preview);\n      if (this.mixer) {\n        this.mixer.stopAllAction();\n        this.mixer.uncacheRoot(this.preview);\n        this.mixer = null;\n      }\n      disposeNode(this.preview);\n      this.preview = null;\n\n      if (DEBUG) {\n        this.el.sceneEl.object3D.remove(this.helperBBAA);\n        this.el.sceneEl.object3D.remove(this.centerBBAA);\n      }\n    }\n  },\n\n  snapObject(capturedEl) {\n    this.el.object3D.getWorldPosition(this.tmpWorldPosition);\n    capturedEl.object3D.position.copy(this.tmpWorldPosition);\n    const worldQuat = new THREE.Quaternion();\n    this.el.object3D.getWorldQuaternion(worldQuat);\n    capturedEl.object3D.setRotationFromQuaternion(worldQuat);\n    capturedEl.object3D.matrixNeedsUpdate = true;\n    capturedEl.components[\"floaty-object\"].setLocked(true);\n  },\n\n  capture(capturableEntity) {\n    if (NAF.utils.isMine(this.el) || NAF.utils.takeOwnership(this.el)) {\n      const update = () => {\n        this.el.setAttribute(\"media-frame\", {\n          targetId: capturableEntity.id,\n          originalTargetScale: new THREE.Vector3().copy(capturableEntity.object3D.scale)\n        });\n\n        capturableEntity.object3D.scale.set(1, 1, 1);\n        capturableEntity.object3D.quaternion.identity();\n        capturableEntity.object3D.matrixNeedsUpdate = true;\n        capturableEntity.object3D.updateMatrixWorld();\n        const srcMesh = capturableEntity.getObject3D(\"mesh\");\n        const size = new THREE.Vector3();\n        new THREE.Box3().setFromObject(srcMesh).getSize(size);\n\n        capturableEntity.object3D.scale.multiplyScalar(scaleForAspectFit(this.data.bounds, size));\n        capturableEntity.object3D.matrixNeedsUpdate = true;\n\n        this.snapObject(capturableEntity);\n      };\n\n      // Make sure we snap the media element when it's loaded (otherwise we may only snap the loading object)\n      if (capturableEntity.components[\"media-loader\"].isPlaying) {\n        capturableEntity.addEventListener(\n          \"media-loaded\",\n          () => {\n            update();\n          },\n          { once: true }\n        );\n      }\n\n      update();\n\n      this.hidePreview();\n    } else {\n      // TODO what do we do about this state? should evenetually resolve itself as it will try again next frame...\n      console.error(\"failed to take ownership of media frame\");\n    }\n  },\n\n  release() {\n    if (NAF.utils.isMine(this.el) || NAF.utils.takeOwnership(this.el)) {\n      const capturedEl = document.getElementById(this.data.targetId);\n\n      this.el.setAttribute(\"media-frame\", {\n        targetId: \"empty\"\n      });\n\n      if (capturedEl) {\n        capturedEl.object3D.scale.copy(this.data.originalTargetScale);\n        capturedEl.object3D.matrixNeedsUpdate = true;\n        capturedEl.components[\"floaty-object\"].setLocked(false);\n      }\n    } else {\n      console.error(\"failed to take ownership of media frame\");\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nexport class InspectYourselfSystem {\n  tick(scene, userinput, cameraSystem) {\n    if (!scene.is(\"entered\")) return;\n    if (userinput.get(paths.actions.startInspectingSelf)) {\n      const rig = document.getElementById(\"avatar-rig\");\n      cameraSystem.inspect(rig, 1.5);\n    }\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { emojis, spawnEmojiInFrontOfUser } from \"../components/emoji\";\n\nconst actions = [\n  paths.actions.spawnEmoji0,\n  paths.actions.spawnEmoji1,\n  paths.actions.spawnEmoji2,\n  paths.actions.spawnEmoji3,\n  paths.actions.spawnEmoji4,\n  paths.actions.spawnEmoji5,\n  paths.actions.spawnEmoji6\n];\n\nconst EMOJI_RATE_LIMIT = 1000;\n\nexport class EmojiSystem {\n  constructor(scene) {\n    this.scene = scene;\n\n    this.scene.addEventListener(\"enter-vr\", () => {\n      if (!document.getElementById(\"emoji-hud\")) {\n        const emojiHudEntity = document.createElement(\"a-entity\");\n        emojiHudEntity.id = \"emoji-hud\";\n        emojiHudEntity.setAttribute(\"emoji-hud\", \"\");\n        scene.appendChild(emojiHudEntity);\n      }\n    });\n\n    this.scene.addEventListener(\"exit-vr\", () => {\n      const emojiHudEntity = document.getElementById(\"emoji-hud\");\n\n      if (emojiHudEntity) {\n        emojiHudEntity.remove();\n      }\n    });\n\n    this.lastSpawnedEmoji = 0;\n  }\n\n  tick(time, userinput) {\n    if (!this.scene.is(\"entered\")) return;\n\n    for (let i = 0; i < actions.length; i++) {\n      if (\n        userinput.get(actions[i]) &&\n        i < emojis.length &&\n        window.APP.hubChannel.can(\"spawn_emoji\") &&\n        time - this.lastSpawnedEmoji > EMOJI_RATE_LIMIT\n      ) {\n        this.lastSpawnedEmoji = time;\n        spawnEmojiInFrontOfUser(emojis[i]);\n      }\n    }\n  }\n}\n","// We apply the most restrictive audio parameters\nfunction paramsReducer(acc, curr) {\n  if (!curr && !acc) return {};\n  else if (curr && !acc) return curr;\n  else if (!curr && acc) return acc;\n  else\n    return [\n      \"gain\",\n      \"maxDistance\",\n      \"refDistance\",\n      \"rolloffFactor\",\n      \"coneInnerAngle\",\n      \"coneOuterAngle\",\n      \"coneOuterGain\"\n    ].reduce((result, key) => {\n      if (curr[key] !== undefined && acc[key] !== undefined) {\n        result[key] = Math.min(acc[key], curr[key]);\n      } else if (curr[key] !== undefined && acc[key] === undefined) {\n        result[key] = curr[key];\n      } else if (curr[key] === undefined && acc[key] !== undefined) {\n        result[key] = acc[key];\n      }\n      return result;\n    }, {});\n}\n\nfunction addOrRemoveZone(zones, zone, position) {\n  const isInZone = zone.isEnabled() && zone.contains(position);\n  const wasInZone = zones.has(zone);\n  if (isInZone && !wasInZone) {\n    zones.add(zone);\n  } else if (!isInZone && wasInZone) {\n    zones.delete(zone);\n  }\n}\n\nfunction any(set, predicate) {\n  for (const item of set) {\n    if (predicate(item)) return true;\n  }\n  return false;\n}\n\nfunction isUpdated(currZones, prevZones) {\n  return currZones.size !== prevZones.size || any(currZones, zone => !prevZones.has(zone));\n}\n\nconst setRay = (function() {\n  const direction = new THREE.Vector3();\n  return function setRay(ray, from, to) {\n    ray.set(from, direction.subVectors(to, from).normalize());\n  };\n})();\n\nfunction exclude(zones) {\n  return zone => {\n    return !zones.has(zone);\n  };\n}\n\nfunction hasIntersection(ray) {\n  const intersectTarget = new THREE.Vector3();\n  return zone => {\n    ray.intersectBox(zone.getBoundingBox(), intersectTarget);\n    return intersectTarget !== null;\n  };\n}\nconst updateSource = (function() {\n  const ray = new THREE.Ray();\n  return function updateSource(source, sourcePosition, sourceZones, listenerPosition, listenerZones) {\n    setRay(ray, listenerPosition, sourcePosition);\n\n    // TODO: Reimplement the desired sorting of zones\n    const inOutParams = Array.from(sourceZones)\n      .filter(zone => zone.data.inOut)\n      .filter(exclude(listenerZones))\n      .filter(hasIntersection(ray))\n      .map(zone => zone.getAudioParams())\n      .reduce(paramsReducer, null);\n\n    // TODO: Reimplement the desired sorting of zones\n    const outInParams = Array.from(listenerZones)\n      .filter(zone => zone.data.outIn)\n      .filter(exclude(sourceZones))\n      .filter(hasIntersection(ray))\n      .map(zone => zone.getAudioParams())\n      .reduce(paramsReducer, null);\n\n    if (!outInParams && !inOutParams) {\n      source.restore();\n    } else if (outInParams && !inOutParams) {\n      source.apply(outInParams);\n    } else if (!outInParams && inOutParams) {\n      source.apply(inOutParams);\n    } else {\n      // In this case two zones ar acting over the same source simultaneously.\n      // We apply the closest zone params with the lowest gain\n      source.apply(\n        Object.assign(\n          {},\n          inOutParams,\n          outInParams,\n          paramsReducer(\n            {\n              gain: outInParams.gain\n            },\n            {\n              gain: inOutParams.gain\n            }\n          )\n        )\n      );\n    }\n  };\n})();\n\nexport class AudioZonesSystem {\n  constructor() {\n    this.zones = [];\n    this.sources = [];\n    this.entities = [];\n    this.currZones = new Map();\n    this.prevZones = new Map();\n    this.didRegisterAudioListener = false;\n  }\n  registerZone(zone) {\n    this.zones.push(zone);\n  }\n  unregisterZone(zone) {\n    this.zones.splice(this.zones.indexOf(zone), 1);\n    this.entities.forEach(entity => {\n      this.currZones.get(entity).delete(zone);\n    });\n  }\n  registerSource(source) {\n    this.sources.push(source);\n    this.registerEntity(source);\n  }\n  unregisterSource(source) {\n    this.sources.splice(this.sources.indexOf(source), 1);\n    this.unregisterEntity(source);\n  }\n  registerEntity(entity) {\n    this.entities.push(entity);\n    this.currZones.set(entity, new Set());\n    this.prevZones.set(entity, new Set());\n  }\n  unregisterEntity(entity) {\n    this.entities.splice(this.entities.indexOf(entity), 1);\n    this.currZones.delete(entity);\n    this.prevZones.delete(entity);\n  }\n\n  tick = (function() {\n    const listenerPosition = new THREE.Vector3();\n    return function(scene) {\n      if (!scene.is(\"entered\")) return;\n\n      if (!this.didRegisterAudioListener) {\n        this.didRegisterAudioListener = true;\n        this.registerEntity(scene.audioListener);\n      }\n\n      const currListenerZones = this.currZones.get(scene.audioListener);\n      scene.audioListener.getWorldPosition(listenerPosition);\n      this.zones.forEach(zone => {\n        addOrRemoveZone(currListenerZones, zone, listenerPosition);\n        this.sources.forEach(source => {\n          addOrRemoveZone(this.currZones.get(source), zone, source.getPosition());\n        });\n      });\n\n      const isListenerUpdated = isUpdated(currListenerZones, this.prevZones.get(scene.audioListener));\n      this.sources\n        .filter(source => {\n          return isListenerUpdated || isUpdated(this.currZones.get(source), this.prevZones.get(source));\n        })\n        .forEach(source => {\n          updateSource(source, source.getPosition(), this.currZones.get(source), listenerPosition, currListenerZones);\n        });\n\n      this.entities.forEach(entity => {\n        const prevZones = this.prevZones.get(entity);\n        prevZones.clear();\n        this.currZones.get(entity).forEach(zone => prevZones.add(zone));\n      });\n    };\n  })();\n}\n","import {\n  getCurrentAudioSettings,\n  shouldAddSupplementaryAttenuation,\n  updateAudioSettings\n} from \"../update-audio-settings\";\n\nconst distanceModels = {\n  linear: function(distance, rolloffFactor, refDistance, maxDistance) {\n    return 1.0 - rolloffFactor * ((distance - refDistance) / (maxDistance - refDistance));\n  },\n  inverse: function(distance, rolloffFactor, refDistance) {\n    return refDistance / (refDistance + rolloffFactor * (Math.max(distance, refDistance) - refDistance));\n  },\n  exponential: function(distance, rolloffFactor, refDistance) {\n    return Math.pow(Math.max(distance, refDistance) / refDistance, -rolloffFactor);\n  }\n};\n\nconst calculateAttenuation = (() => {\n  const listenerPos = new THREE.Vector3();\n  const sourcePos = new THREE.Vector3();\n  return (el, audio) => {\n    el.sceneEl.audioListener.getWorldPosition(listenerPos);\n    audio.getWorldPosition(sourcePos);\n    const distance = sourcePos.distanceTo(listenerPos);\n    if (audio.panner) {\n      return distanceModels[audio.panner.distanceModel](\n        distance,\n        audio.panner.rolloffFactor,\n        audio.panner.refDistance,\n        audio.panner.maxDistance\n        // TODO: Why are coneInnerAngle, coneOuterAngle and coneOuterGain not used?\n      );\n    } else {\n      const { distanceModel, rolloffFactor, refDistance, maxDistance } = getCurrentAudioSettings(el);\n      if (!distanceModel) {\n        // Apparently, it is valid to give null as your distanceModel\n        return 1.0;\n      }\n      if (!distanceModels[distanceModel]) {\n        // TODO: Validate properties earlier in the process.\n        console.error(\"Unrecognized distance model.\");\n        return 1.0;\n      }\n\n      return distanceModels[distanceModel](distance, rolloffFactor, refDistance, maxDistance);\n    }\n  };\n})();\n\n// TODO: Rename \"GainSystem\" because the name is suspicious\nexport class GainSystem {\n  tick() {\n    const { enableAudioClipping, audioClippingThreshold } = window.APP.store.state.preferences;\n    for (const [el, audio] of APP.audios.entries()) {\n      const attenuation = calculateAttenuation(el, audio);\n\n      if (shouldAddSupplementaryAttenuation(el, audio)) {\n        APP.supplementaryAttenuation.set(el, attenuation);\n        updateAudioSettings(el, audio);\n      } else if (APP.supplementaryAttenuation.has(el)) {\n        APP.supplementaryAttenuation.delete(el);\n        updateAudioSettings(el, audio);\n      }\n\n      const isClipped = APP.clippingState.has(el);\n      const shouldBeClipped = enableAudioClipping && attenuation < audioClippingThreshold;\n      if (isClipped !== shouldBeClipped) {\n        if (shouldBeClipped) {\n          APP.clippingState.add(el);\n        } else {\n          APP.clippingState.delete(el);\n        }\n        updateAudioSettings(el, audio);\n      }\n    }\n  }\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nexport class NameTagVisibilitySystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n    this.store = window.APP.store;\n    this.components = [];\n    this.lastUpdateTime = Date.now();\n    this.tick = this.tick.bind(this);\n    this.onStateChanged = this.onStateChanged.bind(this);\n    this.nametagVisibility = this.store.state.preferences.nametagVisibility;\n    this.nametagVisibilityDistance = Math.pow(this.store.state.preferences.nametagVisibilityDistance, 2);\n    waitForDOMContentLoaded().then(() => {\n      this.avatarRig = document.getElementById(\"avatar-rig\").object3D;\n    });\n    window.APP.store.addEventListener(\"statechanged\", this.onStateChanged);\n  }\n\n  register(component) {\n    this.components.push(component);\n  }\n\n  unregister(component) {\n    this.components.splice(this.components.indexOf(component), 1);\n  }\n\n  tick = (function() {\n    const worldPos = new THREE.Vector3();\n    const avatarRigWorldPos = new THREE.Vector3();\n    return function tick() {\n      this.avatarRig.getWorldPosition(avatarRigWorldPos);\n      this.components.forEach(nametag => {\n        if (this.nametagVisibility === \"showSpeaking\") {\n          const now = Date.now();\n          if (!nametag.isTalking && nametag.wasTalking) {\n            if (now - nametag.lastUpdateTime > 3000) {\n              nametag.shouldBeVisible = false;\n            }\n          } else if (nametag.isTalking && !nametag.wasTalking) {\n            nametag.lastUpdateTime = Date.now();\n            nametag.shouldBeVisible = true;\n          } else if (!nametag.isTalking && !nametag.wasTalking) {\n            if (now - nametag.lastUpdateTime > 3000) {\n              nametag.shouldBeVisible = false;\n            }\n          }\n        } else if (this.nametagVisibility === \"showFrozen\") {\n          nametag.shouldBeVisible = this.sceneEl.is(\"frozen\");\n        } else if (this.nametagVisibility === \"showNone\") {\n          nametag.shouldBeVisible = false;\n        } else if (this.nametagVisibility === \"showClose\") {\n          if (nametag.ikRoot) {\n            nametag.ikRoot.getWorldPosition(worldPos);\n            nametag.shouldBeVisible = worldPos.sub(avatarRigWorldPos).lengthSq() < this.nametagVisibilityDistance;\n          }\n        } else {\n          nametag.shouldBeVisible = true;\n        }\n      });\n    };\n  })();\n\n  onStateChanged() {\n    this.nametagVisibilityDistance = Math.pow(this.store.state.preferences.nametagVisibilityDistance, 2);\n    this.nametagVisibility = this.store.state.preferences.nametagVisibility;\n  }\n}\n","import { CursorTargettingSystem } from \"./cursor-targetting-system\";\nimport { PositionAtBorderSystem } from \"../components/position-at-border\";\nimport { BoneVisibilitySystem } from \"../components/bone-visibility\";\nimport { AnimationMixerSystem } from \"../components/animation-mixer\";\nimport { UVScrollSystem } from \"../components/uv-scroll\";\nimport { CursorTogglingSystem } from \"./cursor-toggling-system\";\nimport { PhysicsSystem } from \"./physics-system\";\nimport { ConstraintsSystem } from \"./constraints-system\";\nimport { TwoPointStretchingSystem } from \"./two-point-stretching-system\";\nimport { SingleActionButtonSystem, HoldableButtonSystem, HoverButtonSystem } from \"./button-systems\";\nimport { DrawingMenuSystem } from \"./drawing-menu-system\";\nimport { HoverMenuSystem } from \"./hover-menu-system\";\nimport { SuperSpawnerSystem } from \"./super-spawner-system\";\nimport { HapticFeedbackSystem } from \"./haptic-feedback-system\";\nimport { SoundEffectsSystem } from \"./sound-effects-system\";\nimport { BatchManagerSystem } from \"./render-manager-system\";\nimport { ScenePreviewCameraSystem } from \"./scene-preview-camera-system\";\nimport { InteractionSfxSystem } from \"./interaction-sfx-system\";\nimport { SpriteSystem } from \"./sprites\";\nimport { CameraSystem } from \"./camera-system\";\nimport { WaypointSystem } from \"./waypoint-system\";\nimport { CharacterControllerSystem } from \"./character-controller-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { CursorPoseTrackingSystem } from \"./cursor-pose-tracking\";\nimport { MenuAnimationSystem } from \"./menu-animation-system\";\nimport { AudioSettingsSystem } from \"./audio-settings-system\";\nimport { AudioSystem } from \"./audio-system\";\nimport { ShadowSystem } from \"./shadow-system\";\nimport { MediaFramesSystem } from \"./media-frames\";\nimport { InspectYourselfSystem } from \"./inspect-yourself-system\";\nimport { EmojiSystem } from \"./emoji-system\";\nimport { AudioZonesSystem } from \"./audio-zones-system\";\nimport { GainSystem } from \"./audio-gain-system\";\nimport { EnvironmentSystem } from \"./environment-system\";\nimport { NameTagVisibilitySystem } from \"./name-tag-visibility-system\";\n\nAFRAME.registerSystem(\"hubs-systems\", {\n  init() {\n    waitForDOMContentLoaded().then(() => {\n      this.DOMContentDidLoad = true;\n    });\n    this.cursorTogglingSystem = new CursorTogglingSystem();\n    this.interactionSfxSystem = new InteractionSfxSystem();\n    this.superSpawnerSystem = new SuperSpawnerSystem();\n    this.cursorTargettingSystem = new CursorTargettingSystem();\n    this.positionAtBorderSystem = new PositionAtBorderSystem();\n    this.physicsSystem = new PhysicsSystem(this.el.object3D);\n    this.constraintsSystem = new ConstraintsSystem(this.physicsSystem);\n    this.twoPointStretchingSystem = new TwoPointStretchingSystem();\n    this.singleActionButtonSystem = new SingleActionButtonSystem();\n    this.holdableButtonSystem = new HoldableButtonSystem();\n    this.hoverButtonSystem = new HoverButtonSystem();\n    this.hoverMenuSystem = new HoverMenuSystem();\n    this.hapticFeedbackSystem = new HapticFeedbackSystem();\n    this.audioSystem = new AudioSystem(this.el);\n    this.soundEffectsSystem = new SoundEffectsSystem(this.el);\n    this.scenePreviewCameraSystem = new ScenePreviewCameraSystem();\n    this.spriteSystem = new SpriteSystem(this.el);\n    this.batchManagerSystem = new BatchManagerSystem(this.el.object3D, this.el.renderer);\n    this.cameraSystem = new CameraSystem(this.el.camera, this.el.renderer);\n    this.drawingMenuSystem = new DrawingMenuSystem(this.el);\n    this.characterController = new CharacterControllerSystem(this.el);\n    this.waypointSystem = new WaypointSystem(this.el, this.characterController);\n    this.cursorPoseTrackingSystem = new CursorPoseTrackingSystem();\n    this.menuAnimationSystem = new MenuAnimationSystem();\n    this.audioSettingsSystem = new AudioSettingsSystem(this.el);\n    this.animationMixerSystem = new AnimationMixerSystem();\n    this.boneVisibilitySystem = new BoneVisibilitySystem();\n    this.uvScrollSystem = new UVScrollSystem();\n    this.shadowSystem = new ShadowSystem(this.el);\n    this.mediaFramesSystem = new MediaFramesSystem(this.physicsSystem, this.el.systems.interaction);\n    this.inspectYourselfSystem = new InspectYourselfSystem();\n    this.emojiSystem = new EmojiSystem(this.el);\n    this.audioZonesSystem = new AudioZonesSystem();\n    this.gainSystem = new GainSystem();\n    this.environmentSystem = new EnvironmentSystem(this.el);\n    this.nameTagSystem = new NameTagVisibilitySystem(this.el);\n  },\n\n  tick(t, dt) {\n    if (!this.DOMContentDidLoad) return;\n    const systems = AFRAME.scenes[0].systems;\n    systems.userinput.tick2();\n    systems.interaction.tick2();\n\n    // We run this earlier in the frame so things have a chance to override properties run by animations\n    this.animationMixerSystem.tick(dt);\n\n    this.characterController.tick(t, dt);\n    this.cursorTogglingSystem.tick(systems.interaction, systems.userinput, this.el);\n    this.interactionSfxSystem.tick(systems.interaction, systems.userinput, this.soundEffectsSystem);\n    this.superSpawnerSystem.tick();\n    this.emojiSystem.tick(t, systems.userinput);\n    this.cursorPoseTrackingSystem.tick();\n    this.cursorTargettingSystem.tick(t);\n    this.hoverMenuSystem.tick();\n    this.positionAtBorderSystem.tick();\n    this.constraintsSystem.tick();\n    this.twoPointStretchingSystem.tick();\n    this.singleActionButtonSystem.tick();\n    this.holdableButtonSystem.tick();\n    this.hoverButtonSystem.tick();\n    this.drawingMenuSystem.tick();\n    this.hapticFeedbackSystem.tick(\n      this.twoPointStretchingSystem,\n      this.singleActionButtonSystem.didInteractLeftThisFrame,\n      this.singleActionButtonSystem.didInteractRightThisFrame\n    );\n    this.soundEffectsSystem.tick();\n    this.scenePreviewCameraSystem.tick();\n    this.physicsSystem.tick(dt);\n    this.batchManagerSystem.tick(t);\n    this.inspectYourselfSystem.tick(this.el, systems.userinput, this.cameraSystem);\n    this.cameraSystem.tick(this.el, dt);\n    this.waypointSystem.tick(t, dt);\n    this.menuAnimationSystem.tick(t);\n    this.spriteSystem.tick(t, dt);\n    this.uvScrollSystem.tick(dt);\n    this.shadowSystem.tick();\n    this.mediaFramesSystem.tick();\n    this.audioZonesSystem.tick(this.el);\n    this.gainSystem.tick();\n    this.nameTagSystem.tick();\n\n    // We run this late in the frame so that its the last thing to have an opinion about the scale of an object\n    this.boneVisibilitySystem.tick();\n  },\n\n  remove() {\n    this.cursorTargettingSystem.remove();\n  }\n});\n","import qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"capture-system\", {\n  init() {\n    this._gotAudioTrack = false;\n    this._recorderTimeout = null;\n  },\n\n  _initRecorder() {\n    if (!this.available()) return;\n\n    this._stream = new MediaStream();\n\n    const video = this.el.canvas.captureStream().getVideoTracks()[0];\n    this._stream.addTrack(video);\n\n    this._recorder = new MediaRecorder(this._stream, { mimeType: \"video/webm; codecs=vp8\" });\n\n    const chunks = [];\n\n    this._recorder.ondataavailable = e => {\n      chunks.push(e.data);\n    };\n    this._recorder.onstop = () => {\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const blob = new Blob(chunks, { type: mimeType });\n      chunks.length = 0;\n      this.el.emit(\"add_media\", new File([blob], \"capture\", { type: mimeType }));\n    };\n  },\n\n  available() {\n    return qsTruthy(\"video_capture\") && window.MediaRecorder && MediaRecorder.isTypeSupported(\"video/webm; codecs=vp8\");\n  },\n\n  started() {\n    return this._recorder && this._recorder.state !== \"inactive\";\n  },\n\n  _tryAddingAudioTrack() {\n    if (this._gotAudioTrack || !this.el.audioListener) return;\n\n    const listener = this.el.audioListener;\n    const destination = listener.context.createMediaStreamDestination();\n    listener.getInput().connect(destination);\n    const audio = destination.stream.getAudioTracks()[0];\n\n    this._stream.addTrack(audio);\n    this._gotAudioTrack = true;\n  },\n\n  start() {\n    if (!this._recorder) {\n      this._initRecorder();\n    }\n\n    // The scene doesn't get an audioListener until something in the scene is playing audio.\n    // So we have to get the audio track lazily.\n    this._tryAddingAudioTrack();\n\n    if (!this.started()) {\n      this._recorder.start();\n      this._recorderTimeout = setTimeout(() => {\n        if (this.started()) {\n          this._recorder.stop();\n        }\n      }, 15000);\n    }\n  },\n\n  stop() {\n    if (this.started()) {\n      clearTimeout(this._recorderTimeout);\n      this._recorder.stop();\n    }\n  }\n});\n","// Provides the idea of \"media linking\" -- if two media objects are linked\n// then updates to one (src, page, etc) will be reflected on the other, and vice versa.\n//\n// When you link a media element from A -> B via registerLinkage, a few notes:\n// - The media is assumed to be of the same kind, ideally created via media-utils/cloneMedia\n// - Sync is bidirectional, however, elB is assumed to be a 'derivate of' elA. this means:\n//   - for the video case, elA will have its volume set to zero and restored if elB is removed\n//   - when elA is removed, elB will be removed (done in media-loader) but not vice-versa\n\nimport { updateAudioSettings } from \"../update-audio-settings\";\n\n//\nAFRAME.registerSystem(\"linked-media\", {\n  init: function() {\n    this.handlers = [];\n    this.addLinkageHandler = this.addLinkageHandler.bind(this);\n    this.syncLinkage = this.syncLinkage.bind(this);\n  },\n\n  addLinkageHandler(elA, elB) {\n    const handler = () => {\n      // Since elB will have its event fired here if we change something, ignore it.\n      if (elB._handlingLinkage) return;\n      elA._handlingLinkage = true;\n      this.syncLinkage(elA, elB);\n      elA._handlingLinkage = false;\n    };\n\n    if (elA.components[\"media-loader\"].data) {\n      elA.addEventListener(\"componentchanged\", handler);\n    } else {\n      const waitForMediaLoader = evt => {\n        if (evt.detail.name === \"media-loader\") {\n          elA.removeEventListener(\"componentinitialized\", waitForMediaLoader);\n          elA.addEventListener(\"componentchanged\", handler);\n        }\n      };\n\n      elA.addEventListener(\"componentinitialized\", waitForMediaLoader);\n    }\n\n    return handler;\n  },\n\n  registerLinkage: function(elA, elB) {\n    this.syncLinkage(elA, elB);\n\n    const handlerA = this.addLinkageHandler(elA, elB);\n    const handlerB = this.addLinkageHandler(elB, elA);\n    elA.setAttribute(\"linked-media\", \"\");\n    elB.setAttribute(\"linked-media\", \"\");\n\n    // As a convenience, if elA has audio, we turn its volume off so we don't hear it twice\n    APP.mutedState.add(elA);\n    const audio = APP.audios.get(elA);\n    if (audio) {\n      updateAudioSettings(elA, audio);\n    }\n\n    this.handlers.push([elA, elB, handlerA, handlerB]);\n  },\n\n  deregisterLinkage: function(el) {\n    // Deregister elA -> elB, get list of elBs, and remove them\n    for (const [elA, elB, handlerA, handlerB] of this.handlers) {\n      if (el === elA || el === elB) {\n        elA.removeEventListener(\"componentchanged\", handlerA);\n        elB.removeEventListener(\"componentchanged\", handlerB);\n      }\n\n      APP.mutedState.delete(elA);\n      const audio = APP.audios.get(elA);\n      if (audio) {\n        updateAudioSettings(elA, audio);\n      }\n    }\n\n    this.handlers = this.handlers.filter(([elA, elB]) => elA !== el && elB !== el);\n  },\n\n  syncLinkage(elA, elB) {\n    if (elB.components[\"networked\"]) {\n      // Take ownership before updating\n      if (!NAF.utils.isMine(elB) && !NAF.utils.takeOwnership(elB)) return;\n    }\n\n    const { src, version } = elA.components[\"media-loader\"].data;\n\n    // For now, manually sync linkable properties.\n    elB.setAttribute(\"media-loader\", { src, version });\n\n    if (elA.components[\"media-pdf\"]) {\n      const { index } = elA.components[\"media-pdf\"].data;\n      elB.setAttribute(\"media-pdf\", { index });\n    }\n\n    if (elA.components[\"media-video\"]) {\n      const { time, videoPaused, loop, hidePlaybackControls } = elA.components[\"media-video\"].data;\n\n      // Sync time, pause state, playback controls, and tighten sync tolerance since its local\n      const syncedVideoAttributes = { time, videoPaused, loop, hidePlaybackControls };\n\n      const targetIsNetworked = !elB.components.networked;\n      if (targetIsNetworked) {\n        syncedVideoAttributes.syncTolerance = 0.25;\n      }\n\n      elB.setAttribute(\"media-video\", syncedVideoAttributes);\n      elB.components[\"media-video\"].updatePlaybackState(true);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"linked-media\", {\n  remove: function() {\n    this.system.deregisterLinkage(this.el);\n  }\n});\n","import { THREE } from \"aframe\";\nimport audioDebugVert from \"./audio-debug.vert\";\nimport audioDebugFrag from \"./audio-debug.frag\";\nimport { DistanceModelType } from \"../components/audio-params\";\nimport { getWebGLVersion } from \"../utils/webgl\";\nimport { getMeshes } from \"../utils/aframe-utils\";\n\nconst MAX_DEBUG_SOURCES = 64;\n\nconst fakePanner = {\n  distanceModel: DistanceModelType.Inverse,\n  maxDistance: 0,\n  refDistance: 0,\n  rolloffFactor: 0,\n  coneInnerAngle: 0,\n  coneOuterAngle: 0\n};\n\nAFRAME.registerSystem(\"audio-debug\", {\n  schema: {\n    enabled: { default: false }\n  },\n\n  init() {\n    this.unsupported = false;\n    const webGLVersion = getWebGLVersion(this.el.sceneEl.renderer);\n    if (webGLVersion < \"2.0\") {\n      this.unsupported = true;\n    }\n\n    window.APP.store.addEventListener(\"statechanged\", this.updateState.bind(this));\n\n    this.onSceneLoaded = this.onSceneLoaded.bind(this);\n    this.el.sceneEl.addEventListener(\"environment-scene-loaded\", this.onSceneLoaded);\n\n    this.navMeshObject = null;\n    this.zones = [];\n\n    this.material = new THREE.ShaderMaterial({\n      uniforms: {\n        time: { value: 0.0 },\n        colorInner: { value: new THREE.Color(\"#7AFF59\") },\n        colorOuter: { value: new THREE.Color(\"#FF6340\") },\n        colorGain: { value: new THREE.Color(\"#70DBFF\") },\n        count: { value: 0 },\n        maxDistance: { value: [] },\n        refDistance: { value: [] },\n        rolloffFactor: { value: [] },\n        distanceModel: { value: [] },\n        sourcePosition: { value: [] },\n        sourceOrientation: { value: [] },\n        coneInnerAngle: { value: [] },\n        coneOuterAngle: { value: [] },\n        gain: { value: [] },\n        clipped: { value: [] }\n      },\n      vertexShader: audioDebugVert,\n      fragmentShader: audioDebugFrag\n    });\n    this.material.side = THREE.FrontSide;\n    this.material.transparent = true;\n    this.material.uniforms.count.value = 0;\n    this.material.defines.MAX_DEBUG_SOURCES = MAX_DEBUG_SOURCES;\n\n    this.sourcePositions = new Array(MAX_DEBUG_SOURCES);\n    this.sourcePositions.fill(new THREE.Vector3());\n    this.sourceOrientations = new Array(MAX_DEBUG_SOURCES);\n    this.sourceOrientations.fill(new THREE.Vector3());\n    this.distanceModels = new Array(MAX_DEBUG_SOURCES);\n    this.distanceModels.fill(0);\n    this.maxDistances = new Array(MAX_DEBUG_SOURCES);\n    this.maxDistances.fill(0.0);\n    this.refDistances = new Array(MAX_DEBUG_SOURCES);\n    this.refDistances.fill(0.0);\n    this.rolloffFactors = new Array(MAX_DEBUG_SOURCES);\n    this.rolloffFactors.fill(0.0);\n    this.coneInnerAngles = new Array(MAX_DEBUG_SOURCES);\n    this.coneInnerAngles.fill(0.0);\n    this.coneOuterAngles = new Array(MAX_DEBUG_SOURCES);\n    this.coneOuterAngles.fill(0.0);\n    this.gains = new Array(MAX_DEBUG_SOURCES);\n    this.gains.fill(0.0);\n    this.clipped = new Array(MAX_DEBUG_SOURCES);\n    this.clipped.fill(0.0);\n  },\n\n  remove() {\n    window.APP.store.removeEventListener(\"statechanged\", this.updateState);\n    this.el.sceneEl.removeEventListener(\"environment-scene-loaded\", this.onSceneLoaded);\n  },\n\n  registerZone(zone) {\n    this.zones.push(zone);\n  },\n\n  unregisterZone(zone) {\n    const index = this.zones.indexOf(zone);\n\n    if (index !== -1) {\n      this.zones.splice(index, 1);\n    }\n  },\n\n  tick: (() => {\n    const sourcePos = new THREE.Vector3();\n    const sourceDir = new THREE.Vector3();\n    return function(time) {\n      if (!this.data.enabled) {\n        return;\n      }\n\n      let sourceNum = 0;\n      for (const [el, audio] of APP.audios.entries()) {\n        if (sourceNum >= MAX_DEBUG_SOURCES) continue;\n        if (APP.isAudioPaused.has(el)) continue;\n\n        audio.getWorldPosition(sourcePos);\n        audio.getWorldDirection(sourceDir);\n        this.sourcePositions[sourceNum] = this.navMeshObject.worldToLocal(sourcePos).clone(); // TODO: Use Vector3 pool\n        this.sourceOrientations[sourceNum] = this.navMeshObject.worldToLocal(sourceDir).clone();\n\n        const panner = audio.panner || fakePanner;\n\n        this.distanceModels[sourceNum] = 0;\n        if (panner.distanceModel === DistanceModelType.Linear) {\n          this.distanceModels[sourceNum] = 0;\n        } else if (panner.distanceModel === DistanceModelType.Inverse) {\n          this.distanceModels[sourceNum] = 1;\n        } else if (panner.distanceModel === DistanceModelType.Exponential) {\n          this.distanceModels[sourceNum] = 2;\n        }\n        this.maxDistances[sourceNum] = panner.maxDistance;\n        this.refDistances[sourceNum] = panner.refDistance;\n        this.rolloffFactors[sourceNum] = panner.rolloffFactor;\n        this.coneInnerAngles[sourceNum] = panner.coneInnerAngle;\n        this.coneOuterAngles[sourceNum] = panner.coneOuterAngle;\n\n        this.gains[sourceNum] = audio.gain.gain.value;\n        this.clipped[sourceNum] = APP.clippingState.has(el);\n        sourceNum++;\n      }\n\n      // Update material uniforms\n      this.material.uniforms.time.value = time;\n      this.material.uniforms.distanceModel.value = this.distanceModels;\n      this.material.uniforms.maxDistance.value = this.maxDistances;\n      this.material.uniforms.refDistance.value = this.refDistances;\n      this.material.uniforms.rolloffFactor.value = this.rolloffFactors;\n      this.material.uniforms.sourcePosition.value = this.sourcePositions;\n      this.material.uniforms.sourceOrientation.value = this.sourceOrientations;\n      this.material.uniforms.count.value = sourceNum;\n      this.material.uniforms.coneInnerAngle.value = this.coneInnerAngles;\n      this.material.uniforms.coneOuterAngle.value = this.coneOuterAngles;\n      this.material.uniforms.gain.value = this.gains;\n      this.material.uniforms.clipped.value = this.clipped;\n    };\n  })(),\n\n  enableDebugMode(enabled, force = false) {\n    if (((enabled === undefined || enabled === this.data.enabled) && !force) || this.unsupported) return;\n    this.zones.forEach(zone => {\n      zone.el.setAttribute(\"audio-zone\", \"debuggable\", enabled);\n    });\n\n    const collisionEntities = Array.from(this.el.sceneEl.querySelectorAll(\"[nav-mesh]\"));\n    const meshes = getMeshes(collisionEntities);\n\n    if (meshes.length) {\n      this.data.enabled = enabled;\n      meshes.forEach(obj => {\n        if (obj.isMesh) {\n          this.navMeshObject = obj;\n          obj.parent.visible = enabled;\n          if (obj.material) {\n            if (enabled) {\n              !obj._hubs_audio_debug_prev_material && (obj._hubs_audio_debug_prev_material = obj.material);\n              obj.material = this.material;\n              obj.material.needsUpdate = true;\n            } else if (obj._hubs_audio_debug_prev_material) {\n              obj.material = obj._hubs_audio_debug_prev_material;\n              obj._hubs_audio_debug_prev_material = null;\n              obj.material.needsUpdate = true;\n            }\n            obj.geometry.computeVertexNormals();\n          }\n        }\n      });\n    }\n\n    if (!this.navMeshObject) {\n      this.data.enabled = false;\n    }\n  },\n\n  updateState({ force }) {\n    const isEnabled = window.APP.store.state.preferences.showAudioDebugPanel;\n    if (force || isEnabled !== this.data.enabled) {\n      this.enableDebugMode(isEnabled, force);\n    }\n  },\n\n  onSceneLoaded() {\n    this.navMeshObject = null;\n    this.updateState({ force: true });\n  }\n});\n","import pinnedEntityToGltf from \"./pinned-entity-to-gltf\";\nimport { getPromotionTokenForFile } from \"./media-utils\";\nimport { SignInMessages } from \"../react-components/auth/SignInModal\";\n\nexport default class PinningHelper {\n  constructor(hubChannel, authChannel, store, performConditionalSignIn) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.store = store;\n    this.performConditionalSignIn = performConditionalSignIn;\n  }\n\n  async setPinned(el, pin) {\n    if (NAF.utils.isMine(el)) {\n      this._signInAndPinOrUnpinElement(el, pin);\n    } else {\n      console.warn(\"PinningHelper: Attempted to set pin state on object that was not mine.\");\n    }\n  }\n\n  _signInAndPinOrUnpinElement = (el, pin) => {\n    const action = pin ? () => this._pinElement(el) : () => this.unpinElement(el);\n\n    this.performConditionalSignIn(\n      () => this.hubChannel.signedIn,\n      action,\n      pin ? SignInMessages.pin : SignInMessages.unpin,\n      e => {\n        console.warn(`PinningHelper: Conditional sign-in failed. ${e}`);\n      }\n    );\n  };\n\n  async _pinElement(el) {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) {\n      console.warn(\"PinningHelper: Entity did not produce a GLTF node.\");\n      return;\n    }\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    try {\n      await this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n\n      // If we lost ownership of the entity while waiting for the pin to go through,\n      // try to regain ownership before setting the \"pinned\" state.\n      if (!NAF.utils.isMine(el) && !NAF.utils.takeOwnership(el)) {\n        console.warn(\"PinningHelper: Pinning succeeded, but ownership was lost in the mean time\");\n      }\n\n      el.setAttribute(\"pinnable\", \"pinned\", true);\n      el.emit(\"pinned\", { el });\n      this.store.update({ activity: { hasPinned: true } });\n    } catch (e) {\n      if (e.reason === \"invalid_token\") {\n        await this.authChannel.signOut(this.hubChannel);\n        this._signInAndPinOrUnpinElement(el);\n      } else {\n        console.warn(\"PinningHelper: Pin failed for unknown reason\", e);\n      }\n    }\n  }\n\n  unpinElement(el) {\n    const components = el.components;\n    const networked = components.networked;\n\n    if (!networked || !networked.data || !NAF.utils.isMine(el)) {\n      console.warn(\"PinningHelper: Tried to unpin element that is not networked or not mine.\");\n      return;\n    }\n\n    const networkId = components.networked.data.networkId;\n    el.setAttribute(\"networked\", { persistent: false });\n\n    const mediaLoader = components[\"media-loader\"];\n    const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n    this.hubChannel.unpin(networkId, fileId);\n    el.setAttribute(\"pinnable\", \"pinned\", false);\n    el.emit(\"unpinned\", { el });\n  }\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  // TODO: Move to MOZ_hubs_components and include version number. Requires migration of existing room objects.\n  // Please do this before making a breaking change to the data stored here.\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n    const mediaVersion = components[\"media-loader\"].data.version;\n    const mediaContentSubtype = components[\"media-loader\"].data.contentSubtype;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, version: mediaVersion, contentSubtype: mediaContentSubtype, id: networkId };\n\n    if (components[\"media-pdf\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pdf\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"scalable-when-grabbed\", {\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let deltaScale;\n    if (interaction.state.rightRemote.held === this.el) {\n      deltaScale = userinput.get(paths.actions.cursor.right.scaleGrabbedGrabbable);\n    }\n    if (interaction.state.leftRemote.held === this.el) {\n      deltaScale = userinput.get(paths.actions.cursor.left.scaleGrabbedGrabbable);\n    }\n    if (!deltaScale) return;\n\n    this.el.object3D.scale.addScalar(deltaScale).clampScalar(0.1, 100);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { sets } from \"../systems/userinput/sets\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst HIGHLIGHT = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nconst NO_HIGHLIGHT = new THREE.Color(190 / 255, 190 / 255, 190 / 255);\nconst TRANSFORM_COLOR_1 = new THREE.Color(150 / 255, 80 / 255, 150 / 255);\nconst TRANSFORM_COLOR_2 = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 100 },\n    near: { default: 0.01 },\n    defaultDistance: { default: 4 },\n    minDistance: { default: 0.18 }\n  },\n\n  init: function() {\n    this.enabled = false;\n\n    this.cursorVisual = new THREE.Mesh(\n      new THREE.PlaneBufferGeometry(),\n      new THREE.ShaderMaterial({\n        depthTest: false,\n        uniforms: {\n          color: { value: new THREE.Color(0x2f80ed) }\n        },\n        vertexShader: `\n          varying vec2 vPos;\n          void main() {\n            vPos = position.xy;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n            vec2 scale = vec2(\n              length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) ),\n              length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) )\n            );\n\n            float distance = -mvPosition.z;\n            scale *= distance; // negates projection scale\n            scale += min(1.0/distance, 0.3); // scale in screen space\n\n            float radius = 0.02;\n            mvPosition.xy += position.xy * radius * scale;\n            gl_Position = projectionMatrix * mvPosition;\n          }`,\n        fragmentShader: `\n          uniform vec3 color;\n          varying vec2 vPos;\n\n          void main() {\n            float distance = length(vPos);\n            if (distance > 0.5) {\n                discard;\n            }\n\n            gl_FragColor = vec4(\n              mix(color, vec3(0.0), step(0.35, distance)),\n              0.8\n            );\n\n            // #include <tonemapping_fragment>\n            #include <encodings_fragment>\n          }`\n      })\n    );\n\n    const setCursorScale = () => {\n      this.cursorVisual.scale.setScalar(APP.store.state.preferences[\"cursorSize\"] || 1);\n      this.cursorVisual.matrixNeedsUpdate = true;\n    };\n    APP.store.addEventListener(\"statechanged\", setCursorScale);\n    setCursorScale();\n\n    this.cursorVisual.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n    this.cursorVisual.material.transparent = true;\n    this.data.cursor.object3D.add(this.cursorVisual);\n\n    this.intersection = null;\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n    this.distance = this.data.far;\n    this.color = this.cursorVisual.material.uniforms.color.value;\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"white\",\n        opacity: 0.2,\n        transparent: true,\n        visible: false\n      })\n    );\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick2: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n    const v = new THREE.Vector3();\n\n    return function(t, left) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(left ? paths.actions.cursor.left.pose : paths.actions.cursor.right.pose);\n      const hideLine = userinput.get(left ? paths.actions.cursor.left.hideLine : paths.actions.cursor.right.hideLine);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && !hideLine);\n\n      this.intersection = null;\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      this.el.sceneEl.systems[\"hubs-systems\"].characterController.avatarPOV.object3D.updateMatrices();\n      const playerScale = v\n        .setFromMatrixColumn(\n          this.el.sceneEl.systems[\"hubs-systems\"].characterController.avatarPOV.object3D.matrixWorld,\n          1\n        )\n        .length();\n      this.raycaster.far = this.data.far * playerScale;\n      this.raycaster.near = this.data.near * playerScale;\n\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      const isGrabbing = left ? !!interaction.state.leftRemote.held : !!interaction.state.rightRemote.held;\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n          true,\n          rawIntersections\n        );\n        this.intersection = rawIntersections[0];\n        this.intersectionIsValid = !!interaction.updateCursorIntersection(this.intersection, left);\n        this.distance = this.intersectionIsValid ? this.intersection.distance : this.data.defaultDistance * playerScale;\n      }\n\n      const { cursor, minDistance, far, camera } = this.data;\n\n      const cursorModDelta =\n        userinput.get(left ? paths.actions.cursor.left.modDelta : paths.actions.cursor.right.modDelta) || 0;\n      if (isGrabbing && !userinput.activeSets.includes(left ? sets.leftCursorHoldingUI : sets.rightCursorHoldingUI)) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, minDistance, far * playerScale);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      // TODO : Check if the selected object being transformed is for this cursor!\n      const transformObjectSystem = AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      if (\n        transformObjectSystem.transforming &&\n        ((left && transformObjectSystem.hand.el.id === \"player-left-controller\") ||\n          (!left && transformObjectSystem.hand.el.id === \"player-right-controller\"))\n      ) {\n        this.color.copy(TRANSFORM_COLOR_1).lerpHSL(TRANSFORM_COLOR_2, 0.5 + 0.5 * Math.sin(t / 1000.0));\n      } else if (this.intersectionIsValid || isGrabbing) {\n        this.color.copy(HIGHLIGHT);\n      } else {\n        this.color.copy(NO_HIGHLIGHT);\n      }\n\n      if (this.line.material.visible) {\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })()\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../../utils/three-utils\";\nimport {\n  SOUND_PEN_START_DRAW,\n  SOUND_PEN_STOP_DRAW,\n  SOUND_PEN_UNDO_DRAW,\n  SOUND_PEN_CHANGE_COLOR\n} from \"../../systems/sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../../utils/async-utils\";\nimport { convertStandardMaterial } from \"../../utils/material-utils\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    switchDrawMode: paths.actions.rightHand.switchDrawMode,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    switchDrawMode: paths.actions.leftHand.switchDrawMode,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  \"right-cursor\": {\n    pose: paths.actions.cursor.right.pose,\n    startDrawing: paths.actions.cursor.right.startDrawing,\n    stopDrawing: paths.actions.cursor.right.stopDrawing,\n    undoDrawing: paths.actions.cursor.right.undoDrawing,\n    penNextColor: paths.actions.cursor.right.penNextColor,\n    penPrevColor: paths.actions.cursor.right.penPrevColor,\n    scalePenTip: paths.actions.cursor.right.scalePenTip\n  },\n  \"left-cursor\": {\n    pose: paths.actions.cursor.left.pose,\n    startDrawing: paths.actions.cursor.left.startDrawing,\n    stopDrawing: paths.actions.cursor.left.stopDrawing,\n    undoDrawing: paths.actions.cursor.left.undoDrawing,\n    penNextColor: paths.actions.cursor.left.penNextColor,\n    penPrevColor: paths.actions.cursor.left.penPrevColor,\n    scalePenTip: paths.actions.cursor.left.scalePenTip\n  }\n};\n\nconst DRAW_MODE = {\n  DEFAULT_3D: 0,\n  PROJECTION: 1\n};\n\nconst MAX_DISTANCE_BETWEEN_SURFACES = 1;\n\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 },\n    far: { default: 100 },\n    near: { default: 0.01 },\n    drawMode: { default: DRAW_MODE.DEFAULT_3D, oneOf: [DRAW_MODE.DEFAULT_3D, DRAW_MODE.PROJECTION] },\n    penVisible: { default: true },\n    penTipPosition: { default: { x: 0, y: 0, z: 0 } }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n\n    this.originalPosition = this.el.object3D.position.clone();\n    this.lastIntersectionDistance = 0;\n\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    let material = new THREE.MeshStandardMaterial();\n    const quality = window.APP.store.state.preferences.materialQualitySetting;\n    material = convertStandardMaterial(material, quality);\n\n    this.penTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 16, 12), material);\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n\n    this.el.setObject3D(\"mesh\", this.penTip);\n\n    this.penLaserAttributesUpdated = false;\n    this.penLaserAttributes = {\n      color: \"#FF0033\",\n      laserVisible: false,\n      laserInHand: false,\n      laserOrigin: { x: 0, y: 0, z: 0 },\n      remoteLaserOrigin: { x: 0, y: 0, z: 0 },\n      laserTarget: { x: 0, y: 0, z: 0 }\n    };\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n\n    this.penSystem = this.el.sceneEl.systems[\"pen-tools\"];\n    this.penSystem.register(this.el);\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.penTip.material.color.set(this.data.color);\n      this.penLaserAttributes.color = this.data.color;\n      this.el.setAttribute(\"pen-laser\", { color: this.data.color });\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick(t, dt) {\n    const isMine = this.el.parentEl.components.networked.initialized && this.el.parentEl.components.networked.isMine();\n\n    if (this.penTip.material.visible !== isMine) {\n      this.penTip.material.visible = isMine;\n    }\n\n    if (isMine) {\n      this._handleInput();\n\n      const cursorPose =\n        this.data.drawMode === DRAW_MODE.PROJECTION &&\n        (this.grabberId === \"right-cursor\" || this.grabberId === \"left-cursor\")\n          ? AFRAME.scenes[0].systems.userinput.get(pathsMap[this.grabberId].pose)\n          : null;\n\n      const intersection = this._getIntersection(cursorPose);\n\n      this._updatePenTip(intersection);\n\n      const laserVisible = this.data.drawMode === DRAW_MODE.PROJECTION && !!intersection;\n      const laserInHand = this.el.sceneEl.is(\"vr-mode\") && laserVisible;\n\n      if (this.penLaserAttributes.laserVisible !== laserVisible) {\n        this.penLaserAttributes.laserVisible = laserVisible;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (this.penLaserAttributes.laserInHand !== laserInHand) {\n        this.penLaserAttributes.laserInHand = laserInHand;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (laserVisible) {\n        this._updateLaser(cursorPose, intersection);\n      }\n\n      const penVisible = (this.grabberId !== \"left-cursor\" && this.grabberId !== \"right-cursor\") || !intersection;\n      this._setPenVisible(penVisible);\n      this.el.setAttribute(\"pen\", { penVisible: penVisible });\n\n      this._doDraw(intersection, dt);\n\n      if (this.penLaserAttributesUpdated) {\n        this.penLaserAttributesUpdated = false;\n        this.el.setAttribute(\"pen-laser\", this.penLaserAttributes, true);\n      }\n    } else {\n      this._setPenVisible(this.data.penVisible);\n    }\n  },\n\n  _handleInput() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    if (interaction.state.rightHand.held === this.el.parentNode) {\n      this.grabberId = \"player-right-controller\";\n    } else if (interaction.state.leftHand.held === this.el.parentNode) {\n      this.grabberId = \"player-left-controller\";\n    } else if (interaction.state.rightRemote.held === this.el.parentNode) {\n      this.grabberId = \"right-cursor\";\n      this.data.drawMode = DRAW_MODE.PROJECTION;\n    } else if (interaction.state.leftRemote.held === this.el.parentNode) {\n      this.grabberId = \"left-cursor\";\n      this.data.drawMode = DRAW_MODE.PROJECTION;\n    } else {\n      this.grabberId = null;\n    }\n\n    if (this.grabberId && pathsMap[this.grabberId]) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      const paths = pathsMap[this.grabberId];\n      if (userinput.get(paths.startDrawing)) {\n        this._startDraw();\n        sfx.playSoundOneShot(SOUND_PEN_START_DRAW);\n      }\n      if (userinput.get(paths.stopDrawing)) {\n        this._endDraw();\n        sfx.playSoundOneShot(SOUND_PEN_STOP_DRAW);\n      }\n      const penScaleMod = userinput.get(paths.scalePenTip);\n      if (penScaleMod) {\n        this._changeRadius(penScaleMod);\n      }\n      if (userinput.get(paths.penNextColor)) {\n        this._changeColor(1);\n        sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n      }\n      if (userinput.get(paths.penPrevColor)) {\n        this._changeColor(-1);\n        sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n      }\n      if (userinput.get(paths.undoDrawing)) {\n        this._undoDraw();\n        sfx.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n      }\n      if (paths.switchDrawMode && userinput.get(paths.switchDrawMode)) {\n        this.data.drawMode = this.data.drawMode === DRAW_MODE.DEFAULT_3D ? DRAW_MODE.PROJECTION : DRAW_MODE.DEFAULT_3D;\n      }\n    }\n  },\n\n  _getIntersection: (() => {\n    const rawIntersections = [];\n    const worldQuaternion = new THREE.Quaternion();\n    return function(cursorPose) {\n      rawIntersections.length = 0;\n\n      if (this.data.drawMode === DRAW_MODE.PROJECTION) {\n        if (cursorPose) {\n          this.raycaster.ray.origin.copy(cursorPose.position);\n          this.raycaster.ray.direction.copy(cursorPose.direction);\n        } else if (this.grabberId !== null) {\n          getLastWorldPosition(this.el.parentEl.object3D, this.raycaster.ray.origin);\n          getLastWorldQuaternion(this.el.parentEl.object3D, worldQuaternion);\n          this.raycaster.ray.direction.set(0, -1, 0);\n          this.raycaster.ray.direction.applyQuaternion(worldQuaternion);\n        }\n\n        if (this.grabberId !== null) {\n          this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n          return rawIntersections[0];\n        }\n      }\n\n      return null;\n    };\n  })(),\n\n  _updatePenTip(intersection) {\n    if (this.data.drawMode === DRAW_MODE.PROJECTION) {\n      if (intersection) {\n        this.el.object3D.position.copy(intersection.point);\n\n        this.el.parentEl.object3D.worldToLocal(this.el.object3D.position);\n\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.worldPosition.copy(intersection.point);\n      } else {\n        this.el.object3D.position.copy(this.originalPosition);\n        this.el.object3D.matrixNeedsUpdate = true;\n        getLastWorldPosition(this.el.object3D, this.worldPosition);\n      }\n    } else {\n      this.el.object3D.position.copy(this.originalPosition);\n      this.el.object3D.matrixNeedsUpdate = true;\n      getLastWorldPosition(this.el.object3D, this.worldPosition);\n    }\n  },\n\n  _updateLaser: (() => {\n    const laserStartPosition = new THREE.Vector3();\n    const laserEndPosition = new THREE.Vector3();\n    const camerWorldPosition = new THREE.Vector3();\n    const remoteLaserOrigin = new THREE.Vector3();\n    return function(cursorPose, intersection) {\n      if (cursorPose) {\n        laserStartPosition.copy(cursorPose.position);\n      } else {\n        this.el.parentEl.object3D.getWorldPosition(laserStartPosition);\n      }\n\n      laserEndPosition.copy(intersection.point);\n\n      if (this.el.sceneEl.is(\"vr-mode\")) {\n        remoteLaserOrigin.copy(laserStartPosition);\n      } else {\n        this.data.camera.object3D.getWorldPosition(camerWorldPosition);\n        remoteLaserOrigin\n          .subVectors(laserEndPosition, camerWorldPosition)\n          .normalize()\n          .multiplyScalar(0.5);\n        remoteLaserOrigin.add(camerWorldPosition);\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.laserOrigin, laserStartPosition)) {\n        this.penLaserAttributes.laserOrigin.x = laserStartPosition.x;\n        this.penLaserAttributes.laserOrigin.y = laserStartPosition.y;\n        this.penLaserAttributes.laserOrigin.z = laserStartPosition.z;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.remoteLaserOrigin, remoteLaserOrigin)) {\n        this.penLaserAttributes.remoteLaserOrigin.x = remoteLaserOrigin.x;\n        this.penLaserAttributes.remoteLaserOrigin.y = remoteLaserOrigin.y;\n        this.penLaserAttributes.remoteLaserOrigin.z = remoteLaserOrigin.z;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.laserTarget, laserEndPosition)) {\n        this.penLaserAttributes.laserTarget.x = laserEndPosition.x;\n        this.penLaserAttributes.laserTarget.y = laserEndPosition.y;\n        this.penLaserAttributes.laserTarget.z = laserEndPosition.z;\n        this.penLaserAttributesUpdated = true;\n      }\n    };\n  })(),\n\n  _doDraw(intersection, dt) {\n    //Prevent drawings from \"jumping\" large distances\n    if (\n      this.currentDrawing &&\n      (this.lastIntersectedObject !== (intersection ? intersection.object : null) &&\n        (!intersection ||\n          Math.abs(intersection.distance - this.lastIntersectionDistance) > MAX_DISTANCE_BETWEEN_SURFACES))\n    ) {\n      this.worldPosition.copy(this.lastPosition);\n      this._endDraw();\n    }\n    this.lastIntersectionDistance = intersection ? intersection.distance : 0;\n    this.lastIntersectedObject = intersection ? intersection.object : null;\n\n    if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n      this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n      this.lastPosition.copy(this.worldPosition);\n    }\n\n    if (this.currentDrawing) {\n      const time = this.timeSinceLastDraw + dt;\n      if (\n        time >= this.data.drawFrequency &&\n        this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n      ) {\n        this._getNormal(this.normal, this.worldPosition, this.direction);\n        this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n      }\n\n      this.timeSinceLastDraw = time % this.data.drawFrequency;\n    }\n\n    if (this.currentDrawing && !this.grabberId) {\n      this._endDraw();\n    }\n\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n  },\n\n  _setPenVisible(visible) {\n    if (this.el.parentEl.object3DMap.mesh && this.el.parentEl.object3DMap.mesh.visible !== visible) {\n      this.el.parentEl.object3DMap.mesh.visible = visible;\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.drawingManager.getDrawing(this).then(drawing => {\n      this.currentDrawing = drawing;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    });\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    this.drawingManager.getDrawing(this).then(drawing => {\n      drawing.undoDraw();\n      this.drawingManager.returnDrawing(this);\n    });\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.penTip.material.color.set(this.data.color);\n    this.penLaserAttributes.color = this.data.color;\n    this.penLaserAttributesUpdated = true;\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n  },\n\n  setDirty() {\n    this.dirty = true;\n  },\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, #environment-root\");\n    for (let i = 0; i < els.length; i++) {\n      if (!els[i].classList.contains(\"pen\") && els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  },\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n    this.penSystem.deregister(this.el);\n  }\n});\n","const InterpolationBuffer = require(\"buffered-interpolation\");\nimport { convertStandardMaterial } from \"../../utils/material-utils\";\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen-laser\", {\n  schema: {\n    color: { type: \"color\", default: \"#FF0033\" },\n    laserVisible: { default: false },\n    laserInHand: { default: false },\n    laserOrigin: { default: { x: 0, y: 0, z: 0 } },\n    remoteLaserOrigin: { default: { x: 0, y: 0, z: 0 } },\n    laserTarget: { default: { x: 0, y: 0, z: 0 } }\n  },\n\n  init() {\n    let material = new THREE.MeshStandardMaterial({ color: \"red\", opacity: 0.5, transparent: true, visible: true });\n    const quality = window.APP.store.state.preferences.materialQualitySetting;\n    material = convertStandardMaterial(material, quality);\n\n    const tipMaterial = material.clone();\n\n    const lineCurve = new THREE.LineCurve3(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 2));\n    const geometry = new THREE.TubeBufferGeometry(lineCurve, 2, 0.003, 8, true);\n    this.laser = new THREE.Mesh(geometry, material);\n\n    this.laserTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 8, 6), tipMaterial);\n    this.laserTip.scale.setScalar(0.01);\n    this.laserTip.matrixNeedsUpdate = true;\n\n    //prevents the line from being a raycast target for the cursor\n    this.laser.raycast = function() {};\n\n    this.el.sceneEl.setObject3D(`pen-laser-${this.laser.uuid}`, this.laser);\n    this.el.sceneEl.setObject3D(`pen-laser-tip-${this.laser.uuid}`, this.laserTip);\n\n    this.originBuffer = new InterpolationBuffer(InterpolationBuffer.MODE_LERP, 0.1);\n    this.targetBuffer = new InterpolationBuffer(InterpolationBuffer.MODE_LERP, 0.1);\n  },\n\n  update: (() => {\n    const originBufferPosition = new THREE.Vector3();\n    const targetBufferPosition = new THREE.Vector3();\n\n    return function(prevData) {\n      if (prevData.color != this.data.color) {\n        this.laser.material.color.set(this.data.color);\n        this.laserTip.material.color.set(this.data.color);\n      }\n\n      if (prevData.remoteLaserOrigin && !almostEquals(0.001, prevData.remoteLaserOrigin, this.data.remoteLaserOrigin)) {\n        this.originBuffer.setPosition(\n          originBufferPosition.set(\n            this.data.remoteLaserOrigin.x,\n            this.data.remoteLaserOrigin.y,\n            this.data.remoteLaserOrigin.z\n          )\n        );\n      }\n\n      if (prevData.laserTarget && !almostEquals(0.001, prevData.laserTarget, this.data.laserTarget)) {\n        this.targetBuffer.setPosition(\n          targetBufferPosition.set(this.data.laserTarget.x, this.data.laserTarget.y, this.data.laserTarget.z)\n        );\n      }\n    };\n  })(),\n\n  tick: (() => {\n    const origin = new THREE.Vector3();\n    const target = new THREE.Vector3();\n    return function(t, dt) {\n      const isMine =\n        this.el.parentEl.components.networked.initialized && this.el.parentEl.components.networked.isMine();\n      let laserVisible = false;\n\n      if (isMine && this.data.laserVisible) {\n        origin.copy(this.data.laserOrigin);\n\n        if (!this.data.laserInHand) {\n          // On 2d mode, shift downards\n          origin.y = origin.y - 0.4;\n        }\n\n        target.copy(this.data.laserTarget);\n        laserVisible = true;\n      } else if (!isMine && this.data.laserVisible) {\n        this.originBuffer.update(dt);\n        this.targetBuffer.update(dt);\n        origin.copy(this.originBuffer.getPosition());\n        target.copy(this.targetBuffer.getPosition());\n        laserVisible = true;\n      }\n\n      if (laserVisible) {\n        this.laser.position.copy(origin);\n        this.laser.lookAt(target);\n        this.laser.scale.set(1, 1, origin.distanceTo(target));\n        this.laser.matrixNeedsUpdate = true;\n        this.laserTip.position.copy(target);\n        this.laserTip.matrixNeedsUpdate = true;\n      }\n\n      if (this.laser.material.visible !== laserVisible) {\n        this.laser.material.visible = laserVisible;\n      }\n\n      const laserTipVisible = laserVisible ? !(isMine && this.data.laserVisible) : false;\n      if (this.laserTip.material.visible !== laserTipVisible) {\n        this.laserTip.material.visible = laserTipVisible;\n      }\n    };\n  })(),\n\n  remove() {\n    this.el.sceneEl.removeObject3D(`pen-laser-${this.laser.uuid}`);\n    this.el.sceneEl.removeObject3D(`pen-laser-tip-${this.laser.uuid}`);\n  }\n});\n","export default class SharedBufferGeometry {\n  constructor(material, maxBufferSize) {\n    this.material = material;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = key === \"index\" ? 1 : 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          if (key === \"index\") {\n            //index needs to be handled specially\n            this.current.index.array[pos++] = this.current.index.array[i] - idx.position - 1;\n          } else {\n            this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n          }\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n    const indices = new Uint32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setUsage(THREE.DynamicDrawUsage));\n    geometry.setAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setUsage(THREE.DynamicDrawUsage));\n    geometry.setAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setUsage(THREE.DynamicDrawUsage));\n    geometry.setIndex(new THREE.BufferAttribute(indices, 1).setUsage(THREE.DynamicDrawUsage));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0,\n      index: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  addIndex(a, b, c) {\n    this.current.index.setXYZ(this.idx.index, a, b, c);\n    this.idx.index += 3;\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.index);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n    this.current.index.needsUpdate = true;\n  }\n\n  computeBoundingSpheres() {\n    for (let i = 0; i < this.geometries.length; i++) {\n      this.geometries[i].computeBoundingSphere();\n    }\n  }\n}\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { convertStandardMaterial } from \"../../utils/material-utils\";\nimport { addMedia, addMeshScaleAnimation } from \"../../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../../object-types\";\nimport { SOUND_PEN_START_DRAW } from \"../../systems/sound-effects-system\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    let material = new THREE.MeshStandardMaterial(options);\n\n    const quality = window.APP.store.state.preferences.materialQualitySetting;\n    material = convertStandardMaterial(material, quality);\n\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n\n    this.el.setObject3D(\"mesh\", this.drawing);\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.indexCount = 0; //number of indexes added for current line (used for line deletion);\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.invalidPointRead = false; //flag flipped if we read a bad point anywhere during this line\n    this.lastReadPointCount = 0; //last read point count read off of the network, used for sanity checking\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  play() {\n    AFRAME.scenes[0].systems[\"hubs-systems\"].drawingMenuSystem.registerDrawingMenu(this.el);\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.drawStarted = false;\n\n    this.el.removeObject3D(\"mesh\");\n\n    const drawingManager = this.el.sceneEl.querySelector(\"#drawing-manager\").components[\"drawing-manager\"];\n    drawingManager.destroyDrawing(this);\n\n    AFRAME.scenes[0].systems[\"hubs-systems\"].drawingMenuSystem.unregisterDrawingMenu(this.el);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  cloneMesh(sharedBufferGeometry) {\n    const originalGeometry = sharedBufferGeometry.current;\n    const idx = sharedBufferGeometry.idx;\n    const geometry = new THREE.BufferGeometry();\n\n    const positions = originalGeometry.getAttribute(\"position\").array.subarray(0, idx.position * 3);\n    const colors = originalGeometry.getAttribute(\"color\").array.subarray(0, idx.color * 3);\n    const normals = originalGeometry.getAttribute(\"normal\").array.subarray(0, idx.normal * 3);\n    const indices = originalGeometry.index.array.subarray(0, idx.index);\n\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\n    geometry.setAttribute(\"color\", new THREE.BufferAttribute(colors, 3));\n    geometry.setAttribute(\"normal\", new THREE.BufferAttribute(normals, 3));\n    geometry.setIndex(new THREE.BufferAttribute(indices, 1));\n\n    const material = new THREE.MeshStandardMaterial({\n      vertexColors: THREE.VertexColors\n    });\n    return new THREE.Mesh(geometry, material);\n  },\n\n  async serializeDrawing() {\n    const exporter = new GLTFExporter();\n\n    //mesh needs to be cloned before exporting to get rid of excess geometry information\n    const mesh = this.cloneMesh(this.sharedBuffer);\n\n    mesh.userData.gltfExtensions = {\n      MOZ_hubs_components: {\n        version: 4,\n        \"networked-drawing-buffer\": { buffer: this.networkBuffer }\n      }\n    };\n\n    const glb = await new Promise(resolve => {\n      exporter.parse(mesh, resolve, {\n        binary: true,\n        includeCustomExtensions: true\n      });\n    });\n\n    const file = new File([glb], \"drawing.glb\", {\n      type: \"model/gltf-binary\"\n    });\n\n    const { entity } = addMedia(file, \"#interactable-media\", ObjectContentOrigins.FILE, \"drawing\", false, false);\n\n    const min = new THREE.Vector3(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n    const max = new THREE.Vector3(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\n    const temp = new THREE.Vector3();\n\n    const attribute = this.sharedBuffer.current.attributes.position;\n    for (let i = 0; i < this.sharedBuffer.idx.position; i++) {\n      temp.set(attribute.getX(i), attribute.getY(i), attribute.getZ(i));\n      min.min(temp);\n      max.max(temp);\n    }\n\n    entity.object3D.position.addVectors(min, max).multiplyScalar(0.5);\n    entity.object3D.matrixNeedsUpdate = true;\n  },\n\n  deserializeDrawing: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function(buffer) {\n      let head = buffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        buffer.shift();\n        head = buffer[0];\n      }\n\n      while (head != null && buffer.length >= 11) {\n        position.set(buffer[1], buffer[2], buffer[3]);\n        direction.set(buffer[4], buffer[5], buffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(buffer[7], buffer[8], buffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        buffer.splice(0, 10);\n\n        if (!this.drawStarted) {\n          this.startDraw(position, direction, normal);\n        } else if (buffer[0] !== null) {\n          this.draw(position, direction, normal);\n        }\n\n        if (buffer[0] === null) {\n          this.endDraw(position, direction, normal);\n          buffer.shift();\n        }\n      }\n    };\n  })(),\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 11) {\n        const pointCount = this.networkBuffer[0];\n\n        // This is a sanity check against the sequence number to help uncover remaining bugs.\n        // If the point is out-of-order, report the error and stop drawing this line.\n        if (pointCount !== this.lastReadPointCount + 1) {\n          this.invalidPointRead = true;\n\n          console.error(\n            `Draw networking error: ID ${this.drawingId} expected point ${this.lastReadPointCount +\n              1} but received ${pointCount}`\n          );\n        }\n\n        this.lastReadPointCount = pointCount;\n        position.set(this.networkBuffer[1], this.networkBuffer[2], this.networkBuffer[3]);\n        direction.set(this.networkBuffer[4], this.networkBuffer[5], this.networkBuffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[7], this.networkBuffer[8], this.networkBuffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 10);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          if (!this.invalidPointRead) {\n            this._endDraw(position, direction, normal);\n          }\n\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n          this.lastReadPointCount = 0;\n          this.invalidPointRead = false;\n        } else {\n          if (!this.invalidPointRead) {\n            this._draw(position, direction, normal);\n            didWork = true;\n          }\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        this.idx.position = datum.vertexCount;\n        this.idx.normal = datum.vertexCount;\n        this.idx.color = datum.vertexCount;\n        this.idx.index = datum.indexCount;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawStartCap(this.lastPoint, this.lastSegments, capNormal);\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawProjectedEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      this.idx.index = 0;\n      if (length > 1) {\n        this.idx.position = this.sharedBuffer.idx.position - datum.vertexCount - 1;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.vertexCount - 1;\n        this.idx.color = this.sharedBuffer.idx.color - datum.vertexCount - 1;\n        this.idx.index = this.sharedBuffer.idx.index - datum.indexCount - 1;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawProjectedEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawProjectedEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._drawEndCap(projectedPoint, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      vertexCount: this.vertexCount - 1,\n      indexCount: this.indexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.indexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n\n    this.sharedBuffer.computeBoundingSpheres();\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(this.currentPointCount);\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this._addVertex(this.currentSegments[i]);\n    }\n\n    const bufferVertexCount = this.sharedBuffer.idx.position;\n\n    for (let i = 0; i < this.segments; i++) {\n      const a = bufferVertexCount - (this.segments + (this.segments - i));\n      const b = i + 1 < this.segments ? a + 1 : bufferVertexCount - 2 * this.segments;\n      const c = bufferVertexCount - (this.segments - i);\n      const d = i + 1 < this.segments ? c + 1 : bufferVertexCount - this.segments;\n\n      this._addIndex(c, a, b);\n      this._addIndex(c, b, d);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._drawEndCap(projectedPoint, down);\n    };\n  })(),\n\n  _drawStartCap(point, segments, normal) {\n    this._addVertex({ position: point, normal: normal });\n\n    for (let i = 0; i < this.segments; i++) {\n      this._addVertex(segments[i]);\n    }\n\n    const bufferVertexCount = this.sharedBuffer.idx.position;\n    const a = bufferVertexCount - this.segments - 1;\n    for (let i = 0; i < this.segments; i++) {\n      const b = bufferVertexCount - (this.segments - i);\n      const c = i + 1 < this.segments ? b + 1 : bufferVertexCount - this.segments;\n      this._addIndex(a, c, b);\n    }\n  },\n\n  _drawEndCap(point, normal) {\n    this._addVertex({ position: point, normal: normal });\n\n    const bufferVertexCount = this.sharedBuffer.idx.position;\n    const a = bufferVertexCount - 1;\n    for (let i = 0; i < this.segments; i++) {\n      const b = bufferVertexCount - (this.segments - i) - 1;\n      const c = i + 1 < this.segments ? b + 1 : bufferVertexCount - this.segments - 1;\n      this._addIndex(a, b, c);\n    }\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.vertexCount;\n  },\n\n  _addIndex(a, b, c) {\n    this.sharedBuffer.addIndex(a, b, c);\n    this.indexCount += 3;\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n\nAFRAME.registerComponent(\"networked-drawing-buffer\", {\n  schema: {\n    buffer: { default: [] }\n  },\n\n  play() {\n    const button = this._getDeserializeButton(this.el.parentEl);\n    if (button) {\n      button.object3D.visible = true;\n      button.components[\"deserialize-drawing-button\"].networkedDrawingBuffer = this;\n    }\n  },\n\n  _getDeserializeButton(entity) {\n    if (entity.classList.contains(\"interactable\")) {\n      return entity.querySelector(\".deserialize-drawing\");\n    } else if (entity.parentEl) {\n      return this._getDeserializeButton(entity.parentEl);\n    } else {\n      return null;\n    }\n  }\n});\n\nAFRAME.registerComponent(\"deserialize-drawing-button\", {\n  init() {\n    const drawingManager = this.el.sceneEl.querySelector(\"#drawing-manager\").components[\"drawing-manager\"];\n    this.networkedDrawingBuffer = null;\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const finishDrawing = () => {\n        drawingManager.drawing.deserializeDrawing(this.networkedDrawingBuffer.data.buffer);\n        addMeshScaleAnimation(drawingManager.drawing.el.object3DMap.mesh, { x: 0.001, y: 0.001, z: 0.001 });\n\n        if (this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned) {\n          window.APP.pinningHelper.setPinned(this.targetEl, false);\n        }\n        this.targetEl.parentEl.removeChild(this.targetEl);\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PEN_START_DRAW);\n      };\n\n      //serialize any existing drawing and clear the drawing.\n      if (drawingManager.drawing) {\n        drawingManager.drawing.serializeDrawing().then(() => {\n          drawingManager.drawing.el.parentEl.removeChild(drawingManager.drawing.el);\n          drawingManager.destroyDrawing(drawingManager.drawing);\n\n          drawingManager.createDrawing().then(finishDrawing);\n        });\n      } else {\n        drawingManager.createDrawing().then(finishDrawing);\n      }\n    };\n\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (this.networkedDrawingBuffer) {\n      const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      const canPin = window.APP.hubChannel.can(\"pin_objects\") && window.APP.hubChannel.signedIn;\n      this.el.object3D.visible = (!isPinned || canPin) && window.APP.hubChannel.can(\"spawn_drawing\");\n    } else {\n      this.el.object3D.visible = false;\n    }\n  }\n});\n","import { CONSTANTS } from \"three-ammo\";\nconst ACTIVATION_STATE = CONSTANTS.ACTIVATION_STATE,\n  TYPE = CONSTANTS.TYPE;\n\nconst ACTIVATION_STATES = [\n  ACTIVATION_STATE.ACTIVE_TAG,\n  ACTIVATION_STATE.ISLAND_SLEEPING,\n  ACTIVATION_STATE.WANTS_DEACTIVATION,\n  ACTIVATION_STATE.DISABLE_DEACTIVATION,\n  ACTIVATION_STATE.DISABLE_SIMULATION\n];\n\nAFRAME.registerComponent(\"body-helper\", {\n  schema: {\n    loadedEvent: { default: \"\" },\n    mass: { default: 1 },\n    gravity: { type: \"vec3\", default: { x: 0, y: -9.8, z: 0 } },\n    linearDamping: { default: 0.01 },\n    angularDamping: { default: 0.01 },\n    linearSleepingThreshold: { default: 1.6 },\n    angularSleepingThreshold: { default: 2.5 },\n    angularFactor: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    activationState: {\n      default: ACTIVATION_STATE.ACTIVE_TAG,\n      oneOf: ACTIVATION_STATES\n    },\n    type: { default: \"dynamic\", oneOf: [TYPE.STATIC, TYPE.DYNAMIC, TYPE.KINEMATIC] },\n    emitCollisionEvents: { default: false },\n    disableCollision: { default: false },\n    collisionFilterGroup: { default: 1 }, //32-bit mask,\n    collisionFilterMask: { default: 1 }, //32-bit mask\n    scaleAutoUpdate: { default: true }\n  },\n\n  init: function() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n    this.alive = true;\n    this.uuid = -1;\n    this.system.registerBodyHelper(this);\n  },\n\n  init2: function() {\n    this.el.object3D.updateMatrices();\n    this.uuid = this.system.addBody(this.el.object3D, this.data);\n  },\n\n  update: function(prevData) {\n    if (prevData !== null && this.uuid !== -1) {\n      this.system.updateBody(this.uuid, this.data);\n    }\n  },\n\n  remove: function() {\n    if (this.uuid !== -1) {\n      this.system.removeBody(this.uuid);\n    }\n    this.alive = false;\n  }\n});\n","import { SHAPE, FIT } from \"three-ammo/constants\";\n\nAFRAME.registerComponent(\"shape-helper\", {\n  schema: {\n    type: {\n      default: SHAPE.HULL,\n      oneOf: [\n        SHAPE.BOX,\n        SHAPE.CYLINDER,\n        SHAPE.SPHERE,\n        SHAPE.CAPSULE,\n        SHAPE.CONE,\n        SHAPE.HULL,\n        SHAPE.HACD,\n        SHAPE.VHACD,\n        SHAPE.MESH,\n        SHAPE.HEIGHTFIELD\n      ]\n    },\n    fit: { default: FIT.ALL, oneOf: [FIT.ALL, FIT.MANUAL] },\n    halfExtents: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    minHalfExtent: { default: 0 },\n    maxHalfExtent: { default: Number.POSITIVE_INFINITY },\n    sphereRadius: { default: NaN },\n    cylinderAxis: { default: \"y\", oneOf: [\"x\", \"y\", \"z\"] },\n    margin: { default: 0.01 },\n    offset: { type: \"vec3\", default: { x: 0, y: 0, z: 0 } },\n    orientation: { type: \"vec4\", default: { x: 0, y: 0, z: 0, w: 1 } },\n    heightfieldData: { default: [] },\n    heightfieldDistance: { default: 1 },\n    includeInvisible: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n    this.alive = true;\n    this.uuid = -1;\n    this.system.registerShapeHelper(this);\n  },\n\n  init2: function() {\n    this.mesh = null;\n\n    let bodyEl = this.el;\n    this.bodyHelper = bodyEl.components[\"body-helper\"] || null;\n    while (!this.bodyHelper && bodyEl.parentNode != this.el.sceneEl) {\n      bodyEl = bodyEl.parentNode;\n      if (bodyEl.components[\"body-helper\"]) {\n        this.bodyHelper = bodyEl.components[\"body-helper\"];\n      }\n    }\n    if (!this.bodyHelper || this.bodyHelper.uuid === null || this.bodyHelper.uuid === undefined) {\n      console.warn(\"body not found\");\n      return;\n    }\n    if (this.data.fit === FIT.ALL) {\n      if (!this.el.object3DMap.mesh) {\n        console.error(\"Cannot use FIT.ALL without object3DMap.mesh\");\n        return;\n      }\n      this.mesh = this.el.object3DMap.mesh;\n      this.mesh.updateMatrices();\n    }\n\n    this.uuid = this.system.addShapes(this.bodyHelper.uuid, this.mesh, this.data);\n  },\n\n  remove: function() {\n    if (this.uuid !== -1) {\n      this.system.removeShapes(this.bodyHelper.uuid, this.uuid);\n    }\n    this.alive = false;\n  }\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  // Note: networked template ids are semantically important. We use the template suffix as a filter\n  // for allowing and authorizing messages in reticulum.\n  // See `spawn_permitted?` in https://github.com/mozilla/reticulum/blob/master/lib/ret_web/channels/hub_channel.ex\n\n  // NAF schemas have been extended with a custom nonAuthorizedComponents property that is used to skip authorization\n  // on certain components and properties regardless of hub or user permissions. See permissions-utils.js.\n\n  NAF.schemas.add({\n    template: \"#remote-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pdf\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-emoji\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"emoji\",\n        property: \"emitEndTime\"\n      },\n      {\n        component: \"emoji\",\n        property: \"particleEmitterConfig\"\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"media-loader\",\n      \"pinnable\",\n      {\n        selector: \".particle-emitter\",\n        component: \"particle-emitter\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media-frame\",\n    components: [\n      {\n        component: \"media-frame\",\n        property: \"targetId\"\n      },\n      {\n        component: \"media-frame\",\n        property: \"originalTargetScale\"\n      }\n    ],\n    // TODO we probably want media frames to support permissioning of some form\n    nonAuthorizedComponents: [\"media-frame\"]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pdf\",\n        property: \"index\"\n      }\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\n      \"position\",\n      \"rotation\",\n      {\n        component: \"camera-tool\",\n        property: \"isSnapping\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"isRecording\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"label\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#template-waypoint-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"waypoint\"\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"waypoint\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-pen\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"drawMode\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"penVisible\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"laserVisible\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"remoteLaserOrigin\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"laserTarget\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./OAuthScreen.scss\";\nimport { Modal } from \"../modal/Modal\";\nimport { Column } from \"../layout/Column\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Button } from \"../input/Button\";\nimport { LegalMessage } from \"./LegalMessage\";\n\nconst providerLabel = {\n  discord: \"Discord\",\n  slack: \"Slack\"\n};\nexport function OAuthScreen({ provider, redirectUrl, termsUrl, privacyUrl, ...rest }) {\n  return (\n    <div className={styles.oauthScreen} {...rest}>\n      <Modal title={<FormattedMessage id=\"oauth-screen.title\" defaultMessage=\"Sign In To Continue\" />}>\n        <Column center padding>\n          <p>\n            <FormattedMessage\n              id=\"oauth-screen.description\"\n              defaultMessage=\"You'll need to sign in to {provider} to access this room.\"\n              values={{ provider: providerLabel[provider] }}\n            />\n          </p>\n          <p>\n            <FormattedMessage\n              id=\"oauth-screen.email-reason\"\n              defaultMessage=\"We'll ask for access to your e-mail address so you can skip signing in next time.\"\n            />\n          </p>\n          <p>\n            <small>\n              <LegalMessage termsUrl={termsUrl} privacyUrl={privacyUrl} />\n            </small>\n          </p>\n          <Button as=\"a\" href={redirectUrl} preset={provider === \"discord\" ? \"accent5\" : \"accent4\"}>\n            <FormattedMessage\n              id=\"oauth-screen.sign-in-button\"\n              defaultMessage=\"Sign Into {provider}\"\n              values={{ provider: providerLabel[provider] }}\n            />\n          </Button>\n        </Column>\n      </Modal>\n    </div>\n  );\n}\n\nOAuthScreen.propTypes = {\n  provider: PropTypes.string.isRequired,\n  redirectUrl: PropTypes.string.isRequired,\n  termsUrl: PropTypes.string,\n  privacyUrl: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../../utils/configs\";\nimport { OAuthScreen } from \"./OAuthScreen\";\n\nexport function OAuthScreenContainer({ oauthInfo }) {\n  const { url, type } = oauthInfo[0];\n\n  return (\n    <OAuthScreen\n      provider={type}\n      redirectUrl={url}\n      termsUrl={\n        configs.feature(\"show_terms\") &&\n        configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")\n      }\n      privacyUrl={\n        configs.feature(\"show_privacy\") &&\n        configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")\n      }\n    />\n  );\n}\n\nOAuthScreenContainer.propTypes = {\n  oauthInfo: PropTypes.array\n};\n","import {\n  getCurrentHubId,\n  updateVRHudPresenceCount,\n  updateSceneCopresentState,\n  createHubChannelParams\n} from \"./utils/hub-utils\";\nimport \"./utils/debug-log\";\nimport configs from \"./utils/configs\";\nimport \"./utils/theme\";\nimport \"@babel/polyfill\";\n\nconsole.log(\n  `App version: ${\n    configs.IS_LOCAL_OR_CUSTOM_CLIENT\n      ? `Custom client or local client (undeploy custom client to run build ${process.env.BUILD_VERSION})`\n      : process.env.BUILD_VERSION || \"?\"\n  }`\n);\n\nimport \"./react-components/styles/global.scss\";\nimport \"./assets/stylesheets/globals.scss\";\nimport \"./assets/stylesheets/hub.scss\";\nimport initialBatchImage from \"./assets/images/warning_icon.png\";\nimport loadingEnvironment from \"./assets/models/LoadingEnvironment.glb\";\n\nimport \"aframe\";\nimport \"./utils/aframe-overrides\";\n\n// A-Frame hardcodes THREE.Cache.enabled = true\n// But we don't want to use THREE.Cache because\n// web browser cache should work well.\n// So we disable it here.\nTHREE.Cache.enabled = false;\n\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\n// It seems we need to use require to import modules\n// under the three/examples/js to avoid tree shaking\n// in webpack production mode.\nrequire(\"three/examples/js/loaders/GLTFLoader\");\n\nimport \"networked-aframe/src/index\";\nimport \"webrtc-adapter\";\nimport { detectOS, detect } from \"detect-browser\";\nimport {\n  getReticulumFetchUrl,\n  getReticulumMeta,\n  migrateChannelToSocket,\n  connectToReticulum,\n  denoisePresence,\n  presenceEventsForHub,\n  tryGetMatchingMeta\n} from \"./utils/phoenix-utils\";\nimport { Presence } from \"phoenix\";\nimport { emitter } from \"./emitter\";\nimport \"./phoenix-adapter\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport Cookies from \"js-cookie\";\nimport { DialogAdapter, DIALOG_CONNECTION_ERROR_FATAL, DIALOG_CONNECTION_CONNECTED } from \"./naf-dialog-adapter\";\nimport \"./change-hub\";\n\nimport \"./components/scene-components\";\nimport \"./components/mute-mic\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/fader\";\nimport \"./components/in-world-hud\";\nimport \"./components/emoji\";\nimport \"./components/emoji-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/name-tag\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/mute-button\";\nimport \"./components/kick-button\";\nimport \"./components/close-vr-notice-button\";\nimport \"./components/leave-room-button\";\nimport \"./components/visible-if-permitted\";\nimport \"./components/visibility-on-content-types\";\nimport \"./components/hide-when-pinned-and-forbidden\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/media-video\";\nimport \"./components/media-pdf\";\nimport \"./components/media-image\";\nimport \"./components/avatar-volume-controls\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/position-at-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/mirror-media-button\";\nimport \"./components/close-mirrored-media-button\";\nimport \"./components/drop-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/action-to-remove\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/follow-in-fov\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\nimport \"./components/refresh-media-button\";\nimport \"./components/tweet-media-button\";\nimport \"./components/remix-avatar-button\";\nimport \"./components/transform-object-button\";\nimport \"./components/scale-button\";\nimport \"./components/hover-menu\";\nimport \"./components/disable-frustum-culling\";\nimport \"./components/teleporter\";\nimport \"./components/track-pose\";\nimport \"./components/replay\";\nimport \"./components/visibility-by-path\";\nimport \"./components/tags\";\nimport \"./components/periodic-full-syncs\";\nimport \"./components/inspect-button\";\nimport \"./components/inspect-pivot-child-selector\";\nimport \"./components/inspect-pivot-offset-from-camera\";\nimport \"./components/optional-alternative-to-not-hide\";\nimport \"./components/avatar-audio-source\";\nimport \"./components/avatar-inspect-collider\";\nimport \"./components/video-texture-target\";\nimport \"./components/mirror\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { Router, Route } from \"react-router-dom\";\nimport { createBrowserHistory, createMemoryHistory } from \"history\";\nimport { pushHistoryState } from \"./utils/history\";\nimport UIRoot from \"./react-components/ui-root\";\nimport { ExitedRoomScreenContainer } from \"./react-components/room/ExitedRoomScreenContainer\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-url-utils\";\nimport { traverseMeshesAndAddShapes } from \"./utils/physics-utils\";\nimport { handleExitTo2DInterstitial, exit2DInterstitialAndEnterVR } from \"./utils/vr-interstitial\";\nimport { getAvatarSrc } from \"./utils/avatar-utils.js\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/frame-scheduler\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/permissions\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/auto-pixel-ratio\";\nimport \"./systems/idle-detector\";\nimport \"./systems/camera-tools\";\nimport \"./systems/pen-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/ui-hotkeys\";\nimport \"./systems/tips\";\nimport \"./systems/interactions\";\nimport \"./systems/hubs-systems\";\nimport \"./systems/capture-system\";\nimport \"./systems/listed-media\";\nimport \"./systems/linked-media\";\nimport \"./systems/audio-debug-system\";\nimport \"./systems/audio-gain-system\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\nimport MediaDevicesManager from \"./utils/media-devices-manager\";\nimport PinningHelper from \"./utils/pinning-helper\";\nimport { sleep } from \"./utils/async-utils\";\nimport { platformUnsupported } from \"./support\";\n\nwindow.APP = new App();\nwindow.APP.dialog = new DialogAdapter();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\n\nconst store = window.APP.store;\nstore.update({ preferences: { shouldPromptForRefresh: false } }); // Clear flag that prompts for refresh from preference screen\nconst mediaSearchStore = window.APP.mediaSearchStore;\nconst OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\nconst NOISY_OCCUPANT_COUNT = 30; // Above this # of occupants, we stop posting join/leaves/renames\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isEmbed = window.self !== window.top;\nif (isEmbed && !qs.get(\"embed_token\")) {\n  // Should be covered by X-Frame-Options, but just in case.\n  throw new Error(\"no embed token\");\n}\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\n\nimport \"./components/owned-object-limiter\";\nimport \"./components/owned-object-cleanup-timeout\";\nimport \"./components/set-unowned-body-kinematic\";\nimport \"./components/scalable-when-grabbed\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/set-yxz-order\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/pen-laser\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport \"./components/body-helper\";\nimport \"./components/shape-helper\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\n\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY, ONLY_SCREEN_AVAILABLE } from \"./utils/vr-caps-detect\";\nimport detectConcurrentLoad from \"./utils/concurrent-load-detector\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\nimport { WrappedIntlProvider } from \"./react-components/wrapped-intl-provider\";\nimport { ExitReason } from \"./react-components/room/ExitedRoomScreen\";\nimport { OAuthScreenContainer } from \"./react-components/auth/OAuthScreenContainer\";\nimport { SignInMessages } from \"./react-components/auth/SignInModal\";\nimport { ThemeProvider } from \"./react-components/styles/theme\";\nimport { LogMessageType } from \"./react-components/room/ChatSidebar\";\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nNAF.options.firstSyncSource = PHOENIX_RELIABLE_NAF;\nNAF.options.syncSource = PHOENIX_RELIABLE_NAF;\n\nlet isOAuthModal = false;\n\n// OAuth popup handler\n// TODO: Replace with a new oauth callback route that has this postMessage script.\ntry {\n  if (window.opener && window.opener.doingTwitterOAuth) {\n    window.opener.postMessage(\"oauth-successful\");\n    isOAuthModal = true;\n    window.close();\n  }\n} catch (e) {\n  console.error(\"Exception in oauth processing code\", e);\n}\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry(\"/hub\", \"Room Landing Page\");\n}\n\ndisableiOSZoom();\n\nif (!isOAuthModal) {\n  detectConcurrentLoad();\n}\n\nfunction setupLobbyCamera() {\n  console.log(\"Setting up lobby camera\");\n  const camera = document.getElementById(\"scene-preview-node\");\n  const previewCamera = document.getElementById(\"environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.removeAttribute(\"scene-preview-camera\");\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n}\n\nlet uiProps = {};\n\n// Hub ID and slug are the basename\nlet routerBaseName = document.location.pathname\n  .split(\"/\")\n  .slice(0, 2)\n  .join(\"/\");\n\nif (document.location.pathname.includes(\"hub.html\")) {\n  routerBaseName = \"/\";\n}\n\n// when loading the client as a \"default room\" on the homepage, use MemoryHistory since exposing all the client paths at the root is undesirable\nconst history = routerBaseName === \"/\" ? createMemoryHistory() : createBrowserHistory({ basename: routerBaseName });\nwindow.APP.history = history;\n\nconst qsVREntryType = qs.get(\"vr_entry_type\");\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnIdle =\n    qsTruthy(\"allow_idle\") || (process.env.NODE_ENV === \"development\" && !qs.get(\"idle_timeout\"));\n  const forcedVREntryType = qsVREntryType;\n\n  ReactDOM.render(\n    <WrappedIntlProvider>\n      <ThemeProvider store={store}>\n        <Router history={history}>\n          <Route\n            render={routeProps =>\n              props.showOAuthScreen ? (\n                <OAuthScreenContainer oauthInfo={props.oauthInfo} />\n              ) : props.roomUnavailableReason ? (\n                <ExitedRoomScreenContainer reason={props.roomUnavailableReason} />\n              ) : (\n                <UIRoot\n                  {...{\n                    scene,\n                    isBotMode,\n                    disableAutoExitOnIdle,\n                    forcedVREntryType,\n                    store,\n                    mediaSearchStore,\n                    ...props,\n                    ...routeProps\n                  }}\n                />\n              )\n            }\n          />\n        </Router>\n      </ThemeProvider>\n    </WrappedIntlProvider>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nexport function remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nexport async function getSceneUrlForHub(hub) {\n  let sceneUrl;\n  let isLegacyBundle; // Deprecated\n  if (hub.scene) {\n    isLegacyBundle = false;\n    sceneUrl = hub.scene.model_url;\n  } else if (hub.scene === null) {\n    // delisted/removed scene\n    sceneUrl = loadingEnvironment;\n  } else {\n    const defaultSpaceTopic = hub.topics[0];\n    const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n    const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n    sceneUrl = (glbAsset || bundleAsset).src || loadingEnvironment;\n    const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n    isLegacyBundle = !(glbAsset || hasExtension);\n  }\n\n  if (qsTruthy(\"debugLocalScene\") && sceneUrl?.startsWith(\"blob:\")) {\n    // we skip doing this if you haven't entered because refreshing the page will invalidate blob urls and break loading\n    sceneUrl = document.querySelector(\"a-scene\").is(\"entered\") ? sceneUrl : loadingEnvironment;\n  } else if (isLegacyBundle) {\n    // Deprecated\n    const res = await fetch(sceneUrl);\n    const data = await res.json();\n    const baseURL = new URL(THREE.LoaderUtils.extractUrlBase(sceneUrl), window.location.href);\n    sceneUrl = new URL(data.assets[0].src, baseURL).href;\n  } else {\n    sceneUrl = proxiedUrlFor(sceneUrl);\n  }\n  return sceneUrl;\n}\n\nexport async function updateEnvironmentForHub(hub, entryManager) {\n  console.log(\"Updating environment for hub\");\n  const sceneUrl = await getSceneUrlForHub(hub);\n\n  const sceneErrorHandler = () => {\n    remountUI({ roomUnavailableReason: ExitReason.sceneError });\n    entryManager.exitScene();\n  };\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const sceneEl = document.querySelector(\"a-scene\");\n\n  const envSystem = sceneEl.systems[\"hubs-systems\"].environmentSystem;\n\n  console.log(`Scene URL: ${sceneUrl}`);\n  const loadStart = performance.now();\n\n  let environmentEl = null;\n\n  if (environmentScene.childNodes.length === 0) {\n    const environmentEl = document.createElement(\"a-entity\");\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.removeEventListener(\"model-error\", sceneErrorHandler);\n\n        console.log(`Scene file initial load took ${Math.round(performance.now() - loadStart)}ms`);\n\n        // Show the canvas once the model has loaded\n        document.querySelector(\".a-canvas\").classList.remove(\"a-hidden\");\n\n        sceneEl.addState(\"visible\");\n\n        envSystem.updateEnvironment(environmentEl);\n\n        //TODO: check if the environment was made with spoke to determine if a shape should be added\n        traverseMeshesAndAddShapes(environmentEl);\n      },\n      { once: true }\n    );\n\n    environmentEl.addEventListener(\"model-error\", sceneErrorHandler, { once: true });\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl, useCache: false, inflate: true });\n    environmentScene.appendChild(environmentEl);\n  } else {\n    // Change environment\n    environmentEl = environmentScene.childNodes[0];\n\n    // Clear the three.js image cache and load the loading environment before switching to the new one.\n    THREE.Cache.clear();\n    const waypointSystem = sceneEl.systems[\"hubs-systems\"].waypointSystem;\n    waypointSystem.releaseAnyOccupiedWaypoints();\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.addEventListener(\n          \"model-loaded\",\n          () => {\n            environmentEl.removeEventListener(\"model-error\", sceneErrorHandler);\n\n            envSystem.updateEnvironment(environmentEl);\n\n            console.log(`Scene file update load took ${Math.round(performance.now() - loadStart)}ms`);\n\n            traverseMeshesAndAddShapes(environmentEl);\n\n            // We've already entered, so move to new spawn point once new environment is loaded\n            if (sceneEl.is(\"entered\")) {\n              waypointSystem.moveToSpawnPoint();\n            }\n\n            const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n\n            // Add a slight delay before de-in to reduce hitching.\n            setTimeout(() => fader.fadeIn(), 2000);\n          },\n          { once: true }\n        );\n\n        sceneEl.emit(\"leaving_loading_environment\");\n        if (environmentEl.components[\"gltf-model-plus\"].data.src === sceneUrl) {\n          console.warn(\"Updating environment to the same url.\");\n          environmentEl.setAttribute(\"gltf-model-plus\", { src: \"\" });\n        }\n        environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl });\n      },\n      { once: true }\n    );\n\n    if (!sceneEl.is(\"entered\")) {\n      environmentEl.addEventListener(\"model-error\", sceneErrorHandler, { once: true });\n    }\n\n    if (environmentEl.components[\"gltf-model-plus\"].data.src === loadingEnvironment) {\n      console.warn(\"Transitioning to loading environment but was already in loading environment.\");\n      environmentEl.setAttribute(\"gltf-model-plus\", { src: \"\" });\n    }\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: loadingEnvironment });\n  }\n}\n\nexport async function updateUIForHub(hub, hubChannel) {\n  remountUI({ hub, entryDisallowed: !hubChannel.canEnterRoom(hub) });\n}\n\nfunction onConnectionError(entryManager, connectError) {\n  console.error(\"An error occurred while attempting to connect to networked scene:\", connectError);\n  // hacky until we get return codes\n  const isFull = connectError.msg && connectError.msg.match(/\\bfull\\b/i);\n  remountUI({ roomUnavailableReason: isFull ? ExitReason.full : ExitReason.connectError });\n  entryManager.exitScene();\n}\n\n// TODO: Find a home for this\n// TODO: Naming. Is this an \"event bus\"?\nconst events = emitter();\nfunction handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data, permsToken) {\n  const scene = document.querySelector(\"a-scene\");\n  const isRejoin = NAF.connection.isConnected();\n\n  if (isRejoin) {\n    // Slight hack, to ensure correct presence state we need to re-send the entry event\n    // on re-join. Ideally this would be updated into the channel socket state but this\n    // would require significant changes to the hub channel events and socket management.\n    if (scene.is(\"entered\")) {\n      hubChannel.sendEnteredEvent();\n    }\n\n    // Send complete sync on phoenix re-join.\n    // TODO: We should be able to safely remove this completeSync now that\n    //       NAF occupancy is driven from phoenix presence state.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  // Turn off NAF for embeds as an optimization, so the user's browser isn't getting slammed\n  // with NAF traffic on load.\n  if (isEmbed) {\n    hubChannel.allowNAFTraffic(false);\n  }\n\n  const hub = data.hubs[0];\n  let embedToken = hub.embed_token;\n\n  if (!embedToken) {\n    const embedTokenEntry = store.state.embedTokens && store.state.embedTokens.find(t => t.hubId === hub.hub_id);\n\n    if (embedTokenEntry) {\n      embedToken = embedTokenEntry.embedToken;\n    }\n  }\n\n  console.log(`Dialog host: ${hub.host}:${hub.port}`);\n\n  remountUI({\n    messageDispatch: messageDispatch,\n    onSendMessage: messageDispatch.dispatch,\n    onLoaded: () => store.executeOnLoadActions(scene),\n    onMediaSearchResultEntrySelected: (entry, selectAction) =>\n      scene.emit(\"action_selected_media_result_entry\", { entry, selectAction }),\n    onMediaSearchCancelled: entry => scene.emit(\"action_media_search_cancelled\", entry),\n    onAvatarSaved: entry => scene.emit(\"action_avatar_saved\", entry),\n    embedToken: embedToken\n  });\n\n  scene.addEventListener(\"action_selected_media_result_entry\", e => {\n    const { entry, selectAction } = e.detail;\n    if ((entry.type !== \"scene_listing\" && entry.type !== \"scene\") || selectAction !== \"use\") return;\n    if (!hubChannel.can(\"update_hub\")) return;\n\n    hubChannel.updateScene(entry.url);\n  });\n\n  // Handle request for user gesture\n  scene.addEventListener(\"2d-interstitial-gesture-required\", () => {\n    remountUI({\n      showInterstitialPrompt: true,\n      onInterstitialPromptClicked: () => {\n        remountUI({ showInterstitialPrompt: false, onInterstitialPromptClicked: null });\n        scene.emit(\"2d-interstitial-gesture-complete\");\n      }\n    });\n  });\n\n  scene.addEventListener(\n    \"didConnectToNetworkedScene\",\n    () => {\n      // Append objects once we are in the NAF room since ownership may be taken.\n      const objectsScene = document.querySelector(\"#objects-scene\");\n      const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n      const objectsEl = document.createElement(\"a-entity\");\n\n      objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n\n      if (!isBotMode) {\n        objectsScene.appendChild(objectsEl);\n      }\n    },\n    { once: true }\n  );\n\n  scene.setAttribute(\"networked-scene\", {\n    room: hub.hub_id,\n    serverURL: `wss://${hub.host}:${hub.port}`, // TODO: This is confusing because this is the dialog host and port.\n    debug: !!isDebug,\n    adapter: \"phoenix\"\n  });\n\n  (async () => {\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n\n    const loadEnvironmentAndConnect = () => {\n      console.log(\"Loading environment and connecting to dialog servers\");\n\n      updateEnvironmentForHub(hub, entryManager);\n\n      // Disconnect in case this is a re-entry\n      APP.dialog.disconnect();\n      APP.dialog.connect({\n        serverUrl: `wss://${hub.host}:${hub.port}`,\n        roomId: hub.hub_id,\n        joinToken: permsToken,\n        serverParams: { host: hub.host, port: hub.port, turn: hub.turn },\n        scene,\n        clientId: data.session_id,\n        forceTcp: qs.get(\"force_tcp\"),\n        forceTurn: qs.get(\"force_turn\"),\n        iceTransportPolicy: qs.get(\"force_tcp\") || qs.get(\"force_turn\") ? \"relay\" : \"all\"\n      });\n      scene.addEventListener(\n        \"adapter-ready\",\n        ({ detail: adapter }) => {\n          adapter.hubChannel = hubChannel;\n          adapter.events = events;\n          adapter.session_id = data.session_id;\n        },\n        { once: true }\n      );\n      scene.components[\"networked-scene\"]\n        .connect()\n        .then(() => {\n          scene.emit(\"didConnectToNetworkedScene\");\n        })\n        .catch(connectError => {\n          onConnectionError(entryManager, connectError);\n        });\n    };\n\n    window.APP.hub = hub;\n    updateUIForHub(hub, hubChannel);\n    scene.emit(\"hub_updated\", { hub });\n\n    if (!isEmbed) {\n      console.log(\"Page is not embedded so environment initialization will start immediately\");\n      loadEnvironmentAndConnect();\n    } else {\n      console.log(\"Page is embedded so environment initialization will be deferred\");\n      remountUI({\n        onPreloadLoadClicked: () => {\n          console.log(\"Preload has been activated\");\n          hubChannel.allowNAFTraffic(true);\n          remountUI({ showPreload: false });\n          loadEnvironmentAndConnect();\n        }\n      });\n    }\n  })();\n}\n\nasync function runBotMode(scene, entryManager) {\n  console.log(\"Running in bot mode...\");\n  const noop = () => {};\n  const alwaysFalse = () => false;\n  scene.renderer = {\n    setAnimationLoop: noop,\n    render: noop,\n    shadowMap: {},\n    vr: { isPresenting: alwaysFalse },\n    setSize: noop\n  };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(false, false);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  if (isOAuthModal) {\n    return;\n  }\n\n  await store.initProfile();\n\n  const canvas = document.querySelector(\".a-canvas\");\n  canvas.classList.add(\"a-hidden\");\n\n  if (platformUnsupported()) {\n    return;\n  }\n\n  const detectedOS = detectOS(navigator.userAgent);\n  const browser = detect();\n  // HACK - it seems if we don't initialize the mic track up-front, voices can drop out on iOS\n  // safari when initializing it later.\n  if ([\"iOS\", \"Mac OS\"].includes(detectedOS) && [\"safari\", \"ios\"].includes(browser.name)) {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n    } catch (e) {\n      remountUI({ showSafariMicDialog: true });\n      return;\n    }\n  }\n\n  const hubId = getCurrentHubId();\n  console.log(`Hub ID: ${hubId}`);\n\n  const shouldRedirectToSignInPage =\n    // Default room won't work if account is required to access\n    !configs.feature(\"default_room_id\") &&\n    configs.feature(\"require_account_for_join\") &&\n    !(store.state.credentials && store.state.credentials.token);\n  if (shouldRedirectToSignInPage) {\n    document.location = `/?sign_in&sign_in_destination=hub&sign_in_destination_url=${encodeURIComponent(\n      document.location.toString()\n    )}`;\n  }\n\n  const subscriptions = new Subscriptions(hubId);\n  APP.subscriptions = subscriptions;\n  subscriptions.register();\n\n  const scene = document.querySelector(\"a-scene\");\n  window.APP.scene = scene;\n\n  // HACK - Trigger initial batch preparation with an invisible object\n  scene\n    .querySelector(\"#batch-prep\")\n    .setAttribute(\"media-image\", { batch: true, src: initialBatchImage, contentType: \"image/png\" });\n\n  const onSceneLoaded = () => {\n    const physicsSystem = scene.systems[\"hubs-systems\"].physicsSystem;\n    physicsSystem.setDebug(isDebug || physicsSystem.debug);\n  };\n  if (scene.hasLoaded) {\n    onSceneLoaded();\n  } else {\n    scene.addEventListener(\"loaded\", onSceneLoaded, { once: true });\n  }\n\n  // If the stored avatar doesn't have a valid src, reset to a legacy avatar.\n  const avatarSrc = await getAvatarSrc(store.state.profile.avatarId);\n  if (!avatarSrc) {\n    await store.resetToRandomDefaultAvatar();\n  }\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store, hubId);\n  window.APP.hubChannel = hubChannel;\n\n  const entryManager = new SceneEntryManager(hubChannel, authChannel, history);\n  window.APP.entryManager = entryManager;\n\n  APP.dialog.on(DIALOG_CONNECTION_CONNECTED, () => {\n    scene.emit(\"didConnectToDialog\");\n  });\n  APP.dialog.on(DIALOG_CONNECTION_ERROR_FATAL, () => {\n    // TODO: Change the wording of the connect error to match dialog connection error\n    // TODO: Tell the user that dialog is broken, but don't completely end the experience\n    remountUI({ roomUnavailableReason: ExitReason.connectError });\n    APP.entryManager.exitScene();\n  });\n\n  const audioSystem = scene.systems[\"hubs-systems\"].audioSystem;\n  APP.mediaDevicesManager = new MediaDevicesManager(scene, store, audioSystem);\n\n  const performConditionalSignIn = async (predicate, action, signInMessage, onFailure) => {\n    if (predicate()) return action();\n\n    await handleExitTo2DInterstitial(true, () => remountUI({ showSignInDialog: false }));\n\n    remountUI({\n      showSignInDialog: true,\n      signInMessage,\n      onContinueAfterSignIn: async () => {\n        remountUI({ showSignInDialog: false });\n        let actionError = null;\n        if (predicate()) {\n          try {\n            await action();\n          } catch (e) {\n            actionError = e;\n          }\n        } else {\n          actionError = new Error(\"Predicate failed post sign-in\");\n        }\n\n        if (actionError && onFailure) onFailure(actionError);\n        exit2DInterstitialAndEnterVR();\n      },\n      onSignInDialogVisibilityChanged: visible => {\n        if (visible) {\n          remountUI({ showSignInDialog: true });\n        } else {\n          remountUI({ showSignInDialog: false, onContinueAfterSignIn: null });\n        }\n      }\n    });\n  };\n\n  window.APP.pinningHelper = new PinningHelper(hubChannel, authChannel, store, performConditionalSignIn);\n\n  window.addEventListener(\"action_create_avatar\", () => {\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      () => pushHistoryState(history, \"overlay\", \"avatar-editor\"),\n      SignInMessages.createAvatar\n    );\n  });\n\n  scene.addEventListener(\"scene_media_selected\", e => {\n    const sceneInfo = e.detail;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_hub\"),\n      () => hubChannel.updateScene(sceneInfo),\n      SignInMessages.changeScene\n    );\n  });\n\n  remountUI({\n    performConditionalSignIn,\n    embed: isEmbed,\n    showPreload: isEmbed\n  });\n  entryManager.performConditionalSignIn = performConditionalSignIn;\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n  window.dispatchEvent(new CustomEvent(\"hub_channel_ready\"));\n\n  const handleEarlyVRMode = () => {\n    // If VR headset is activated, refreshing page will fire vrdisplayactivate\n    // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n    // to be entered and we haven't entered the room yet.\n    if (scene.is(\"vr-mode\") && !scene.is(\"vr-entered\") && !isMobileVR) {\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n      return true;\n    }\n\n    return false;\n  };\n  remountUI({ availableVREntryTypes: ONLY_SCREEN_AVAILABLE, checkingForDeviceAvailability: true });\n  const availableVREntryTypesPromise = getAvailableVREntryTypes();\n  scene.addEventListener(\"enter-vr\", () => {\n    if (handleEarlyVRMode()) return true;\n\n    if (isMobileVR) {\n      // Optimization, stop drawing UI if not visible\n      remountUI({ hide: true });\n    }\n\n    document.body.classList.add(\"vr-mode\");\n\n    availableVREntryTypesPromise.then(availableVREntryTypes => {\n      // Don't stretch canvas on cardboard, since that's drawing the actual VR view :)\n      if ((!isMobile && !isMobileVR) || availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.yes) {\n        document.body.classList.add(\"vr-mode-stretch\");\n      }\n    });\n  });\n  handleEarlyVRMode();\n\n  // HACK A-Frame 0.9.0 seems to fail to wire up vrdisplaypresentchange early enough\n  // to catch presentation state changes and recognize that an HMD is presenting on startup.\n  window.addEventListener(\n    \"vrdisplaypresentchange\",\n    () => {\n      if (scene.is(\"vr-entered\")) return;\n      if (scene.is(\"vr-mode\")) return;\n\n      const device = AFRAME.utils.device.getVRDisplay();\n\n      if (device && device.isPresenting) {\n        if (!scene.is(\"vr-mode\")) {\n          console.warn(\"Hit A-Frame bug where VR display is presenting but A-Frame has not entered VR mode.\");\n          scene.enterVR();\n        }\n      }\n    },\n    { once: true }\n  );\n\n  scene.addEventListener(\"exit-vr\", () => {\n    document.body.classList.remove(\"vr-mode\");\n    document.body.classList.remove(\"vr-mode-stretch\");\n\n    remountUI({ hide: false });\n\n    // HACK: Oculus browser pauses videos when exiting VR mode, so we need to resume them after a timeout.\n    if (/OculusBrowser/i.test(window.navigator.userAgent)) {\n      document.querySelectorAll(\"[media-video]\").forEach(m => {\n        const videoComponent = m.components[\"media-video\"];\n\n        if (videoComponent) {\n          videoComponent._ignorePauseStateChanges = true;\n\n          setTimeout(() => {\n            const video = videoComponent.video;\n\n            if (video && video.paused && !videoComponent.data.videoPaused) {\n              video.play();\n            }\n\n            videoComponent._ignorePauseStateChanges = false;\n          }, 1000);\n        }\n      });\n    }\n  });\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: reason => {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: reason || ExitReason.exited });\n    }\n  });\n\n  scene.addEventListener(\"leave_room_requested\", () => {\n    entryManager.exitScene();\n    remountUI({ roomUnavailableReason: ExitReason.left });\n  });\n\n  scene.addEventListener(\"hub_closed\", () => {\n    scene.exitVR();\n    entryManager.exitScene();\n    remountUI({ roomUnavailableReason: ExitReason.closed });\n  });\n\n  scene.addEventListener(\"action_camera_recording_started\", () => hubChannel.beginRecording());\n  scene.addEventListener(\"action_camera_recording_ended\", () => hubChannel.endRecording());\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: ExitReason.versionMismatch });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  getReticulumMeta().then(reticulumMeta => {\n    console.log(`Reticulum @ ${reticulumMeta.phx_host}: v${reticulumMeta.version} on ${reticulumMeta.pool}`);\n\n    if (\n      qs.get(\"required_ret_version\") &&\n      (qs.get(\"required_ret_version\") !== reticulumMeta.version || qs.get(\"required_ret_pool\") !== reticulumMeta.pool)\n    ) {\n      remountUI({ roomUnavailableReason: ExitReason.versionMismatch });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  });\n\n  availableVREntryTypesPromise.then(async availableVREntryTypes => {\n    if (isMobileVR) {\n      remountUI({\n        availableVREntryTypes,\n        forcedVREntryType: qsVREntryType || \"vr\",\n        checkingForDeviceAvailability: false\n      });\n\n      if (/Oculus/.test(navigator.userAgent) && \"getVRDisplays\" in navigator) {\n        // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of\n        // Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n        // so we need to resolve that and get the real VRDisplay before entering as well.\n        const displays = await navigator.getVRDisplays();\n        const vrDisplay = displays.length && displays[0];\n        AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n      }\n    } else {\n      const hasVREntryDevice =\n        availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no ||\n        availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n        availableVREntryTypes.daydream !== VR_DEVICE_AVAILABILITY.no;\n\n      remountUI({\n        availableVREntryTypes,\n        forcedVREntryType: qsVREntryType || (!hasVREntryDevice ? \"2d\" : null),\n        checkingForDeviceAvailability: false\n      });\n    }\n  });\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  environmentScene.addEventListener(\n    \"model-loaded\",\n    () => {\n      // Replace renderer with a noop renderer to reduce bot resource usage.\n      if (isBotMode) {\n        runBotMode(scene, entryManager);\n      }\n    },\n    { once: true }\n  );\n\n  environmentScene.addEventListener(\"model-loaded\", ({ detail: { model } }) => {\n    console.log(\"Environment scene has loaded\");\n\n    if (!scene.is(\"entered\")) {\n      setupLobbyCamera();\n    }\n\n    // This will be run every time the environment is changed (including the first load.)\n    remountUI({ environmentSceneLoaded: true });\n    scene.emit(\"environment-scene-loaded\", model);\n\n    // Re-bind the teleporter controls collision meshes in case the scene changed.\n    document.querySelectorAll(\"a-entity[teleporter]\").forEach(x => x.components[\"teleporter\"].queryCollisionEntities());\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n  });\n\n  // Socket disconnects on refresh but we don't want to show exit scene in that scenario.\n  let isReloading = false;\n  window.addEventListener(\"beforeunload\", () => (isReloading = true));\n\n  const socket = await connectToReticulum(isDebug);\n\n  socket.onClose(e => {\n    // We don't currently have an easy way to distinguish between being kicked (server closes socket)\n    // and a variety of other network issues that seem to produce the 1000 closure code, but the\n    // latter are probably more common. Either way, we just tell the user they got disconnected.\n    const NORMAL_CLOSURE = 1000;\n\n    if (e.code === NORMAL_CLOSURE && !isReloading) {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: ExitReason.disconnected });\n    }\n  });\n\n  // Reticulum global channel\n  APP.retChannel = socket.channel(`ret`, { hub_id: hubId });\n  APP.retChannel\n    .join()\n    .receive(\"ok\", data => {\n      subscriptions.setVapidPublicKey(data.vapid_public_key);\n    })\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n\n  APP.hubChannelParamsForPermsToken = permsToken => {\n    return createHubChannelParams({\n      profile: store.state.profile,\n      pushSubscriptionEndpoint,\n      permsToken,\n      isMobile,\n      isMobileVR,\n      isEmbed,\n      hubInviteId: qs.get(\"hub_invite_id\"),\n      authToken: store.state.credentials && store.state.credentials.token\n    });\n  };\n\n  const migrateToNewReticulumServer = async ({ ret_version, ret_pool }, shouldAbandonMigration) => {\n    console.log(`[reconnect] Reticulum deploy detected v${ret_version} on ${ret_pool}.`);\n\n    const didMatchMeta = await tryGetMatchingMeta({ ret_version, ret_pool }, shouldAbandonMigration);\n    if (!didMatchMeta) {\n      console.error(`[reconnect] Failed to reconnect. Did not get meta for v${ret_version} on ${ret_pool}.`);\n      return;\n    }\n\n    console.log(\"[reconnect] Reconnect in progress. Updated reticulum meta.\");\n    const oldSocket = APP.retChannel.socket;\n    const socket = await connectToReticulum(isDebug, oldSocket.params());\n    APP.retChannel = await migrateChannelToSocket(APP.retChannel, socket);\n    await hubChannel.migrateToSocket(socket, APP.hubChannelParamsForPermsToken());\n    authChannel.setSocket(socket);\n    linkChannel.setSocket(socket);\n\n    // Disconnect old socket after a delay to ensure this user is always registered in presence.\n    await sleep(10000);\n    oldSocket.teardown();\n    console.log(\"[reconnect] Reconnection successful.\");\n  };\n\n  const onRetDeploy = (function() {\n    let pendingNotification = null;\n    const hasPendingNotification = function() {\n      return !!pendingNotification;\n    };\n\n    const handleNextMessage = (function() {\n      let isLocked = false;\n      return async function handleNextMessage() {\n        if (isLocked || !pendingNotification) return;\n\n        isLocked = true;\n        const currentNotification = Object.assign({}, pendingNotification);\n        pendingNotification = null;\n        try {\n          await migrateToNewReticulumServer(currentNotification, hasPendingNotification);\n        } catch {\n          console.error(\"Failed to migrate to new reticulum server after deploy.\", currentNotification);\n        } finally {\n          isLocked = false;\n          handleNextMessage();\n        }\n      };\n    })();\n\n    return function onRetDeploy(deployNotification) {\n      // If for some reason we receive multiple deployNotifications, only the\n      // most recent one matters. The rest can be overwritten.\n      pendingNotification = deployNotification;\n      handleNextMessage();\n    };\n  })();\n\n  APP.retChannel.on(\"notice\", data => {\n    if (data.event === \"ret-deploy\") {\n      onRetDeploy(data);\n    }\n  });\n\n  const messageDispatch = new MessageDispatch(scene, entryManager, hubChannel, remountUI, mediaSearchStore);\n  APP.messageDispatch = messageDispatch;\n  document.getElementById(\"avatar-rig\").messageDispatch = messageDispatch;\n\n  const oauthFlowPermsToken = Cookies.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  if (oauthFlowPermsToken) {\n    Cookies.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  }\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, APP.hubChannelParamsForPermsToken(oauthFlowPermsToken));\n  hubChannel.channel = hubPhxChannel;\n  hubChannel.presence = new Presence(hubPhxChannel);\n  const { rawOnJoin, rawOnLeave } = denoisePresence(presenceEventsForHub(events));\n  hubChannel.presence.onJoin(rawOnJoin);\n  hubChannel.presence.onLeave(rawOnLeave);\n  hubChannel.presence.onSync(() => {\n    events.trigger(`hub:sync`, { presence: hubChannel.presence });\n  });\n\n  events.on(`hub:join`, ({ key, meta }) => {\n    scene.emit(\"presence_updated\", {\n      sessionId: key,\n      profile: meta.profile,\n      roles: meta.roles,\n      permissions: meta.permissions,\n      streaming: meta.streaming,\n      recording: meta.recording,\n      hand_raised: meta.hand_raised,\n      typing: meta.typing\n    });\n  });\n  events.on(`hub:join`, ({ key, meta }) => {\n    if (\n      APP.hideHubPresenceEvents ||\n      key === hubChannel.channel.socket.params().session_id ||\n      hubChannel.presence.list().length > NOISY_OCCUPANT_COUNT\n    ) {\n      return;\n    }\n    messageDispatch.receive({\n      type: \"join\",\n      presence: meta.presence,\n      name: meta.profile.displayName\n    });\n  });\n\n  events.on(`hub:leave`, ({ meta }) => {\n    if (APP.hideHubPresenceEvents || hubChannel.presence.list().length > NOISY_OCCUPANT_COUNT) {\n      return;\n    }\n    messageDispatch.receive({\n      type: \"leave\",\n      name: meta.profile.displayName\n    });\n  });\n\n  events.on(`hub:change`, ({ key, previous, current }) => {\n    if (\n      previous.presence === current.presence ||\n      current.presence !== \"room\" ||\n      key === hubChannel.channel.socket.params().session_id\n    ) {\n      return;\n    }\n\n    messageDispatch.receive({\n      type: \"entered\",\n      presence: current.presence,\n      name: current.profile.displayName\n    });\n  });\n  events.on(`hub:change`, ({ previous, current }) => {\n    if (previous.profile.displayName !== current.profile.displayName) {\n      messageDispatch.receive({\n        type: \"display_name_changed\",\n        oldName: previous.profile.displayName,\n        newName: current.profile.displayName\n      });\n    }\n  });\n  events.on(`hub:change`, ({ key, previous, current }) => {\n    if (\n      key === hubChannel.channel.socket.params().session_id &&\n      previous.profile.avatarId !== current.profile.avatarId\n    ) {\n      messageDispatch.log(LogMessageType.avatarChanged);\n    }\n  });\n  events.on(`hub:change`, ({ key, current }) => {\n    scene.emit(\"presence_updated\", {\n      sessionId: key,\n      profile: current.profile,\n      roles: current.roles,\n      permissions: current.permissions,\n      streaming: current.streaming,\n      recording: current.recording,\n      hand_raised: current.hand_raised,\n      typing: current.typing\n    });\n  });\n\n  // We need to be able to wait for initial presence syncs across reconnects and socket migrations,\n  // so we create this object in the outer scope and assign it a new promise on channel join.\n  const presenceSync = {\n    promise: null,\n    resolve: null\n  };\n  events.on(\"hub:sync\", () => {\n    presenceSync.resolve();\n  });\n  events.on(`hub:sync`, () => {\n    APP.hideHubPresenceEvents = false;\n  });\n  events.on(`hub:sync`, updateVRHudPresenceCount);\n  events.on(`hub:sync`, ({ presence }) => {\n    updateSceneCopresentState(presence, scene);\n  });\n  events.on(`hub:sync`, ({ presence }) => {\n    remountUI({\n      sessionId: socket.params().session_id,\n      presences: presence.state,\n      entryDisallowed: !hubChannel.canEnterRoom(uiProps.hub)\n    });\n  });\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      APP.hideHubPresenceEvents = true;\n      presenceSync.promise = new Promise(resolve => {\n        presenceSync.resolve = resolve;\n      });\n\n      socket.params().session_id = data.session_id;\n      socket.params().session_token = data.session_token;\n\n      const permsToken = oauthFlowPermsToken || data.perms_token;\n      hubChannel.setPermissionsFromToken(permsToken);\n\n      subscriptions.setHubChannel(hubChannel);\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n\n      remountUI({\n        hubIsBound: data.hub_requires_oauth,\n        initialIsFavorited: data.subscriptions.favorites\n      });\n\n      await presenceSync.promise;\n      handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data, permsToken, hubChannel, events);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: ExitReason.closed });\n      } else if (res.reason === \"oauth_required\") {\n        entryManager.exitScene();\n        remountUI({ oauthInfo: res.oauth_info, showOAuthScreen: true });\n      } else if (res.reason === \"join_denied\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: ExitReason.denied });\n      }\n\n      console.error(res);\n    });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body, from }) => {\n    const getAuthor = () => {\n      const userInfo = hubChannel.presence.state[session_id];\n      if (from) {\n        return from;\n      } else if (userInfo) {\n        return userInfo.metas[0].profile.displayName;\n      } else {\n        return \"Mystery user\";\n      }\n    };\n\n    const name = getAuthor();\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = {\n      name,\n      type,\n      body,\n      maySpawn,\n      sessionId: session_id,\n      sent: session_id === socket.params().session_id\n    };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    messageDispatch.receive(incomingMessage);\n  });\n\n  hubPhxChannel.on(\"hub_refresh\", ({ session_id, hubs, stale_fields }) => {\n    const hub = hubs[0];\n    const userInfo = hubChannel.presence.state[session_id];\n    const displayName = (userInfo && userInfo.metas[0].profile.displayName) || \"API\";\n\n    window.APP.hub = hub;\n    updateUIForHub(hub, hubChannel);\n\n    if (\n      stale_fields.includes(\"scene\") ||\n      stale_fields.includes(\"scene_listing\") ||\n      stale_fields.includes(\"default_environment_gltf_bundle_url\")\n    ) {\n      const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n\n      fader.fadeOut().then(() => {\n        scene.emit(\"reset_scene\");\n        updateEnvironmentForHub(hub, entryManager);\n      });\n\n      messageDispatch.receive({\n        type: \"scene_changed\",\n        name: displayName,\n        sceneName: hub.scene ? hub.scene.name : \"a custom URL\"\n      });\n    }\n\n    if (stale_fields.includes(\"member_permissions\")) {\n      hubChannel.fetchPermissions();\n    }\n\n    if (stale_fields.includes(\"name\")) {\n      const titleParts = document.title.split(\" | \"); // Assumes title has | trailing site name\n      titleParts[0] = hub.name;\n      document.title = titleParts.join(\" | \");\n\n      // Re-write the slug in the browser history\n      const pathParts = history.location.pathname.split(\"/\");\n      const oldSlug = pathParts[1];\n      const { search, state } = history.location;\n      const pathname = history.location.pathname.replace(`/${oldSlug}`, `/${hub.slug}`);\n\n      history.replace({ pathname, search, state });\n\n      messageDispatch.receive({\n        type: \"hub_name_changed\",\n        name: displayName,\n        hubName: hub.name\n      });\n    }\n\n    if (hub.entry_mode === \"deny\") {\n      scene.emit(\"hub_closed\");\n    }\n\n    scene.emit(\"hub_updated\", { hub });\n  });\n\n  hubPhxChannel.on(\"permissions_updated\", () => hubChannel.fetchPermissions());\n\n  hubPhxChannel.on(\"mute\", ({ session_id }) => {\n    if (session_id === NAF.clientId) {\n      APP.mediaDevicesManager.micEnabled = false;\n    }\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","// Stores a key in localStorage and registeres a listener for the same key being set (by another tab).\n// When detected, fire a \"concurrentload\" event.\nexport default function detectConcurrentLoad(instanceKey = \"global\") {\n  const key = `___concurrent_load_detector_${instanceKey}`;\n  localStorage.setItem(key, JSON.stringify({ started_at: new Date() }));\n  const onStorageEvent = e => {\n    if (e.key !== key) return;\n    window.dispatchEvent(new CustomEvent(\"concurrentload\"));\n    window.removeEventListener(\"storage\", onStorageEvent);\n  };\n  window.addEventListener(\"storage\", onStorageEvent);\n}\n","export function emitter() {\n  let bindings = [];\n  let bindingRef = 0;\n  const on = (event, callback) => {\n    const ref = bindingRef++;\n    bindings.push({ event, ref, callback });\n    return ref;\n  };\n  const off = (event, ref) => {\n    bindings = bindings.filter(bind => {\n      return !(bind.event === event && (typeof ref === \"undefined\" || ref === bind.ref));\n    });\n  };\n  const trigger = (event, payload) => {\n    bindings.filter(bind => bind.event === event).forEach(bind => {\n      bind.callback(payload);\n    });\n  };\n  const getBindings = () => {\n    return bindings;\n  };\n  return {\n    on,\n    off,\n    trigger,\n    getBindings\n  };\n}\n","import { useEffect, useState } from \"react\";\n\n// The page is styled by default not to have any outlines on selected input elements.\n// When the user presses the tab key the keyboardUserClass is added to the body and all outlines are re-enabled.\n// The next time you click this keyboardUserClass will be removed, removing the outline styles.\n// This lets us provide a clean look for mouse users, while still maintaining accessibility for keyboard users.\nexport function useAccessibleOutlineStyle(keyboardUserClass = \"keyboard-user\") {\n  const [keyboardUser, setKeyboardUser] = useState(false);\n\n  useEffect(\n    () => {\n      function onMouseDown() {\n        if (keyboardUser) {\n          document.body.classList.remove(keyboardUserClass);\n          setKeyboardUser(false);\n        }\n      }\n\n      function onKeyDown(e) {\n        if (e.key === \"Tab\" && !keyboardUser) {\n          document.body.classList.add(keyboardUserClass);\n          setKeyboardUser(true);\n        }\n      }\n\n      window.addEventListener(\"keydown\", onKeyDown);\n      window.addEventListener(\"mousedown\", onMouseDown);\n\n      return () => {\n        window.removeEventListener(\"keydown\", onKeyDown);\n        window.removeEventListener(\"mousedown\", onMouseDown);\n      };\n    },\n    [keyboardUserClass, keyboardUser]\n  );\n}\n","export function isTagged(el, tag) {\n  return el && el.components && el.components.tags && el.components.tags.data[tag];\n}\n\nexport function setTag(el, tag, value = true) {\n  return (el.components.tags.data[tag] = !!value);\n}\n\nAFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    togglesHoveredActionSet: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false },\n    isStatic: { default: false },\n    inspectable: { default: false },\n    preventAudioBoost: { default: false },\n    ignoreSpaceBubble: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n  },\n\n  remove() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (interaction.isHeld(this.el)) {\n      interaction.release(this.el);\n      this.el.sceneEl.systems[\"hubs-systems\"].constraintsSystem.release(this.el);\n    }\n  }\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hide-lg\":\"style-utils__hide-lg__1h-ZJ\",\"hideLg\":\"style-utils__hide-lg__1h-ZJ\",\"show-lg\":\"style-utils__show-lg__2vGu-\",\"showLg\":\"style-utils__show-lg__2vGu-\",\"margin-0\":\"style-utils__margin-0__3fL3L\",\"margin0\":\"style-utils__margin-0__3fL3L\",\"textError\":\"style-utils__textError__2IWPp\",\"xs-margin-y\":\"style-utils__xs-margin-y__3MTs5\",\"xsMarginY\":\"style-utils__xs-margin-y__3MTs5\",\"xs-margin-r\":\"style-utils__xs-margin-r__2kJ2o\",\"xsMarginR\":\"style-utils__xs-margin-r__2kJ2o\",\"xs-margin-l\":\"style-utils__xs-margin-l__2X0bY\",\"xsMarginL\":\"style-utils__xs-margin-l__2X0bY\",\"xs-margin-bottom\":\"style-utils__xs-margin-bottom__2DGBy\",\"xsMarginBottom\":\"style-utils__xs-margin-bottom__2DGBy\",\"xs-margin-top\":\"style-utils__xs-margin-top__e8ZA4\",\"xsMarginTop\":\"style-utils__xs-margin-top__e8ZA4\",\"xs-padding\":\"style-utils__xs-padding__29trR\",\"xsPadding\":\"style-utils__xs-padding__29trR\",\"xs-wrap-margin\":\"style-utils__xs-wrap-margin__z2lYp\",\"xsWrapMargin\":\"style-utils__xs-wrap-margin__z2lYp\",\"sm-margin-y\":\"style-utils__sm-margin-y__2DMkm\",\"smMarginY\":\"style-utils__sm-margin-y__2DMkm\",\"sm-margin-r\":\"style-utils__sm-margin-r__2_zB3\",\"smMarginR\":\"style-utils__sm-margin-r__2_zB3\",\"sm-margin-l\":\"style-utils__sm-margin-l__1PIrH\",\"smMarginL\":\"style-utils__sm-margin-l__1PIrH\",\"sm-margin-bottom\":\"style-utils__sm-margin-bottom__2asWL\",\"smMarginBottom\":\"style-utils__sm-margin-bottom__2asWL\",\"sm-margin-top\":\"style-utils__sm-margin-top__1MnOX\",\"smMarginTop\":\"style-utils__sm-margin-top__1MnOX\",\"sm-padding\":\"style-utils__sm-padding__2SBKS\",\"smPadding\":\"style-utils__sm-padding__2SBKS\",\"sm-wrap-margin\":\"style-utils__sm-wrap-margin__2I2Nn\",\"smWrapMargin\":\"style-utils__sm-wrap-margin__2I2Nn\",\"md-margin-y\":\"style-utils__md-margin-y__2Jm84\",\"mdMarginY\":\"style-utils__md-margin-y__2Jm84\",\"md-margin-r\":\"style-utils__md-margin-r__dLXFG\",\"mdMarginR\":\"style-utils__md-margin-r__dLXFG\",\"md-margin-l\":\"style-utils__md-margin-l__2Go_A\",\"mdMarginL\":\"style-utils__md-margin-l__2Go_A\",\"md-margin-bottom\":\"style-utils__md-margin-bottom__2qTtf\",\"mdMarginBottom\":\"style-utils__md-margin-bottom__2qTtf\",\"md-margin-top\":\"style-utils__md-margin-top__1fgTa\",\"mdMarginTop\":\"style-utils__md-margin-top__1fgTa\",\"md-padding\":\"style-utils__md-padding__3hj3E\",\"mdPadding\":\"style-utils__md-padding__3hj3E\",\"md-wrap-margin\":\"style-utils__md-wrap-margin__FJWWt\",\"mdWrapMargin\":\"style-utils__md-wrap-margin__FJWWt\",\"lg-margin-y\":\"style-utils__lg-margin-y__2ZVqz\",\"lgMarginY\":\"style-utils__lg-margin-y__2ZVqz\",\"lg-margin-r\":\"style-utils__lg-margin-r__1C1HX\",\"lgMarginR\":\"style-utils__lg-margin-r__1C1HX\",\"lg-margin-l\":\"style-utils__lg-margin-l__2YNJk\",\"lgMarginL\":\"style-utils__lg-margin-l__2YNJk\",\"lg-margin-bottom\":\"style-utils__lg-margin-bottom__3Qm2t\",\"lgMarginBottom\":\"style-utils__lg-margin-bottom__3Qm2t\",\"lg-margin-top\":\"style-utils__lg-margin-top__1o2QK\",\"lgMarginTop\":\"style-utils__lg-margin-top__1o2QK\",\"lg-padding\":\"style-utils__lg-padding__36YG1\",\"lgPadding\":\"style-utils__lg-padding__36YG1\",\"lg-wrap-margin\":\"style-utils__lg-wrap-margin__2AX_R\",\"lgWrapMargin\":\"style-utils__lg-wrap-margin__2AX_R\",\"xl-margin-y\":\"style-utils__xl-margin-y__2Gii-\",\"xlMarginY\":\"style-utils__xl-margin-y__2Gii-\",\"xl-margin-r\":\"style-utils__xl-margin-r__1iqHb\",\"xlMarginR\":\"style-utils__xl-margin-r__1iqHb\",\"xl-margin-l\":\"style-utils__xl-margin-l__3aApC\",\"xlMarginL\":\"style-utils__xl-margin-l__3aApC\",\"xl-margin-bottom\":\"style-utils__xl-margin-bottom__4h7Sa\",\"xlMarginBottom\":\"style-utils__xl-margin-bottom__4h7Sa\",\"xl-margin-top\":\"style-utils__xl-margin-top__3pnM3\",\"xlMarginTop\":\"style-utils__xl-margin-top__3pnM3\",\"xl-padding\":\"style-utils__xl-padding__TwaRF\",\"xlPadding\":\"style-utils__xl-padding__TwaRF\",\"xl-wrap-margin\":\"style-utils__xl-wrap-margin__2oi2E\",\"xlWrapMargin\":\"style-utils__xl-wrap-margin__2oi2E\",\"flex-basis-10\":\"style-utils__flex-basis-10__3pkwD\",\"flexBasis10\":\"style-utils__flex-basis-10__3pkwD\",\"flex-basis-20\":\"style-utils__flex-basis-20__Yt4qI\",\"flexBasis20\":\"style-utils__flex-basis-20__Yt4qI\",\"flex-basis-30\":\"style-utils__flex-basis-30__1dtJW\",\"flexBasis30\":\"style-utils__flex-basis-30__1dtJW\",\"flex-basis-40\":\"style-utils__flex-basis-40__2IQLj\",\"flexBasis40\":\"style-utils__flex-basis-40__2IQLj\",\"flex-basis-50\":\"style-utils__flex-basis-50__3n2Gs\",\"flexBasis50\":\"style-utils__flex-basis-50__3n2Gs\",\"flex-basis-60\":\"style-utils__flex-basis-60__itfI3\",\"flexBasis60\":\"style-utils__flex-basis-60__itfI3\",\"flex-basis-70\":\"style-utils__flex-basis-70__4ZURo\",\"flexBasis70\":\"style-utils__flex-basis-70__4ZURo\",\"flex-basis-80\":\"style-utils__flex-basis-80__B0H9k\",\"flexBasis80\":\"style-utils__flex-basis-80__B0H9k\"};","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl, getDirectReticulumFetchUrl } from \"./phoenix-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { updateMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\nimport { proxiedUrlFor, guessContentType } from \"../utils/media-url-utils\";\nimport { isIOS as detectIOS } from \"./is-mobile\";\nimport Linkify from \"linkify-it\";\nimport tlds from \"tlds\";\n\nimport anime from \"animejs\";\n\nexport const MediaType = {\n  ALL: \"all\",\n  ALL_2D: \"all-2d\",\n  MODEL: \"model\",\n  IMAGE: \"image\",\n  VIDEO: \"video\",\n  PDF: \"pdf\"\n};\n\nconst linkify = Linkify();\nlinkify.tlds(tlds);\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\nconst getDirectMediaAPIEndpoint = () => getDirectReticulumFetchUrl(\"/api/v1/media\");\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobile();\n\n// Map<String, Promise<Object>\nconst resolveUrlCache = new Map();\nexport const getDefaultResolveQuality = (is360 = false) => {\n  const useLowerQuality = isMobile || isMobileVR;\n  return !is360 ? (useLowerQuality ? \"low\" : \"high\") : useLowerQuality ? \"low_360\" : \"high_360\";\n};\n\nexport const resolveUrl = async (url, quality = null, version = 1, bustCache) => {\n  const key = `${url}_${version}`;\n  if (!bustCache && resolveUrlCache.has(key)) return resolveUrlCache.get(key);\n\n  const resultPromise = fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, quality: quality || getDefaultResolveQuality() }, version })\n  }).then(async response => {\n    if (!response.ok) {\n      const message = `Error resolving url \"${url}\":`;\n      try {\n        const body = await response.text();\n        throw new Error(message + \" \" + body);\n      } catch (e) {\n        throw new Error(message + \" \" + response.statusText);\n      }\n    }\n    return response.json();\n  });\n\n  resolveUrlCache.set(key, resultPromise);\n  return resultPromise;\n};\n\nexport const upload = (file, desiredContentType) => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n\n  if (desiredContentType) {\n    formData.append(\"desired_content_type\", desiredContentType);\n  }\n\n  // To eliminate the extra hop and avoid proxy timeouts, upload files directly\n  // to a reticulum host.\n  return fetch(getDirectMediaAPIEndpoint(), {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nfunction getLatestMediaVersionOfSrc(src) {\n  const els = document.querySelectorAll(\"[media-loader]\");\n  let version = 1;\n\n  for (const el of els) {\n    const loader = el.components[\"media-loader\"];\n\n    if (loader.data && loader.data.src === src) {\n      version = Math.max(version, loader.data.version);\n    }\n  }\n\n  return version;\n}\n\nexport function coerceToUrl(urlOrText) {\n  if (!linkify.test(urlOrText)) return urlOrText;\n\n  // See: https://github.com/Soapbox/linkifyjs/blob/master/src/linkify.js#L52\n  return urlOrText.indexOf(\"://\") >= 0 ? urlOrText : `https://${urlOrText}`;\n}\n\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  fitToBox = false,\n  animate = true,\n  mediaOptions = {},\n  networked = true,\n  parentEl = null,\n  linkedEl = null\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n\n  if (networked) {\n    entity.setAttribute(\"networked\", { template: template });\n  } else {\n    const templateBody = document\n      .importNode(document.body.querySelector(template).content, true)\n      .firstElementChild.cloneNode(true);\n    const elAttrs = templateBody.attributes;\n\n    // Merge root element attributes with this entity\n    for (let attrIdx = 0; attrIdx < elAttrs.length; attrIdx++) {\n      entity.setAttribute(elAttrs[attrIdx].name, elAttrs[attrIdx].value);\n    }\n\n    // Append all child elements\n    while (templateBody.firstElementChild) {\n      entity.appendChild(templateBody.firstElementChild);\n    }\n  }\n\n  const needsToBeUploaded = src instanceof File;\n\n  // If we're re-pasting an existing src in the scene, we should use the latest version\n  // seen across any other entities. Otherwise, start with version 1.\n  const version = getLatestMediaVersionOfSrc(src);\n\n  entity.setAttribute(\"media-loader\", {\n    fitToBox,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? coerceToUrl(src) || src : \"\",\n    version,\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded,\n    linkedEl,\n    mediaOptions\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  (parentEl || scene).appendChild(entity);\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    // Video camera videos are converted to mp4 for compatibility\n    const desiredContentType = contentSubtype === \"video-camera\" ? \"video/mp4\" : src.type || guessContentType(src.name);\n\n    upload(src, desiredContentType)\n      .then(response => {\n        const srcUrl = new URL(proxiedUrlFor(response.origin));\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport const cloneMedia = (sourceEl, template, src = null, networked = true, link = false, parentEl = null) => {\n  if (!src) {\n    ({ src } = sourceEl.components[\"media-loader\"].data);\n  }\n\n  const { contentSubtype, fitToBox, mediaOptions } = sourceEl.components[\"media-loader\"].data;\n\n  return addMedia(\n    src,\n    template,\n    ObjectContentOrigins.URL,\n    contentSubtype,\n    true,\n    fitToBox,\n    false,\n    mediaOptions,\n    networked,\n    parentEl,\n    link ? sourceEl : null\n  );\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material || object.isTroikaText) return;\n\n    // TODO this does not really belong here\n    object.reflectionProbeMode = \"dynamic\";\n\n    updateMaterials(object, material => {\n      if (material.hubs_InjectedCustomShaderChunks) return material;\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el &&\n        (object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\"))\n      )\n        return material;\n\n      // Used when the object is batched\n      if (batchManagerSystem.batchingEnabled) {\n        batchManagerSystem.meshToEl.set(object, obj.el);\n      }\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = (shader, renderer) => {\n        if (shader.vertexShader.indexOf(\"#include <skinning_vertex>\") == -1) return;\n\n        if (material.onBeforeCompile) {\n          material.onBeforeCompile(shader, renderer);\n        }\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        shader.vertexShader =\n          [\n            \"varying vec3 hubs_WorldPosition;\",\n            \"uniform bool hubs_IsFrozen;\",\n            \"uniform bool hubs_HighlightInteractorOne;\",\n            \"uniform bool hubs_HighlightInteractorTwo;\\n\"\n          ].join(\"\\n\") +\n          shader.vertexShader.replace(\n            \"#include <skinning_vertex>\",\n            `#include <skinning_vertex>\n             if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n              vec4 wt = modelMatrix * vec4(transformed, 1);\n\n              // Used in the fragment shader below.\n              hubs_WorldPosition = wt.xyz;\n            }`\n          );\n\n        shader.fragmentShader =\n          [\n            \"varying vec3 hubs_WorldPosition;\",\n            \"uniform bool hubs_IsFrozen;\",\n            \"uniform bool hubs_EnableSweepingEffect;\",\n            \"uniform vec2 hubs_SweepParams;\",\n            \"uniform bool hubs_HighlightInteractorOne;\",\n            \"uniform vec3 hubs_InteractorOnePos;\",\n            \"uniform bool hubs_HighlightInteractorTwo;\",\n            \"uniform vec3 hubs_InteractorTwoPos;\",\n            \"uniform float hubs_Time;\\n\"\n          ].join(\"\\n\") +\n          shader.fragmentShader.replace(\n            \"#include <output_fragment>\",\n            \"#include <output_fragment>\\n\" + mediaHighlightFrag\n          );\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      newMaterial.hubs_InjectedCustomShaderChunks = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function addAndArrangeMedia(el, media, contentSubtype, snapCount, mirrorOrientation = false, distance = 0.75) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * distance,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * distance,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  const handler = () => {\n    entity.object3D.visible = true;\n    entity.setAttribute(\"animation__photo_pos\", {\n      property: \"position\",\n      dur: 800,\n      from: { x: pos.x, y: pos.y, z: pos.z },\n      to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n      easing: \"easeOutElastic\"\n    });\n  };\n\n  let eventType = null;\n\n  if (contentSubtype.startsWith(\"photo\")) {\n    entity.addEventListener(\"image-loaded\", handler, { once: true });\n    eventType = \"photo\";\n  } else if (contentSubtype.startsWith(\"video\")) {\n    entity.addEventListener(\"video-loaded\", handler, { once: true });\n    eventType = \"video\";\n  } else {\n    console.error(\"invalid type \" + contentSubtype);\n    return;\n  }\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(`${eventType}_taken`, entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url, filter) {\n  let texture;\n\n  if (filter) {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    const load = new Promise(res => image.addEventListener(\"load\", res, { once: true }));\n    image.src = url;\n    await load;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0);\n    await filter(ctx, image.width, image.height);\n\n    texture = new THREE.CanvasTexture(canvas);\n  } else {\n    try {\n      texture = await textureLoader.loadAsync(url);\n    } catch (e) {\n      throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n    }\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n\nconst isIOS = detectIOS();\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nexport function createVideoOrAudioEl(type) {\n  const el = document.createElement(type);\n  el.setAttribute(\"playsinline\", \"\");\n  el.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  el.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  el.muted = isIOS;\n  el.preload = \"auto\";\n  el.crossOrigin = \"anonymous\";\n\n  return el;\n}\n\nexport function addMeshScaleAnimation(mesh, initialScale, onComplete) {\n  const step = (function() {\n    const lastValue = {};\n    return function(anim) {\n      const value = anim.animatables[0].target;\n\n      value.x = Math.max(Number.MIN_VALUE, value.x);\n      value.y = Math.max(Number.MIN_VALUE, value.y);\n      value.z = Math.max(Number.MIN_VALUE, value.z);\n\n      // For animation timeline.\n      if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n        return;\n      }\n\n      lastValue.x = value.x;\n      lastValue.y = value.y;\n      lastValue.z = value.z;\n\n      mesh.scale.set(value.x, value.y, value.z);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })();\n\n  const config = {\n    duration: 400,\n    easing: \"easeOutElastic\",\n    elasticity: 400,\n    loop: 0,\n    round: false,\n    x: mesh.scale.x,\n    y: mesh.scale.y,\n    z: mesh.scale.z,\n    targets: [initialScale],\n    update: anim => step(anim),\n    complete: anim => {\n      step(anim);\n      if (onComplete) onComplete();\n    }\n  };\n\n  mesh.scale.copy(initialScale);\n  mesh.matrixNeedsUpdate = true;\n\n  return anime(config);\n}\n\nexport function closeExistingMediaMirror() {\n  const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n  // Remove old mirror target media element\n  if (mirrorTarget.firstChild) {\n    mirrorTarget.firstChild.setAttribute(\"animation__remove\", {\n      property: \"scale\",\n      dur: 200,\n      to: { x: 0.01, y: 0.01, z: 0.01 },\n      easing: \"easeInQuad\"\n    });\n\n    return new Promise(res => {\n      mirrorTarget.firstChild.addEventListener(\"animationcomplete\", () => {\n        mirrorTarget.removeChild(mirrorTarget.firstChild);\n        mirrorTarget.parentEl.object3D.visible = false;\n        res();\n      });\n    });\n  }\n}\n\nexport function hasAudioTracks(el) {\n  if (!el) return false;\n\n  // `audioTracks` is the \"correct\" way to check this but is not implemented by most browsers\n  // The rest of the checks are a bit of a race condition, but when loading videos we wait for\n  // the first frame to load, so audio should exist by then. We special case audio-only by checkin\n  // for a 0 size video. Not great...\n  if (el.audioTracks !== undefined) {\n    return el.audioTracks.length > 0;\n  } else if (el.videoWidth === 0 && el.videoHeight === 0) {\n    return true;\n  } else if (el.mozHasAudio !== undefined) {\n    return el.mozHasAudio;\n  } else if (el.webkitAudioDecodedByteCount !== undefined) {\n    return el.webkitAudioDecodedByteCount > 0;\n  } else {\n    return false;\n  }\n}\n","import nextTick from \"../utils/next-tick\";\nimport { updateMaterials, mapMaterials, convertStandardMaterial } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode, cloneObject3D } from \"../utils/three-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { KTX2Loader } from \"three/examples/jsm/loaders/KTX2Loader\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\nimport { BasisTextureLoader } from \"three/examples/jsm/loaders/BasisTextureLoader\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    console.warn(`Inflator failed. \"${componentName}\" component does not exist.`);\n    return;\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n\n      if (\n        geo.attributes.position.isInterleavedBufferAttribute ||\n        (geo.index && geo.index.isInterleavedBufferAttribute)\n      ) {\n        console.warn(\"Skipping generaton of MeshBVH for interleaved geoemtry as it is not supported\");\n        return;\n      }\n\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.scene.animations,\n    scene: cloneObject3D(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\nfunction getHubsComponentsFromMaterial(node) {\n  const material = node.material;\n\n  if (!material) {\n    return null;\n  }\n\n  return getHubsComponents(material);\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n  const materialComponents = getHubsComponentsFromMaterial(node);\n\n  const nodeHasBehavior = !!entityComponents || !!materialComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that templates can be attached to the correct AFrame entity.\n  el.object3D.name = node.name;\n\n  // Set the uuid of the `THREE.Group` to match the uuid of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.uuid = node.uuid;\n  node.uuid = THREE.Math.generateUUID();\n\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  if (node.morphTargetInfluences) {\n    node.parent.morphTargetInfluences = node.morphTargetInfluences;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nasync function inflateComponents(inflatedEntity, indexToEntityMap) {\n  let isFirstInflation = true;\n  const objectInflations = [];\n\n  inflatedEntity.object3D.traverse(async object3D => {\n    const objectInflation = {};\n    objectInflation.promise = new Promise(resolve => (objectInflation.resolve = resolve));\n    objectInflations.push(objectInflation);\n\n    if (!isFirstInflation) {\n      await objectInflations.shift().promise;\n    }\n    isFirstInflation = false;\n\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    function resolveNodeRefs(componentData) {\n      for (const propName in componentData) {\n        const value = componentData[propName];\n        const type = value?.__mhc_link_type;\n        if (type === \"node\" && value.index !== undefined) {\n          if (indexToEntityMap[value.index]) {\n            componentData[propName] = indexToEntityMap[value.index].object3D;\n          } else {\n            console.warn(\"inflateComponents: invalid node reference\", propName);\n            componentData[propName] = null;\n          }\n        }\n      }\n      return componentData;\n    }\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(\n            el,\n            componentName,\n            resolveNodeRefs(entityComponents[prop]),\n            entityComponents,\n            indexToEntityMap\n          );\n        }\n      }\n    }\n\n    const materialComponents = getHubsComponentsFromMaterial(object3D);\n\n    if (materialComponents && el) {\n      for (const prop in materialComponents) {\n        if (materialComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(\n            el,\n            componentName,\n            resolveNodeRefs(materialComponents[prop]),\n            materialComponents,\n            indexToEntityMap\n          );\n        }\n      }\n    }\n\n    objectInflation.resolve();\n  });\n\n  await objectInflations.shift().promise;\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction getHubsComponentsExtension(node) {\n  if (node.extensions && node.extensions.MOZ_hubs_components) {\n    return node.extensions.MOZ_hubs_components;\n  } else if (node.extensions && node.extensions.HUBS_components) {\n    return node.extensions.HUBS_components;\n  } else if (node.extras && node.extras.gltfExtensions && node.extras.gltfExtensions.MOZ_hubs_components) {\n    return node.extras.gltfExtensions.MOZ_hubs_components;\n  }\n}\n\n// Versions are documented here: https://github.com/mozilla/hubs/wiki/MOZ_hubs_components-Changelog\n// Make sure to update the wiki and Spoke when bumping a version\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      const components = getHubsComponentsExtension(node);\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      } else if (\n        oldHeightfieldNode.extras &&\n        oldHeightfieldNode.extras.gltfExtensions &&\n        oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components\n      ) {\n        delete oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components;\n      }\n    }\n  }\n\n  if (version < 4) {\n    // Lights prior to version 4 should treat range === 0 as if it has zero decay\n    if (json.nodes) {\n      for (const node of json.nodes) {\n        const components = getHubsComponentsExtension(node);\n\n        if (!components) {\n          continue;\n        }\n\n        const light = components[\"spot-light\"] || components[\"point-light\"];\n\n        if (light && light.range === 0) {\n          light.decay = 0;\n        }\n      }\n    }\n  }\n}\n\nlet ktxLoader;\nlet dracoLoader;\n\nclass GLTFHubsPlugin {\n  constructor(parser, jsonPreprocessor) {\n    this.parser = parser;\n    this.jsonPreprocessor = jsonPreprocessor;\n\n    // We override glTF parser textureLoader with our HubsTextureLoader for\n    // 1. Clean up the texture image related resources after it is uploaded to WebGL texture\n    // 2. Use ImageBitmapLoader if it is available. The latest official Three.js (r128) glTF loader\n    //    attempts to use ImageBitmapLoader if it is avaiable except for Firefox.\n    //    But we want to use ImageBitmapLoader even for Firefox so we need this overriding hack.\n    // But overriding the textureLoader is hacky and it can cause future potential problems\n    // especially in upstraming Three.js. So ideally we should replace this hack\n    // with the one using more proper APIs like plugin system at some point.\n    // Note: Be careful when replacing our Three.js fork with the official upstraming one that\n    //       the latest ImageBitmapLoader passes the second argument to createImageBitmap()\n    //       but currently createImageBitmap() on Firefox fails if the second argument is defined.\n    //       https://bugzilla.mozilla.org/show_bug.cgi?id=1367251\n    //       and this is the reason why the official glTF loader doesn't use ImageBitmapLoader\n    //       for Firefox. We will need a workaround for that.\n    parser.textureLoader = new HubsTextureLoader(parser.options.manager);\n  }\n\n  beforeRoot() {\n    const parser = this.parser;\n    const jsonPreprocessor = this.jsonPreprocessor;\n\n    //\n    if (jsonPreprocessor) {\n      parser.json = jsonPreprocessor(parser.json);\n    }\n\n    // Ideally Hubs components stuffs should be handled in MozHubsComponents plugin?\n    let version = 0;\n    if (\n      parser.json.extensions &&\n      parser.json.extensions.MOZ_hubs_components &&\n      parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n    ) {\n      version = parser.json.extensions.MOZ_hubs_components.version;\n    }\n    runMigration(version, parser.json);\n\n    // Note: Here may be rewritten with the one with parser.associations\n    const nodes = parser.json.nodes;\n    if (nodes) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (!node.extras) {\n          node.extras = {};\n        }\n\n        node.extras.gltfIndex = i;\n      }\n    }\n  }\n\n  afterRoot(gltf) {\n    gltf.scene.traverse(object => {\n      // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n      // @TODO: Should this be fixed in the gltf loader?\n      object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n      const materialQuality = window.APP.store.state.preferences.materialQualitySetting;\n      updateMaterials(object, material => convertStandardMaterial(material, materialQuality));\n    });\n\n    // Replace animation target node name with the node uuid.\n    // I assume track name is 'nodename.property'.\n    if (gltf.animations) {\n      for (const animation of gltf.animations) {\n        for (const track of animation.tracks) {\n          const parsedPath = THREE.PropertyBinding.parseTrackName(track.name);\n          for (const scene of gltf.scenes) {\n            const node = THREE.PropertyBinding.findNode(scene, parsedPath.nodeName);\n            if (node) {\n              track.name = track.name.replace(/^[^.]*\\./, node.uuid + \".\");\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    //\n    gltf.scene.animations = gltf.animations;\n  }\n}\n\nclass GLTFHubsComponentsExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_hubs_components\";\n  }\n\n  afterRoot({ scenes, parser }) {\n    const deps = [];\n\n    const resolveComponents = (gltfRootType, obj) => {\n      const idx = parser.associations.get(obj)?.[gltfRootType];\n      if (idx === undefined) return;\n      const ext = parser.json[gltfRootType][idx].extensions?.[this.name];\n      if (!ext) return;\n\n      // TODO putting this into userData is a bit silly, we should just inflate here, but entities need to be inflated first...\n      obj.userData.gltfExtensions = Object.assign(obj.userData.gltfExtensions || {}, {\n        MOZ_hubs_components: ext\n      });\n\n      for (const componentName in ext) {\n        const props = ext[componentName];\n        for (const propName in props) {\n          const value = props[propName];\n          const type = value?.__mhc_link_type;\n          if (type && value.index !== undefined) {\n            deps.push(\n              parser.getDependency(type, value.index).then(loadedDep => {\n                // TODO similar to above, this logic being spread out in multiple places is not great...\n                // Node refences are assumed to always be in the scene graph. These referneces are late-resolved in inflateComponents\n                // otherwise they will need to be updated when cloning (which happens as part of caching).\n                if (type === \"node\") return;\n\n                if (type === \"texture\" && !parser.json.textures[value.index].extensions?.MOZ_texture_rgbe) {\n                  // For now assume all non HDR textures linked in hubs components are sRGB.\n                  // We can allow this to be overriden later if needed\n                  loadedDep.encoding = THREE.sRGBEncoding;\n                }\n\n                props[propName] = loadedDep;\n\n                return loadedDep;\n              })\n            );\n          }\n        }\n      }\n    };\n\n    for (let i = 0; i < scenes.length; i++) {\n      // TODO this should be done by GLTLoader\n      parser.associations.set(scenes[i], { scenes: i });\n      scenes[i].traverse(obj => {\n        resolveComponents(\"scenes\", obj);\n        resolveComponents(\"nodes\", obj);\n        mapMaterials(obj, resolveComponents.bind(this, \"materials\"));\n      });\n    }\n\n    return Promise.all(deps);\n  }\n}\n\nclass GLTFHubsLightMapExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_lightmap\";\n  }\n\n  // @TODO: Ideally we should use extendMaterialParams hook.\n  //        But the current official glTF loader doesn't fire extendMaterialParams\n  //        hook for unlit and specular-glossiness materials.\n  //        So using loadMaterial hook as workaround so far.\n  //        Cons is loadMaterial hook is fired as _invokeOne so\n  //        if other plugins defining loadMaterial is registered\n  //        there is a chance that this light map extension handler isn't called.\n  //        The glTF loader should be updated to remove the limitation.\n  loadMaterial(materialIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const materialDef = json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extensionDef = materialDef.extensions[this.name];\n\n    const pending = [];\n\n    pending.push(parser.loadMaterial(materialIndex));\n    pending.push(parser.getDependency(\"texture\", extensionDef.index));\n\n    return Promise.all(pending).then(results => {\n      const material = results[0];\n      const lightMap = results[1];\n      material.lightMap = lightMap;\n      material.lightMapIntensity = extensionDef.intensity !== undefined ? extensionDef.intensity : 1;\n      return material;\n    });\n  }\n}\n\nclass GLTFHubsTextureBasisExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_HUBS_texture_basis\";\n    this.basisLoader = null;\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    if (this.basisLoader === null) {\n      this.basisLoader = new BasisTextureLoader(parser.options.manager).detectSupport(AFRAME.scenes[0].renderer);\n    }\n\n    if (!this.basisLoader) {\n      // @TODO: Display warning (only if the extension is in extensionsRequired)?\n      return null;\n    }\n\n    console.warn(`The ${this.name} extension is deprecated, you should use KHR_texture_basisu instead.`);\n\n    const extensionDef = textureDef.extensions[this.name];\n    const source = json.images[extensionDef.source];\n\n    return parser.loadTextureImage(textureIndex, source, this.basisLoader);\n  }\n}\n\nclass GLTFMozTextureRGBE {\n  constructor(parser, loader) {\n    this.parser = parser;\n    this.loader = loader;\n    this.name = \"MOZ_texture_rgbe\";\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extensionDef = textureDef.extensions[this.name];\n    const source = json.images[extensionDef.source];\n    return parser.loadTextureImage(textureIndex, source, this.loader).then(t => {\n      // TODO pretty severe artifacting when using mipmaps, disable for now\n      if (t.minFilter == THREE.NearestMipmapNearestFilter || t.minFilter == THREE.NearestMipmapLinearFilter) {\n        t.minFilter = THREE.NearestFilter;\n      } else if (t.minFilter == THREE.LinearMipmapNearestFilter || t.minFilter == THREE.LinearMipmapLinearFilter) {\n        t.minFilter = THREE.LinearFilter;\n      }\n      return t;\n    });\n  }\n}\n\nexport async function loadGLTF(src, contentType, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType && (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\"))) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n  gltfLoader\n    .register(parser => new GLTFHubsComponentsExtension(parser))\n    .register(parser => new GLTFHubsPlugin(parser, jsonPreprocessor))\n    .register(parser => new GLTFHubsLightMapExtension(parser))\n    .register(parser => new GLTFHubsTextureBasisExtension(parser))\n    .register(parser => new GLTFMozTextureRGBE(parser, new RGBELoader().setDataType(THREE.HalfFloatType)));\n\n  // TODO some models are loaded before the renderer exists. This is likely things like the camera tool and loading cube.\n  // They don't currently use KTX textures but if they did this would be an issue. Fixing this is hard but is part of\n  // \"taking control of the render loop\" which is something we want to tackle for many reasons.\n  if (!ktxLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\n    ktxLoader = new KTX2Loader(loadingManager).detectSupport(AFRAME.scenes[0].renderer);\n  }\n  if (!dracoLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\n    dracoLoader = new DRACOLoader(loadingManager);\n  }\n\n  if (ktxLoader) {\n    gltfLoader.setKTX2Loader(ktxLoader);\n  }\n  if (dracoLoader) {\n    gltfLoader.setDRACOLoader(dracoLoader);\n  }\n\n  return new Promise((resolve, reject) => {\n    gltfLoader.load(gltfUrl, resolve, onProgress, reject);\n  }).finally(() => {\n    if (fileMap) {\n      // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n      Object.keys(fileMap).forEach(URL.revokeObjectURL);\n    }\n  });\n}\n\nexport async function loadModel(src, contentType = null, useCache = false, jsonPreprocessor = null) {\n  console.log(`Loading model ${src}`);\n  if (useCache) {\n    if (gltfCache.has(src)) {\n      gltfCache.retain(src);\n      return cloneGltf(gltfCache.get(src).gltf);\n    } else {\n      if (inflightGltfs.has(src)) {\n        const gltf = await inflightGltfs.get(src);\n        gltfCache.retain(src);\n        return cloneGltf(gltf);\n      } else {\n        const promise = loadGLTF(src, contentType, null, jsonPreprocessor);\n        inflightGltfs.set(src, promise);\n        const gltf = await promise;\n        inflightGltfs.delete(src);\n        gltfCache.set(src, gltf);\n        return cloneGltf(gltf);\n      }\n    }\n  } else {\n    return loadGLTF(src, contentType, null, jsonPreprocessor);\n  }\n}\n\nfunction resolveAsset(src) {\n  // If the src attribute is a selector, get the url from the asset item.\n  if (src && src.charAt(0) === \"#\") {\n    const assetEl = document.getElementById(src.substring(1));\n    if (assetEl) {\n      return assetEl.getAttribute(\"src\");\n    }\n  }\n  return src;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * allowed components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  play() {\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\n  },\n\n  update() {\n    this.applySrc(resolveAsset(this.data.src), this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    if (this.data.useCache) {\n      const src = resolveAsset(this.data.src);\n      if (src) {\n        gltfCache.release(src);\n      }\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      if (src === this.lastSrc) return;\n\n      const lastSrc = this.lastSrc;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await loadModel(src, contentType, this.data.useCache, this.jsonPreprocessor);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene;\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(this.model.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        object3DToSet.visible = false;\n\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        await inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      if (lastSrc && this.data.useCache) {\n        gltfCache.release(lastSrc);\n      }\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      object3DToSet.visible = true;\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: object3DToSet });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","import screenfull from \"screenfull\";\nimport { isIOS } from \"./is-mobile\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) && !isIOS() && screenfull.enabled;\n}\n\nexport function willRequireUserGesture() {\n  return !screenfull.isFullscreen && shouldShowFullScreen();\n}\n\nexport async function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    hasEnteredFullScreenThisSession = true;\n    await screenfull.request();\n  }\n}\n\nexport async function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    await screenfull.request();\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"room-layout\":\"RoomLayout__room-layout__32kGK\",\"roomLayout\":\"RoomLayout__room-layout__32kGK\",\"main\":\"RoomLayout__main__2H19N\",\"sidebar\":\"RoomLayout__sidebar__JpnQv\",\"viewport\":\"RoomLayout__viewport__25svn\",\"toolbar\":\"RoomLayout__toolbar__1_rvk\",\"modal-container\":\"RoomLayout__modal-container__35xzu\",\"modalContainer\":\"RoomLayout__modal-container__35xzu\",\"scene\":\"RoomLayout__scene__sxaqT\",\"object-focused\":\"RoomLayout__object-focused__t-oGm\",\"objectFocused\":\"RoomLayout__object-focused__t-oGm\",\"streaming\":\"RoomLayout__streaming__GVDfB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section-title\":\"RoomSidebar__section-title__3lE3B\",\"sectionTitle\":\"RoomSidebar__section-title__3lE3B\",\"scene-screenshot-container\":\"RoomSidebar__scene-screenshot-container__s0e5L\",\"sceneScreenshotContainer\":\"RoomSidebar__scene-screenshot-container__s0e5L\",\"scene-screenshot-image\":\"RoomSidebar__scene-screenshot-image__2Nndu\",\"sceneScreenshotImage\":\"RoomSidebar__scene-screenshot-image__2Nndu\",\"scene-info\":\"RoomSidebar__scene-info__1Ymsi\",\"sceneInfo\":\"RoomSidebar__scene-info__1Ymsi\",\"scene-name\":\"RoomSidebar__scene-name__3ddG-\",\"sceneName\":\"RoomSidebar__scene-name__3ddG-\",\"scene-creator\":\"RoomSidebar__scene-creator__2mQKU\",\"sceneCreator\":\"RoomSidebar__scene-creator__2mQKU\",\"attribution\":\"RoomSidebar__attribution__GK6hc\",\"attribution-name\":\"RoomSidebar__attribution-name__3ELDI\",\"attributionName\":\"RoomSidebar__attribution-name__3ELDI\",\"attribution-author\":\"RoomSidebar__attribution-author__20TNm\",\"attributionAuthor\":\"RoomSidebar__attribution-author__20TNm\"};","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","import { hasReticulumServer } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (configs.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER.split(\":\")[0]);\n}\nnonCorsProxyDomains.push(document.location.hostname);\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\",\n  basis: \"image/basis\",\n  ktx2: \"image/ktx2\",\n  m3u8: \"application/vnd.apple.mpegurl\",\n  mpd: \"application/dash+xml\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  let extension = \"\";\n  try {\n    const pathParts = new URL(url).pathname.split(\".\");\n\n    if (pathParts.length > 1) {\n      const extensionCandidate = pathParts.pop();\n      if (commonKnownContentTypes[extensionCandidate]) {\n        extension = `.${extensionCandidate}`;\n      }\n    }\n  } catch (e) {\n    extension = \".png\";\n  }\n\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}${extension}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (hasReticulumServer()) {\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return thumbnailUrl;\n  }\n\n  return thumbnailUrl;\n};\n\nexport const isNonCorsProxyDomain = hostname => {\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\n};\n\nexport const proxiedUrlFor = url => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\n};\n\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\n  return new URL(relativeUrl, baseUrl);\n}\n\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\n}\n\n// Note this file is configured in webpack.config.js to be handled with file-loader, so this will be a string containing the file path\nimport basisJsUrl from \"three/examples/js/libs/basis/basis_transcoder.js\";\nimport basisWasmUrl from \"three/examples/js/libs/basis/basis_transcoder.wasm\";\nimport dracoWrapperJsUrl from \"three/examples/js/libs/draco/gltf/draco_wasm_wrapper.js\";\nimport dracoWasmUrl from \"three/examples/js/libs/draco/gltf/draco_decoder.wasm\";\n\nexport const rewriteBasisTranscoderUrls = function(url) {\n  if (url === \"basis_transcoder.js\") {\n    return basisJsUrl;\n  } else if (url === \"basis_transcoder.wasm\") {\n    return basisWasmUrl;\n  }\n  return url;\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  // Intercept loading of basis transcoder with content hashed urls\n  if (url === \"basis_transcoder.js\") {\n    return basisJsUrl;\n  } else if (url === \"basis_transcoder.wasm\") {\n    return basisWasmUrl;\n  } else if (url === \"draco_wasm_wrapper.js\") {\n    return dracoWrapperJsUrl;\n  } else if (url === \"draco_decoder.wasm\") {\n    return dracoWasmUrl;\n  }\n\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return proxiedUrlFor(url);\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (configs.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (!url) return;\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.exec(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nconst originIsHubsServer = new Map();\nasync function isHubsServer(url) {\n  if (!url) return false;\n  if (!url.startsWith(\"http\")) {\n    url = \"https://\" + url;\n  }\n  const { origin } = new URL(url);\n\n  if (originIsHubsServer.has(origin)) {\n    return originIsHubsServer.get(origin);\n  }\n\n  let isHubsServer;\n  try {\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\n  } catch (e) {\n    isHubsServer = false;\n  }\n  originIsHubsServer.set(origin, isHubsServer);\n  return isHubsServer;\n}\n\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/[a-zA-Z0-9]{7}(?:\\/|$)/;\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\n\nexport const isLocalHubsUrl = async url =>\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\n\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsRoomUrl = async url =>\n  (await isHubsServer(url)) &&\n  !(await isHubsAvatarUrl(url)) &&\n  !(await isHubsSceneUrl(url)) &&\n  url.match(hubsRoomRegex)?.groups.id;\n\nexport const isHubsDestinationUrl = async url =>\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\n\nexport const idForAvatarUrl = url => {\n  const match = url.match(hubsAvatarRegex);\n  if (match) {\n    return match.groups.id;\n  }\n  return null;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"audio-toolbar-popover\":\"AudioPopover__audio-toolbar-popover__2BDFO\",\"audioToolbarPopover\":\"AudioPopover__audio-toolbar-popover__2BDFO\",\"selection-input\":\"AudioPopover__selection-input__1hr_y\",\"selectionInput\":\"AudioPopover__selection-input__1hr_y\",\"buttons-container\":\"AudioPopover__buttons-container__j8nNE\",\"buttonsContainer\":\"AudioPopover__buttons-container__j8nNE\",\"icon-enabled\":\"AudioPopover__icon-enabled__2b34_\",\"iconEnabled\":\"AudioPopover__icon-enabled__2b34_\",\"icon-disabled\":\"AudioPopover__icon-disabled__3e9Of\",\"iconDisabled\":\"AudioPopover__icon-disabled__3e9Of\",\"arrow-button\":\"AudioPopover__arrow-button__2-xhK\",\"arrowButton\":\"AudioPopover__arrow-button__2-xhK\",\"arrow-button-selected\":\"AudioPopover__arrow-button-selected__3Osmo\",\"arrowButtonSelected\":\"AudioPopover__arrow-button-selected__3Osmo\",\"level-bar\":\"AudioPopover__level-bar__2Ee4A\",\"levelBar\":\"AudioPopover__level-bar__2Ee4A\"};","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.debugUserInput = {};\npaths.actions.debugUserInput.describeCurrentMasks = \"/actions/debugUserInput/describeCurrentMasks\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.dCharSpeed = \"/actions/dCharSpeed\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFly = \"/actions/toggleFly\";\npaths.actions.toggleUI = \"/actions/toggleUI\";\npaths.actions.waypointDeltaDistance = \"/actions/waypointDeltaDistance\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.right = {};\npaths.actions.cursor.right.pose = \"/actions/cursor/right/Pose\";\npaths.actions.cursor.right.hideLine = \"/actions/cursor/right/HideLine\";\npaths.actions.cursor.right.grab = \"/actions/cursor/right/Grab\";\npaths.actions.cursor.right.drop = \"/actions/cursor/right/Drop\";\npaths.actions.cursor.right.modDelta = \"/actions/cursor/right/ModDelta\";\npaths.actions.cursor.right.startDrawing = \"/actions/cursor/right/StartDrawing\";\npaths.actions.cursor.right.stopDrawing = \"/actions/cursor/right/StopDrawing\";\npaths.actions.cursor.right.undoDrawing = \"/actions/cursor/right/UndoDrawing\";\npaths.actions.cursor.right.penNextColor = \"/actions/cursor/right/PenNextColor\";\npaths.actions.cursor.right.penPrevColor = \"/actions/cursor/right/PenPrevColor\";\npaths.actions.cursor.right.scalePenTip = \"/actions/cursor/right/ScalePenTip\";\npaths.actions.cursor.right.scaleGrabbedGrabbable = \"/actions/cursor/right/ScaleGrabbedGrabbable\";\npaths.actions.cursor.right.mediaVolumeMod = \"/actions/cursor/right//mediaVolumeMod\";\npaths.actions.cursor.right.takeSnapshot = \"/actions/cursor/right/TakeSnapshot\";\npaths.actions.cursor.right.wake = \"/actions/cursor/right/wake\";\npaths.actions.cursor.left = {};\npaths.actions.cursor.left.pose = \"/actions/cursor/left/Pose\";\npaths.actions.cursor.left.hideLine = \"/actions/cursor/left/HideLine\";\npaths.actions.cursor.left.grab = \"/actions/cursor/left/Grab\";\npaths.actions.cursor.left.drop = \"/actions/cursor/left/Drop\";\npaths.actions.cursor.left.modDelta = \"/actions/cursor/left/ModDelta\";\npaths.actions.cursor.left.startDrawing = \"/actions/cursor/left/StartDrawing\";\npaths.actions.cursor.left.stopDrawing = \"/actions/cursor/left/StopDrawing\";\npaths.actions.cursor.left.undoDrawing = \"/actions/cursor/left/UndoDrawing\";\npaths.actions.cursor.left.penNextColor = \"/actions/cursor/left/PenNextColor\";\npaths.actions.cursor.left.penPrevColor = \"/actions/cursor/left/PenPrevColor\";\npaths.actions.cursor.left.scalePenTip = \"/actions/cursor/left/ScalePenTip\";\npaths.actions.cursor.left.scaleGrabbedGrabbable = \"/actions/cursor/left/ScaleGrabbedGrabbable\";\npaths.actions.cursor.left.mediaVolumeMod = \"/actions/cursor/left//mediaVolumeMod\";\npaths.actions.cursor.left.takeSnapshot = \"/actions/cursor/left/TakeSnapshot\";\npaths.actions.cursor.left.wake = \"/actions/cursor/left/wake\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.actions.startInspecting = \"/actions/startInspecting\";\npaths.actions.startInspectingSelf = \"/actions/startInspectingSelf\";\npaths.actions.stopInspecting = \"/actions/stopInspecting\";\npaths.actions.inspectZoom = \"/actions/inspectZoom\";\npaths.actions.inspectPanY = \"/actions/inspectPanY\";\npaths.actions.resetInspectView = \"/actions/resetInspectView\";\npaths.actions.nextCameraMode = \"/actions/nextCameraMode\";\npaths.actions.spawnEmoji0 = \"/actions/spawnEmoji0\";\npaths.actions.spawnEmoji1 = \"/actions/spawnEmoji1\";\npaths.actions.spawnEmoji2 = \"/actions/spawnEmoji2\";\npaths.actions.spawnEmoji3 = \"/actions/spawnEmoji3\";\npaths.actions.spawnEmoji4 = \"/actions/spawnEmoji4\";\npaths.actions.spawnEmoji5 = \"/actions/spawnEmoji5\";\npaths.actions.spawnEmoji6 = \"/actions/spawnEmoji6\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.buttonMiddle = \"/device/mouse/buttonMiddle\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.smartMouse.shouldMoveCamera = \"/device/smartMouse/shouldMoveCamera\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.touchscreen.anything = \"/device/touchscreen/anything\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k === \" \" ? \"space\" : k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n\nconst webxr = \"/device/webxr/\";\npaths.device.webxr = {};\npaths.device.webxr.right = {\n  button: {\n    trigger: button(webxr, \"right\", \"trigger\"),\n    grip: button(webxr, \"right\", \"grip\"),\n    touchpad: button(webxr, \"right\", \"touchpad\"),\n    a: button(webxr, \"right\", \"a\"),\n    b: button(webxr, \"right\", \"b\"),\n    thumbStick: button(webxr, \"right\", \"thumbStick\")\n  },\n  axis: {\n    touchpadX: `${webxr}right/axis/touchpadX`,\n    touchpadY: `${webxr}right/axis/touchpadY`,\n    joyX: `${webxr}right/axis/joyX`,\n    joyY: `${webxr}right/axis/joyY`\n  },\n  pose: `${webxr}right/pose`,\n  matrix: `${webxr}right/matrix`\n};\npaths.device.webxr.left = {\n  button: {\n    trigger: button(webxr, \"left\", \"trigger\"),\n    grip: button(webxr, \"left\", \"grip\"),\n    touchpad: button(webxr, \"left\", \"touchpad\"),\n    a: button(webxr, \"left\", \"a\"),\n    b: button(webxr, \"left\", \"b\"),\n    thumbStick: button(webxr, \"left\", \"thumbStick\")\n  },\n  axis: {\n    touchpadX: `${webxr}left/axis/touchpadX`,\n    touchpadY: `${webxr}left/axis/touchpadY`,\n    joyX: `${webxr}left/axis/joyX`,\n    joyY: `${webxr}left/axis/joyY`\n  },\n  pose: `${webxr}left/pose`,\n  matrix: `${webxr}left/matrix`\n};\n","// Primary language tags for those languages we support\nexport const AVAILABLE_LOCALES = {\n  en: \"English\",\n  \"zh-cn\": \"简体中文\",\n  pt: \"Portugês (Brasil)\",\n  ja: \"日本語\",\n  es: \"Español\",\n  ru: \"Pусский\",\n  fr: \"Français\",\n  ko: \"한국어\",\n  de: \"Deutsch\",\n  \"zh-tw\": \"繁體中文\"\n};\n\n// Map from alternative primary language tags to those we support\nexport const FALLBACK_LOCALES = {\n  jp: \"ja\"\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon-button\":\"IconButton__icon-button__3PyMA\",\"iconButton\":\"IconButton__icon-button__3PyMA\",\"compact-sm\":\"IconButton__compact-sm__3NWNU\",\"compactSm\":\"IconButton__compact-sm__3NWNU\",\"lg\":\"IconButton__lg__1ss77\"};","import { useState } from \"react\";\n\nconst idPrefix = \"id_\";\n\nlet nextId = 0;\n\n// Note: React 17 introduced the experimental unstable_useOpaqueIdentifier hook. We'll want to switch to this in the future.\nexport function useId() {\n  const [id] = useState(() => idPrefix + nextId++);\n  return id;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"support-main\":\"support__support-main__3QETt\",\"supportMain\":\"support__support-main__3QETt\",\"support-content\":\"support__support-content__3D3Yd\",\"supportContent\":\"support__support-content__3D3Yd\",\"unsupported-langs\":\"support__unsupported-langs__eyx9v\",\"unsupportedLangs\":\"support__unsupported-langs__eyx9v\",\"details\":\"support__details__3bRTj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"InputField__label__1E124\",\"input-field\":\"InputField__input-field__1zI_p\",\"inputField\":\"InputField__input-field__1zI_p\",\"fullWidth\":\"InputField__fullWidth__3lOtv\",\"error\":\"InputField__error__1-GJA\",\"info\":\"InputField__info__1i5VP\"};","let bit = 0;\nconst nextBit = () => 1 << bit++;\nconst CL = {\n  ALL: -1,\n  NONE: 0,\n  INTERACTABLES: nextBit(),\n  ENVIRONMENT: nextBit(),\n  AVATAR: nextBit(),\n  HANDS: nextBit(),\n  MEDIA_FRAMES: nextBit()\n};\n\n// @TODO we should split these \"sets\" off into something other than COLLISION_LAYERS or at least name\n// them differently to indicate they are a combination of multiple bits\nCL.DEFAULT_INTERACTABLE = CL.INTERACTABLES | CL.ENVIRONMENT | CL.AVATAR | CL.HANDS | CL.MEDIA_FRAMES;\nCL.UNOWNED_INTERACTABLE = CL.INTERACTABLES | CL.HANDS;\nCL.DEFAULT_SPAWNER = CL.INTERACTABLES | CL.HANDS;\n\nmodule.exports = {\n  COLLISION_LAYERS: CL\n};\n","import { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nlet config = process.env.APP_CONFIG;\n\n// Storybook includes environment variables as a string\n// https://storybook.js.org/docs/react/configure/environment-variables\nif (!config && process.env.STORYBOOK_APP_CONFIG) {\n  config = JSON.parse(process.env.STORYBOOK_APP_CONFIG);\n}\n\nif (!config) {\n  config = window.APP_CONFIG;\n}\n\nif (config?.theme?.error) {\n  console.error(\n    `Custom themes failed to load.\\n${\n      config.theme.error\n    }\\nIf you are an admin, reconfigure your themes in the admin panel.`\n  );\n}\n\nexport const defaultTheme = \"default\";\n\nexport const themes = config?.theme?.themes || [];\n\nfunction useDarkMode() {\n  const [darkMode, setDarkMode] = useState(false);\n\n  useEffect(() => {\n    const darkmodeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n    setDarkMode(darkmodeQuery.matches);\n\n    // This is a workaround for old Safari.\n    // Prior to Safari 14, MediaQueryList is based on EventTarget, so you must use\n    // addListener() and removeListener() to observe media query lists.\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList/addListener\n    // We may remove this workaround when no one will use Safari 13 or before.\n    if (darkmodeQuery.addEventListener) {\n      darkmodeQuery.addEventListener(\"change\", event => {\n        setDarkMode(event.matches);\n      });\n    } else {\n      darkmodeQuery.addListener(event => {\n        setDarkMode(event.matches);\n      });\n    }\n  }, []);\n\n  return darkMode;\n}\n\nexport function useTheme(themeId) {\n  const darkMode = useDarkMode();\n\n  useEffect(\n    () => {\n      // Themes can come from an external source. Ensure it is an array.\n      if (!Array.isArray(themes)) return;\n\n      let theme;\n\n      if (themeId) {\n        theme = themes.find(t => t.id === themeId);\n      }\n\n      if (!theme && darkMode) {\n        theme = themes.find(t => t.darkModeDefault);\n      }\n\n      if (!theme) {\n        theme = themes.find(t => t.default);\n      }\n\n      if (!theme) {\n        return;\n      }\n\n      const variables = [];\n\n      for (const key in theme.variables) {\n        if (!theme.variables.hasOwnProperty(key)) continue;\n        variables.push(`--${key}: ${theme.variables[key]};`);\n      }\n\n      const styleTag = document.createElement(\"style\");\n\n      styleTag.innerHTML = `:root {\n        ${variables.join(\"\\n\")}\n      }`;\n\n      document.head.appendChild(styleTag);\n\n      return () => {\n        document.head.removeChild(styleTag);\n      };\n    },\n    [themeId, darkMode]\n  );\n}\n\nexport function useThemeFromStore(store) {\n  const [themeId, setThemeId] = useState(store?.state?.preferences?.theme);\n\n  useEffect(() => {\n    function onStoreChanged() {\n      const nextThemeId = store.state?.preferences?.theme;\n\n      if (themeId !== nextThemeId) {\n        setThemeId(nextThemeId);\n      }\n    }\n\n    if (store) {\n      store.addEventListener(\"statechanged\", onStoreChanged);\n    }\n\n    return () => {\n      if (store) {\n        store.removeEventListener(\"statechanged\", onStoreChanged);\n      }\n    };\n  });\n\n  useTheme(themeId);\n}\n\nexport function ThemeProvider({ store, children }) {\n  useThemeFromStore(store);\n  return children;\n}\n\nThemeProvider.propTypes = {\n  store: PropTypes.object,\n  children: PropTypes.node\n};\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer, args = {}) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage(Object.assign(args, { id, payload: data }), transfer);\n    return promise;\n  };\n}\n","import { EventTarget } from \"event-target-shim\";\nimport configs from \"../utils/configs\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated, hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nconst desiredSources = [\"sketchfab\", \"videos\", \"scenes\", \"avatars\", \"gifs\", \"images\"];\nconst availableSources = desiredSources.filter(source => {\n  const apiSource = URL_SOURCE_TO_TO_API_SOURCE[source];\n  return configs.integration(apiSource);\n});\nexport const SOURCES = availableSources;\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\", \"similar_to\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav, keepSelectAction) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    if (!keepSelectAction) {\n      searchParams.delete(\"selectAction\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = (source, selectAction) => {\n    this._sourceNavigate(source, true, false, selectAction);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams, selectAction) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (selectAction) {\n      searchParams.set(\"selectAction\", selectAction);\n    }\n\n    if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPen(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.024 18.125H1.875v-2.148L13.99 3.832 16.17 6.01 4.024 18.125z\",\n    fill: props.color\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.63 5.547L14.453 3.37l1.237-1.197c.19-.193.484-.298.755-.298a1.011 1.011 0 01.72.298l.664.664a1.01 1.01 0 01.296.718c0 .273-.106.564-.298.756L16.63 5.547z\",\n    fill: props.color\n  }));\n}\n\nSvgPen.defaultProps = {\n  color: \"#000\",\n  title: \"Pen\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1Blbi02OWU5MWViNzBkY2FlNzdmNTFjYzQyNmIxNmJmN2VhYy5zdmciOw==\";\nexport { SvgPen as ReactComponent };","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popover\":\"Popover__popover__adrEn\",\"content\":\"Popover__content__2ESLv\",\"arrow\":\"Popover__arrow__OOaTx\",\"header\":\"Popover__header__2snca\",\"arrow-bg\":\"Popover__arrow-bg__TYK1s\",\"arrowBg\":\"Popover__arrow-bg__TYK1s\",\"arrow-border\":\"Popover__arrow-border__1a7Qc\",\"arrowBorder\":\"Popover__arrow-border__1a7Qc\",\"fullscreen\":\"Popover__fullscreen__18eZ5\",\"fullscreen-body\":\"Popover__fullscreen-body__1jSzY\",\"fullscreenBody\":\"Popover__fullscreen-body__1jSzY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"back-button\":\"ObjectMenu__back-button__2HR09\",\"backButton\":\"ObjectMenu__back-button__2HR09\",\"lights-button\":\"ObjectMenu__lights-button__1sCQl\",\"lightsButton\":\"ObjectMenu__lights-button__1sCQl\",\"object-menu-container\":\"ObjectMenu__object-menu-container__ybwgq\",\"objectMenuContainer\":\"ObjectMenu__object-menu-container__ybwgq\",\"object-menu\":\"ObjectMenu__object-menu__3Hmi3\",\"objectMenu\":\"ObjectMenu__object-menu__3Hmi3\",\"header\":\"ObjectMenu__header__2KWZ6\",\"close-button\":\"ObjectMenu__close-button__1VDyA\",\"closeButton\":\"ObjectMenu__close-button__1VDyA\",\"lights-header-button\":\"ObjectMenu__lights-header-button__1SYzz\",\"lightsHeaderButton\":\"ObjectMenu__lights-header-button__1SYzz\",\"menu\":\"ObjectMenu__menu__3g2o3\",\"object-menu-button\":\"ObjectMenu__object-menu-button__1ETYJ\",\"objectMenuButton\":\"ObjectMenu__object-menu-button__1ETYJ\",\"separator\":\"ObjectMenu__separator__3g5K6\",\"pagination\":\"ObjectMenu__pagination__2RKbj\"};","import React, { forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Column.scss\";\n\nexport const Column = forwardRef(\n  (\n    { as: Component, lastChildMargin, className, gap, padding, center, centerMd, grow, overflow, children, ...rest },\n    ref\n  ) => {\n    const gapClass = gap === true ? styles.mdGap : styles[`${gap}Gap`];\n    const paddingClass = padding === true ? styles.lgPadding : styles[`${padding}Padding`];\n\n    return (\n      <Component\n        {...rest}\n        ref={ref}\n        className={classNames(\n          styles.column,\n          gapClass,\n          paddingClass,\n          {\n            [styles.center]: center === true || center === \"horizontal\" || center === \"both\",\n            [styles.centerVertical]: center === \"vertical\" || center === \"both\",\n            [styles.centerMd]: centerMd === true || centerMd === \"horizontal\" || centerMd === \"both\",\n            [styles.centerVerticalMd]: centerMd === \"vertical\" || centerMd === \"both\",\n            [styles.grow]: grow,\n            [styles.overflow]: overflow,\n            [styles.margin0LastChild]: lastChildMargin\n          },\n          className\n        )}\n      >\n        {children}\n      </Component>\n    );\n  }\n);\n\nColumn.propTypes = {\n  as: PropTypes.elementType,\n  className: PropTypes.string,\n  children: PropTypes.node,\n  gap: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  padding: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  centerMd: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  center: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  grow: PropTypes.bool,\n  lastChildMargin: PropTypes.bool,\n  overflow: PropTypes.bool\n};\n\nColumn.defaultProps = {\n  as: \"div\",\n  gap: \"md\",\n  center: false,\n  centerMd: false,\n  padding: false,\n  grow: false,\n  overflow: false,\n  lastChildMargin: true\n};\n","import { isIOS as detectIOS } from \"./is-mobile\";\nconst isIOS = detectIOS();\n\n// TODO should we be using touch-action CSS for this?\nexport function disableiOSZoom() {\n  if (!isIOS) return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgStar(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.39 18.75a.625.625 0 01-.366-.118L10 14.99l-5.024 3.642a.625.625 0 01-.959-.706l1.96-5.803L.899 8.64A.625.625 0 011.25 7.5h6.265l1.89-5.819a.625.625 0 011.19 0l1.89 5.82h6.265a.624.624 0 01.354 1.141l-5.08 3.48 1.958 5.802a.624.624 0 01-.591.826z\",\n    fill: props.color\n  }));\n}\n\nSvgStar.defaultProps = {\n  color: \"#000\",\n  title: \"Star\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1N0YXItZTA2NDc4MTYyNzEzZGQzOTkxZmM3ZjA3MWUwYzY1MmMuc3ZnIjs=\";\nexport { SvgStar as ReactComponent };","import { detect } from \"detect-browser\";\n\nconst browser = detect();\nconst browserIsSafari = [\"iOS\", \"Mac OS\"].includes(browser.os) && [\"safari\", \"ios\"].includes(browser.name);\n\nexport function isSafari() {\n  return browserIsSafari;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"media-grid\":\"MediaGrid__media-grid__10rNf\",\"mediaGrid\":\"MediaGrid__media-grid__10rNf\",\"sm\":\"MediaGrid__sm__30Dg9\",\"center\":\"MediaGrid__center__2EOnM\",\"variable-width\":\"MediaGrid__variable-width__3jnA2\",\"variableWidth\":\"MediaGrid__variable-width__3jnA2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search-icon\":\"MediaBrowser__search-icon__sDw5R\",\"searchIcon\":\"MediaBrowser__search-icon__sDw5R\",\"favorite-icon\":\"MediaBrowser__favorite-icon__2H80P\",\"favoriteIcon\":\"MediaBrowser__favorite-icon__2H80P\",\"button-nav\":\"MediaBrowser__button-nav__2Yz5O\",\"buttonNav\":\"MediaBrowser__button-nav__2Yz5O\",\"facets-nav\":\"MediaBrowser__facets-nav__2IArx\",\"facetsNav\":\"MediaBrowser__facets-nav__2IArx\",\"content\":\"MediaBrowser__content__22rkT\",\"pager\":\"MediaBrowser__pager__1PDRS\",\"pager-button\":\"MediaBrowser__pager-button__10YHT\",\"pagerButton\":\"MediaBrowser__pager-button__10YHT\",\"no-results\":\"MediaBrowser__no-results__1GzFN\",\"noResults\":\"MediaBrowser__no-results__1GzFN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border-tile\":\"CollapsiblePanel__border-tile__1Vv1C\",\"borderTile\":\"CollapsiblePanel__border-tile__1Vv1C\",\"borderless-tile\":\"CollapsiblePanel__borderless-tile__1ufmC\",\"borderlessTile\":\"CollapsiblePanel__borderless-tile__1ufmC\",\"rtc-debug-panel-root\":\"CollapsiblePanel__rtc-debug-panel-root__4uVPC\",\"rtcDebugPanelRoot\":\"CollapsiblePanel__rtc-debug-panel-root__4uVPC\",\"rtc-status-container\":\"CollapsiblePanel__rtc-status-container__1Yywm\",\"rtcStatusContainer\":\"CollapsiblePanel__rtc-status-container__1Yywm\",\"status-container-middle\":\"CollapsiblePanel__status-container-middle__2pQF2\",\"statusContainerMiddle\":\"CollapsiblePanel__status-container-middle__2pQF2\",\"rtc-status-container-right\":\"CollapsiblePanel__rtc-status-container-right__31_VM\",\"rtcStatusContainerRight\":\"CollapsiblePanel__rtc-status-container-right__31_VM\",\"rtc-status-container-left\":\"CollapsiblePanel__rtc-status-container-left__1op7a\",\"rtcStatusContainerLeft\":\"CollapsiblePanel__rtc-status-container-left__1op7a\",\"rtc-log-container\":\"CollapsiblePanel__rtc-log-container__2HW8Z\",\"rtcLogContainer\":\"CollapsiblePanel__rtc-log-container__2HW8Z\",\"rtc-log-time\":\"CollapsiblePanel__rtc-log-time__3nukv\",\"rtcLogTime\":\"CollapsiblePanel__rtc-log-time__3nukv\",\"rtc-log-text\":\"CollapsiblePanel__rtc-log-text__1MMc5\",\"rtcLogText\":\"CollapsiblePanel__rtc-log-text__1MMc5\",\"rtc-log-msg\":\"CollapsiblePanel__rtc-log-msg__livYJ\",\"rtcLogMsg\":\"CollapsiblePanel__rtc-log-msg__livYJ\",\"rtc-log-tag\":\"CollapsiblePanel__rtc-log-tag__3Ol6E\",\"rtcLogTag\":\"CollapsiblePanel__rtc-log-tag__3Ol6E\",\"rtc-log-msg-container\":\"CollapsiblePanel__rtc-log-msg-container__3gnKp\",\"rtcLogMsgContainer\":\"CollapsiblePanel__rtc-log-msg-container__3gnKp\",\"collapse-button\":\"CollapsiblePanel__collapse-button__2vUK3\",\"collapseButton\":\"CollapsiblePanel__collapse-button__2vUK3\",\"log-button\":\"CollapsiblePanel__log-button__3Nb1v\",\"logButton\":\"CollapsiblePanel__log-button__3Nb1v\",\"collapsible-content\":\"CollapsiblePanel__collapsible-content__tdm2-\",\"collapsibleContent\":\"CollapsiblePanel__collapsible-content__tdm2-\",\"collapsible-content-root\":\"CollapsiblePanel__collapsible-content-root__3_utC\",\"collapsibleContentRoot\":\"CollapsiblePanel__collapsible-content-root__3_utC\",\"collapsible-header\":\"CollapsiblePanel__collapsible-header__236oN\",\"collapsibleHeader\":\"CollapsiblePanel__collapsible-header__236oN\",\"collapsible-right-buttons\":\"CollapsiblePanel__collapsible-right-buttons__2xMCk\",\"collapsibleRightButtons\":\"CollapsiblePanel__collapsible-right-buttons__2xMCk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border-tile\":\"RtcDebugPanel__border-tile__24pPW\",\"borderTile\":\"RtcDebugPanel__border-tile__24pPW\",\"borderless-tile\":\"RtcDebugPanel__borderless-tile__2Echk\",\"borderlessTile\":\"RtcDebugPanel__borderless-tile__2Echk\",\"rtc-debug-panel-root\":\"RtcDebugPanel__rtc-debug-panel-root__3Qcgf\",\"rtcDebugPanelRoot\":\"RtcDebugPanel__rtc-debug-panel-root__3Qcgf\",\"rtc-status-container\":\"RtcDebugPanel__rtc-status-container__1JFz8\",\"rtcStatusContainer\":\"RtcDebugPanel__rtc-status-container__1JFz8\",\"status-container-middle\":\"RtcDebugPanel__status-container-middle__32kw5\",\"statusContainerMiddle\":\"RtcDebugPanel__status-container-middle__32kw5\",\"rtc-status-container-right\":\"RtcDebugPanel__rtc-status-container-right__cdBji\",\"rtcStatusContainerRight\":\"RtcDebugPanel__rtc-status-container-right__cdBji\",\"rtc-status-container-left\":\"RtcDebugPanel__rtc-status-container-left__3QRgz\",\"rtcStatusContainerLeft\":\"RtcDebugPanel__rtc-status-container-left__3QRgz\",\"rtc-log-container\":\"RtcDebugPanel__rtc-log-container__CH4CI\",\"rtcLogContainer\":\"RtcDebugPanel__rtc-log-container__CH4CI\",\"rtc-log-time\":\"RtcDebugPanel__rtc-log-time__1BJtM\",\"rtcLogTime\":\"RtcDebugPanel__rtc-log-time__1BJtM\",\"rtc-log-text\":\"RtcDebugPanel__rtc-log-text__1IJrq\",\"rtcLogText\":\"RtcDebugPanel__rtc-log-text__1IJrq\",\"rtc-log-msg\":\"RtcDebugPanel__rtc-log-msg__2x3HB\",\"rtcLogMsg\":\"RtcDebugPanel__rtc-log-msg__2x3HB\",\"rtc-log-tag\":\"RtcDebugPanel__rtc-log-tag__3ND8l\",\"rtcLogTag\":\"RtcDebugPanel__rtc-log-tag__3ND8l\",\"rtc-log-msg-container\":\"RtcDebugPanel__rtc-log-msg-container__BNVW1\",\"rtcLogMsgContainer\":\"RtcDebugPanel__rtc-log-msg-container__BNVW1\"};","export const Layers = {\n  // These 3 layers are hardcoded in THREE\n  CAMERA_LAYER_DEFAULT: 0,\n  CAMERA_LAYER_XR_LEFT_EYE: 1,\n  CAMERA_LAYER_XR_RIGHT_EYE: 2,\n\n  CAMERA_LAYER_REFLECTION: 3,\n  CAMERA_LAYER_INSPECT: 4,\n  CAMERA_LAYER_BATCH_INSPECT: 5,\n  CAMERA_LAYER_VIDEO_TEXTURE_TARGET: 6,\n\n  CAMERA_LAYER_THIRD_PERSON_ONLY: 7,\n  CAMERA_LAYER_FIRST_PERSON_ONLY: 8\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\nimport URL_SPAWN_EMOJI from \"../assets/sfx/emoji.mp3\";\nimport URL_SPEAKER_TONE from \"../assets/sfx/tone.mp3\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\nimport { isSafari } from \"../utils/detect-safari\";\nimport { SourceType } from \"../components/audio-params\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_WAYPOINT_START = soundEnum++;\nexport const SOUND_WAYPOINT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\nexport const SOUND_CAMERA_TOOL_COUNTDOWN = soundEnum++;\nexport const SOUND_PREFERENCE_MENU_HOVER = soundEnum++;\nexport const SOUND_SPAWN_EMOJI = soundEnum++;\nexport const SOUND_SPEAKER_TONE = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor(scene) {\n    this.pendingAudioSourceNodes = [];\n    this.pendingPositionalAudios = [];\n    this.positionalAudiosStationary = [];\n    this.positionalAudiosFollowingObject3Ds = [];\n\n    this.audioContext = THREE.AudioContext.getContext();\n    this.scene = scene;\n\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_CAMERA_TOOL_COUNTDOWN, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_START, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_END, URL_TICK],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED],\n      [SOUND_PREFERENCE_MENU_HOVER, URL_FREEZE],\n      [SOUND_SPAWN_EMOJI, URL_SPAWN_EMOJI],\n      [SOUND_SPEAKER_TONE, URL_SPEAKER_TONE]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n\n    this.isDisabled = window.APP.store.state.preferences.disableSoundEffects;\n    window.APP.store.addEventListener(\"statechanged\", () => {\n      const shouldBeDisabled = window.APP.store.state.preferences.disableSoundEffects;\n      if (shouldBeDisabled && !this.isDisabled) {\n        this.stopAllPositionalAudios();\n        // TODO: Technically we should stop any other sounds that have been started,\n        // but we do not hold references to these and they're short-lived so I didn't bother.\n      }\n      this.isDisabled = shouldBeDisabled;\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    if (this.isDisabled) return null;\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    this.scene.systems[\"hubs-systems\"].audioSystem.addAudio({ sourceType: SourceType.SFX, node: source });\n    source.loop = loop;\n    this.pendingAudioSourceNodes.push(source);\n    return source;\n  }\n\n  enqueuePositionalSound(sound, loop) {\n    if (this.isDisabled) return null;\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const disablePositionalAudio = isSafari() || window.APP.store.state.preferences.disableLeftRightPanning;\n    const positionalAudio = disablePositionalAudio\n      ? new THREE.Audio(this.scene.audioListener)\n      : new THREE.PositionalAudio(this.scene.audioListener);\n    positionalAudio.setBuffer(audioBuffer);\n    positionalAudio.loop = loop;\n    this.pendingPositionalAudios.push(positionalAudio);\n    this.scene.systems[\"hubs-systems\"].audioSystem.addAudio({\n      sourceType: SourceType.SFX,\n      node: positionalAudio\n    });\n    return positionalAudio;\n  }\n\n  playPositionalSoundAt(sound, position, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    positionalAudio.position.copy(position);\n    positionalAudio.matrixWorldNeedsUpdate = true;\n    this.positionalAudiosStationary.push(positionalAudio);\n  }\n\n  playPositionalSoundFollowing(sound, object3D, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    this.positionalAudiosFollowingObject3Ds.push({ positionalAudio, object3D });\n    return positionalAudio;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    if (this.isDisabled) return null;\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    this.scene.systems[\"hubs-systems\"].audioSystem.addAudio({ sourceType: SourceType.SFX, node: gain });\n    source.loop = true;\n    this.pendingAudioSourceNodes.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingAudioSourceNodes.indexOf(node);\n    if (index !== -1) {\n      this.pendingAudioSourceNodes.splice(index, 1);\n    } else {\n      node.stop();\n      this.scene.systems[\"hubs-systems\"].audioSystem.removeAudio({ node });\n    }\n  }\n\n  stopPositionalAudio(inPositionalAudio) {\n    const pendingIndex = this.pendingPositionalAudios.indexOf(inPositionalAudio);\n    if (pendingIndex !== -1) {\n      this.pendingPositionalAudios.splice(pendingIndex, 1);\n    } else {\n      if (inPositionalAudio.isPlaying) {\n        inPositionalAudio.stop();\n      }\n      if (inPositionalAudio.parent) {\n        inPositionalAudio.removeFromParent();\n      }\n    }\n    this.positionalAudiosStationary = this.positionalAudiosStationary.filter(\n      positionalAudio => positionalAudio !== inPositionalAudio\n    );\n    this.positionalAudiosFollowingObject3Ds = this.positionalAudiosFollowingObject3Ds.filter(\n      ({ positionalAudio }) => positionalAudio !== inPositionalAudio\n    );\n    this.scene.systems[\"hubs-systems\"].audioSystem.removeAudio({ node: inPositionalAudio });\n  }\n\n  stopAllPositionalAudios() {\n    for (let i = this.positionalAudiosStationary.length - 1; i >= 0; i--) {\n      const positionalAudio = this.positionalAudiosStationary[i];\n      this.stopPositionalAudio(positionalAudio);\n    }\n\n    for (let i = this.positionalAudiosFollowingObject3Ds.length - 1; i >= 0; i--) {\n      const positionalAudioAndObject3D = this.positionalAudiosFollowingObject3Ds[i];\n      const positionalAudio = positionalAudioAndObject3D.positionalAudio;\n      this.stopPositionalAudio(positionalAudio);\n    }\n  }\n\n  tick() {\n    if (this.isDisabled) {\n      return;\n    }\n\n    for (let i = 0; i < this.pendingAudioSourceNodes.length; i++) {\n      this.pendingAudioSourceNodes[i].start();\n    }\n    this.pendingAudioSourceNodes.length = 0;\n\n    for (let i = 0; i < this.pendingPositionalAudios.length; i++) {\n      const pendingPositionalAudio = this.pendingPositionalAudios[i];\n      this.scene.object3D.add(pendingPositionalAudio);\n      pendingPositionalAudio.play();\n    }\n    this.pendingPositionalAudios.length = 0;\n\n    for (let i = this.positionalAudiosStationary.length - 1; i >= 0; i--) {\n      const positionalAudio = this.positionalAudiosStationary[i];\n      if (!positionalAudio.isPlaying) {\n        this.stopPositionalAudio(positionalAudio);\n      }\n    }\n\n    for (let i = this.positionalAudiosFollowingObject3Ds.length - 1; i >= 0; i--) {\n      const positionalAudioAndObject3D = this.positionalAudiosFollowingObject3Ds[i];\n      const positionalAudio = positionalAudioAndObject3D.positionalAudio;\n      const object3D = positionalAudioAndObject3D.object3D;\n      if (!positionalAudio.isPlaying || !object3D.parent) {\n        this.stopPositionalAudio(positionalAudio);\n      } else {\n        object3D.updateMatrices();\n        setMatrixWorld(positionalAudio, object3D.matrixWorld);\n      }\n    }\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSpinner(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 70,\n    height: 70,\n    viewBox: \"0 0 70 70\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.284 57.665A32.14 32.14 0 013.39 40.032a32.311 32.311 0 013.065-19.547A31.861 31.861 0 0120.307 6.49a31.414 31.414 0 0119.349-3.096m18.06 8.94a32.14 32.14 0 018.894 17.634 32.311 32.311 0 01-3.065 19.548A31.86 31.86 0 0149.693 63.51a31.413 31.413 0 01-19.348 3.096\",\n    stroke: props.color,\n    strokeWidth: 6\n  }));\n}\n\nSvgSpinner.defaultProps = {\n  color: \"#000\",\n  title: \"Spinner\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL21pc2MvU3Bpbm5lci1lMThjNTI0OGEzYzVjMDAyNDBiN2VkNmRjZDdkMjgyMi5zdmciOw==\";\nexport { SvgSpinner as ReactComponent };","import React from \"react\";\nimport { ReactComponent as SpinnerSvg } from \"./Spinner.svg\";\nimport styles from \"./Spinner.scss\";\n\nexport function Spinner() {\n  return <SpinnerSvg className={styles.spinner} />;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 17L3 3\",\n    stroke: props.color,\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 3L3 17\",\n    stroke: props.color,\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgClose.defaultProps = {\n  color: \"#000\",\n  title: \"Close\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0Nsb3NlLTRlNGVjYzI2MzcyNDg2ZDM1NGVkYWQxNTc3Yzc1Yjg0LnN2ZyI7\";\nexport { SvgClose as ReactComponent };","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button__button__2C3ps\",\"basic\":\"Button__basic__2DMs5\",\"transparent\":\"Button__transparent__mwQRf\",\"primary\":\"Button__primary__emMw-\",\"accept\":\"Button__accept__3uT0R\",\"cancel\":\"Button__cancel__N3xQf\",\"accent1\":\"Button__accent1__1zAmw\",\"accent2\":\"Button__accent2__134e2\",\"accent3\":\"Button__accent3__3Yct5\",\"accent4\":\"Button__accent4__2jrJP\",\"accent5\":\"Button__accent5__2s_w9\",\"accent6\":\"Button__accent6__2anjb\",\"sm\":\"Button__sm__2xDIc\",\"lg\":\"Button__lg__-zn8l\",\"xl\":\"Button__xl__4XioJ\",\"thin\":\"Button__thin__3mkz4\",\"thick\":\"Button__thick__3-pnm\",\"signin\":\"Button__signin__3tVaW\",\"landing\":\"Button__landing__27Ne-\"};","export function easeOutQuadratic(t) {\n  return t * (2 - t);\n}\n// Adapted from\n// https://github.com/d3/d3-ease/blob/master/src/elastic.js#L18\nexport const elasticOut = (function() {\n  const tau = 2 * Math.PI,\n    a = 1,\n    p = 0.3 / tau,\n    s = Math.asin(1) * p;\n  return function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  };\n})();\n","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWarning(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.343 17.43h13.314a1.25 1.25 0 001.1-1.842L11.102 3.223a1.25 1.25 0 00-2.202 0L2.242 15.588a1.25 1.25 0 001.1 1.842v0z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.776 7.632L10 12.398l.224-4.764a.225.225 0 00-.227-.234v0a.224.224 0 00-.221.232v0z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 15.517a.782.782 0 110-1.563.782.782 0 010 1.563z\",\n    fill: props.color\n  }));\n}\n\nSvgWarning.defaultProps = {\n  color: \"#000\",\n  title: \"Warning\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1dhcm5pbmctYTczZjZjZDg4MmM4ZTI5NWMyYTQwNmE3N2M3OGY5OGMuc3ZnIjs=\";\nexport { SvgWarning as ReactComponent };","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./TextInput.scss\";\nimport { ReactComponent as WarningIcon } from \"../icons/Warning.svg\";\nimport buttonStyles from \"./Button.scss\";\nimport iconButtonStyles from \"./IconButton.scss\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../../utils/focus-utils\";\n\nexport const TextInput = memo(\n  forwardRef(\n    (\n      {\n        id,\n        disabled,\n        invalid,\n        className,\n        beforeInput,\n        afterInput,\n        onFocus,\n        onBlur,\n        textInputStyles,\n        as: InputElement,\n        ...rest\n      },\n      ref\n    ) => {\n      // TODO: This is REALLY bad. We're overriding default behavior of text inputs to get a fullscreen behavior to work on Firefox.\n      // It also selects the contents of the text input which is not always something you want to do. If we can remove this, we absolutely should.\n      const handleFocus = e => {\n        handleTextFieldFocus(e.target);\n\n        if (onFocus) {\n          onFocus(e);\n        }\n      };\n\n      const handleBlur = e => {\n        handleTextFieldBlur();\n\n        if (onBlur) {\n          onBlur(e);\n        }\n      };\n\n      return (\n        <div\n          className={classNames(\n            styles.outerWrapper,\n            buttonStyles.inputGroup,\n            iconButtonStyles.inputGroup,\n            { [styles.invalid]: invalid, [styles.disabled]: disabled },\n            className\n          )}\n        >\n          <div className={styles.beforeInput}>{beforeInput}</div>\n          <div className={styles.inputWrapper}>\n            <InputElement\n              id={id}\n              className={classNames(styles.textInput, textInputStyles)}\n              disabled={disabled}\n              onFocus={handleFocus}\n              onBlur={handleBlur}\n              {...rest}\n              ref={ref}\n            />\n          </div>\n          <div className={styles.afterInput}>\n            {invalid && <WarningIcon className={styles.invalidIcon} />}\n            {afterInput}\n          </div>\n        </div>\n      );\n    }\n  )\n);\n\nTextInput.propTypes = {\n  id: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  invalid: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func,\n  beforeInput: PropTypes.node,\n  afterInput: PropTypes.node,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  textInputStyles: PropTypes.string,\n  as: PropTypes.elementType\n};\n\nTextInput.defaultProps = {\n  onChange: () => {},\n  as: \"input\"\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"List__list__3Dc3X\",\"list-item\":\"List__list-item__3WrR0\",\"listItem\":\"List__list-item__3WrR0\",\"list-item-content\":\"List__list-item-content__2IanG\",\"listItemContent\":\"List__list-item-content__2IanG\",\"button-list-item\":\"List__button-list-item__1uX4c\",\"buttonListItem\":\"List__button-list-item__1uX4c\",\"selected\":\"List__selected__1746_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar-button\":\"ToolbarButton__toolbar-button__3-iHs\",\"toolbarButton\":\"ToolbarButton__toolbar-button__3-iHs\",\"icon-container\":\"ToolbarButton__icon-container__3LJEJ\",\"iconContainer\":\"ToolbarButton__icon-container__3LJEJ\",\"large\":\"ToolbarButton__large__1JH2K\",\"basic\":\"ToolbarButton__basic__3YQM_\",\"transparent\":\"ToolbarButton__transparent__3OB0a\",\"selected\":\"ToolbarButton__selected__9i2OA\",\"primary\":\"ToolbarButton__primary__1SVAK\",\"accept\":\"ToolbarButton__accept__EdQyn\",\"cancel\":\"ToolbarButton__cancel__3P9NA\",\"accent1\":\"ToolbarButton__accent1__2-zPv\",\"accent2\":\"ToolbarButton__accent2__doyFy\",\"accent3\":\"ToolbarButton__accent3__Ch-MX\",\"accent4\":\"ToolbarButton__accent4__2ODn2\",\"accent5\":\"ToolbarButton__accent5__m3aEv\",\"status-indicator\":\"ToolbarButton__status-indicator__1PEoq\",\"statusIndicator\":\"ToolbarButton__status-indicator__1PEoq\",\"status-enabled\":\"ToolbarButton__status-enabled__1HgFH\",\"statusEnabled\":\"ToolbarButton__status-enabled__1HgFH\",\"status-disabled\":\"ToolbarButton__status-disabled__2P2Sp\",\"statusDisabled\":\"ToolbarButton__status-disabled__2P2Sp\",\"status-unread\":\"ToolbarButton__status-unread__3AHbq\",\"statusUnread\":\"ToolbarButton__status-unread__3AHbq\",\"status-recording\":\"ToolbarButton__status-recording__DTFKv\",\"statusRecording\":\"ToolbarButton__status-recording__DTFKv\",\"left\":\"ToolbarButton__left__2Ki1k\",\"middle\":\"ToolbarButton__middle__3QQW6\",\"right\":\"ToolbarButton__right__2FcN-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"column\":\"Column__column__31daz\",\"xs-gap\":\"Column__xs-gap__1rDPB\",\"xsGap\":\"Column__xs-gap__1rDPB\",\"sm-gap\":\"Column__sm-gap__dm1fW\",\"smGap\":\"Column__sm-gap__dm1fW\",\"md-gap\":\"Column__md-gap__2h1c8\",\"mdGap\":\"Column__md-gap__2h1c8\",\"lg-gap\":\"Column__lg-gap__3Gzec\",\"lgGap\":\"Column__lg-gap__3Gzec\",\"xl-gap\":\"Column__xl-gap__nKITg\",\"xlGap\":\"Column__xl-gap__nKITg\",\"xs-padding\":\"Column__xs-padding__3cdKO\",\"xsPadding\":\"Column__xs-padding__3cdKO\",\"sm-padding\":\"Column__sm-padding__2pY-s\",\"smPadding\":\"Column__sm-padding__2pY-s\",\"md-padding\":\"Column__md-padding__16bJT\",\"mdPadding\":\"Column__md-padding__16bJT\",\"lg-padding\":\"Column__lg-padding__3AA3L\",\"lgPadding\":\"Column__lg-padding__3AA3L\",\"xl-padding\":\"Column__xl-padding__1tOZj\",\"xlPadding\":\"Column__xl-padding__1tOZj\",\"center\":\"Column__center__Y9mvq\",\"center-vertical\":\"Column__center-vertical__39UmF\",\"centerVertical\":\"Column__center-vertical__39UmF\",\"center-md\":\"Column__center-md__1vzWn\",\"centerMd\":\"Column__center-md__1vzWn\",\"center-vertical-md\":\"Column__center-vertical-md__130FA\",\"centerVerticalMd\":\"Column__center-vertical-md__130FA\",\"grow\":\"Column__grow__397q1\",\"overflow\":\"Column__overflow__2fIrP\",\"margin-0-last-child\":\"Column__margin-0-last-child__1mbso\",\"margin0LastChild\":\"Column__margin-0-last-child__1mbso\"};","module.exports = function() {\n  return require(\"!!/Volumes/evo970/metahubs/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\\\"object\\\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\\\"default\\\",{enumerable:!0,value:e}),2&t&&\\\"string\\\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\\\"a\\\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\\\"https://assets.metaverseplus2.xyz/hubs/\\\",n(n.s=0)}([function(e,t,n){\\\"use strict\\\";n.r(t);var i=\\n/*!\\n * ZipLoader\\n * (c) 2017 @yomotsu\\n * Released under the MIT License.\\n * \\n * ZipLoader uses the library pako released under the MIT license :\\n * https://github.com/nodeca/pako/blob/master/LICENSE\\n */\\nfunction(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var n=\\\"undefined\\\"!=typeof Uint8Array&&\\\"undefined\\\"!=typeof Uint16Array&&\\\"undefined\\\"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if(\\\"object\\\"!=typeof n)throw new TypeError(n+\\\"must be non-object\\\");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var a=0;a<i;a++)e[r+a]=t[n+a]},flattenChunks:function(e){var t,n,i,r,a,o;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(o=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,r),r+=a.length;return o}},a={arraySet:function(e,t,n,i,r){for(var a=0;a<i;a++)e[r+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)}));i.assign,i.shrinkBuf,i.setTyped,i.Buf8,i.Buf16,i.Buf32;var r=function(e,t,n,i){for(var r=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(r=r+t[i++]|0)|0}while(--o);r%=65521,a%=65521}return r|a<<16|0};var a=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var o=function(e,t,n,i){var r=a,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},s=function(e,t){var n,i,r,a,o,s,f,l,d,u,c,h,w,p,b,m,v,k,g,y,x,_,B,A,S;n=e.state,i=e.next_in,A=e.input,r=i+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),f=n.dmax,l=n.wsize,d=n.whave,u=n.wnext,c=n.window,h=n.hold,w=n.bits,p=n.lencode,b=n.distcode,m=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{w<15&&(h+=A[i++]<<w,w+=8,h+=A[i++]<<w,w+=8),k=p[h&m];t:for(;;){if(h>>>=g=k>>>24,w-=g,0===(g=k>>>16&255))S[a++]=65535&k;else{if(!(16&g)){if(0==(64&g)){k=p[(65535&k)+(h&(1<<g)-1)];continue t}if(32&g){n.mode=12;break e}e.msg=\\\"invalid literal/length code\\\",n.mode=30;break e}y=65535&k,(g&=15)&&(w<g&&(h+=A[i++]<<w,w+=8),y+=h&(1<<g)-1,h>>>=g,w-=g),w<15&&(h+=A[i++]<<w,w+=8,h+=A[i++]<<w,w+=8),k=b[h&v];n:for(;;){if(h>>>=g=k>>>24,w-=g,!(16&(g=k>>>16&255))){if(0==(64&g)){k=b[(65535&k)+(h&(1<<g)-1)];continue n}e.msg=\\\"invalid distance code\\\",n.mode=30;break e}if(x=65535&k,w<(g&=15)&&(h+=A[i++]<<w,(w+=8)<g&&(h+=A[i++]<<w,w+=8)),(x+=h&(1<<g)-1)>f){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break e}if(h>>>=g,w-=g,x>(g=a-o)){if((g=x-g)>d&&n.sane){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break e}if(_=0,B=c,0===u){if(_+=l-g,g<y){y-=g;do{S[a++]=c[_++]}while(--g);_=a-x,B=S}}else if(u<g){if(_+=l+u-g,(g-=u)<y){y-=g;do{S[a++]=c[_++]}while(--g);if(_=0,u<y){y-=g=u;do{S[a++]=c[_++]}while(--g);_=a-x,B=S}}}else if(_+=u-g,g<y){y-=g;do{S[a++]=c[_++]}while(--g);_=a-x,B=S}for(;y>2;)S[a++]=B[_++],S[a++]=B[_++],S[a++]=B[_++],y-=3;y&&(S[a++]=B[_++],y>1&&(S[a++]=B[_++]))}else{_=a-x;do{S[a++]=S[_++],S[a++]=S[_++],S[a++]=S[_++],y-=3}while(y>2);y&&(S[a++]=S[_++],y>1&&(S[a++]=S[_++]))}break}}break}}while(i<r&&a<s);i-=y=w>>3,h&=(1<<(w-=y<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=h,n.bits=w},f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],c=function(e,t,n,r,a,o,s,c){var h,w,p,b,m,v,k,g,y,x=c.bits,_=0,B=0,A=0,S=0,U=0,C=0,j=0,O=0,T=0,z=0,R=null,E=0,L=new i.Buf16(16),D=new i.Buf16(16),P=null,H=0;for(_=0;_<=15;_++)L[_]=0;for(B=0;B<r;B++)L[t[n+B]]++;for(U=x,S=15;S>=1&&0===L[S];S--);if(U>S&&(U=S),0===S)return a[o++]=20971520,a[o++]=20971520,c.bits=1,0;for(A=1;A<S&&0===L[A];A++);for(U<A&&(U=A),O=1,_=1;_<=15;_++)if(O<<=1,(O-=L[_])<0)return-1;if(O>0&&(0===e||1!==S))return-1;for(D[1]=0,_=1;_<15;_++)D[_+1]=D[_]+L[_];for(B=0;B<r;B++)0!==t[n+B]&&(s[D[t[n+B]]++]=B);if(0===e?(R=P=s,v=19):1===e?(R=f,E-=257,P=l,H-=257,v=256):(R=d,P=u,v=-1),z=0,B=0,_=A,m=o,C=U,j=0,p=-1,b=(T=1<<U)-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){k=_-j,s[B]<v?(g=0,y=s[B]):s[B]>v?(g=P[H+s[B]],y=R[E+s[B]]):(g=96,y=0),h=1<<_-j,A=w=1<<C;do{a[m+(z>>j)+(w-=h)]=k<<24|g<<16|y|0}while(0!==w);for(h=1<<_-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,B++,0==--L[_]){if(_===S)break;_=t[n+s[B]]}if(_>U&&(z&b)!==p){for(0===j&&(j=U),m+=A,O=1<<(C=_-j);C+j<S&&!((O-=L[C+j])<=0);)C++,O<<=1;if(T+=1<<C,1===e&&T>852||2===e&&T>592)return 1;a[p=z&b]=U<<24|C<<16|m-o|0}}return 0!==z&&(a[m+z]=_-j<<24|64<<16|0),c.bits=U,0};function h(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):-2}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):-2}function m(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,b(e))):-2}function v(e,t){var n,i;return e?(i=new w,e.state=i,i.window=null,0!==(n=m(e,t))&&(e.state=null),n):-2}var k,g,y=!0;function x(e){if(y){var t;for(k=new i.Buf32(512),g=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,k,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,g,0,e.work,{bits:5}),y=!1}e.lencode=k,e.lenbits=9,e.distcode=g,e.distbits=5}function _(e,t,n,r){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>r&&(a=r),i.arraySet(o.window,t,n-r,a,o.wnext),(r-=a)?(i.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}var B={inflateReset:b,inflateReset2:m,inflateResetKeep:p,inflateInit:function(e){return v(e,15)},inflateInit2:v,inflate:function(e,t){var n,a,f,l,d,u,w,p,b,m,v,k,g,y,B,A,S,U,C,j,O,T,z,R,E=0,L=new i.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),d=e.next_out,f=e.output,w=e.avail_out,l=e.next_in,a=e.input,u=e.avail_in,p=n.hold,b=n.bits,m=u,v=w,T=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(2&n.wrap&&35615===p){n.check=0,L[0]=255&p,L[1]=p>>>8&255,n.check=o(n.check,L,2,0),p=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&p)<<8)+(p>>8))%31){e.msg=\\\"incorrect header check\\\",n.mode=30;break}if(8!=(15&p)){e.msg=\\\"unknown compression method\\\",n.mode=30;break}if(b-=4,O=8+(15&(p>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){e.msg=\\\"invalid window size\\\",n.mode=30;break}n.dmax=1<<O,e.adler=n.check=1,n.mode=512&p?10:12,p=0,b=0;break;case 2:for(;b<16;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(n.flags=p,8!=(255&n.flags)){e.msg=\\\"unknown compression method\\\",n.mode=30;break}if(57344&n.flags){e.msg=\\\"unknown header flags set\\\",n.mode=30;break}n.head&&(n.head.text=p>>8&1),512&n.flags&&(L[0]=255&p,L[1]=p>>>8&255,n.check=o(n.check,L,2,0)),p=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}n.head&&(n.head.time=p),512&n.flags&&(L[0]=255&p,L[1]=p>>>8&255,L[2]=p>>>16&255,L[3]=p>>>24&255,n.check=o(n.check,L,4,0)),p=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}n.head&&(n.head.xflags=255&p,n.head.os=p>>8),512&n.flags&&(L[0]=255&p,L[1]=p>>>8&255,n.check=o(n.check,L,2,0)),p=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}n.length=p,n.head&&(n.head.extra_len=p),512&n.flags&&(L[0]=255&p,L[1]=p>>>8&255,n.check=o(n.check,L,2,0)),p=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((k=n.length)>u&&(k=u),k&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,a,l,k,O)),512&n.flags&&(n.check=o(n.check,a,k,l)),u-=k,l+=k,n.length-=k),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break e;k=0;do{O=a[l+k++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O))}while(O&&k<u);if(512&n.flags&&(n.check=o(n.check,a,k,l)),u-=k,l+=k,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break e;k=0;do{O=a[l+k++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O))}while(O&&k<u);if(512&n.flags&&(n.check=o(n.check,a,k,l)),u-=k,l+=k,O)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(p!==(65535&n.check)){e.msg=\\\"header crc mismatch\\\",n.mode=30;break}p=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}e.adler=n.check=h(p),p=0,b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=d,e.avail_out=w,e.next_in=l,e.avail_in=u,n.hold=p,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){p>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}switch(n.last=1&p,b-=1,3&(p>>>=1)){case 0:n.mode=14;break;case 1:if(x(n),n.mode=20,6===t){p>>>=2,b-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg=\\\"invalid block type\\\",n.mode=30}p>>>=2,b-=2;break;case 14:for(p>>>=7&b,b-=7&b;b<32;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if((65535&p)!=(p>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",n.mode=30;break}if(n.length=65535&p,p=0,b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(k=n.length){if(k>u&&(k=u),k>w&&(k=w),0===k)break e;i.arraySet(f,a,l,k,d),u-=k,l+=k,w-=k,d+=k,n.length-=k;break}n.mode=12;break;case 17:for(;b<14;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(n.nlen=257+(31&p),p>>>=5,b-=5,n.ndist=1+(31&p),p>>>=5,b-=5,n.ncode=4+(15&p),p>>>=4,b-=4,n.nlen>286||n.ndist>30){e.msg=\\\"too many length or distance symbols\\\",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}n.lens[D[n.have++]]=7&p,p>>>=3,b-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},T=c(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,T){e.msg=\\\"invalid code lengths set\\\",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;A=(E=n.lencode[p&(1<<n.lenbits)-1])>>>16&255,S=65535&E,!((B=E>>>24)<=b);){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(S<16)p>>>=B,b-=B,n.lens[n.have++]=S;else{if(16===S){for(R=B+2;b<R;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(p>>>=B,b-=B,0===n.have){e.msg=\\\"invalid bit length repeat\\\",n.mode=30;break}O=n.lens[n.have-1],k=3+(3&p),p>>>=2,b-=2}else if(17===S){for(R=B+3;b<R;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}b-=B,O=0,k=3+(7&(p>>>=B)),p>>>=3,b-=3}else{for(R=B+7;b<R;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}b-=B,O=0,k=11+(127&(p>>>=B)),p>>>=7,b-=7}if(n.have+k>n.nlen+n.ndist){e.msg=\\\"invalid bit length repeat\\\",n.mode=30;break}for(;k--;)n.lens[n.have++]=O}}if(30===n.mode)break;if(0===n.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",n.mode=30;break}if(n.lenbits=9,z={bits:n.lenbits},T=c(1,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,T){e.msg=\\\"invalid literal/lengths set\\\",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},T=c(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,T){e.msg=\\\"invalid distances set\\\",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(u>=6&&w>=258){e.next_out=d,e.avail_out=w,e.next_in=l,e.avail_in=u,n.hold=p,n.bits=b,s(e,v),d=e.next_out,f=e.output,w=e.avail_out,l=e.next_in,a=e.input,u=e.avail_in,p=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;A=(E=n.lencode[p&(1<<n.lenbits)-1])>>>16&255,S=65535&E,!((B=E>>>24)<=b);){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(A&&0==(240&A)){for(U=B,C=A,j=S;A=(E=n.lencode[j+((p&(1<<U+C)-1)>>U)])>>>16&255,S=65535&E,!(U+(B=E>>>24)<=b);){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}p>>>=U,b-=U,n.back+=U}if(p>>>=B,b-=B,n.back+=B,n.length=S,0===A){n.mode=26;break}if(32&A){n.back=-1,n.mode=12;break}if(64&A){e.msg=\\\"invalid literal/length code\\\",n.mode=30;break}n.extra=15&A,n.mode=22;case 22:if(n.extra){for(R=n.extra;b<R;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;A=(E=n.distcode[p&(1<<n.distbits)-1])>>>16&255,S=65535&E,!((B=E>>>24)<=b);){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(0==(240&A)){for(U=B,C=A,j=S;A=(E=n.distcode[j+((p&(1<<U+C)-1)>>U)])>>>16&255,S=65535&E,!(U+(B=E>>>24)<=b);){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}p>>>=U,b-=U,n.back+=U}if(p>>>=B,b-=B,n.back+=B,64&A){e.msg=\\\"invalid distance code\\\",n.mode=30;break}n.offset=S,n.extra=15&A,n.mode=24;case 24:if(n.extra){for(R=n.extra;b<R;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break}n.mode=25;case 25:if(0===w)break e;if(k=v-w,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break}k>n.wnext?(k-=n.wnext,g=n.wsize-k):g=n.wnext-k,k>n.length&&(k=n.length),y=n.window}else y=f,g=d-n.offset,k=n.length;k>w&&(k=w),w-=k,n.length-=k;do{f[d++]=y[g++]}while(--k);0===n.length&&(n.mode=21);break;case 26:if(0===w)break e;f[d++]=n.length,w--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===u)break e;u--,p|=a[l++]<<b,b+=8}if(v-=w,e.total_out+=v,n.total+=v,v&&(e.adler=n.check=n.flags?o(n.check,f,v,d-v):r(n.check,f,v,d-v)),v=w,(n.flags?p:h(p))!==n.check){e.msg=\\\"incorrect data check\\\",n.mode=30;break}p=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===u)break e;u--,p+=a[l++]<<b,b+=8}if(p!==(4294967295&n.total)){e.msg=\\\"incorrect length check\\\",n.mode=30;break}p=0,b=0}n.mode=29;case 29:T=1;break e;case 30:T=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=d,e.avail_out=w,e.next_in=l,e.avail_in=u,n.hold=p,n.bits=b,(n.wsize||v!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&_(e,e.output,e.next_out,v-e.avail_out)?(n.mode=31,-4):(m-=e.avail_in,v-=e.avail_out,e.total_in+=m,e.total_out+=v,n.total+=v,n.wrap&&v&&(e.adler=n.check=n.flags?o(n.check,f,v,e.next_out-v):r(n.check,f,v,e.next_out-v)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===m&&0===v||4===t)&&0===T&&(T=-5),T)},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&r(1,t,i,0)!==n.check?-3:_(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:\\\"pako inflate (from Nodeca project)\\\"},A=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch(e){A=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){S=!1}for(var U=new i.Buf8(256),C=0;C<256;C++)U[C]=C>=252?6:C>=248?5:C>=240?4:C>=224?3:C>=192?2:1;U[254]=U[254]=1;function j(e,t){if(t<65537&&(e.subarray&&S||!e.subarray&&A))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n=\\\"\\\",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var O=function(e){var t,n,r,a,o,s=e.length,f=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),f+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(f),o=0,a=0;o<f;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},T=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},z=function(e,t){var n,i,r,a,o=t||e.length,s=new Array(2*o);for(i=0,n=0;n<o;)if((r=e[n++])<128)s[i++]=r;else if((a=U[r])>4)s[i++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&n<o;)r=r<<6|63&e[n++],a--;a>1?s[i++]=65533:r<65536?s[i++]=r:(r-=65536,s[i++]=55296|r>>10&1023,s[i++]=56320|1023&r)}return j(s,i)},R=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+U[e[n]]>t?n:t},E=0,L=2,D=4,P=0,H=1,I=2,N=-5,J={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"};var M=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0};var $=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1},G=Object.prototype.toString;function V(e){if(!(this instanceof V))return new V(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var n=B.inflateInit2(this.strm,t.windowBits);if(n!==P)throw new Error(J[n]);this.header=new $,B.inflateGetHeader(this.strm,this.header)}function q(e,t){var n=new V(t);if(n.push(e,!0),n.err)throw n.msg||J[n.err];return n.result}V.prototype.push=function(e,t){var n,r,a,o,s,f,l=this.strm,d=this.options.chunkSize,u=this.options.dictionary,c=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?D:E,\\\"string\\\"==typeof e?l.input=T(e):\\\"[object ArrayBuffer]\\\"===G.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new i.Buf8(d),l.next_out=0,l.avail_out=d),(n=B.inflate(l,E))===I&&u&&(f=\\\"string\\\"==typeof u?O(u):\\\"[object ArrayBuffer]\\\"===G.call(u)?new Uint8Array(u):u,n=B.inflateSetDictionary(this.strm,f)),n===N&&!0===c&&(n=P,c=!1),n!==H&&n!==P)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(0!==l.avail_out&&n!==H&&(0!==l.avail_in||r!==D&&r!==L)||(\\\"string\\\"===this.options.to?(a=R(l.output,l.next_out),o=l.next_out-a,s=z(l.output,a),l.next_out=o,l.avail_out=d-o,o&&i.arraySet(l.output,l.output,a,o,0),this.onData(s)):this.onData(i.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(c=!0)}while((l.avail_in>0||0===l.avail_out)&&n!==H);return n===H&&(r=D),r===D?(n=B.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===P):r!==L||(this.onEnd(P),l.avail_out=0,!0)},V.prototype.onData=function(e){this.chunks.push(e)},V.prototype.onEnd=function(e){e===P&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var F={Inflate:V,inflate:q,inflateRaw:function(e,t){return(t=t||{}).raw=!0,q(e,t)},ungzip:q};var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this.dataView=new DataView(t),this.position=0}return e.prototype.skip=function(e){this.position+=e},e.prototype.readBytes=function(e){var t=4===e?\\\"getUint32\\\":2===e?\\\"getUint16\\\":\\\"getUint8\\\",n=this.position;return this.position+=e,this.dataView[t](n,!0)},e}(),X=function(e){for(var t=new K(e),n={};;){var i=t.readBytes(4);if(67324752!==i){if(33639248!==i)break;W(t)}else{var r=Q(t);n[r.name]={buffer:r.buffer}}}return n},Q=function(e){var t=0,n=void 0;e.skip(4);var i=e.readBytes(2);e.skip(8);var r=e.readBytes(4);e.skip(4);var a=e.readBytes(2),o=e.readBytes(2),s=[],f=new Uint8Array(r);for(t=0;t<a;t++)s.push(String.fromCharCode(e.readBytes(1)));for(e.skip(o),t=0;t<r;t++)f[t]=e.readBytes(1);switch(i){case 0:n=f;break;case 8:n=new Uint8Array(F.inflate(f,{raw:!0}));break;default:console.log(s.join(\\\"\\\")+\\\": unsupported compression type\\\"),n=f}return{name:s.join(\\\"\\\"),buffer:n}},W=function(e){e.skip(24);var t=e.readBytes(2),n=e.readBytes(2),i=e.readBytes(2);e.skip(12),e.skip(t),e.skip(n),e.skip(i)};var Y=\\\"function\\\"==typeof Promise?Promise:function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e);var n=function(){};return t((function(){n()})),{then:function(e){n=e}}};var Z=0,ee=void 0,te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this._id=Z,this._listeners={},this.url=t,this.files=null,Z++}return e.unzip=function(t){return new Y((function(n){var i=new e,r=new FileReader;r.onload=function(e){var t=e.target.result;i.files=X(t),n(i)},t instanceof Blob&&r.readAsArrayBuffer(t)}))},e.prototype.load=function(){var e=this;return new Y((function(t){var n=Date.now(),i=new XMLHttpRequest;i.open(\\\"GET\\\",e.url,!0),i.responseType=\\\"arraybuffer\\\",i.onprogress=function(t){e.dispatch({type:\\\"progress\\\",loaded:t.loaded,total:t.total,elapsedTime:Date.now()-n})},i.onload=function(){e.files=X(i.response),e.dispatch({type:\\\"load\\\",elapsedTime:Date.now()-n}),t()},i.send()}))},e.prototype.extractAsBlobUrl=function(e,t){if(this.files[e].url)return this.files[e].url;var n=new Blob([this.files[e].buffer],{type:t});return this.files[e].url=URL.createObjectURL(n),this.files[e].url},e.prototype.extractAsText=function(e){var t=this.files[e].buffer;if(\\\"undefined\\\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var n=\\\"\\\",i=0,r=t.length;i<r;i++)n+=String.fromCharCode(t[i]);return decodeURIComponent(escape(n))},e.prototype.extractAsJSON=function(e){return JSON.parse(this.extractAsText(e))},e.prototype.loadThreeJSON=function(e){var t=this,n=this.extractAsJSON(e),i=e.replace(/\\\\/.+\\\\.json$/,\\\"/\\\"),r=\\\"__ziploader_\\\"+this._id+\\\"__\\\",a=new RegExp(r);return-1!==!ee.Loader.Handlers.handlers.indexOf(a)&&ee.Loader.Handlers.add(a,{load:function(e){return t.loadThreeTexture(e.replace(a,\\\"\\\"))}}),ee.JSONLoader.prototype.parse(n,r+i)},e.prototype.loadThreeTexture=function(e){var t=new ee.Texture,n=/\\\\.jpg$/.test(e)?\\\"image/jpeg\\\":/\\\\.png$/.test(e)?\\\"image/png\\\":/\\\\.gif$/.test(e)?\\\"image/gif\\\":void 0,i=new Blob([this.files[e].buffer],{type:n});return t.image=new Image,t.image.addEventListener(\\\"load\\\",(function e(){t.needsUpdate=!0,t.image.removeEventListener(\\\"load\\\",e),URL.revokeObjectURL(t.image.src)})),t.image.src=URL.createObjectURL(i),t},e.prototype.on=function(e,t){this._listeners[e]||(this._listeners[e]=[]),-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)},e.prototype.off=function(e,t){var n=this._listeners[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},e.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t){e.target=this;for(var n=t.length,i=0;i<n;i++)t[i].call(this,e)}},e.prototype.clear=function(e){if(e)return URL.revokeObjectURL(this.files[e].url),void delete this.files[e];for(var t in this.files)URL.revokeObjectURL(this.files[t].url);if(delete this.files,ee){var n=\\\"__ziploader_\\\"+this._id+\\\"__\\\";ee.Loader.Handlers.handlers.some((function(e,t){if(e instanceof RegExp&&e.source===n)return ee.Loader.Handlers.handlers.splice(t,2),!0}))}},e.install=function(e){e.THREE&&(ee=e.THREE)},e}();function ne(e,t,n,i,r,a,o){try{var s=e[a](o),f=s.value}catch(e){return void n(e)}s.done?t(f):Promise.resolve(f).then(i,r)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){ne(a,i,r,o,s,\\\"next\\\",e)}function s(e){ne(a,i,r,o,s,\\\"throw\\\",e)}o(void 0)}))}}function re(){return(re=ie((function*(e){const t=new te(e);return t.load().then(()=>{const e={};for(const n in t.files)e[n]=t.extractAsBlobUrl(n);const n=JSON.parse(t.extractAsText(\\\"scene.gltf\\\"));return n.buffers&&n.buffers.forEach(t=>t.uri=e[t.uri]),n.images&&n.images.forEach(t=>t.uri=e[t.uri]),e[\\\"scene.gtlf\\\"]=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:\\\"text/plain\\\"})),e})}))).apply(this,arguments)}self.onmessage=function(){var e=ie((function*(e){try{const t=yield function(e){return re.apply(this,arguments)}(e.data.payload);self.postMessage({id:e.data.id,result:t})}catch(t){self.postMessage({id:e.data.id,err:t.message})}}));return function(t){return e.apply(this,arguments)}}()}]);\\n//# sourceMappingURL=sketchfab-zip.worker-7073275d8e44913c60f4.js.map\", \"/\" + \"assets/js/sketchfab-zip.worker-7073275d8e44913c60f4.js\");\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Spinner__spinner__Cx7Nr\"};","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\nimport qsTruthy from \"./utils/qs_truthy\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n    this.hubChannel = null;\n    this.mediaDevicesManager = null;\n\n    // TODO: Remove comments\n    // TODO: Rename or reconfigure these as needed\n    this.audios = new Map(); //                           el -> (THREE.Audio || THREE.PositionalAudio)\n    this.sourceType = new Map(); //                       el -> SourceType\n    this.audioOverrides = new Map(); //                   el -> AudioSettings\n    this.zoneOverrides = new Map(); //                    el -> AudioSettings\n    this.audioDebugPanelOverrides = new Map(); // SourceType -> AudioSettings\n    this.sceneAudioDefaults = new Map(); //       SourceType -> AudioSettings\n    this.gainMultipliers = new Map(); //                  el -> Number\n    this.supplementaryAttenuation = new Map(); //         el -> Number\n    this.clippingState = new Set();\n    this.mutedState = new Set();\n    this.isAudioPaused = new Set();\n  }\n\n  // This gets called by a-scene to setup the renderer, camera, and audio listener\n  // TODO ideally the contorl flow here would be inverted, and we would setup this stuff,\n  // initialize aframe, and then run our own RAF loop\n  setupRenderer(sceneEl) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.classList.add(\"a-canvas\");\n    canvas.dataset.aframeCanvas = true;\n\n    // TODO this comes from aframe and prevents zoom on ipad.\n    // This should alreeady be handleed by disable-ios-zoom but it does not appear to work\n    canvas.addEventListener(\"touchmove\", function(event) {\n      event.preventDefault();\n    });\n\n    const renderer = new THREE.WebGLRenderer({\n      // TODO we should not be using alpha: false https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#avoid_alphafalse_which_can_be_expensive\n      alpha: false,\n      antialias: true,\n      depth: true,\n      stencil: true,\n      premultipliedAlpha: true,\n      preserveDrawingBuffer: false,\n      logarithmicDepthBuffer: false,\n      // TODO we probably want high-performance\n      powerPreference: \"default\",\n      canvas\n    });\n\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    renderer.debug.checkShaderErrors = qsTruthy(\"checkShaderErrors\");\n\n    // These get overridden by environment-system but setting to the highly expected defaults to avoid any extra work\n    renderer.physicallyCorrectLights = true;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n\n    sceneEl.appendChild(renderer.domElement);\n\n    const camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.05, 10000);\n\n    const audioListener = new THREE.AudioListener();\n    camera.add(audioListener);\n\n    const renderClock = new THREE.Clock();\n\n    // TODO NAF currently depends on this, it should not\n    sceneEl.clock = renderClock;\n\n    // Main RAF loop\n    function mainTick(_rafTime, xrFrame) {\n      // TODO we should probably be using time from the raf loop itself\n      const delta = renderClock.getDelta() * 1000;\n      const time = renderClock.elapsedTime * 1000;\n\n      // TODO pass this into systems that care about it (like input) once they are moved into this loop\n      sceneEl.frame = xrFrame;\n\n      // Tick AFrame systems and components\n      if (sceneEl.isPlaying) {\n        sceneEl.tick(time, delta);\n      }\n\n      renderer.render(sceneEl.object3D, camera);\n    }\n\n    // This gets called after all system and component init functions\n    sceneEl.addEventListener(\"loaded\", () => {\n      renderer.setAnimationLoop(mainTick);\n      sceneEl.renderStarted = true;\n    });\n\n    return {\n      renderer,\n      camera,\n      audioListener\n    };\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDuplicate(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.898 5H7.227C5.997 5 5 5.996 5 7.226v8.672c0 1.23.997 2.227 2.227 2.227h8.671c1.23 0 2.227-.997 2.227-2.227V7.226c0-1.23-.997-2.226-2.227-2.226z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.98 5l.02-.938a2.194 2.194 0 00-2.188-2.188H4.376a2.507 2.507 0 00-2.5 2.5v8.438a2.194 2.194 0 002.188 2.187H5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.563 8.437v6.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.688 11.562h-6.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgDuplicate.defaultProps = {\n  color: \"#000\",\n  title: \"Duplicate\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0R1cGxpY2F0ZS02MWZiNGI3ZDVlNmU5ZTE3MTMwMzVjZDlhMDY1ZGFjYy5zdmciOw==\";\nexport { SvgDuplicate as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgHelp(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 2a8 8 0 100 16 8 8 0 000-16z\",\n    stroke: props.color,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.454 7.56s.039-.796.89-1.48c.505-.407 1.11-.525 1.656-.533.497-.007.94.076 1.206.202.454.216 1.34.745 1.34 1.868 0 1.182-.773 1.718-1.654 2.309-.88.59-1.12 1.231-1.12 1.893\",\n    stroke: props.color,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.855 14.844a.786.786 0 100-1.57.786.786 0 000 1.57z\",\n    fill: props.color\n  }));\n}\n\nSvgHelp.defaultProps = {\n  color: \"#000\",\n  title: \"Help\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0hlbHAtMDI4NWQzMDFkN2NkYjgwMDA2NGEwZjczNTAyNzQ3MDEuc3ZnIjs=\";\nexport { SvgHelp as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgExternalLink(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 8.749v7.188a1.563 1.563 0 01-1.563 1.562H4.063A1.563 1.563 0 012.5 15.937V6.562a1.562 1.562 0 011.563-1.563h6.542\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.125 2.5H17.5v4.375\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.75 11.248l8.438-8.437\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgExternalLink.defaultProps = {\n  color: \"#000\",\n  title: \"External Link\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0V4dGVybmFsTGluay1kYTZhOTdiMWY5ZDc0MGY2M2I0NzE3ODdjYTgwMmUyMC5zdmciOw==\";\nexport { SvgExternalLink as ReactComponent };","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage, FormattedRelativeTime, useIntl } from \"react-intl\";\nimport styles from \"./MediaTiles.scss\";\nimport { ReactComponent as PeopleIcon } from \"../icons/People.svg\";\nimport { ReactComponent as StarIcon } from \"../icons/Star.svg\";\nimport { ReactComponent as AddIcon } from \"../icons/Add.svg\";\nimport { ReactComponent as PenIcon } from \"../icons/Pen.svg\";\nimport { ReactComponent as DuplicateIcon } from \"../icons/Duplicate.svg\";\nimport { ReactComponent as SearchIcon } from \"../icons/Search.svg\";\nimport { ReactComponent as HelpIcon } from \"../icons/Help.svg\";\nimport { ReactComponent as ExternalLinkIcon } from \"../icons/ExternalLink.svg\";\n\nconst PUBLISHER_FOR_ENTRY_TYPE = {\n  sketchfab_model: \"Sketchfab\",\n  twitch_stream: \"Twitch\"\n};\n\nfunction useThumbnailSize(isImage, isAvatar, imageAspect) {\n  return useMemo(\n    () => {\n      let imageHeight = 220;\n      if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\n\n      // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\n      let imageWidth;\n      if (isImage) {\n        imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\n      } else if (isAvatar) {\n        imageWidth = Math.floor((9 / 16) * imageHeight);\n      } else {\n        imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\n      }\n\n      return [imageWidth, imageHeight];\n    },\n    [isImage, isAvatar, imageAspect]\n  );\n}\n\nfunction useThumbnail(entry, processThumbnailUrl) {\n  const isImage = entry.type.endsWith(\"_image\");\n  const isAvatar = entry.type === \"avatar\" || entry.type === \"avatar_listing\";\n  const imageAspect = entry.images.preview.width / entry.images.preview.height;\n\n  const [thumbnailWidth, thumbnailHeight] = useThumbnailSize(isImage, isAvatar, imageAspect);\n\n  const thumbnailUrl = useMemo(\n    () => {\n      return processThumbnailUrl\n        ? processThumbnailUrl(entry, thumbnailWidth, thumbnailHeight)\n        : entry.images.preview.url;\n    },\n    [entry, thumbnailWidth, thumbnailHeight, processThumbnailUrl]\n  );\n\n  return [thumbnailUrl, thumbnailWidth, thumbnailHeight];\n}\n\nfunction BaseTile({ as: TileComponent, className, name, description, tall, wide, children, ...rest }) {\n  let additionalProps;\n\n  if (TileComponent === \"div\") {\n    additionalProps = {\n      tabIndex: \"0\",\n      role: \"button\"\n    };\n  }\n\n  return (\n    <TileComponent\n      className={classNames(styles.mediaTile, { [styles.tall]: tall, [styles.wide]: wide }, className)}\n      {...additionalProps}\n      {...rest}\n    >\n      <div className={styles.thumbnailContainer}>{children}</div>\n      {(name || description) && (\n        <div className={styles.info}>\n          <b>{name}</b>\n          {description && <small className={styles.description}>{description}</small>}\n        </div>\n      )}\n    </TileComponent>\n  );\n}\n\nBaseTile.propTypes = {\n  as: PropTypes.elementType,\n  className: PropTypes.string,\n  name: PropTypes.string,\n  description: PropTypes.node,\n  children: PropTypes.node,\n  tall: PropTypes.bool,\n  wide: PropTypes.bool\n};\n\nBaseTile.defaultProps = {\n  as: \"div\"\n};\n\nfunction TileAction({ className, children, ...rest }) {\n  return (\n    <button type=\"button\" className={classNames(styles.tileAction, className)} {...rest}>\n      {children}\n    </button>\n  );\n}\n\nTileAction.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n\nexport function CreateTile({ label, type, ...rest }) {\n  return (\n    <BaseTile className={styles.createTile} wide={type === \"scene\"} tall={type === \"avatar\"} {...rest}>\n      <div className={styles.createTileContent}>\n        <AddIcon width={48} height={48} />\n        <p>{label}</p>\n      </div>\n    </BaseTile>\n  );\n}\n\nCreateTile.propTypes = {\n  label: PropTypes.node,\n  type: PropTypes.string\n};\n\nexport function MediaTile({ entry, processThumbnailUrl, onClick, onEdit, onShowSimilar, onCopy, onInfo, ...rest }) {\n  const intl = useIntl();\n  const creator = entry.attributions && entry.attributions.creator;\n  const publisherName =\n    (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\n    PUBLISHER_FOR_ENTRY_TYPE[entry.type];\n\n  const [thumbnailUrl, thumbnailWidth, thumbnailHeight] = useThumbnail(entry, processThumbnailUrl);\n\n  return (\n    <BaseTile\n      wide={entry.type === \"scene\" || entry.type === \"scene_listing\" || entry.type === \"room\"}\n      tall={entry.type === \"avatar\" || entry.type === \"avatar_listing\"}\n      name={entry.name}\n      description={\n        <>\n          {creator && creator.name === undefined && <span>{creator}</span>}\n          {creator && creator.name && !creator.url && <span>{creator.name}</span>}\n          {creator &&\n            creator.name &&\n            creator.url && (\n              <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {creator.name}\n              </a>\n            )}\n          {publisherName && (\n            <>\n              <a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                <ExternalLinkIcon /> {publisherName}\n              </a>\n            </>\n          )}\n          {entry.last_activated_at && (\n            <small>\n              <FormattedMessage\n                id=\"media-tile.joined-room\"\n                defaultMessage=\"Joined {relativeTime}\"\n                values={{\n                  relativeTime: (\n                    <FormattedRelativeTime\n                      updateIntervalInSeconds={10}\n                      value={(new Date(entry.last_activated_at).getTime() - Date.now()) / 1000}\n                    />\n                  )\n                }}\n              />\n            </small>\n          )}\n        </>\n      }\n      {...rest}\n    >\n      <a className={styles.thumbnailLink} href={entry.url} rel=\"noreferrer noopener\" onClick={onClick}>\n        {entry.images.preview.type === \"mp4\" ? (\n          <video\n            muted\n            autoPlay\n            playsInline\n            loop\n            src={thumbnailUrl}\n            alt={entry.name}\n            width={thumbnailWidth}\n            height={thumbnailHeight}\n          />\n        ) : (\n          <img src={thumbnailUrl} alt={entry.name} width={thumbnailWidth} height={thumbnailHeight} />\n        )}\n      </a>\n      {entry.favorited && <StarIcon className={styles.favoriteIcon} />}\n      {entry.member_count !== undefined && (\n        <div className={styles.memberCount}>\n          <PeopleIcon /> <span>{entry.member_count}</span>\n        </div>\n      )}\n      <div className={styles.tileActions}>\n        {entry.type === \"avatar\" && (\n          <TileAction\n            title={intl.formatMessage({ id: \"media-tile.action.edit-avatar\", defaultMessage: \"Edit avatar\" })}\n            onClick={onEdit}\n          >\n            <PenIcon />\n          </TileAction>\n        )}\n        {entry.type === \"scene\" &&\n          entry.project_id && (\n            <TileAction\n              onClick={onEdit}\n              title={intl.formatMessage({ id: \"media-tile.action.edit-scene\", defaultMessage: \"Edit scene\" })}\n            >\n              <PenIcon />\n            </TileAction>\n          )}\n        {entry.type === \"avatar_listing\" && (\n          <TileAction\n            title={intl.formatMessage({\n              id: \"media-tile.action.show-similar-avatars\",\n              defaultMessage: \"Show similar avatars\"\n            })}\n            onClick={onShowSimilar}\n          >\n            <SearchIcon />\n          </TileAction>\n        )}\n        {entry.type === \"avatar_listing\" &&\n          entry.allow_remixing && (\n            <TileAction\n              title={intl.formatMessage({\n                id: \"media-tile.action.copy-avatar\",\n                defaultMessage: \"Copy to my avatars\"\n              })}\n              onClick={onCopy}\n            >\n              <DuplicateIcon />\n            </TileAction>\n          )}\n        {entry.type === \"scene_listing\" &&\n          entry.allow_remixing && (\n            <TileAction\n              title={intl.formatMessage({\n                id: \"media-tile.action.copy-scene\",\n                defaultMessage: \"Copy to my scenes\"\n              })}\n              onClick={onCopy}\n            >\n              <DuplicateIcon />\n            </TileAction>\n          )}\n        {entry.type === \"room\" &&\n          onInfo &&\n          entry.description && (\n            <TileAction\n              title={intl.formatMessage({\n                id: \"media-tile.action.room-info\",\n                defaultMessage: \"Room info\"\n              })}\n              onClick={onInfo}\n            >\n              <HelpIcon />\n            </TileAction>\n          )}\n      </div>\n    </BaseTile>\n  );\n}\n\nMediaTile.propTypes = {\n  entry: PropTypes.object.isRequired,\n  processThumbnailUrl: PropTypes.func,\n  onClick: PropTypes.func,\n  onEdit: PropTypes.func,\n  onShowSimilar: PropTypes.func,\n  onCopy: PropTypes.func,\n  onInfo: PropTypes.func\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"Toolbar__toolbar__A751R\",\"content\":\"Toolbar__content__re76m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggle-input\":\"ToggleInput__toggle-input__3ReS2\",\"toggleInput\":\"ToggleInput__toggle-input__3ReS2\",\"track\":\"ToggleInput__track__3L23X\",\"disabled\":\"ToggleInput__disabled__2QeSg\",\"label-container\":\"ToggleInput__label-container__2kq7M\",\"labelContainer\":\"ToggleInput__label-container__2kq7M\",\"label\":\"ToggleInput__label__3fVT7\",\"description\":\"ToggleInput__description__Wffxp\",\"button\":\"ToggleInput__button__TabR1\"};","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport defaultAvatar from \"../assets/models/DefaultAvatar.glb\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction chooseRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport async function fetchRandomDefaultAvatarId() {\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries || [];\n  if (defaultAvatars.length === 0) {\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\n    // when running against a fresh reticulum server, e.g. a local ret instance.\n    return new URL(defaultAvatar, location.href).href;\n  }\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\n  return chooseRandom(avatarIds);\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\nimport { qsGet } from \"../utils/qs_truthy.js\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\nimport { NO_DEVICE_ID } from \"../utils/media-devices-utils.js\";\n\nconst defaultMaterialQuality = (function() {\n  const MATERIAL_QUALITY_OPTIONS = [\"low\", \"medium\", \"high\"];\n\n  // HACK: AFRAME is not available on all pages, so we catch the ReferenceError.\n  // We could move AFRAME's device utils into a separate package (or into this repo)\n  // if we wanted to use these checks without having to import all of AFRAME.\n  const isMobile = window.AFRAME && (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR());\n  if (isMobile) {\n    const qsMobileDefault = qsGet(\"default_mobile_material_quality\");\n    if (qsMobileDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsMobileDefault) !== -1) {\n      return qsMobileDefault;\n    }\n    return \"low\";\n  }\n\n  const qsDefault = qsGet(\"default_material_quality\");\n  if (qsDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsDefault) !== -1) {\n    return qsDefault;\n  }\n\n  return \"high\";\n})();\n\n//workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1626081 : disable echoCancellation, noiseSuppression, autoGainControl\nconst isFirefoxReality = window.AFRAME?.utils.device.isMobileVR() && navigator.userAgent.match(/Firefox/);\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9_~ -]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" },\n        micMuted: { type: \"bool\" }\n      }\n    },\n\n    preferences: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        shouldPromptForRefresh: { type: \"bool\", default: false },\n        // Preferred media will be set dynamically\n        preferredMic: { type: \"string\", default: NO_DEVICE_ID },\n        preferredSpeakers: { type: \"string\", default: NO_DEVICE_ID },\n        preferredCamera: { type: \"string\", default: NO_DEVICE_ID },\n        muteMicOnEntry: { type: \"bool\", default: false },\n        disableLeftRightPanning: { type: \"bool\", default: false },\n        audioNormalization: { type: \"bool\", default: 0.0 },\n        invertTouchscreenCameraMove: { type: \"bool\", default: true },\n        enableOnScreenJoystickLeft: { type: \"bool\", default: false },\n        enableOnScreenJoystickRight: { type: \"bool\", default: false },\n        enableGyro: { type: \"bool\", default: true },\n        animateWaypointTransitions: { type: \"bool\", default: true },\n        showFPSCounter: { type: \"bool\", default: false },\n        allowMultipleHubsInstances: { type: \"bool\", default: false },\n        disableIdleDetection: { type: \"bool\", default: false },\n        fastRoomSwitching: { type: \"bool\", default: false },\n        lazyLoadSceneMedia: { type: \"bool\", default: false },\n        preferMobileObjectInfoPanel: { type: \"bool\", default: false },\n        // if unset, maxResolution = screen resolution\n        maxResolutionWidth: { type: \"number\", default: undefined },\n        maxResolutionHeight: { type: \"number\", default: undefined },\n        globalVoiceVolume: { type: \"number\", default: 100 },\n        globalMediaVolume: { type: \"number\", default: 100 },\n        globalSFXVolume: { type: \"number\", default: 100 },\n        snapRotationDegrees: { type: \"number\", default: 45 },\n        materialQualitySetting: { type: \"string\", default: defaultMaterialQuality },\n        enableDynamicShadows: { type: \"bool\", default: false },\n        disableSoundEffects: { type: \"bool\", default: false },\n        disableMovement: { type: \"bool\", default: false },\n        disableBackwardsMovement: { type: \"bool\", default: false },\n        disableStrafing: { type: \"bool\", default: false },\n        disableTeleporter: { type: \"bool\", default: false },\n        disableAutoPixelRatio: { type: \"bool\", default: false },\n        movementSpeedModifier: { type: \"number\", default: 1 },\n        disableEchoCancellation: { type: \"bool\", default: isFirefoxReality },\n        disableNoiseSuppression: { type: \"bool\", default: isFirefoxReality },\n        disableAutoGainControl: { type: \"bool\", default: isFirefoxReality },\n        locale: { type: \"string\", default: \"browser\" },\n        showRtcDebugPanel: { type: \"bool\", default: false },\n        showAudioDebugPanel: { type: \"bool\", default: false },\n        enableAudioClipping: { type: \"bool\", default: false },\n        audioClippingThreshold: { type: \"number\", default: 0.015 },\n        theme: { type: \"string\", default: undefined },\n        cursorSize: { type: \"number\", default: 1 },\n        nametagVisibility: { type: \"string\", default: \"showAll\" },\n        nametagVisibilityDistance: { type: \"number\", default: 5 },\n        avatarVoiceLevels: { type: \"object\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    preferences: { $ref: \"#/definitions/preferences\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    this._preferences = {};\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: [],\n      preferences: {}\n    });\n\n    this._shouldResetAvatarOnInit = false;\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this._shouldResetAvatarOnInit = true;\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n\n    this._signOutOnExpiredAuthToken();\n\n    const maybeDispatchThemeChanged = (() => {\n      let previous;\n      return () => {\n        const current = this.state.preferences.theme;\n        if ((previous || current) && previous !== current) {\n          this.dispatchEvent(new CustomEvent(\"themechanged\", { detail: { current, previous } }));\n        }\n        previous = current;\n      };\n    })();\n    this.addEventListener(\"statechanged\", maybeDispatchThemeChanged);\n  }\n\n  _signOutOnExpiredAuthToken = () => {\n    if (!this.state.credentials.token) return;\n\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\n    if (expiry <= Date.now()) {\n      this.update({ credentials: { token: null, email: null } });\n    }\n  };\n\n  initProfile = async () => {\n    if (this._shouldResetAvatarOnInit) {\n      await this.resetToRandomDefaultAvatar();\n    } else {\n      this.update({\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\n      });\n    }\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomDefaultAvatar = async () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      const state = (this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY)));\n      if (!state.preferences) state.preferences = {};\n      this._preferences = { ...state.preferences }; // cache prefs without injected defaults\n      // inject default values\n      for (const [key, props] of Object.entries(SCHEMA.definitions.preferences.properties)) {\n        if (!props.hasOwnProperty(\"default\")) continue;\n        if (!state.preferences.hasOwnProperty(key)) {\n          state.preferences[key] = props.default;\n        } else if (state.preferences[key] === props.default) {\n          delete this._preferences[key];\n        }\n      }\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge({ ...this.state, preferences: this._preferences }, newState, mergeOpts);\n    const { valid, errors } = validator.validate(finalState, SCHEMA);\n\n    // Cleanup unsupported properties\n    if (!valid) {\n      errors.forEach(error => {\n        console.error(`Removing invalid preference from store: ${error.message}`);\n        delete error.instance[error.argument];\n      });\n    }\n\n    if (newState.preferences) {\n      // clear preference if equal to default value so that, when client is updated with different defaults,\n      // new defaults will apply without user action\n      for (const [key, value] of Object.entries(finalState.preferences)) {\n        if (\n          SCHEMA.definitions.preferences.properties[key]?.hasOwnProperty(\"default\") &&\n          value === SCHEMA.definitions.preferences.properties[key].default\n        ) {\n          delete finalState.preferences[key];\n        }\n      }\n      this._preferences = finalState.preferences;\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n\n  get schema() {\n    return SCHEMA;\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"no-default-button-style\":\"globals__no-default-button-style__2LSUQ\",\"noDefaultButtonStyle\":\"globals__no-default-button-style__2LSUQ\"};","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\n\nconst components = [];\nexport class AnimationMixerSystem {\n  tick(dt) {\n    for (let i = 0; i < components.length; i++) {\n      const cmp = components[i];\n      if (cmp.mixer) {\n        cmp.mixer.update(dt / 1000);\n      }\n    }\n  }\n}\n\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n  play() {\n    components.push(this);\n  },\n  pause() {\n    components.splice(components.indexOf(this), 1);\n  }\n});\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPeople(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.703 6.563c-.114 1.588-1.293 2.812-2.578 2.812s-2.466-1.223-2.578-2.812c-.117-1.653 1.03-2.813 2.578-2.813 1.548 0 2.695 1.19 2.578 2.813z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.125 11.875c-2.546 0-4.994 1.264-5.607 3.727-.081.326.123.648.458.648h10.299c.335 0 .538-.322.458-.648-.614-2.502-3.062-3.727-5.608-3.727z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.812 7.264C7.721 8.532 6.77 9.53 5.742 9.53c-1.026 0-1.98-.998-2.07-2.267C3.578 5.944 4.505 5 5.742 5c1.237 0 2.164.968 2.07 2.264z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.047 11.954c-.705-.324-1.482-.448-2.305-.448-2.031 0-3.988 1.01-4.478 2.977-.065.26.098.517.366.517h4.386\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }));\n}\n\nSvgPeople.defaultProps = {\n  color: \"#000\",\n  title: \"People\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1Blb3BsZS0wMTNlN2ZkZmE2MzRiNjFmZjVhZTYxODFmMWI1YzVlMy5zdmciOw==\";\nexport { SvgPeople as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAdd(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 4.375v11.25\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.625 10H4.375\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }));\n}\n\nSvgAdd.defaultProps = {\n  color: \"#000\",\n  title: \"Add\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL0FkZC1iNmE1NTQ1YzdlZjY4ZTA5YjBhOWU1ZGFiZGM0YmQ5ZS5zdmciOw==\";\nexport { SvgAdd as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSearch(_ref) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.636 2.5a6.136 6.136 0 100 12.273 6.136 6.136 0 000-12.272v0z\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.214 13.214L17.5 17.5\",\n    stroke: props.color,\n    strokeWidth: 1.5,\n    strokeMiterlimit: 10,\n    strokeLinecap: \"round\"\n  }));\n}\n\nSvgSearch.defaultProps = {\n  color: \"#000\",\n  title: \"Search\"\n};\nexport default \"data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJyZWFjdC1jb21wb25lbnRzL2ljb25zL1NlYXJjaC1kMTE4YzVjN2NmM2QyOWRjMjAzNjJjY2JlYjQ5NWMyMS5zdmciOw==\";\nexport { SvgSearch as ReactComponent };","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer({ forceWebVR: true });\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.getContext().getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n\nexport function getWebGLVersion(renderer) {\n  const gl = renderer.getContext();\n  return gl.getParameter(gl.VERSION).split(\" \")[1];\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport function LegalMessage({ termsUrl, privacyUrl }) {\n  const toslink = useCallback(\n    chunks => (\n      <a rel=\"noopener noreferrer\" target=\"_blank\" href={termsUrl}>\n        {chunks}\n      </a>\n    ),\n    [termsUrl]\n  );\n\n  const privacylink = useCallback(\n    chunks => (\n      <a rel=\"noopener noreferrer\" target=\"_blank\" href={privacyUrl}>\n        {chunks}\n      </a>\n    ),\n    [privacyUrl]\n  );\n\n  if (termsUrl && privacyUrl) {\n    return (\n      <FormattedMessage\n        id=\"legal-message.tos-and-privacy\"\n        defaultMessage=\"By proceeding, you agree to the TOS\"\n        values={{\n          toslink,\n          privacylink\n        }}\n      />\n    );\n  }\n\n  if (termsUrl && !privacyUrl) {\n    return (\n      <FormattedMessage\n        id=\"legal-message.tos\"\n        defaultMessage=\"By proceeding, you agree to the <toslink>terms of use</toslink>.\"\n        values={{\n          toslink\n        }}\n      />\n    );\n  }\n\n  if (!termsUrl && privacyUrl) {\n    return (\n      <FormattedMessage\n        id=\"legal-message.privacy\"\n        defaultMessage=\"By proceeding, you agree to the <privacylink>privacy notice</privacylink>.\"\n        values={{\n          privacylink\n        }}\n      />\n    );\n  }\n\n  return null;\n}\n\nLegalMessage.propTypes = {\n  termsUrl: PropTypes.string,\n  privacyUrl: PropTypes.string\n};\n","import cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { getColorSchemePref } from \"../utils/get-color-scheme-pref\";\nimport classNames from \"classnames\";\n\n// It seems we need to use require to import modules\n// under the three/examples/js to avoid tree shaking\n// in webpack production mode.\nrequire(\"three/examples/js/controls/OrbitControls\");\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode, findNode } from \"../utils/three-utils\";\nimport { ensureAvatarMaterial, MAT_NAME } from \"../utils/avatar-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context, forceWebVR: true });\n  renderer.outputEncoding = THREE.sRGBEncoding;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nfunction getThemeBackground() {\n  const currentTheme = APP?.store?.state?.preferences?.theme;\n  const themes = window.APP_CONFIG?.theme?.themes;\n  const currentThemeObject = themes?.find(t => t.id === currentTheme) || getColorSchemePref();\n  const previewBackgroundColor = new THREE.Color(currentThemeObject?.variables[\"background3-color\"] || 0xeaeaea);\n  return previewBackgroundColor;\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string,\n    onGltfLoaded: PropTypes.func\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n    this.mounted = false;\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.screenSpacePanning = true;\n    this.controls.enableKeys = true;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.loadId = 0;\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadCurrentAvatarGltfUrl();\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(getThemeBackground());\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n\n    this.mounted = true;\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    this.mounted = false;\n\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadCurrentAvatarGltfUrl();\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  async loadCurrentAvatarGltfUrl() {\n    const newLoadId = ++this.loadId;\n    const url = proxiedUrlFor(this.props.avatarGltfUrl);\n    const gltf = await this.loadPreviewAvatar(url);\n    // If we had started loading another avatar while we were loading this one, throw this one away\n    if (!this.mounted || newLoadId !== this.loadId) return;\n    if (gltf && this.props.onGltfLoaded) this.props.onGltfLoaded(gltf);\n    this.setAvatar(gltf.scene);\n  }\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\", null, ensureAvatarMaterial);\n    } catch (e) {\n      console.error(\"Failed to load avatar preview\", e);\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    if (!this.mounted) return;\n\n    // TODO Check for \"Bot_Skinned\" here is a hack for legacy avatars which only has a name one of the MOZ_alt_material nodes\n    this.previewMesh = findNode(\n      gltf.scene,\n      n => (n.isMesh && n.material && n.material.name === MAT_NAME) || n.name === \"Bot_Skinned\"\n    );\n\n    if (!this.previewMesh) {\n      console.error(\"Failed to find avatar preview mesh\");\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(gltf.scene);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    gltf.scene.traverse(node => {\n      // Camera in preview is pretty tight, and skinned meshes tend to have poor bounding boxes\n      if (node.isSkinnedMesh) {\n        node.frustumCulled = false;\n      }\n\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      if (node.material) {\n        const removeOnUpdate = p => node.material[p] && delete node.material[p].onUpdate;\n        TEXTURE_PROPS[\"base_map\"].forEach(removeOnUpdate);\n        TEXTURE_PROPS[\"emissive_map\"].forEach(removeOnUpdate);\n        TEXTURE_PROPS[\"normal_map\"].forEach(removeOnUpdate);\n        TEXTURE_PROPS[\"orm_map\"].forEach(removeOnUpdate);\n      }\n    });\n\n    const { material } = this.previewMesh;\n    if (material) {\n      const getImage = p => material[p] && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      const dependencies = [\n        this.applyMaps({}, this.props) // Apply initial maps\n      ];\n\n      // Low and medium quality materials don't use environment maps\n      if (window.APP.store.state.preferences.materialQualitySetting === \"high\") {\n        dependencies.push(\n          // TODO apply environment map to secondary materials as well\n          createDefaultEnvironmentMap().then(t => {\n            this.previewMesh.material.envMap = t;\n            this.previewMesh.material.needsUpdate = true;\n          })\n        );\n      }\n\n      await Promise.all(dependencies);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n\n      // Low quality materials are missing normal maps\n      if (prop === \"normalMap\" && window.APP.store.state.preferences.materialQualitySetting === \"low\") {\n        return;\n      }\n\n      // Medium Quality materials are missing metalness and roughness maps\n      if (\n        (prop === \"roughnessMap\" || prop === \"metalnessMap\") &&\n        window.APP.store.state.preferences.materialQualitySetting !== \"high\"\n      ) {\n        return;\n      }\n\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n\n      if (texture) {\n        texture.image = bm;\n        texture.needsUpdate = true;\n      }\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotCamera.position.copy(this.camera.position);\n      this.snapshotCamera.rotation.copy(this.camera.rotation);\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {!this.props.avatarGltfUrl ||\n          (this.state.loading &&\n            !this.state.error && (\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            ))}\n        {this.props.avatarGltfUrl &&\n          (this.state.error && !this.state.loading) && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage\n                id=\"avatar-preview.loading-failed\"\n                defaultMessage=\"Loading failed{linebreak}Please choose another avatar\"\n                values={{ linebreak: <br /> }}\n              />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { forwardRef: true });\n","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"room-permissions\":\"RoomSettingsSidebar__room-permissions__30BnJ\",\"roomPermissions\":\"RoomSettingsSidebar__room-permissions__30BnJ\",\"permissions-group\":\"RoomSettingsSidebar__permissions-group__3VoIc\",\"permissionsGroup\":\"RoomSettingsSidebar__permissions-group__3VoIc\",\"confirm-revoke-button\":\"RoomSettingsSidebar__confirm-revoke-button__hhk_l\",\"confirmRevokeButton\":\"RoomSettingsSidebar__confirm-revoke-button__hhk_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar__sidebar__31EOU\",\"header\":\"Sidebar__header__Sw_C4\",\"before-title\":\"Sidebar__before-title__1dOWa\",\"beforeTitle\":\"Sidebar__before-title__1dOWa\",\"after-title\":\"Sidebar__after-title__2nLsi\",\"afterTitle\":\"Sidebar__after-title__2nLsi\",\"content\":\"Sidebar__content__1FPYB\",\"overflow-y\":\"Sidebar__overflow-y__alRGc\",\"overflowY\":\"Sidebar__overflow-y__alRGc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullscreen-layout\":\"FullscreenLayout__fullscreen-layout__2DFsg\",\"fullscreenLayout\":\"FullscreenLayout__fullscreen-layout__2DFsg\",\"header\":\"FullscreenLayout__header__3czso\",\"header-left\":\"FullscreenLayout__header-left__1Lfzu\",\"headerLeft\":\"FullscreenLayout__header-left__1Lfzu\",\"header-center\":\"FullscreenLayout__header-center__3QmGB\",\"headerCenter\":\"FullscreenLayout__header-center__3QmGB\",\"header-right\":\"FullscreenLayout__header-right__3NutT\",\"headerRight\":\"FullscreenLayout__header-right__3NutT\",\"content\":\"FullscreenLayout__content__17OJM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"no-default-button-style\":\"preload-overlay__no-default-button-style__gwKec\",\"noDefaultButtonStyle\":\"preload-overlay__no-default-button-style__gwKec\",\"treatment\":\"preload-overlay__treatment__1L4r0\",\"screenshot\":\"preload-overlay__screenshot__3TZYm\",\"hub-name\":\"preload-overlay__hub-name__2txaT\",\"hubName\":\"preload-overlay__hub-name__2txaT\",\"main-panel\":\"preload-overlay__main-panel__2EX4k\",\"mainPanel\":\"preload-overlay__main-panel__2EX4k\",\"logo\":\"preload-overlay__logo__1IJJc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select-input\":\"SelectInputField__select-input__1f43w\",\"selectInput\":\"SelectInputField__select-input__1f43w\",\"dropdown-button\":\"SelectInputField__dropdown-button__ijkrA\",\"dropdownButton\":\"SelectInputField__dropdown-button__ijkrA\",\"dropdown\":\"SelectInputField__dropdown__2U3K0\",\"open\":\"SelectInputField__open__souoW\",\"dropdown-item\":\"SelectInputField__dropdown-item__I76nk\",\"dropdownItem\":\"SelectInputField__dropdown-item__I76nk\",\"highlighted-item\":\"SelectInputField__highlighted-item__1XEWG\",\"highlightedItem\":\"SelectInputField__highlighted-item__1XEWG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"more-menu-popover\":\"MoreMenuPopover__more-menu-popover__2IfA_\",\"moreMenuPopover\":\"MoreMenuPopover__more-menu-popover__2IfA_\",\"more-menu-group-label\":\"MoreMenuPopover__more-menu-group-label__mOCu2\",\"moreMenuGroupLabel\":\"MoreMenuPopover__more-menu-group-label__mOCu2\",\"more-menu-item-list\":\"MoreMenuPopover__more-menu-item-list__1LJri\",\"moreMenuItemList\":\"MoreMenuPopover__more-menu-item-list__1LJri\",\"more-menu-item-target\":\"MoreMenuPopover__more-menu-item-target__TvxV4\",\"moreMenuItemTarget\":\"MoreMenuPopover__more-menu-item-target__TvxV4\",\"compact-button\":\"MoreMenuPopover__compact-button__BxieG\",\"compactButton\":\"MoreMenuPopover__compact-button__BxieG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"radio-input\":\"RadioInput__radio-input__2oCwm\",\"radioInput\":\"RadioInput__radio-input__2oCwm\",\"option\":\"RadioInput__option__2L5bU\",\"input\":\"RadioInput__input__189gK\",\"content\":\"RadioInput__content__2MaqU\",\"label\":\"RadioInput__label__2IXV7\",\"description\":\"RadioInput__description__3lX8c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"media\":\"TweetEditorModal__media__2-s5G\",\"editor\":\"TweetEditorModal__editor__iyyNJ\",\"editor-inner\":\"TweetEditorModal__editor-inner__1RjaM\",\"editorInner\":\"TweetEditorModal__editor-inner__1RjaM\",\"emoji-button\":\"TweetEditorModal__emoji-button__8L-8v\",\"emojiButton\":\"TweetEditorModal__emoji-button__8L-8v\",\"counter\":\"TweetEditorModal__counter__1fyfG\"};","import React, { useCallback, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CloseButton } from \"../input/CloseButton\";\nimport { Modal } from \"../modal/Modal\";\nimport { FormattedMessage, useIntl, defineMessages } from \"react-intl\";\nimport { CancelButton, NextButton, ContinueButton } from \"../input/Button\";\nimport { TextInputField } from \"../input/TextInputField\";\nimport { Column } from \"../layout/Column\";\nimport { LegalMessage } from \"./LegalMessage\";\n\nexport const SignInStep = {\n  submit: \"submit\",\n  waitForVerification: \"waitForVerification\",\n  complete: \"complete\"\n};\n\nexport const SignInMessages = defineMessages({\n  pin: {\n    id: \"sign-in-modal.signin-message.pin\",\n    defaultMessage: \"You'll need to sign in to pin objects.\"\n  },\n  unpin: {\n    id: \"sign-in-modal.signin-message.unpin\",\n    defaultMessage: \"You'll need to sign in to un-pin objects.\"\n  },\n  changeScene: {\n    id: \"sign-in-modal.signin-message.change-scene\",\n    defaultMessage: \"You'll need to sign in to change the scene.\"\n  },\n  roomSettings: {\n    id: \"sign-in-modal.signin-message.room-settings\",\n    defaultMessage: \"You'll need to sign in to change the room's settings.\"\n  },\n  closeRoom: {\n    id: \"sign-in-modal.signin-message.close-room\",\n    defaultMessage: \"You'll need to sign in to close the room.\"\n  },\n  muteUser: {\n    id: \"sign-in-modal.signin-message.mute-user\",\n    defaultMessage: \"You'll need to sign in to mute other users.\"\n  },\n  kickUser: {\n    id: \"sign-in-modal.signin-message.kick-user\",\n    defaultMessage: \"You'll need to sign in to kick other users.\"\n  },\n  addOwner: {\n    id: \"sign-in-modal.signin-message.add-owner\",\n    defaultMessage: \"You'll need to sign in to assign moderators.\"\n  },\n  removeOwner: {\n    id: \"sign-in-modal.signin-message.remove-owner\",\n    defaultMessage: \"You'll need to sign in to assign moderators.\"\n  },\n  createAvatar: {\n    id: \"sign-in-modal.signin-message.create-avatar\",\n    defaultMessage: \"You'll need to sign in to create avatars.\"\n  },\n  remixAvatar: {\n    id: \"sign-in-modal.signin-message.remix-avatar\",\n    defaultMessage: \"You'll need to sign in to remix avatars.\"\n  },\n  remixScene: {\n    id: \"sign-in-modal.signin-message.remix-scene\",\n    defaultMessage: \"You'll need to sign in to remix scenes.\"\n  },\n  favoriteRoom: {\n    id: \"sign-in-modal.signin-message.favorite-room\",\n    defaultMessage: \"You'll need to sign in to add this room to your favorites.\"\n  },\n  favoriteRooms: {\n    id: \"sign-in-modal.signin-message.favorite-rooms\",\n    defaultMessage: \"You'll need to sign in to add favorite rooms.\"\n  },\n  tweet: {\n    id: \"sign-in-modal.signin-message.tweet\",\n    defaultMessage: \"You'll need to sign in to send tweets.\"\n  }\n});\n\nexport function SubmitEmail({ onSubmitEmail, initialEmail, privacyUrl, termsUrl, message }) {\n  const intl = useIntl();\n\n  const [email, setEmail] = useState(initialEmail);\n\n  const onSubmitForm = useCallback(\n    e => {\n      e.preventDefault();\n      onSubmitEmail(email);\n    },\n    [onSubmitEmail, email]\n  );\n\n  const onChangeEmail = useCallback(\n    e => {\n      setEmail(e.target.value);\n    },\n    [setEmail]\n  );\n\n  return (\n    <Column center padding as=\"form\" onSubmit={onSubmitForm}>\n      <p>\n        {message ? (\n          intl.formatMessage(message)\n        ) : (\n          <FormattedMessage id=\"sign-in-modal.prompt\" defaultMessage=\"enter email to sign in :\" />\n        )}\n      </p>\n      <TextInputField\n        name=\"email\"\n        type=\"email\"\n        required\n        value={email}\n        onChange={onChangeEmail}\n        placeholder=\"user@metaverseplus.xyz\"\n      />\n      <p>\n        <small>\n          <LegalMessage termsUrl={termsUrl} privacyUrl={privacyUrl} />\n        </small>\n      </p>\n      <NextButton type=\"submit\" />\n    </Column>\n  );\n}\n\nSubmitEmail.defaultProps = {\n  initialEmail: \"\"\n};\n\nSubmitEmail.propTypes = {\n  message: PropTypes.string,\n  termsUrl: PropTypes.string,\n  privacyUrl: PropTypes.string,\n  initialEmail: PropTypes.string,\n  onSubmitEmail: PropTypes.func.isRequired\n};\n\nexport function WaitForVerification({ email, onCancel, showNewsletterSignup }) {\n  return (\n    <Column center padding>\n      <FormattedMessage\n        id=\"sign-in-modal.wait-for-verification\"\n        defaultMessage=\"<p>Email sent to {email}!</p><p>To continue, click on the link in the email using your phone, tablet, or PC.</p><p>No email? You may not be able to create an account.</p>\"\n        // eslint-disable-next-line react/display-name\n        values={{ email, p: chunks => <p>{chunks}</p> }}\n      />\n      {showNewsletterSignup && (\n        <p>\n          <small>\n            <FormattedMessage\n              id=\"sign-in-modal.newsletter-signup-question\"\n              defaultMessage=\"MetaversePlus - Buiding Better Worlds\"\n            />\n            <br />\n            <a href=\"https://eepurl.com/gX_fH9\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <FormattedMessage id=\"sign-in-modal.newsletter-signup-link\" defaultMessage=\"Subscribe?\" />\n            </a>\n          </small>\n        </p>\n      )}\n      <CancelButton onClick={onCancel} />\n    </Column>\n  );\n}\n\nWaitForVerification.propTypes = {\n  showNewsletterSignup: PropTypes.bool,\n  email: PropTypes.string.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\n\nexport function SignInComplete({ message, onContinue }) {\n  const intl = useIntl();\n\n  return (\n    <Column center padding>\n      <p>\n        <b>\n          {message ? (\n            intl.formatMessage(message)\n          ) : (\n            <FormattedMessage id=\"sign-in-modal.complete\" defaultMessage=\"You are now signed in.\" />\n          )}\n        </b>\n      </p>\n      <ContinueButton onClick={onContinue} />\n    </Column>\n  );\n}\n\nSignInComplete.propTypes = {\n  message: PropTypes.string.isRequired,\n  onContinue: PropTypes.func.isRequired\n};\n\nexport function SignInModal({ closeable, onClose, children, ...rest }) {\n  return (\n    <Modal\n      title={<FormattedMessage id=\"sign-in-modal.title\" defaultMessage=\"Sign In\" />}\n      beforeTitle={closeable && <CloseButton onClick={onClose} />}\n      {...rest}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nSignInModal.propTypes = {\n  closeable: PropTypes.bool,\n  onClose: PropTypes.func,\n  children: PropTypes.node\n};\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport { showHoverEffect } from \"../utils/permissions-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MeshPhongMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.geometryRadius = 0;\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        if (batchManagerSystem.batchingEnabled) {\n          batchManagerSystem.meshToEl.delete(object);\n        }\n      });\n    });\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    this.isTouchscreen = isMobile && !isMobileVR;\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const showEffect = showHoverEffect(this.el);\n    const toggling = this.el.sceneEl.systems[\"hubs-systems\"].cursorTogglingSystem;\n\n    let interactorOne, interactorTwo;\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    if (interaction.state.leftHand.hovered === this.el && !interaction.state.leftHand.held) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (\n      interaction.state.leftRemote.hovered === this.el &&\n      !interaction.state.leftRemote.held &&\n      !toggling.leftToggledOff\n    ) {\n      interactorOne = interaction.options.leftRemote.entity.object3D;\n    }\n    if (\n      interaction.state.rightRemote.hovered === this.el &&\n      !interaction.state.rightRemote.held &&\n      !toggling.rightToggledOff\n    ) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el && !interaction.state.rightHand.held) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const ms1 = this.el.object3D.matrixWorld.elements[4];\n      const ms2 = this.el.object3D.matrixWorld.elements[5];\n      const ms3 = this.el.object3D.matrixWorld.elements[6];\n      const worldScale = Math.sqrt(ms1 * ms1 + ms2 * ms2 + ms3 * ms3);\n      const scaledRadius = worldScale * this.geometryRadius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && showEffect;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./MediaGrid.scss\";\n\nexport function MediaGrid({ children, className, center, isVariableWidth, sm, ...rest }) {\n  return (\n    <div\n      className={classNames(\n        styles.mediaGrid,\n        { [styles.center]: center, [styles.variableWidth]: isVariableWidth, [styles.sm]: sm },\n        className\n      )}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n}\n\nMediaGrid.propTypes = {\n  center: PropTypes.bool,\n  isVariableWidth: PropTypes.bool,\n  sm: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // Hash can't be overriden like the other elements, but needs to be preserved for things like deep linking waypoints\n  const hash = history.location.hash;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state, hash });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import configs from \"../utils/configs\";\n\nexport default function IfFeature(props) {\n  return (configs.feature(props.name) && props.children) || null;\n}\n","module.exports = __webpack_public_path__ + \"assets/models/LoadingEnvironment-570a9f69a9509eb8a039c9ff93ccfdca.glb\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"RoomEntryModal__content__2mWAx\",\"logo-container\":\"RoomEntryModal__logo-container__o-hM2\",\"logoContainer\":\"RoomEntryModal__logo-container__o-hM2\",\"room-name\":\"RoomEntryModal__room-name__2CyTs\",\"roomName\":\"RoomEntryModal__room-name__2CyTs\",\"buttons\":\"RoomEntryModal__buttons__X3XNq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex-row\":\"Row__flex-row__2Q_u7\",\"flexRow\":\"Row__flex-row__2Q_u7\",\"space-between\":\"Row__space-between__3_Vbl\",\"spaceBetween\":\"Row__space-between__3_Vbl\",\"sm-breakpoint-column\":\"Row__sm-breakpoint-column__3OyhD\",\"smBreakpointColumn\":\"Row__sm-breakpoint-column__3OyhD\",\"md-breakpoint-column\":\"Row__md-breakpoint-column__1Jcsn\",\"mdBreakpointColumn\":\"Row__md-breakpoint-column__1Jcsn\",\"no-flex-wrap\":\"Row__no-flex-wrap__3Xl4E\",\"noFlexWrap\":\"Row__no-flex-wrap__3Xl4E\",\"xs-children-margin-r\":\"Row__xs-children-margin-r__3Y09x\",\"xsChildrenMarginR\":\"Row__xs-children-margin-r__3Y09x\",\"sm-children-margin-r\":\"Row__sm-children-margin-r__2m91A\",\"smChildrenMarginR\":\"Row__sm-children-margin-r__2m91A\",\"md-children-margin-r\":\"Row__md-children-margin-r__13Yl4\",\"mdChildrenMarginR\":\"Row__md-children-margin-r__13Yl4\",\"lg-children-margin-r\":\"Row__lg-children-margin-r__2lTSY\",\"lgChildrenMarginR\":\"Row__lg-children-margin-r__2lTSY\",\"xl-children-margin-r\":\"Row__xl-children-margin-r__2jOsR\",\"xlChildrenMarginR\":\"Row__xl-children-margin-r__2jOsR\"};","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function updateMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material = object3D.material.map(fn);\n  } else {\n    object3D.material = fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return [];\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return [fn(object3D.material)];\n  }\n}\n\n// HubsMeshBasicMaterial exists because we need to be able to set the emissiveMap in the avatar preview.\n// It also allows the material to be properly copied/cloned.\nclass HubsMeshBasicMaterial extends THREE.MeshBasicMaterial {\n  static fromMeshStandardMaterial(source) {\n    const material = new HubsMeshBasicMaterial();\n\n    THREE.Material.prototype.copy.call(material, source);\n\n    material.color.copy(source.color);\n\n    material.emissive.copy(source.emissive);\n    material.emissiveIntensity = source.emissiveIntensity;\n    material.emissiveMap = source.emissiveMap;\n\n    material.map = source.map;\n\n    material.lightMap = source.lightMap;\n    material.lightMapIntensity = source.lightMapIntensity;\n\n    material.aoMap = source.aoMap;\n    material.aoMapIntensity = source.aoMapIntensity;\n\n    material.alphaMap = source.alphaMap;\n\n    material.wireframe = source.wireframe;\n    material.wireframeLinewidth = source.wireframeLinewidth;\n    material.wireframeLinecap = source.wireframeLinecap;\n    material.wireframeLinejoin = source.wireframeLinejoin;\n\n    return material;\n  }\n\n  constructor({ emissive, emissiveMap, emissiveIntensity, ...rest } = {}) {\n    super(rest);\n    this._emissive = { value: emissive || new THREE.Color() };\n    this._emissiveIntensity = { value: emissiveIntensity === undefined ? 1 : emissiveIntensity };\n    this._emissiveMap = { value: emissiveMap };\n  }\n\n  get emissive() {\n    return this._emissive.value;\n  }\n\n  set emissive(emissive) {\n    this._emissive.value = emissive;\n  }\n\n  get emissiveIntensity() {\n    return this._emissiveIntensity.value;\n  }\n\n  set emissiveIntensity(emissiveIntensity) {\n    this._emissiveIntensity.value = emissiveIntensity;\n  }\n\n  get emissiveMap() {\n    return this._emissiveMap.value;\n  }\n\n  set emissiveMap(emissiveMap) {\n    this._emissiveMap.value = emissiveMap;\n  }\n\n  copy(source) {\n    super.copy(source);\n    this.emissive.copy(source.emissive);\n    this.emissiveIntensity = source.emissiveIntensity;\n    this.emissiveMap = source.emissiveMap;\n    return this;\n  }\n\n  onBeforeCompile = shader => {\n    // This patch to the MeshBasicMaterial adds support for emissive maps.\n    shader.uniforms.emissive = this._emissive;\n    shader.uniforms.emissiveIntensity = this._emissiveIntensity;\n    shader.uniforms.emissiveMap = this._emissiveMap;\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <lightmap_pars_fragment>\",\n      `#include <lightmap_pars_fragment>\n      uniform vec3 emissive;\n      uniform sampler2D emissiveMap;\n      `\n    );\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <envmap_fragment>\",\n      `#include <envmap_fragment>\n\n      vec3 totalEmissiveRadiance = emissive;\n      #include <emissivemap_fragment>\n      outgoingLight += totalEmissiveRadiance;\n\n      `\n    );\n  };\n}\n\nclass HubsMeshPhongMaterial extends THREE.MeshPhongMaterial {\n  static fromMeshStandardMaterial(source) {\n    const material = new HubsMeshPhongMaterial();\n\n    THREE.Material.prototype.copy.call(material, source);\n\n    material.color.copy(source.color);\n\n    material.map = source.map;\n\n    material.lightMap = source.lightMap;\n    material.lightMapIntensity = source.lightMapIntensity;\n\n    material.aoMap = source.aoMap;\n    material.aoMapIntensity = source.aoMapIntensity;\n\n    material.emissive.copy(source.emissive);\n    material.emissiveMap = source.emissiveMap;\n    material.emissiveIntensity = source.emissiveIntensity;\n\n    material.normalMapType = source.normalMapType;\n    material.normalMap = source.normalMap;\n    material.normalScale.copy(source.normalScale);\n\n    material.bumpMap = source.bumpMap;\n    material.bumpScale = source.bumpScale;\n\n    material.displacementMap = source.displacementMap;\n    material.displacementScale = source.displacementScale;\n    material.displacementBias = source.displacementBias;\n\n    material.alphaMap = source.alphaMap;\n\n    material.reflectivity = 0.5;\n    material.refractionRatio = source.refractionRatio;\n\n    material.wireframe = source.wireframe;\n    material.wireframeLinewidth = source.wireframeLinewidth;\n    material.wireframeLinecap = source.wireframeLinecap;\n    material.wireframeLinejoin = source.wireframeLinejoin;\n\n    return material;\n  }\n\n  onBeforeCompile = shader => {\n    // This patch to MeshPhongMaterial adds support for tangent space normal maps.\n    shader.vertexShader = shader.vertexShader.replace(\n      \"varying vec3 vNormal;\",\n      `varying vec3 vNormal;\n      #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n      #endif\n      `\n    );\n    shader.vertexShader = shader.vertexShader.replace(\n      \"vNormal = normalize( transformedNormal );\",\n      `vNormal = normalize( transformedNormal );\n      \n        #ifdef USE_TANGENT\n      \n          vTangent = normalize( transformedTangent );\n          vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n      \n        #endif\n      `\n    );\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <lights_phong_pars_fragment>\",\n      `#include <lights_phong_pars_fragment>\n      #ifndef FLAT_SHADED\n\n        #ifdef USE_TANGENT\n          varying vec3 vTangent;\n          varying vec3 vBitangent;\n        #endif\n\n      #endif\n      `\n    );\n  };\n}\n\nexport function convertStandardMaterial(source, quality) {\n  if (!source.isMeshStandardMaterial) {\n    return source;\n  }\n\n  if (quality === \"medium\") {\n    return HubsMeshPhongMaterial.fromMeshStandardMaterial(source);\n  } else if (quality === \"low\") {\n    return HubsMeshBasicMaterial.fromMeshStandardMaterial(source);\n  }\n\n  return source;\n}\n\nexport function disposeTexture(texture) {\n  if (texture.dash) {\n    texture.dash.reset();\n  }\n\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.stopLoad();\n    texture.hls.detachMedia();\n    texture.hls.destroy();\n    texture.hls = null;\n  }\n\n  texture.dispose();\n}\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*,naf-dialog-adapter:*,mediasoup*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","import {\n  AudioType,\n  SourceType,\n  MediaAudioDefaults,\n  AvatarAudioDefaults,\n  TargetAudioDefaults\n} from \"./components/audio-params\";\nimport { isSafari } from \"./utils/detect-safari\";\n\nconst defaultSettingsForSourceType = Object.freeze(\n  new Map([\n    [SourceType.MEDIA_VIDEO, MediaAudioDefaults],\n    [SourceType.AVATAR_AUDIO_SOURCE, AvatarAudioDefaults],\n    [SourceType.AUDIO_TARGET, TargetAudioDefaults]\n  ])\n);\n\nfunction applySettings(audio, settings) {\n  if (audio.panner) {\n    audio.setDistanceModel(settings.distanceModel);\n    audio.setRolloffFactor(settings.rolloffFactor);\n    audio.setRefDistance(settings.refDistance);\n    audio.setMaxDistance(settings.maxDistance);\n    audio.panner.coneInnerAngle = settings.coneInnerAngle;\n    audio.panner.coneOuterAngle = settings.coneOuterAngle;\n    audio.panner.coneOuterGain = settings.coneOuterGain;\n  }\n  audio.gain.gain.setTargetAtTime(settings.gain, audio.context.currentTime, 0.1);\n}\n\nexport function getCurrentAudioSettings(el) {\n  const sourceType = APP.sourceType.get(el);\n  const defaults = defaultSettingsForSourceType.get(sourceType);\n  const sceneOverrides = APP.sceneAudioDefaults.get(sourceType);\n  const audioOverrides = APP.audioOverrides.get(el);\n  const audioDebugPanelOverrides = APP.audioDebugPanelOverrides.get(sourceType);\n  const zoneSettings = APP.zoneOverrides.get(el);\n  const preferencesOverrides = APP.store.state.preferences.disableLeftRightPanning\n    ? { audioType: AudioType.Stereo }\n    : {};\n  const safariOverrides = isSafari() ? { audioType: AudioType.Stereo } : {};\n  const settings = Object.assign(\n    {},\n    defaults,\n    sceneOverrides,\n    audioOverrides,\n    audioDebugPanelOverrides,\n    zoneSettings,\n    preferencesOverrides,\n    safariOverrides\n  );\n\n  if (APP.clippingState.has(el) || APP.mutedState.has(el)) {\n    settings.gain = 0;\n  } else if (APP.gainMultipliers.has(el)) {\n    settings.gain = settings.gain * APP.gainMultipliers.get(el);\n  }\n\n  if (APP.supplementaryAttenuation.has(el)) {\n    settings.gain = settings.gain * APP.supplementaryAttenuation.get(el);\n  }\n\n  return settings;\n}\n\nexport function getCurrentAudioSettingsForSourceType(sourceType) {\n  const defaults = defaultSettingsForSourceType.get(sourceType);\n  const sceneOverrides = APP.sceneAudioDefaults.get(sourceType);\n  const audioDebugPanelOverrides = APP.audioDebugPanelOverrides.get(sourceType);\n  return Object.assign({}, defaults, sceneOverrides, audioDebugPanelOverrides);\n}\n\nexport function updateAudioSettings(el, audio) {\n  // Follow these rules and you'll have a good time:\n  // - If a THREE.Audio or THREE.PositionalAudio is created, call this function.\n  // - If audio settings change, call this function.\n  const settings = getCurrentAudioSettings(el);\n  if (\n    (audio.panner === undefined && settings.audioType === AudioType.PannerNode) ||\n    (audio.panner !== undefined && settings.audioType === AudioType.Stereo)\n  ) {\n    el.emit(\"audio_type_changed\");\n  }\n  applySettings(audio, settings);\n}\n\nexport function shouldAddSupplementaryAttenuation(el, audio) {\n  // Never add supplemental attenuation to audios that have a panner node;\n  // The panner node adds its own attenuation.\n  if (audio.panner) return false;\n\n  // This function must distinguish between Audios that are \"incidentally\"\n  // not PositionalAudios from Audios that are \"purposefully\" not PositionalAudios:\n  // - An audio is \"incidentally\" non-positional if it only non-positional\n  //     because the disableLeftRightPanning pref is set to true, or\n  //     because panner nodes are broken on a particular platform, or\n  //     because of something else like that.\n  // - An audio is \"purposefully\" non-positional if it was authored to be\n  //     a \"background sound\" or otherwise made that way \"on purpose\".\n  //\n  // Authoring tools like Spoke create components where \"audioType : stereo\"\n  // is used to indicate that audio should play in the background without\n  // left/right panning and without distance-based attenuation.\n  //\n  // Those components also include properties like distanceModel, rolloffFactor, etc,\n  // but these properties were assumed to be ignored by the client.\n  // Thus we cannot simply apply the attenuation values we would get if we calculated\n  // attenuation with the provided distanceModel, rolloffFactor, etc.\n  //\n  // Instead, we determine what the audioType would be if it were not for the\n  // \"incidental\" factors. In particular, we check if the audioType would have\n  // been PannerNode if we ignored the overrides due to disableLeftRightPanning and platform\n  // problems (e.g. Safari).\n  //\n  // If the audioType would have been PannerNode, then we should apply \"fake\",\n  // \"supplementary\" attenuation. Otherwise, the audio is purposefully a\n  // \"background sound\" and we should not apply supplementary attenuation.\n  const sourceType = APP.sourceType.get(el);\n  const defaults = defaultSettingsForSourceType.get(sourceType);\n  const sceneOverrides = APP.sceneAudioDefaults.get(sourceType);\n  const audioDebugPanelOverrides = APP.audioDebugPanelOverrides.get(sourceType);\n  const audioOverrides = APP.audioOverrides.get(el);\n  const zoneSettings = APP.zoneOverrides.get(el);\n  const settings = Object.assign({}, defaults, sceneOverrides, audioDebugPanelOverrides, audioOverrides, zoneSettings);\n  return settings.audioType === AudioType.PannerNode;\n}\n","const textureToData = new Map();\nconst registeredTextures = [];\n\nexport class UVScrollSystem {\n  tick(dt) {\n    for (let i = 0; i < registeredTextures.length; i++) {\n      const map = registeredTextures[i];\n      const { offset, instances } = textureToData.get(map);\n      const { component } = instances[0];\n\n      offset.addScaledVector(component.data.speed, dt / 1000);\n\n      offset.x = offset.x % 1.0;\n      offset.y = offset.y % 1.0;\n\n      const increment = component.data.increment;\n      map.offset.x = increment.x ? offset.x - (offset.x % increment.x) : offset.x;\n      map.offset.y = increment.y ? offset.y - (offset.y % increment.y) : offset.y;\n    }\n  }\n}\n\n/**\n * Animate the UV offset of a mesh's material\n * @component uv-scroll\n */\nAFRAME.registerComponent(\"uv-scroll\", {\n  schema: {\n    speed: { type: \"vec2\", default: { x: 0, y: 0 } },\n    increment: { type: \"vec2\", default: { x: 0, y: 0 } }\n  },\n  play() {\n    const mesh = this.el.getObject3D(\"mesh\") || this.el.getObject3D(\"skinnedmesh\");\n    const material = mesh && mesh.material;\n    if (material) {\n      // We store mesh here instead of the material directly because we end up swapping out the material in injectCustomShaderChunks.\n      // We need material in the first place because of MobileStandardMaterial\n      const instance = { component: this, mesh };\n\n      this.instance = instance;\n      this.map = material.map || material.emissiveMap;\n\n      if (this.map && !textureToData.has(this.map)) {\n        textureToData.set(this.map, {\n          offset: new THREE.Vector2(),\n          instances: [instance]\n        });\n        registeredTextures.push(this.map);\n      } else if (!this.map) {\n        console.warn(\"Ignoring uv-scroll added to mesh with no scrollable texture.\");\n      } else {\n        console.warn(\n          \"Multiple uv-scroll instances added to objects sharing a texture, only the speed/increment from the first one will have any effect\"\n        );\n        textureToData.get(this.map).instances.push(instance);\n      }\n    }\n  },\n\n  pause() {\n    if (this.map) {\n      const instances = textureToData.get(this.map).instances;\n      instances.splice(instances.indexOf(this.instance), 1);\n      // If this was the last uv-scroll component for a given texture\n      if (!instances.length) {\n        textureToData.delete(this.map);\n        registeredTextures.splice(registeredTextures.indexOf(this.map), 1);\n      }\n    }\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n  float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 1.0 / (size + 0.2) * 8.0 + 1.0 / (size + 0.3) * 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/hud/action_button.9-438d957372d6db1f225653a7e1083ffe.png\";","module.exports = __webpack_public_path__ + \"assets/hud/button.9-1983f9e07c50d99b7f0db40e9bd0c3a1.png\";","module.exports = __webpack_public_path__ + \"assets/hud/nametag.9-7b9c7f3806be28f5ba1468cdae710338.png\";","module.exports = __webpack_public_path__ + \"assets/hud/nametag-border.9-7b34c214fad1f34baa28d0b0be5a027a.png\";","module.exports = __webpack_public_path__ + \"assets/models/LoadingObject_Atom-63177fe6a0cd36cf826c1037e1beab66.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","import appLogo from \"../assets/images/app-logo.png\";\nimport appLogoDark from \"../assets/images/app-logo-dark.png\";\nimport companyLogo from \"../assets/images/company-logo.png\";\nimport homeHeroBackground from \"../assets/images/home-hero-background-unbranded.png\";\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\nimport { getLocale, getMessage } from \"./i18n\";\n\n// Read configs from global variable if available, otherwise use the process.env injected from build.\nconst configs = {};\nlet isAdmin = false;\n[\n  \"RETICULUM_SERVER\",\n  \"THUMBNAIL_SERVER\",\n  \"CORS_PROXY_SERVER\",\n  \"NON_CORS_PROXY_DOMAINS\",\n  \"SENTRY_DSN\",\n  \"GA_TRACKING_ID\",\n  \"SHORTLINK_DOMAIN\",\n  \"BASE_ASSETS_PATH\",\n  \"UPLOADS_HOST\"\n].forEach(x => {\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\n\n  const BASE_ASSETS_PATH_KEY = \"BASE_ASSETS_PATH\";\n  if (x === BASE_ASSETS_PATH_KEY && configs[BASE_ASSETS_PATH_KEY]) {\n    // BASE_ASSETS_PATH might be a relative URL like \"/\" when it is set in\n    // .env or .defaults.env when running locally. We need to convert that\n    // to an absolute URL.\n    if (!configs[BASE_ASSETS_PATH_KEY].startsWith(\"http\")) {\n      configs[BASE_ASSETS_PATH_KEY] = new URL(configs[BASE_ASSETS_PATH_KEY], window.location).toString();\n    }\n\n    // eslint-disable-next-line no-undef\n    __webpack_public_path__ = configs[BASE_ASSETS_PATH_KEY];\n  }\n});\n\n// Custom clients do not use <meta> tags for passing data, so if thumbnail_server meta tag exists, it is not a custom client\nconst hasThumbnailServerMetaTag = !!document.querySelector(\"meta[name='env:thumbnail_server']\");\nconfigs.IS_LOCAL_OR_CUSTOM_CLIENT = !hasThumbnailServerMetaTag;\n\n// Also include configs that reticulum injects as a script in the page head.\n\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\n\nif (process.env.APP_CONFIG) {\n  window.APP_CONFIG = process.env.APP_CONFIG;\n}\n\nif (window.APP_CONFIG) {\n  configs.APP_CONFIG = window.APP_CONFIG;\n  const { theme } = configs.APP_CONFIG;\n  if (theme) {\n    const colorVars = [];\n    for (const key in theme) {\n      if (!theme.hasOwnProperty(key)) continue;\n      colorVars.push(`--${key}: ${theme[key]};`);\n    }\n    const style = document.createElement(\"style\");\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\n    document.head.insertBefore(style, document.head.firstChild);\n  }\n\n  if (!configs.APP_CONFIG.features) {\n    configs.APP_CONFIG.features = {};\n  }\n} else {\n  configs.APP_CONFIG = {\n    features: {}\n  };\n}\n\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\n\nconfigs.feature = featureName => {\n  const value = configs.APP_CONFIG && configs.APP_CONFIG.features && configs.APP_CONFIG.features[featureName];\n  if (typeof value === \"boolean\" || featureName === \"enable_spoke\") {\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\n    return forceEnableSpoke || value;\n  } else {\n    return value;\n  }\n};\n\nlet localDevImages = {};\nif (isLocalDevelopment) {\n  localDevImages = {\n    logo: appLogo,\n    logo_dark: appLogoDark,\n    company_logo: companyLogo,\n    editor_logo: sceneEditorLogo,\n    home_background: homeHeroBackground\n  };\n}\n\nconfigs.image = (imageName, cssUrl) => {\n  const url =\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\n    localDevImages[imageName];\n  return url && cssUrl ? `url(${url})` : url;\n};\n\nconfigs.link = (linkName, defaultValue) => {\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\n};\n\nconfigs.setIsAdmin = _isAdmin => {\n  isAdmin = _isAdmin;\n};\nconfigs.isAdmin = () => isAdmin;\n\nconfigs.integration = integration => {\n  const availableIntegrations = configs.AVAILABLE_INTEGRATIONS;\n  // AVAILABLE_INTEGRATIONS has no properties defined on the dev server, but does support all integrations.\n  return !availableIntegrations.hasOwnProperty(integration) || availableIntegrations[integration];\n};\n\nconfigs.translation = key => {\n  const locale = getLocale();\n  const translationsConfig = (configs.APP_CONFIG && configs.APP_CONFIG.translations) || {};\n\n  return (\n    (translationsConfig[locale] && translationsConfig[locale][key]) ||\n    (translationsConfig.en && translationsConfig.en[key]) ||\n    getMessage(key) ||\n    \"\"\n  );\n};\n\nexport default configs;\n","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-2a510e5f966867a4c9ca3cff716a1797.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/emoji-27673179a22e6f42e8187ccba07e4dce.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/images/avatar_unavailable-3145734291e8890bc42b09db277bb337.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lg\":\"CloseButton__lg__ZB1Yp\"};","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","import { useState, useEffect } from \"react\";\n// ResizeObserver not currently supported in Firefox Android\nimport ResizeObserver from \"resize-observer-polyfill\";\n\n// Modified from AFrame\nfunction getRenderResolution(canvasRect, maxResolution, isVR) {\n  const pixelRatio = window.devicePixelRatio;\n\n  if (!maxResolution || isVR || (maxResolution.width === -1 && maxResolution.height === -1)) {\n    return canvasRect;\n  }\n\n  if (canvasRect.width * pixelRatio < maxResolution.width && canvasRect.height * pixelRatio < maxResolution.height) {\n    return canvasRect;\n  }\n\n  const aspectRatio = canvasRect.width / canvasRect.height;\n\n  if (canvasRect.width * pixelRatio > maxResolution.width && maxResolution.width !== -1) {\n    return {\n      width: Math.round(maxResolution.width / pixelRatio),\n      height: Math.round(maxResolution.width / aspectRatio / pixelRatio)\n    };\n  }\n\n  if (canvasRect.height * pixelRatio > maxResolution.height && maxResolution.height !== -1) {\n    return {\n      height: Math.round(maxResolution.height / pixelRatio),\n      width: Math.round((maxResolution.height * aspectRatio) / pixelRatio)\n    };\n  }\n\n  return canvasRect;\n}\n\nexport function useResizeViewport(viewportRef, store, scene) {\n  const [maxResolution, setMaxResolution] = useState({\n    width: window.screen.width,\n    height: window.screen.height\n  });\n\n  useEffect(\n    () => {\n      function onStoreChanged() {\n        const { maxResolutionWidth, maxResolutionHeight } = store.state.preferences;\n        setMaxResolution({\n          width: maxResolutionWidth === undefined ? window.screen.width : maxResolutionWidth,\n          height: maxResolutionHeight === undefined ? window.screen.height : maxResolutionHeight\n        });\n      }\n\n      onStoreChanged();\n\n      store.addEventListener(\"statechanged\", onStoreChanged);\n\n      return () => {\n        store.removeEventListener(\"statechanged\", onStoreChanged);\n      };\n    },\n    [store]\n  );\n\n  useEffect(\n    () => {\n      const observer = new ResizeObserver(entries => {\n        const isPresenting = scene.renderer.xr.isPresenting;\n        const isVRPresenting = scene.renderer.xr.enabled && isPresenting;\n\n        // Do not update renderer, if a camera or a canvas have not been injected.\n        // In VR mode, three handles canvas resize based on the dimensions returned by\n        // the getEyeParameters function of the WebVR API. These dimensions are independent of\n        // the window size, therefore should not be overwritten with the window's width and\n        // height, // except when in fullscreen mode.\n        if (!scene.camera || !scene.canvas || (scene.is(\"vr-mode\") && (scene.isMobile || isVRPresenting))) {\n          return;\n        }\n\n        const canvasRect = entries[0].contentRect;\n\n        const resolution = getRenderResolution(canvasRect, maxResolution, isVRPresenting);\n\n        const canvas = scene.canvas;\n        canvas.style.width = canvasRect.width + \"px\";\n        canvas.style.height = canvasRect.height + \"px\";\n\n        scene.renderer.setSize(resolution.width, resolution.height, false);\n\n        scene.camera.aspect = resolution.width / resolution.height;\n        scene.camera.updateProjectionMatrix();\n\n        // Resizing the canvas clears it, so render immediately after resize to prevent flicker.\n        scene.renderer.render(scene.object3D, scene.camera);\n\n        scene.emit(\"rendererresize\", null, false);\n      });\n\n      observer.observe(viewportRef.current);\n\n      return () => {\n        observer.disconnect();\n      };\n    },\n    [viewportRef, scene, maxResolution]\n  );\n}\n","import { CAMERA_MODE_INSPECT } from \"./camera-system.js\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\n\nlet viewingCamera;\nlet uiRoot;\nexport class ScenePreviewCameraSystem {\n  constructor() {\n    this.entities = [];\n  }\n\n  register(el) {\n    this.entities.push(el);\n  }\n\n  unregister(el) {\n    this.entities.splice(this.entities.indexOf(el), 1);\n  }\n\n  tick() {\n    viewingCamera = viewingCamera || document.getElementById(\"viewing-camera\");\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const entered = viewingCamera && viewingCamera.sceneEl.is(\"entered\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n    for (let i = 0; i < this.entities.length; i++) {\n      const el = this.entities[i];\n      const hubsSystems = AFRAME.scenes[0].systems[\"hubs-systems\"];\n      if (el && (!hubsSystems || (hubsSystems.cameraSystem.mode !== CAMERA_MODE_INSPECT && !isGhost && !entered))) {\n        el.components[\"scene-preview-camera\"].tick2();\n        if (hubsSystems && viewingCamera) {\n          el.object3D.updateMatrices();\n          setMatrixWorld(viewingCamera.object3DMap.camera, el.object3D.matrixWorld);\n        }\n      }\n    }\n  }\n}\n","import { updateMaterials } from \"../utils/material-utils.js\";\n\nconst frustumBox = new THREE.Box3();\nconst inverseShadowCameraMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nfunction computeShadowCameraBoundingBox(object3D, boundingBox = new THREE.Box3()) {\n  boundingBox.makeEmpty();\n\n  object3D.updateMatrixWorld();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  object3D.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  tempBox.makeEmpty();\n\n  return boundingBox;\n}\n\nfunction resizeShadowCameraFrustum(light, boundingBox) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  light.updateMatrices();\n  light.target.updateMatrices();\n  light.shadow.updateMatrices(light);\n  inverseShadowCameraMatrixWorld.copy(light.shadow.camera.matrixWorld).invert();\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseShadowCameraMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n\nexport class ShadowSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n    this.shadowCameraBoundingBox = new THREE.Box3();\n    this.previousShadowsEnabled = this.realtimeShadowsEnabled = null;\n\n    // Defaults previously in hub.html\n    sceneEl.renderer.shadowMap.enabled = false;\n    sceneEl.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n    sceneEl.renderer.shadowMap.autoUpdate = true;\n\n    window.APP.store.addEventListener(\"statechanged\", this.updatePrefs.bind(this));\n    this.updatePrefs();\n  }\n\n  updatePrefs() {\n    this.realtimeShadowsEnabled =\n      window.APP.store.state.preferences.enableDynamicShadows === true &&\n      window.APP.store.materialQualitySetting !== \"low\";\n    if (this.previousShadowsEnabled !== this.realtimeShadowsEnabled) {\n      this.sceneEl.renderer.shadowMap.enabled = this.realtimeShadowsEnabled;\n\n      // If scene has already rendered, materials which can receive shadows must be updated.\n      if (this.sceneEl.hasLoaded) {\n        this.sceneEl.object3D.traverse(node => {\n          if (node.receiveShadow && node.material) {\n            updateMaterials(node, material => {\n              material.needsUpdate = true;\n              return material;\n            });\n          }\n        });\n      }\n    }\n    this.previousShadowsEnabled = this.realtimeShadowsEnabled;\n  }\n\n  tick() {\n    if (!this.realtimeShadowsEnabled) {\n      return;\n    }\n    computeShadowCameraBoundingBox(this.sceneEl.object3D, this.shadowCameraBoundingBox);\n    this.sceneEl.object3D.traverse(object3D => {\n      if (object3D.isDirectionalLight) {\n        resizeShadowCameraFrustum(object3D, this.shadowCameraBoundingBox);\n      }\n    });\n  }\n}\n","import { GUI } from \"three/examples/jsm/libs/dat.gui.module.js\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport { LUTCubeLoader } from \"three/examples/jsm/loaders/LUTCubeLoader\";\nimport blenderLutPath from \"../assets/blender-lut.cube\";\n\nconst toneMappingOptions = {\n  None: \"NoToneMapping\",\n  Linear: \"LinearToneMapping\",\n  Reinhard: \"ReinhardToneMapping\",\n  Cineon: \"CineonToneMapping\",\n  ACESFilmic: \"ACESFilmicToneMapping\",\n  CustomToneMapping: \"CustomToneMapping\",\n  LUTToneMapping: \"LUTToneMapping\"\n};\n\nconst outputEncodingOptions = {\n  LinearEncoding: \"LinearEncoding\",\n  sRGBEncoding: \"sRGBEncoding\",\n  GammaEncoding: \"GammaEncoding\",\n  GBEEncoding: \"GBEEncoding\",\n  LogLuvEncoding: \"LogLuvEncoding\",\n  GBM7Encoding: \"GBM7Encoding\",\n  RGBM16Encoding: \"RGBM16Encoding\",\n  GBDEncoding: \"GBDEncoding\",\n  BasicDepthPacking: \"BasicDepthPacking\",\n  GBADepthPacking: \"GBADepthPackig\"\n};\n\nconst defaultEnvSettings = {\n  toneMapping: toneMappingOptions.Linear,\n  outputEncoding: outputEncodingOptions.sRGBEncoding,\n  toneMappingExposure: 1,\n  physicallyCorrectLights: true,\n  envMapTexture: null,\n  backgroundTexture: null,\n  backgroundColor: new THREE.Color(\"#000000\"),\n\n  fogType: null,\n  fogColor: new THREE.Color(\"#ffffff\"),\n  fogDensity: 0.00025,\n  fogFar: 1000,\n  fogNear: 1\n};\n\nlet blenderLUTPromise; // lazy loaded\n\nexport class EnvironmentSystem {\n  constructor(sceneEl) {\n    this.scene = sceneEl.object3D;\n    this.renderer = sceneEl.renderer;\n\n    this.pmremGenerator = new THREE.PMREMGenerator(this.renderer);\n\n    this.applyEnvSettings(defaultEnvSettings);\n\n    if (qsTruthy(\"envSettingsDebug\")) {\n      this.setupDebugView();\n    }\n  }\n\n  setupDebugView() {\n    const debugSettings = { ...defaultEnvSettings };\n\n    const updateDebug = () => {\n      this.applyEnvSettings(debugSettings);\n    };\n\n    const gui = new GUI();\n    gui\n      .add(debugSettings, \"toneMapping\", Object.values(toneMappingOptions))\n      .onChange(updateDebug)\n      .listen();\n    gui\n      .add(debugSettings, \"toneMappingExposure\", 0, 4, 0.01)\n      .onChange(updateDebug)\n      .listen();\n    gui\n      .add(debugSettings, \"outputEncoding\", Object.values(outputEncodingOptions))\n      .onChange(updateDebug)\n      .listen();\n    gui\n      .add(debugSettings, \"physicallyCorrectLights\", true)\n      .onChange(updateDebug)\n      .listen();\n    gui.open();\n\n    this.debugGui = gui;\n    this.debugSettings = debugSettings;\n    this.debugMode = true;\n\n    window.$E = this;\n  }\n\n  updateEnvironment(envEl) {\n    const envSettingsEl = envEl.querySelector(\"[environment-settings]\");\n    const skyboxEl = envEl.querySelector(\"[skybox]\");\n    const navmeshEl = envEl.querySelector(\"[nav-mesh]\");\n\n    const envSettings = {\n      ...defaultEnvSettings,\n      skybox: skyboxEl?.components[\"skybox\"]\n    };\n\n    if (envSettingsEl) {\n      Object.assign(envSettings, envSettingsEl.components[\"environment-settings\"].data);\n    }\n\n    const navMesh = navmeshEl?.object3D.getObjectByProperty(\"isMesh\", true);\n    if (navMesh) {\n      AFRAME.scenes[0].systems.nav.loadMesh(navMesh, navmeshEl.components[\"nav-mesh\"].data.zone);\n    }\n\n    // TODO animated objects should not be static\n    envEl.object3D.traverse(o => {\n      if (o.isMesh) {\n        o.reflectionProbeMode = \"static\";\n      }\n    });\n\n    this.applyEnvSettings(envSettings);\n  }\n\n  applyEnvSettings(settings) {\n    if (this.debugSettings) {\n      Object.assign(this.debugSettings, settings);\n    }\n\n    let materialsNeedUpdate = false;\n\n    if (this.debugMode) console.log(\"Applying environment settings\", settings);\n\n    if (this.renderer.physicallyCorrectLights !== settings.physicallyCorrectLights) {\n      this.renderer.physicallyCorrectLights = settings.physicallyCorrectLights;\n      materialsNeedUpdate = true;\n    }\n\n    const newToneMapping = THREE[settings.toneMapping];\n    if (this.renderer.toneMapping !== newToneMapping) {\n      this.renderer.toneMapping = newToneMapping;\n      materialsNeedUpdate = true;\n\n      // TODO clean up async behavior\n      if (newToneMapping === THREE.LUTToneMapping) {\n        if (!blenderLUTPromise) {\n          blenderLUTPromise = new Promise(function(resolve, reject) {\n            new LUTCubeLoader().load(blenderLutPath, ({ texture3D }) => resolve(texture3D), null, reject);\n          });\n        }\n\n        blenderLUTPromise\n          .then(t => {\n            this.renderer.tonemappingLUT = t;\n          })\n          .catch(function(e) {\n            console.error(\"Error loading Blender LUT\", e);\n            blenderLUTPromise = null;\n          });\n      } else {\n        this.renderer.tonemappingLUT = null;\n      }\n    }\n\n    this.renderer.toneMappingExposure = settings.toneMappingExposure;\n\n    const newOutputEncoding = THREE[settings.outputEncoding];\n    if (this.renderer.outputEncoding !== newOutputEncoding) {\n      this.renderer.outputEncoding = newOutputEncoding;\n      materialsNeedUpdate = true;\n    }\n\n    this.scene.remove(window.lp);\n\n    if (settings.backgroundTexture) {\n      // Assume texture is always an equirect for now\n      settings.backgroundTexture.mapping = THREE.EquirectangularReflectionMapping;\n      this.scene.background = settings.backgroundTexture;\n    } else {\n      this.scene.background = settings.backgroundColor;\n    }\n\n    if (settings.envMapTexture) {\n      if (this.prevEnvMapTextureUUID !== settings.envMapTexture.uuid) {\n        this.prevEnvMapTextureUUID = settings.envMapTexture.uuid;\n        // TODO PMREMGenerator should be fixed to not assume this\n        settings.envMapTexture.flipY = true;\n        // Assume texture is always an equirect for now\n        settings.envMapTexture.mapping = THREE.EquirectangularReflectionMapping;\n        this.scene.environment = settings.envMapTexture;\n      }\n    } else if (settings.skybox) {\n      if (this.prevEnvMapTextureUUID !== settings.skybox.uuid) {\n        this.prevEnvMapTextureUUID = settings.skybox.uuid;\n        this.scene.environment = settings.skybox.sky.generateEnvironmentMap(this.renderer);\n      }\n    } else {\n      this.scene.environment = null;\n      this.prevEnvMapTextureUUID = null;\n    }\n\n    if (this.scene.fog?.name !== settings.fogType) {\n      if (settings.fogType === \"linear\") {\n        this.scene.fog = new THREE.Fog(settings.fogColor, settings.fogNear, settings.fogFar);\n      } else if (settings.fogType === \"exponential\") {\n        this.scene.fog = new THREE.FogExp2(settings.fogColor, settings.fogDensity);\n      } else {\n        this.scene.fog = null;\n      }\n      materialsNeedUpdate = true;\n    } else if (settings.fogType) {\n      this.scene.fog.color.copy(settings.fogColor);\n      if (settings.fogType === \"linear\") {\n        this.scene.fog.near = settings.fogNear;\n        this.scene.fog.far = settings.fogFar;\n      } else if (settings.fogType === \"exponential\") {\n        this.scene.fog.density = settings.fogDensity;\n      }\n    }\n\n    if (materialsNeedUpdate) {\n      if (this.debugMode) console.log(\"materials need updating\");\n      this.scene.traverse(o => {\n        if (o.material) o.material.needsUpdate = true;\n      });\n    }\n  }\n}\n\nAFRAME.registerComponent(\"nav-mesh\", {\n  schema: {\n    zone: { default: \"character\" }\n  }\n});\n\nAFRAME.registerComponent(\"environment-settings\", {\n  schema: {\n    toneMapping: { default: defaultEnvSettings.toneMapping, oneOf: Object.values(toneMappingOptions) },\n    toneMappingExposure: { default: defaultEnvSettings.toneMappingExposure },\n    backgroundColor: { type: \"color\", default: defaultEnvSettings.background },\n\n    fogType: { type: \"string\", default: defaultEnvSettings.fogType },\n    fogColor: { type: \"color\", default: defaultEnvSettings.fogColor },\n    fogDensity: { type: \"number\", default: defaultEnvSettings.fogDensity },\n    fogNear: { type: \"number\", default: defaultEnvSettings.forNear },\n    fogFar: { type: \"number\", default: defaultEnvSettings.fogFar }\n  }\n});\n\nAFRAME.registerComponent(\"reflection-probe\", {\n  schema: {\n    size: { default: 1 },\n    envMapTexture: { type: \"map\" }\n  },\n\n  init: function() {\n    this.el.object3D.updateMatrices();\n\n    const box = new THREE.Box3()\n      .setFromCenterAndSize(new THREE.Vector3(), new THREE.Vector3().setScalar(this.data.size * 2))\n      .applyMatrix4(this.el.object3D.matrixWorld);\n\n    this.el.setObject3D(\"probe\", new THREE.ReflectionProbe(box, this.data.envMapTexture));\n\n    if (this.el.sceneEl.systems[\"hubs-systems\"].environmentSystem.debugMode) {\n      const debugBox = new THREE.Box3().setFromCenterAndSize(\n        new THREE.Vector3(),\n        new THREE.Vector3().setScalar(this.data.size * 2)\n      );\n      this.el.setObject3D(\n        \"helper\",\n        new THREE.Box3Helper(debugBox, new THREE.Color(Math.random(), Math.random(), Math.random()))\n      );\n    }\n  }\n});\n","module.exports = __webpack_public_path__ + \"assets/blender-lut-d60eebdc2b11fbaa6a041253ed1402b0.cube\";","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"trackColor\":\"var(--primary-color)\",\"number-with-range\":\"Slider__number-with-range__2yK02\",\"numberWithRange\":\"Slider__number-with-range__2yK02\",\"range-slider\":\"Slider__range-slider__3GLiW\",\"rangeSlider\":\"Slider__range-slider__3GLiW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-screen-layout\":\"LoadingScreenLayout__loading-screen-layout__FjWc6\",\"loadingScreenLayout\":\"LoadingScreenLayout__loading-screen-layout__FjWc6\",\"center\":\"LoadingScreenLayout__center__GIcnI\",\"logo\":\"LoadingScreenLayout__logo__3bfwo\",\"bottom\":\"LoadingScreenLayout__bottom__2FUSp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-menu\":\"ContentMenu__content-menu__15hNf\",\"contentMenu\":\"ContentMenu__content-menu__15hNf\",\"content-menu-button\":\"ContentMenu__content-menu-button__1QkGw\",\"contentMenuButton\":\"ContentMenu__content-menu-button__1QkGw\",\"active\":\"ContentMenu__active__S2U1Z\",\"separator\":\"ContentMenu__separator__27bBF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav-item\":\"preferences-screen__nav-item__3wk4x\",\"navItem\":\"preferences-screen__nav-item__3wk4x\",\"dropdown\":\"preferences-screen__dropdown__Yvmf_\",\"section-title\":\"preferences-screen__section-title__1JGHh\",\"sectionTitle\":\"preferences-screen__section-title__1JGHh\",\"refresh-prompt\":\"preferences-screen__refresh-prompt__298UP\",\"refreshPrompt\":\"preferences-screen__refresh-prompt__298UP\",\"preference-label\":\"preferences-screen__preference-label__2QMX3\",\"preferenceLabel\":\"preferences-screen__preference-label__2QMX3\",\"max-resolution-preference-item\":\"preferences-screen__max-resolution-preference-item__1lqd7\",\"maxResolutionPreferenceItem\":\"preferences-screen__max-resolution-preference-item__1lqd7\",\"preferences-panel\":\"preferences-screen__preferences-panel__1WQqG\",\"preferencesPanel\":\"preferences-screen__preferences-panel__1WQqG\",\"refresh-now-button\":\"preferences-screen__refresh-now-button__3AysF\",\"refreshNowButton\":\"preferences-screen__refresh-now-button__3AysF\",\"reset-to-default-button\":\"preferences-screen__reset-to-default-button__1WpmV\",\"resetToDefaultButton\":\"preferences-screen__reset-to-default-button__1WpmV\",\"close-button\":\"preferences-screen__close-button__2zMLp\",\"closeButton\":\"preferences-screen__close-button__2zMLp\",\"no-default-button-style\":\"preferences-screen__no-default-button-style__3rNT-\",\"noDefaultButtonStyle\":\"preferences-screen__no-default-button-style__3rNT-\",\"nav-container\":\"preferences-screen__nav-container__18eMw\",\"navContainer\":\"preferences-screen__nav-container__18eMw\",\"nav\":\"preferences-screen__nav__CgUX7\",\"selected\":\"preferences-screen__selected__13wz5\",\"vertical\":\"preferences-screen__vertical__3umN8\",\"horizontal\":\"preferences-screen__horizontal__2Libq\",\"list-item\":\"preferences-screen__list-item__2bJXt\",\"listItem\":\"preferences-screen__list-item__2bJXt\",\"column\":\"preferences-screen__column__2Q5rv\",\"row\":\"preferences-screen__row__24y1Q\",\"row-right\":\"preferences-screen__row-right__2dL9F\",\"rowRight\":\"preferences-screen__row-right__2dL9F\",\"row-center\":\"preferences-screen__row-center__1CC_y\",\"rowCenter\":\"preferences-screen__row-center__1CC_y\",\"warn-icon\":\"preferences-screen__warn-icon__1yCTe\",\"warnIcon\":\"preferences-screen__warn-icon__1yCTe\",\"warn-icon-placeholder\":\"preferences-screen__warn-icon-placeholder__1i4lO\",\"warnIconPlaceholder\":\"preferences-screen__warn-icon-placeholder__1i4lO\",\"control-with-default\":\"preferences-screen__control-with-default__2-fUi\",\"controlWithDefault\":\"preferences-screen__control-with-default__2-fUi\",\"toast\":\"preferences-screen__toast__3VuzK\",\"reset-to-default-button-placeholder\":\"preferences-screen__reset-to-default-button-placeholder__1-EM_\",\"resetToDefaultButtonPlaceholder\":\"preferences-screen__reset-to-default-button-placeholder__1-EM_\",\"flex\":\"preferences-screen__flex__G1TbZ\",\"icon\":\"preferences-screen__icon__1JySY\",\"content-container\":\"preferences-screen__content-container__3VLFw\",\"contentContainer\":\"preferences-screen__content-container__3VLFw\",\"scrolling-content\":\"preferences-screen__scrolling-content__3eE_K\",\"scrollingContent\":\"preferences-screen__scrolling-content__3eE_K\",\"checkbox-placeholder\":\"preferences-screen__checkbox-placeholder__3_hLX\",\"checkboxPlaceholder\":\"preferences-screen__checkbox-placeholder__3_hLX\",\"section\":\"preferences-screen__section__2StMI\",\"dropdown-arrow\":\"preferences-screen__dropdown-arrow__3nHfN\",\"dropdownArrow\":\"preferences-screen__dropdown-arrow__3nHfN\",\"number-with-range\":\"preferences-screen__number-with-range__35LSW\",\"numberWithRange\":\"preferences-screen__number-with-range__35LSW\",\"number-in-number-with-range\":\"preferences-screen__number-in-number-with-range__2KQrK\",\"numberInNumberWithRange\":\"preferences-screen__number-in-number-with-range__2KQrK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer-wrapper\":\"TextInput__outer-wrapper__1f4NF\",\"outerWrapper\":\"TextInput__outer-wrapper__1f4NF\",\"input-wrapper\":\"TextInput__input-wrapper__j3Fk-\",\"inputWrapper\":\"TextInput__input-wrapper__j3Fk-\",\"before-input\":\"TextInput__before-input__v6otW\",\"beforeInput\":\"TextInput__before-input__v6otW\",\"after-input\":\"TextInput__after-input__380cd\",\"afterInput\":\"TextInput__after-input__380cd\",\"button\":\"TextInput__button__1ue_9\",\"icon-button\":\"TextInput__icon-button__3y8mN\",\"iconButton\":\"TextInput__icon-button__3y8mN\",\"disabled\":\"TextInput__disabled__2k5hv\",\"invalid\":\"TextInput__invalid__1NkU6\",\"text-input\":\"TextInput__text-input__1-6ZA\",\"textInput\":\"TextInput__text-input__1-6ZA\",\"invalid-icon\":\"TextInput__invalid-icon__2kFlx\",\"invalidIcon\":\"TextInput__invalid-icon__2kFlx\"};","/* eslint-disable @calm/react-intl/missing-formatted-message */\n\n/*\nNOTE: support.js needs to be as self-contained as possible, since it needs to work in legacy browers\nthat we do not support. Avoid adding imports to libraries or other modules from our own codebase\nthat might break the support UI in legacy browsers.\nWe also do not support localization in this file, since it would require additional transpiliation\nand polyfilling.\n*/\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport copy from \"copy-to-clipboard\";\nimport { detectOS } from \"detect-browser\";\nimport \"./react-components/styles/global.scss\";\nimport styles from \"./assets/stylesheets/support.scss\";\n\nconst SHORTHAND_INITIALIZER = \"var foo = 'bar'; var baz = { foo };\";\nconst SPREAD_SYNTAX = \"var foo = {}; var baz = { ...foo };\";\nconst CATCH_SYNTAX = \"try { foo(); } catch {}\";\n\nfunction syntaxSupported(syntax) {\n  try {\n    eval(syntax);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction getPlatformSupport() {\n  return [\n    { name: \"Web Assembly\", supported: !!window.WebAssembly },\n    { name: \"Media Devices\", supported: !!navigator.mediaDevices },\n    {\n      name: \"Modern JavaScript Syntax\",\n      supported:\n        syntaxSupported(CATCH_SYNTAX) && syntaxSupported(SPREAD_SYNTAX) && syntaxSupported(SHORTHAND_INITIALIZER)\n    }\n  ];\n}\n\nfunction isInAppBrowser() {\n  // Some apps like Twitter, Discord and Facebook on Android and iOS open links in\n  // their own embedded preview browsers.\n  //\n  // On iOS this WebView does not have a mediaDevices API at all, but in Android apps\n  // like Facebook, the browser pretends to have a mediaDevices, but never actually\n  // prompts the user for device access. So, we show a dialog that tells users to open\n  // the room in an actual browser like Safari, Chrome or Firefox.\n  //\n  // Facebook Mobile Browser on Android has a userAgent like this:\n  // Mozilla/5.0 (Linux; Android 9; SM-G950U1 Build/PPR1.180610.011; wv) AppleWebKit/537.36 (KHTML, like Gecko)\n  // Version/4.0 Chrome/80.0.3987.149 Mobile Safari/537.36 [FB_IAB/FB4A;FBAV/262.0.0.34.117;]\n  const detectedOS = detectOS(navigator.userAgent);\n  return (detectedOS === \"iOS\" && !navigator.mediaDevices) || /\\bfb_iab\\b/i.test(navigator.userAgent);\n}\n\nexport function platformUnsupported() {\n  return getPlatformSupport().some(s => !s.supported) || isInAppBrowser();\n}\n\nclass Support extends React.Component {\n  state = { showDetails: false, hasCopied: false };\n  toggleDetails = e => {\n    e.preventDefault();\n    this.setState(state => {\n      state.showDetails = !state.showDetails;\n      return state;\n    });\n  };\n  onCopyClicked = e => {\n    e.preventDefault();\n    copy(document.location);\n    this.setState({ hasCopied: true });\n  };\n  render() {\n    const platformSupport = getPlatformSupport();\n    const allSupported = platformSupport.every(s => s.supported);\n    const inAppBrowser = isInAppBrowser();\n\n    if (allSupported && !inAppBrowser) return null;\n\n    const detectedOS = detectOS(navigator.userAgent);\n\n    return (\n      <div className={styles.supportMain}>\n        <div className={styles.supportContent}>\n          <h1>Mozilla Hubs</h1>\n          <br />\n          <p className={styles.unsupportedLangs}>\n            · <span>Unsupported</span> · <span>No Soportado</span> · <span>Nicht Unterstützt</span>\n            {\" · \"}\n            <span>Sem Suporte</span> · <span>Non Compatible</span> · <span>不支援</span>\n            {\" · \"}\n            <span>не поддерживается</span> · <span>サポートされていません</span> ·\n          </p>\n          <br />\n          <p>\n            <span>Your browser is missing required features.</span>\n            <br />\n            {inAppBrowser ? (\n              detectedOS === \"iOS\" ? (\n                <span>Copy and paste this link directly into Safari</span>\n              ) : (\n                <span>Copy and paste this link directly into Chrome or Firefox</span>\n              )\n            ) : (\n              <span>Please try switching or updating to a newer browser</span>\n            )}\n            <br />\n            <br />\n            <input type=\"text\" readOnly onFocus={e => e.target.select()} value={document.location} />\n            <a className=\"copy-link\" href=\"#\" onClick={this.onCopyClicked}>\n              {this.state.hasCopied ? \"copied!\" : \"copy\"}\n            </a>\n            <br />\n            <br />\n            <a className={styles.detailsLink} href=\"#\" onClick={this.toggleDetails}>\n              <span>details</span>\n            </a>\n          </p>\n          {this.state.showDetails && (\n            <table className={styles.details}>\n              <tbody>\n                {platformSupport.sort((a, b) => (a.supported && !b.supported ? 1 : -1)).map(s => (\n                  <tr key={s.name}>\n                    <td>{s.name}</td>\n                    <td>{s.supported ? \"supported\" : \"unsupported\"}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  ReactDOM.render(<Support />, document.getElementById(\"support-root\"));\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./Modal.scss\";\n\nexport function Modal({\n  title,\n  titleNode,\n  beforeTitle,\n  afterTitle,\n  children,\n  contentClassName,\n  className,\n  disableFullscreen\n}) {\n  return (\n    <div className={classNames(styles.modal, { [styles.smFullscreen]: !disableFullscreen }, className)}>\n      {(title || beforeTitle || afterTitle) && (\n        <div className={styles.header}>\n          <div className={styles.beforeTitle}>{beforeTitle}</div>\n          {titleNode ? titleNode : <h5>{title}</h5>}\n          <div className={styles.afterTitle}>{afterTitle}</div>\n        </div>\n      )}\n      <div className={classNames(styles.content, contentClassName)}>{children}</div>\n    </div>\n  );\n}\n\nModal.propTypes = {\n  title: PropTypes.node,\n  titleNode: PropTypes.node,\n  beforeTitle: PropTypes.node,\n  afterTitle: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  contentClassName: PropTypes.string,\n  disableFullscreen: PropTypes.bool\n};\n","module.exports = __webpack_public_path__ + \"assets/models/DuckyMesh-bb97d3e4ddb733f9a8bdeadcf3fe3e2a.glb\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"interstitial\":\"ui-root__interstitial__1cotl\",\"ui\":\"ui-root__ui__33CMU\",\"no-default-button-style\":\"ui-root__no-default-button-style__qWBUA\",\"noDefaultButtonStyle\":\"ui-root__no-default-button-style__qWBUA\",\"avatar-editor\":\"ui-root__avatar-editor__2mO8z\",\"avatarEditor\":\"ui-root__avatar-editor__2mO8z\"};","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { IconButton } from \"../input/IconButton\";\nimport { ReactComponent as CloseIcon } from \"../icons/Close.svg\";\nimport styles from \"./CloseButton.scss\";\n\nexport function CloseButton({ lg, className, ...rest }) {\n  return (\n    <IconButton className={classNames({ [styles.lg]: lg }, className)} {...rest}>\n      <CloseIcon width={16} height={16} />\n    </IconButton>\n  );\n}\n\nCloseButton.propTypes = {\n  className: PropTypes.string,\n  lg: PropTypes.bool\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hidden\":\"ObjectUrlModal__hidden__1INnH\",\"url-input\":\"ObjectUrlModal__url-input__3FqDw\",\"urlInput\":\"ObjectUrlModal__url-input__3FqDw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"code-container\":\"EnterOnDeviceModal__code-container__xLcj1\",\"codeContainer\":\"EnterOnDeviceModal__code-container__xLcj1\",\"short-url-container\":\"EnterOnDeviceModal__short-url-container__3DltK\",\"shortUrlContainer\":\"EnterOnDeviceModal__short-url-container__3DltK\",\"code-letter\":\"EnterOnDeviceModal__code-letter__2j09a\",\"codeLetter\":\"EnterOnDeviceModal__code-letter__2j09a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"level-bar-container\":\"LevelBar__level-bar-container__qc4HE\",\"levelBarContainer\":\"LevelBar__level-bar-container__qc4HE\",\"level-bar-border\":\"LevelBar__level-bar-border__1zPGA\",\"levelBarBorder\":\"LevelBar__level-bar-border__1zPGA\",\"level-bar\":\"LevelBar__level-bar__3K0A8\",\"levelBar\":\"LevelBar__level-bar__3K0A8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"person\":\"PeopleSidebar__person__2MDeA\",\"moderator-icon\":\"PeopleSidebar__moderator-icon__19Fqq\",\"moderatorIcon\":\"PeopleSidebar__moderator-icon__19Fqq\",\"presence\":\"PeopleSidebar__presence__xhCbs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar-preview-container\":\"UserProfileSidebar__avatar-preview-container__2d92D\",\"avatarPreviewContainer\":\"UserProfileSidebar__avatar-preview-container__2d92D\",\"slider-container\":\"UserProfileSidebar__slider-container__GJXA4\",\"sliderContainer\":\"UserProfileSidebar__slider-container__GJXA4\",\"slider-input-container\":\"UserProfileSidebar__slider-input-container__38dT6\",\"sliderInputContainer\":\"UserProfileSidebar__slider-input-container__38dT6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tip\":\"Tip__tip__28GK8\",\"content\":\"Tip__content__2Iyoa\",\"dismiss-button\":\"Tip__dismiss-button__2kHA1\",\"dismissButton\":\"Tip__dismiss-button__2kHA1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"no-default-button-style\":\"presence-log__no-default-button-style__3o-00\",\"noDefaultButtonStyle\":\"presence-log__no-default-button-style__3o-00\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"message-source-link\":\"presence-log__message-source-link__1evTZ\",\"messageSourceLink\":\"presence-log__message-source-link__1evTZ\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\n/**\n * Split a delimited component property string (e.g., `material.color`) to an object\n * containing `component` name and `property` name. If there is no delimiter, just return the\n * string back.\n *\n * Cache arrays from splitting strings via delimiter to save on memory.\n *\n * @param {string} str - e.g., `material.opacity`.\n * @param {string} delimiter - e.g., `.`.\n * @returns {array} e.g., `['material', 'opacity']`.\n */\nvar propertyPathCache = {};\nfunction getComponentPropertyPath(str, delimiter) {\n  delimiter = delimiter || \".\";\n  if (!propertyPathCache[delimiter]) {\n    propertyPathCache[delimiter] = {};\n  }\n  if (str.indexOf(delimiter) !== -1) {\n    propertyPathCache[delimiter][str] = str.split(delimiter);\n  } else {\n    propertyPathCache[delimiter][str] = str;\n  }\n  return propertyPathCache[delimiter][str];\n}\n\n/**\n * Get component property using encoded component name + component property name with a\n * delimiter.\n */\nconst getComponentProperty = function(el, name, delimiter) {\n  var splitName;\n  delimiter = delimiter || \".\";\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      return el.getAttribute(splitName);\n    }\n    return el.getAttribute(splitName[0])[splitName[1]];\n  }\n  return el.getAttribute(name);\n};\n\n/**\n * Set component property using encoded component name + component property name with a\n * delimiter.\n */\nconst setComponentProperty = function(el, name, value, delimiter) {\n  var splitName;\n  delimiter = delimiter || \".\";\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      el.setAttribute(splitName, value);\n    } else {\n      el.setAttribute(splitName[0], splitName[1], value);\n    }\n    return;\n  }\n  el.setAttribute(name, value);\n};\n\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.light.color.convertSRGBToLinear();\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\nAFRAME.registerComponent(\"billboard\", {\n  schema: {\n    onlyY: { type: \"boolean\" }\n  },\n  init: function() {\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromProjectionMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = this.el.sceneEl.is(\"vr-mode\") ? true : isInViewOfCamera(this.el.object3D, this.playerCamera);\n\n      if (!this.isInView) {\n        // Check in-game camera if rendering to viewfinder and owned\n        const cameraTools = this.el.sceneEl.systems[\"camera-tools\"];\n\n        if (cameraTools) {\n          cameraTools.ifMyCameraRenderingViewfinder(cameraTool => {\n            this.isInView = this.isInView || isInViewOfCamera(this.el.object3D, cameraTool.camera);\n          });\n        }\n      }\n    };\n  })(),\n\n  _updateBillboard: (function() {\n    const targetPos = new THREE.Vector3();\n    const worldPos = new THREE.Vector3();\n    return function() {\n      if (!this.el.object3D.visible) return;\n\n      const camera = this.el.sceneEl.camera;\n      const object3D = this.el.object3D;\n\n      if (camera) {\n        // Set the camera world position as the target.\n        targetPos.setFromMatrixPosition(camera.matrixWorld);\n\n        if (this.data.onlyY) {\n          object3D.getWorldPosition(worldPos);\n          targetPos.y = worldPos.y;\n        }\n        object3D.lookAt(targetPos);\n\n        object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })()\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","AFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      color.convertSRGBToLinear();\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n      this.networkedEntity = networkedEntity;\n\n      this.initialScale = this.networkedEntity.object3D.scale.x;\n      this.maxScale = this.data.maxScale * this.initialScale;\n    });\n  },\n\n  tick: function() {\n    if (!this.networkedEntity || NAF.utils.isMine(this.networkedEntity)) {\n      const entity = this.networkedEntity || this.el;\n      const currentScale = entity.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        entity.setAttribute(\"body-helper\", { gravity: { x, y: force, z } });\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.store.state.preferences.materialQualitySetting);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      color.convertSRGBToLinear();\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.bodyHelper) {\n      this.bodyHelper = this.el.components[\"body-helper\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction && interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.bodyHelper.data.linearSleepingThreshold;\n      const angularThreshold = this.bodyHelper.data.angularSleepingThreshold;\n      const uuid = this.bodyHelper.uuid;\n      const isAtRest =\n        physicsSystem.bodyInitialized(uuid) &&\n        physicsSystem.getLinearVelocity(uuid) < linearThreshold &&\n        physicsSystem.getAngularVelocity(uuid) < angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"body-helper\", { type: \"kinematic\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.data.autoLockOnLoad) {\n      this.el.setAttribute(\"body-helper\", {\n        gravity: { x: 0, y: 0, z: 0 }\n      });\n      this.setLocked(true);\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"body-helper\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      const uuid = this.bodyHelper.uuid;\n      const physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        (physicsSystem.bodyInitialized(uuid) && physicsSystem.getLinearVelocity(uuid) < this.data.gravitySpeedLimit)\n      ) {\n        this.el.setAttribute(\"body-helper\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS | COLLISION_LAYERS.MEDIA_FRAMES\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"body-helper\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"body-helper\", {\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE,\n        gravity: { x: 0, y: -9.8, z: 0 }\n      });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"body-helper\", {\n      gravity: { x: 0, y: 0, z: 0 },\n      collisionFilterMask: COLLISION_LAYERS.HANDS | COLLISION_LAYERS.MEDIA_FRAMES\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nTHREE.Water = function(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const textureWidth = options.textureWidth !== undefined ? options.textureWidth : 512;\n  const textureHeight = options.textureHeight !== undefined ? options.textureHeight : 512;\n\n  const clipBias = options.clipBias !== undefined ? options.clipBias : 0.0;\n  const alpha = options.alpha !== undefined ? options.alpha : 1.0;\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  //\n\n  const mirrorPlane = new THREE.Plane();\n  const normal = new THREE.Vector3();\n  const mirrorWorldPosition = new THREE.Vector3();\n  const cameraWorldPosition = new THREE.Vector3();\n  const rotationMatrix = new THREE.Matrix4();\n  const lookAtPosition = new THREE.Vector3(0, 0, -1);\n  const clipPlane = new THREE.Vector4();\n\n  const view = new THREE.Vector3();\n  const target = new THREE.Vector3();\n  const q = new THREE.Vector4();\n\n  const textureMatrix = new THREE.Matrix4();\n\n  const mirrorCamera = new THREE.PerspectiveCamera();\n\n  const parameters = {\n    minFilter: THREE.LinearFilter,\n    magFilter: THREE.LinearFilter,\n    format: THREE.RGBFormat,\n    stencilBuffer: false\n  };\n\n  const renderTarget = new THREE.WebGLRenderTarget(textureWidth, textureHeight, parameters);\n\n  if (!THREE.Math.isPowerOfTwo(textureWidth) || !THREE.Math.isPowerOfTwo(textureHeight)) {\n    renderTarget.texture.generateMipmaps = false;\n  }\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"fog\"],\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        mirrorSampler: { value: null },\n        alpha: { value: 1.0 },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        textureMatrix: { value: new THREE.Matrix4() },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: [\n      \"uniform mat4 textureMatrix;\",\n      \"uniform float time;\",\n\n      \"varying vec4 mirrorCoord;\",\n      \"varying vec4 worldPosition;\",\n\n      THREE.ShaderChunk[\"fog_pars_vertex\"],\n      THREE.ShaderChunk[\"shadowmap_pars_vertex\"],\n\n      \"void main() {\",\n      \"\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\",\n      \"\tworldPosition = mirrorCoord.xyzw;\",\n      \"\tmirrorCoord = textureMatrix * mirrorCoord;\",\n      \"\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\",\n      \"\tgl_Position = projectionMatrix * mvPosition;\",\n\n      THREE.ShaderChunk[\"fog_vertex\"],\n      THREE.ShaderChunk[\"shadowmap_vertex\"],\n\n      \"}\"\n    ].join(\"\\n\"),\n\n    fragmentShader: [\n      \"uniform sampler2D mirrorSampler;\",\n      \"uniform float alpha;\",\n      \"uniform float time;\",\n      \"uniform float size;\",\n      \"uniform float distortionScale;\",\n      \"uniform sampler2D normalSampler;\",\n      \"uniform vec3 sunColor;\",\n      \"uniform vec3 sunDirection;\",\n      \"uniform vec3 eye;\",\n      \"uniform vec3 waterColor;\",\n\n      \"varying vec4 mirrorCoord;\",\n      \"varying vec4 worldPosition;\",\n\n      \"vec4 getNoise( vec2 uv ) {\",\n      \"\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\",\n      \"\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\",\n      \"\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\",\n      \"\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\",\n      \"\tvec4 noise = texture2D( normalSampler, uv0 ) +\",\n      \"\t\ttexture2D( normalSampler, uv1 ) +\",\n      \"\t\ttexture2D( normalSampler, uv2 ) +\",\n      \"\t\ttexture2D( normalSampler, uv3 );\",\n      \"\treturn noise * 0.5 - 1.0;\",\n      \"}\",\n\n      \"void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\",\n      \"\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\",\n      \"\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\",\n      \"\tspecularColor += pow( direction, shiny ) * sunColor * spec;\",\n      \"\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\",\n      \"}\",\n\n      THREE.ShaderChunk[\"common\"],\n      THREE.ShaderChunk[\"packing\"],\n      THREE.ShaderChunk[\"bsdfs\"],\n      THREE.ShaderChunk[\"fog_pars_fragment\"],\n      THREE.ShaderChunk[\"lights_pars_begin\"],\n      THREE.ShaderChunk[\"shadowmap_pars_fragment\"],\n      THREE.ShaderChunk[\"shadowmask_pars_fragment\"],\n\n      \"void main() {\",\n      \"\tvec4 noise = getNoise( worldPosition.xz * size );\",\n      \"\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\",\n\n      \"\tvec3 diffuseLight = vec3(0.0);\",\n      \"\tvec3 specularLight = vec3(0.0);\",\n\n      \"\tvec3 worldToEye = eye-worldPosition.xyz;\",\n      \"\tvec3 eyeDirection = normalize( worldToEye );\",\n      \"\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\",\n\n      \"\tfloat distance = length(worldToEye);\",\n\n      \"\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\",\n      \"\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\",\n\n      \"\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\",\n      \"\tfloat rf0 = 0.3;\",\n      \"\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\",\n      \"\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\",\n      \"\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\",\n      \"\tvec3 outgoingLight = albedo;\",\n      \"\tgl_FragColor = vec4( outgoingLight, alpha );\",\n\n      THREE.ShaderChunk[\"tonemapping_fragment\"],\n      THREE.ShaderChunk[\"fog_fragment\"],\n\n      \"}\"\n    ].join(\"\\n\")\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: true,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.mirrorSampler.value = renderTarget.texture;\n  material.uniforms.textureMatrix.value = textureMatrix;\n  material.uniforms.alpha.value = alpha;\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n  scope.mirrorCamera = mirrorCamera;\n\n  scope.onBeforeRender = function(renderer, scene, camera) {\n    mirrorWorldPosition.setFromMatrixPosition(scope.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n\n    rotationMatrix.extractRotation(scope.matrixWorld);\n\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n\n    view.subVectors(mirrorWorldPosition, cameraWorldPosition);\n\n    // Avoid rendering when mirror is facing away\n\n    if (view.dot(normal) > 0) return;\n\n    view.reflect(normal).negate();\n    view.add(mirrorWorldPosition);\n\n    rotationMatrix.extractRotation(camera.matrixWorld);\n\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n\n    target.subVectors(mirrorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(mirrorWorldPosition);\n\n    mirrorCamera.position.copy(view);\n    mirrorCamera.up.set(0, 1, 0);\n    mirrorCamera.up.applyMatrix4(rotationMatrix);\n    mirrorCamera.up.reflect(normal);\n    mirrorCamera.lookAt(target);\n\n    mirrorCamera.far = camera.far; // Used in WebGLBackground\n\n    mirrorCamera.matrixNeedsUpdate = true;\n    mirrorCamera.updateMatrixWorld();\n    mirrorCamera.projectionMatrix.copy(camera.projectionMatrix);\n\n    // Update the texture matrix\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(mirrorCamera.projectionMatrix);\n    textureMatrix.multiply(mirrorCamera.matrixWorldInverse);\n\n    // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n    mirrorPlane.setFromNormalAndCoplanarPoint(normal, mirrorWorldPosition);\n    mirrorPlane.applyMatrix4(mirrorCamera.matrixWorldInverse);\n\n    clipPlane.set(mirrorPlane.normal.x, mirrorPlane.normal.y, mirrorPlane.normal.z, mirrorPlane.constant);\n\n    const projectionMatrix = mirrorCamera.projectionMatrix;\n\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\n\n    // Calculate the scaled plane vector\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q));\n\n    // Replacing the third row of the projection matrix\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0 - clipBias;\n    projectionMatrix.elements[14] = clipPlane.w;\n\n    eye.setFromMatrixPosition(camera.matrixWorld);\n\n    //\n\n    const currentRenderTarget = renderer.getRenderTarget();\n\n    const currentXrEnabled = renderer.xr.enabled;\n    const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n    scope.visible = false;\n\n    renderer.xr.enabled = false; // Avoid camera modification and recursion\n    renderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n    renderer.setRenderTarget(renderTarget);\n    renderer.render(scene, mirrorCamera);\n    renderer.setRenderTarget(null);\n\n    scope.visible = true;\n\n    renderer.xr.enabled = currentXrEnabled;\n    renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n    renderer.setRenderTarget(currentRenderTarget);\n  };\n};\n\nTHREE.Water.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Water.prototype.constructor = THREE.Water;\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    if (!this.data.target) return;\n\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    }\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","const DEBUG_BBAA_COLOR = 0x49ef4;\n\nconst debugMaterial = new THREE.MeshBasicMaterial({\n  color: DEBUG_BBAA_COLOR,\n  transparent: true,\n  opacity: 0.25,\n  side: THREE.DoubleSide\n});\n\nAFRAME.registerComponent(\"audio-zone\", {\n  schema: {\n    enabled: { default: true },\n    inOut: { default: true },\n    outIn: { default: true },\n    debuggable: { default: true }\n  },\n\n  init() {\n    const debugGeometry = new THREE.BoxGeometry();\n    this.debugMesh = new THREE.Mesh(debugGeometry, debugMaterial);\n    this.debugMesh.el = this.el.object3D.el;\n    const debugBBAA = new THREE.BoxHelper(this.debugMesh, DEBUG_BBAA_COLOR);\n    this.el.object3D.add(debugBBAA);\n    this.el.object3D.updateMatrixWorld(true);\n\n    // In some cases (ie. the scene page) these systems might not exist\n    // so we need to check if the do before registering.\n    this.el.sceneEl.systems[\"audio-debug\"]?.registerZone(this);\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.registerZone(this);\n\n    this.enableDebug(window.APP.store.state.preferences.showAudioDebugPanel);\n  },\n\n  remove() {\n    // In some cases (ie. the scene page) these systems might not exist\n    // so we need to check if the do before unregistering.\n    this.el.sceneEl.systems[\"audio-debug\"]?.unregisterZone(this);\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.unregisterZone(this);\n  },\n\n  update() {\n    this.enableDebug(this.data.debuggable && window.APP.store.state.preferences.showAudioDebugPanel);\n  },\n\n  isEnabled() {\n    return this.data.enabled;\n  },\n\n  getBoundingBox: (function() {\n    const bbaa = new THREE.Box3();\n    return function() {\n      return bbaa.copy(this.debugMesh.geometry.boundingBox).applyMatrix4(this.el.object3D.matrixWorld);\n    };\n  })(),\n\n  enableDebug(debuggable) {\n    this.data.debuggable = debuggable;\n    this.el.object3D.visible = debuggable;\n  },\n\n  getAudioParams() {\n    return APP.audioOverrides.get(this.el);\n  },\n\n  contains(position) {\n    return this.getBoundingBox().containsPoint(position);\n  }\n});\n","/**\n * Frustrum-based object visibilty\n * @component frustrum\n */\nAFRAME.registerComponent(\"frustrum\", {\n  schema: {\n    culled: { type: \"boolean\", default: true }\n  },\n\n  update: function() {\n    this.updateDescendants(this.data.culled);\n  },\n\n  remove: function() {\n    this.updateDescendants(true);\n  },\n\n  updateDescendants: function(culled) {\n    this.el.object3D.traverse(function(node) {\n      if (!(node instanceof THREE.Mesh)) {\n        return;\n      }\n      node.frustumCulled = culled;\n    });\n  }\n});\n","AFRAME.registerComponent(\"inject-main-camera-here\", {\n  init() {\n    // This is what actually puts the camera into the scene graph.\n    // Ideally we would just be doing this ourselves, but we have to do it after the entity we want to parent it to is created\n    // TODO any references to this entity should instead get the camera reference from the camera system\n    this.el.setObject3D(\"camera\", this.el.sceneEl.camera);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","import configs from \"./configs\";\n\nexport function isHmc() {\n  // We use show_cloud as a proxy for whether we are running on HMC versus Hubs Cloud,\n  // since show_cloud is an internal config that is typically only enabled on HMC.\n  return configs.feature(\"show_cloud\");\n}\n","import React, { forwardRef, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"./IconButton.scss\";\nimport textInputStyles from \"./TextInput.scss\";\n\nexport const IconButton = memo(\n  forwardRef(({ className, as: ButtonComponent, compactSm, lg, children, ...rest }, ref) => {\n    const buttonProps = ButtonComponent === \"button\" ? { type: \"button\" } : {};\n\n    return (\n      <ButtonComponent\n        className={classNames(\n          styles.iconButton,\n          textInputStyles.iconButton,\n          { [styles.compactSm]: compactSm, [styles.lg]: lg },\n          className\n        )}\n        {...buttonProps}\n        {...rest}\n        ref={ref}\n      >\n        {children}\n      </ButtonComponent>\n    );\n  })\n);\n\nIconButton.propTypes = {\n  // compactSm makes the icon button shift to a vertical layout in the \"sm\" (mobile) breakpoint\n  compactSm: PropTypes.bool,\n  lg: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.node\n};\n\nIconButton.defaultProps = {\n  as: \"button\"\n};\n","const { Pathfinding } = require(\"three-pathfinding\");\nimport qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n    this.mesh = null;\n    this.el.addEventListener(\"reset_scene\", this.removeNavMeshData.bind(this));\n    this.el.addEventListener(\"leaving_loading_environment\", this.removeNavMeshData.bind(this));\n  },\n\n  loadMesh: function(mesh, zone) {\n    if (this.mesh) {\n      console.error(\"tried to load multiple nav meshes\");\n      this.removeNavMeshData();\n    }\n    const geometry = mesh.geometry.clone();\n    mesh.updateMatrices();\n    geometry.applyMatrix4(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.mesh = mesh;\n\n    const teleporters = document.querySelectorAll(\"[teleporter]\");\n    for (let i = 0; i < teleporters.length; i++) {\n      teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n    }\n\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n\n    if (qsTruthy(\"debugNavmesh\")) {\n      this.helperMesh = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({ wireframe: true }));\n      this.el.sceneEl.object3D.add(this.helperMesh);\n    }\n  },\n\n  removeNavMeshData() {\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      // If it's using the debug view material, restore the original material so it can be disposed.\n      if (this.mesh._hubs_audio_debug_prev_material) {\n        this.mesh.material = this.mesh._hubs_audio_debug_prev_material;\n        this.mesh._hubs_audio_debug_prev_material = null;\n      }\n    }\n    if (this.helperMesh) {\n      this.helperMesh.material?.dispose();\n      this.helperMesh.geometry?.dispose();\n      this.helperMesh.removeFromParent();\n      this.helperMesh = null;\n    }\n    this.mesh = null;\n    this.pathfinder.zones = {};\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","module.exports = __webpack_public_path__ + \"assets/models/DefaultAvatar-798e20921f79aae310651e2fcb6f6ebb.glb\";","import { findAncestorWithComponent } from \"../utils/scene-graph\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { easeOutQuadratic } from \"../utils/easing\";\nimport { registerComponentInstance, deregisterComponentInstance } from \"../utils/component-utils\";\nimport { MediaDevicesEvents } from \"../utils/media-devices-utils\";\n\n// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\nconst IS_TALKING_THRESHOLD_MS = 1000;\nconst MIN_VOLUME_THRESHOLD = 0.08;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume;\n};\n\nfunction updateVolume(component) {\n  const newRawVolume = calculateVolume(component.analyser, component.levels);\n\n  const newPerceivedVolume = Math.log(THREE.Math.mapLinear(newRawVolume, 0, 1, 1, Math.E));\n\n  component.volume = newPerceivedVolume < MIN_VOLUME_THRESHOLD ? 0 : newPerceivedVolume;\n\n  const s = component.volume > component.prevVolume ? 0.35 : 0.3;\n  component.volume = s * component.volume + (1 - s) * component.prevVolume;\n  component.prevVolume = component.volume;\n}\n\n/**\n * Updates a `volume` property based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.disableUpdates = true;\n    this.avatarIsTalking = false;\n\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"audio-analyser\");\n    this.el.addEventListener(\n      \"sound-source-set\",\n      event => {\n        const ctx = THREE.AudioContext.getContext();\n        this.analyser = ctx.createAnalyser();\n        this.analyser.fftSize = 32;\n        this.levels = new Uint8Array(this.analyser.fftSize);\n        event.detail.soundSource.connect(this.analyser);\n      },\n      { once: true }\n    );\n\n    this.playerSessionId = findAncestorWithComponent(this.el, \"player-info\").components[\"player-info\"].playerSessionId;\n    registerComponentInstance(this, \"networked-audio-analyser\");\n  },\n\n  remove: function() {\n    deregisterComponentInstance(this, \"networked-audio-analyser\");\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.disableUpdates) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.disableUpdates) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    updateVolume(this);\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.disableUpdates = true;\n      }\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - IS_TALKING_THRESHOLD_MS) {\n        this.avatarIsTalking = false;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.disableUpdates = false;\n      this.avatarIsTalking = true;\n    }\n  }\n});\n\nfunction getAnalyser(el) {\n  // Is this the local player\n  const ikRootEl = findAncestorWithComponent(el, \"ik-root\");\n  if (ikRootEl && ikRootEl.id === \"avatar-rig\") {\n    return el.sceneEl.systems[\"local-audio-analyser\"];\n  } else {\n    const analyserEl = findAncestorWithComponent(el, \"networked-audio-analyser\");\n    if (!analyserEl) return null;\n    return analyserEl.components[\"networked-audio-analyser\"];\n  }\n}\n\n/**\n * Calculates volume of the local audio stream.\n */\nAFRAME.registerSystem(\"local-audio-analyser\", {\n  init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n\n    this.onMicEnabled = this.onMicEnabled.bind(this);\n    this.el.addEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, this.onMicEnabled);\n  },\n\n  remove() {\n    this.el.removeEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, this.onMicEnabled);\n  },\n\n  onMicEnabled() {\n    const audioSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSystem;\n    this.analyser = audioSystem.outboundAnalyser;\n    this.levels = audioSystem.analyserLevels;\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n\n    // TODO Ideally, when muted no audio should ever even make it into the analyser to begin with\n    if (APP.dialog.isMicEnabled) {\n      updateVolume(this);\n    } else {\n      this.prevVolume = this.volume;\n      this.volume = 0;\n    }\n  }\n});\n\n/**\n * Sets an entity's scale base on the volume of an audio-analyser in a parent entity.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 1.5 }\n  },\n\n  async init() {\n    await waitForDOMContentLoaded();\n    this.cameraEl = document.getElementById(\"viewing-camera\");\n  },\n\n  tick() {\n    if (!this.cameraEl) return;\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    this.el.object3D.scale.setScalar(\n      THREE.Math.mapLinear(this.analyser?.volume || 0, 0, 1, this.data.minScale, this.data.maxScale)\n    );\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Animates a morph target based on an audio-analyser in a parent entity\n * @namespace avatar\n * @component morph-audio-feedback\n */\nAFRAME.registerComponent(\"morph-audio-feedback\", {\n  schema: {\n    name: { default: \"\" },\n    minValue: { default: 0 },\n    maxValue: { default: 2 }\n  },\n\n  init() {\n    const meshes = [];\n    if (this.el.object3DMap.skinnedmesh) {\n      meshes.push(this.el.object3DMap.skinnedmesh);\n    } else if (this.el.object3DMap.group) {\n      // skinned mesh with multiple materials\n      this.el.object3DMap.group.traverse(o => o.isSkinnedMesh && meshes.push(o));\n    }\n    if (meshes.length) {\n      this.morphs = meshes\n        .map(mesh => ({ mesh, morphNumber: mesh.morphTargetDictionary[this.data.name] }))\n        .filter(m => m.morphNumber !== undefined);\n    }\n  },\n\n  tick() {\n    if (!this.morphs || !this.morphs.length) return;\n\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    const { minValue, maxValue } = this.data;\n    const morphValue = THREE.Math.mapLinear(\n      easeOutQuadratic(this.analyser ? this.analyser.volume : 0),\n      0,\n      1,\n      minValue,\n      maxValue\n    );\n    for (let i = 0; i < this.morphs.length; i++) {\n      this.morphs[i].mesh.morphTargetInfluences[this.morphs[i].morphNumber] = morphValue;\n    }\n  }\n});\n\nconst SPRITE_NAMES = {\n  MIC: [\"mic-0.png\", \"mic-1.png\", \"mic-2.png\", \"mic-3.png\", \"mic-4.png\", \"mic-5.png\", \"mic-6.png\", \"mic-7.png\"],\n  MIC_HOVER: [\n    \"mic-0_hover.png\",\n    \"mic-1_hover.png\",\n    \"mic-2_hover.png\",\n    \"mic-3_hover.png\",\n    \"mic-4_hover.png\",\n    \"mic-5_hover.png\",\n    \"mic-6_hover.png\",\n    \"mic-7_hover.png\"\n  ],\n  MIC_OFF: [\n    \"mic-off-0.png\",\n    \"mic-off-1.png\",\n    \"mic-off-2.png\",\n    \"mic-off-3.png\",\n    \"mic-off-4.png\",\n    \"mic-off-5.png\",\n    \"mic-off-6.png\",\n    \"mic-off-7.png\"\n  ],\n  MIC_OFF_HOVER: [\n    \"mic-off-0_hover.png\",\n    \"mic-off-1_hover.png\",\n    \"mic-off-2_hover.png\",\n    \"mic-off-3_hover.png\",\n    \"mic-off-4_hover.png\",\n    \"mic-off-5_hover.png\",\n    \"mic-off-6_hover.png\",\n    \"mic-off-7_hover.png\"\n  ]\n};\n\nexport function micLevelForVolume(volume) {\n  return THREE.Math.clamp(Math.ceil(THREE.Math.mapLinear(volume - 0.05, 0, 1, 0, 7)), 0, 7);\n}\n\nAFRAME.registerComponent(\"mic-button\", {\n  schema: {\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.prevSpriteName = \"\";\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.hovering = false;\n    this.onHover = () => {\n      this.hovering = true;\n      this.data.tooltip.setAttribute(\"visible\", true);\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.data.tooltip.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    if (this.data.tooltip) {\n      this.textEl = this.data.tooltip.querySelector(\"[text]\");\n    }\n  },\n\n  tick() {\n    const audioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n    const active = this.data.active;\n    const hovering = this.hovering;\n    const spriteNames =\n      SPRITE_NAMES[active ? (hovering ? \"MIC_HOVER\" : \"MIC\") : hovering ? \"MIC_OFF_HOVER\" : \"MIC_OFF\"];\n    const level = micLevelForVolume(audioAnalyser.volume);\n    const spriteName = spriteNames[level];\n    if (spriteName !== this.prevSpriteName) {\n      this.prevSpriteName = spriteName;\n      this.el.setAttribute(\"sprite\", \"name\", spriteName);\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.textEl = this.textEl || this.data.tooltip.querySelector(\"[text]\");\n      this.textEl.setAttribute(\"text\", \"value\", active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","/* global AFRAME */\nimport { textureLoader } from \"../utils/media-utils\";\n\nimport actionButtonSrc from \"../assets/hud/action_button.9.png\";\nimport buttonSrc from \"../assets/hud/button.9.png\";\nimport nametagSrc from \"../assets/hud/nametag.9.png\";\nimport nametagBorderSrc from \"../assets/hud/nametag-border.9.png\";\n\nconst textures = {\n  \"action-button\": {\n    tex: textureLoader.load(actionButtonSrc),\n    width: 128,\n    height: 128\n  },\n  button: {\n    tex: textureLoader.load(buttonSrc),\n    width: 128,\n    height: 128\n  },\n  nametag: {\n    tex: textureLoader.load(nametagSrc),\n    width: 128,\n    height: 128\n  },\n  \"nametag-border\": {\n    tex: textureLoader.load(nametagBorderSrc),\n    width: 128,\n    height: 128\n  }\n};\n\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.BackSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      // Including case `front`.\n      return THREE.FrontSide;\n    }\n  }\n}\n\n/**\n * Slice9 component for A-Frame.\n */\nAFRAME.registerComponent(\"slice9\", {\n  schema: {\n    alphaTest: { default: 0.0 },\n    bottom: { default: 0, min: 0 },\n    color: { type: \"color\", default: \"#fff\" },\n    debug: { default: false },\n    height: { default: 1, min: 0 },\n    left: { default: 0, min: 0 },\n    opacity: { default: 1.0, min: 0, max: 1 },\n    padding: { default: 0.1, min: 0.01 },\n    right: { default: 0, min: 0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    src: { oneOf: Object.keys(textures) },\n    top: { default: 0, min: 0 },\n    transparent: { default: true },\n    width: { default: 1, min: 0 },\n    usingCustomMaterial: { default: false },\n    usingAtlas: { default: false },\n    uvAtlasMin: { type: \"vec2\" },\n    uvAtlasMax: { type: \"vec2\" }\n  },\n\n  init: function() {\n    const data = this.data;\n\n    this.textureSrc = null;\n\n    const geometry = (this.geometry = new THREE.PlaneBufferGeometry(data.width, data.height, 3, 3));\n\n    // Create mesh.\n    if (data.usingCustomMaterial) {\n      this.plane = new THREE.Mesh(geometry);\n    } else {\n      const material = new THREE.MeshBasicMaterial({\n        alphaTest: data.alphaTest,\n        color: data.color,\n        opacity: data.opacity,\n        transparent: data.transparent,\n        wireframe: data.debug\n      });\n      this.plane = new THREE.Mesh(geometry, material);\n    }\n    this.el.setObject3D(\"mesh\", this.plane);\n  },\n\n  regenerateMesh: function() {\n    const data = this.data;\n    let height;\n    const pos = this.geometry.attributes.position.array;\n    const uvs = this.geometry.attributes.uv.array;\n    let width;\n\n    if (this.plane.material && !this.plane.material.map) {\n      return;\n    }\n\n    /*\n      0--1------------------------------2--3\n      |  |                              |  |\n      4--5------------------------------6--7\n      |  |                              |  |\n      |  |                              |  |\n      |  |                              |  |\n      8--9-----------------------------10--11\n      |  |                              |  |\n      12-13----------------------------14--15\n    */\n    function setPos(id, x, y) {\n      pos[3 * id] = x;\n      pos[3 * id + 1] = y;\n    }\n\n    function setUV(id, u, v) {\n      if (data.usingAtlas) {\n        u = data.uvAtlasMin.x + u * (data.uvAtlasMax.x - data.uvAtlasMin.x);\n        v = data.uvAtlasMin.y + v * (data.uvAtlasMax.y - data.uvAtlasMin.y);\n      }\n      uvs[2 * id] = u;\n      uvs[2 * id + 1] = v;\n    }\n\n    // Update UVS\n    if (data.usingCustomMaterial) {\n      height = 1;\n      width = 1;\n    } else {\n      height = textures[data.src].height;\n      width = textures[data.src].width;\n    }\n    const uv = {\n      left: data.left / width,\n      right: data.right / width,\n      top: data.top / height,\n      bottom: data.bottom / height\n    };\n\n    setUV(1, uv.left, 1);\n    setUV(2, uv.right, 1);\n\n    setUV(4, 0, uv.bottom);\n    setUV(5, uv.left, uv.bottom);\n    setUV(6, uv.right, uv.bottom);\n    setUV(7, 1, uv.bottom);\n\n    setUV(8, 0, uv.top);\n    setUV(9, uv.left, uv.top);\n    setUV(10, uv.right, uv.top);\n    setUV(11, 1, uv.top);\n\n    setUV(13, uv.left, 0);\n    setUV(14, uv.right, 0);\n\n    if (data.usingAtlas) {\n      setUV(0, 0, 1);\n      setUV(3, 1, 1);\n      setUV(12, 0, 0);\n      setUV(15, 1, 0);\n    }\n\n    // Update vertex positions\n    const w2 = data.width / 2;\n    const h2 = data.height / 2;\n    const left = -w2 + data.padding;\n    const right = w2 - data.padding;\n    const top = h2 - data.padding;\n    const bottom = -h2 + data.padding;\n\n    setPos(0, -w2, h2);\n    setPos(1, left, h2);\n    setPos(2, right, h2);\n    setPos(3, w2, h2);\n\n    setPos(4, -w2, top);\n    setPos(5, left, top);\n    setPos(6, right, top);\n    setPos(7, w2, top);\n\n    setPos(8, -w2, bottom);\n    setPos(9, left, bottom);\n    setPos(10, right, bottom);\n    setPos(11, w2, bottom);\n\n    setPos(13, left, -h2);\n    setPos(14, right, -h2);\n    setPos(12, -w2, -h2);\n    setPos(15, w2, -h2);\n\n    this.geometry.attributes.position.needsUpdate = true;\n    this.geometry.attributes.uv.needsUpdate = true;\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const diff = AFRAME.utils.diff(data, oldData);\n\n    // Update material if using built-in material.\n    if (!data.usingCustomMaterial) {\n      this.plane.material.alphaTest = data.alphaTest;\n      this.plane.material.color.setStyle(data.color);\n      this.plane.material.opacity = data.opacity;\n      this.plane.material.transparent = data.transparent;\n      this.plane.material.wireframe = data.debug;\n      this.plane.material.side = parseSide(data.side);\n      this.plane.material.needsUpdate = true;\n      if (\"src\" in diff) {\n        this.updateMap();\n      }\n    }\n\n    if (\n      \"width\" in diff ||\n      \"height\" in diff ||\n      \"padding\" in diff ||\n      \"left\" in diff ||\n      \"top\" in diff ||\n      \"bottom\" in diff ||\n      \"right\" in diff\n    ) {\n      this.regenerateMesh();\n    }\n  },\n\n  setMap(texture) {\n    this.plane.material.map = texture;\n    this.plane.material.needsUpdate = true;\n    this.regenerateMesh();\n  },\n\n  /**\n   * Update `src` if using built-in material.\n   */\n  updateMap: function() {\n    const src = this.data.src;\n\n    if (src) {\n      if (src === this.textureSrc) {\n        return;\n      }\n      // Texture added or changed.\n      this.textureSrc = src;\n      this.setMap(textures[src].tex);\n      return;\n    }\n\n    // Texture removed.\n    if (!this.plane.material.map) {\n      return;\n    }\n\n    this.setMap(null);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    /* DEPRECATED: Use activeClipIndex instead since animation names are not unique */\n    clip: { type: \"string\", default: \"\" },\n    activeClipIndex: { type: \"int\", default: 0 },\n    activeClipIndices: { type: \"array\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    this.currentActions = [];\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n  },\n\n  update(oldData) {\n    if (this.mixerEl) {\n      if (oldData.clip !== this.data.clip || oldData.activeClipIndex !== this.data.activeClipIndex) {\n        this.updateClip();\n      }\n\n      if (oldData.paused !== this.data.paused) {\n        for (let i = 0; i < this.currentActions.length; i++) {\n          this.currentActions[i].paused = this.data.paused;\n        }\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const { clip: clipName, activeClipIndex } = this.data;\n    const { activeClipIndices } = this.data;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clips = [];\n    if (activeClipIndices && activeClipIndices.length > 0) {\n      // Support for Spoke->Hubs activeClipIndices struct\n      clips = activeClipIndices.map(index => animations[index]);\n    } else {\n      // Support for old Spoke->Hubs { clipName, activeClipIndex } struct. Still used for Blender imports.\n      if (clipName !== \"\") {\n        const clipNames = clipName.split(\",\");\n        for (let i = 0; i < clipNames.length; i++) {\n          const n = clipNames[i];\n          const a = animations.find(({ name }) => name === n);\n          if (a) {\n            clips.push(a);\n          } else {\n            console.warn(`Could not find animation named '${n}' in ${this.el.className}`);\n          }\n        }\n      } else {\n        clips = [animations[activeClipIndex]];\n      }\n    }\n\n    if (!(clips && clips.length)) return;\n\n    this.currentActions.length = 0;\n\n    for (let i = 0; i < clips.length; i++) {\n      const action = mixer.clipAction(clips[i], this.el.object3D);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.currentActions.push(action);\n    }\n  },\n\n  destroy() {\n    for (let i = 0; i < this.currentActions.length; i++) {\n      this.currentActions[i].enabled = false;\n      this.currentActions[i].stop();\n    }\n    this.currentActions.length = 0;\n  }\n});\n","import { computeObjectAABB, getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport {\n  resolveUrl,\n  getDefaultResolveQuality,\n  injectCustomShaderChunks,\n  addMeshScaleAnimation,\n  closeExistingMediaMirror\n} from \"../utils/media-utils\";\nimport {\n  isNonCorsProxyDomain,\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isLocalHubsSceneUrl,\n  isLocalHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport loadingObjectSrc from \"../assets/models/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { cloneObject3D, setMatrixWorld } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nimport { SHAPE } from \"three-ammo/constants\";\n\nlet loadingObject;\n\nwaitForDOMContentLoaded().then(() => {\n  loadModel(loadingObjectSrc).then(gltf => {\n    loadingObject = gltf;\n  });\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst forceMeshBatching = qsTruthy(\"batchMeshes\");\nconst forceImageBatching = qsTruthy(\"batchImages\");\nconst disableBatching = qsTruthy(\"disableBatching\");\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    playSoundEffect: { default: true },\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    version: { type: \"number\", default: 1 }, // Used to force a re-resolution\n    fitToBox: { default: false },\n    moveTheParentNotTheMesh: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    linkedEl: { default: null }, // This is the element of which this is a linked derivative. See linked-media.js\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.handleLinkedElRemoved = this.handleLinkedElRemoved.bind(this);\n    this.refresh = this.refresh.bind(this);\n    this.animating = false;\n\n    try {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .catch(() => {}); //ignore exception, entity might not be networked\n    } catch (e) {\n      // NAF may not exist on scene landing page\n    }\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    const originalMeshMatrix = new THREE.Matrix4();\n    const desiredObjectMatrix = new THREE.Matrix4();\n    const position = new THREE.Vector3();\n    const quaternion = new THREE.Quaternion();\n    const scale = new THREE.Vector3();\n    const box = new THREE.Box3();\n    return function(fitToBox, moveTheParentNotTheMesh) {\n      this.el.object3D.updateMatrices();\n      const mesh = this.el.getObject3D(\"mesh\");\n      mesh.updateMatrices();\n      if (moveTheParentNotTheMesh) {\n        if (fitToBox) {\n          console.warn(\n            \"Unexpected combination of inputs. Can fit the mesh to a box OR move the parent to the mesh, but did not expect to do both.\",\n            this.el\n          );\n        }\n        // Keep the mesh exactly where it is, but move the parent transform such that it aligns with the center of the mesh's bounding box.\n        originalMeshMatrix.copy(mesh.matrixWorld);\n        computeObjectAABB(mesh, box);\n        center.addVectors(box.min, box.max).multiplyScalar(0.5);\n        this.el.object3D.matrixWorld.decompose(position, quaternion, scale);\n        desiredObjectMatrix.compose(\n          center,\n          quaternion,\n          scale\n        );\n        setMatrixWorld(this.el.object3D, desiredObjectMatrix);\n        mesh.updateMatrices();\n        setMatrixWorld(mesh, originalMeshMatrix);\n      } else {\n        // Move the mesh such that the center of its bounding box is in the same position as the parent matrix position\n        const box = getBox(this.el, mesh);\n        const scaleCoefficient = fitToBox ? getScaleCoefficient(0.5, box) : 1;\n        const { min, max } = box;\n        center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n        mesh.scale.multiplyScalar(scaleCoefficient);\n        mesh.position.sub(center);\n        mesh.matrixNeedsUpdate = true;\n      }\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"shape-helper__\" + id)) {\n      this.el.removeAttribute(\"shape-helper__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  handleLinkedElRemoved(e) {\n    if (e.detail.name === \"media-loader\") {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n\n      // this should be revisited if we ever use media linking for something other than media mirroring UX --\n      // right now it is assumed if there is a linkedEl, this is the currently active mirrored media\n      closeExistingMediaMirror();\n    }\n  },\n\n  remove() {\n    if (this.data.linkedEl) {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n    }\n\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    if (this.loadingSoundEffect) {\n      sfx.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loadedSoundEffect) {\n      sfx.stopPositionalAudio(this.loadedSoundEffect);\n      this.loadedSoundEffect = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.removeAttribute(\"audio-zone-source\");\n    this.el.removeAttribute(\"media-pdf\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n\n    const mesh = useFancyLoader\n      ? cloneObject3D(loadingObject.scene)\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n\n    this.updateScale(true, false);\n\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(mesh.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"shape-helper__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n\n    if (\n      this.el.sceneEl.is(\"entered\") &&\n      (!this.networkedEl || NAF.utils.isMine(this.networkedEl)) &&\n      this.data.playSoundEffect\n    ) {\n      this.loadingSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADING,\n        this.el.object3D,\n        true\n      );\n    }\n\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundEffect) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals: (function() {\n    const boundingBox = new THREE.Box3();\n    const boundingSphere = new THREE.Sphere();\n    return function() {\n      const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n      if (hoverableVisuals) {\n        if (!this.injectedCustomShaderChunks) {\n          this.injectedCustomShaderChunks = true;\n          hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n        }\n\n        boundingBox.setFromObject(this.el.object3DMap.mesh);\n        boundingBox.getBoundingSphere(boundingSphere);\n        hoverableVisuals.geometryRadius = boundingSphere.radius / this.el.object3D.scale.y;\n      }\n    };\n  })(),\n\n  onMediaLoaded(physicsShape = null, shouldUpdateScale) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\") && this.data.playSoundEffect) {\n      this.loadedSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADED,\n        this.el.object3D,\n        false\n      );\n    }\n\n    const finish = () => {\n      this.animating = false;\n\n      if (physicsShape) {\n        el.setAttribute(\"shape-helper\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      if (this.data.linkedEl) {\n        this.el.sceneEl.systems[\"linked-media\"].registerLinkage(this.data.linkedEl, this.el);\n        this.data.linkedEl.addEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n      }\n\n      el.emit(\"media-loaded\");\n    };\n\n    if (this.data.animate) {\n      if (!this.animating) {\n        this.animating = true;\n        if (shouldUpdateScale) this.updateScale(this.data.fitToBox, this.data.moveTheParentNotTheMesh);\n        const mesh = this.el.getObject3D(\"mesh\");\n        const scale = { x: 0.001, y: 0.001, z: 0.001 };\n        scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n        scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n        scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n        addMeshScaleAnimation(mesh, scale, finish);\n      }\n    } else {\n      if (shouldUpdateScale) this.updateScale(this.data.fitToBox, this.data.moveTheParentNotTheMesh);\n      finish();\n    }\n  },\n\n  refresh() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n\n    // When we refresh, we bump the version to the current timestamp.\n    //\n    // The only use-case for refresh right now is re-fetching screenshots.\n    this.el.setAttribute(\"media-loader\", { version: Math.floor(Date.now() / 1000) });\n  },\n\n  async update(oldData, forceLocalRefresh) {\n    const { version, contentSubtype } = this.data;\n    let src = this.data.src;\n    if (!src) return;\n\n    const srcChanged = oldData.src !== src;\n    const versionChanged = !!(oldData.version && oldData.version !== version);\n\n    if (versionChanged) {\n      this.el.emit(\"media_refreshing\");\n\n      // Don't animate if its a refresh.\n      this.data.animate = false;\n\n      // Play the sound effect on a refresh only if we are the owner\n      this.data.playSoundEffect = NAF.utils.isMine(this.networkedEl);\n    }\n\n    if (forceLocalRefresh) {\n      this.el.removeAttribute(\"gltf-model-plus\");\n      this.el.removeAttribute(\"media-pager\");\n      this.el.removeAttribute(\"media-video\");\n      this.el.removeAttribute(\"audio-zone-source\");\n      this.el.removeAttribute(\"media-pdf\");\n      this.el.removeAttribute(\"media-image\");\n    }\n\n    try {\n      if ((forceLocalRefresh || srcChanged) && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      //check if url is an anchor hash e.g. #Spawn_Point_1\n      if (src.charAt(0) === \"#\") {\n        src = this.data.src = `${window.location.origin}${window.location.pathname}${window.location.search}${src}`;\n      }\n\n      let canonicalUrl = src;\n      let canonicalAudioUrl = null; // set non-null only if audio track is separated from video track (eg. 360 video)\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      const parsedUrl = new URL(src);\n\n      // We want to resolve and proxy some hubs urls, like rooms and scene links,\n      // but want to avoid proxying assets in order for this to work in dev environments\n      const isLocalModelAsset =\n        isNonCorsProxyDomain(parsedUrl.hostname) && (guessContentType(src) || \"\").startsWith(\"model/gltf\");\n\n      if (this.data.resolve && !src.startsWith(\"data:\") && !src.startsWith(\"hubs:\") && !isLocalModelAsset) {\n        const is360 = !!(this.data.mediaOptions.projection && this.data.mediaOptions.projection.startsWith(\"360\"));\n        const quality = getDefaultResolveQuality(is360);\n        const result = await resolveUrl(src, quality, version, forceLocalRefresh);\n        canonicalUrl = result.origin;\n\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n\n        canonicalAudioUrl = result.origin_audio;\n        if (canonicalAudioUrl && canonicalAudioUrl.startsWith(\"//\")) {\n          canonicalAudioUrl = location.protocol + canonicalAudioUrl;\n        }\n\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // TODO we should probably just never return \"application/octet-stream\" as expectedContentType, since its not really useful\n      if (contentType === \"application/octet-stream\") {\n        contentType = guessContentType(canonicalUrl) || contentType;\n      }\n\n      // Some servers treat m3u8 playlists as \"audio/x-mpegurl\", we always want to treat them as HLS videos\n      if (contentType === \"audio/x-mpegurl\" || contentType === \"audio/mpegurl\") {\n        contentType = \"application/vnd.apple.mpegurl\";\n      }\n\n      // We don't want to emit media_resolved for index updates.\n      if (forceLocalRefresh || srcChanged) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      } else {\n        this.el.emit(\"media_refreshed\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        contentType.startsWith(\"application/dash\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        let linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource;\n        if (this.data.linkedEl) {\n          const linkedMediaVideo = this.data.linkedEl.components[\"media-video\"];\n\n          linkedVideoTexture = linkedMediaVideo.videoTexture;\n          linkedAudioSource = linkedMediaVideo.audioSource;\n          linkedMediaElementAudioSource = linkedMediaVideo.mediaElementAudioSource;\n        }\n\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            audioSrc: canonicalAudioUrl ? proxiedUrlFor(canonicalAudioUrl) : null,\n            time: startTime,\n            contentType,\n            linkedVideoTexture,\n            linkedAudioSource,\n            linkedMediaElementAudioSource\n          })\n        );\n        this.el.setAttribute(\"audio-zone-source\", {});\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"photo-camera\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                isFlat: true\n              });\n            } else if (this.data.mediaOptions.href) {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", isFlat: true });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        let batch = !disableBatching && forceImageBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            version,\n            contentType,\n            batch\n          })\n        );\n\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\n          \"media-pdf\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType,\n            batch: false // Batching disabled until atlas is updated properly\n          })\n        );\n        this.el.setAttribute(\"media-pager\", {});\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"pdf-loaded\",\n          () => {\n            this.clearLoadingTimeout();\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.onMediaLoaded(SHAPE.HULL, true);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        let batch = !disableBatching && forceMeshBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        if (this.data.mediaOptions.hasOwnProperty(\"applyGravity\")) {\n          this.el.setAttribute(\"floaty-object\", {\n            modifyGravityOnRelease: !this.data.mediaOptions.applyGravity\n          });\n        }\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            batch,\n            modelToWorldScale: this.data.fitToBox ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          async () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (await isLocalHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                isFlat: true\n              });\n            } else if ((await isHubsRoomUrl(src)) || ((await isLocalHubsSceneUrl(src)) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                isFlat: true\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", isFlat: true });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        let batch = !disableBatching && forceImageBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            version,\n            contentType: guessContentType(thumbnail) || \"image/png\",\n            batch\n          })\n        );\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      if (this.el.components[\"position-at-border__freeze\"]) {\n        this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n      }\n      if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n        this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n      }\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    index: { default: 0 },\n    maxIndex: { default: 0 }\n  },\n\n  init() {\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n    this.onSnap = this.onSnap.bind(this);\n    this.update = this.update.bind(this);\n\n    this.el.setAttribute(\"hover-menu__pager\", { template: \"#pager-hover-menu\", isFlat: true });\n    this.el.components[\"hover-menu__pager\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.snapButton = this.el.querySelector(\".snap-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n      this.snapButton.object3D.addEventListener(\"interact\", this.onSnap);\n\n      this.update();\n      this.el.emit(\"pager-loaded\");\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkedEl.addEventListener(\"pinned\", this.update);\n        this.networkedEl.addEventListener(\"unpinned\", this.update);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.update);\n      })\n      .catch(() => {}); //ignore exception, entity might not be networked\n\n    this.el.addEventListener(\"pdf-loaded\", async () => {\n      this.update();\n    });\n  },\n\n  async update(oldData) {\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      if (oldData && typeof oldData.index === \"number\" && oldData.index !== this.data.index) {\n        this.el.emit(\"owned-pager-page-changed\");\n      }\n    }\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.data.maxIndex + 1}`);\n    }\n\n    if (this.prevButton && this.nextButton) {\n      const pinnableElement = this.el.components[\"media-loader\"].data.linkedEl || this.el;\n      const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n      this.prevButton.object3D.visible = this.nextButton.object3D.visible =\n        !isPinned || window.APP.hubChannel.can(\"pin_objects\");\n    }\n  },\n\n  onNext() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.min(this.data.index + 1, this.data.maxIndex);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onPrev() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.max(this.data.index - 1, 0);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onSnap() {\n    this.el.emit(\"pager-snap-clicked\");\n  },\n\n  remove() {\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.update);\n      this.networkedEl.removeEventListener(\"unpinned\", this.update);\n    }\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.update);\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this.wasInteracting = false;\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n      this.networkedEntity = networkedEntity;\n    });\n  },\n\n  tick: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isInteracting = interaction.isHeld(this.networkedEntity || this.el);\n\n    if (isInteracting && !this.wasInteracting) {\n      this.quack();\n    }\n\n    this.wasInteracting = isInteracting;\n  },\n\n  quack: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\nimport { CAMERA_MODE_SCENE_PREVIEW } from \"../systems/camera-system\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    const systems = AFRAME.scenes[0].systems[\"hubs-systems\"] || AFRAME.scenes[0].systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.register(this.el);\n    }\n\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const hubsSystems = this.el.sceneEl.systems[\"hubs-systems\"];\n\n    let streamerCamera;\n    if (hubsSystems) {\n      hubsSystems.cameraSystem.mode = CAMERA_MODE_SCENE_PREVIEW;\n      streamerCamera = getStreamerCamera();\n    }\n\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      newRot.slerpQuaternions(fromRot, toRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  },\n\n  remove: function() {\n    const systems = AFRAME.scenes[0]?.systems[\"hubs-systems\"] || AFRAME.scenes[0]?.systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.unregister(this.el);\n    }\n  }\n});\n","// It seems we need to use require to import modules\n// under the three/examples/js to avoid tree shaking\n// in webpack production mode.\nrequire(\"three/examples/js/lights/LightProbeGenerator\");\n\nconst {\n  AmbientLight,\n  BackSide,\n  BoxBufferGeometry,\n  CubeCamera,\n  LightProbeGenerator,\n  LinearFilter,\n  Mesh,\n  Object3D,\n  PMREMGenerator,\n  RGBAFormat,\n  Scene,\n  ShaderMaterial,\n  sRGBEncoding,\n  UniformsLib,\n  UniformsUtils,\n  Vector3,\n  WebGLCubeRenderTarget\n} = THREE;\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nconst vertexShader = `\n#include <common>\n#include <fog_pars_vertex>\n\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\n\nvoid main() {\n  #include <begin_vertex>\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  #include <project_vertex>\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n  #include <fog_vertex>\n}\n`;\n\nconst fragmentShader = `\n#include <common>\n#include <fog_pars_fragment>\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n  gl_FragColor = vec4( retColor, 1.0 );\n\n  #include <fog_fragment>\n}\n`;\n\nexport default class Sky extends Object3D {\n  static shader = {\n    uniforms: UniformsUtils.merge([\n      UniformsLib.fog,\n      {\n        luminance: { value: 1 },\n        turbidity: { value: 10 },\n        rayleigh: { value: 2 },\n        mieCoefficient: { value: 0.005 },\n        mieDirectionalG: { value: 0.8 },\n        sunPosition: { value: new Vector3() }\n      }\n    ]),\n    vertexShader,\n    fragmentShader\n  };\n\n  static _geometry = new BoxBufferGeometry(1, 1, 1);\n\n  constructor() {\n    super();\n\n    const material = new ShaderMaterial({\n      fragmentShader: Sky.shader.fragmentShader,\n      vertexShader: Sky.shader.vertexShader,\n      uniforms: UniformsUtils.clone(Sky.shader.uniforms),\n      side: BackSide,\n      fog: true\n    });\n\n    this.sky = new Mesh(Sky._geometry, material);\n    this.sky.name = \"Sky\";\n    this.add(this.sky);\n\n    this._inclination = 0;\n    this._azimuth = 0.15;\n    this._distance = 8000;\n    this.updateSunPosition();\n  }\n\n  get turbidity() {\n    return this.sky.material.uniforms.turbidity.value;\n  }\n\n  set turbidity(value) {\n    this.sky.material.uniforms.turbidity.value = value;\n  }\n\n  get rayleigh() {\n    return this.sky.material.uniforms.rayleigh.value;\n  }\n\n  set rayleigh(value) {\n    this.sky.material.uniforms.rayleigh.value = value;\n  }\n\n  get luminance() {\n    return this.sky.material.uniforms.luminance.value;\n  }\n\n  set luminance(value) {\n    this.sky.material.uniforms.luminance.value = value;\n  }\n\n  get mieCoefficient() {\n    return this.sky.material.uniforms.mieCoefficient.value;\n  }\n\n  set mieCoefficient(value) {\n    this.sky.material.uniforms.mieCoefficient.value = value;\n  }\n\n  get mieDirectionalG() {\n    return this.sky.material.uniforms.mieDirectionalG.value;\n  }\n\n  set mieDirectionalG(value) {\n    this.sky.material.uniforms.mieDirectionalG.value = value;\n  }\n\n  get inclination() {\n    return this._inclination;\n  }\n\n  set inclination(value) {\n    this._inclination = value;\n    this.updateSunPosition();\n  }\n\n  get azimuth() {\n    return this._azimuth;\n  }\n\n  set azimuth(value) {\n    this._azimuth = value;\n    this.updateSunPosition();\n  }\n\n  get distance() {\n    return this._distance;\n  }\n\n  set distance(value) {\n    this._distance = value;\n    this.updateSunPosition();\n  }\n\n  updateSunPosition() {\n    const theta = Math.PI * (this._inclination - 0.5);\n    const phi = 2 * Math.PI * (this._azimuth - 0.5);\n\n    const distance = Math.min(1000, this._distance);\n\n    const x = distance * Math.cos(phi);\n    const y = distance * Math.sin(phi) * Math.sin(theta);\n    const z = distance * Math.sin(phi) * Math.cos(theta);\n\n    this.sky.material.uniforms.sunPosition.value.set(x, y, z).normalize();\n    this.sky.scale.set(distance, distance, distance);\n  }\n\n  generateEnvironmentMap(renderer) {\n    const skyScene = new Scene();\n    const cubeCamera = new CubeCamera(1, 100000, new WebGLCubeRenderTarget(512));\n    skyScene.add(cubeCamera);\n    skyScene.add(this.sky);\n    cubeCamera.update(renderer, skyScene);\n    this.add(this.sky);\n    const vrEnabled = renderer.xr.enabled;\n    renderer.xr.enabled = false;\n    const pmremGenerator = new PMREMGenerator(renderer);\n    const envMap = pmremGenerator.fromCubemap(cubeCamera.renderTarget.texture).texture;\n    renderer.xr.enabled = vrEnabled;\n    pmremGenerator.dispose();\n    cubeCamera.renderTarget.dispose();\n    return envMap;\n  }\n\n  generateLightProbe(renderer) {\n    const skyScene = new Scene();\n    skyScene.add(this.sky);\n\n    const cubeCamera = new CubeCamera(\n      1,\n      100000,\n      new WebGLCubeRenderTarget(512, {\n        format: RGBAFormat,\n        magFilter: LinearFilter,\n        minFilter: LinearFilter,\n        encoding: sRGBEncoding\n      })\n    );\n    skyScene.add(cubeCamera);\n    skyScene.add(this.sky);\n    cubeCamera.update(renderer, skyScene);\n    this.add(this.sky);\n    const lightProbe = LightProbeGenerator.fromCubeRenderTarget(renderer, cubeCamera.renderTarget);\n    cubeCamera.renderTarget.dispose();\n    return lightProbe;\n  }\n\n  copy(source, recursive = true) {\n    if (recursive) {\n      this.remove(this.sky);\n    }\n\n    super.copy(source, recursive);\n\n    if (recursive) {\n      const skyIndex = source.children.indexOf(source.sky);\n\n      if (skyIndex !== -1) {\n        this.sky = this.children[skyIndex];\n      }\n    }\n\n    this.turbidity = source.turbidity;\n    this.rayleigh = source.rayleigh;\n    this.luminance = source.luminance;\n    this.mieCoefficient = source.mieCoefficient;\n    this.mieDirectionalG = source.mieDirectionalG;\n    this.inclination = source.inclination;\n    this.azimuth = source.azimuth;\n    this.distance = source.distance;\n\n    return this;\n  }\n}\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n  },\n\n  update(oldData) {\n    if (this.data.turbidity !== oldData.turbidity) {\n      this.sky.turbidity = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      this.sky.rayleigh = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      this.sky.luminance = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      this.sky.mieCoefficient = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      this.sky.mieDirectionalG = this.data.mieDirectionalG;\n    }\n\n    if (this.data.inclination !== oldData.inclination) {\n      this.sky.inclination = this.data.inclination;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.azimuth !== oldData.azimuth) {\n      this.sky.azimuth = this.data.azimuth;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.distance !== oldData.distance) {\n      const distance = this.data.distance;\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      this.sky.distance = this.el.object3D.scale.x === 1 ? distance : 1;\n      this.sky.matrixNeedsUpdate = true;\n    }\n\n    // TODO Remove or rework medium quality mode\n    if (window.APP.store.state.preferences.materialQualitySetting === \"medium\") {\n      // This extra ambient light is here to normalize lighting with the MeshStandardMaterial.\n      // Without it, objects are significantly darker in brighter environments.\n      // It's kept to a low value to not wash out objects in very dark environments.\n      // This is a hack, but the results are much better than they are without it.\n      this.el.setObject3D(\"ambient-light\", new AmbientLight(0xffffff, 0.3));\n      this.el.setObject3D(\"light-probe\", this.sky.generateLightProbe(this.el.sceneEl.renderer));\n    }\n\n    // TODO if we care about dynamic skybox changes we should also update the enviornment map here\n    //\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Used on a avatar-rig to move the avatar to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#avatar-pov-node\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n    });\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the avatar rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nfunction setNonNullVec3Components(target, values) {\n  target.set(\n    values.x === null ? target.x : values.x,\n    values.y === null ? target.y : values.y,\n    values.z === null ? target.z : values.z\n  );\n}\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    spawnScale: { type: \"vec3\", default: { x: NaN, y: NaN, z: NaN } },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" },\n\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = this.el.sceneEl;\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n\n    this.handleMediaLoaded = this.handleMediaLoaded.bind(this);\n\n    this.spawnedMediaScale = null;\n\n    this.physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n  },\n\n  play() {\n    this.el.addEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  handleMediaLoaded(e) {\n    const spawnedEntity = e.target;\n    this.spawnedMediaScale = spawnedEntity.object3D.scale.clone();\n    setNonNullVec3Components(this.spawnedMediaScale, this.data.spawnScale);\n\n    const boxSize =\n      spawnedEntity.components[\"media-image\"] ||\n      spawnedEntity.components[\"media-video\"] ||\n      spawnedEntity.components[\"media-pdf\"]\n        ? 1\n        : 0.5;\n\n    const scaleCoefficient = getScaleCoefficient(boxSize, getBox(spawnedEntity, spawnedEntity.object3D));\n    this.spawnedMediaScale.divideScalar(scaleCoefficient);\n  },\n\n  async onSpawnEvent(e) {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const spawnedEntity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false,\n      {\n        x: this.data.spawnScale.x === null ? 1 : this.data.spawnScale.x,\n        y: this.data.spawnScale.y === null ? 1 : this.data.spawnScale.y,\n        z: this.data.spawnScale.z === null ? 1 : this.data.spawnScale.z\n      },\n      this.data.mediaOptions\n    ).entity;\n\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const cursor = (e.detail && e.detail.object3D) || interaction.options.rightRemote.entity.object3D;\n\n    const left = cursor.el.id.indexOf(\"right\") === -1;\n    const hand = left ? interaction.options.leftHand.entity.object3D : interaction.options.rightHand.entity.object3D;\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    this.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const willAnimateFromCursor =\n      this.data.animateFromCursor &&\n      (userinput.get(paths.actions.rightHand.matrix) || userinput.get(paths.actions.leftHand.matrix));\n    if (!willAnimateFromCursor) {\n      if (left) {\n        interaction.state.leftRemote.held = spawnedEntity;\n        interaction.state.leftRemote.spawning = true;\n      } else {\n        interaction.state.rightRemote.held = spawnedEntity;\n        interaction.state.rightRemote.spawning = true;\n      }\n    }\n    this.activateCooldown();\n    await waitForEvent(\"model-loaded\", spawnedEntity);\n\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      hand.getWorldPosition(this.handPosition);\n      spawnedEntity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: {\n          x: spawnedEntity.object3D.position.x,\n          y: spawnedEntity.object3D.position.y,\n          z: spawnedEntity.object3D.position.z\n        },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      if (left) {\n        interaction.state.leftRemote.spawning = false;\n      } else {\n        interaction.state.rightRemote.spawning = false;\n      }\n    }\n\n    this.physicsSystem.resetDynamicBody(spawnedEntity.components[\"body-helper\"].uuid);\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        this.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        setTimeout(() => {\n          this.cooldownTimeout = null;\n        }, 400);\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) => new HubsTextureLoader().load(url, resolve, undefined, reject));\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.CAMERA_LAYER_REFLECTION);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","import { SimplexNoise } from \"three/examples/jsm/math/SimplexNoise\";\nimport waterNormalsUrl from \"../assets/waternormals.jpg\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\n\nconst { Mesh, PlaneBufferGeometry, MeshStandardMaterial, MeshPhongMaterial, Vector2, RepeatWrapping } = THREE;\n\n/**\n * SimpleWater\n * Keep in sync with Spoke's SimpleWater class\n */\n\n/**\n * Adapted dynamic geometry code from: https://github.com/ditzel/UnityOceanWavesAndShip\n */\n\nclass Octave {\n  constructor(speed = new Vector2(1, 1), scale = new Vector2(1, 1), height = 0.0025, alternate = true) {\n    this.speed = speed;\n    this.scale = scale;\n    this.height = height;\n    this.alternate = alternate;\n  }\n}\nexport default class SimpleWater extends Mesh {\n  constructor(normalMap, resolution = 24, lowQuality = false) {\n    const geometry = new PlaneBufferGeometry(10, 10, resolution, resolution);\n    geometry.rotateX(-Math.PI / 2);\n\n    const waterUniforms = {\n      ripplesSpeed: { value: 0.25 },\n      ripplesScale: { value: 1 },\n      time: { value: 0 }\n    };\n\n    const materialClass = lowQuality ? MeshPhongMaterial : MeshStandardMaterial;\n\n    normalMap.wrapS = normalMap.wrapT = RepeatWrapping;\n\n    const material = new materialClass({ color: 0x0054df, normalMap, roughness: 0.5, metalness: 0.5 });\n    material.name = \"SimpleWaterMaterial\";\n\n    material.onBeforeCompile = shader => {\n      Object.assign(shader.uniforms, waterUniforms);\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_pars_vertex>\",\n        `\n        #include <fog_pars_vertex>\n        varying vec3 vWPosition;\n      `\n      );\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_vertex>\",\n        `\n        #include <fog_vertex>\n        vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;\n      `\n      );\n\n      // getNoise function from https://github.com/mrdoob/three.js/blob/dev/examples/jsm/objects/Water.js\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normalmap_pars_fragment>\",\n        `\n        #include <normalmap_pars_fragment>\n\n        uniform float time;\n        uniform float ripplesSpeed;\n        uniform float ripplesScale;\n      \n        varying vec3 vWPosition;\n      \n        vec4 getNoise(vec2 uv){\n          float timeOffset = time * ripplesSpeed;\n          uv = (uv - 0.5) * (1.0 / ripplesScale);\n          vec2 uv0 = (uv/103.0)+vec2(timeOffset/17.0, timeOffset/29.0);\n          vec2 uv1 = uv/107.0-vec2(timeOffset/-19.0, timeOffset/31.0);\n          vec2 uv2 = uv/vec2(897.0, 983.0)+vec2(timeOffset/101.0, timeOffset/97.0);\n          vec2 uv3 = uv/vec2(991.0, 877.0)-vec2(timeOffset/109.0, timeOffset/-113.0);\n          vec4 noise = (texture2D(normalMap, uv0)) +\n                       (texture2D(normalMap, uv1)) +\n                       (texture2D(normalMap, uv2)) +\n                       (texture2D(normalMap, uv3));\n          return noise / 4.0;\n        }\n      `\n      );\n\n      // https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js#L20\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normal_fragment_maps>\",\n        `\n          // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n          vec3 eye_pos = -vViewPosition;\n          vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n          vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n          vec2 st0 = dFdx( vUv.st );\n          vec2 st1 = dFdy( vUv.st );\n\n          float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n          vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n          vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n          vec3 N = normalize( normal );\n          mat3 tsn = mat3( S, T, N );\n\n          vec3 mapN = getNoise(vWPosition.xz).xyz * 2.0 - 1.0;\n\n          mapN.xy *= normalScale;\n          mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n          normal = normalize( tsn * mapN );\n        `\n      );\n    };\n\n    super(geometry, material);\n\n    this.lowQuality = lowQuality;\n    this.waterUniforms = waterUniforms;\n\n    if (lowQuality) {\n      this.material.specular.set(0xffffff);\n    } else {\n      this.receiveShadow = true;\n    }\n\n    this.geometry.attributes.position.dynamic = true;\n\n    this.resolution = resolution;\n    this.octaves = [\n      new Octave(new Vector2(0.5, 0.5), new Vector2(1, 1), 0.01, true),\n      new Octave(new Vector2(0.05, 6), new Vector2(1, 20), 0.1, false)\n    ];\n\n    this.simplex = new SimplexNoise();\n  }\n\n  get opacity() {\n    return this.material.opacity;\n  }\n\n  set opacity(value) {\n    this.material.opacity = value;\n\n    if (value !== 1) {\n      this.material.transparent = true;\n    }\n  }\n\n  get color() {\n    return this.material.color;\n  }\n\n  get tideHeight() {\n    return this.octaves[0].height;\n  }\n\n  get tideScale() {\n    return this.octaves[0].scale;\n  }\n\n  get tideSpeed() {\n    return this.octaves[0].speed;\n  }\n\n  set tideHeight(value) {\n    this.octaves[0].height = value;\n  }\n\n  get waveHeight() {\n    return this.octaves[1].height;\n  }\n\n  set waveHeight(value) {\n    this.octaves[1].height = value;\n  }\n\n  get waveScale() {\n    return this.octaves[1].scale;\n  }\n\n  get waveSpeed() {\n    return this.octaves[1].speed;\n  }\n\n  set ripplesSpeed(value) {\n    this.waterUniforms.ripplesSpeed.value = value;\n  }\n\n  get ripplesSpeed() {\n    return this.waterUniforms.ripplesSpeed.value;\n  }\n\n  set ripplesScale(value) {\n    this.waterUniforms.ripplesScale.value = value;\n  }\n\n  get ripplesScale() {\n    return this.waterUniforms.ripplesScale.value;\n  }\n\n  update(time) {\n    const positionAttribute = this.geometry.attributes.position;\n\n    for (let x = 0; x <= this.resolution; x++) {\n      for (let z = 0; z <= this.resolution; z++) {\n        let y = 0;\n\n        for (let o = 0; o < this.octaves.length; o++) {\n          const octave = this.octaves[o];\n\n          if (octave.alternate) {\n            const noise = this.simplex.noise(\n              (x * octave.scale.x) / this.resolution,\n              (z * octave.scale.y) / this.resolution\n            );\n            y += Math.cos(noise + octave.speed.length() * time) * octave.height;\n          } else {\n            const noise =\n              this.simplex.noise(\n                (x * octave.scale.x + time * octave.speed.x) / this.resolution,\n                (z * octave.scale.y + time * octave.speed.y) / this.resolution\n              ) - 0.5;\n            y += noise * octave.height;\n          }\n        }\n\n        positionAttribute.setY(x * (this.resolution + 1) + z, y);\n      }\n    }\n\n    this.geometry.computeVertexNormals();\n    positionAttribute.needsUpdate = true;\n    this.waterUniforms.time.value = time;\n  }\n\n  clone(recursive) {\n    return new SimpleWater(this.material.normalMap, this.resolution, this.lowQuality).copy(this, recursive);\n  }\n\n  copy(source, recursive = true) {\n    super.copy(source, recursive);\n\n    this.opacity = source.opacity;\n    this.color.copy(source.color);\n    this.tideHeight = source.tideHeight;\n    this.tideScale.copy(source.tideScale);\n    this.tideSpeed.copy(source.tideSpeed);\n    this.waveHeight = source.waveHeight;\n    this.waveScale.copy(source.waveScale);\n    this.waveSpeed.copy(source.waveSpeed);\n    this.ripplesSpeed = source.ripplesSpeed;\n    this.ripplesScale = source.ripplesScale;\n\n    return this;\n  }\n}\n\nfunction vec2Equals(a, b) {\n  return a && b && a.x === b.x && a.y === b.y;\n}\n\nlet waterNormalMap = null;\n\nAFRAME.registerComponent(\"simple-water\", {\n  schema: {\n    opacity: { type: \"number\", default: 1 },\n    color: { type: \"color\" },\n    tideHeight: { type: \"number\", default: 0.01 },\n    tideScale: { type: \"vec2\", default: { x: 1, y: 1 } },\n    tideSpeed: { type: \"vec2\", default: { x: 0.5, y: 0.5 } },\n    waveHeight: { type: \"number\", default: 0.1 },\n    waveScale: { type: \"vec2\", default: { x: 1, y: 20 } },\n    waveSpeed: { type: \"vec2\", default: { x: 0.05, y: 6 } },\n    ripplesScale: { type: \"number\", default: 1 },\n    ripplesSpeed: { type: \"number\", default: 0.25 }\n  },\n\n  init() {\n    if (!waterNormalMap) {\n      waterNormalMap = new HubsTextureLoader().load(waterNormalsUrl);\n    }\n\n    const usePhongShader = window.APP.store.state.preferences.materialQualitySetting !== \"high\";\n    this.water = new SimpleWater(waterNormalMap, undefined, usePhongShader);\n    this.el.setObject3D(\"mesh\", this.water);\n  },\n\n  update(oldData) {\n    if (this.data.opacity !== oldData.opacity) {\n      this.water.opacity = this.data.opacity;\n    }\n\n    if (this.data.color !== oldData.color) {\n      this.water.color.set(this.data.color);\n    }\n\n    if (this.data.tideHeight !== oldData.tideHeight) {\n      this.water.tideHeight = this.data.tideHeight;\n    }\n\n    if (!vec2Equals(this.data.tideScale, oldData.tideScale)) {\n      this.water.tideScale.copy(this.data.tideScale);\n    }\n\n    if (!vec2Equals(this.data.tideSpeed, oldData.tideSpeed)) {\n      this.water.tideSpeed.copy(this.data.tideSpeed);\n    }\n\n    if (this.data.waveHeight !== oldData.waveHeight) {\n      this.water.waveHeight = this.data.waveHeight;\n    }\n\n    if (!vec2Equals(this.data.waveScale, oldData.waveScale)) {\n      this.water.waveScale.copy(this.data.waveScale);\n    }\n\n    if (!vec2Equals(this.data.waveSpeed, oldData.waveSpeed)) {\n      this.water.waveSpeed.copy(this.data.waveSpeed);\n    }\n\n    if (this.data.ripplesScale !== oldData.ripplesScale) {\n      this.water.ripplesScale = this.data.ripplesScale;\n    }\n\n    if (this.data.ripplesSpeed !== oldData.ripplesSpeed) {\n      this.water.ripplesSpeed = this.data.ripplesSpeed;\n    }\n  },\n\n  tick(time) {\n    this.water.update(time / 1000);\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { ParticleEmitter } from \"lib-hubs/packages/three-particle-emitter/lib/esm/index\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { resolveUrl } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport defaultSrcImage from \"../assets/images/warning_icon.png\";\n\nconst defaultSrcUrl = new URL(defaultSrcImage, window.location.href).href;\n\nAFRAME.registerComponent(\"particle-emitter\", {\n  schema: {\n    resolve: { type: \"boolean\", default: true },\n    src: { type: \"string\", default: defaultSrcUrl },\n    startColor: { type: \"color\" },\n    middleColor: { type: \"color\" },\n    endColor: { type: \"color\" },\n    startOpacity: { type: \"number\", default: 1 },\n    middleOpacity: { type: \"number\", default: 1 },\n    endOpacity: { type: \"number\", default: 1 },\n    colorCurve: { type: \"string\", default: \"linear\" },\n    sizeCurve: { type: \"string\", default: \"linear\" },\n    startSize: { type: \"number\", default: 1 },\n    endSize: { type: \"number\", default: 1 },\n    sizeRandomness: { type: \"number\" },\n    ageRandomness: { type: \"number\" },\n    lifetime: { type: \"number\", default: 1 },\n    lifetimeRandomness: { type: \"number\" },\n    particleCount: { type: \"number\", default: 10 },\n    startVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    endVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    velocityCurve: { type: \"string\", default: \"linear\" },\n    angularVelocity: { type: \"number\" }\n  },\n\n  init() {\n    this.particleEmitter = new ParticleEmitter(null);\n    this.particleEmitter.visible = false;\n    this.el.setObject3D(\"particle-emitter\", this.particleEmitter);\n    this.updateParticles = false;\n    if (this.data.src === defaultSrcUrl) {\n      this.data.resolve = false;\n    }\n  },\n\n  async setTexture(src, resolve) {\n    let accessibleUrl = src;\n\n    if (resolve) {\n      const result = await resolveUrl(src);\n      let canonicalUrl = result.origin;\n\n      // handle protocol relative urls\n      if (canonicalUrl.startsWith(\"//\")) {\n        canonicalUrl = location.protocol + canonicalUrl;\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n    }\n\n    const texture = await textureLoader.loadAsync(accessibleUrl);\n\n    // Guard against src changing while request was in flight\n    if (this.data.src !== src) {\n      return;\n    }\n\n    this.particleEmitter.material.uniforms.map.value = texture;\n    this.particleEmitter.visible = true;\n    this.updateParticles = true;\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const particleEmitter = this.particleEmitter;\n\n    if (prevData.src !== data.src) {\n      this.setTexture(data.src, data.resolve).catch(console.error);\n    }\n\n    if (\n      prevData.startColor !== data.startColor ||\n      prevData.startSize !== data.startSize ||\n      prevData.sizeRandomness !== data.sizeRandomness ||\n      prevData.ageRandomness !== data.ageRandomness ||\n      prevData.lifetime !== data.lifetime ||\n      prevData.lifetimeRandomness !== data.lifetimeRandomness ||\n      prevData.particleCount !== data.particleCount\n    ) {\n      this.updateParticles = true;\n    }\n\n    particleEmitter.startColor.set(data.startColor);\n    particleEmitter.middleColor.set(data.middleColor);\n    particleEmitter.endColor.set(data.endColor);\n    particleEmitter.startOpacity = data.startOpacity;\n    particleEmitter.middleOpacity = data.middleOpacity;\n    particleEmitter.endOpacity = data.endOpacity;\n    particleEmitter.colorCurve = data.colorCurve;\n    particleEmitter.sizeCurve = data.sizeCurve;\n    particleEmitter.startSize = data.startSize;\n    particleEmitter.endSize = data.endSize;\n    particleEmitter.sizeRandomness = data.sizeRandomness;\n    particleEmitter.ageRandomness = data.ageRandomness;\n    particleEmitter.lifetime = data.lifetime;\n    particleEmitter.lifetimeRandomness = data.lifetimeRandomness;\n    particleEmitter.particleCount = data.particleCount;\n    particleEmitter.startVelocity.copy(data.startVelocity);\n    particleEmitter.endVelocity.copy(data.endVelocity);\n    particleEmitter.velocityCurve = data.velocityCurve;\n    particleEmitter.angularVelocity = data.angularVelocity;\n  },\n\n  tick(time, dt) {\n    if (this.updateParticles) {\n      this.particleEmitter.updateParticles();\n      this.updateParticles = false;\n    }\n\n    if (this.particleEmitter.visible) {\n      this.particleEmitter.update(dt / 1000);\n    }\n  }\n});\n","import { THREE } from \"aframe\";\nimport { updateAudioSettings } from \"../update-audio-settings\";\n\nAFRAME.registerComponent(\"audio-zone-source\", {\n  init() {\n    this.originalAudioParamsData = null;\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.registerSource(this);\n  },\n\n  remove() {\n    APP.zoneOverrides.delete(this.el);\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.unregisterSource(this);\n  },\n\n  getPosition: (() => {\n    const sourcePos = new THREE.Vector3();\n    return function() {\n      const audio = APP.audios.get(this.el);\n      if (audio) {\n        audio.getWorldPosition(sourcePos);\n      } else {\n        sourcePos.set(0, 0, 0);\n      }\n      return sourcePos;\n    };\n  })(),\n\n  apply(params) {\n    APP.zoneOverrides.set(this.el, params);\n    const audio = APP.audios.get(this.el);\n    if (audio) {\n      updateAudioSettings(this.el, audio);\n    }\n  },\n\n  restore() {\n    APP.zoneOverrides.delete(this.el);\n    const audio = APP.audios.get(this.el);\n    if (audio) {\n      updateAudioSettings(this.el, audio);\n    }\n  }\n});\n","// This is based largely on: @lojjic https://github.com/lojjic/aframe-troika-text/blob/master/src/aframe-troika-text-component.js\n// but has been made functional and restyled for Mozilla Hubs (hubs.mozilla.com)\n// by @jamesckane at Paradowski Creative (paradowski.com)\n\nimport { Text } from \"troika-three-text\";\n\n// Mark this type of object so we can filter in from our shader patching\nText.prototype.isTroikaText = true;\n\nconst THREE_SIDES = {\n  front: THREE.FrontSide,\n  back: THREE.BackSide,\n  double: THREE.DoubleSide\n};\n\nfunction numberOrPercent(defaultValue) {\n  return {\n    default: defaultValue,\n    parse: function(value) {\n      if (typeof value === \"string\" && value.indexOf(\"%\") > 0) {\n        return value;\n      }\n      value = +value;\n      return isNaN(value) ? 0 : value;\n    },\n    stringify: function(value) {\n      return \"\" + value;\n    }\n  };\n}\n\nAFRAME.registerComponent(\"text\", {\n  schema: {\n    textAlign: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\", \"justify\"] },\n    anchorX: { default: \"center\", oneOf: [\"left\", \"right\", \"center\"] },\n    anchorY: { default: \"middle\", oneOf: [\"top\", \"top-baseline\", \"middle\", \"bottom-baseline\", \"bottom\"] },\n    clipRect: {\n      type: \"string\",\n      default: \"\",\n      parse: function(value) {\n        if (value) {\n          value = value.split(/[\\s,]+/).reduce(function(out, val) {\n            val = +val;\n            if (!isNaN(val)) {\n              out.push(val);\n            }\n            return out;\n          }, []);\n        }\n        return value && value.length === 4 ? value : null;\n      },\n      stringify: function(value) {\n        return value ? value.join(\" \") : \"\";\n      }\n    },\n    color: { type: \"color\", default: \"#FFF\" },\n    curveRadius: { type: \"number\", default: 0 },\n    depthOffset: { type: \"number\", default: 0 },\n    direction: { type: \"string\", default: \"auto\", oneOf: [\"auto\", \"ltr\", \"rtl\"] },\n    fillOpacity: { type: \"number\", default: 1 },\n    // This is different from the Troika preoperty name, Using \"fontUrl\" to prevent conflict with previous \"font\" property and to allow us to make named fonts later\n    fontUrl: { type: \"string\" },\n    // This default value differs from the Troika default of 0.1, it most closely matches the size of our previous text component.\n    fontSize: { type: \"number\", default: 0.075 },\n    letterSpacing: { type: \"number\", default: 0 },\n    lineHeight: { type: \"number\" },\n    maxWidth: { type: \"number\", default: Infinity },\n    outlineBlur: numberOrPercent(0),\n    outlineColor: { type: \"color\", default: \"#000\" },\n    outlineOffsetX: numberOrPercent(0),\n    outlineOffsetY: numberOrPercent(0),\n    outlineOpacity: { type: \"number\", default: 1 },\n    outlineWidth: numberOrPercent(0),\n    overflowWrap: { type: \"string\", default: \"normal\", oneOf: [\"normal\", \"break-word\"] },\n    strokeColor: { type: \"color\", default: \"grey\" },\n    strokeOpacity: { type: \"number\", default: 1 },\n    strokeWidth: numberOrPercent(0),\n    // Note this is different than the Troika property name, Using \"value\" instead of \"text\" here to prevent code changes.\n    value: { type: \"string\", default: \"\" },\n    textIndent: { type: \"number\", default: 0 },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"nowrap\"] },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] }\n  },\n\n  /**\n   * Called once when component is attached for initial setup.\n   */\n  init: function() {\n    this.troikaTextMesh = new Text();\n    this.troikaTextMesh.material.toneMapped = false;\n    this.el.setObject3D(\"text\", this.troikaTextMesh);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function() {\n    const data = this.data;\n    const mesh = this.troikaTextMesh;\n\n    // Update the text mesh\n    mesh.text = data.value || \"\";\n    mesh.textAlign = data.textAlign;\n    mesh.anchorX = data.anchorX;\n    mesh.anchorY = data.anchorY;\n    mesh.color = data.color;\n    mesh.material.side = THREE_SIDES[data.side];\n    mesh.material.opacity = data.opacity;\n    mesh.curveRadius = data.curveRadius;\n    mesh.depthOffset = data.depthOffset || 0;\n    mesh.direction = data.direction;\n    mesh.fillOpacity = data.fillOpacity;\n    mesh.font = data.fontUrl;\n    mesh.fontSize = data.fontSize;\n    mesh.letterSpacing = data.letterSpacing || 0;\n    mesh.clipRect = data.clipRect;\n    mesh.lineHeight = data.lineHeight || \"normal\";\n    mesh.outlineBlur = data.outlineBlur;\n    mesh.outlineColor = data.outlineColor;\n    mesh.outlineOffsetX = data.outlineOffsetX;\n    mesh.outlineOffsetY = data.outlineOffsetY;\n    mesh.outlineOpacity = data.outlineOpacity;\n    mesh.outlineWidth = data.outlineWidth;\n    mesh.overflowWrap = data.overflowWrap;\n    mesh.strokeColor = data.strokeColor;\n    mesh.strokeOpacity = data.strokeOpacity;\n    mesh.strokeWidth = data.strokeWidth;\n    mesh.textIndent = data.textIndent;\n    mesh.whiteSpace = data.whiteSpace;\n    mesh.maxWidth = data.maxWidth;\n    mesh.sync(() => {\n      this.el.emit(\"text-updated\", this);\n    });\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function() {\n    // Free memory\n    this.troikaTextMesh.dispose();\n  },\n\n  getSize: (function() {\n    const size = new THREE.Vector3();\n    return function(outSize) {\n      this.troikaTextMesh.geometry.boundingBox.getSize(size);\n      outSize.set(\n        size.x * this.troikaTextMesh.scale.x,\n        size.y * this.troikaTextMesh.scale.y,\n        size.z * this.troikaTextMesh.scale.z\n      );\n    };\n  })()\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import { sanitizeUrl } from \"@braintree/sanitize-url\";\nimport \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { TYPE, SHAPE, FIT } from \"three-ammo/constants\";\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\nimport { AudioType, DistanceModelType, SourceType } from \"./components/audio-params\";\nimport { updateAudioSettings } from \"./update-audio-settings\";\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\", el => {\n  el.setAttribute(\"duck\", \"\");\n  el.setAttribute(\"quack\", { quackPercentage: 0.1 });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"body-helper\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"shape-helper\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"billboard\", \"billboard\");\nAFRAME.GLTFModelPlus.registerComponent(\"simple-water\", \"simple-water\");\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"morph-audio-feedback\", \"morph-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\"uv-scroll\", \"uv-scroll\");\nAFRAME.GLTFModelPlus.registerComponent(\"frustrum\", \"frustrum\");\nAFRAME.GLTFModelPlus.registerComponent(\"mirror\", \"mirror\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"shape-helper\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation: { x: orientation.x, y: orientation.y, z: orientation.z, w: orientation.w }\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\", el => {\n  el.setAttribute(\"waypoint\", {\n    canBeSpawnPoint: true,\n    canBeOccupied: false,\n    canBeClicked: false,\n    willDisableMotion: false,\n    willDisableTeleporting: false,\n    willMaintainWorldUp: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"waypoint\", \"waypoint\", (el, componentName, componentData, components) => {\n  if (componentData.canBeOccupied) {\n    el.setAttribute(\"networked\", {\n      template: \"#template-waypoint-avatar\",\n      attachTemplateToLocal: false,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n  el.setAttribute(\"waypoint\", componentData);\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"media-frame\", \"media-frame\", (el, componentName, componentData, components) => {\n  el.setAttribute(\"networked\", {\n    template: \"#interactable-media-frame\",\n    owner: \"scene\",\n    persistent: true,\n    networkId: components.networked.id\n  });\n  el.setAttribute(\"shape-helper\", {\n    type: \"box\",\n    fit: \"manual\",\n    halfExtents: {\n      x: componentData.bounds.x / 2,\n      y: componentData.bounds.y / 2,\n      z: componentData.bounds.z / 2\n    }\n  });\n  el.setAttribute(\"media-frame\", componentData);\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  const mediaLoaderAttributes = {\n    src: sanitizeUrl(componentData.src),\n    fitToBox: componentData.contentSubtype ? false : true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  };\n\n  if (componentData.version) {\n    mediaLoaderAttributes.version = componentData.version;\n  }\n\n  el.setAttribute(\"media-loader\", mediaLoaderAttributes);\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pdf\", { index: componentData.pageIndex });\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nasync function mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (componentName === \"link\" && (components.video || components.image)) {\n    // video/image component will set link url specified in link component.\n    return;\n  }\n\n  if (components.networked) {\n    isControlled = componentData.controls || componentName === \"link\";\n\n    const hasVolume = componentName === \"video\" || componentName === \"audio\";\n    const templateName =\n      componentName === \"model\" || isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n    mediaOptions.alphaMode = componentData.alphaMode;\n    mediaOptions.alphaCutoff = componentData.alphaCutoff;\n  }\n\n  if (componentName === \"video\" || componentName === \"audio\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType) {\n      // This is an old version of this component, which had built-in audio parameters.\n      // The way we are handling it is wrong. If a user created a scene with this old version\n      // of the component, all of these parameters will be present whether the user explicitly set\n      // the values for them or not. But really, they should only count as \"overrides\" if the user\n      // meant for them to take precendence over the app and scene defaults.\n      // TODO: Fix this issue. One option is to just ignore this component data, which might break old scenes\n      //       but simplifying the handling. Another option is to compare the component data here with\n      //       the \"defaults\" and only save the values that are different from the defaults. However,\n      //       this loses information if the user changed the scene settings but wanted this specific\n      //       node to use the \"defaults\".\n      //       I don't see a perfect solution here and would prefer not to handle the \"legacy\" components.\n      //\n      // For legacy components we don't want artificial distance based attenuation to be applied to stereo audios\n      // so we set the distanceModel and rolloffFactor so the attenuation is always 1. The artificial distance based\n      // attenuation is calculated in the gain system for stereo audios.\n      APP.audioOverrides.set(el, {\n        audioType: componentData.audioType,\n        distanceModel:\n          componentData.audioType === AudioType.Stereo ? DistanceModelType.Linear : componentData.distanceModel,\n        rolloffFactor: componentData.audioType === AudioType.Stereo ? 0 : componentData.rolloffFactor,\n        refDistance: componentData.refDistance,\n        maxDistance: componentData.maxDistance,\n        coneInnerAngle: componentData.coneInnerAngle,\n        coneOuterAngle: componentData.coneOuterAngle,\n        coneOuterGain: componentData.coneOuterGain,\n        gain: componentData.volume\n      });\n      APP.sourceType.set(el, SourceType.MEDIA_VIDEO);\n\n      const audio = APP.audios.get(el);\n      if (audio) {\n        updateAudioSettings(el, audio);\n      }\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  if ((componentName === \"video\" || componentName === \"image\") && components.link) {\n    mediaOptions.href = sanitizeUrl(components.link.href);\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src: sanitizeUrl(src),\n    fitToBox: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions,\n    moveTheParentNotTheMesh: true\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"model\", \"model\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"audio\", \"audio\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: sanitizeUrl(componentData.src),\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    moveTheParentNotTheMesh: true\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: sanitizeUrl(componentData.src),\n    resolve: true,\n    template: \"#interactable-media\",\n    mediaOptions: componentData.mediaOptions || {}\n  });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      // indexToEntityMap should be considered depredcated. These references are now resovled by the GLTFHubsComponentExtension\n      if (typeof target === \"number\") {\n        targetEntity = indexToEntityMap[target];\n      } else {\n        targetEntity = target?.el;\n      }\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#avatar-pov-node\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"shape-helper__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"shape-helper__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"particle-emitter\", \"particle-emitter\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"networked-drawing-buffer\", \"networked-drawing-buffer\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-settings\", \"audio-settings\", (el, _componentName, componentData) => {\n  const removeUndefined = obj => {\n    return Object.entries(obj).reduce((result, [key, value]) => {\n      if (value !== undefined) {\n        result[key] = value;\n      }\n      return result;\n    }, {});\n  };\n  // TODO: This component should only overwrite the scene audio defaults if this\n  //       component is on the scene node. If this component is on some other node\n  //       we don't care about it and should ignore it.\n  APP.sceneAudioDefaults.set(\n    SourceType.MEDIA_VIDEO,\n    removeUndefined({\n      distanceModel: componentData.mediaDistanceModel,\n      rolloffFactor: componentData.mediaRolloffFactor,\n      refDistance: componentData.mediaRefDistance,\n      maxDistance: componentData.mediaMaxDistance,\n      coneInnerAngle: componentData.mediaConeInnerAngle,\n      coneOuterAngle: componentData.mediaConeOuterAngle,\n      coneOuterGain: componentData.mediaConeOuterGain,\n      gain: componentData.mediaVolume\n    })\n  );\n  APP.sceneAudioDefaults.set(\n    SourceType.AVATAR_AUDIO_SOURCE,\n    removeUndefined({\n      distanceModel: componentData.avatarDistanceModel,\n      rolloffFactor: componentData.avatarRolloffFactor,\n      refDistance: componentData.avatarRefDistance,\n      maxDistance: componentData.avatarMaxDistance,\n      coneInnerAngle: componentData.avatarConeInnerAngle,\n      coneOuterAngle: componentData.avatarConeOuterAngle,\n      coneOuterGain: componentData.avatarConeOuterGain,\n      gain: componentData.avatarVolume\n    })\n  );\n  for (const [el, audio] of APP.audios.entries()) {\n    updateAudioSettings(el, audio);\n  }\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"video-texture-target\",\n  \"video-texture-target\",\n  (el, componentName, componentData, _components, indexToEntityMap) => {\n    const { targetBaseColorMap, targetEmissiveMap, srcNode } = componentData;\n\n    let srcEl;\n    if (srcNode !== undefined) {\n      // indexToEntityMap should be considered depredcated. These references are now resovled by the GLTFHubsComponentExtension\n      if (typeof srcNode === \"number\") {\n        srcEl = indexToEntityMap[srcNode];\n      } else {\n        srcEl = srcNode?.el;\n      }\n      if (!srcEl) {\n        console.warn(\n          `Error inflating gltf component \"video-texture-srcEl\": Couldn't find srcEl entity with index ${srcNode}`\n        );\n      }\n    }\n\n    el.setAttribute(componentName, {\n      src: srcEl ? \"el\" : \"\",\n      targetBaseColorMap,\n      targetEmissiveMap,\n      srcEl\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"video-texture-source\", \"video-texture-source\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"text\", \"text\");\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"audio-target\",\n  \"audio-target\",\n  (el, componentName, componentData, _components, indexToEntityMap) => {\n    const { srcNode } = componentData;\n\n    let srcEl;\n    if (srcNode !== undefined) {\n      // indexToEntityMap should be considered depredcated. These references are now resovled by the GLTFHubsComponentExtension\n      if (typeof srcNode === \"number\") {\n        srcEl = indexToEntityMap[srcNode];\n      } else {\n        srcEl = srcNode?.el;\n      }\n      if (!srcEl) {\n        console.warn(\n          `Error inflating gltf component ${componentName}: Couldn't find srcEl entity with index ${srcNode}`\n        );\n      }\n    }\n\n    if (componentData.positional !== undefined) {\n      // This is an old version of the audio-target component, which had built-in audio parameters.\n      // The way we are handling it is wrong. If a user created a scene in spoke with this old version\n      // of this component, all of these parameters will be present whether the user explicitly set\n      // the values for them or not. But really, they should only count as \"overrides\" if the user\n      // meant for them to take precendence over the app and scene defaults.\n      // TODO: Fix this issue. One option is to just ignore this component data, which might break old scenes\n      //       but simplifying the handling. Another option is to compare the component data here with\n      //       the \"defaults\" and only save the values that are different from the defaults. However,\n      //       this loses information if the user changed the scene settings but wanted this specific\n      //       node to use the \"defaults\".\n      //       I don't see a perfect solution here and would prefer not to handle the \"legacy\" components.\n      APP.audioOverrides.set(el, {\n        audioType: componentData.positional ? AudioType.PannerNode : AudioType.Stereo,\n        distanceModel: componentData.distanceModel,\n        rolloffFactor: componentData.rolloffFactor,\n        refDistance: componentData.refDistance,\n        maxDistance: componentData.maxDistance,\n        coneInnerAngle: componentData.coneInnerAngle,\n        coneOuterAngle: componentData.coneOuterAngle,\n        coneOuterGain: componentData.coneOuterGain,\n        gain: componentData.gain\n      });\n      APP.sourceType.set(el, SourceType.AUDIO_TARGET);\n\n      const audio = APP.audios.get(el);\n      if (audio) {\n        updateAudioSettings(el, audio);\n      }\n    }\n\n    el.setAttribute(componentName, {\n      minDelay: componentData.minDelay,\n      maxDelay: componentData.maxDelay,\n      debug: componentData.debug,\n      srcEl\n    });\n  }\n);\nAFRAME.GLTFModelPlus.registerComponent(\"zone-audio-source\", \"zone-audio-source\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-params\", \"audio-params\", (el, componentName, componentData) => {\n  APP.audioOverrides.set(el, componentData);\n  const audio = APP.audios.get(el);\n  if (audio) {\n    updateAudioSettings(el, audio);\n  }\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-zone\", \"audio-zone\", (el, componentName, componentData) => {\n  el.setAttribute(componentName, { ...componentData });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"background\", \"background\", (el, _componentName, componentData) => {\n  console.warn(\n    \"The `background` component is deprecated, use `backgroundColor` on the `environment-settings` component instead.\"\n  );\n  // This assumes the background component is on the root entity, which it is for spoke, the only thing using this component\n  el.setAttribute(\"environment-settings\", { backgroundColor: new THREE.Color(componentData.color) });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"fog\", \"fog\", (el, _componentName, componentData) => {\n  // TODO need to actually implement this in blender exporter before showing this warning\n  // console.warn(\n  //   \"The `fog` component is deprecated, use the fog properties on the `environment-settings` component instead.\"\n  // );\n  // This assumes the fog component is on the root entitycoco\n  el.setAttribute(\"environment-settings\", {\n    fogType: componentData.type,\n    fogColor: new THREE.Color(componentData.color),\n    fogNear: componentData.near,\n    fogFar: componentData.far,\n    fogDensity: componentData.density\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"environment-settings\",\n  \"environment-settings\",\n  (el, componentName, componentData) => {\n    // TODO a bit silly to be storing this as an aframe component. Use a glboal store of some sort\n    el.setAttribute(componentName, {\n      ...componentData,\n      backgroundColor: new THREE.Color(componentData.backgroundColor)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"reflection-probe\", \"reflection-probe\", (el, componentName, componentData) => {\n  // TODO PMREMGenerator should be fixed to not assume this\n  componentData.envMapTexture.flipY = true;\n  // Assume texture is always an equirect for now\n  componentData.envMapTexture.mapping = THREE.EquirectangularReflectionMapping;\n\n  el.setAttribute(componentName, componentData);\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"AvatarSettingsContent__content___aUEb\",\"avatar-preview-container\":\"AvatarSettingsContent__avatar-preview-container__3jB58\",\"avatarPreviewContainer\":\"AvatarSettingsContent__avatar-preview-container__3jB58\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rtc-tile-text\":\"Prop__rtc-tile-text__3RB-P\",\"rtcTileText\":\"Prop__rtc-tile-text__3RB-P\",\"rtc-value-text\":\"Prop__rtc-value-text__mPfQH\",\"rtcValueText\":\"Prop__rtc-value-text__mPfQH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"data-tile\":\"DataPanel__data-tile__2r7CT\",\"dataTile\":\"DataPanel__data-tile__2r7CT\",\"data-tile-title\":\"DataPanel__data-tile-title__27XlV\",\"dataTileTitle\":\"DataPanel__data-tile-title__27XlV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"object\":\"ObjectsSidebar__object__3Cefq\",\"no-objects\":\"ObjectsSidebar__no-objects__3zFp8\",\"noObjects\":\"ObjectsSidebar__no-objects__3zFp8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button-grid-popover\":\"ButtonGridPopover__button-grid-popover__31fTd\",\"buttonGridPopover\":\"ButtonGridPopover__button-grid-popover__31fTd\",\"fullscreen\":\"ButtonGridPopover__fullscreen__2JcTB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image-grid-popover\":\"ImageGridPopover__image-grid-popover__29N5T\",\"imageGridPopover\":\"ImageGridPopover__image-grid-popover__29N5T\",\"fullscreen\":\"ImageGridPopover__fullscreen__3w2sX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reaction-button\":\"ReactionButton__reaction-button__13xbX\",\"reactionButton\":\"ReactionButton__reaction-button__13xbX\",\"active\":\"ReactionButton__active__3Eurw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"ReactionPopover__label__3XckL\",\"popover\":\"ReactionPopover__popover__1GmS2\"};","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider } from \"react-intl\";\nimport \"@formatjs/intl-locale/polyfill\";\nimport \"@formatjs/intl-pluralrules/polyfill\";\nimport \"@formatjs/intl-pluralrules/locale-data/en\";\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\nimport \"@formatjs/intl-relativetimeformat/locale-data/en\";\nimport { getLocale, getMessages } from \"../utils/i18n\";\n\nexport class WrappedIntlProvider extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired\n  };\n\n  state = {\n    locale: getLocale(),\n    messages: getMessages()\n  };\n\n  updateLocale = () => {\n    this.setState({ locale: getLocale(), messages: getMessages() });\n  };\n\n  componentDidMount() {\n    this.updateLocale();\n    window.addEventListener(\"locale-updated\", this.updateLocale);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"locale-updated\", this.updateLocale);\n  }\n\n  render() {\n    return (\n      <IntlProvider locale={this.state.locale} messages={this.state.messages}>\n        {this.props.children}\n      </IntlProvider>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/app-logo-6c8cfcf9c903ba04105ca0bc29514de7.png\";","module.exports = __webpack_public_path__ + \"assets/images/app-logo-dark-3ce7d2da524556485823d5ac27c3a7fc.png\";","module.exports = __webpack_public_path__ + \"assets/images/company-logo-8f6f7c3b303004256295b45c2eee5117.png\";","module.exports = __webpack_public_path__ + \"assets/images/home-hero-background-unbranded-af23743b76d26ec9d5c160558a2e18ef.png\";","module.exports = __webpack_public_path__ + \"assets/images/editor-logo-6f885a1543496ebc23a21b7fea82b255.png\";","export const MediaDevicesEvents = Object.freeze({\n  PERMISSIONS_STATUS_CHANGED: \"permissions_status_changed\",\n  MIC_SHARE_STARTED: \"mic_share_started\",\n  MIC_SHARE_ENDED: \"mic_share_ended\",\n  VIDEO_SHARE_STARTED: \"video_share_started\",\n  VIDEO_SHARE_ENDED: \"video_share_ended\",\n  DEVICE_CHANGE: \"devicechange\"\n});\n\nexport const PermissionStatus = Object.freeze({\n  GRANTED: \"granted\",\n  DENIED: \"denied\",\n  PROMPT: \"prompt\"\n});\n\nexport const MediaDevices = Object.freeze({\n  MICROPHONE: \"microphone\",\n  SPEAKERS: \"speakers\",\n  CAMERA: \"camera\",\n  SCREEN: \"screen\"\n});\n\nexport const NO_DEVICE_ID = \"none\";\n","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_0-3818feefc64a56500b4a9aafd3c335f6.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_1-ff98c03defdd5eadb3a76d54dc4de4ff.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_2-aebbe107715f979f4211cc137554f5ee.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_3-6480f2b043fc431438467975b444fa27.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_4-4d4455f09e9816d62fb4fc971bf0b804.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_5-d84043c3235c12f7278ceea115f6beb3.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_6-38b62cb627da408d9f78b5b260051b33.png\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_0-f3f46448f25bc1d8599c39fc43fc3430.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_1-99633c94256b7520f7833921094bedfe.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_2-4531e5b1d197a14e76c8d47894b62db0.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_3-167102458af413f37fc62cd5b201a010.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_4-834ee3738e00e03227ff45809c6f2fe8.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_5-b2763de169ccdb200ec5e8503170079d.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_6-6df1120c791dabb88d6b1ada0d8f973d.glb\";","module.exports = __webpack_public_path__ + \"assets/hud/hand-raised-8e89d297620ec62351f31419c30d415b.png\";","module.exports = __webpack_public_path__ + \"assets/images/audio-0205471a2825b8450c63e45f83436997.png\";","import { hackyMobileSafariTest } from \"./detect-touchscreen\";\n\nconst MOBILE_RE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\nconst TABLET_RE = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\n\n// from https://stackoverflow.com/questions/57776001/how-to-detect-ipad-pro-as-ipad-using-javascript\nfunction isIpadOS() {\n  return window.navigator.maxTouchPoints && window.navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform);\n}\n\n// lifted from https://github.com/aframevr/aframe/blob/master/src/utils/device.js to ensure consistency\nexport function isIOS() {\n  return /iPad|iPhone|iPod/.test(window.navigator.platform) || isIpadOS();\n}\n\nfunction isTablet(mockUserAgent) {\n  const userAgent = mockUserAgent || window.navigator.userAgent;\n  return isIpadOS() || /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\n}\n\nfunction isR7() {\n  return /R7 Build/.test(window.navigator.userAgent);\n}\n\nfunction isOculusBrowser() {\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\n}\n\nfunction isFirefoxReality() {\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\n}\n\nfunction isMobileVR() {\n  return isOculusBrowser() || isFirefoxReality();\n}\n\nconst isMobile = (function() {\n  let _isMobile = false;\n  (function(a) {\n    // eslint-disable-next-line no-useless-escape\n    if (MOBILE_RE.test(a) || TABLET_RE.test(a.substr(0, 4))) {\n      _isMobile = true;\n    }\n    if (isIOS() || isTablet() || isR7()) {\n      _isMobile = true;\n    }\n    if (hackyMobileSafariTest()) {\n      _isMobile = true;\n    }\n    if (isMobileVR()) {\n      _isMobile = false;\n    }\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\n\n  return function() {\n    return _isMobile;\n  };\n})();\n\nexport default isMobile;\n","module.exports = \"data:image/png;base64,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\"","module.exports = function() {\n  return require(\"!!/Volumes/evo970/metahubs/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\\\"object\\\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:e}),2&t&&\\\"string\\\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\\\"a\\\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\\\"https://assets.metaverseplus2.xyz/hubs/\\\",r(r.s=0)}([function(e,t){self.onmessage=e=>{try{const t=function(e){let t=0;const r=[];let n=null;const o=[],s=[];let a=0;if(71!==e[0]||73!==e[1]||70!==e[2]||56!==e[3]||57!==e[4]||97!==e[5])throw new Error(\\\"parseGIF: no GIF89a\\\");{t+=13+ +!!(128&e[10])*Math.pow(2,1+(7&e[10]))*3;const u=e.subarray(0,t);for(;e[t]&&59!==e[t];){const l=t,f=e[t];if(33===f){const o=e[++t];if(-1===[1,254,249,255].indexOf(o))throw new Error(\\\"parseGIF: unknown label\\\");for(249===o&&r.push(10*(e[t+3]+(e[t+4]<<8))),255===o&&(a=e[t+15]+(e[t+16]<<8));e[++t];)t+=e[t];249===o&&(n=e.subarray(l,t+1),s.push(n[3]>>2&7))}else{if(44!==f)throw new Error(\\\"parseGIF: unknown blockId\\\");{for(t+=9,t+=1+ +!!(128&e[t])*(3*Math.pow(2,1+(7&e[t])));e[++t];)t+=e[t];const r=e.subarray(l,t+1);o.push(URL.createObjectURL(new Blob([u,n,r])))}}t++}}return{delayTimes:r,loopCnt:a,frames:o,disposals:s}}(new Uint8Array(e.data.payload));self.postMessage({id:e.data.id,result:t})}catch(t){self.postMessage({id:e.data.id,err:t.message})}}}]);\\n//# sourceMappingURL=gifparsing.worker-86e9055e75cce6cfb27b.js.map\", \"/\" + \"assets/js/gifparsing.worker-86e9055e75cce6cfb27b.js\");\n};","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"back-button\":\"BackButton__back-button__1jBAH\",\"backButton\":\"BackButton__back-button__1jBAH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar-editor\":\"avatar-editor__avatar-editor__xtJ6P\",\"avatarEditor\":\"avatar-editor__avatar-editor__xtJ6P\",\"no-default-button-style\":\"avatar-editor__no-default-button-style__eEjWl\",\"noDefaultButtonStyle\":\"avatar-editor__no-default-button-style__eEjWl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"TextAreaInput__textarea__1PCmO\"};","module.exports = __webpack_public_path__ + \"assets/images/emoji-picker-16-d27c8f382eaeeb7b717d978dd41fee51.png\";","module.exports = __webpack_public_path__ + \"assets/images/emoji-picker-20-fa7761ef913857542662d12fbc895cfa.png\";","module.exports = __webpack_public_path__ + \"assets/images/emoji-picker-32-b6a14672513ad3d8041ea933cffd0c8e.png\";","module.exports = __webpack_public_path__ + \"assets/images/emoji-picker-64-2d98b1622032d9951a077670afb53f1d.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"invite-popover\":\"InvitePopover__invite-popover__13s5V\",\"invitePopover\":\"InvitePopover__invite-popover__13s5V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copy-button\":\"CopyableTextInputField__copy-button__2P-A4\",\"copyButton\":\"CopyableTextInputField__copy-button__2P-A4\"};","const adjectives = [\n  \"able\",\n  \"absolute\",\n  \"acceptable\",\n  \"acclaimed\",\n  \"accomplished\",\n  \"accurate\",\n  \"aching\",\n  \"acrobatic\",\n  \"adorable\",\n  \"adventurous\",\n  \"basic\",\n  \"belated\",\n  \"beloved\",\n  \"calm\",\n  \"candid\",\n  \"capital\",\n  \"carefree\",\n  \"caring\",\n  \"cautious\",\n  \"celebrated\",\n  \"charming\",\n  \"daring\",\n  \"darling\",\n  \"dearest\",\n  \"each\",\n  \"eager\",\n  \"early\",\n  \"earnest\",\n  \"easy\",\n  \"easygoing\",\n  \"ecstatic\",\n  \"edible\",\n  \"fabulous\",\n  \"fair\",\n  \"faithful\",\n  \"familiar\",\n  \"famous\",\n  \"fancy\",\n  \"fantastic\",\n  \"far\",\n  \"generous\",\n  \"gentle\",\n  \"genuine\",\n  \"giant\",\n  \"handmade\",\n  \"handsome\",\n  \"handy\",\n  \"happy\",\n  \"icy\",\n  \"ideal\",\n  \"identical\",\n  \"keen\",\n  \"lasting\",\n  \"lavish\",\n  \"magnificent\",\n  \"majestic\",\n  \"mammoth\",\n  \"marvelous\",\n  \"natural\",\n  \"obedient\",\n  \"palatable\",\n  \"parched\",\n  \"passionate\",\n  \"pastel\",\n  \"peaceful\",\n  \"perfect\",\n  \"perfumed\",\n  \"quaint\",\n  \"qualified\",\n  \"radiant\",\n  \"rapid\",\n  \"rare\",\n  \"safe\",\n  \"sandy\",\n  \"satisfied\",\n  \"scaly\",\n  \"scarce\",\n  \"scared\",\n  \"scary\",\n  \"scented\",\n  \"scientific\",\n  \"secret\",\n  \"sentimental\",\n  \"talkative\",\n  \"tangible\",\n  \"tart\",\n  \"tasty\",\n  \"tattered\",\n  \"teeming\",\n  \"ultimate\",\n  \"uncommon\",\n  \"unconscious\",\n  \"understated\",\n  \"warm\",\n  \"active\",\n  \"adept\",\n  \"admirable\",\n  \"admired\",\n  \"adorable\",\n  \"adored\",\n  \"advanced\",\n  \"affectionate\",\n  \"beneficial\",\n  \"best\",\n  \"better\",\n  \"big\",\n  \"cheerful\",\n  \"cheery\",\n  \"chief\",\n  \"chilly\",\n  \"classic\",\n  \"clean\",\n  \"clear\",\n  \"clever\",\n  \"decent\",\n  \"decisive\",\n  \"deep\",\n  \"defiant\",\n  \"definitive\",\n  \"delectable\",\n  \"delicious\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elegant\",\n  \"elementary\",\n  \"elliptical\",\n  \"fast\",\n  \"favorable\",\n  \"favorite\",\n  \"fearless\",\n  \"gifted\",\n  \"glamorous\",\n  \"gleaming\",\n  \"glittering\",\n  \"harmonious\",\n  \"imaginative\",\n  \"immense\",\n  \"jealous\",\n  \"kind\",\n  \"leafy\",\n  \"legal\",\n  \"mature\",\n  \"mean\",\n  \"nautical\",\n  \"neat\",\n  \"necessary\",\n  \"needy\",\n  \"oddball\",\n  \"offbeat\",\n  \"periodic\",\n  \"perky\",\n  \"personal\",\n  \"pertinent\",\n  \"petty\",\n  \"quarterly\",\n  \"ready\",\n  \"real\",\n  \"realistic\",\n  \"reasonable\",\n  \"regal\",\n  \"serene\",\n  \"shabby\",\n  \"sharp\",\n  \"shiny\",\n  \"showy\",\n  \"shy\",\n  \"silky\",\n  \"tempting\",\n  \"tense\",\n  \"terrific\",\n  \"testy\",\n  \"thankful\",\n  \"uniform\",\n  \"unique\",\n  \"vast\",\n  \"weary\",\n  \"wee\",\n  \"welcome\",\n  \"agile\",\n  \"alarmed\",\n  \"alert\",\n  \"alive\",\n  \"bleak\",\n  \"blissful\",\n  \"blushing\",\n  \"coarse\",\n  \"colorful\",\n  \"colossal\",\n  \"comfortable\",\n  \"compassionate\",\n  \"complete\",\n  \"delightful\",\n  \"dense\",\n  \"dependable\",\n  \"dependent\",\n  \"descriptive\",\n  \"detailed\",\n  \"determined\",\n  \"devoted\",\n  \"different\",\n  \"eminent\",\n  \"emotional\",\n  \"enchanted\",\n  \"enchanting\",\n  \"energetic\",\n  \"enormous\",\n  \"fine\",\n  \"finished\",\n  \"firm\",\n  \"firsthand\",\n  \"fixed\",\n  \"flashy\",\n  \"flawless\",\n  \"glorious\",\n  \"glossy\",\n  \"golden\",\n  \"good\",\n  \"gorgeous\",\n  \"graceful\",\n  \"healthy\",\n  \"heartfelt\",\n  \"hearty\",\n  \"helpful\",\n  \"impartial\",\n  \"impressive\",\n  \"jolly\",\n  \"jovial\",\n  \"lighthearted\",\n  \"likable\",\n  \"lined\",\n  \"mellow\",\n  \"melodic\",\n  \"memorable\",\n  \"mild\",\n  \"new\",\n  \"opulent\",\n  \"playful\",\n  \"pleasant\",\n  \"pleasing\",\n  \"plump\",\n  \"plush\",\n  \"polished\",\n  \"polite\",\n  \"reliable\",\n  \"relieved\",\n  \"remarkable\",\n  \"remote\",\n  \"respectful\",\n  \"responsible\",\n  \"simple\",\n  \"simplistic\",\n  \"sizzling\",\n  \"sleepy\",\n  \"slight\",\n  \"slim\",\n  \"smart\",\n  \"smooth\",\n  \"snappy\",\n  \"snoopy\",\n  \"thirsty\",\n  \"this\",\n  \"thorough\",\n  \"those\",\n  \"thoughtful\",\n  \"united\",\n  \"vibrant\",\n  \"vicious\",\n  \"wellmade\",\n  \"whimsical\",\n  \"whirlwind\",\n  \"zesty\",\n  \"amazing\",\n  \"ambitious\",\n  \"ample\",\n  \"amused\",\n  \"amusing\",\n  \"ancient\",\n  \"angelic\",\n  \"antique\",\n  \"bold\",\n  \"bossy\",\n  \"both\",\n  \"bouncy\",\n  \"bountiful\",\n  \"complex\",\n  \"conscious\",\n  \"considerate\",\n  \"constant\",\n  \"content\",\n  \"conventional\",\n  \"cooked\",\n  \"cool\",\n  \"cooperative\",\n  \"diligent\",\n  \"dimwitted\",\n  \"direct\",\n  \"discrete\",\n  \"envious\",\n  \"essential\",\n  \"ethical\",\n  \"euphoric\",\n  \"flippant\",\n  \"fluffy\",\n  \"flustered\",\n  \"focused\",\n  \"fond\",\n  \"gracious\",\n  \"grand\",\n  \"grandiose\",\n  \"granular\",\n  \"grateful\",\n  \"grave\",\n  \"great\",\n  \"hidden\",\n  \"high\",\n  \"hilarious\",\n  \"homely\",\n  \"incomparable\",\n  \"incredible\",\n  \"infamous\",\n  \"joyful\",\n  \"lively\",\n  \"loathsome\",\n  \"lonely\",\n  \"long\",\n  \"mindless\",\n  \"miniature\",\n  \"minor\",\n  \"misty\",\n  \"next\",\n  \"nice\",\n  \"nifty\",\n  \"nimble\",\n  \"orderly\",\n  \"organic\",\n  \"ornate\",\n  \"popular\",\n  \"posh\",\n  \"positive\",\n  \"potable\",\n  \"powerful\",\n  \"powerless\",\n  \"precious\",\n  \"present\",\n  \"prestigious\",\n  \"quick\",\n  \"rewarding\",\n  \"rich\",\n  \"right\",\n  \"sociable\",\n  \"soft\",\n  \"solid\",\n  \"some\",\n  \"sophisticated\",\n  \"soulful\",\n  \"sparkling\",\n  \"spectacular\",\n  \"speedy\",\n  \"spicy\",\n  \"spiffy\",\n  \"spirited\",\n  \"spiteful\",\n  \"splendid\",\n  \"spotless\",\n  \"spry\",\n  \"thrifty\",\n  \"tidy\",\n  \"tight\",\n  \"timely\",\n  \"tinted\",\n  \"unruly\",\n  \"untimely\",\n  \"violet\",\n  \"wicked\",\n  \"wide\",\n  \"wild\",\n  \"willing\",\n  \"winding\",\n  \"windy\",\n  \"zigzag\",\n  \"apprehensive\",\n  \"appropriate\",\n  \"artistic\",\n  \"assured\",\n  \"astonishing\",\n  \"bright\",\n  \"brilliant\",\n  \"bronze\",\n  \"coordinated\",\n  \"courageous\",\n  \"courteous\",\n  \"crafty\",\n  \"crazy\",\n  \"creamy\",\n  \"creative\",\n  \"crisp\",\n  \"distant\",\n  \"distinct\",\n  \"downright\",\n  \"evergreen\",\n  \"everlasting\",\n  \"every\",\n  \"evil\",\n  \"excellent\",\n  \"excitable\",\n  \"exemplary\",\n  \"exhausted\",\n  \"forthright\",\n  \"fortunate\",\n  \"fragrant\",\n  \"frank\",\n  \"free\",\n  \"frequent\",\n  \"fresh\",\n  \"friendly\",\n  \"frightened\",\n  \"frigid\",\n  \"gripping\",\n  \"grounded\",\n  \"honest\",\n  \"honorable\",\n  \"honored\",\n  \"hopeful\",\n  \"hospitable\",\n  \"hot\",\n  \"huge\",\n  \"infatuated\",\n  \"infinite\",\n  \"informal\",\n  \"insistent\",\n  \"instructive\",\n  \"juicy\",\n  \"jumbo\",\n  \"knowing\",\n  \"knowledgeable\",\n  \"longterm\",\n  \"loud\",\n  \"lovable\",\n  \"loving\",\n  \"modern\",\n  \"modest\",\n  \"monumental\",\n  \"normal\",\n  \"notable\",\n  \"outgoing\",\n  \"precious\",\n  \"pretty\",\n  \"prickly\",\n  \"primary\",\n  \"pristine\",\n  \"private\",\n  \"prize\",\n  \"productive\",\n  \"profitable\",\n  \"quiet\",\n  \"quintessential\",\n  \"roasted\",\n  \"robust\",\n  \"square\",\n  \"squiggly\",\n  \"stable\",\n  \"staid\",\n  \"starry\",\n  \"steel\",\n  \"stimulating\",\n  \"striking\",\n  \"striped\",\n  \"strong\",\n  \"studious\",\n  \"stunning\",\n  \"tough\",\n  \"trained\",\n  \"treasured\",\n  \"tremendous\",\n  \"triangular\",\n  \"tricky\",\n  \"unused\",\n  \"unusual\",\n  \"upbeat\",\n  \"virtual\",\n  \"witty\",\n  \"wonderful\",\n  \"wooden\",\n  \"worldly\",\n  \"youthful\",\n  \"attached\",\n  \"attentive\",\n  \"attractive\",\n  \"austere\",\n  \"authentic\",\n  \"automatic\",\n  \"aware\",\n  \"awesome\",\n  \"bubbly\",\n  \"bustling\",\n  \"busy\",\n  \"buttery\",\n  \"cuddly\",\n  \"cultured\",\n  \"curly\",\n  \"curvy\",\n  \"cute\",\n  \"cylindrical\",\n  \"downright\",\n  \"dramatic\",\n  \"excited\",\n  \"exciting\",\n  \"exotic\",\n  \"experienced\",\n  \"expert\",\n  \"frosty\",\n  \"fruitful\",\n  \"full\",\n  \"fumbling\",\n  \"funny\",\n  \"fussy\",\n  \"growing\",\n  \"grown\",\n  \"gummy\",\n  \"humble\",\n  \"humongous\",\n  \"hungry\",\n  \"intelligent\",\n  \"interesting\",\n  \"known\",\n  \"kooky\",\n  \"loyal\",\n  \"lucky\",\n  \"luminous\",\n  \"lustrous\",\n  \"luxurious\",\n  \"multicolored\",\n  \"mysterious\",\n  \"noteworthy\",\n  \"numb\",\n  \"nutritious\",\n  \"outstanding\",\n  \"overjoyed\",\n  \"proper\",\n  \"proud\",\n  \"prudent\",\n  \"punctual\",\n  \"puny\",\n  \"pure\",\n  \"puzzled\",\n  \"puzzling\",\n  \"quirky\",\n  \"stupendous\",\n  \"sturdy\",\n  \"stylish\",\n  \"subdued\",\n  \"subtle\",\n  \"sunny\",\n  \"super\",\n  \"superb\",\n  \"supportive\",\n  \"surprised\",\n  \"sweet\",\n  \"swift\",\n  \"sympathetic\",\n  \"trivial\",\n  \"trusting\",\n  \"trustworthy\",\n  \"trusty\",\n  \"truthful\",\n  \"twin\",\n  \"usable\",\n  \"used\",\n  \"useful\",\n  \"utilized\",\n  \"vital\",\n  \"vivid\",\n  \"worried\",\n  \"worthwhile\",\n  \"worthy\",\n  \"writhing\",\n  \"wry\",\n  \"yummy\",\n  \"chocolate\",\n  \"crimson\",\n  \"cyan\",\n  \"fuchsia\",\n  \"gold\",\n  \"honeydew\",\n  \"lime\",\n  \"linen\",\n  \"magenta\",\n  \"olive\",\n  \"peru\",\n  \"salmon\",\n  \"seashell\",\n  \"sienna\",\n  \"snow\",\n  \"thistle\",\n  \"tomato\",\n  \"transparent\",\n  \"turquoise\",\n  \"violet\"\n];\n\nconst nouns = [\n  \"space\",\n  \"land\",\n  \"world\",\n  \"universe\",\n  \"plane\",\n  \"room\",\n  \"nation\",\n  \"plaza\",\n  \"gathering\",\n  \"meetup\",\n  \"get together\",\n  \"conclave\",\n  \"party\",\n  \"domain\",\n  \"dominion\",\n  \"realm\",\n  \"square\",\n  \"commons\",\n  \"park\",\n  \"cosmos\",\n  \"sphere\",\n  \"terrain\",\n  \"spot\",\n  \"zone\",\n  \"area\",\n  \"tract\",\n  \"turf\",\n  \"place\",\n  \"territory\",\n  \"volume\",\n  \"camp\",\n  \"picnic\",\n  \"outing\",\n  \"vacation\",\n  \"adventure\",\n  \"exploration\",\n  \"outing\",\n  \"walkabout\",\n  \"safari\",\n  \"venture\",\n  \"roundtable\",\n  \"barbecue\",\n  \"celebration\",\n  \"festivity\",\n  \"gala\",\n  \"shindig\",\n  \"social\",\n  \"convention\",\n  \"assembly\",\n  \"congregation\",\n  \"rendezvous\",\n  \"huddle\",\n  \"meet\",\n  \"soiree\"\n];\n\nexport function generateHubName() {\n  const randItem = set => {\n    const s = set[Math.floor(Math.random() * set.length)];\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  return `${randItem(adjectives)} ${randItem(adjectives)} ${randItem(nouns)}`;\n}\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport configs from \"../utils/configs\";\nimport { sleep } from \"../utils/async-utils\";\n\nimport Store from \"../storage/store\";\n\nexport function hasReticulumServer() {\n  return !!configs.RETICULUM_SERVER;\n}\n\nexport function isLocalClient() {\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\n}\n\nexport function hubUrl(hubId, extraParams, slug) {\n  if (!hubId) {\n    if (isLocalClient()) {\n      hubId = new URLSearchParams(location.search).get(\"hub_id\");\n    } else {\n      hubId = location.pathname.split(\"/\")[1];\n    }\n  }\n\n  let url;\n  if (isLocalClient()) {\n    url = new URL(`/hub.html`, location.href);\n    url.searchParams.set(\"hub_id\", hubId);\n  } else {\n    const maybeSlug = slug ? `/${slug}` : \"\";\n    url = new URL(`/${hubId}${maybeSlug}`, location.href);\n  }\n\n  for (const key in extraParams) {\n    if (extraParams.hasOwnProperty(key)) {\n      url.searchParams.set(key, extraParams[key]);\n    }\n  }\n\n  return url;\n}\n\nconst resolverLink = document.createElement(\"a\");\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\n  if (host || hasReticulumServer()) {\n    return `https://${host || configs.RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport function getUploadsUrl(path, absolute = false, host = null, port = null) {\n  // If the Hubs Cloud stack is configured to use Cloudflare, we need to ignore the configured UPLOADS_HOST\n  // since reticulum will only serve uploads via the Cloudflare worker. BASE_ASSETS_PATH will have been\n  // correctly configured to use the Cloudflare worker, though we only need the hostname,\n  // not the full assets URL.\n  const isUsingCloudflare = configs.BASE_ASSETS_PATH.includes(\"workers.dev\");\n  const uploadsHost = isUsingCloudflare ? new URL(configs.BASE_ASSETS_PATH).hostname : configs.UPLOADS_HOST;\n  return uploadsHost\n    ? `https://${uploadsHost}${port ? `:${port}` : \"\"}${path}`\n    : getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nlet directReticulumHostAndPort;\n\nasync function refreshDirectReticulumHostAndPort() {\n  const qs = new URLSearchParams(location.search);\n  let host = qs.get(\"phx_host\");\n  const reticulumMeta = await getReticulumMeta();\n  host = host || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n  const port =\n    qs.get(\"phx_port\") ||\n    (hasReticulumServer() ? new URL(`${document.location.protocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\n  directReticulumHostAndPort = { host, port };\n}\n\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\n  if (!directReticulumHostAndPort) {\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\n    return getReticulumFetchUrl(path, absolute);\n  }\n\n  const { host, port } = directReticulumHostAndPort;\n  return getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    await refreshDirectReticulumHostAndPort();\n    const { host, port } = directReticulumHostAndPort;\n    const protocol =\n      qs.get(\"phx_protocol\") ||\n      configs.RETICULUM_SOCKET_PROTOCOL ||\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (isLocalClient()) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\nfunction migrateBindings(oldChannel, newChannel) {\n  const doNotDuplicate = [\"phx_close\", \"phx_error\", \"phx_reply\", \"presence_state\", \"presence_diff\"];\n  const shouldDuplicate = event => {\n    return !event.startsWith(\"chan_reply_\") && !doNotDuplicate.includes(event);\n  };\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    if (shouldDuplicate(item.event)) {\n      newChannel.bindings.push(item);\n    }\n  }\n  newChannel.bindingRef = oldChannel.bindingRef;\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  migrateBindings(oldChannel, channel);\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function migrateToChannel(oldChannel, newChannel) {\n  migrateBindings(oldChannel, newChannel);\n\n  return new Promise((resolve, reject) => {\n    newChannel\n      .join()\n      .receive(\"ok\", data => {\n        oldChannel.leave();\n        oldChannel.bindings = [];\n        resolve(data);\n      })\n      .receive(\"error\", data => {\n        newChannel.leave();\n        reject(data);\n      });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n\nexport function hasEmbedPresences(presences) {\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.context && m.context.embed) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function denoisePresence({ onJoin, onLeave, onChange }) {\n  return {\n    rawOnJoin: (key, beforeJoin, afterJoin) => {\n      if (beforeJoin === undefined) {\n        onJoin(key, afterJoin.metas[0]);\n      }\n    },\n    rawOnLeave: (key, remaining, removed) => {\n      if (remaining.metas.length === 0) {\n        onLeave(key, removed.metas[0]);\n      } else {\n        onChange(key, removed.metas[removed.metas.length - 1], remaining.metas[remaining.metas.length - 1]);\n      }\n    }\n  };\n}\n\nexport function presenceEventsForHub(events) {\n  const onJoin = (key, meta) => {\n    events.trigger(`hub:join`, { key, meta });\n  };\n  const onLeave = (key, meta) => {\n    events.trigger(`hub:leave`, { key, meta });\n  };\n  const onChange = (key, previous, current) => {\n    events.trigger(`hub:change`, { key, previous, current });\n  };\n  return {\n    onJoin,\n    onLeave,\n    onChange\n  };\n}\n\nexport const tryGetMatchingMeta = async ({ ret_pool, ret_version }, shouldAbandonMigration) => {\n  const backoffMS = 5000;\n  const randomMS = 15000;\n  const maxAttempts = 10;\n  let didMatchMeta = false;\n  let attempt = 0;\n  while (!didMatchMeta && attempt < maxAttempts && !shouldAbandonMigration()) {\n    try {\n      // Add randomness to the first request avoid flooding reticulum.\n      const delayMS = attempt * backoffMS + (attempt === 0 ? Math.random() * randomMS : 0);\n      console.log(\n        `[reconnect] Getting reticulum meta in ${Math.ceil(delayMS / 1000)} seconds.${\n          attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"\n        }`\n      );\n      await sleep(delayMS);\n      invalidateReticulumMeta();\n      console.log(`[reconnect] Getting reticulum meta.${attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"}`);\n      const { pool, version } = await getReticulumMeta();\n      didMatchMeta = ret_pool === pool && ret_version === version;\n    } catch {\n      didMatchMeta = false;\n    }\n\n    attempt = attempt + 1;\n  }\n  return didMatchMeta;\n};\n","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"Divider__divider__jeSkI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"numeric-input\":\"NumericInput__numeric-input__2Bp3p\",\"numericInput\":\"NumericInput__numeric-input__2Bp3p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"SpectatingLabel__label__2Hd_2\"};","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-action-spritesheet-7c9dc220b9426c1eff195e421fee8d51.png\";","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-notice-spritesheet-f48f446b92410c437a7e81c3a17f70fa.png\";","module.exports = \"uniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nattribute mat4 a_mv;\\nattribute vec3 position;\\nattribute vec2 a_uvs;\\nvarying vec2 v_uvs;\\nattribute float a_hubs_EnableSweepingEffect;\\nvarying float v_hubs_EnableSweepingEffect;\\nattribute vec2 a_hubs_SweepParams;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * a_mv * vec4(position, 1.0);\\n  v_uvs = a_uvs;\\n  v_hubs_EnableSweepingEffect = a_hubs_EnableSweepingEffect;\\n  v_hubs_SweepParams = a_hubs_SweepParams;\\n\\n  vec4 wt = vec4(position, 1.0);\\n  hubs_WorldPosition = (a_mv * wt).xyz;\\n}\\n\"","module.exports = \"precision mediump float;\\n\\nuniform sampler2D u_spritesheet;\\n\\nvarying vec2 v_uvs;\\n\\nvarying float v_hubs_EnableSweepingEffect;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\nuniform bool hubs_HighlightInteractorOne;\\nuniform vec3 hubs_InteractorOnePos;\\nuniform bool hubs_HighlightInteractorTwo;\\nuniform vec3 hubs_InteractorTwoPos;\\nuniform float hubs_Time;\\n\\nvec4 LinearTosRGB( in vec4 value ) {\\n    return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\n\\nvec4 linearToOutputTexel( vec4 value ) {\\n  return LinearTosRGB( value );\\n}\\n\\nvoid main() {\\n    vec4 texColor = texture2D(u_spritesheet, v_uvs);\\n\\n    float ratio = 0.0;\\n    if (v_hubs_EnableSweepingEffect > 0.9 ) {\\n        float size = v_hubs_SweepParams.t - v_hubs_SweepParams.s * 1.0;\\n        float line = mod(hubs_Time / 500.0 * size, size * 3.0) + v_hubs_SweepParams.s - size / 3.0;\\n        if (hubs_WorldPosition.y < line) {\\n            ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n        }\\n\\n    }\\n    ratio = min(1.0, ratio);\\n\\n    vec4 highlightColor = vec4(0.184, 0.499, 0.933, 1.0);\\n    gl_FragColor = linearToOutputTexel(vec4((texColor.rgb * (1.0 - ratio)) + (highlightColor.rgb * ratio), texColor.a));\\n}\\n\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"media-tile\":\"MediaTiles__media-tile__mGdaM\",\"mediaTile\":\"MediaTiles__media-tile__mGdaM\",\"thumbnail-container\":\"MediaTiles__thumbnail-container__2o2c0\",\"thumbnailContainer\":\"MediaTiles__thumbnail-container__2o2c0\",\"create-tile-content\":\"MediaTiles__create-tile-content__ZPGad\",\"createTileContent\":\"MediaTiles__create-tile-content__ZPGad\",\"tall\":\"MediaTiles__tall__16fSM\",\"wide\":\"MediaTiles__wide__1-OwO\",\"thumbnail-link\":\"MediaTiles__thumbnail-link__1PgRp\",\"thumbnailLink\":\"MediaTiles__thumbnail-link__1PgRp\",\"tile-actions\":\"MediaTiles__tile-actions__3B_T3\",\"tileActions\":\"MediaTiles__tile-actions__3B_T3\",\"tile-action\":\"MediaTiles__tile-action__2h4gJ\",\"tileAction\":\"MediaTiles__tile-action__2h4gJ\",\"member-count\":\"MediaTiles__member-count__1LXbp\",\"memberCount\":\"MediaTiles__member-count__1LXbp\",\"favorite-icon\":\"MediaTiles__favorite-icon__2Dkie\",\"favoriteIcon\":\"MediaTiles__favorite-icon__2Dkie\",\"info\":\"MediaTiles__info__Tt-xT\",\"description\":\"MediaTiles__description__qcX6D\",\"create-tile\":\"MediaTiles__create-tile__ZoX89\",\"createTile\":\"MediaTiles__create-tile__ZoX89\"};","module.exports = function() {\n  return require(\"!!/Volumes/evo970/metahubs/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"!function(r){var n={};function t(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return r[e].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=r,t.c=n,t.d=function(r,n,e){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:e})},t.r=function(r){\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(r,\\\"__esModule\\\",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n)return r;if(4&n&&\\\"object\\\"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,\\\"default\\\",{enumerable:!0,value:r}),2&n&&\\\"string\\\"!=typeof r)for(var a in r)t.d(e,a,function(n){return r[n]}.bind(null,a));return e},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,\\\"a\\\",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p=\\\"https://assets.metaverseplus2.xyz/hubs/\\\",t(t.s=3)}([function(r,n,t){\\\"use strict\\\";var e=t(4),a=t(7),o=[].slice,l=[\\\"keyword\\\",\\\"gray\\\",\\\"hex\\\"],i={};Object.keys(a).forEach((function(r){i[o.call(a[r].labels).sort().join(\\\"\\\")]=r}));var s={};function h(r,n){if(!(this instanceof h))return new h(r,n);if(n&&n in l&&(n=null),n&&!(n in a))throw new Error(\\\"Unknown model: \\\"+n);var t,u;if(null==r)this.model=\\\"rgb\\\",this.color=[0,0,0],this.valpha=1;else if(r instanceof h)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(\\\"string\\\"==typeof r){var c=e.get(r);if(null===c)throw new Error(\\\"Unable to parse color from string: \\\"+r);this.model=c.model,u=a[this.model].channels,this.color=c.value.slice(0,u),this.valpha=\\\"number\\\"==typeof c.value[u]?c.value[u]:1}else if(r.length){this.model=n||\\\"rgb\\\",u=a[this.model].channels;var f=o.call(r,0,u);this.color=g(f,u),this.valpha=\\\"number\\\"==typeof r[u]?r[u]:1}else if(\\\"number\\\"==typeof r)r&=16777215,this.model=\\\"rgb\\\",this.color=[r>>16&255,r>>8&255,255&r],this.valpha=1;else{this.valpha=1;var b=Object.keys(r);\\\"alpha\\\"in r&&(b.splice(b.indexOf(\\\"alpha\\\"),1),this.valpha=\\\"number\\\"==typeof r.alpha?r.alpha:0);var p=b.sort().join(\\\"\\\");if(!(p in i))throw new Error(\\\"Unable to parse color from object: \\\"+JSON.stringify(r));this.model=i[p];var v=a[this.model].labels,d=[];for(t=0;t<v.length;t++)d.push(r[v[t]]);this.color=g(d)}if(s[this.model])for(u=a[this.model].channels,t=0;t<u;t++){var m=s[this.model][t];m&&(this.color[t]=m(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(r,n,t){return(r=Array.isArray(r)?r:[r]).forEach((function(r){(s[r]||(s[r]=[]))[n]=t})),r=r[0],function(e){var a;return arguments.length?(t&&(e=t(e)),(a=this[r]()).color[n]=e,a):(a=this[r]().color[n],t&&(a=t(a)),a)}}function c(r){return function(n){return Math.max(0,Math.min(r,n))}}function f(r){return Array.isArray(r)?r:[r]}function g(r,n){for(var t=0;t<n;t++)\\\"number\\\"!=typeof r[t]&&(r[t]=0);return r}h.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var n=this.model in e.to?this:this.rgb(),t=1===(n=n.round(\\\"number\\\"==typeof r?r:1)).valpha?n.color:n.color.concat(this.valpha);return e.to[n.model](t)},percentString:function(r){var n=this.rgb().round(\\\"number\\\"==typeof r?r:1),t=1===n.valpha?n.color:n.color.concat(this.valpha);return e.to.rgb.percent(t)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},n=a[this.model].channels,t=a[this.model].labels,e=0;e<n;e++)r[t[e]]=this.color[e];return 1!==this.valpha&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,1!==this.valpha&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,1!==this.valpha&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new h(this.color.map(function(r){return function(n){return function(r,n){return Number(r.toFixed(n))}(n,r)}}(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new h(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:u(\\\"rgb\\\",0,c(255)),green:u(\\\"rgb\\\",1,c(255)),blue:u(\\\"rgb\\\",2,c(255)),hue:u([\\\"hsl\\\",\\\"hsv\\\",\\\"hsl\\\",\\\"hwb\\\",\\\"hcg\\\"],0,(function(r){return(r%360+360)%360})),saturationl:u(\\\"hsl\\\",1,c(100)),lightness:u(\\\"hsl\\\",2,c(100)),saturationv:u(\\\"hsv\\\",1,c(100)),value:u(\\\"hsv\\\",2,c(100)),chroma:u(\\\"hcg\\\",1,c(100)),gray:u(\\\"hcg\\\",2,c(100)),white:u(\\\"hwb\\\",1,c(100)),wblack:u(\\\"hwb\\\",2,c(100)),cyan:u(\\\"cmyk\\\",0,c(100)),magenta:u(\\\"cmyk\\\",1,c(100)),yellow:u(\\\"cmyk\\\",2,c(100)),black:u(\\\"cmyk\\\",3,c(100)),x:u(\\\"xyz\\\",0,c(100)),y:u(\\\"xyz\\\",1,c(100)),z:u(\\\"xyz\\\",2,c(100)),l:u(\\\"lab\\\",0,c(100)),a:u(\\\"lab\\\",1),b:u(\\\"lab\\\",2),keyword:function(r){return arguments.length?new h(r):a[this.model].keyword(this.color)},hex:function(r){return arguments.length?new h(r):e.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(255&r[0])<<16|(255&r[1])<<8|255&r[2]},luminosity:function(){for(var r=this.rgb().color,n=[],t=0;t<r.length;t++){var e=r[t]/255;n[t]=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*n[0]+.7152*n[1]+.0722*n[2]},contrast:function(r){var n=this.luminosity(),t=r.luminosity();return n>t?(n+.05)/(t+.05):(t+.05)/(n+.05)},level:function(r){var n=this.contrast(r);return n>=7.1?\\\"AAA\\\":n>=4.5?\\\"AA\\\":\\\"\\\"},isDark:function(){var r=this.rgb().color;return(299*r[0]+587*r[1]+114*r[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),n=0;n<3;n++)r.color[n]=255-r.color[n];return r},lighten:function(r){var n=this.hsl();return n.color[2]+=n.color[2]*r,n},darken:function(r){var n=this.hsl();return n.color[2]-=n.color[2]*r,n},saturate:function(r){var n=this.hsl();return n.color[1]+=n.color[1]*r,n},desaturate:function(r){var n=this.hsl();return n.color[1]-=n.color[1]*r,n},whiten:function(r){var n=this.hwb();return n.color[1]+=n.color[1]*r,n},blacken:function(r){var n=this.hwb();return n.color[2]+=n.color[2]*r,n},grayscale:function(){var r=this.rgb().color,n=.3*r[0]+.59*r[1]+.11*r[2];return h.rgb(n,n,n)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var n=this.hsl(),t=n.color[0];return t=(t=(t+r)%360)<0?360+t:t,n.color[0]=t,n},mix:function(r,n){if(!r||!r.rgb)throw new Error('Argument to \\\"mix\\\" was not a Color instance, but rather an instance of '+typeof r);var t=r.rgb(),e=this.rgb(),a=void 0===n?.5:n,o=2*a-1,l=t.alpha()-e.alpha(),i=((o*l==-1?o:(o+l)/(1+o*l))+1)/2,s=1-i;return h.rgb(i*t.red()+s*e.red(),i*t.green()+s*e.green(),i*t.blue()+s*e.blue(),t.alpha()*a+e.alpha()*(1-a))}},Object.keys(a).forEach((function(r){if(-1===l.indexOf(r)){var n=a[r].channels;h.prototype[r]=function(){if(this.model===r)return new h(this);if(arguments.length)return new h(arguments,r);var t=\\\"number\\\"==typeof arguments[n]?n:this.valpha;return new h(f(a[this.model][r].raw(this.color)).concat(t),r)},h[r]=function(t){return\\\"number\\\"==typeof t&&(t=g(o.call(arguments),n)),new h(t,r)}}})),r.exports=h},function(r,n){r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(r,n,t){var e=t(1),a={};for(var o in e)e.hasOwnProperty(o)&&(a[e[o]]=o);var l=r.exports={rgb:{channels:3,labels:\\\"rgb\\\"},hsl:{channels:3,labels:\\\"hsl\\\"},hsv:{channels:3,labels:\\\"hsv\\\"},hwb:{channels:3,labels:\\\"hwb\\\"},cmyk:{channels:4,labels:\\\"cmyk\\\"},xyz:{channels:3,labels:\\\"xyz\\\"},lab:{channels:3,labels:\\\"lab\\\"},lch:{channels:3,labels:\\\"lch\\\"},hex:{channels:1,labels:[\\\"hex\\\"]},keyword:{channels:1,labels:[\\\"keyword\\\"]},ansi16:{channels:1,labels:[\\\"ansi16\\\"]},ansi256:{channels:1,labels:[\\\"ansi256\\\"]},hcg:{channels:3,labels:[\\\"h\\\",\\\"c\\\",\\\"g\\\"]},apple:{channels:3,labels:[\\\"r16\\\",\\\"g16\\\",\\\"b16\\\"]},gray:{channels:1,labels:[\\\"gray\\\"]}};for(var i in l)if(l.hasOwnProperty(i)){if(!(\\\"channels\\\"in l[i]))throw new Error(\\\"missing channels property: \\\"+i);if(!(\\\"labels\\\"in l[i]))throw new Error(\\\"missing channel labels property: \\\"+i);if(l[i].labels.length!==l[i].channels)throw new Error(\\\"channel and label counts mismatch: \\\"+i);var s=l[i].channels,h=l[i].labels;delete l[i].channels,delete l[i].labels,Object.defineProperty(l[i],\\\"channels\\\",{value:s}),Object.defineProperty(l[i],\\\"labels\\\",{value:h})}l.rgb.hsl=function(r){var n,t,e=r[0]/255,a=r[1]/255,o=r[2]/255,l=Math.min(e,a,o),i=Math.max(e,a,o),s=i-l;return i===l?n=0:e===i?n=(a-o)/s:a===i?n=2+(o-e)/s:o===i&&(n=4+(e-a)/s),(n=Math.min(60*n,360))<0&&(n+=360),t=(l+i)/2,[n,100*(i===l?0:t<=.5?s/(i+l):s/(2-i-l)),100*t]},l.rgb.hsv=function(r){var n,t,e,a,o,l=r[0]/255,i=r[1]/255,s=r[2]/255,h=Math.max(l,i,s),u=h-Math.min(l,i,s),c=function(r){return(h-r)/6/u+.5};return 0===u?a=o=0:(o=u/h,n=c(l),t=c(i),e=c(s),l===h?a=e-t:i===h?a=1/3+n-e:s===h&&(a=2/3+t-n),a<0?a+=1:a>1&&(a-=1)),[360*a,100*o,100*h]},l.rgb.hwb=function(r){var n=r[0],t=r[1],e=r[2];return[l.rgb.hsl(r)[0],100*(1/255*Math.min(n,Math.min(t,e))),100*(e=1-1/255*Math.max(n,Math.max(t,e)))]},l.rgb.cmyk=function(r){var n,t=r[0]/255,e=r[1]/255,a=r[2]/255;return[100*((1-t-(n=Math.min(1-t,1-e,1-a)))/(1-n)||0),100*((1-e-n)/(1-n)||0),100*((1-a-n)/(1-n)||0),100*n]},l.rgb.keyword=function(r){var n=a[r];if(n)return n;var t,o,l,i=1/0;for(var s in e)if(e.hasOwnProperty(s)){var h=e[s],u=(o=r,l=h,Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)+Math.pow(o[2]-l[2],2));u<i&&(i=u,t=s)}return t},l.keyword.rgb=function(r){return e[r]},l.rgb.xyz=function(r){var n=r[0]/255,t=r[1]/255,e=r[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)),100*(.2126*n+.7152*t+.0722*e),100*(.0193*n+.1192*t+.9505*e)]},l.rgb.lab=function(r){var n=l.rgb.xyz(r),t=n[0],e=n[1],a=n[2];return e/=100,a/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116)-16,500*(t-e),200*(e-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},l.hsl.rgb=function(r){var n,t,e,a,o,l=r[0]/360,i=r[1]/100,s=r[2]/100;if(0===i)return[o=255*s,o,o];n=2*s-(t=s<.5?s*(1+i):s+i-s*i),a=[0,0,0];for(var h=0;h<3;h++)(e=l+1/3*-(h-1))<0&&e++,e>1&&e--,o=6*e<1?n+6*(t-n)*e:2*e<1?t:3*e<2?n+(t-n)*(2/3-e)*6:n,a[h]=255*o;return a},l.hsl.hsv=function(r){var n=r[0],t=r[1]/100,e=r[2]/100,a=t,o=Math.max(e,.01);return t*=(e*=2)<=1?e:2-e,a*=o<=1?o:2-o,[n,100*(0===e?2*a/(o+a):2*t/(e+t)),100*((e+t)/2)]},l.hsv.rgb=function(r){var n=r[0]/60,t=r[1]/100,e=r[2]/100,a=Math.floor(n)%6,o=n-Math.floor(n),l=255*e*(1-t),i=255*e*(1-t*o),s=255*e*(1-t*(1-o));switch(e*=255,a){case 0:return[e,s,l];case 1:return[i,e,l];case 2:return[l,e,s];case 3:return[l,i,e];case 4:return[s,l,e];case 5:return[e,l,i]}},l.hsv.hsl=function(r){var n,t,e,a=r[0],o=r[1]/100,l=r[2]/100,i=Math.max(l,.01);return e=(2-o)*l,t=o*i,[a,100*(t=(t/=(n=(2-o)*i)<=1?n:2-n)||0),100*(e/=2)]},l.hwb.rgb=function(r){var n,t,e,a,o,l,i,s=r[0]/360,h=r[1]/100,u=r[2]/100,c=h+u;switch(c>1&&(h/=c,u/=c),e=6*s-(n=Math.floor(6*s)),0!=(1&n)&&(e=1-e),a=h+e*((t=1-u)-h),n){default:case 6:case 0:o=t,l=a,i=h;break;case 1:o=a,l=t,i=h;break;case 2:o=h,l=t,i=a;break;case 3:o=h,l=a,i=t;break;case 4:o=a,l=h,i=t;break;case 5:o=t,l=h,i=a}return[255*o,255*l,255*i]},l.cmyk.rgb=function(r){var n=r[0]/100,t=r[1]/100,e=r[2]/100,a=r[3]/100;return[255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,t*(1-a)+a)),255*(1-Math.min(1,e*(1-a)+a))]},l.xyz.rgb=function(r){var n,t,e,a=r[0]/100,o=r[1]/100,l=r[2]/100;return t=-.9689*a+1.8758*o+.0415*l,e=.0557*a+-.204*o+1.057*l,n=(n=3.2406*a+-1.5372*o+-.4986*l)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,[255*(n=Math.min(Math.max(0,n),1)),255*(t=Math.min(Math.max(0,t),1)),255*(e=Math.min(Math.max(0,e),1))]},l.xyz.lab=function(r){var n=r[0],t=r[1],e=r[2];return t/=100,e/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(t=t>.008856?Math.pow(t,1/3):7.787*t+16/116)-16,500*(n-t),200*(t-(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116))]},l.lab.xyz=function(r){var n,t,e,a=r[0];n=r[1]/500+(t=(a+16)/116),e=t-r[2]/200;var o=Math.pow(t,3),l=Math.pow(n,3),i=Math.pow(e,3);return t=o>.008856?o:(t-16/116)/7.787,n=l>.008856?l:(n-16/116)/7.787,e=i>.008856?i:(e-16/116)/7.787,[n*=95.047,t*=100,e*=108.883]},l.lab.lch=function(r){var n,t=r[0],e=r[1],a=r[2];return(n=360*Math.atan2(a,e)/2/Math.PI)<0&&(n+=360),[t,Math.sqrt(e*e+a*a),n]},l.lch.lab=function(r){var n,t=r[0],e=r[1];return n=r[2]/360*2*Math.PI,[t,e*Math.cos(n),e*Math.sin(n)]},l.rgb.ansi16=function(r){var n=r[0],t=r[1],e=r[2],a=1 in arguments?arguments[1]:l.rgb.hsv(r)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(e/255)<<2|Math.round(t/255)<<1|Math.round(n/255));return 2===a&&(o+=60),o},l.hsv.ansi16=function(r){return l.rgb.ansi16(l.hsv.rgb(r),r[2])},l.rgb.ansi256=function(r){var n=r[0],t=r[1],e=r[2];return n===t&&t===e?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(t/255*5)+Math.round(e/255*5)},l.ansi16.rgb=function(r){var n=r%10;if(0===n||7===n)return r>50&&(n+=3.5),[n=n/10.5*255,n,n];var t=.5*(1+~~(r>50));return[(1&n)*t*255,(n>>1&1)*t*255,(n>>2&1)*t*255]},l.ansi256.rgb=function(r){if(r>=232){var n=10*(r-232)+8;return[n,n,n]}var t;return r-=16,[Math.floor(r/36)/5*255,Math.floor((t=r%36)/6)/5*255,t%6/5*255]},l.rgb.hex=function(r){var n=(((255&Math.round(r[0]))<<16)+((255&Math.round(r[1]))<<8)+(255&Math.round(r[2]))).toString(16).toUpperCase();return\\\"000000\\\".substring(n.length)+n},l.hex.rgb=function(r){var n=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var t=n[0];3===n[0].length&&(t=t.split(\\\"\\\").map((function(r){return r+r})).join(\\\"\\\"));var e=parseInt(t,16);return[e>>16&255,e>>8&255,255&e]},l.rgb.hcg=function(r){var n,t=r[0]/255,e=r[1]/255,a=r[2]/255,o=Math.max(Math.max(t,e),a),l=Math.min(Math.min(t,e),a),i=o-l;return n=i<=0?0:o===t?(e-a)/i%6:o===e?2+(a-t)/i:4+(t-e)/i+4,n/=6,[360*(n%=1),100*i,100*(i<1?l/(1-i):0)]},l.hsl.hcg=function(r){var n=r[1]/100,t=r[2]/100,e=1,a=0;return(e=t<.5?2*n*t:2*n*(1-t))<1&&(a=(t-.5*e)/(1-e)),[r[0],100*e,100*a]},l.hsv.hcg=function(r){var n=r[1]/100,t=r[2]/100,e=n*t,a=0;return e<1&&(a=(t-e)/(1-e)),[r[0],100*e,100*a]},l.hcg.rgb=function(r){var n=r[0]/360,t=r[1]/100,e=r[2]/100;if(0===t)return[255*e,255*e,255*e];var a,o=[0,0,0],l=n%1*6,i=l%1,s=1-i;switch(Math.floor(l)){case 0:o[0]=1,o[1]=i,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=i;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=i,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return a=(1-t)*e,[255*(t*o[0]+a),255*(t*o[1]+a),255*(t*o[2]+a)]},l.hcg.hsv=function(r){var n=r[1]/100,t=n+r[2]/100*(1-n),e=0;return t>0&&(e=n/t),[r[0],100*e,100*t]},l.hcg.hsl=function(r){var n=r[1]/100,t=r[2]/100*(1-n)+.5*n,e=0;return t>0&&t<.5?e=n/(2*t):t>=.5&&t<1&&(e=n/(2*(1-t))),[r[0],100*e,100*t]},l.hcg.hwb=function(r){var n=r[1]/100,t=n+r[2]/100*(1-n);return[r[0],100*(t-n),100*(1-t)]},l.hwb.hcg=function(r){var n=r[1]/100,t=1-r[2]/100,e=t-n,a=0;return e<1&&(a=(t-e)/(1-e)),[r[0],100*e,100*a]},l.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]},l.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]},l.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]},l.gray.hsl=l.gray.hsv=function(r){return[0,0,r[0]]},l.gray.hwb=function(r){return[0,100,r[0]]},l.gray.cmyk=function(r){return[0,0,0,r[0]]},l.gray.lab=function(r){return[r[0],0,0]},l.gray.hex=function(r){var n=255&Math.round(r[0]/100*255),t=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return\\\"000000\\\".substring(t.length)+t},l.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]}},function(r,n,t){\\\"use strict\\\";t.r(n);var e=t(0),a=t.n(e);self.onmessage=r=>{const n=function(r,n){const t=\\\"action\\\"===r?a()(\\\"#ff3464\\\"):a()(\\\"#2F80ED\\\"),e=a()(n).hsl(),o=t.hsl(),l=e.hue()-o.hue(),i=e.saturationl()/o.saturationl(),s=e.lightness()/o.lightness();return r=>{const n=(()=>{const r=(r,n)=>Math.abs(r-n)<5;return(n,t,e)=>r(n,t)&&r(t,e)&&r(n,e)})(),t={};for(let e=0,o=r.length;e<o;e+=4){const o=r[e],h=r[e+1],u=r[e+2];if(!n(o,h,u)){const n=o+1e3*h+1e6*u;if(!t[n]){let r=a()({r:o,g:h,b:u}).hsl();r=r.rotate(l),r.color[1]*=i,r.color[2]*=s;const[e,c,f]=r.rgb().array();t[n]=[e,c,f]}const[c,f,g]=t[n];r[e]=c,r[e+1]=f,r[e+2]=g}}return r}}(r.data.type,r.data.color)(new Uint8ClampedArray(r.data.payload));self.postMessage({id:r.data.id,result:n})}},function(r,n,t){var e=t(1),a=t(5),o={};for(var l in e)e.hasOwnProperty(l)&&(o[e[l]]=l);var i=r.exports={to:{},get:{}};function s(r,n,t){return Math.min(Math.max(n,r),t)}function h(r){var n=r.toString(16).toUpperCase();return n.length<2?\\\"0\\\"+n:n}i.get=function(r){var n,t;switch(r.substring(0,3).toLowerCase()){case\\\"hsl\\\":n=i.get.hsl(r),t=\\\"hsl\\\";break;case\\\"hwb\\\":n=i.get.hwb(r),t=\\\"hwb\\\";break;default:n=i.get.rgb(r),t=\\\"rgb\\\"}return n?{model:t,value:n}:null},i.get.rgb=function(r){if(!r)return null;var n,t,a,o=[0,0,0,1];if(n=r.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(a=n[2],n=n[1],t=0;t<3;t++){var l=2*t;o[t]=parseInt(n.slice(l,l+2),16)}a&&(o[3]=Math.round(parseInt(a,16)/255*100)/100)}else if(n=r.match(/^#([a-f0-9]{3,4})$/i)){for(a=(n=n[1])[3],t=0;t<3;t++)o[t]=parseInt(n[t]+n[t],16);a&&(o[3]=Math.round(parseInt(a+a,16)/255*100)/100)}else if(n=r.match(/^rgba?\\\\(\\\\s*([+-]?\\\\d+)\\\\s*,\\\\s*([+-]?\\\\d+)\\\\s*,\\\\s*([+-]?\\\\d+)\\\\s*(?:,\\\\s*([+-]?[\\\\d\\\\.]+)\\\\s*)?\\\\)$/)){for(t=0;t<3;t++)o[t]=parseInt(n[t+1],0);n[4]&&(o[3]=parseFloat(n[4]))}else{if(!(n=r.match(/^rgba?\\\\(\\\\s*([+-]?[\\\\d\\\\.]+)\\\\%\\\\s*,\\\\s*([+-]?[\\\\d\\\\.]+)\\\\%\\\\s*,\\\\s*([+-]?[\\\\d\\\\.]+)\\\\%\\\\s*(?:,\\\\s*([+-]?[\\\\d\\\\.]+)\\\\s*)?\\\\)$/)))return(n=r.match(/(\\\\D+)/))?\\\"transparent\\\"===n[1]?[0,0,0,0]:(o=e[n[1]])?(o[3]=1,o):null:null;for(t=0;t<3;t++)o[t]=Math.round(2.55*parseFloat(n[t+1]));n[4]&&(o[3]=parseFloat(n[4]))}for(t=0;t<3;t++)o[t]=s(o[t],0,255);return o[3]=s(o[3],0,1),o},i.get.hsl=function(r){if(!r)return null;var n=r.match(/^hsla?\\\\(\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+)(?:deg)?\\\\s*,\\\\s*([+-]?[\\\\d\\\\.]+)%\\\\s*,\\\\s*([+-]?[\\\\d\\\\.]+)%\\\\s*(?:,\\\\s*([+-]?[\\\\d\\\\.]+)\\\\s*)?\\\\)$/);if(n){var t=parseFloat(n[4]);return[(parseFloat(n[1])+360)%360,s(parseFloat(n[2]),0,100),s(parseFloat(n[3]),0,100),s(isNaN(t)?1:t,0,1)]}return null},i.get.hwb=function(r){if(!r)return null;var n=r.match(/^hwb\\\\(\\\\s*([+-]?\\\\d*[\\\\.]?\\\\d+)(?:deg)?\\\\s*,\\\\s*([+-]?[\\\\d\\\\.]+)%\\\\s*,\\\\s*([+-]?[\\\\d\\\\.]+)%\\\\s*(?:,\\\\s*([+-]?[\\\\d\\\\.]+)\\\\s*)?\\\\)$/);if(n){var t=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,s(parseFloat(n[2]),0,100),s(parseFloat(n[3]),0,100),s(isNaN(t)?1:t,0,1)]}return null},i.to.hex=function(){var r=a(arguments);return\\\"#\\\"+h(r[0])+h(r[1])+h(r[2])+(r[3]<1?h(Math.round(255*r[3])):\\\"\\\")},i.to.rgb=function(){var r=a(arguments);return r.length<4||1===r[3]?\\\"rgb(\\\"+Math.round(r[0])+\\\", \\\"+Math.round(r[1])+\\\", \\\"+Math.round(r[2])+\\\")\\\":\\\"rgba(\\\"+Math.round(r[0])+\\\", \\\"+Math.round(r[1])+\\\", \\\"+Math.round(r[2])+\\\", \\\"+r[3]+\\\")\\\"},i.to.rgb.percent=function(){var r=a(arguments),n=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),e=Math.round(r[2]/255*100);return r.length<4||1===r[3]?\\\"rgb(\\\"+n+\\\"%, \\\"+t+\\\"%, \\\"+e+\\\"%)\\\":\\\"rgba(\\\"+n+\\\"%, \\\"+t+\\\"%, \\\"+e+\\\"%, \\\"+r[3]+\\\")\\\"},i.to.hsl=function(){var r=a(arguments);return r.length<4||1===r[3]?\\\"hsl(\\\"+r[0]+\\\", \\\"+r[1]+\\\"%, \\\"+r[2]+\\\"%)\\\":\\\"hsla(\\\"+r[0]+\\\", \\\"+r[1]+\\\"%, \\\"+r[2]+\\\"%, \\\"+r[3]+\\\")\\\"},i.to.hwb=function(){var r=a(arguments),n=\\\"\\\";return r.length>=4&&1!==r[3]&&(n=\\\", \\\"+r[3]),\\\"hwb(\\\"+r[0]+\\\", \\\"+r[1]+\\\"%, \\\"+r[2]+\\\"%\\\"+n+\\\")\\\"},i.to.keyword=function(r){return o[r.slice(0,3)]}},function(r,n,t){\\\"use strict\\\";var e=t(6),a=Array.prototype.concat,o=Array.prototype.slice,l=r.exports=function(r){for(var n=[],t=0,l=r.length;t<l;t++){var i=r[t];e(i)?n=a.call(n,o.call(i)):n.push(i)}return n};l.wrap=function(r){return function(){return r(l(arguments))}}},function(r,n){r.exports=function(r){return!(!r||\\\"string\\\"==typeof r)&&(r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&\\\"String\\\"!==r.constructor.name))}},function(r,n,t){var e=t(2),a=t(8),o={};Object.keys(e).forEach((function(r){o[r]={},Object.defineProperty(o[r],\\\"channels\\\",{value:e[r].channels}),Object.defineProperty(o[r],\\\"labels\\\",{value:e[r].labels});var n=a(r);Object.keys(n).forEach((function(t){var e=n[t];o[r][t]=function(r){var n=function(n){if(null==n)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var t=r(n);if(\\\"object\\\"==typeof t)for(var e=t.length,a=0;a<e;a++)t[a]=Math.round(t[a]);return t};return\\\"conversion\\\"in r&&(n.conversion=r.conversion),n}(e),o[r][t].raw=function(r){var n=function(n){return null==n?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),r(n))};return\\\"conversion\\\"in r&&(n.conversion=r.conversion),n}(e)}))})),r.exports=o},function(r,n,t){var e=t(2);function a(r){var n=function(){for(var r={},n=Object.keys(e),t=n.length,a=0;a<t;a++)r[n[a]]={distance:-1,parent:null};return r}(),t=[r];for(n[r].distance=0;t.length;)for(var a=t.pop(),o=Object.keys(e[a]),l=o.length,i=0;i<l;i++){var s=o[i],h=n[s];-1===h.distance&&(h.distance=n[a].distance+1,h.parent=a,t.unshift(s))}return n}function o(r,n){return function(t){return n(r(t))}}function l(r,n){for(var t=[n[r].parent,r],a=e[n[r].parent][r],l=n[r].parent;n[l].parent;)t.unshift(n[l].parent),a=o(e[n[l].parent][l],a),l=n[l].parent;return a.conversion=t,a}r.exports=function(r){for(var n=a(r),t={},e=Object.keys(n),o=e.length,i=0;i<o;i++){var s=e[i];null!==n[s].parent&&(t[s]=l(s,n))}return t}}]);\\n//# sourceMappingURL=color-shift.worker-7d65bcdcd6a5f767d997.js.map\", \"/\" + \"assets/js/color-shift.worker-7d65bcdcd6a5f767d997.js\");\n};","module.exports = \"precision highp float;\\nprecision highp int;\\n\\nvarying vec2 vUv;\\nvarying vec3 vNormal;\\nvoid main()\\n{\\n  vNormal = normalize(normal);\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n  vUv = position.xz;\\n}\"","module.exports = \"// Based on: https://www.shadertoy.com/view/Mll3D4#\\n\\nprecision highp float;\\nprecision highp int;\\n\\nvarying vec2 vUv;\\nvarying vec3 vNormal;\\nuniform float time;\\n\\nconst int LINEAR = 0;\\nconst int INVERSE = 1;\\nconst int EXPONENTIAL = 2;\\n        \\nuniform vec3 colorInner;\\nuniform vec3 colorOuter;\\nuniform vec3 colorGain;\\nuniform int count;\\nuniform vec3 sourcePosition[MAX_DEBUG_SOURCES];\\nuniform vec3 sourceOrientation[MAX_DEBUG_SOURCES];\\nuniform float maxDistance[MAX_DEBUG_SOURCES];\\nuniform float refDistance[MAX_DEBUG_SOURCES];\\nuniform float rolloffFactor[MAX_DEBUG_SOURCES];\\nuniform int distanceModel[MAX_DEBUG_SOURCES];\\nuniform float coneInnerAngle[MAX_DEBUG_SOURCES];\\nuniform float coneOuterAngle[MAX_DEBUG_SOURCES];\\nuniform float gain[MAX_DEBUG_SOURCES];\\nuniform bool clipped[MAX_DEBUG_SOURCES];\\n\\nconst float kPi = 3.141592;\\nconst float kDegToRad = kPi / 180.0;\\nconst float kInvPi = 1.0 / 3.141592;\\nconst float kRefDistWidth = 0.05;\\n\\nfloat distance[MAX_DEBUG_SOURCES];\\nvec2 center[MAX_DEBUG_SOURCES];\\nfloat startOffset[MAX_DEBUG_SOURCES];\\nfloat clampedGain[MAX_DEBUG_SOURCES];\\n\\nfloat att_linear(float x, float rolloff, float dref, float dmax) {\\n  return 1.0-(rolloff*((x-dref)/(dmax-dref)));\\n}\\n\\nfloat att_inverse(float x, float rolloff, float dref) {\\n  return dref/(dref+(rolloff*(max(x, dref)-dref)));\\n}\\n\\nfloat att_exponential(float x, float rolloff, float dref) {\\n  return pow((max(x, dref)/dref),-rolloff);\\n}\\n\\nvec4 circle(vec2 center, float d, float len, float radius, float holeRadius, vec3 color, float offset) {  \\n  // Define how blurry the circle should be. \\n  // A value of 1.0 means 'sharp', larger values\\n  // will increase the bluriness.\\n  float bluriness = 1.0;\\n  \\n  // Calculate angle, so we can draw segments, too.\\n  float angle = atan( center.x, center.y ) * kInvPi * 0.5;\\n  angle = fract( angle + offset);\\n  \\n  // Create an anti-aliased circle.\\n  float wd = bluriness * fwidth( d );\\n  float circle = smoothstep( radius + wd, radius - wd, d );\\n  \\n  // Optionally, you could create a hole in it:\\n  float inner = holeRadius;\\n  circle -= smoothstep( inner + wd, inner - wd, d );\\n  \\n  // Or only draw a portion (segment) of the circle.\\n  float wa = bluriness * fwidth( angle );\\n  float segment = smoothstep( len + wa, len - wa, angle );\\n  segment *= smoothstep( 0.0, 2.0 * wa, angle );\\n  circle *= mix( segment, 1.0, step( 1.0, len ) );\\n      \\n  // Let's define the circle's color now.\\n  vec3 rgb = color * circle;\\n  \\n  // Output final color.\\n  return vec4( rgb, circle);\\n}\\n\\nfloat att(float d, float maxDistance, float refDistance, float rolloffFactor, int distanceModel) {\\n  // Calculate attenuation\\n  float attenuation = 1.0;\\n  if (distanceModel == LINEAR) {\\n    attenuation = att_linear(d, rolloffFactor, refDistance, maxDistance);\\n  } else if (distanceModel == INVERSE) {\\n    attenuation = att_inverse(d, rolloffFactor, refDistance);\\n  } else if (distanceModel == EXPONENTIAL) {\\n    attenuation = att_exponential(d, rolloffFactor, refDistance);\\n  }\\n  return clamp(attenuation, 0.0, 1.0);\\n}\\n\\nvec4 draw_att(float d, float attenuation, vec4 circle) {\\n  // Waves\\n  float v = sin((d * 2.0 * kPi) - (time * 0.005)) + 1.0;\\n  float waves = circle.a * attenuation * v;\\n  \\n  // Output final color.\\n  return vec4( circle.rgb, waves );\\n}\\n\\nvoid main() {\\n  // Draw background\\n  vec4 background = vec4(1.0, 1.0, 1.0, 0.0);\\n\\n  for (int i=0; i<count; i++) {\\n    center[i] = sourcePosition[i].xz - vUv;\\n\\n    // Calculate distance to (0,0).\\n    distance[i] = length( center[i] );\\n\\n    // Optional start Offset.\\n    vec2 orientation = normalize(sourceOrientation[i].xz);\\n    float ang = atan(-orientation.x, orientation.y) * kInvPi * 0.5;\\n    // Rotate to start drawing facing front\\n    ang -= 0.5;\\n    startOffset[i] = mod(ang, 1.0);\\n\\n    // Gain\\n    clampedGain[i] = clamp(gain[i], 0.0, 1.0);\\n  }\\n\\n  for (int i=0; i<count; i++) {\\n    float attenuation = att(distance[i], maxDistance[i], refDistance[i], rolloffFactor[i], distanceModel[i]);\\n\\n    // Draw inner cone\\n    float innerAngle = coneInnerAngle[i] * kDegToRad * kInvPi * 0.5;\\n    float innerStartAngle = startOffset[i] + innerAngle * 0.5;\\n    vec4 innerLayer = circle(center[i], distance[i], innerAngle, 10000.0, 1.0, colorInner, innerStartAngle);\\n    innerLayer = draw_att(distance[i], attenuation, innerLayer);\\n    background = mix(background, innerLayer, innerLayer.a * clampedGain[i]);\\n\\n    // Draw outer cone\\n    float outerAngle = coneOuterAngle[i] * kDegToRad * kInvPi * 0.5;\\n    float outerAngleDiffHalf = (outerAngle - innerAngle) * 0.5;\\n    vec4 outerLayer1 = circle(center[i], distance[i], outerAngleDiffHalf, 10000.0, 1.0, colorOuter, innerStartAngle + outerAngleDiffHalf);\\n    outerLayer1 = draw_att(distance[i], attenuation, outerLayer1);\\n    background = mix(background, outerLayer1, outerLayer1.a * clampedGain[i]);\\n    vec4 outerLayer2 = circle(center[i], distance[i], outerAngleDiffHalf, 10000.0, 1.0, colorOuter, innerStartAngle - innerAngle);\\n    outerLayer2 = draw_att(distance[i], attenuation, outerLayer2);\\n    background = mix(background, outerLayer2, outerLayer2.a * (clipped[i] ? 0.0 : 1.0) * clampedGain[i]);\\n  }\\n\\n  for (int i=0; i<count; i++) {\\n    // Draw base\\n    vec4 baseLayer = circle(center[i], distance[i], 1.0, 1.0, 0.1, vec3(0.5, 0.5, 0.5), 0.0);\\n    background = mix(background, baseLayer, baseLayer.a);\\n\\n    // Draw gain\\n    vec4 gainLayer = circle(center[i], distance[i], clampedGain[i], 1.0, 0.5, colorGain, startOffset[i]);\\n    background = mix(background, gainLayer, gainLayer.a);\\n    if (gain[i] > 1.0) {\\n      vec4 overGainLayer = circle(center[i], distance[i], gain[i] -  clampedGain[i], 1.0, 0.5, vec3(1.0, 0.0, 0.0), startOffset[i]);\\n      background = mix(background, overGainLayer, overGainLayer.a);\\n    }\\n  } \\n  \\n  // Blend\\n  gl_FragColor = vec4(background.rgb, background.a * vNormal.y);\\n}\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"oauth-screen\":\"OAuthScreen__oauth-screen__1gFQL\",\"oauthScreen\":\"OAuthScreen__oauth-screen__1gFQL\"};","import { themes } from \"../react-components/styles/theme\";\n\nexport function getColorSchemePref() {\n  const darkmodeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n  const darkMode = darkmodeQuery.matches;\n  return (darkMode && themes.find(t => t.darkModeDefault)) || themes.find(t => t.default);\n}\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\nimport avatarUnavailableImage from \"../assets/images/avatar_unavailable.png\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport const AVATAR_TYPES = {\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nexport function getAvatarType(avatarId) {\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return avatarUnavailableImage;\n  }\n}\n\n// Currently the way we do material overrides is with a special named material.\n// We want to migrate eventually to having a GLTF extension that specifies what\n// materials can be overridden, but in the meantime we want to be able to support\n// arbitrary models with some sort of functionality. This provides a fallback\nexport const MAT_NAME = \"Bot_PBS\";\nexport function ensureAvatarMaterial(gltf) {\n  if (gltf.materials.find(m => m.name === MAT_NAME)) return gltf;\n\n  function materialForMesh(mesh) {\n    if (!mesh.primitives) return;\n    const primitive = mesh.primitives.find(p => p.material !== undefined);\n    return primitive && gltf.materials[primitive.material];\n  }\n\n  let nodes = gltf.scenes[gltf.scene].nodes.slice(0);\n  while (nodes.length) {\n    const node = gltf.nodes[nodes.shift()];\n    const material = node.mesh !== undefined && materialForMesh(gltf.meshes[node.mesh]);\n    if (material) {\n      material.name = MAT_NAME;\n      break;\n    }\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n\n  return gltf;\n}\n\nexport async function remixAvatar(parentId, name) {\n  const avatar = {\n    parent_avatar_listing_id: parentId,\n    name: name,\n    files: {}\n  };\n\n  return fetchReticulumAuthenticated(AVATARS_API, \"POST\", { avatar });\n}\n","import Raven from \"raven-js\";\nimport configs from \"./utils/configs\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = configs.SENTRY_DSN;\n  const gaTrackingId = configs.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n    <style>\n      #debug-log {\n        position: absolute;\n        top: 13em;\n        background: white;\n        opacity: 0.7;\n        z-index: 1000;\n      }\n      #debug-log, #debug-log-input {\n        font-family: monospace;\n        font-size: 11px;\n        width: 100%;\n      }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n    </style>\n    <div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n        <div id=\"debug-log-log\"></div>\n    </div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleInfo = console.info;\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  console.info = function() {\n    origConsoleInfo.apply(null, arguments);\n    log(\"info\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"MicSetupModal__content__2ZUH6\",\"audio-check-container\":\"MicSetupModal__audio-check-container__VcphD\",\"audioCheckContainer\":\"MicSetupModal__audio-check-container__VcphD\",\"audio-io-container\":\"MicSetupModal__audio-io-container__2KuwI\",\"audioIoContainer\":\"MicSetupModal__audio-io-container__2KuwI\",\"icon-enabled\":\"MicSetupModal__icon-enabled__3mxrr\",\"iconEnabled\":\"MicSetupModal__icon-enabled__3mxrr\",\"icon-disabled\":\"MicSetupModal__icon-disabled__3k9bL\",\"iconDisabled\":\"MicSetupModal__icon-disabled__3k9bL\",\"icon-container\":\"MicSetupModal__icon-container__2p0jr\",\"iconContainer\":\"MicSetupModal__icon-container__2p0jr\",\"action-container\":\"MicSetupModal__action-container__iZU8O\",\"actionContainer\":\"MicSetupModal__action-container__iZU8O\",\"selection-container\":\"MicSetupModal__selection-container__3vLUs\",\"selectionContainer\":\"MicSetupModal__selection-container__3vLUs\",\"selection-input\":\"MicSetupModal__selection-input__1KF7f\",\"selectionInput\":\"MicSetupModal__selection-input__1KF7f\",\"popover\":\"MicSetupModal__popover__2oQQD\",\"popover-arrow\":\"MicSetupModal__popover-arrow__3G38i\",\"popoverArrow\":\"MicSetupModal__popover-arrow__3G38i\",\"popover-content\":\"MicSetupModal__popover-content__2Mod_\",\"popoverContent\":\"MicSetupModal__popover-content__2Mod_\",\"error-title\":\"MicSetupModal__error-title__2sKGI\",\"errorTitle\":\"MicSetupModal__error-title__2sKGI\",\"spinner-container\":\"MicSetupModal__spinner-container__324aK\",\"spinnerContainer\":\"MicSetupModal__spinner-container__324aK\",\"info-icon\":\"MicSetupModal__info-icon__aXhaS\",\"infoIcon\":\"MicSetupModal__info-icon__aXhaS\",\"level-bar\":\"MicSetupModal__level-bar__u4Xri\",\"levelBar\":\"MicSetupModal__level-bar__u4Xri\"};","import { waitForDOMContentLoaded } from \"./async-utils\";\nimport configs from \"./configs\";\n\n// Node these should be synchronized with the top of shared.scss\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\n\nconst DEFAULT_COLORS = {\n  \"action-color\": DEFAULT_ACTION_COLOR,\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-text-color\": \"#FFFFFF\",\n  \"action-subtitle-color\": \"#F0F0F0\",\n  \"notice-background-color\": \"#2F80ED\",\n  \"notice-text-color\": \"#FFFFFF\",\n  \"favorited-color\": \"#FFC000\",\n  \"nametag-color\": \"#000000\",\n  \"nametag-volume-color\": \"#7ED320\",\n  \"nametag-text-color\": \"#FFFFFF\",\n  \"nametag-border-color\": \"#7ED320\",\n  \"nametag-border-color-raised-hand\": \"#FFCD74\"\n};\n\nfunction getThemeColor(name) {\n  const themeId = window.APP?.store?.state?.preferences?.theme;\n\n  const theme =\n    (themeId && configs.APP_CONFIG?.theme?.themes?.find(theme => theme.id === themeId)) ||\n    configs.APP_CONFIG?.theme?.themes?.find(theme => theme.default === true);\n  if (theme?.variables?.[name]) {\n    return theme.variables[name];\n  }\n\n  return DEFAULT_COLORS[name];\n}\n\nfunction activateTheme() {\n  const actionColor = getThemeColor(\"action-color\");\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\n\n  if (document.querySelector(\"#rounded-text-button\")) {\n    // NOTE, using the object-based {} setAttribute variant in a-frame\n    // seems to not work in Firefox here -- the entities with the mixins are not\n    // updated.\n    document\n      .querySelector(\"#rounded-text-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-text-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n\n    document\n      .querySelector(\"#rounded-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n  }\n}\n\nconst onStoreChanged = (function() {\n  let themeId;\n  return function onStoreChanged() {\n    const newThemeId = window.APP?.store?.state?.preferences?.theme;\n    if (themeId !== newThemeId) {\n      themeId = newThemeId;\n      activateTheme();\n    }\n  };\n})();\n\nwaitForDOMContentLoaded().then(() => {\n  if (configs.APP_CONFIG && configs.APP_CONFIG.theme && configs.APP_CONFIG.theme[\"dark-theme\"]) {\n    document.body.classList.add(\"dark-theme\");\n  } else {\n    document.body.classList.add(\"light-theme\");\n  }\n  activateTheme();\n  window.APP?.store?.addEventListener(\"statechanged\", onStoreChanged);\n});\n\nfunction applyThemeToTextButton(el, highlighted) {\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundColor\",\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\n  );\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundHoverColor\",\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\n  );\n}\n\nexport { applyThemeToTextButton, getThemeColor };\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    await this.store.resetToRandomDefaultAvatar();\n    this._signedIn = false;\n  };\n\n  verifyAuthentication(authTopic, authToken, authPayload) {\n    const channel = this.socket.channel(authTopic);\n    return new Promise((resolve, reject) => {\n      channel.onError(() => {\n        channel.leave();\n        reject();\n      });\n\n      channel\n        .join()\n        .receive(\"ok\", () => {\n          channel.on(\"auth_credentials\", async ({ credentials: token, payload: payload }) => {\n            await this.handleAuthCredentials(payload.email, token);\n            resolve();\n          });\n\n          channel.push(\"auth_verified\", { token: authToken, payload: authPayload });\n        })\n        .receive(\"error\", reject);\n    });\n  }\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        await this.handleAuthCredentials(email, token, hubChannel);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n\n  async handleAuthCredentials(email, token, hubChannel) {\n    this.store.update({ credentials: { email, token } });\n\n    if (hubChannel) {\n      await hubChannel.signIn(token);\n    }\n\n    this._signedIn = true;\n  }\n}\n","// Disable ImageBitmap for Firefox so far because\n// createImageBitmap() with option fails on Firefox due to the bug.\n// Three.js ImageBitmapLoader passes {colorSpaceConversion: 'none'} option.\n// Without the option, the rendering result can be wrong if image file has ICC profiles.\n// See https://github.com/mrdoob/three.js/pull/21336\nconst HAS_IMAGE_BITMAP = window.createImageBitmap !== undefined && /Firefox/.test(navigator.userAgent) === false;\nexport const TEXTURES_FLIP_Y = !HAS_IMAGE_BITMAP;\n\nexport default class HubsTextureLoader extends THREE.TextureLoader {\n  constructor(manager) {\n    super(manager);\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = HAS_IMAGE_BITMAP\n      ? this.loadImageBitmapTexture(url, onLoad, onProgress, onError)\n      : super.load(url, onLoad, onProgress, onError);\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n    };\n\n    return texture;\n  }\n\n  async loadAsync(url, onProgress) {\n    return new Promise((resolve, reject) => {\n      this.load(url, resolve, onProgress, reject);\n    });\n  }\n\n  loadImageBitmapTexture(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n    const loader = new THREE.ImageBitmapLoader(this.manager);\n    loader.setCrossOrigin(this.crossOrigin);\n    loader.setPath(this.path);\n\n    loader.load(\n      url,\n      bitmap => {\n        texture.image = bitmap;\n        texture.needsUpdate = true;\n\n        // We close the image bitmap when it's uploaded to texture.\n        // Closed image bitmap can't be reused so we remove the cache\n        // added in ImageBitmapLoader.\n        // You can remove this line once we entirely disable THREE.Cache.\n        THREE.Cache.remove(this.manager.resolveURL(url));\n\n        if (onLoad !== undefined) {\n          onLoad(texture);\n        }\n      },\n      onProgress,\n      onError\n    );\n\n    texture.flipY = false;\n    return texture;\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"hidden\":\"virtual-gamepad-controls__hidden__2ev3w\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};"],"sourceRoot":""}